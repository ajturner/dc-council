{"version":3,"sources":["node_modules/papaparse/papaparse.min.js","node_modules/unique-names-generator/dist/index.m.js","src/utils/data.ts","node_modules/@stencil/store/dist/index.mjs","node_modules/lz-string/libs/lz-string.js","src/utils/council.ts","src/utils/types.ts","src/utils/state.ts","src/components/dc-council-agency-card/dc-council-agency-card.css?tag=dc-council-agency-card&encapsulation=shadow","src/components/dc-council-agency-card/dc-council-agency-card.tsx","src/components/dc-council-agency-list/dc-council-agency-list.css?tag=dc-council-agency-list&encapsulation=shadow","src/components/dc-council-agency-list/dc-council-agency-list.tsx","src/components/dc-council-card/dc-council-card.css?tag=dc-council-card&encapsulation=shadow","src/components/dc-council-card/dc-council-card.tsx","src/components/dc-council-committee-card/dc-council-committee-card.css?tag=dc-council-committee-card&encapsulation=scoped","src/components/dc-council-committee-card/dc-council-committee-card.tsx","src/components/dc-council-committee-list/dc-council-committee-list.css?tag=dc-council-committee-list&encapsulation=shadow","src/components/dc-council-committee-list/dc-council-committee-list.tsx","src/components/dc-council-committee-member-list/dc-council-committee-member-list.css?tag=dc-council-committee-member-list&encapsulation=shadow","src/components/dc-council-committee-member-list/dc-council-committee-member-list.tsx","src/components/dc-council-committee-placeholder/dc-council-committee-placeholder.css?tag=dc-council-committee-placeholder&encapsulation=scoped","src/components/dc-council-committee-placeholder/dc-council-committee-placeholder.tsx","src/components/dc-council-game/dc-council-game.css?tag=dc-council-game&encapsulation=scoped","src/components/dc-council-game/dc-council-game.tsx","src/components/dc-council-info-panel/dc-council-info-panel.css?tag=dc-council-info-panel&encapsulation=shadow","src/components/dc-council-info-panel/dc-council-info-panel.tsx","src/components/dc-council-member-card/dc-council-member-card.css?tag=dc-council-member-card&encapsulation=shadow","src/components/dc-council-member-card/dc-council-member-card.tsx","src/components/dc-council-member-list/dc-council-member-list.css?tag=dc-council-member-list&encapsulation=shadow","src/components/dc-council-member-list/dc-council-member-list.tsx","src/components/dc-council-preview/dc-council-preview.css?tag=dc-council-preview&encapsulation=shadow","src/components/dc-council-preview/dc-council-preview.tsx","src/components/dc-council-share/dc-council-share.css?tag=dc-council-share&encapsulation=shadow","src/components/dc-council-share/dc-council-share.tsx","src/components/dc-council-template/dc-council-template.css?tag=dc-council-template&encapsulation=shadow","src/components/dc-council-template/dc-council-template.tsx","node_modules/tslib/tslib.es6.js","node_modules/@amcharts/amcharts5/.internal/core/util/Type.js","node_modules/@amcharts/amcharts5/.internal/core/util/Array.js","node_modules/@amcharts/amcharts5/.internal/core/util/Disposer.js","node_modules/@amcharts/amcharts5/.internal/core/util/EventDispatcher.js","node_modules/@amcharts/amcharts5/.internal/core/util/List.js","node_modules/@amcharts/amcharts5/.internal/core/util/Children.js","node_modules/@amcharts/amcharts5/.internal/core/util/Percent.js","node_modules/@amcharts/amcharts5/.internal/core/util/Object.js","node_modules/@amcharts/amcharts5/.internal/core/util/Utils.js","node_modules/@amcharts/amcharts5/.internal/core/util/Color.js","node_modules/@amcharts/amcharts5/.internal/core/util/Animation.js","node_modules/@amcharts/amcharts5/.internal/core/util/Math.js","node_modules/@amcharts/amcharts5/.internal/core/util/Ease.js","node_modules/@amcharts/amcharts5/.internal/core/util/States.js","node_modules/@amcharts/amcharts5/.internal/core/Registry.js","node_modules/@amcharts/amcharts5/.internal/core/util/Order.js","node_modules/@amcharts/amcharts5/.internal/core/util/Entity.js","node_modules/@amcharts/amcharts5/.internal/core/util/Template.js","node_modules/@amcharts/amcharts5/.internal/core/render/Sprite.js","node_modules/@amcharts/amcharts5/.internal/core/render/patterns/Pattern.js","node_modules/@amcharts/amcharts5/.internal/core/render/patterns/PicturePattern.js","node_modules/@amcharts/amcharts5/.internal/core/render/backend/Renderer.js","node_modules/@amcharts/amcharts5/.internal/core/render/Graphics.js","node_modules/@amcharts/amcharts5/.internal/core/render/Rectangle.js","node_modules/@amcharts/amcharts5/.internal/core/render/Layout.js","node_modules/@amcharts/amcharts5/.internal/core/render/HorizontalLayout.js","node_modules/@amcharts/amcharts5/.internal/core/render/VerticalLayout.js","node_modules/@amcharts/amcharts5/.internal/core/render/GridLayout.js","node_modules/@amcharts/amcharts5/.internal/core/util/TextFormatter.js","node_modules/@amcharts/amcharts5/.internal/core/util/PopulateString.js","node_modules/@amcharts/amcharts5/.internal/core/render/Container.js","node_modules/@amcharts/amcharts5/.internal/core/render/Text.js","node_modules/@amcharts/amcharts5/.internal/core/util/ResizeSensor.js","node_modules/@amcharts/amcharts5/.internal/core/util/InterfaceColors.js","node_modules/@amcharts/amcharts5/.internal/core/render/Label.js","node_modules/@amcharts/amcharts5/.internal/core/render/PointedRectangle.js","node_modules/@amcharts/amcharts5/.internal/core/render/Tooltip.js","node_modules/@amcharts/amcharts5/.internal/core/util/NumberFormatter.js","node_modules/@amcharts/amcharts5/.internal/core/util/Timezone.js","node_modules/@amcharts/amcharts5/.internal/core/util/DateFormatter.js","node_modules/@amcharts/amcharts5/.internal/core/util/DurationFormatter.js","node_modules/@amcharts/amcharts5/locales/en.js","node_modules/@amcharts/amcharts5/.internal/core/util/Language.js","node_modules/@amcharts/amcharts5/.internal/core/Theme.js","node_modules/@amcharts/amcharts5/.internal/themes/DefaultTheme.js","node_modules/@amcharts/amcharts5/.internal/core/util/Matrix.js","node_modules/svg-arc-to-cubic-bezier/modules/index.js","node_modules/@amcharts/amcharts5/.internal/core/render/backend/CanvasRenderer.js","node_modules/@amcharts/amcharts5/.internal/core/Root.js","node_modules/@amcharts/amcharts5/.internal/core/render/RoundedRectangle.js","node_modules/@amcharts/amcharts5/.internal/core/util/Data.js","node_modules/@amcharts/amcharts5/.internal/core/render/Component.js","node_modules/@amcharts/amcharts5/.internal/core/util/Time.js","node_modules/@amcharts/amcharts5/.internal/core/render/Series.js","node_modules/@amcharts/amcharts5/.internal/core/util/ColorSet.js","node_modules/@amcharts/amcharts5/.internal/charts/hierarchy/HierarchyDefaultTheme.js","node_modules/@amcharts/amcharts5/.internal/charts/hierarchy/BreadcrumbBar.js","node_modules/@amcharts/amcharts5/.internal/charts/hierarchy/HierarchyNode.js","node_modules/d3-hierarchy/src/hierarchy/count.js","node_modules/d3-hierarchy/src/hierarchy/each.js","node_modules/d3-hierarchy/src/hierarchy/eachBefore.js","node_modules/d3-hierarchy/src/hierarchy/eachAfter.js","node_modules/d3-hierarchy/src/hierarchy/find.js","node_modules/d3-hierarchy/src/hierarchy/sum.js","node_modules/d3-hierarchy/src/hierarchy/sort.js","node_modules/d3-hierarchy/src/hierarchy/path.js","node_modules/d3-hierarchy/src/hierarchy/ancestors.js","node_modules/d3-hierarchy/src/hierarchy/descendants.js","node_modules/d3-hierarchy/src/hierarchy/leaves.js","node_modules/d3-hierarchy/src/hierarchy/links.js","node_modules/d3-hierarchy/src/hierarchy/iterator.js","node_modules/d3-hierarchy/src/hierarchy/index.js","node_modules/d3-hierarchy/src/accessors.js","node_modules/d3-hierarchy/src/constant.js","node_modules/d3-hierarchy/src/treemap/round.js","node_modules/d3-hierarchy/src/treemap/dice.js","node_modules/d3-hierarchy/src/treemap/slice.js","node_modules/d3-hierarchy/src/treemap/squarify.js","node_modules/d3-hierarchy/src/treemap/index.js","node_modules/d3-hierarchy/src/treemap/binary.js","node_modules/d3-hierarchy/src/treemap/sliceDice.js","node_modules/@amcharts/amcharts5/.internal/charts/hierarchy/Hierarchy.js","node_modules/@amcharts/amcharts5/.internal/charts/hierarchy/Treemap.js","node_modules/@amcharts/amcharts5/.internal/themes/AnimatedTheme.js","src/components/dc-council-visualization/dc-council-visualization.css?tag=dc-council-visualization&encapsulation=shadow","src/components/dc-council-visualization/dc-council-visualization.tsx"],"names":["e","t","module","exports","this","s","f","self","window","n","document","postMessage","o","test","location","protocol","a","h","b","parse","i","dynamicTyping","M","dynamicTypingFunction","transform","worker","WORKERS_SUPPORTED","r","URL","webkitURL","toString","BLOB_URL","createObjectURL","Blob","type","Worker","onmessage","_","id","userStep","step","userChunk","chunk","userComplete","complete","userError","error","input","config","workerId","download","l","p","readable","read","on","g","File","Object","c","stream","unparse","m","y","delimiter","BAD_DELIMITERS","filter","indexOf","length","quotes","Array","isArray","skipEmptyLines","newline","quoteChar","header","columns","Error","escapeChar","escapeFormulae","RegExp","j","JSON","u","keys","data","fields","meta","v","join","trim","d","push","constructor","Date","stringify","slice","replace","charAt","RECORD_SEP","String","fromCharCode","UNIT_SEP","BYTE_ORDER_MARK","NODE_STREAM_INPUT","LocalChunkSize","RemoteChunkSize","DefaultDelimiter","Parser","E","ParserHandle","NetworkStreamer","FileStreamer","StringStreamer","ReadableStreamStreamer","jQuery","fn","each","prop","toUpperCase","attr","toLowerCase","FileReader","files","file","inputElem","instanceConfig","extend","before","action","reason","name","splice","_handle","_finished","_completed","_halted","_input","_baseIndex","_partialLine","_rowCount","_start","_nextChunk","isFirstChunk","_completeResults","errors","w","chunkSize","parseInt","streamer","_config","call","parseChunk","beforeFirstChunk","paused","aborted","cursor","substring","preview","results","WORKER_ID","finished","concat","_sendError","_readChunk","_chunkLoaded","XMLHttpRequest","withCredentials","onload","onerror","_chunkError","open","downloadRequestBody","downloadRequestHeaders","setRequestHeader","send","message","status","readyState","responseText","getResponseHeader","lastIndexOf","statusText","webkitSlice","mozSlice","FileReaderSync","Math","min","size","readAsText","encoding","target","result","pause","prototype","apply","arguments","resume","_streamData","_streamEnd","_streamError","_checkIsFinished","shift","_streamCleanUp","removeListener","pow","abort","k","transformHeader","forEach","map","parseFloat","code","row","split","comments","abs","successful","bestDelimiter","delimitersToGuess","getCharIndex","setTimeout","S","O","x","I","T","D","A","fastMode","L","F","z","C","R","index","substr","linebreak","truncated","terminate","create","imul","[object Object]","dictionaries","separator","style","seed","reduce","charCodeAt","floor","Number","random","generate","async","loadFile","filename","parser","parseConfig","fetch","text","parseFile","Papa.parse","parseData","console","simpleParse","loadAgencies","agencies","loadCommittees","members","committeesData","committees","committee","description","link","editable","_a","permanent","loadedMembers","chair","includes","agency","loadBlank","defaultCommittees","permanentCommittees","array","newCommittee","assign","startingCommittees","createCommittee","loadMembers","toTitleCase","str","txt","values","defaultCommittee","generateName","randomName","uniqueNamesGenerator","animals","calculateBudget","budgetSum","sum","budget","budgetString","Intl","NumberFormat","currency","maximumFractionDigits","maximumSignificantDigits","format","appendToMap","propName","value","items","get","set","debounce","ms","timeoutId","args","clearTimeout","isConnected","maybeElement","cleanupElements","key","stencilSubscription","getRenderingRef","elmsToUpdate","Map","dispose","clear","elm","elements","forceUpdate","reset","elms","unwrap","val","createObservableMap","defaultState","shouldUpdate","unwrappedState","states","entries","handlers","cb","oldValue","state","Proxy","from","enumerable","configurable","has","eventName","callback","removeFromArray","onChange","unSet","newValue","unReset","use","subscriptions","unsubs","subscription","unsub","item","createStore","LZString","keyStrBase64","keyStrUriSafe","baseReverseDic","getBaseValue","alphabet","character","compressToBase64","res","_compress","decompressFromBase64","_decompress","compressToUTF16","decompressFromUTF16","compressed","compressToUint8Array","uncompressed","compress","buf","Uint8Array","TotalLen","current_value","decompressFromUint8Array","undefined","decompress","compressToEncodedURIComponent","decompressFromEncodedURIComponent","bitsPerChar","getCharFromInt","context_dictionary","context_dictionaryToCreate","context_c","context_wc","context_w","context_enlargeIn","context_dictSize","context_numBits","context_data","context_data_val","context_data_position","ii","hasOwnProperty","resetValue","getNextValue","dictionary","enlargeIn","dictSize","numBits","entry","bits","resb","maxpower","power","position","councilAPI","LEGACY_SERIALIZATION_LENGTH","saveCouncil","council","committeesString","serializeCommittees","url","method","respJson","headers","Accept","Content-Type","body","councilData","json","log","getCouncil","committeesState","deserializeCommittees","SERIALIZATION_SEPARATOR","object","serialization","_committees","loadedCommittees","chairsArray","membersArray","agenciesArray","loadedAgencies","CouncilTemplate","CardAction","draggable","saved","resetState","history","pushState","title","pathname","committeesStateParameter","templateStateParameter","editStateParameter","getTemplateParam","search","searchParams","URLSearchParams","current","getTemplate","defaultTemplate","templateParam","getVersion","setVersion","store","councilSave","committeeString","binary","secret","savedId","editUrl","href","delete","shareUrl","share","edit","checkEditable","_b","dcCouncilAgencyCardCss","DcCouncilAgencyCard","hostRef","_ev","ev","currentTarget","classList","add","dataTransfer","clearData","setData","effectAllowed","Host","onDragStart","dragStart","bind","onDragEnd","dragEnd","class","slot","renderAction","renderInfoPanel","remove","icon","scale","aria-hidden","onClick","_evt","agencyRemove","emit","dcCouncilAgencyListCss","DcCouncilAgencyList","display","newAgencies","existingAgencies","agenciesChanged","evt","detail","removeAgency","removedAgency","preventDefault","getData","newAgency","addAgency","onDrop","addedElement","onDragOver","allowDrop","dcCouncilCardCss","DcCouncilCard","thumbnail","src","dcCouncilCommitteeCardCss","DcCouncilCommitteeCard","editing","updateStats","membersEl","getMembers","committeeUpdated","agenciesEl","removeCommittee","stats","renderStats","countAgencies","countMembers","count","_d","_c","el","titleInputEl","classes","renderDelete","editMode","intl-cancel-editing","intl-enable-editing","intl-confirm-changes","controls","alignment","prefix-text","suffix-text","placeholder","ref","renderAgencyList","appearance","color","icon-start","width","deleteCommittee","dcCouncilCommitteeListCss","DcCouncilCommitteeList","renderNewCommittee","dcCouncilCommitteeMemberListCss","DcCouncilCommitteeMemberList","chairEl","max","dcCouncilCommitteePlaceholderCss","DcCouncilCommitteePlaceholder","addCommittee","buttonClicked","dcCouncilGameCss","DcCouncilGame","template","agencyFilename","minoragencyFilename","committeeFilename","memberFilename","selectedPieces","restart","sidebar","minorAgencyDisplay","minoragencies","loadTemplate","usedAgencies","flat","availableAgencies","layout","checked","renderTemplatePicker","renderSidebar","renderBoard","renderFooter","renderEditableTitle","agencyDisplayEl","hidden","renderSelector","dcCouncilInfoPanelCss","DcCouncilInfoPanel","hideModal","showModal","renderModal","background-color","intl-close","aria-labelledby","dcCouncilMemberCardCss","DcCouncilMemberCard","member","imageSrc","getAssetPath","photo","role","memberRemove","dcCouncilMemberListCss","DcCouncilMemberList","newMembers","_oldMembers","existingMembers","newSize","removeMembers","membersChanged","newMember","addMembers","getClasses","dcCouncilPreviewCss","DcCouncilPreview","renderPreviewCommittee","renderMember","person","dcCouncilShareCss","DcCouncilShare","saving","urls","refEl","inputUrl","primary","readonly","copyText","select","setSelectionRange","execCommand","renderButtons","renderPreview","renderCopy","inputShareUrlEl","renderTwitter","renderFacebook","renderEditInfo","inputEditUrlEl","savedState","shareButton","saveButton","loading","dcCouncilTemplateCss","DcCouncilTemplate","templateSelected","choice","path","tileSelectEl","dir","heading","input-alignment","templateCurrent","templateBlank","renderChoiceButtons","chooseTemplate","renderChoice","saveChoice","extendStatics","setPrototypeOf","__proto__","__extends","TypeError","__","__awaiter","thisArg","_arguments","P","generator","adopt","resolve","Promise","reject","fulfilled","next","rejected","done","then","__generator","label","sent","trys","ops","verb","throw","return","Symbol","iterator","op","pop","__read","ar","__spreadArray","to","pack","isNaN","getType","toNumber","isNumber","converted","isString","toDate","isDate","num","numberToString","Infinity","negative","parsed","exec","digits","decimals","exponent","zeros","repeat","string","amount","isObject","PLACEHOLDER","PLACEHOLDER2","any","output","eachReverse","eachContinue","element","found","removeFirst","pushOne","copy","insertIndex","removeIndex","findIndex","matches","findIndexReverse","find","findReverse","getSortedIndex","ordering","start","end","pivot","order","getFirstSortedIndex","keepIf","keep","DisposerClass","defineProperty","writable","_disposed","_dispose","Disposer","ArrayDisposer","_super","_this","$array.each","_disposers","MultiDisposer","disposers","MutableValueDisposer","_disposer","_value","disposer","CounterDisposer","_counter","EventDispatcher","_listeners","_killed","_disabled","_iterating","_enabled","$array.any","killed","listener","once","context","_eachListener","info","hasListenersByType","$array.findIndex","$type.isNumber","_removeListener","event","_shouldDispatch","dispatch","shouldClone","_removeExistingListener","_on","_type","source","onAll","TargetedEventDispatcher","checkBounds","len","List","initial","_values","$array.indexOf","events","isEnabled","oldIndex","newIndex","oldValues","_onSetIndex","$array.insertIndex","_onInsertIndex","value_a","value_b","$array.removeIndex","_onRemoveIndex","toIndex","toIndex_1","_onMoveIndex","_onPush","pushAll","newArray","old","_onClear","setAll","$array.eachReverse","ListAutoDispose","autoDispose","ListTemplate","make","Children","container","_container","_events","change","_onRemoved","_onInserted","child","_setParent","childrenDisplay","_childrenDisplay","addChild","_display","addChildAt","removeChild","markDirtyBounds","markDirty","Percent","percent","p100","p50","keysOrdered","sort","hasKey","removeElement","parentNode","addEventListener","dom","options","removeEventListener","onZoom","supports","cap","getPointerId","pointerId","blur","activeElement","createElement","top","left","appendChild","focus","getRendererEvent","isTouchEvent","Touch","PointerEvent","pointerType","MouseEvent","match","setStyle","property","getStyle","contains","host","isLocalEvent","root","setInteractive","interactive","pointerEvents","rootStylesheet","createStylesheet","nonce","setAttribute","textContent","head","getStylesheet","sheet","appendStylesheet","selector","cssRules","insertRule","StyleRule","styles","_root","_rule","$object.each","err","CSSStyleRule","selectorText","deleteRule","setProperty","_setVendorPrefixName","StyleSheet","_element","iOS","navigator","vendor","getSafeResolution","relativeToValue","full","padString","char","trimLeft","trimRight","getFormat","hints","cleanFormat","stripTags","escapeForRgex","getYearDay","date","utc","getFullYear","diff","getTime","getTimezoneOffset","oneDay","getWeek","_utc","UTC","getMonth","getDate","day","getUTCDay","setUTCDate","getUTCDate","firstDay","getUTCFullYear","ceil","getMonthWeek","firstWeek","currentWeek","getDayFromWeek","week","year","weekday","setUTCFullYear","getDay","get12Hours","hours","base","getTimeZone","long","savings","wotz","toLocaleString","wtz","timeZoneName","timezone","utcDate","timeZone","tzDate","hslToRgb","hue2rgb","q","round","rgbToHsl","lighten","rgb","getLightnessStep","brighten","isLight","saturate","saturation","hsl","alternativeColor","lightAlternative","darkAlternative","light","dark","mergeTags","tags1","tags2","string2hex","rgba2hex","hex","Color","fromAny","_hex","alpha","$utils.padString","$utils.rgbToHsl","$utils.hslToRgb","fromRGB","toCSSHex","$type.isString","fromString","fromCSS","fromHex","$utils.alternativeColor","mode","fromHSL","toHSL","range","$utils.lighten","$utils.brighten","$utils.saturate","waitForAnimations","animations","promises_1","animation","waitForStop","all","defaultInterpolate","percentInterpolate","colorInterpolate","interpolate","getInterpolate","AnimationTime","entity","duration","_entity","_duration","currentTime","_playingDuration","_startingTime","_from","_to","_current","_stopEvent","progress","_addAnimation","jumpTo","_play","easing","PI","RADIANS","DEGREES","fitToRange","sin","angle","cos","normalizeAngle","getArcBounds","cx","cy","startAngle","endAngle","radius","minX","MAX_VALUE","minY","maxX","maxY","bpoints","getArcPoint","fromAngle","toAngle","pt","right","bottom","arc","linear","cubic","out","ease","State","settings","_settings","fallback","_userSettings","setRaw","$object.keys","seen","lookup","_eachSetting","stateAnimationDuration","stateAnimationEasing","$ease.cubic","animate","States","_states","state_1","newState","_applyState","applyAnimate","_applyStateAnimated","Registry","registry","compare","compareArray","leftLength","rightLength","Adapters","callbacks","_callbacks","_markDirtyKey","$array.removeFirst","Animation","loops","startingTime","_animation","_easing","_loops","_interpolate","_oldTime","_playing","_stopped","_startAnimation","_time","_reject","stopped_1","counter","Settings","_userProperties","isDisposed","playing_1","_animatingSettings","_stopAnimation","_run","percentage","_checkEnded","_reset","_set","_animatingPrivateSettings","_stopAnimationPrivate","setPrivate","_setPrivate","_key","_settingEvents","_privateSettingEvents","getRaw","_prevSettings","_sendKeyEvent","_setRaw","stop","_privateSettings","_prevPrivateSettings","_sendPrivateKeyEvent","_setPrivateRaw","_markDirtyPrivateKey","$ease.linear","animation_1","_animationTime","getPrivate","animation_2","Entity","isReal","templates","_createEvents","_internalTemplates","_registerId","_template","_afterNew","_checkDirty","shouldApply","_setObjectTemplate","_applyTemplates","_setDefaults","_applyThemes","classNames","className","_dirty","_dirtyPrivate","_disposerProperties","_removeObjectTemplate","_addDirtyEntity","animationTime","_name","adapters","fold","_removeTemplateProperty","_userPrivateProperties","setPrivateRaw","_removeTemplatePrivateProperty","_findTemplateByKey","_findTemplateByPrivateKey","removePrivate","_rootContainer","other","_eachTemplate","_apply","_templateDisposers","privateSettings","_runSetup","setup","_findStaticTemplate","_templates","_disposeTemplates","_applyTemplate","value_1","$array.findReverse","$array.find","_findTemplate","defaults","themes","themeTags","Set","tags","tag","_walkParents","_defaultThemes","theme","_removeTemplates","allRules","rules","_lookupRules","rule","every","$array.getFirstSortedIndex","$order.compare","$order.compareArray","isDirty","prevId","entitiesById","delay","removeDispose","hasTag","$array.remove","locale","rest","_i","language","translate","TemplateState","_stateChanged","TemplateStates","TemplateAdapters","Template","_entities","_setTemplateProperty","_setTemplatePrivateProperty","onPrivate","copyFrom","_applyStateByKey","SpriteEventDispatcher","sprite","_sprite","originalEvent","point","simulated","native","_rendererDisposers","disposer_1","increment","rendererEvent","RENDERER_EVENTS","_onRenderer","_dispatchParents","parent","dispatchParents","click","isDragging","_hasDown","_hasMoved","_makePointerEvent","rightclick","middleclick","dblclick","pointerover","pointerout","pointerdown","pointerup","globalpointerup","globalpointermove","wheel","Sprite","_addPercentagePositionChildren","markDirtyPosition","_templateField","field","dataItem","dataContext","new","_removeTemplateField","oldDataItem","_dataItem","_processTemplateField","eventType","newDataItem","parent_1","_parent","_setDataItem","$array.pushOne","_percentageSizeChildren","_percentagePositionChildren","_addDirtyPosition","bounds","_localBounds","centerX","$utils.relativeToValue","centerY","_beforeChanged","_handleStates","previous","tooltip","setLayer","markDirtyLayer","tooltipMoveDp","_tooltipMoveDp","tooltipPointerDp","_tooltipPointerDp","showTooltip","_statesHandled","isHidden","markDirtyAccessibility","_changed","_dragDp","dragMove","dragStop","cancelTouch","tooltipText","tooltipHTML","showTooltipOn","_tooltipDp","$utils.addEventListener","hideTooltip","toggleKey_1","_toggleDp","_isDragging","updatePivotPoint","isPrivateDirty","visible","_addPercentageSizeChildren","parent_2","_prevWidth","_sizeDirty","_updateSize","wheelable","_registerTabindexOrder","_unregisterTabindexOrder","cursorOverStyle","_focusDp","exportable","events_1","_hoverDp","$utils.isTouchEvent","_handleOver","_handleOut","_isDown","_handleUp","_handleDown","inactive","_dragEvent","stopParentDispatch","_dragPoint","isHover","_downPoint","$utils.getPointerId","_downPoints","downPoint","dragEvent","parent_3","dragPoint","$math.cos","$math.sin","hypot","getLocalBounds","depth","_addDirtyBounds","isMeasured","invalidateBounds","parent_4","isFocus","_invalidateAccessibility","oldBounds","_adjustedLocalBounds","newBounds","_getBounds","_fixMinBounds","getAdjustedBounds","minWidth","minHeight","privateWidth","privateHeight","children","removeValue","_clearDirty","getTooltip","tooltipPosition","tooltipTarget","_setMatrix","toGlobal","_getTooltipPoint","height","markDirtyText","promise","show","timeout","hide","parent_5","dx","dy","_x","xx","yy","innerWidth","_y","innerHeight","_removeParent","_removeFocusElement","localBounds","p0","p1","p2","p3","success","_error","_isShowing","_isHidden","_isHiding","_onShow","opacity","_onHide","hovering","focused","isVisibleDeep","isVisible","compositeOpacity","maxWidth","parent_6","maxHeight","parent_7","_walkParent","updateChildren","prevParent","numberFormatter","dateFormatter","durationFormatter","toLocal","_getDownPointId","$object.keysOrdered","moveValue","Pattern","_renderer","makeGraphics","_afterNewApplyThemes","_pattern","_clear","repetition","fill","fillOpacity","_backgroundDisplay","beginFill","drawRect","endFill","_draw","createPattern","PicturePattern","_load","image","_image","patternWidth","patternHeight","fit","centered","image_1","Image","decode","catch","BlendMode","Graphics","gradient","gradientTarget","strokeDasharray","setLineDash","strokeDashoffset","setLineDashOffset","blendMode","NORMAL","draw","svgPath","_afterChanged","fill_1","fillGradient","fillPattern","fillOpacity_1","stroke_1","strokeGradient","strokePattern","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","shadowOpacity","shadow","changed","pattern","stops","colorInherited","opacityInherited","getFill","strokeOpacity_1","strokeWidth","lineJoin","lineStyle","endStroke","Rectangle","eachChildren","Layout","HorizontalLayout","paddingLeft","availableWidth","totalPercent","childWidth","prevX","adjustedLocalBounds","marginLeft","marginRight","VerticalLayout","paddingTop","availableHeight","childHeight","prevY","marginTop","top_1","marginBottom","GridLayout","_setRawDefault","paddingRight","minCellWidth","maxCellWidth","$math.fitToRange","columnCount","columnWidths","getColumnWidths","column","maxColumnHeight","totalWidth","TextFormatter","prefix","quotedBlocks","noFormatting","escape","chunks","$type.PLACEHOLDER","chunks2","i2","chunk2","cleanUp","unescape","isImage","fontWeight","textDecoration","populateString","getTagValue","tagName","parts","reg","dateFields","getDateFormatter","numericFields","getNumberFormatter","durationFields","getDurationFormatter","params","$utils.trim","reg2","matches2","getTagValueFromObject","$type.isObject","component","getCustomDataValue","customData","formatApplied","part","tmp","numberValue","$type.toNumber","dateValue","$type.toDate","$type.isDate","$type.isNaN","durationValue","encodeURIComponent","formatParts","formatterType","$utils.getFormat","Container","makeContainer","allChildren","_removeHTMLContent","interactiveChildren","_prevHeight","contentMask","_contentMask","mask","updateBackground","background","verticalScrollbar","_contentHeight","bg","pWidth","pHeight","horizontal","vertical","l_1","r_1","t_1","b_1","paddingBottom","childBounds","childX","childY","cl","cr","ct","_contentWidth","updateContainer","_updateBounds","_addDirtyParent","horizontal_1","vertical_1","html","_setHTMLContent","_positionHTMLElement","verticalScrollbar_1","startGrip","endGrip","interfaceColors","_vsbd0","wheelEvent","$utils.isLocalEvent","shiftY","deltaY","_vsbd1","walkChildren","updated","Text","makeTextStyle","makeText","textStyle","_getText","updateTooltip","wordWrapWidth","oversizedBehavior","breakWords","ellipsis","ignoreFormatting","minScale","_textStyles","styleName","Native","_observer","ResizeObserver","_targets","observe","box","unobserve","$array.keepIf","Raf","_timer","lastTime_1","loop_1","now","getBoundingClientRect","requestAnimationFrame","cancelAnimationFrame","observer","makeSensor","ResizeSensor","_sensor","_listener","$utils.onZoom","addTarget","removeTarget","InterfaceColors","Label","_text","_makeText","_textKeys","propValue","_setMaxDimentions","_updateChildren","textAlign","rotation","PointedRectangle","bwh","xtl","ytl","xtr","ytr","xbr","ybr","xbl","ybl","d1","d2","moveTo","stemX","lineTo","arcTo","stemY","closePath","Tooltip","$utils.mergeTags","_label","_updateBackground","_updateTextColor","tooltipContainer","_tooltips","labelText","labelHTML","updateBackgroundColor","keephover","_keepHoverDp","hover","unhover","stroke","_fillDp","_strokeDp","_labelDp","alternative","cw","ch","parentW","parentH","layerMargin","_w","_h","pointTo","pointerOrientation","pointerLength","bgStrokeSizeY","bgStrokeSizeX","pointerX","pointerY","boundsW","boundsH","_fx","_fy","animationDuration","animationEasing","NumberFormatter","_setDefault","bns","sns","bs","number","suffix","_t","precision","formatted","$utils.cleanFormat","parseFormat","details","positive","zero","mod","$object.copy","active","applyFormat","thousandSeparator","translateEmpty","decimalSeparator","thousands","passive","interval","$type.PLACEHOLDER2","_part","partFormat","mods","modSpacing","a_1","applyPrefix","a_2","ol","toPrecision","exp","toExponential","$type.numberToString","ints","ip","intsr","reverse","unshift","decs","prefixes","force","newvalue","applied","parseDate","month","hour","minute","second","millisecond","formatToParts","toUTCDate","Timezone","DateTimeFormat","hour12","fractionalSecondDigits","_dtf","offset","offsetUTC","userOffset","setUTCMinutes","getUTCMinutes","newUserOffset","dtf","DateFormatter","locales","convertLocal","fullYear","minutes","seconds","milliseconds","timestamp","getUTCMonth","getUTCHours","getUTCSeconds","getUTCMilliseconds","getHours","getMinutes","getSeconds","getMilliseconds","$utils.getWeek","_getMonth","_getShortMonth","$utils.getMonthWeek","$utils.getYearDay","translateFunc","_getShortWeekday","_getWeekday","firstDayOfWeek","$utils.get12Hours","$utils.getTimeZone","$utils.getTimezoneOffset","tz","tzh","tzm","toISOString","toUTCString","dateFormat","_months","_shortMonths","_weekdays","_shortWeekdays","parsedIndexes","year3","year2","year1","monthShort","monthLong","weekdayShort","weekdayLong","yearDay","hourBase0","hour12Base0","hourBase1","hour12Base1","millisecondDigits","am","zone","iso","resValues","indexAdjust","getStringList","regex","resolveMonth","resolveShortMonth","$utils.getDayFromWeek","isAm","ts","resolveTimezoneOffset","originalOffset","isDefault","translateAll","list","$utils.escapeForRgex","DurationFormatter","Y","H","K","dmillisecond","dsecond","dminute","dhour","dday","dweek","dmonth","dyear","asecond","aminute","ahour","aday","aweek","amonth","ayear","baseUnit","absolute","dirs","_unitAliases","tstamp","toTimeStamp","unit","_toTimeUnit","_getUnitValue","maxValue","maxUnit","getValueUnit","currentUnit","$object.eachContinue","_getUnitValues","timeUnit","en","_decimalSeparator","_thousandSeparator","_percentPrefix","_percentSuffix","_big_number_suffix_3","_big_number_suffix_6","_big_number_suffix_9","_big_number_suffix_12","_big_number_suffix_15","_big_number_suffix_18","_big_number_suffix_21","_big_number_suffix_24","_small_number_suffix_3","_small_number_suffix_6","_small_number_suffix_9","_small_number_suffix_12","_small_number_suffix_15","_small_number_suffix_18","_small_number_suffix_21","_small_number_suffix_24","_byte_suffix_B","_byte_suffix_KB","_byte_suffix_MB","_byte_suffix_GB","_byte_suffix_TB","_byte_suffix_PB","_date","_date_millisecond","_date_millisecond_full","_date_second","_date_second_full","_date_minute","_date_minute_full","_date_hour","_date_hour_full","_date_day","_date_day_full","_date_week","_date_week_full","_date_month","_date_month_full","_date_year","_duration_millisecond","_duration_millisecond_second","_duration_millisecond_minute","_duration_millisecond_hour","_duration_millisecond_day","_duration_millisecond_week","_duration_millisecond_month","_duration_millisecond_year","_duration_second","_duration_second_minute","_duration_second_hour","_duration_second_day","_duration_second_week","_duration_second_month","_duration_second_year","_duration_minute","_duration_minute_hour","_duration_minute_day","_duration_minute_week","_duration_minute_month","_duration_minute_year","_duration_hour","_duration_hour_day","_duration_hour_week","_duration_hour_month","_duration_hour_year","_duration_day","_duration_day_week","_duration_day_month","_duration_day_year","_duration_week","_duration_week_month","_duration_week_year","_duration_month","_duration_month_year","_duration_year","_era_ad","_era_bc","AM","PM","A.M.","P.M.","January","February","March","April","May","June","July","August","September","October","November","December","Jan","Feb","Mar","Apr","May(short)","Jun","Jul","Aug","Sep","Oct","Nov","Dec","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sun","Mon","Tue","Wed","Thu","Fri","Sat","_dateOrd","Zoom Out","Play","Stop","Legend","Press ENTER to toggle","Loading","Home","Chart","Serial chart","X/Y chart","Pie chart","Gauge chart","Radar chart","Sankey diagram","Flow diagram","Chord diagram","TreeMap chart","Force directed tree","Sliced chart","Series","Candlestick Series","OHLC Series","Column Series","Line Series","Pie Slice Series","Funnel Series","Pyramid Series","X/Y Series","Press ENTER to zoom in","Press ENTER to zoom out","Use arrow keys to zoom in and out","Use plus and minus keys on your keyboard to zoom in and out","Export","Data","Print","Press ENTER or use arrow keys to navigate","Press ENTER to open","Press ENTER to print.","Press ENTER to export as %1.","(Press ESC to close this message)","Image Export Complete","Export operation took longer than expected. Something might have gone wrong.","Saved from","PNG","JPG","GIF","SVG","PDF","CSV","XLSX","HTML","Use TAB to select grip buttons or left and right arrows to change selection","Use left and right arrows to move selection","Use left and right arrows to move left selection","Use left and right arrows to move right selection","Use TAB select grip buttons or up and down arrows to change selection","Use up and down arrows to move selection","Use up and down arrows to move lower selection","Use up and down arrows to move upper selection","From %1 to %2","From %1","To %1","No parser available for file: %1","Error parsing file: %1","Unable to load file: %1","Invalid date","Close","Minimize","Language","prompt","translation","localeTarget","$array.map","Theme","setupDefaultRules","themeClass","_rules","$array.getSortedIndex","ruleRaw","setColor","ic","DefaultTheme","horizontalLayout","verticalLayout","primaryButton","primaryButtonHover","primaryButtonDown","primaryButtonActive","primaryButtonText","primaryButtonStroke","secondaryButton","secondaryButtonHover","secondaryButtonDown","secondaryButtonActive","secondaryButtonText","secondaryButtonStroke","grid","alternativeBackground","alternativeText","disabled","passOptions","hue","lightness","colors","reuse","startIndex","$ease.out","interpolationDuration","interpolationEasing","tooltipX","tooltipY","setStateOnChildren","gap","colorOpacity","checkered","fillField","strokeField","nameField","layer","clickTarget","ariaChecked","focusable","ariaLabel","cornerRadiusBL","cornerRadiusTL","cornerRadiusBR","cornerRadiusTR","populateText","stepCount","fontFamily","fontSize","textType","inside","baseRadius","orientation","pointerBaseWidth","cornerRadius","shiftRadius","dRadius","dInnerRadius","strokeOpacity","locationX","locationY","getFillFromSprite","getStrokeFromSprite","autoTextColor","ariaValueMin","ariaValueMax","toggleKey","ariaLive","spikes","innerRadius","rotationStep","Matrix","tx","ty","pivotX","pivotY","origin","matrix","a1","b1","c1","tx1","_slicedToArray","sliceIterator","arr","_arr","_n","_e","_s","TAU","mapToEllipse","_ref","rx","ry","cosphi","sinphi","centerx","centery","xp","yp","approxUnitArc","ang1","ang2","tan","x1","y1","x2","y2","vectorAngle","ux","uy","vx","vy","sign","dot","acos","getArcCenter","px","py","largeArcFlag","sweepFlag","pxp","pyp","rxsq","rysq","pxpsq","pypsq","radicant","sqrt","centerxp","centeryp","vx1","vy1","vx2","vy2","arcToBezier","_ref2","_ref2$xAxisRotation","xAxisRotation","_ref2$largeArcFlag","_ref2$sweepFlag","curves","lambda","_getArcCenter","_getArcCenter2","ratio","segments","curve","_mapToEllipse","_mapToEllipse2","_mapToEllipse3","checkArgs","actual","expected","checkMinArgs","checkEvenArgs","splitArcFlags","flag","assertBinary","distributeId","eachTargets","hitTarget","onPointerEvent","$utils.getRendererEvent","touches","changedTouches","$array.copy","isTainted","canvas","getContext","willReadFrequently","drawImage","getImageData","warn","clearCanvas","view","CanvasPivot","CanvasDisplayObject","renderer","_removeObject","getLayer","_layer","defaultLayer","margin","$utils.setInteractive","registerChildLayer","resizeLayer","dirty","_bounds","_colorId","paintId","_forceInteractive","_isInteractive","_matrix","applyInverse","_uMatrix","setTransform","bn","_addBounds","getLocalMatrix","_addEvent","_localMatrix","prepend","resolution","_transformMargin","_transform","parentLayer","_omitTainted","resolution_1","layers","ghostContext","_ghostContext","mask_1","save","_transformLayer","_runPath","clip","globalAlpha","compoundAlpha","_isInteractiveMask","_render","restore","tainted","_hovering","_dragging","some","tapToActivate","_touchActive","shouldCancelTouch","CanvasContainer","_children","render","_childLayers","deep","setPoint","Op","_context","_forceColor","BeginFill","forceColor","fillStyle","EndFill","clearShadow","EndStroke","LineStyle","strokeStyle","lineWidth","LineDash","dash","LineDashOffset","dashOffset","lineDashOffset","DrawRect","rect","DrawCircle","DrawEllipse","radiusX","radiusY","ellipse","Arc","anticlockwise","arcBounds","$math.getArcBounds","$math.DEGREES","ArcTo","LineTo","MoveTo","ClosePath","BezierCurveTo","cpX","cpY","cpX2","cpY2","toX","toY","bezierCurveTo","QuadraticCurveTo","quadraticCurveTo","Shadow","offsetX","offsetY","GraphicsImage","CanvasGraphics","_operations","_fillAlpha","_pushOp","toCSS","_hasShadows","_strokeAlpha","cpx","cpy","qcpx","qcpy","SEGMENTS_REGEXP","ARGS_REGEXP","name_1","relative","beginPath","layerDirty","context_1","ghostContext_1","globalCompositeOperation","color_1","_getColorId","colorize","addBounds","CanvasText","_textInfo","direction","textBaseline","ignoreGhost","ignoreFontWeight","fontStyle","_getFontStyle","font","_shared","style2","fontVariant","_measure","_textVisible","interactive_1","context_2","layerDirty_1","ghostContext_2","_prerender","line","_index","textChunks","fillText","thickness","getTextStyle","rtl","truncate","wrap","_ignoreFontWeight","refText","lines","styleRestored","currentStyle","_loop_1","lineInfo","ascent","metrics","_measureText","actualBoundingBoxAscent","actualBoundingBoxDescent","currentFormat","currentDecoration","currentFill","currentChunkWidth","skipFurtherText","firstTextChunk","leftoverChunks","currentVerticalAlign","$array.eachContinue","verticalAlign","metrics_1","height_1","metrics_2","chunkWidth","actualBoundingBoxLeft","actualBoundingBoxRight","ellipsisMetrics","ellipsisWidth","excessWidth","_truncateText","tmpText","leftBoundMod","rightBoundMod","boundsMod","chunkHeight","lineHeight","currentChunkOffset","baselineRatio","_fitRatio","_originalScale","maxW","maxH","fallbackBreakWords","measureText","fakeMetrics","div","innerText","visibility","bbox","w_1","fontBoundingBoxAscent","fontBoundingBoxDescent","CanvasTextStyle","CanvasRadialText","_renderCircular","interactive_2","context_3","layerDirty_2","ghostContext_3","radius_1","startAngle_1","deltaAngle_1","orientation_1","inward_1","inside_1","align_1","kerning_1","kerning","clockwise_1","shouldReverse_1","_textReversed","maxAngle_1","midAngle","deltaAngle","$math.normalizeAngle","textHeight","lineStartAngle","rotate","angleShift","charWidth","_measureCircular","chars","CanvasImage","_imageMask","naturalWidth","naturalHeight","_getMask","imageSmoothingEnabled","fillRect","CanvasRendererEvent","$utils.supports","identifier","CanvasRenderer","_patternCanvas","devicePixelRatio","_layerDom","exportableView","_ghostView","getEvent","_getHitTarget","debug","_touchActiveTimeout","_delayTouchDeactivate","prevent","obj","tapToActivateTimeout","createLinearGradient","radius1","radius2","createRadialGradient","graphics","_patternContext","clearRect","renderDetached","resize","_clientWidth","_clientHeight","_width","_height","CanvasLayer","existingLayer","getLayerByOrder","createDetachedLayer","layerIndex","insertBefore","_dirtyLayers","_lastPointerMoveEvent","native_1","_dispatchGlobalMousemove","_colorMap","adjustPoint","DOMRect","clientX","clientY","pixel","colorId","hit","dispatching","cleanup","disposed","interactionsEnabled","_withEvents","dispatched","button","id_1","dragged_1","_mousedown","_dispatchEvent","$utils.setStyle","_replacedCursorStyle","$utils.getStyle","_dispatchEventAll","event_1","id_2","clickevent","target_1","listener_1","timer","_makeSharedEvent","_onPointerEvent","mouseup","_dispatchGlobalMouseup","pointercancel","mousedown","_dispatchMousedown","mousemove","_dispatchDragMove","_dispatchDragEnd","_dispatchDoubleClick","_dispatchWheel","_initEvent","maxScale","maintainPixelRatio","canvases","forceRender","canvasWidth","canvasHeight","needRerender","exportableContext","clientWidth","clientHeight","rAF","fps","Root","useSafeResolution","$utils.getSafeResolution","HTMLElement","getElementById","rootElements","inner","tooltipContainerBounds","_tooltipContainerSettings","_inner","_updateComputedStyles","_init","childNodes","_initResizeSensor","_logo","offsetWidth","offsetHeight","logo","_handleLogo","rootContainer","_htmlElementContainer","overflow","readerAlertElement","zIndex","_readerAlertElement","focusElementContainer","_focusElementContainer","_tooltipElementContainer","keyCode","_isShift","focusedSprite","_focusedSprite","$utils.blur","dragOffsetX","dragOffsetY","downEvent","_keyboardDragPoint","moveEvent","upEvent","group_1","_tabindexes","lastIndex","$utils.focus","_startTicker","setThemes","_addTooltip","_hasLicense","_showBranding","_resizeSensorDisposer","autoResize","htmlElementContainer","_focusElementDirty","_updateCurrentFocus","_tickers","_animations","_runAnimation","allParents","_isDirtyParents","_dirtyParents","uid","_prepareChildren","objects","_isDirty","depths","_dirtyBounds","dirtyPositions","_dirtyPositions","_updatePosition","_checkComputedStyles","_runTickers","_runAnimations","_runDirties","_positionHTMLElements","_renderFrame","_ticker","performance","_runTicker","markDirtyGlobal","_isDisposed","$utils.removeElement","innerHTML","$utils.stripTags","_tooltip","_invalidateTabindexes","aindex","bindex","groups","_makeFocusElement","_moveFocusElement","group","_decorateFocusElement","_positionFocusElement","focusElement","getAttribute","tabindex","removeAttribute","ariaOrientation","ariaValueNow","ariaValueText","ariaControls","tabIndex","_handleFocus","_handleBlur","append","globalBounds","_focusNext","focusableElements","querySelectorAll","tooltipElement","_makeTooltipElement","getComputedStyle","fontHash","_fontHash","_invalidateLabelBounds","licenses","debugGhostView","htmlElement","boxSizing","_htmlEnabledContainers","visualSettings","setting","opacity_1","_makeHTMLElement","RoundedRectangle","wSign","hSign","minSide","crtl","crtr","crbr","crbl","maxcr","ListData","processor","processRow","JsonData","DataItem","markDirtyValues","disposeDataItem","showDataItem","hideDataItem","Component","_dataItems","_data","incrementRef","decrementRef","_updateFields","dataItems","_mainDataItems","_markDirtyGroup","_dataChanged","_onDataClear","_makeDataItem","processDataItem","dataItem_1","properties_1","_afterDataChange","valueFields","_valueFields","_valueFieldsF","fieldKey","workingKey","_fields","_fieldsF","makeDataItem","_valuesDirty","inited","_dataGrouped","sleep","bullets","_handleBullets","bulletsContainer","bullet","_shouldMakeBullet","bulletFunction","_makeBullet","series","_aggregatesCalculated","_selectionAggregatesCalculated","endIndex","baseValueSeries","calculateAggregates","_dataProcessed","_calculateAggregates","_psi","_pei","markerRectangle","legendDataItem","updateLegendMarker","startIndex_1","endIndex_1","_makeBullets","absSum","low","high","close","average","changePercent","changePrevious","changePreviousPercent","changeSelection","changeSelectionPercent","openKey","_getBase","minValue","dataField","neutral","logarithmic","LOG10E","propertyValue","customFunction","_hideBullets","_positionBullets","_positionBullet","markDirtySize","_bullet","chart","promises","startIndex_2","endIndex_2","realDuration","$time.sleep","valueLabel","ColorSet","pass","generateColors","getIndex","currentStep","HierarchyDefaultTheme","gridLayout","legendLabelText","legendValueText","downDepth","initialDepth","singleBranchOnly","maskContent","strength","distance","upDepth","minRadius","maxRadius","initialFrames","centerStrength","manyBodyStrength","velocityDecay","linkWithStrength","showOnFrame","topDepth","nodePadding","layoutAlgorithm","BreadcrumbBar","_new","labels","selectDataItem","_handleDataItem","makeLabel","addTag","HierarchyNode","disableDataItem","enableDataItem","_clickDisposer","node","node_count","eachAfter","node_each","that","node_eachBefore","nodes","node_eachAfter","node_find","node_sum","node_sort","eachBefore","node_path","ancestor","leastCommonAncestor","aNodes","ancestors","bNodes","node_ancestors","node_descendants","node_leaves","leaves","node_links","links","node_iterator","hierarchy","mapChildren","objectChildren","Node","childs","computeHeight","node_copy","copyData","descendants","required","constantZero","constant","roundNode","x0","y0","treemapDice","treemapSlice","phi","squarifyRatio","rows","nodeValue","i0","i1","sumValue","newRatio","minRatio","beta","dice","squarify","custom","tile","paddingStack","paddingInner","treemap","positionNode","padding","paddingOuter","sums","partition","valueOffset","valueTarget","hi","mid","valueLeft","valueRight","xk","yk","sliceDice","Hierarchy","_tag","childData","nodesContainer","_treeData","first","_makeHierarchyData","_rootNode","d3hierarchy.hierarchy","_updateValues","_updateVisuals","_selectDataItem","_currentDownDepth","_updateNodes","hierarchyNode","_updateNode","hierarchyChildren","hierarchyChild","di","childDataItem","_getDataItemById","makeNode","_processDataItem","children_1","d3HierarchyNode","dataValue","valuePercent","updateLegendValue","d3HierarchyChild","childrenDataArray_1","hiddenState","maxDepth","skipDisptach","currentDepth","_handleSingle","_zoom","Treemap","d3hierarchy.treemap","d3hierarchy.treemapSquarify","rectangles","algorithm","d3hierarchy.treemapBinary","d3hierarchy.treemapSlice","d3hierarchy.treemapDice","d3hierarchy.treemapSliceDice","_treemapLayout","_updateNodesScale","treemapLayout","rectangle","scaleX","scaleY","nodePaddingOuter","animatePrivate","AnimatedTheme","dcCouncilVisualizationCss","DcCouncilVisualization","createVisualization","createTreemap","am5.Root","chartEl","am5themes_Animated","am5.Container","am5.percent","am5hierarchy.Treemap","valueField","categoryField","childDataField","compileCommitteeData","am5hierarchy.BreadcrumbBar","aarr"],"mappings":";;;;;;;CAMC,SAASA,EAAEC,GAA2GC,EAAAC,QAAeF,IAArI,CAAqJG,GAAK,SAASC,IAAiB,IAAIC,EAAE,oBAAoBC,KAAKA,KAAK,oBAAoBC,OAAOA,YAAY,IAAIF,EAAEA,EAAE,GAAG,IAAIG,GAAGH,EAAEI,YAAYJ,EAAEK,YAAYC,EAAEH,GAAG,SAASI,MAAMP,EAAEQ,UAAU,IAAIC,UAAUC,EAAE,GAAGC,EAAE,EAAEC,EAAE,CAACC,MAAM,SAASnB,EAAEC,GAAG,IAAImB,GAAGnB,EAAEA,GAAG,IAAIoB,gBAAgB,EAAEC,EAAEF,KAAKnB,EAAEsB,sBAAsBH,EAAEA,EAAE,IAAI,GAAGnB,EAAEoB,cAAcD,EAAEnB,EAAEuB,YAAYF,EAAErB,EAAEuB,YAAYvB,EAAEuB,UAAUvB,EAAEwB,QAAQP,EAAEQ,kBAAkB,CAAC,IAAIC,EAAE,WAAW,IAAIT,EAAEQ,kBAAkB,OAAO,EAAE,IAAI1B,GAAGoB,EAAEd,EAAEsB,KAAKtB,EAAEuB,WAAW,KAAKF,EAAEtB,EAAEyB,WAAWZ,EAAEa,WAAWb,EAAEa,SAASX,EAAEY,gBAAgB,IAAIC,KAAK,CAAC,IAAIN,EAAE,QAAQ,CAACO,KAAK,uBAAuBjC,EAAE,IAAIK,EAAE6B,OAAOnC,GAAG,IAAIoB,EAAEO,EAAE,OAAO1B,EAAEmC,UAAUC,EAAEpC,EAAEqC,GAAGrB,IAAID,EAAEf,EAAEqC,IAAIrC,EAA5P,GAAiQ,OAAO0B,EAAEY,SAAStC,EAAEuC,KAAKb,EAAEc,UAAUxC,EAAEyC,MAAMf,EAAEgB,aAAa1C,EAAE2C,SAASjB,EAAEkB,UAAU5C,EAAE6C,MAAM7C,EAAEuC,KAAKlB,EAAErB,EAAEuC,MAAMvC,EAAEyC,MAAMpB,EAAErB,EAAEyC,OAAOzC,EAAE2C,SAAStB,EAAErB,EAAE2C,UAAU3C,EAAE6C,MAAMxB,EAAErB,EAAE6C,cAAc7C,EAAEwB,YAAYE,EAAEhB,YAAY,CAACoC,MAAM/C,EAAEgD,OAAO/C,EAAEgD,SAAStB,EAAEW,KAAK,IAAI7B,EAAE,KAAyB,iBAAiBT,EAAES,EAAER,EAAEiD,SAAS,IAAIC,EAAElD,GAAG,IAAImD,EAAEnD,IAAI,IAAID,EAAEqD,UAAU/B,EAAEtB,EAAEsD,OAAOhC,EAAEtB,EAAEuD,IAAI9C,EAAE,IAAI+C,EAAEvD,IAAIK,EAAEmD,MAAMzD,aAAayD,MAAMzD,aAAa0D,UAAUjD,EAAE,IAAIkD,EAAE1D,IAAI,OAAOQ,EAAEmD,OAAO5D,IAAI6D,QAAQ,SAAS7D,EAAEC,GAAG,IAAIQ,GAAG,EAAE4B,GAAG,EAAEyB,EAAE,IAAIC,EAAE,OAAO1D,EAAE,IAAIW,EAAEX,EAAEA,EAAEe,GAAG,EAAEO,EAAE,KAAKf,GAAG,GAAG,WAAW,GAAG,iBAAiBX,EAAE,OAAO,iBAAiBA,EAAE+D,WAAW9C,EAAE+C,eAAeC,QAAO,SAASlE,GAAG,OAAO,IAAIC,EAAE+D,UAAUG,QAAQnE,MAAKoE,SAASN,EAAE7D,EAAE+D,YAAY,kBAAkB/D,EAAEoE,QAAQ,mBAAmBpE,EAAEoE,QAAQC,MAAMC,QAAQtE,EAAEoE,WAAW5D,EAAER,EAAEoE,QAAQ,kBAAkBpE,EAAEuE,gBAAgB,iBAAiBvE,EAAEuE,iBAAiBpD,EAAEnB,EAAEuE,gBAAgB,iBAAiBvE,EAAEwE,UAAUV,EAAE9D,EAAEwE,SAAS,iBAAiBxE,EAAEyE,YAAYrE,EAAEJ,EAAEyE,WAAW,kBAAkBzE,EAAE0E,SAAStC,EAAEpC,EAAE0E,QAAQ,GAAGL,MAAMC,QAAQtE,EAAE2E,SAAS,CAAC,GAAG,IAAI3E,EAAE2E,QAAQR,OAAO,MAAM,IAAIS,MAAM,2BAA2BlD,EAAE1B,EAAE2E,aAAa,IAAI3E,EAAE6E,aAAa9D,EAAEf,EAAE6E,WAAWzE,IAAI,kBAAkBJ,EAAE8E,gBAAgB9E,EAAE8E,0BAA0BC,UAAUpE,EAAEX,EAAE8E,0BAA0BC,OAAO/E,EAAE8E,eAAe,mBAA3vB,GAAixB,IAAI9D,EAAE,IAAI+D,OAAOC,EAAE5E,GAAG,KAAK,iBAAiBL,IAAIA,EAAEkF,KAAK/D,MAAMnB,IAAI,GAAGsE,MAAMC,QAAQvE,GAAG,CAAC,IAAIA,EAAEoE,QAAQE,MAAMC,QAAQvE,EAAE,IAAI,OAAOmF,EAAE,KAAKnF,EAAEoB,GAAG,GAAG,iBAAiBpB,EAAE,GAAG,OAAOmF,EAAExD,GAAG+B,OAAO0B,KAAKpF,EAAE,IAAIA,EAAEoB,QAAQ,GAAG,iBAAiBpB,EAAE,MAAM,iBAAiBA,EAAEqF,OAAOrF,EAAEqF,KAAKH,KAAK/D,MAAMnB,EAAEqF,OAAOf,MAAMC,QAAQvE,EAAEqF,QAAQrF,EAAEsF,SAAStF,EAAEsF,OAAOtF,EAAEuF,MAAMvF,EAAEuF,KAAKD,QAAQ3D,GAAG3B,EAAEsF,SAAStF,EAAEsF,OAAOhB,MAAMC,QAAQvE,EAAEqF,KAAK,IAAIrF,EAAEsF,OAAO,iBAAiBtF,EAAEqF,KAAK,GAAG3B,OAAO0B,KAAKpF,EAAEqF,KAAK,IAAI,IAAIf,MAAMC,QAAQvE,EAAEqF,KAAK,KAAK,iBAAiBrF,EAAEqF,KAAK,KAAKrF,EAAEqF,KAAK,CAACrF,EAAEqF,QAAQF,EAAEnF,EAAEsF,QAAQ,GAAGtF,EAAEqF,MAAM,GAAGjE,GAAG,MAAM,IAAIyD,MAAM,0CAA0C,SAASM,EAAEnF,EAAEC,EAAEmB,GAAG,IAAIO,EAAE,GAAG,iBAAiB3B,IAAIA,EAAEkF,KAAK/D,MAAMnB,IAAI,iBAAiBC,IAAIA,EAAEiF,KAAK/D,MAAMlB,IAAI,IAAIQ,EAAE6D,MAAMC,QAAQvE,IAAI,EAAEA,EAAEoE,OAAO/D,GAAGiE,MAAMC,QAAQtE,EAAE,IAAI,GAAGQ,GAAG4B,EAAE,CAAC,IAAI,IAAIrB,EAAE,EAAEA,EAAEhB,EAAEoE,OAAOpD,IAAI,EAAEA,IAAIW,GAAGmC,GAAGnC,GAAG6D,EAAExF,EAAEgB,GAAGA,GAAG,EAAEf,EAAEmE,SAASzC,GAAGoC,GAAG,IAAI,IAAInD,EAAE,EAAEA,EAAEX,EAAEmE,OAAOxD,IAAI,CAAC,IAAIK,EAAER,EAAET,EAAEoE,OAAOnE,EAAEW,GAAGwD,OAAOe,GAAG,EAAE7E,EAAEG,EAAE,IAAIiD,OAAO0B,KAAKnF,EAAEW,IAAIwD,OAAO,IAAInE,EAAEW,GAAGwD,OAAO,GAAGhD,IAAIX,IAAI0E,EAAE,WAAW/D,EAAE,KAAKnB,EAAEW,GAAG6E,KAAK,IAAIC,OAAO,IAAIzF,EAAEW,GAAGwD,QAAQ,IAAInE,EAAEW,GAAG,GAAGwD,QAAQ,WAAWhD,GAAGX,EAAE,CAAC,IAAI,IAAIkF,EAAE,GAAGxC,EAAE,EAAEA,EAAElC,EAAEkC,IAAI,CAAC,IAAIQ,EAAEtD,EAAEL,EAAEmD,GAAGA,EAAEwC,EAAEC,KAAK3F,EAAEW,GAAG+C,IAAIwB,EAAE,KAAKQ,EAAEF,KAAK,IAAIC,OAAO,IAAIP,EAAE,CAAC,IAAI,IAAI/B,EAAE,EAAEA,EAAEnC,EAAEmC,IAAI,CAAC,EAAEA,IAAI9C,IAAIqB,GAAGmC,GAAG,IAAIN,EAAE/C,GAAGJ,EAAEL,EAAEoD,GAAGA,EAAEzB,GAAG6D,EAAEvF,EAAEW,GAAG4C,GAAGJ,GAAGxC,EAAEX,EAAEmE,OAAO,KAAKhD,GAAG,EAAEH,IAAIX,KAAKqB,GAAGoC,IAAI,OAAOpC,EAAE,SAAS6D,EAAExF,EAAEC,GAAG,GAAG,MAAMD,EAAE,MAAM,GAAG,GAAGA,EAAE6F,cAAcC,KAAK,OAAOZ,KAAKa,UAAU/F,GAAGgG,MAAM,EAAE,IAAI,IAAI5E,GAAG,EAAER,GAAG,iBAAiBZ,GAAGY,EAAEC,KAAKb,KAAKA,EAAE,IAAIA,EAAEoB,GAAG,GAAG,IAAIO,EAAE3B,EAAE8B,WAAWmE,QAAQhF,EAAED,GAAG,OAAOI,EAAEA,IAAI,IAAIX,GAAG,mBAAmBA,GAAGA,EAAET,EAAEC,IAAIqE,MAAMC,QAAQ9D,IAAIA,EAAER,IAAI,SAASD,EAAEC,GAAG,IAAI,IAAImB,EAAE,EAAEA,EAAEnB,EAAEmE,OAAOhD,IAAI,IAAI,EAAEpB,EAAEmE,QAAQlE,EAAEmB,IAAI,OAAO,EAAE,OAAO,EAA/E,CAAkFO,EAAET,EAAE+C,kBAAkB,EAAEtC,EAAEwC,QAAQL,IAAI,MAAMnC,EAAEuE,OAAO,IAAI,MAAMvE,EAAEuE,OAAOvE,EAAEyC,OAAO,IAAI/D,EAAEsB,EAAEtB,EAAEsB,KAAK,GAAGT,EAAEiF,WAAWC,OAAOC,aAAa,IAAInF,EAAEoF,SAASF,OAAOC,aAAa,IAAInF,EAAEqF,gBAAgB,SAASrF,EAAE+C,eAAe,CAAC,KAAK,KAAK,IAAI/C,EAAEqF,iBAAiBrF,EAAEQ,mBAAmBjB,KAAKH,EAAE6B,OAAOjB,EAAEsF,kBAAkB,EAAEtF,EAAEuF,eAAe,SAASvF,EAAEwF,gBAAgB,QAAQxF,EAAEyF,iBAAiB,IAAIzF,EAAE0F,OAAOC,EAAE3F,EAAE4F,aAAa1F,EAAEF,EAAE6F,gBAAgB5D,EAAEjC,EAAE8F,aAAarD,EAAEzC,EAAE+F,eAAe7D,EAAElC,EAAEgG,uBAAuB1D,EAAElD,EAAE6G,OAAO,CAAC,IAAIxB,EAAErF,EAAE6G,OAAOxB,EAAEyB,GAAGjG,MAAM,SAASP,GAAG,IAAIQ,EAAER,EAAEoC,QAAQ,GAAG/B,EAAE,GAAG,OAAOb,KAAKiH,MAAK,SAASrH,GAAG,KAAK,UAAU2F,EAAEvF,MAAMkH,KAAK,WAAWC,eAAe,SAAS5B,EAAEvF,MAAMoH,KAAK,QAAQC,eAAenH,EAAEoH,cAActH,KAAKuH,OAAO,IAAIvH,KAAKuH,MAAMvD,OAAO,OAAO,EAAE,IAAI,IAAInE,EAAE,EAAEA,EAAEG,KAAKuH,MAAMvD,OAAOnE,IAAIgB,EAAE2E,KAAK,CAACgC,KAAKxH,KAAKuH,MAAM1H,GAAG4H,UAAUzH,KAAK0H,eAAenC,EAAEoC,OAAO,GAAG3G,QAAOpB,IAAII,KAAK,SAASJ,IAAI,GAAG,IAAIiB,EAAEmD,OAAO,CAAC,IAAIpE,EAAEC,EAAEmB,EAAEO,EAAElB,EAAEQ,EAAE,GAAG,GAAGK,EAAEV,EAAEoH,QAAQ,CAAC,IAAI3H,EAAEO,EAAEoH,OAAOvH,EAAEmH,KAAKnH,EAAEoH,WAAW,GAAG,iBAAiBxH,EAAE,CAAC,GAAG,UAAUA,EAAE4H,OAAO,OAAOjI,EAAE,aAAaC,EAAEQ,EAAEmH,KAAKxG,EAAEX,EAAEoH,UAAUlG,EAAEtB,EAAE6H,YAAY5G,EAAEV,EAAEkC,QAAQlC,EAAEkC,MAAM,CAACqF,KAAKnI,GAAGC,EAAEmB,EAAEO,IAAI,GAAG,SAAStB,EAAE4H,OAAO,YAAY9C,IAAI,iBAAiB9E,EAAE2C,SAASvC,EAAEqH,eAAenC,EAAEoC,OAAOtH,EAAEqH,eAAezH,EAAE2C,cAAc,GAAG,SAAS3C,EAAE,YAAY8E,IAAI,IAAInE,EAAEP,EAAEqH,eAAelF,SAASnC,EAAEqH,eAAelF,SAAS,SAAS5C,GAAGsB,EAAEN,IAAIA,EAAEhB,EAAES,EAAEmH,KAAKnH,EAAEoH,WAAW1C,KAAKjE,EAAEC,MAAMV,EAAEmH,KAAKnH,EAAEqH,qBAAqBxG,EAAEV,EAAEgC,WAAWhC,EAAEgC,WAAW,SAASuC,IAAIlE,EAAEmH,OAAO,EAAE,GAAGpI,MAAM,SAASmF,EAAEnF,GAAGI,KAAKiI,QAAQ,KAAKjI,KAAKkI,WAAW,EAAElI,KAAKmI,YAAY,EAAEnI,KAAKoI,SAAS,EAAEpI,KAAKqI,OAAO,KAAKrI,KAAKsI,WAAW,EAAEtI,KAAKuI,aAAa,GAAGvI,KAAKwI,UAAU,EAAExI,KAAKyI,OAAO,EAAEzI,KAAK0I,WAAW,KAAK1I,KAAK2I,cAAc,EAAE3I,KAAK4I,iBAAiB,CAAC3D,KAAK,GAAG4D,OAAO,GAAG1D,KAAK,IAAI,SAASvF,GAAG,IAAIC,EAAEiJ,EAAElJ,GAAGC,EAAEkJ,UAAUC,SAASnJ,EAAEkJ,WAAWnJ,EAAEwC,MAAMxC,EAAE0C,QAAQzC,EAAEkJ,UAAU,MAAM/I,KAAKiI,QAAQ,IAAIjH,EAAEnB,IAAIG,KAAKiI,QAAQgB,SAASjJ,MAAMkJ,QAAQrJ,GAAGsJ,KAAKnJ,KAAKJ,GAAGI,KAAKoJ,WAAW,SAASxJ,EAAEC,GAAG,GAAGG,KAAK2I,cAAczH,EAAElB,KAAKkJ,QAAQG,kBAAkB,CAAC,IAAIrI,EAAEhB,KAAKkJ,QAAQG,iBAAiBzJ,QAAQ,IAAIoB,IAAIpB,EAAEoB,GAAGhB,KAAK2I,cAAc,EAAE3I,KAAKoI,SAAS,EAAE,IAAI7G,EAAEvB,KAAKuI,aAAa3I,EAAEI,KAAKuI,aAAa,GAAG,IAAIlI,EAAEL,KAAKiI,QAAQlH,MAAMQ,EAAEvB,KAAKsI,YAAYtI,KAAKkI,WAAW,IAAIlI,KAAKiI,QAAQqB,WAAWtJ,KAAKiI,QAAQsB,UAAU,CAAC,IAAItJ,EAAEI,EAAE8E,KAAKqE,OAAOxJ,KAAKkI,YAAYlI,KAAKuI,aAAahH,EAAEkI,UAAUxJ,EAAED,KAAKsI,YAAYtI,KAAKsI,WAAWrI,GAAGI,GAAGA,EAAE4E,OAAOjF,KAAKwI,WAAWnI,EAAE4E,KAAKjB,QAAQ,IAAIpD,EAAEZ,KAAKkI,WAAWlI,KAAKkJ,QAAQQ,SAAS1J,KAAKwI,WAAWxI,KAAKkJ,QAAQQ,QAAQ,GAAGlJ,EAAEN,EAAEK,YAAY,CAACoJ,QAAQtJ,EAAEwC,SAAS/B,EAAE8I,UAAUC,SAASjJ,SAAS,GAAGM,EAAElB,KAAKkJ,QAAQ5G,SAASzC,EAAE,CAAC,GAAGG,KAAKkJ,QAAQ5G,MAAMjC,EAAEL,KAAKiI,SAASjI,KAAKiI,QAAQqB,UAAUtJ,KAAKiI,QAAQsB,UAAU,YAAYvJ,KAAKoI,SAAS,GAAG/H,OAAO,EAAEL,KAAK4I,sBAAsB,EAAE,OAAO5I,KAAKkJ,QAAQ9G,MAAMpC,KAAKkJ,QAAQ5G,QAAQtC,KAAK4I,iBAAiB3D,KAAKjF,KAAK4I,iBAAiB3D,KAAK6E,OAAOzJ,EAAE4E,MAAMjF,KAAK4I,iBAAiBC,OAAO7I,KAAK4I,iBAAiBC,OAAOiB,OAAOzJ,EAAEwI,QAAQ7I,KAAK4I,iBAAiBzD,KAAK9E,EAAE8E,MAAMnF,KAAKmI,aAAavH,IAAIM,EAAElB,KAAKkJ,QAAQ1G,WAAWnC,GAAGA,EAAE8E,KAAKoE,UAAUvJ,KAAKkJ,QAAQ1G,SAASxC,KAAK4I,iBAAiB5I,KAAKqI,QAAQrI,KAAKmI,YAAY,GAAGvH,GAAGP,GAAGA,EAAE8E,KAAKmE,QAAQtJ,KAAK0I,aAAarI,EAAEL,KAAKoI,SAAS,GAAGpI,KAAK+J,WAAW,SAASnK,GAAGsB,EAAElB,KAAKkJ,QAAQxG,OAAO1C,KAAKkJ,QAAQxG,MAAM9C,GAAGY,GAAGR,KAAKkJ,QAAQxG,OAAOxC,EAAEK,YAAY,CAACsC,SAAS/B,EAAE8I,UAAUlH,MAAM9C,EAAEiK,UAAU,KAAK,SAAS9G,EAAEnD,GAAG,IAAI2B,GAAG3B,EAAEA,GAAG,IAAImJ,YAAYnJ,EAAEmJ,UAAUjI,EAAEwF,iBAAiBvB,EAAEoE,KAAKnJ,KAAKJ,GAAGI,KAAK0I,WAAWrI,EAAE,WAAWL,KAAKgK,aAAahK,KAAKiK,gBAAgB,WAAWjK,KAAKgK,cAAchK,KAAKwD,OAAO,SAAS5D,GAAGI,KAAKqI,OAAOzI,EAAEI,KAAK0I,cAAc1I,KAAKgK,WAAW,WAAW,GAAGhK,KAAKkI,UAAUlI,KAAKiK,mBAAmB,CAAC,GAAG1I,EAAE,IAAI2I,eAAelK,KAAKkJ,QAAQiB,kBAAkB5I,EAAE4I,gBAAgBnK,KAAKkJ,QAAQiB,iBAAiB9J,IAAIkB,EAAE6I,OAAOhF,EAAEpF,KAAKiK,aAAajK,MAAMuB,EAAE8I,QAAQjF,EAAEpF,KAAKsK,YAAYtK,OAAOuB,EAAEgJ,KAAKvK,KAAKkJ,QAAQsB,oBAAoB,OAAO,MAAMxK,KAAKqI,QAAQhI,GAAGL,KAAKkJ,QAAQuB,uBAAuB,CAAC,IAAI7K,EAAEI,KAAKkJ,QAAQuB,uBAAuB,IAAI,IAAI5K,KAAKD,EAAE2B,EAAEmJ,iBAAiB7K,EAAED,EAAEC,IAAI,GAAGG,KAAKkJ,QAAQH,UAAU,CAAC,IAAI/H,EAAEhB,KAAKyI,OAAOzI,KAAKkJ,QAAQH,UAAU,EAAExH,EAAEmJ,iBAAiB,QAAQ,SAAS1K,KAAKyI,OAAO,IAAIzH,GAAG,IAAIO,EAAEoJ,KAAK3K,KAAKkJ,QAAQsB,qBAAqB,MAAM5K,GAAGI,KAAKsK,YAAY1K,EAAEgL,SAASvK,GAAG,IAAIkB,EAAEsJ,QAAQ7K,KAAKsK,gBAAgBtK,KAAKiK,aAAa,WAAW,IAAI1I,EAAEuJ,aAAavJ,EAAEsJ,OAAO,KAAK,KAAKtJ,EAAEsJ,OAAO7K,KAAKsK,eAAetK,KAAKyI,QAAQzI,KAAKkJ,QAAQH,UAAU/I,KAAKkJ,QAAQH,UAAUxH,EAAEwJ,aAAa/G,OAAOhE,KAAKkI,WAAWlI,KAAKkJ,QAAQH,WAAW/I,KAAKyI,QAAQ,SAAS7I,GAAG,IAAIC,EAAED,EAAEoL,kBAAkB,iBAAiB,GAAG,OAAOnL,EAAE,OAAO,EAAE,OAAOmJ,SAASnJ,EAAE4J,UAAU5J,EAAEoL,YAAY,KAAK,IAA3H,CAAgI1J,GAAGvB,KAAKoJ,WAAW7H,EAAEwJ,iBAAiB/K,KAAKsK,YAAY,SAAS1K,GAAG,IAAIC,EAAE0B,EAAE2J,YAAYtL,EAAEI,KAAK+J,WAAW,IAAItF,MAAM5E,KAAK,SAAS0D,EAAE3D,GAAG,IAAI2B,EAAElB,GAAGT,EAAEA,GAAG,IAAImJ,YAAYnJ,EAAEmJ,UAAUjI,EAAEuF,gBAAgBtB,EAAEoE,KAAKnJ,KAAKJ,GAAG,IAAIK,EAAE,oBAAoBqH,WAAWtH,KAAKwD,OAAO,SAAS5D,GAAGI,KAAKqI,OAAOzI,EAAES,EAAET,EAAEgG,OAAOhG,EAAEuL,aAAavL,EAAEwL,SAASnL,IAAIsB,EAAE,IAAI+F,YAAY8C,OAAOhF,EAAEpF,KAAKiK,aAAajK,MAAMuB,EAAE8I,QAAQjF,EAAEpF,KAAKsK,YAAYtK,OAAOuB,EAAE,IAAI8J,eAAerL,KAAK0I,cAAc1I,KAAK0I,WAAW,WAAW1I,KAAKkI,WAAWlI,KAAKkJ,QAAQQ,WAAW1J,KAAKwI,UAAUxI,KAAKkJ,QAAQQ,UAAU1J,KAAKgK,cAAchK,KAAKgK,WAAW,WAAW,IAAIpK,EAAEI,KAAKqI,OAAO,GAAGrI,KAAKkJ,QAAQH,UAAU,CAAC,IAAIlJ,EAAEyL,KAAKC,IAAIvL,KAAKyI,OAAOzI,KAAKkJ,QAAQH,UAAU/I,KAAKqI,OAAOmD,MAAM5L,EAAES,EAAE8I,KAAKvJ,EAAEI,KAAKyI,OAAO5I,GAAG,IAAImB,EAAEO,EAAEkK,WAAW7L,EAAEI,KAAKkJ,QAAQwC,UAAUzL,GAAGD,KAAKiK,aAAa,CAAC0B,OAAO,CAACC,OAAO5K,MAAMhB,KAAKiK,aAAa,SAASrK,GAAGI,KAAKyI,QAAQzI,KAAKkJ,QAAQH,UAAU/I,KAAKkI,WAAWlI,KAAKkJ,QAAQH,WAAW/I,KAAKyI,QAAQzI,KAAKqI,OAAOmD,KAAKxL,KAAKoJ,WAAWxJ,EAAE+L,OAAOC,SAAS5L,KAAKsK,YAAY,WAAWtK,KAAK+J,WAAWxI,EAAEmB,QAAQ,SAASM,EAAEpD,GAAG,IAAIoB,EAAE+D,EAAEoE,KAAKnJ,KAAKJ,EAAEA,GAAG,IAAII,KAAKwD,OAAO,SAAS5D,GAAG,OAAOoB,EAAEpB,EAAEI,KAAK0I,cAAc1I,KAAK0I,WAAW,WAAW,IAAI1I,KAAKkI,UAAU,CAAC,IAAItI,EAAEC,EAAEG,KAAKkJ,QAAQH,UAAU,OAAOlJ,GAAGD,EAAEoB,EAAEyI,UAAU,EAAE5J,GAAGmB,EAAEA,EAAEyI,UAAU5J,KAAKD,EAAEoB,EAAEA,EAAE,IAAIhB,KAAKkI,WAAWlH,EAAEhB,KAAKoJ,WAAWxJ,KAAK,SAASwD,EAAExD,GAAGmF,EAAEoE,KAAKnJ,KAAKJ,EAAEA,GAAG,IAAI,IAAIC,EAAE,GAAGmB,GAAG,EAAEO,GAAG,EAAEvB,KAAK6L,MAAM,WAAW9G,EAAE+G,UAAUD,MAAME,MAAM/L,KAAKgM,WAAWhM,KAAKqI,OAAOwD,SAAS7L,KAAKiM,OAAO,WAAWlH,EAAE+G,UAAUG,OAAOF,MAAM/L,KAAKgM,WAAWhM,KAAKqI,OAAO4D,UAAUjM,KAAKwD,OAAO,SAAS5D,GAAGI,KAAKqI,OAAOzI,EAAEI,KAAKqI,OAAOlF,GAAG,OAAOnD,KAAKkM,aAAalM,KAAKqI,OAAOlF,GAAG,MAAMnD,KAAKmM,YAAYnM,KAAKqI,OAAOlF,GAAG,QAAQnD,KAAKoM,eAAepM,KAAKqM,iBAAiB,WAAW9K,GAAG,IAAI1B,EAAEmE,SAAShE,KAAKkI,WAAW,IAAIlI,KAAK0I,WAAW,WAAW1I,KAAKqM,mBAAmBxM,EAAEmE,OAAOhE,KAAKoJ,WAAWvJ,EAAEyM,SAAStL,GAAG,GAAGhB,KAAKkM,YAAY9G,GAAE,SAASxF,GAAG,IAAIC,EAAE2F,KAAK,iBAAiB5F,EAAEA,EAAEA,EAAE8B,SAAS1B,KAAKkJ,QAAQwC,WAAW1K,IAAIA,GAAG,EAAEhB,KAAKqM,mBAAmBrM,KAAKoJ,WAAWvJ,EAAEyM,UAAU,MAAM1M,GAAGI,KAAKoM,aAAaxM,MAAKI,MAAMA,KAAKoM,aAAahH,GAAE,SAASxF,GAAGI,KAAKuM,iBAAiBvM,KAAK+J,WAAWnK,KAAII,MAAMA,KAAKmM,WAAW/G,GAAE,WAAWpF,KAAKuM,iBAAiBhL,GAAG,EAAEvB,KAAKkM,YAAY,MAAKlM,MAAMA,KAAKuM,eAAenH,GAAE,WAAWpF,KAAKqI,OAAOmE,eAAe,OAAOxM,KAAKkM,aAAalM,KAAKqI,OAAOmE,eAAe,MAAMxM,KAAKmM,YAAYnM,KAAKqI,OAAOmE,eAAe,QAAQxM,KAAKoM,gBAAepM,MAAM,SAASgB,EAAE0C,GAAG,IAAI9C,EAAEJ,EAAEK,EAAEU,EAAE+J,KAAKmB,IAAI,EAAE,IAAIpM,GAAGkB,EAAEtB,EAAE,mDAAmD8E,EAAE,mNAAmNlF,EAAEG,KAAKgB,EAAE,EAAEd,EAAE,EAAEqF,GAAG,EAAE3F,GAAG,EAAEmD,EAAE,GAAGQ,EAAE,CAAC0B,KAAK,GAAG4D,OAAO,GAAG1D,KAAK,IAAI,GAAGjE,EAAEwC,EAAEtB,MAAM,CAAC,IAAIY,EAAEU,EAAEtB,KAAKsB,EAAEtB,KAAK,SAASxC,GAAG,GAAG2D,EAAE3D,EAAEqC,IAAImB,QAAQ,CAAC,GAAGA,IAAI,IAAIG,EAAE0B,KAAKjB,OAAO,OAAOhD,GAAGpB,EAAEqF,KAAKjB,OAAON,EAAEgG,SAAS1I,EAAE0C,EAAEgG,QAAQlJ,EAAEkM,SAASnJ,EAAE0B,KAAK1B,EAAE0B,KAAK,GAAGjC,EAAEO,EAAE1D,MAAM,SAAS8D,EAAE/D,GAAG,MAAM,WAAW8D,EAAEU,eAAe,KAAKxE,EAAEyF,KAAK,IAAIC,OAAO,IAAI1F,EAAEoE,QAAQ,IAAIpE,EAAE,GAAGoE,OAAO,SAASZ,IAAI,OAAOG,GAAG1C,IAAI8L,EAAE,YAAY,wBAAwB,6DAA6D7L,EAAEyF,iBAAiB,KAAK1F,GAAG,GAAG6C,EAAEU,iBAAiBb,EAAE0B,KAAK1B,EAAE0B,KAAKnB,QAAO,SAASlE,GAAG,OAAO+D,EAAE/D,OAAMqC,KAAK,WAAW,IAAIsB,EAAE,OAAO,SAAS3D,EAAEA,EAAEC,GAAGqB,EAAEwC,EAAEkJ,mBAAmBhN,EAAE8D,EAAEkJ,gBAAgBhN,EAAEC,IAAIkD,EAAEyC,KAAK5F,GAAG,GAAGsE,MAAMC,QAAQZ,EAAE0B,KAAK,IAAI,CAAC,IAAI,IAAIpF,EAAE,EAAEoC,KAAKpC,EAAE0D,EAAE0B,KAAKjB,OAAOnE,IAAI0D,EAAE0B,KAAKpF,GAAGgN,QAAQjN,GAAG2D,EAAE0B,KAAK+C,OAAO,EAAE,QAAQzE,EAAE0B,KAAK4H,QAAQjN,GAAjO,GAAuO,WAAW,IAAI2D,IAAIG,EAAEa,SAASb,EAAEzC,gBAAgByC,EAAEtC,UAAU,OAAOmC,EAAE,SAAS3D,EAAEA,EAAEC,GAAG,IAAImB,EAAEO,EAAEmC,EAAEa,OAAO,GAAG,GAAG,IAAIvD,EAAE,EAAEA,EAAEpB,EAAEoE,OAAOhD,IAAI,CAAC,IAAIX,EAAEW,EAAEf,EAAEL,EAAEoB,GAAG0C,EAAEa,SAASlE,EAAEW,GAAG+B,EAAEiB,OAAO,iBAAiBjB,EAAE/B,IAAI0C,EAAEtC,YAAYnB,EAAEyD,EAAEtC,UAAUnB,EAAEI,IAAIJ,EAAEmF,EAAE/E,EAAEJ,GAAG,mBAAmBI,GAAGkB,EAAElB,GAAGkB,EAAElB,IAAI,GAAGkB,EAAElB,GAAGmF,KAAKvF,IAAIsB,EAAElB,GAAGJ,EAAE,OAAOyD,EAAEa,SAASvD,EAAE+B,EAAEiB,OAAO2I,EAAE,gBAAgB,gBAAgB,6BAA6B5J,EAAEiB,OAAO,sBAAsBhD,EAAEd,EAAEL,GAAGmB,EAAE+B,EAAEiB,QAAQ2I,EAAE,gBAAgB,eAAe,4BAA4B5J,EAAEiB,OAAO,sBAAsBhD,EAAEd,EAAEL,IAAI0B,EAAE,IAAI1B,EAAE,GAAG0D,EAAE0B,KAAKjB,QAAQE,MAAMC,QAAQZ,EAAE0B,KAAK,KAAK1B,EAAE0B,KAAK1B,EAAE0B,KAAK6H,IAAIlN,GAAGC,EAAE0D,EAAE0B,KAAKjB,QAAQT,EAAE0B,KAAKrF,EAAE2D,EAAE0B,KAAK,GAAGvB,EAAEa,QAAQhB,EAAE4B,OAAO5B,EAAE4B,KAAKD,OAAOnC,GAAG,OAAO7C,GAAGL,EAAE0D,EAAtrB,GAA2rB,SAAStB,IAAI,OAAOyB,EAAEa,QAAQ,IAAIxB,EAAEiB,OAAO,SAASoB,EAAExF,EAAEC,GAAG,OAAOmB,EAAEpB,EAAE8D,EAAEvC,4BAA4B,IAAIuC,EAAEzC,cAAcD,KAAK0C,EAAEzC,cAAcD,GAAG0C,EAAEvC,sBAAsBH,KAAK,KAAK0C,EAAEzC,cAAcD,IAAI0C,EAAEzC,eAAe,SAASpB,GAAG,SAASA,GAAG,UAAUA,GAAG,UAAUA,IAAI,SAASD,GAAG,GAAGK,EAAEQ,KAAKb,GAAG,CAAC,IAAIC,EAAEkN,WAAWnN,GAAG,GAAGS,EAAER,GAAGA,EAAE0B,EAAE,OAAO,EAAE,OAAO,EAA1E,CAA6E1B,GAAGkN,WAAWlN,GAAGkF,EAAEtE,KAAKZ,GAAG,IAAI6F,KAAK7F,GAAG,KAAKA,EAAE,KAAKA,GAAGA,EAAE,IAAImB,EAAE,SAAS2L,EAAE/M,EAAEC,EAAEmB,EAAEO,GAAG,IAAIlB,EAAE,CAACyB,KAAKlC,EAAEoN,KAAKnN,EAAE+K,QAAQ5J,QAAQ,IAAIO,IAAIlB,EAAE4M,IAAI1L,GAAGgC,EAAEsF,OAAOrD,KAAKnF,GAAGL,KAAKe,MAAM,SAASnB,EAAEC,EAAEmB,GAAG,IAAIO,EAAEmC,EAAEY,WAAW,IAAI,GAAGZ,EAAEW,UAAUX,EAAEW,QAAQ,SAASzE,EAAEC,GAAGD,EAAEA,EAAE6J,UAAU,EAAE,SAAS,IAAIzI,EAAE,IAAI4D,OAAOC,EAAEhF,GAAG,UAAUgF,EAAEhF,GAAG,MAAM0B,GAAG3B,EAAEA,EAAEiG,QAAQ7E,EAAE,KAAKkM,MAAM,MAAM7M,EAAET,EAAEsN,MAAM,MAAMjN,EAAE,EAAEI,EAAE2D,QAAQ3D,EAAE,GAAG2D,OAAOzC,EAAE,GAAGyC,OAAO,GAAG,IAAIzC,EAAEyC,QAAQ/D,EAAE,MAAM,KAAK,IAAI,IAAIW,EAAE,EAAEJ,EAAE,EAAEA,EAAEe,EAAEyC,OAAOxD,IAAI,OAAOe,EAAEf,GAAG,IAAII,IAAI,OAAOA,GAAGW,EAAEyC,OAAO,EAAE,OAAO,KAAvR,CAA6RpE,EAAE2B,IAAIV,GAAG,EAAE6C,EAAEE,UAAU1C,EAAEwC,EAAEE,aAAaF,EAAEE,UAAUF,EAAEE,UAAUhE,GAAG2D,EAAE4B,KAAKvB,UAAUF,EAAEE,eAAe,CAAC,IAAIvD,EAAE,SAAST,EAAEC,EAAEmB,EAAEO,EAAElB,GAAG,IAAIJ,EAAEW,EAAEJ,EAAEK,EAAER,EAAEA,GAAG,CAAC,IAAI,KAAK,IAAI,IAAIS,EAAEiF,WAAWjF,EAAEoF,UAAU,IAAI,IAAInB,EAAE,EAAEA,EAAE1E,EAAE2D,OAAOe,IAAI,CAAC,IAAI7E,EAAEG,EAAE0E,GAAGQ,EAAE,EAAExC,EAAE,EAAEQ,EAAE,EAAE/C,OAAO,EAAE,IAAI,IAAIwC,EAAE,IAAIyD,EAAE,CAAC0G,SAAS5L,EAAEqC,UAAU1D,EAAEmE,QAAQxE,EAAE6J,QAAQ,KAAK3I,MAAMnB,GAAGwD,EAAE,EAAEA,EAAEJ,EAAEiC,KAAKjB,OAAOZ,IAAI,GAAGpC,GAAG2C,EAAEX,EAAEiC,KAAK7B,IAAIG,QAAQ,CAAC,IAAItB,EAAEe,EAAEiC,KAAK7B,GAAGY,OAAOjB,GAAGd,OAAO,IAAIzB,EAAE,EAAEyB,IAAIsD,GAAG+F,KAAK8B,IAAInL,EAAEzB,GAAGA,EAAEyB,GAAGzB,EAAEyB,EAAE,EAAEe,EAAEiC,KAAKjB,SAASjB,GAAGC,EAAEiC,KAAKjB,OAAOT,SAAS,IAAI3C,GAAG2E,GAAG3E,UAAU,IAAIC,GAAGA,EAAEkC,IAAI,KAAKA,IAAInC,EAAE2E,EAAEtF,EAAEC,EAAEW,EAAEkC,GAAG,MAAM,CAACsK,cAAc3J,EAAEE,UAAU3D,GAAGqN,cAAcrN,GAApe,CAAweL,EAAE8D,EAAEW,QAAQX,EAAEU,eAAeV,EAAEyJ,SAASzJ,EAAE6J,mBAAmBlN,EAAEgN,WAAW3J,EAAEE,UAAUvD,EAAEiN,eAAezM,GAAG,EAAE6C,EAAEE,UAAU9C,EAAEyF,kBAAkBhD,EAAE4B,KAAKvB,UAAUF,EAAEE,UAAU,IAAI3D,EAAE6I,EAAEpF,GAAG,OAAOA,EAAEgG,SAAShG,EAAEa,QAAQtE,EAAEyJ,UAAU9I,EAAEhB,EAAEY,EAAE,IAAIiG,EAAExG,GAAGsD,EAAE/C,EAAEO,MAAMH,EAAEf,EAAEmB,GAAGoC,IAAImC,EAAE,CAACJ,KAAK,CAACmE,QAAQ,IAAI/F,GAAG,CAAC4B,KAAK,CAACmE,QAAQ,KAAKtJ,KAAKsJ,OAAO,WAAW,OAAO/D,GAAGvF,KAAK6L,MAAM,WAAWtG,GAAG,EAAE/E,EAAEkM,QAAQ9L,EAAEM,EAAEwC,EAAEpB,OAAO,GAAG1B,EAAE6I,UAAUjJ,EAAEgN,iBAAiBxN,KAAKiM,OAAO,WAAWpM,EAAEoJ,SAASb,SAAS7C,GAAG,EAAE1F,EAAEoJ,SAASG,WAAWxI,GAAG,IAAI6M,WAAW5N,EAAEoM,OAAO,IAAIjM,KAAKuJ,QAAQ,WAAW,OAAO3J,GAAGI,KAAK0M,MAAM,WAAW9M,GAAG,EAAEY,EAAEkM,QAAQnJ,EAAE4B,KAAKoE,SAAS,EAAErI,EAAEwC,EAAElB,WAAWkB,EAAElB,SAASe,GAAG3C,EAAE,IAAI,SAASiE,EAAEjF,GAAG,OAAOA,EAAEiG,QAAQ,sBAAsB,QAAQ,SAASY,EAAE7G,GAAG,IAAI8N,EAAEC,GAAG/N,EAAEA,GAAG,IAAIgE,UAAUgK,EAAEhO,EAAEyE,QAAQwJ,EAAEjO,EAAEuN,SAASW,EAAElO,EAAEwC,KAAK2L,EAAEnO,EAAE8J,QAAQsE,EAAEpO,EAAEqO,SAASC,EAAER,OAAO,IAAI9N,EAAE0E,WAAW,OAAO1E,EAAE0E,UAAU,IAAI1E,EAAE0E,UAAU,QAAQ,IAAI1E,EAAE8E,aAAawJ,EAAEtO,EAAE8E,aAAa,iBAAiBiJ,IAAI,EAAE7M,EAAE+C,eAAeE,QAAQ4J,MAAMA,EAAE,KAAKE,IAAIF,EAAE,MAAM,IAAIlJ,MAAM,wCAAwC,IAAIoJ,EAAEA,EAAE,KAAK,iBAAiBA,IAAI,EAAE/M,EAAE+C,eAAeE,QAAQ8J,MAAMA,GAAG,GAAG,OAAOD,GAAG,OAAOA,GAAG,SAASA,IAAIA,EAAE,MAAM,IAAIO,EAAE,EAAEC,GAAG,EAAEpO,KAAKe,MAAM,SAASQ,EAAE1B,EAAEmB,GAAG,GAAG,iBAAiBO,EAAE,MAAM,IAAIkD,MAAM,0BAA0B,IAAIpE,EAAEkB,EAAEyC,OAAOpE,EAAE+N,EAAE3J,OAAO/D,EAAE2N,EAAE5J,OAAOpD,EAAEiN,EAAE7J,OAAOxD,EAAEU,EAAE4M,GAAGjN,EAAE,GAAGkE,EAAE,GAAG7E,EAAE,GAAGqF,EAAE4I,EAAE,EAAE,IAAI5M,EAAE,OAAO8M,IAAI,GAAGL,IAAI,IAAIA,IAAI,IAAIzM,EAAEwC,QAAQ2J,GAAG,CAAC,IAAI,IAAI3K,EAAExB,EAAE2L,MAAMU,GAAGrK,EAAE,EAAEA,EAAER,EAAEiB,OAAOT,IAAI,CAAC,GAAGrD,EAAE6C,EAAEQ,GAAG4K,GAAGjO,EAAE8D,OAAOT,IAAIR,EAAEiB,OAAO,EAAEmK,GAAGP,EAAE5J,YAAY,GAAGhD,EAAE,OAAOqN,IAAI,IAAIR,GAAG3N,EAAEuJ,UAAU,EAAE7I,KAAKiN,EAAE,CAAC,GAAGrN,EAAE,CAAC,GAAGK,EAAE,GAAG8L,EAAEzM,EAAEgN,MAAMS,IAAIW,IAAIF,EAAE,OAAOC,SAAS1B,EAAEzM,EAAEgN,MAAMS,IAAI,GAAGI,GAAGA,GAAGxK,EAAE,OAAO1C,EAAEA,EAAE+E,MAAM,EAAEmI,GAAGM,GAAG,IAAI,OAAOA,IAAI,IAAI,IAAIrL,EAAEzB,EAAEwC,QAAQ4J,EAAEQ,GAAG/K,EAAE7B,EAAEwC,QAAQ6J,EAAEO,GAAGlM,EAAE,IAAI2C,OAAOC,EAAEqJ,GAAGrJ,EAAE6I,GAAG,KAAKhK,EAAEnC,EAAEwC,QAAQ2J,EAAES,KAAK,GAAG5M,EAAE4M,KAAKT,EAAE,GAAGG,GAAG,IAAI3N,EAAE8D,QAAQzC,EAAEkI,UAAU0E,EAAEA,EAAEvN,KAAKiN,EAAE,CAAC,IAAI,IAAIzK,EAAE,OAAOiL,IAAIF,EAAE/K,EAAEnD,EAAEmD,EAAE7B,EAAEwC,QAAQ6J,EAAEO,GAAGnL,EAAEzB,EAAEwC,QAAQ4J,EAAEQ,QAAQ,IAAI,IAAInL,IAAIA,EAAEI,IAAI,IAAIA,GAAGlD,EAAEsF,KAAKjE,EAAEkI,UAAU0E,EAAEnL,IAAImL,EAAEnL,EAAEpD,EAAEoD,EAAEzB,EAAEwC,QAAQ4J,EAAEQ,OAAO,CAAC,IAAI,IAAI/K,EAAE,MAAM,GAAGlD,EAAEsF,KAAKjE,EAAEkI,UAAU0E,EAAE/K,IAAI0F,EAAE1F,EAAEnD,GAAGO,IAAI8N,IAAIF,GAAG,OAAOC,IAAI,GAAGN,GAAGlN,EAAEmD,QAAQ+J,EAAE,OAAOM,GAAG,QAAQ,IAAI3K,EAAEyK,EAAEA,MAAM,CAAC,IAAI,KAAKzK,EAAEnC,EAAEwC,QAAQ2J,EAAEhK,EAAE,IAAI,OAAO1C,GAAG+D,EAAES,KAAK,CAAC1D,KAAK,SAASkL,KAAK,gBAAgBpC,QAAQ,4BAA4BqC,IAAIpM,EAAEmD,OAAOuK,MAAMJ,IAAI1H,IAAI,GAAG/C,IAAIrD,EAAE,EAAE,OAAOoG,EAAElF,EAAEkI,UAAU0E,EAAEzK,GAAGmC,QAAQ5D,EAAEyL,IAAI,GAAGA,IAAIQ,GAAG3M,EAAEmC,EAAE,KAAKwK,EAAE,CAAC,GAAGR,IAAIQ,GAAG,IAAIxK,GAAGnC,EAAEmC,EAAE,KAAKwK,EAAE,EAAE,IAAIlL,GAAGA,EAAEU,EAAE,IAAIV,EAAEzB,EAAEwC,QAAQ4J,EAAEjK,EAAE,KAAK,IAAIN,GAAGA,EAAEM,EAAE,IAAIN,EAAE7B,EAAEwC,QAAQ6J,EAAElK,EAAE,IAAI,IAAIC,EAAE7C,GAAG,IAAIsC,EAAEJ,EAAEsI,KAAKC,IAAIvI,EAAEI,IAAI,GAAG7B,EAAEiN,OAAO9K,EAAE,EAAEC,EAAE/D,KAAK+N,EAAE,CAACzN,EAAEsF,KAAKjE,EAAEkI,UAAU0E,EAAEzK,GAAGmC,QAAQ5D,EAAEyL,IAAInM,EAAE4M,EAAEzK,EAAE,EAAEC,EAAE/D,KAAK8N,IAAIhK,EAAEnC,EAAEwC,QAAQ2J,EAAES,IAAInL,EAAEzB,EAAEwC,QAAQ4J,EAAEQ,GAAG/K,EAAE7B,EAAEwC,QAAQ6J,EAAEO,GAAG,MAAM,IAAI/I,EAAEtE,EAAEsC,GAAG,GAAG7B,EAAEkI,UAAU/F,EAAE,EAAE0B,EAAE1B,EAAE,EAAE0B,EAAEnF,KAAK2N,EAAE,CAAC,GAAG1N,EAAEsF,KAAKjE,EAAEkI,UAAU0E,EAAEzK,GAAGmC,QAAQ5D,EAAEyL,IAAI5E,EAAEpF,EAAE,EAAE0B,EAAEnF,GAAG+C,EAAEzB,EAAEwC,QAAQ4J,EAAEQ,GAAGzK,EAAEnC,EAAEwC,QAAQ2J,EAAES,GAAG3N,IAAI8N,IAAIF,GAAG,OAAOC,IAAI,GAAGN,GAAGlN,EAAEmD,QAAQ+J,EAAE,OAAOM,GAAG,GAAG,MAAMtJ,EAAES,KAAK,CAAC1D,KAAK,SAASkL,KAAK,gBAAgBpC,QAAQ,8CAA8CqC,IAAIpM,EAAEmD,OAAOuK,MAAMJ,IAAIzK,UAAUA,IAAI,OAAO+C,IAAI,SAASkG,EAAE/M,GAAGiB,EAAE2E,KAAK5F,GAAG2F,EAAE4I,EAAE,SAASrN,EAAElB,GAAG,IAAIC,EAAE,EAAE,IAAI,IAAID,EAAE,CAAC,IAAIoB,EAAEO,EAAEkI,UAAU/F,EAAE,EAAE9D,GAAGoB,GAAG,KAAKA,EAAEsE,SAASzF,EAAEmB,EAAEgD,QAAQ,OAAOnE,EAAE,SAAS4G,EAAE7G,GAAG,OAAOoB,SAAS,IAAIpB,IAAIA,EAAE2B,EAAEkI,UAAU0E,IAAIjO,EAAEsF,KAAK5F,GAAGuO,EAAE9N,EAAEsM,EAAEzM,GAAGM,GAAG8N,KAAKD,IAAI,SAASvF,EAAElJ,GAAGuO,EAAEvO,EAAE+M,EAAEzM,GAAGA,EAAE,GAAGkD,EAAE7B,EAAEwC,QAAQ6J,EAAEO,GAAG,SAASE,EAAEzO,GAAG,MAAM,CAACqF,KAAKpE,EAAEgI,OAAO9D,EAAEI,KAAK,CAACvB,UAAU+J,EAAEc,UAAUb,EAAErE,QAAQ6E,EAAEM,YAAY9O,EAAE4J,OAAOjE,GAAG1F,GAAG,KAAK,SAASyO,IAAIR,EAAEO,KAAKxN,EAAE,GAAGkE,EAAE,KAAK/E,KAAK0M,MAAM,WAAW0B,GAAG,GAAGpO,KAAKwN,aAAa,WAAW,OAAOW,GAAG,SAASlM,EAAErC,GAAG,IAAIC,EAAED,EAAEqF,KAAKjE,EAAEJ,EAAEf,EAAEgD,UAAUtB,GAAG,EAAE,GAAG1B,EAAE6C,MAAM1B,EAAEyB,UAAU5C,EAAE6C,MAAM7C,EAAE2H,WAAW,GAAG3H,EAAE8J,SAAS9J,EAAE8J,QAAQ1E,KAAK,CAAC,IAAI5E,EAAE,CAACqM,MAAM,WAAWnL,GAAG,EAAEmC,EAAE7D,EAAEgD,SAAS,CAACoC,KAAK,GAAG4D,OAAO,GAAG1D,KAAK,CAACoE,SAAS,MAAMsC,MAAMlI,EAAEsI,OAAOtI,GAAG,GAAGzC,EAAEF,EAAEmB,UAAU,CAAC,IAAI,IAAIlC,EAAE,EAAEA,EAAEJ,EAAE8J,QAAQ1E,KAAKjB,SAAShD,EAAEmB,SAAS,CAAC8C,KAAKpF,EAAE8J,QAAQ1E,KAAKhF,GAAG4I,OAAOhJ,EAAE8J,QAAQd,OAAO1D,KAAKtF,EAAE8J,QAAQxE,MAAM9E,IAAIkB,GAAGtB,YAAYJ,EAAE8J,aAAazI,EAAEF,EAAEqB,aAAarB,EAAEqB,UAAUxC,EAAE8J,QAAQtJ,EAAER,EAAE2H,aAAa3H,EAAE8J,SAAS9J,EAAEgK,WAAWtI,GAAGmC,EAAE7D,EAAEgD,SAAShD,EAAE8J,SAAS,SAASjG,EAAE9D,EAAEC,GAAG,IAAImB,EAAEJ,EAAEhB,GAAGsB,EAAEF,EAAEuB,eAAevB,EAAEuB,aAAa1C,GAAGmB,EAAE2N,mBAAmB/N,EAAEhB,GAAG,SAAS+D,IAAI,MAAM,IAAIc,MAAM,oBAAoB,SAASqE,EAAElJ,GAAG,GAAG,iBAAiBA,GAAG,OAAOA,EAAE,OAAOA,EAAE,IAAIC,EAAEqE,MAAMC,QAAQvE,GAAG,GAAG,GAAG,IAAI,IAAIoB,KAAKpB,EAAEC,EAAEmB,GAAG8H,EAAElJ,EAAEoB,IAAI,OAAOnB,EAAE,SAASuF,EAAExF,EAAEC,GAAG,OAAO,WAAWD,EAAEmM,MAAMlM,EAAEmM,YAAY,SAAS9K,EAAEtB,GAAG,MAAM,mBAAmBA,EAAE,OAAOY,IAAIN,EAAE8B,UAAU,SAASpC,GAAG,IAAIC,EAAED,EAAEqF,UAAU,IAAInE,EAAE8I,WAAW/J,IAAIiB,EAAE8I,UAAU/J,EAAEgD,UAAU,GAAG,iBAAiBhD,EAAE8C,MAAMzC,EAAEK,YAAY,CAACsC,SAAS/B,EAAE8I,UAAUD,QAAQ7I,EAAEC,MAAMlB,EAAE8C,MAAM9C,EAAE+C,QAAQiH,UAAU,SAAS,GAAG3J,EAAEmD,MAAMxD,EAAE8C,iBAAiBU,MAAMxD,EAAE8C,iBAAiBW,OAAO,CAAC,IAAItC,EAAEF,EAAEC,MAAMlB,EAAE8C,MAAM9C,EAAE+C,QAAQ5B,GAAGd,EAAEK,YAAY,CAACsC,SAAS/B,EAAE8I,UAAUD,QAAQ3I,EAAE6I,UAAU,QAAQ9G,EAAE+I,UAAUxI,OAAOsL,OAAO7J,EAAE+G,YAAYrG,YAAY1C,GAAGQ,EAAEuI,UAAUxI,OAAOsL,OAAO7J,EAAE+G,YAAYrG,YAAYlC,GAAGP,EAAE8I,UAAUxI,OAAOsL,OAAO5L,EAAE8I,YAAYrG,YAAYzC,GAAGI,EAAE0I,UAAUxI,OAAOsL,OAAO7J,EAAE+G,YAAYrG,YAAYrC,EAAEtC,QCNt4kB,MAAMF,EAAEA,IAAIA,EAAE,YAAYA,GAAG,GAAG,EAAE,IAAIhB,EAAE0L,KAAKuD,KAAKjO,EAAEA,IAAI,GAAG,EAAEA,GAAG,OAAOhB,EAAEA,EAAE0L,KAAKuD,KAAKjP,EAAEA,IAAI,EAAE,GAAGA,GAAGA,IAAIA,EAAEA,IAAI,MAAM,GAAG,YAAY,MAAMA,EAAEkP,YAAYlO,GAAGZ,KAAK+O,kBAAkB,EAAE/O,KAAKgE,YAAY,EAAEhE,KAAKgP,eAAe,EAAEhP,KAAKiP,WAAW,EAAEjP,KAAKkP,UAAU,EAAE,MAAMlL,OAAOpE,EAAEoP,UAAUhO,EAAE+N,aAAa1O,EAAE4O,MAAMlM,EAAEmM,KAAK3N,GAAGX,EAAEZ,KAAK+O,aAAa1O,EAAEL,KAAKgP,UAAUhO,EAAEhB,KAAKgE,OAAOpE,EAAEI,KAAKiP,MAAMlM,EAAE/C,KAAKkP,KAAK3N,EAAEuN,WAAW,IAAI9O,KAAK+O,aAAa,MAAM,IAAItK,MAAM,uHAAuH,GAAGzE,KAAKgE,QAAQ,EAAE,MAAM,IAAIS,MAAM,2BAA2B,GAAGzE,KAAKgE,OAAOhE,KAAK+O,aAAa/K,OAAO,MAAM,IAAIS,MAAM,kFAAkFzE,KAAKgE,4CAA4ChE,KAAK+O,aAAa/K,UAAU,IAAIpE,EAAEI,KAAKkP,KAAK,OAAOlP,KAAK+O,aAAanJ,MAAM,EAAE5F,KAAKgE,QAAQmL,QAAO,CAACnO,EAAEX,KAAK,IAAI0C,EAAEnD,GAAGmD,EAAE,CAACnD,IAAI,GAAG,iBAAiBA,EAAE,CAAC,MAAMoB,EAAEpB,EAAEsN,MAAM,IAAIJ,KAAIlM,GAAGA,EAAEwO,WAAW,KAAID,QAAO,CAACvO,EAAEhB,IAAIgB,EAAEhB,GAAE,GAAGS,EAAEiL,KAAK+D,MAAMC,OAAOtO,IAAI,OAAOJ,EAAEP,GAAG,OAAOO,EAAEhB,IAA1I,CAA+IA,GAAGA,EAAE,WAAWmD,GAAGA,EAAEuI,KAAKiE,SAAS,IAAIhO,EAAElB,EAAEiL,KAAK+D,MAAMtM,EAAE1C,EAAE2D,UAAU,GAAG,GAAG,cAAchE,KAAKiP,MAAM1N,EAAEA,EAAE8F,mBAAmB,GAAG,YAAYrH,KAAKiP,MAAM,CAAC,MAAMrO,KAAKhB,GAAG2B,EAAE2L,MAAM,IAAI3L,EAAEX,EAAEuG,cAAcvH,EAAEyF,KAAK,QAAQ,cAAcrF,KAAKiP,QAAQ1N,EAAEA,EAAE4F,eAAe,OAAOnG,EAAE,GAAGA,IAAIhB,KAAKgP,YAAYzN,IAAI,GAAGA,MAAK,KAAK,MAAMP,EAAE,CAACgO,UAAU,IAAID,aAAa,IAAI1O,EAAEO,IAAI,MAAMP,EAAE,IAAIO,GAAGA,EAAEmO,cAAc/N,EAAE+N,cAAchM,EAAE,IAAI/B,KAAKJ,EAAEoD,OAAOpD,GAAGA,EAAEoD,QAAQ3D,EAAE2D,OAAO+K,aAAa1O,GAAG,IAAIO,IAAIA,EAAEmO,eAAenO,EAAEmO,aAAa/K,OAAO,MAAM,IAAIS,MAAM,2OAA2O,OAAO,IAAI7E,EAAEmD,GAAGyM,YAAe,IAA0kYjO,EAAE,CAAC,WAAW,WAAW,YAAY,YAAY,SAAS,YAAY,WAAW,YAAY,aAAa,MAAM,WAAW,WAAW,UAAU,MAAM,QAAQ,YAAY,MAAM,SAAS,SAAS,YAAY,WAAW,YAAY,WAAW,OAAO,MAAM,OAAO,SAAS,SAAS,MAAM,SAAS,OAAO,QAAQ,YAAY,MAAM,OAAO,SAAS,WAAW,SAAS,QAAQ,QAAQ,MAAM,YAAY,UAAU,QAAQ,QAAQ,UAAU,WAAW,WAAW,UAAU,OAAO,MAAM,cAAc,UAAU,WAAW,SAAS,YAAY,aAAa,YAAY,UAAU,YAAY,UAAU,aAAa,aAAa,WAAW,SAAS,OAAO,YAAY,QAAQ,YAAY,MAAM,SAAS,cAAc,QAAQ,SAAS,MAAM,SAAS,OAAO,QAAQ,UAAU,WAAW,UAAU,YAAY,OAAO,SAAS,YAAY,OAAO,QAAQ,WAAW,MAAM,UAAU,SAAS,WAAW,OAAO,SAAS,YAAY,OAAO,QAAQ,YAAY,SAAS,UAAU,MAAM,QAAQ,WAAW,MAAM,MAAM,SAAS,SAAS,UAAU,SAAS,QAAQ,UAAU,OAAO,WAAW,OAAO,MAAM,aAAa,OAAO,MAAM,OAAO,YAAY,WAAW,QAAQ,UAAU,QAAQ,SAAS,SAAS,UAAU,OAAO,WAAW,QAAQ,SAAS,UAAU,cAAc,SAAS,OAAO,UAAU,aAAa,OAAO,QAAQ,UAAU,UAAU,UAAU,OAAO,UAAU,OAAO,WAAW,QAAQ,UAAU,eAAe,WAAW,SAAS,QAAQ,WAAW,cAAc,QAAQ,SAAS,SAAS,SAAS,SAAS,MAAM,YAAY,aAAa,WAAW,aAAa,OAAO,OAAO,QAAQ,MAAM,QAAQ,UAAU,UAAU,WAAW,OAAO,QAAQ,UAAU,QAAQ,UAAU,SAAS,SAAS,OAAO,SAAS,QAAQ,UAAU,SAAS,OAAO,QAAQ,WAAW,OAAO,QAAQ,WAAW,SAAS,SAAS,UAAU,WAAW,SAAS,WAAW,SAAS,YAAY,SAAS,WAAW,aAAa,UAAU,OAAO,SAAS,OAAO,cAAc,OAAO,UAAU,WAAW,SAAS,QAAQ,WAAW,OAAO,QAAQ,OAAO,SAAS,UAAU,OAAO,cAAc,SAAS,UAAU,UAAU,YAAY,OAAO,UAAU,QAAQ,MAAM,KAAK,QAAQ,UAAU,WAAW,SAAS,aAAa,YAAY,UAAU,UAAU,UAAU,UAAU,QAAQ,WAAW,MAAM,SAAS,OAAO,WAAW,UAAU,YAAY,WAAW,OAAO,YAAY,WAAW,SAAS,QAAQ,UAAU,YAAY,SAAS,OAAO,SAAS,QAAQ,SAAS,SAAS,SAAS,UAAU,MAAM,cAAc,QAAQ,WAAW,UAAU,aAAa,aAAa,SAAS,OAAO,UAAU,YAAY,WAAW,aAAa,SAAS,UAAU,UAAU,WAAW,WAAW,QAAQ,QAAQ,QAAQ,SAAS,WAAW,aAAa,QAAQ,QAAQ,QAAQ,OAAO,QAAQ,QAAQ,QAAQ,QAAQ,OAAO,UAAU,SAAS,YAAY,QAAQ,WAAW,WAAW,WAAW,QAAQ,QAAQ,WAAW,UAAU,OAAO,QAAQ,YAAY,YAAY,OAAO,QAAQ,QAAQ,YAAY,UAAU,UAAU,OAAO,SAAS,OAAO,QAAQ,SAAS,OAAO,WAAW,SAAS,QAAQ,OAAO,SAAS,SAAS,gBAAgB,UAAU,QAAQ,SAAS,QAAQ,OAAO,UAAU,UAAU,SAAS,UAAU,OAAO,SAAS,QAAQ,UAAU,YAAY,UAAU,aAAa,WAAW,OAAO,YAAY,SAAS,aAAa,OAAO,OAAO,UAAU,MAAM,SCMhoiBkO,eAAeC,EAASC,EAAiBC,GAEvC,GAAGD,IAAa,KAAM,CACpB,MAAO,GAET,MAAME,EAAc,CAClBtL,OAAQ,MAGV,MAAMiD,QAAasI,MAAMH,GACzB,MAAMI,QAAavI,EAAKuI,OACxB,IACE,MAAMC,EAAYC,EAAAA,MAAWF,EAAMF,GACnC,MAAMK,EAAYF,EAAU/K,KAE5B,MAAMA,EAAO2K,EAAOM,GACpB,OAAOjL,EACP,MAAOvC,GACPyN,QAAQzN,MAAM,uBAAwB,CAACiN,SAAAA,EAAUjN,MAAAA,IACjDyN,QAAQzN,MAAM,OAAQqN,IAM1B,SAASK,EAAYnL,GACnB,OAAOA,EAEFwK,eAAeY,EAAaV,GACjC,MAAMW,EAAWZ,EAASC,EAAUS,GACpC,OAAOE,EAGFb,eAAec,EAAeZ,EAAiBa,EAAwBF,GAC5E,IAAIG,QAAuBf,EAASC,EAAUS,GAG9C,MAAMM,EAAaD,EAAe3D,KAAKG,UACrC,MAAM0D,EAAuB,CAC3BzO,GAAI+K,EAAI/K,GACR6F,KAAMkF,EAAIlF,KACV6I,YAAa3D,EAAI2D,YACjBC,KAAM5D,EAAI4D,KACVL,QAAS,GACTM,WAAUC,EAAA9D,EAAI+D,aAAS,MAAAD,SAAA,OAAA,EAAAA,EAAE1J,iBAAkB,SAG7C,MAAM4J,EAAgBhE,EAAIuD,QAAQtD,MAAM,KACxCyD,EAAUH,QAAQU,MAAQV,EAAQ1M,QAAOJ,GAAKA,EAAEqE,OAASkF,EAAIiE,QAC7DP,EAAUH,QAAQA,QAAUA,EAAQ1M,QAAOJ,GAClCuN,EAAcE,SAASzN,EAAEqE,QAGlC4I,EAAUL,SAAWA,EAASxM,QAAQsN,GAC7BA,EAAOT,YAAcA,EAAU5I,OASxC,OAAO4I,KAGT,OAAOD,EAGFjB,eAAe4B,EAAUC,GAC9B,MAAMC,EAAsBD,EAAkBnC,QAAO,CAACqC,EAAOb,KAE3D,MAAMc,EAAYnO,OAAAoO,OAAApO,OAAAoO,OAAA,GAAOf,GAAc,CAACL,SAAU,KAClD,MAAO,IAAIkB,EAAOC,KACjB,IACH,MAAME,EAAqB,IAAIJ,EAAqBK,IAAmBA,KAEvE,OAAOD,EAEFlC,eAAeoC,EAAYlC,GAChC,MAAMa,QAA+Bd,EAASC,EAAUS,GACxD,OAAOI,EAIT,SAASsB,EAAYC,GACnB,OAAOA,EAAIlM,QACT,UACA,SAASmM,GACP,OAAOA,EAAIlM,OAAO,GAAGqB,cAAgB6K,EAAIxD,OAAO,GAAGnH,0BAKzCuK,EAAgBK,EAAS,IACvC,MAAMC,EAA8B,CAClChQ,GAAI8D,OAAOsF,KAAK+D,MAAM/D,KAAKiE,SAAW,MACtCxH,KAAM+J,EAAYK,IAAiB,cACnC3B,QAAS,CAACU,MAAO,GAAIV,QAAQ,IAC7BM,SAAU,KACVR,SAAU,IAEZ,MAAMK,EAASrN,OAAAoO,OAAApO,OAAAoO,OAAA,GACVO,GACAC,GAEL,OAAOvB,WAGOwB,IACd,MAAMC,EAAqBC,EAAqB,CAC9CtD,aAAc,CAAEuD,GAChBtD,UAAW,IACXC,MAAO,UACPjL,OAAQ,IAEV,OAAOoO,WAGOG,EAAgBjC,GAC5B,MAAMkC,EAAYlC,IAAQ,MAARA,SAAQ,OAAA,EAARA,EAAUnB,QAAO,CAACsD,EAAKrB,IAEhCqB,GAAOnD,OAAO8B,EAAOsB,SAC3B,GAIH,MAAMC,IAAiBH,EAAY,IAAII,KAAKC,aAAa,QACvD,CACE5D,MAAO,WACP6D,SAAU,MACVC,sBAAuB,EACvBC,yBAA0B,IACzBC,OAAOT,EAAY,KAAa,KACrC,OAAOG,EC1IX,MAAMO,EAAc,CAACpG,EAAKqG,EAAUC,KAChC,MAAMC,EAAQvG,EAAIwG,IAAIH,GACtB,IAAKE,EAAO,CACRvG,EAAIyG,IAAIJ,EAAU,CAACC,SAElB,IAAKC,EAAMlC,SAASiC,GAAQ,CAC7BC,EAAM7N,KAAK4N,KAGnB,MAAMI,EAAW,CAACxM,EAAIyM,KAClB,IAAIC,EACJ,MAAO,IAAIC,KACP,GAAID,EAAW,CACXE,aAAaF,GAEjBA,EAAYjG,YAAW,KACnBiG,EAAY,EACZ1M,KAAM2M,KACPF,KAaX,MAAMI,EAAeC,KAAmB,gBAAiBA,IAAiBA,EAAaD,YACvF,MAAME,EAAkBP,GAAU1G,IAC9B,IAAK,IAAIkH,KAAOlH,EAAI9H,OAAQ,CACxB8H,EAAIyG,IAAIS,EAAKlH,EAAIwG,IAAIU,GAAKlQ,OAAO+P,OAEtC,KACH,MAAMI,EAAsB,KACxB,UAAWC,IAAoB,WAAY,CAGvC,MAAO,GAEX,MAAMC,EAAe,IAAIC,IACzB,MAAO,CACHC,QAAS,IAAMF,EAAaG,QAC5BhB,IAAMH,IACF,MAAMoB,EAAML,IACZ,GAAIK,EAAK,CACLrB,EAAYiB,EAAchB,EAAUoB,KAG5ChB,IAAMJ,IACF,MAAMqB,EAAWL,EAAab,IAAIH,GAClC,GAAIqB,EAAU,CACVL,EAAaZ,IAAIJ,EAAUqB,EAAS1Q,OAAO2Q,IAE/CV,EAAgBI,IAEpBO,MAAO,KACHP,EAAatH,SAAS8H,GAASA,EAAK9H,QAAQ4H,KAC5CV,EAAgBI,MAK5B,MAAMS,EAAUC,UAAgBA,IAAQ,WAAaA,IAAQA,EAC7D,MAAMC,EAAsB,CAACC,EAAcC,EAAe,EAACpU,EAAGE,IAAMF,IAAME,MACtE,MAAMmU,EAAiBL,EAAOG,GAC9B,IAAIG,EAAS,IAAId,IAAI9Q,OAAO6R,QAAQF,IAAmB,MAAQA,SAAwB,EAAIA,EAAiB,KAC5G,MAAMG,EAAW,CACbf,QAAS,GACTf,IAAK,GACLC,IAAK,GACLmB,MAAO,IAEX,MAAMA,EAAQ,KACV,IAAI3D,EAGJmE,EAAS,IAAId,IAAI9Q,OAAO6R,SAASpE,EAAK6D,EAAOG,MAAmB,MAAQhE,SAAY,EAAIA,EAAK,KAC7FqE,EAASV,MAAM7H,SAASwI,GAAOA,OAEnC,MAAMhB,EAAU,KAGZe,EAASf,QAAQxH,SAASwI,GAAOA,MACjCX,KAEJ,MAAMpB,EAAOH,IACTiC,EAAS9B,IAAIzG,SAASwI,GAAOA,EAAGlC,KAChC,OAAO+B,EAAO5B,IAAIH,IAEtB,MAAMI,EAAM,CAACJ,EAAUC,KACnB,MAAMkC,EAAWJ,EAAO5B,IAAIH,GAC5B,GAAI6B,EAAa5B,EAAOkC,EAAUnC,GAAW,CACzC+B,EAAO3B,IAAIJ,EAAUC,GACrBgC,EAAS7B,IAAI1G,SAASwI,GAAOA,EAAGlC,EAAUC,EAAOkC,OAGzD,MAAMC,SAAgBC,QAAU,YAC1B,GACA,IAAIA,MAAMP,EAAgB,CACxBnG,IAAI7M,EAAGkR,GACH,OAAOG,EAAIH,IAEfrE,QAAQ7M,GACJ,OAAOiC,MAAMuR,KAAKP,EAAOlQ,SAE7B8J,2BACI,MAAO,CACH4G,WAAY,KACZC,aAAc,OAGtB7G,IAAI7M,EAAGkR,GACH,OAAO+B,EAAOU,IAAIzC,IAEtBrE,IAAI7M,EAAGkR,EAAUC,GACbG,EAAIJ,EAAUC,GACd,OAAO,QAGnB,MAAMjQ,EAAK,CAAC0S,EAAWC,KACnBV,EAASS,GAAWrQ,KAAKsQ,GACzB,MAAO,KACHC,EAAgBX,EAASS,GAAYC,KAG7C,MAAME,EAAW,CAAC7C,EAAUkC,KACxB,MAAMY,EAAQ9S,EAAG,OAAO,CAAC6Q,EAAKkC,KAC1B,GAAIlC,IAAQb,EAAU,CAClBkC,EAAGa,OAKX,MAAMC,EAAUhT,EAAG,SAAS,IAAMkS,EAAGT,EAAOG,GAAc5B,MAC1D,MAAO,KACH8C,IACAE,MAGR,MAAMC,EAAM,IAAIC,KACZ,MAAMC,EAASD,EAAclH,QAAO,CAACmH,EAAQC,KACzC,GAAIA,EAAahD,IAAK,CAClB+C,EAAO9Q,KAAKrC,EAAG,MAAOoT,EAAahD,MAEvC,GAAIgD,EAAajD,IAAK,CAClBgD,EAAO9Q,KAAKrC,EAAG,MAAOoT,EAAajD,MAEvC,GAAIiD,EAAa7B,MAAO,CACpB4B,EAAO9Q,KAAKrC,EAAG,QAASoT,EAAa7B,QAEzC,GAAI6B,EAAalC,QAAS,CACtBiC,EAAO9Q,KAAKrC,EAAG,UAAWoT,EAAalC,UAE3C,OAAOiC,IACR,IACH,MAAO,IAAMA,EAAOzJ,SAAS2J,GAAUA,OAE3C,MAAM/B,EAAeT,IACjB,MAAMsB,EAAWJ,EAAO5B,IAAIU,GAC5BoB,EAAS7B,IAAI1G,SAASwI,GAAOA,EAAGrB,EAAKsB,EAAUA,MAEnD,MAAO,CACHC,MAAAA,EACAjC,IAAAA,EACAC,IAAAA,EACApQ,GAAAA,EACA6S,SAAAA,EACAI,IAAAA,EACA/B,QAAAA,EACAK,MAAAA,EACAD,YAAAA,IAGR,MAAMsB,EAAkB,CAACvE,EAAOiF,KAC5B,MAAMlI,EAAQiD,EAAMzN,QAAQ0S,GAC5B,GAAIlI,GAAS,EAAG,CACZiD,EAAMjD,GAASiD,EAAMA,EAAMxN,OAAS,GACpCwN,EAAMxN,WAId,MAAM0S,EAAc,CAAC3B,EAAcC,KAC/B,MAAMlI,EAAMgI,EAAoBC,EAAcC,GAC9ClI,EAAIsJ,IAAInC,KACR,OAAOnH,wBCrLX,IAAI6J,EAAW,WAGf,IAAIzW,EAAI8F,OAAOC,aACf,IAAI2Q,EAAe,oEACnB,IAAIC,EAAgB,oEACpB,IAAIC,EAAiB,GAErB,SAASC,EAAaC,EAAUC,GAC9B,IAAKH,EAAeE,GAAW,CAC7BF,EAAeE,GAAY,GAC3B,IAAK,IAAIhW,EAAE,EAAIA,EAAEgW,EAAShT,OAAShD,IAAK,CACtC8V,EAAeE,GAAUA,EAASlR,OAAO9E,IAAMA,GAGnD,OAAO8V,EAAeE,GAAUC,GAGlC,IAAIN,EAAW,CACbO,iBAAmB,SAAUvU,GAC3B,GAAIA,GAAS,KAAM,MAAO,GAC1B,IAAIwU,EAAMR,EAASS,UAAUzU,EAAO,GAAG,SAAS/B,GAAG,OAAOgW,EAAa9Q,OAAOlF,MAC9E,OAAQuW,EAAInT,OAAS,GACrB,QACA,KAAK,EAAI,OAAOmT,EAChB,KAAK,EAAI,OAAOA,EAAI,MACpB,KAAK,EAAI,OAAOA,EAAI,KACpB,KAAK,EAAI,OAAOA,EAAI,MAItBE,qBAAuB,SAAU1U,GAC/B,GAAIA,GAAS,KAAM,MAAO,GAC1B,GAAIA,GAAS,GAAI,OAAO,KACxB,OAAOgU,EAASW,YAAY3U,EAAMqB,OAAQ,IAAI,SAASuK,GAAS,OAAOwI,EAAaH,EAAcjU,EAAMmD,OAAOyI,QAGjHgJ,gBAAkB,SAAU5U,GAC1B,GAAIA,GAAS,KAAM,MAAO,GAC1B,OAAOgU,EAASS,UAAUzU,EAAO,IAAI,SAAS/B,GAAG,OAAOV,EAAEU,EAAE,OAAS,KAGvE4W,oBAAqB,SAAUC,GAC7B,GAAIA,GAAc,KAAM,MAAO,GAC/B,GAAIA,GAAc,GAAI,OAAO,KAC7B,OAAOd,EAASW,YAAYG,EAAWzT,OAAQ,OAAO,SAASuK,GAAS,OAAOkJ,EAAWrI,WAAWb,GAAS,OAIhHmJ,qBAAsB,SAAUC,GAC9B,IAAIF,EAAad,EAASiB,SAASD,GACnC,IAAIE,EAAI,IAAIC,WAAWL,EAAWzT,OAAO,GAEzC,IAAK,IAAIhD,EAAE,EAAG+W,EAASN,EAAWzT,OAAQhD,EAAE+W,EAAU/W,IAAK,CACzD,IAAIgX,EAAgBP,EAAWrI,WAAWpO,GAC1C6W,EAAI7W,EAAE,GAAKgX,IAAkB,EAC7BH,EAAI7W,EAAE,EAAE,GAAKgX,EAAgB,IAE/B,OAAOH,GAITI,yBAAyB,SAAUR,GACjC,GAAIA,IAAa,MAAQA,IAAaS,UAAU,CAC5C,OAAOvB,EAASwB,WAAWV,OACxB,CACH,IAAII,EAAI,IAAI3T,MAAMuT,EAAWzT,OAAO,GACpC,IAAK,IAAIhD,EAAE,EAAG+W,EAASF,EAAI7T,OAAQhD,EAAE+W,EAAU/W,IAAK,CAClD6W,EAAI7W,GAAGyW,EAAWzW,EAAE,GAAG,IAAIyW,EAAWzW,EAAE,EAAE,GAG5C,IAAI4K,EAAS,GACbiM,EAAIhL,SAAQ,SAAUtJ,GACpBqI,EAAOpG,KAAKtF,EAAEqD,OAEhB,OAAOoT,EAASwB,WAAWvM,EAAOvG,KAAK,OAQ7C+S,8BAA+B,SAAUzV,GACvC,GAAIA,GAAS,KAAM,MAAO,GAC1B,OAAOgU,EAASS,UAAUzU,EAAO,GAAG,SAAS/B,GAAG,OAAOiW,EAAc/Q,OAAOlF,OAI9EyX,kCAAkC,SAAU1V,GAC1C,GAAIA,GAAS,KAAM,MAAO,GAC1B,GAAIA,GAAS,GAAI,OAAO,KACxBA,EAAQA,EAAMkD,QAAQ,KAAM,KAC5B,OAAO8Q,EAASW,YAAY3U,EAAMqB,OAAQ,IAAI,SAASuK,GAAS,OAAOwI,EAAaF,EAAelU,EAAMmD,OAAOyI,QAGlHqJ,SAAU,SAAUD,GAClB,OAAOhB,EAASS,UAAUO,EAAc,IAAI,SAAS/W,GAAG,OAAOV,EAAEU,OAEnEwW,UAAW,SAAUO,EAAcW,EAAaC,GAC9C,GAAIZ,GAAgB,KAAM,MAAO,GACjC,IAAI3W,EAAGoS,EACHoF,EAAoB,GACpBC,EAA4B,GAC5BC,EAAU,GACVC,EAAW,GACXC,EAAU,GACVC,EAAmB,EACnBC,EAAkB,EAClBC,EAAiB,EACjBC,EAAa,GACbC,EAAiB,EACjBC,EAAsB,EACtBC,EAEJ,IAAKA,EAAK,EAAGA,EAAKxB,EAAa3T,OAAQmV,GAAM,EAAG,CAC9CT,EAAYf,EAAa7R,OAAOqT,GAChC,IAAK7V,OAAOwI,UAAUsN,eAAejQ,KAAKqP,EAAmBE,GAAY,CACvEF,EAAmBE,GAAaI,IAChCL,EAA2BC,GAAa,KAG1CC,EAAaC,EAAYF,EACzB,GAAIpV,OAAOwI,UAAUsN,eAAejQ,KAAKqP,EAAmBG,GAAa,CACvEC,EAAYD,MACP,CACL,GAAIrV,OAAOwI,UAAUsN,eAAejQ,KAAKsP,EAA2BG,GAAY,CAC9E,GAAIA,EAAUxJ,WAAW,GAAG,IAAK,CAC/B,IAAKpO,EAAE,EAAIA,EAAE+X,EAAkB/X,IAAK,CAClCiY,EAAoBA,GAAoB,EACxC,GAAIC,GAAyBZ,EAAY,EAAG,CAC1CY,EAAwB,EACxBF,EAAaxT,KAAK+S,EAAeU,IACjCA,EAAmB,MACd,CACLC,KAGJ9F,EAAQwF,EAAUxJ,WAAW,GAC7B,IAAKpO,EAAE,EAAIA,EAAE,EAAIA,IAAK,CACpBiY,EAAoBA,GAAoB,EAAM7F,EAAM,EACpD,GAAI8F,GAAyBZ,EAAY,EAAG,CAC1CY,EAAwB,EACxBF,EAAaxT,KAAK+S,EAAeU,IACjCA,EAAmB,MACd,CACLC,IAEF9F,EAAQA,GAAS,OAEd,CACLA,EAAQ,EACR,IAAKpS,EAAE,EAAIA,EAAE+X,EAAkB/X,IAAK,CAClCiY,EAAoBA,GAAoB,EAAK7F,EAC7C,GAAI8F,GAAwBZ,EAAY,EAAG,CACzCY,EAAwB,EACxBF,EAAaxT,KAAK+S,EAAeU,IACjCA,EAAmB,MACd,CACLC,IAEF9F,EAAQ,EAEVA,EAAQwF,EAAUxJ,WAAW,GAC7B,IAAKpO,EAAE,EAAIA,EAAE,GAAKA,IAAK,CACrBiY,EAAoBA,GAAoB,EAAM7F,EAAM,EACpD,GAAI8F,GAAyBZ,EAAY,EAAG,CAC1CY,EAAwB,EACxBF,EAAaxT,KAAK+S,EAAeU,IACjCA,EAAmB,MACd,CACLC,IAEF9F,EAAQA,GAAS,GAGrByF,IACA,GAAIA,GAAqB,EAAG,CAC1BA,EAAoBvN,KAAKmB,IAAI,EAAGsM,GAChCA,WAEKN,EAA2BG,OAC7B,CACLxF,EAAQoF,EAAmBI,GAC3B,IAAK5X,EAAE,EAAIA,EAAE+X,EAAkB/X,IAAK,CAClCiY,EAAoBA,GAAoB,EAAM7F,EAAM,EACpD,GAAI8F,GAAyBZ,EAAY,EAAG,CAC1CY,EAAwB,EACxBF,EAAaxT,KAAK+S,EAAeU,IACjCA,EAAmB,MACd,CACLC,IAEF9F,EAAQA,GAAS,GAKrByF,IACA,GAAIA,GAAqB,EAAG,CAC1BA,EAAoBvN,KAAKmB,IAAI,EAAGsM,GAChCA,IAGFP,EAAmBG,GAAcG,IACjCF,EAAY5S,OAAO0S,IAKvB,GAAIE,IAAc,GAAI,CACpB,GAAItV,OAAOwI,UAAUsN,eAAejQ,KAAKsP,EAA2BG,GAAY,CAC9E,GAAIA,EAAUxJ,WAAW,GAAG,IAAK,CAC/B,IAAKpO,EAAE,EAAIA,EAAE+X,EAAkB/X,IAAK,CAClCiY,EAAoBA,GAAoB,EACxC,GAAIC,GAAyBZ,EAAY,EAAG,CAC1CY,EAAwB,EACxBF,EAAaxT,KAAK+S,EAAeU,IACjCA,EAAmB,MACd,CACLC,KAGJ9F,EAAQwF,EAAUxJ,WAAW,GAC7B,IAAKpO,EAAE,EAAIA,EAAE,EAAIA,IAAK,CACpBiY,EAAoBA,GAAoB,EAAM7F,EAAM,EACpD,GAAI8F,GAAyBZ,EAAY,EAAG,CAC1CY,EAAwB,EACxBF,EAAaxT,KAAK+S,EAAeU,IACjCA,EAAmB,MACd,CACLC,IAEF9F,EAAQA,GAAS,OAEd,CACLA,EAAQ,EACR,IAAKpS,EAAE,EAAIA,EAAE+X,EAAkB/X,IAAK,CAClCiY,EAAoBA,GAAoB,EAAK7F,EAC7C,GAAI8F,GAAyBZ,EAAY,EAAG,CAC1CY,EAAwB,EACxBF,EAAaxT,KAAK+S,EAAeU,IACjCA,EAAmB,MACd,CACLC,IAEF9F,EAAQ,EAEVA,EAAQwF,EAAUxJ,WAAW,GAC7B,IAAKpO,EAAE,EAAIA,EAAE,GAAKA,IAAK,CACrBiY,EAAoBA,GAAoB,EAAM7F,EAAM,EACpD,GAAI8F,GAAyBZ,EAAY,EAAG,CAC1CY,EAAwB,EACxBF,EAAaxT,KAAK+S,EAAeU,IACjCA,EAAmB,MACd,CACLC,IAEF9F,EAAQA,GAAS,GAGrByF,IACA,GAAIA,GAAqB,EAAG,CAC1BA,EAAoBvN,KAAKmB,IAAI,EAAGsM,GAChCA,WAEKN,EAA2BG,OAC7B,CACLxF,EAAQoF,EAAmBI,GAC3B,IAAK5X,EAAE,EAAIA,EAAE+X,EAAkB/X,IAAK,CAClCiY,EAAoBA,GAAoB,EAAM7F,EAAM,EACpD,GAAI8F,GAAyBZ,EAAY,EAAG,CAC1CY,EAAwB,EACxBF,EAAaxT,KAAK+S,EAAeU,IACjCA,EAAmB,MACd,CACLC,IAEF9F,EAAQA,GAAS,GAKrByF,IACA,GAAIA,GAAqB,EAAG,CAC1BA,EAAoBvN,KAAKmB,IAAI,EAAGsM,GAChCA,KAKJ3F,EAAQ,EACR,IAAKpS,EAAE,EAAIA,EAAE+X,EAAkB/X,IAAK,CAClCiY,EAAoBA,GAAoB,EAAM7F,EAAM,EACpD,GAAI8F,GAAyBZ,EAAY,EAAG,CAC1CY,EAAwB,EACxBF,EAAaxT,KAAK+S,EAAeU,IACjCA,EAAmB,MACd,CACLC,IAEF9F,EAAQA,GAAS,EAInB,MAAO,KAAM,CACX6F,EAAoBA,GAAoB,EACxC,GAAIC,GAAyBZ,EAAY,EAAG,CAC1CU,EAAaxT,KAAK+S,EAAeU,IACjC,WAEGC,IAEP,OAAOF,EAAa3T,KAAK,KAG3B8S,WAAY,SAAUV,GACpB,GAAIA,GAAc,KAAM,MAAO,GAC/B,GAAIA,GAAc,GAAI,OAAO,KAC7B,OAAOd,EAASW,YAAYG,EAAWzT,OAAQ,OAAO,SAASuK,GAAS,OAAOkJ,EAAWrI,WAAWb,OAGvG+I,YAAa,SAAUtT,EAAQqV,EAAYC,GAC7C,IAAQC,EAAa,GAEbC,EAAY,EACZC,EAAW,EACXC,EAAU,EACVC,EAAQ,GACR/N,EAAS,GACT5K,EACA8H,EACA8Q,EAAMC,EAAMC,EAAUC,EACtBxW,EACA0B,EAAO,CAAC4P,IAAIyE,EAAa,GAAIU,SAASX,EAAY9K,MAAM,GAE5D,IAAKvN,EAAI,EAAGA,EAAI,EAAGA,GAAK,EAAG,CACzBuY,EAAWvY,GAAKA,EAGlB4Y,EAAO,EACPE,EAAWxO,KAAKmB,IAAI,EAAE,GACtBsN,EAAM,EACN,MAAOA,GAAOD,EAAU,CACtBD,EAAO5U,EAAK4P,IAAM5P,EAAK+U,SACvB/U,EAAK+U,WAAa,EAClB,GAAI/U,EAAK+U,UAAY,EAAG,CACtB/U,EAAK+U,SAAWX,EAChBpU,EAAK4P,IAAMyE,EAAarU,EAAKsJ,SAE/BqL,IAASC,EAAK,EAAI,EAAI,GAAKE,EAC3BA,IAAU,EAGZ,OAAeH,GACb,KAAK,EACDA,EAAO,EACPE,EAAWxO,KAAKmB,IAAI,EAAE,GACtBsN,EAAM,EACN,MAAOA,GAAOD,EAAU,CACtBD,EAAO5U,EAAK4P,IAAM5P,EAAK+U,SACvB/U,EAAK+U,WAAa,EAClB,GAAI/U,EAAK+U,UAAY,EAAG,CACtB/U,EAAK+U,SAAWX,EAChBpU,EAAK4P,IAAMyE,EAAarU,EAAKsJ,SAE/BqL,IAASC,EAAK,EAAI,EAAI,GAAKE,EAC3BA,IAAU,EAEdxW,EAAIrD,EAAE0Z,GACN,MACF,KAAK,EACDA,EAAO,EACPE,EAAWxO,KAAKmB,IAAI,EAAE,IACtBsN,EAAM,EACN,MAAOA,GAAOD,EAAU,CACtBD,EAAO5U,EAAK4P,IAAM5P,EAAK+U,SACvB/U,EAAK+U,WAAa,EAClB,GAAI/U,EAAK+U,UAAY,EAAG,CACtB/U,EAAK+U,SAAWX,EAChBpU,EAAK4P,IAAMyE,EAAarU,EAAKsJ,SAE/BqL,IAASC,EAAK,EAAI,EAAI,GAAKE,EAC3BA,IAAU,EAEdxW,EAAIrD,EAAE0Z,GACN,MACF,KAAK,EACH,MAAO,GAEXL,EAAW,GAAKhW,EAChBuF,EAAIvF,EACJqI,EAAOpG,KAAKjC,GACZ,MAAO,KAAM,CACX,GAAI0B,EAAKsJ,MAAQvK,EAAQ,CACvB,MAAO,GAGT4V,EAAO,EACPE,EAAWxO,KAAKmB,IAAI,EAAEiN,GACtBK,EAAM,EACN,MAAOA,GAAOD,EAAU,CACtBD,EAAO5U,EAAK4P,IAAM5P,EAAK+U,SACvB/U,EAAK+U,WAAa,EAClB,GAAI/U,EAAK+U,UAAY,EAAG,CACtB/U,EAAK+U,SAAWX,EAChBpU,EAAK4P,IAAMyE,EAAarU,EAAKsJ,SAE/BqL,IAASC,EAAK,EAAI,EAAI,GAAKE,EAC3BA,IAAU,EAGZ,OAAQxW,EAAIqW,GACV,KAAK,EACHA,EAAO,EACPE,EAAWxO,KAAKmB,IAAI,EAAE,GACtBsN,EAAM,EACN,MAAOA,GAAOD,EAAU,CACtBD,EAAO5U,EAAK4P,IAAM5P,EAAK+U,SACvB/U,EAAK+U,WAAa,EAClB,GAAI/U,EAAK+U,UAAY,EAAG,CACtB/U,EAAK+U,SAAWX,EAChBpU,EAAK4P,IAAMyE,EAAarU,EAAKsJ,SAE/BqL,IAASC,EAAK,EAAI,EAAI,GAAKE,EAC3BA,IAAU,EAGZR,EAAWE,KAAcvZ,EAAE0Z,GAC3BrW,EAAIkW,EAAS,EACbD,IACA,MACF,KAAK,EACHI,EAAO,EACPE,EAAWxO,KAAKmB,IAAI,EAAE,IACtBsN,EAAM,EACN,MAAOA,GAAOD,EAAU,CACtBD,EAAO5U,EAAK4P,IAAM5P,EAAK+U,SACvB/U,EAAK+U,WAAa,EAClB,GAAI/U,EAAK+U,UAAY,EAAG,CACtB/U,EAAK+U,SAAWX,EAChBpU,EAAK4P,IAAMyE,EAAarU,EAAKsJ,SAE/BqL,IAASC,EAAK,EAAI,EAAI,GAAKE,EAC3BA,IAAU,EAEZR,EAAWE,KAAcvZ,EAAE0Z,GAC3BrW,EAAIkW,EAAS,EACbD,IACA,MACF,KAAK,EACH,OAAO5N,EAAOvG,KAAK,IAGvB,GAAImU,GAAa,EAAG,CAClBA,EAAYlO,KAAKmB,IAAI,EAAGiN,GACxBA,IAGF,GAAIH,EAAWhW,GAAI,CACjBoW,EAAQJ,EAAWhW,OACd,CACL,GAAIA,IAAMkW,EAAU,CAClBE,EAAQ7Q,EAAIA,EAAEhD,OAAO,OAChB,CACL,OAAO,MAGX8F,EAAOpG,KAAKmU,GAGZJ,EAAWE,KAAc3Q,EAAI6Q,EAAM7T,OAAO,GAC1C0T,IAEA1Q,EAAI6Q,EAEJ,GAAIH,GAAa,EAAG,CAClBA,EAAYlO,KAAKmB,IAAI,EAAGiN,GACxBA,QAMN,OAAO/C,EApeM,GAyeR,GAAqC7W,GAAU,KAAO,CAC3DA,EAAAC,QAAiB4W,MC/enB,MAAMsD,EAAa,6DAEnB,MAAMC,EAA8B,GAG7BzK,eAAe0K,EACdC,GAIJ,MAAMC,EAAmBC,EAAoBF,EAAQ1J,YAGrD,IAAI6J,EAAa,GAAGN,aACpB,IAAIO,EAAS,OACb,KAAKJ,EAAQlY,GAAI,CACbqY,GAAO,IAAIH,EAAQlY,KACnBsY,EAAS,MAEb,MAAMC,QAAiB3K,MAAMyK,EAAK,CAC9BC,OAAAA,EACAE,QAAS,CACLC,OAAU,mBACVC,eAAgB,oBAEpBC,KAAM/V,KAAKa,UAASrC,OAAAoO,OAAApO,OAAAoO,OAAA,GACb0I,GAAO,CACV1J,WAAY2J,OAIpB,MAAMS,QAAoBL,EAASM,OAGnC,KAAKD,EAAY5Y,GAAI,CACjBqT,EAAM6E,QAAUU,EAGpB3K,QAAQ6K,IAAI,cAAe,CAAEF,YAAAA,IAE7B,OAAOA,EAIJrL,eAAewL,EACd/Y,EACAsO,EACAF,EACAI,GAGJ,IAAI0J,EAGJ,GAAGlY,EAAG8B,OAASkW,EAA6B,CACxC,MAAMgB,EAAkBvE,EAAS0B,kCAAmCnW,GAEpEkY,EAAU,CACNlY,GAAI,KACJ6F,KAAM,iBACN2I,WAAYyK,EAAsBD,EAAiB1K,EAASF,QAE7D,CACH,MAAMmK,QAAiB3K,MAAM,GAAGmK,cAAuB/X,IAAM,CACzDsY,OAAQ,MACRE,QAAS,CACLC,OAAU,mBACVC,eAAgB,sBAGxB,MAAME,QAAoBL,EAASM,OAGnCX,EAAO9W,OAAAoO,OAAApO,OAAAoO,OAAA,GACAoJ,GAAW,CACdpK,WAAYyK,EAAuBnV,OAAO8U,EAAYpK,YAAaF,EAASF,KAIpFH,QAAQ6K,IAAI,aAAc,CAAEZ,QAAAA,IAE5B,OAAOA,EAIX,MAAMgB,EAA0B,aAGhBd,EACR5J,GAGN,MAAM2K,EAAS3K,EAAWvB,QAAO,CAACqC,EAAOb,KACvC,MAAMH,EAAU,CACdU,MAAOP,EAAUH,QAAQU,MAAMpE,KAAIvJ,GAAKA,EAAEwE,OAAM1C,KAAK+V,GACrD5K,QAASG,EAAUH,QAAQA,QAAQ1D,KAAIvJ,GAAKA,EAAEwE,OAAM1C,KAAK+V,IAG3D,MAAM9K,EAAWK,EAAUL,SAASxD,KAAIlM,GAAKA,EAAEoM,OAAM3H,KAAK+V,GAE1D5J,EAAMhM,KAAIlC,OAAAoO,OAAApO,OAAAoO,OAAA,GAEHf,GAAS,CACZH,QAASA,EACTF,SAAUA,KAId,OAAOkB,IACN,IAEH,OAAO1M,KAAKa,UAAU0V,YAGRF,EACRG,EACA9K,EACAF,EACAiL,GAGN,MAAMF,EAASvW,KAAK/D,MAAMua,GAE1B,MAAME,EAAmBH,EAAOlM,QAAO,CAACqC,EAAOjO,KAC7C,MAAMkY,EAAclY,EAAEiN,QAAQU,MAAMhE,MAAMkO,GAC1C,MAAMM,EAAenY,EAAEiN,QAAQA,QAAQtD,MAAMkO,GAC7C,MAAMO,EAAgBpY,EAAE+M,SAASpD,MAAMkO,GAEvC,MAAMnK,EAAgB,CACpBC,MAAOV,EAAQ1M,QAAOJ,GAAK+X,EAAYtK,SAASzN,EAAEqE,QAClDyI,QAASA,EAAQ1M,QAAOJ,GAAKgY,EAAavK,SAASzN,EAAEqE,SAEvD,MAAM6T,EAAkBtL,EAASxM,QAAOlD,GAAK+a,EAAcxK,SAASvQ,EAAEoM,QAKtE,MAAM2D,EAASrN,OAAAoO,OAAApO,OAAAoO,OAAA,GACVnO,GAAC,CACJiN,QAASS,EACTX,SAAUsL,IAQZpK,EAAMhM,KAAKmL,GACX,OAAOa,IACN,IAGH,OAAOgK,ECjHT,IAAYK,GAAZ,SAAYA,GACVA,EAAA,WAAA,UACAA,EAAA,SAAA,QACAA,EAAA,SAAA,SAHF,CAAYA,IAAAA,EAAe,KAM3B,IAAYC,GAAZ,SAAYA,GACVA,EAAA,OAAA,MACAA,EAAA,UAAA,SACAA,EAAA,QAAA,QAHF,CAAYA,IAAAA,EAAU,KC7CtB,MAAMvG,MAAEA,EAAKS,SAAEA,GAAaU,EAAY,CACtC0D,QAAS,KACT1J,WAAY,GACZ7I,OAAQ,GACRyI,SAAU,GACVyL,UAAW,KACXC,MAAO,MACPlL,SAAU,QAGZkF,EAAS,SAAS5C,IAChBmC,EAAMyG,MAAQ5I,KAGhB4C,EAAS,WAAW5C,IAClBmC,EAAM6E,QAAUhH,EAChBmC,EAAMyG,MAAQ,SAGhBhG,EAAS,cAAc5C,IACrBmC,EAAM7E,WAAa0C,EACnBmC,EAAMyG,MAAQ,SAGhBhG,EAAS,UAAU5C,IACjBmC,EAAM1N,OAASuL,KAGjB4C,EAAS,YAAY5C,IACnBmC,EAAMjF,SAAW8C,EACjBmC,EAAMyG,MAAQ,SAGhBhG,EAAS,aAAa5C,IACpBmC,EAAMwG,UAAY3I,cAGJ6I,IACdC,QAAQC,UAAU,GAAI7b,SAAS8b,MAAOhc,OAAOM,SAAS2b,UAKxD,MAAMC,EAA2B,UACjC,MAAMC,EAAyB,WAC/B,MAAMC,EAAqB,kBAEXC,UACd,IAAIlC,GAAMxJ,EAAA3Q,SAAM,MAANA,cAAM,OAAA,EAANA,OAAQM,YAAQ,MAAAqQ,SAAA,OAAA,EAAAA,EAAE2L,OAE5B,IAAIC,EAAe,IAAIC,gBAAgBrC,GAIvC,GAAGoC,EAAa/G,IAAI2G,GAAyB,CAC3C,OAAOI,EAAarJ,IAAIiJ,QACnB,GAAGI,EAAa/G,IAAI0G,GAA2B,CACpD,OAAOT,EAAgBG,UAClB,CACL,OAAOH,EAAgBgB,kBAIXC,EACZC,GAGF,MAAMC,EAAuBP,IAE7B,KAAKO,EAAe,CAClB,OAAOnB,EAAgBmB,OAClB,CACL,OAAOnB,EAAgBkB,IAKpBtN,eAAewN,GAClBzM,EACAF,EACAI,SAGF,IAAI6J,GAAMxJ,EAAA3Q,SAAM,MAANA,cAAM,OAAA,EAANA,OAAQM,YAAQ,MAAAqQ,SAAA,OAAA,EAAAA,EAAE2L,OAE5B,IAAIC,EAAe,IAAIC,gBAAgBrC,GAIvC,GAAGoC,EAAa/G,IAAI0G,GACpB,CACE,MAAMjC,EAAmBsC,EAAarJ,IAAIgJ,GAG1C,MAAMlC,QAAgBa,EAAWZ,EAAkB7J,EAASF,GAC5DiF,EAAM6E,QAAUA,EAChB7E,EAAM7E,WAAa0J,EAAQ1J,WAE7B,OAAO6E,EAAM7E,WAKRjB,eAAeyN,GAClBxM,EACAyM,EAAe,MAIjB,MAAM5C,EAAM,IAAI/Y,IAAIpB,OAAOM,UAE3B,IAAI0c,EAAc,KAElB,GAAGD,IAAU,MAAO,CAGlB,MAAME,EAAkB/C,EAAoB5J,GAE5C,MAAM4M,EAAS3G,EAASyB,8BAA+BiF,GACvD9C,EAAIoC,aAAapJ,IAAI+I,EAA0BgB,OAC1C,CAEL,MAAMC,EAAShD,EAAIoC,aAAarJ,IAAIkJ,GAGpC,IAAIpC,EAAO9W,OAAAoO,OAAApO,OAAAoO,OAAA,GACN6D,EAAM6E,SAAO,CAChBmD,SAAUA,EAASA,EAASrF,UAC5BxH,WAAYA,IAGd0M,QAAoBjD,EAAaC,GACjC,MAAMoD,EAAUJ,EAAYlb,GAC5BqT,EAAMyG,MAAQ,KACdzB,EAAIoC,aAAapJ,IAAI+I,EAA0BkB,GAGjD,IAAIC,EAAU,KAGd,GAAGL,GAAeA,EAAYG,OAAQ,CACpChD,EAAIoC,aAAapJ,IAAIiJ,EAAoBY,EAAYG,QACrDE,EAAUlD,EAAImD,KACdtd,OAAO8b,QAAQC,UAAU,GAAI,GAAIsB,GAInClD,EAAIoC,aAAagB,OAAOnB,GACxB,MAAMoB,EAAWrD,EAEjB,MAAO,CAACsD,MAAOD,EAAUE,KAAML,GAK1BhO,eAAesO,aACpB,IAAIxD,GAAMxJ,EAAA3Q,SAAM,MAANA,cAAM,OAAA,EAANA,OAAQM,YAAQ,MAAAqQ,SAAA,OAAA,EAAAA,EAAE2L,OAE5B,IAAIC,EAAe,IAAIC,gBAAgBrC,GAEvC,GAAGoC,EAAa/G,IAAI4G,KACdjH,EAAM6E,YACN4D,EAAAzI,EAAM6E,WAAO,MAAA4D,SAAA,OAAA,EAAAA,EAAE9b,IACnB,CACAqT,EAAMzE,SAAW,KAEnB,OAAOyE,EAAMzE,SC3Kf,MAAMmN,GAAyB,+oBCUlBC,GAAmB,MALhCpP,YAAAqP,wDASUne,KAAA6H,OAAoB,KAI5BiH,QAAQsP,GACN7I,EAAM1N,OAAS,GAEjBiH,UAAUuP,GACR9I,EAAM1N,OAAS,SAIfwW,EAAGC,cAAcC,UAAUC,IAAI,YAE/BH,EAAGI,aAAaC,YAGhBL,EAAGI,aAAaE,QAAQ,aAAc7Z,KAAKa,UAAU3F,KAAKoR,SAC1DiN,EAAGI,aAAaG,cAAgB,OAIlC9P,eACE,OACEjO,EAACge,EAAI,CACH9C,UAAW/V,OAAOuP,EAAMzE,UACxBgO,YAAa9e,KAAK+e,UAAUC,KAAKhf,MACjCif,UAAWjf,KAAKkf,QAAQF,KAAKhf,MAC7Bmf,MAAOnf,KAAKoR,OAAOtP,MAEjBjB,EAAA,OAAA,MACAA,EAAA,kBAAA,KACEA,EAAA,OAAA,CAAMue,KAAK,UACRpf,KAAKqf,aAAarf,KAAK6H,SAE1BhH,EAAA,OAAA,CAAMue,KAAK,QAAQD,MAAM,SACtBte,EAAA,OAAA,CAAMqB,GAAG,SAAQ6O,EAAA/Q,KAAKoR,UAAM,MAAAL,SAAA,OAAA,EAAAA,EAAEhJ,OAGjClH,EAAA,MAAA,CAAKue,KAAK,UAAUD,MAAM,WACxBte,EAAA,OAAA,CAAMqB,GAAG,QAAQlC,KAAKoR,OAAOtP,MAC7BjB,EAAA,OAAA,CAAMqB,GAAG,UAAUqQ,EAAgB,CAACvS,KAAKoR,SAAQ,YACjDvQ,EAAA,OAAA,KAAOb,KAAKsf,gBAAgBtf,KAAKoR,YAQrCtC,aAAajH,GACnB,GAAGA,IAAWiU,EAAWyD,OAAQ,CAC/B,OAAO1e,EAAA,eAAA,CAAc2e,KAAK,IAAIC,MAAM,IAAGC,cAAa,OAClDC,QAAUC,GAAS5f,KAAK6f,aAAaC,KAAK9f,KAAKoR,WAK7CtC,gBAAgBsC,SACtB,KAAGL,EAAAK,EAAOR,eAAW,MAAAG,SAAA,OAAA,EAAAA,EAAE/M,QAAS,EAAG,CACjC,OAAOnD,EAAA,wBAAA,KACLA,EAAA,OAAA,CAAMue,KAAK,SAAQve,EAAA,eAAA,CAAc2e,KAAK,cAAcC,MAAM,OAC1D5e,EAAA,MAAA,CAAKue,KAAK,UAAQ,SAAQhO,EAAOrJ,MACjClH,EAAA,IAAA,CAAGue,KAAK,WACLpf,KAAKoR,OAAOR,YACb/P,EAAA,KAAA,QACGb,KAAKoR,OAAOP,KACbhQ,EAAA,IAAA,CAAG6c,KAAM1d,KAAKoR,OAAOP,KAAMlF,OAAO,QAAM,kBACtC,WAIH,CACL,sBCvFN,MAAMoU,GAAyB,2vBCSlBC,GAAmB,MALhClR,YAAAqP,8DAOyCne,KAAAsQ,SAAW,GAC1CtQ,KAAAigB,QAAiB,QAEjBjgB,KAAA8Q,SAAmB,KAKpBhC,gBAAgBoR,GAErB,MAAMC,EAAmBngB,KAAKsQ,SAASxD,KAAIpJ,GAAKA,EAAEqE,OAClDmY,EAAcA,EAAYpc,QAAOsN,IACvB+O,EAAiBhP,SAASC,EAAOrJ,QAG3C/H,KAAKsQ,SAAW,IAAItQ,KAAKsQ,YAAa4P,GACtClgB,KAAKogB,gBAAgBN,KAAMI,GAI7BpR,eAAeuR,GAEb9K,EAAMjF,SAAW,IAAIiF,EAAMjF,SAAU+P,EAAIC,QAEzCtgB,KAAKugB,aAAaF,EAAIC,QAIjBxR,mBAAmB0R,GACxBxgB,KAAKsQ,SAAWtQ,KAAKsQ,SAASxM,QAAQsN,GAC7BA,EAAOrJ,OAASyY,EAAczY,OAGvC/H,KAAKogB,gBAAgBN,OAIvBhR,aAAauR,GACXlQ,QAAQ6K,IAAI,yBAAyBqF,EAAI5B,aAAaG,iBAEtDyB,EAAII,iBAEJ,IAAIxb,EAAOob,EAAI5B,aAAaiC,QAAQ,QACpC,MAAMC,EAAY7b,KAAK/D,MAAMkE,GAC7BjF,KAAK4gB,UAAU,CAAED,IAIjBpL,EAAMwG,UAAY4E,EAGpB7R,UAAUuR,GACR,GAAG9K,EAAM1N,SAAW,SAAU,CAC5BwY,EAAII,kBAGR3R,QAAQuR,GACNA,EAAII,iBACJ,KAAKlL,EAAMwG,UAAW,CAEpBsE,EAAI1U,OAAO4U,aAAahL,EAAMwG,WAGhCxG,EAAMwG,UAAY,KAIpBjN,SACE,OACEjO,EAACge,EAAI,CACDM,MAAO,mCAAmC5J,EAAM1N,kBAAkB7H,KAAKigB,UACvEY,OAAQ7gB,KAAK8gB,aAAa9B,KAAKhf,MAC/B+gB,WAAY/gB,KAAKghB,UAAUhC,KAAKhf,MAChCif,UAAWjf,KAAKkf,QAAQF,KAAKhf,OAE/Ba,EAAA,OAAA,CAAMqB,GAAG,SACPrB,EAAA,OAAA,OAGFA,EAAA,MAAA,CAAKqB,GAAG,YACPlC,KAAKsQ,SAASxD,KAAKsE,GAEhBvQ,EAAA,yBAAA,CACEuQ,OAAQA,EACRvJ,OAAQ7H,KAAK8Q,SAAWgL,EAAWyD,OAAS,KAC5CJ,MAAO,WAAWnf,KAAKigB,8BChGrC,MAAMgB,GAAmB,4cCSZC,GAAa,MAN1BpS,YAAAqP,aAQUne,KAAAmhB,UAAmB,KAE3BrS,SACE,OACEjO,EAACge,EAAI,CAACM,MAAM,QACT5J,EAAMzE,SAAW9Q,KAAKqf,eAAiB,KAExCxe,EAAA,MAAA,CAAKqB,GAAG,YAAYkf,IAAKphB,KAAKmhB,YAC9BtgB,EAAA,OAAA,CAAMqB,GAAG,SAAQrB,EAAA,OAAA,CAAMkH,KAAK,WAC5BlH,EAAA,OAAA,CAAMqB,GAAG,WAAUrB,EAAA,OAAA,CAAMkH,KAAK,cAM5B+G,eACN,OAAOjO,EAAA,OAAA,CAAMqB,GAAG,UACdrB,EAAA,OAAA,CAAMkH,KAAK,UACTlH,EAAA,eAAA,CAAc2e,KAAK,IAAIC,MAAM,IAAGC,cAAa,kEC7BrD,MAAM2B,GAA4B,m0CCUrBC,GAAsB,MALnCxS,YAAAqP,iHAgByCne,KAAA8Q,SAAoB,KAWlD9Q,KAAAuhB,QAAmB,MACnBvhB,KAAAsQ,SAAsB,GAE/BxB,sBACE9O,KAAK8Q,SAAW9Q,KAAK2Q,UAAUG,SAC/B9Q,KAAKwhB,YAAYxhB,KAAK2Q,WACtB3Q,KAAKsQ,SAAWtQ,KAAK2Q,UAAUL,SAIjCxB,qBAAqB8Q,GACnB5f,KAAK2Q,UAAUH,cAAgBxQ,KAAKyhB,UAAUC,aAC9C1hB,KAAKwhB,YAAYxhB,KAAK2Q,WACtB3Q,KAAK2hB,iBAAiB7B,KAAM9f,KAAK2Q,WAGnC7B,sBAAsB8Q,GACpB5f,KAAK2Q,UAAUL,SAAWtQ,KAAK4hB,WAAWtR,SAC1CtQ,KAAKwhB,YAAYxhB,KAAK2Q,WACtB3Q,KAAK2hB,iBAAiB7B,KAAM9f,KAAK2Q,WAI5B7B,wBAELyG,EAAMjF,SAAW,IAAIiF,EAAMjF,YAAatQ,KAAK2Q,UAAUL,UACvDtQ,KAAK6hB,gBAAgB/B,KAAK9f,KAAK2Q,WAGjC7B,YAAY6B,GACV3Q,KAAK8hB,MAAQ9hB,KAAK+hB,YAAYpR,GAEhC7B,YAAY6B,GACV,OACE9P,EAAA,KAAA,CAAIqB,GAAG,SACLrB,EAAA,KAAA,KAAK0R,EAAgB5B,EAAUL,UAAS,YACxCzP,EAAA,KAAA,KAAKb,KAAKgiB,gBAAe,aACzBnhB,EAAA,KAAA,KAAKb,KAAKiiB,eAAc,aAKtBnT,sBACN,OAAOiC,EAAA/Q,KAAK2Q,UAAUL,YAAQ,MAAAS,SAAA,OAAA,EAAAA,EAAE/M,OAG1B8K,2BACN,IAAIoT,IAAQlE,GAAAjN,EAAA/Q,KAAK2Q,UAAUH,WAAO,MAAAO,SAAA,OAAA,EAAAA,EAAEP,WAAO,MAAAwN,SAAA,OAAA,EAAAA,EAAEha,UAASme,GAAAC,EAAApiB,KAAK2Q,UAAUH,WAAO,MAAA4R,SAAA,OAAA,EAAAA,EAAElR,SAAK,MAAAiR,SAAA,OAAA,EAAAA,EAAEne,QACrF,QAASke,EAAQA,EAAQ,EAG3BpT,WACE,IAAI9O,KAAKuhB,SAAWvhB,KAAK2Q,UAAUG,SAAU,CAC3C9Q,KAAKuhB,QAAU,KACfvhB,KAAKqiB,GAAG9D,UAAUC,IAAI,YAK1B1P,aAAa8Q,GAEX5f,KAAK2Q,UAAU5I,KAAO/H,KAAKsiB,aAAalP,MACxCpT,KAAKqiB,GAAG9D,UAAUgB,OAAO,WACzBvf,KAAKuhB,QAAU,MAGfhM,EAAMyG,MAAQ,MAIhBlN,aAAauR,GACX,GAAG9K,EAAM1N,SAAW,SAAU,CAC1BsI,QAAQ6K,IAAI,yBAAyBqF,EAAI5B,aAAaG,iBAExDyB,EAAII,iBAEJ,IAAIxb,EAAOob,EAAI5B,aAAaiC,QAAQ,QACpC,MAAMC,EAAY7b,KAAK/D,MAAMkE,GAC7BjF,KAAK4hB,WAAWhB,UAAU,CAAED,IAG5BpL,EAAMwG,UAAY4E,GAItB7R,UAAUuR,GACR,GAAG9K,EAAM1N,SAAW,SAAU,CAC5BwY,EAAII,kBAGR3R,QAAQuR,GACNA,EAAII,iBACJ,KAAKlL,EAAMwG,UAAW,CAEpBsE,EAAI1U,OAAO4U,aAAahL,EAAMwG,WAGhCxG,EAAMwG,UAAY,KAIpBjN,iBACE,IAAIyT,EAAU,CAAC,UAAUhN,EAAM1N,UAC/B,GAAG7H,KAAK8Q,SAAU,CAChByR,EAAQ/c,KAAK,YAGf,OACE3E,EAACge,EAAI,CACHgC,OAAQ7gB,KAAK8gB,aAAa9B,KAAKhf,MAC/B+gB,WAAY/gB,KAAKghB,UAAUhC,KAAKhf,MAChCif,UAAWjf,KAAKkf,QAAQF,KAAKhf,MAC7Bmf,MAAOoD,EAAQld,KAAK,MAEpBxE,EAAA,OAAA,MACAA,EAAA,kBAAA,KACEA,EAAA,OAAA,CAAMue,KAAK,UACR7J,EAAMzE,SAAW9Q,KAAKwiB,eAAiB,MAE1C3hB,EAAA,OAAA,CAAMue,KAAK,QAAQld,GAAG,SACpBrB,EAAA,OAAA,CAAMqB,GAAG,YACPyd,QAAS3f,KAAKyiB,SAASzD,KAAKhf,QAC5B+Q,EAAA/Q,KAAK2Q,aAAS,MAAAI,SAAA,OAAA,EAAAA,EAAEhJ,MAElBlH,EAAA,0BAAA,CACEqB,GAAG,YACHud,MAAM,IAAGiD,sBACW,WAAUC,sBACV,wBAAuBC,uBACtB,UACrBC,SAAU,MAGVhiB,EAAA,qBAAA,CACE4e,MAAM,IACN5U,OAAO,OACPiY,UAAU,QAAOC,cACL,GAAEC,cACF,GACZ5P,OAAO4K,EAAAhe,KAAK2Q,aAAS,MAAAqN,SAAA,OAAA,EAAAA,EAAEjW,KACvBkb,YAAY,iBACZC,IAAKb,GAAMriB,KAAKsiB,aAAeD,MAIvCxhB,EAAA,OAAA,CAAMue,KAAK,WACRpf,KAAK8hB,MACL9hB,KAAKsf,gBAAgBtf,KAAK2Q,WAC7B9P,EAAA,mCAAA,CACE2P,QAASxQ,KAAK2Q,UAAUH,QACxBM,SAAU9Q,KAAK8Q,SACfoS,IAAKb,GAAOriB,KAAKyhB,UAAYY,IAI9BriB,KAAKmjB,iBAAiBnjB,KAAKsQ,aAc1BxB,iBAAiBwB,EAAsB,IAC7C,OAAOzP,EAAA,yBAAA,CACLyP,SAAUA,EACV2P,QAAQ,MACRiD,IAAKb,GAAOriB,KAAK4hB,WAAaS,GAAqC,YAK/DvT,gBAAgB6B,SACtB,KAAGI,EAAAJ,EAAUC,eAAW,MAAAG,SAAA,OAAA,EAAAA,EAAE/M,QAAS,EAAG,CACpC,OAAOnD,EAAA,wBAAA,KACLA,EAAA,OAAA,CAAMue,KAAK,SAAO,SAClBve,EAAA,MAAA,CAAKue,KAAK,UAAQ,SAAQzO,EAAU5I,MACpClH,EAAA,IAAA,CAAGue,KAAK,WACLzO,EAAUC,kBAGV,CACL,QAII9B,eACN,GAAG9O,KAAK8Q,SAAU,CAChB,OAASjQ,EAAA,iBAAA,CACLqB,GAAG,eACHud,MAAM,IACN2D,WAAW,cACXC,MAAM,MAAKC,aACA,IACXR,UAAU,SACVhhB,KAAK,SACLyhB,MAAM,OACN5D,QAAS3f,KAAKwjB,gBAAgBxE,KAAKhf,OAAK,wBAEvC,CACL,OACCa,EAAA,iBAAA,CACGqB,GAAG,eACHud,MAAM,IACN2D,WAAW,cACXC,MAAM,OAAMC,aACD,oBACXR,UAAU,SACVhhB,KAAK,SACLyhB,MAAM,QAAM,8DCvPtB,MAAME,GAA4B,4aCUrBC,GAAsB,MALnC5U,YAAAqP,aAO0Cne,KAAA0Q,WAA+B,GAGvE5B,aAAa8Q,GACX,MAAMnO,EAAeG,IAErB5R,KAAK0Q,WAAa,IAAI1Q,KAAK0Q,WAAYe,GAEvC8D,EAAM7E,WAAa,IAAI1Q,KAAK0Q,YAM9B5B,gBAAgBuR,GACdrgB,KAAK0Q,WAAa1Q,KAAK0Q,WAAW5M,QAAOP,GAChCA,EAAErB,KAAOme,EAAIC,OAAOpe,KAI7BqT,EAAM7E,WAAa,IAAI1Q,KAAK0Q,YAI9B5B,iBAAiB8Q,GACfrK,EAAM7E,WAAa,IAAI1Q,KAAK0Q,YAC5B6E,EAAMyG,MAAQ,MAGhBlN,SACE,OACEjO,EAACge,EAAI,KACHhe,EAAA,MAAA,CAAKse,MAAM,QACTte,EAAA,OAAA,CAAMqB,GAAG,SAAQrB,EAAA,OAAA,QAEnBA,EAAA,MAAA,CAAKqB,GAAG,aAAaid,MAAM,aACxBnf,KAAK0Q,WAAW5D,KAAK6D,GAElB9P,EAAA,4BAAA,CACEse,MAAM,iBACNjd,GAAI,aAAayO,EAAUzO,KAC3ByO,UAAWA,MAIhB4E,EAAMzE,SAAW9Q,KAAK2jB,qBAAuB,OAO9C7U,qBACN,OAAOjO,EAAA,mCAAA,CACLqB,GAAG,qCClET,MAAM0hB,GAAkC,kECQ3BC,GAA4B,MALzC/U,YAAAqP,aAeUne,KAAA8Q,SAAmB,KAGpBhC,mBACL,MAAO,CACLoC,MAAOlR,KAAK8jB,QAAQtT,QACpBA,QAASxQ,KAAKyhB,UAAUjR,SAI5B1B,iBACE,OACEjO,EAACge,EAAI,KACHhe,EAAA,OAAA,MAEAA,EAAA,yBAAA,CACEqB,GAAG,QACH6hB,IAAK,EACL/J,SAAS,QACTlJ,SAAU9Q,KAAK8Q,SACfN,SAASO,EAAA/Q,KAAKwQ,WAAO,MAAAO,SAAA,OAAA,EAAAA,EAAEG,MACvBgS,IAAKb,GAAOriB,KAAK8jB,QAAUzB,GAAqC,SAKlExhB,EAAA,yBAAA,CACEqB,GAAG,UACH8X,SAAS,UACTlJ,SAAU9Q,KAAK8Q,SACfN,SAASwN,EAAAhe,KAAKwQ,WAAO,MAAAwN,SAAA,OAAA,EAAAA,EAAExN,QACvB0S,IAAKb,GAAOriB,KAAKyhB,UAAYY,GAAqC,0BCjD5E,MAAM2B,GAAmC,mJCO5BC,GAA6B,0EAMxCnV,gBACE9O,KAAKkkB,aAAapE,OAGpBhR,SACE,OACEjO,EAACge,EAAI,KACHhe,EAAA,OAAA,MACAA,EAAA,iBAAA,CACEiiB,UAAU,QACVM,WAAW,QACXC,MAAM,OAAMC,aACD,OACX7D,MAAM,IACNE,QAAS3f,KAAKmkB,cAAcnF,KAAKhf,OAAK,gCC3BhD,MAAMokB,GAAmB,4yECUZC,GAAa,MAL1BvV,YAAAqP,aAQ0Cne,KAAAskB,SAA4BzI,EAAgBgB,QAK5E7c,KAAAukB,eAAyB,2BACzBvkB,KAAAwkB,oBAA8B,gCAC9BxkB,KAAAykB,kBAA4B,6BAC5BzkB,KAAA0kB,eAAyB,0BAEO1kB,KAAA2kB,eAAyB,WAKzB3kB,KAAA4kB,QAAmB,MAElD5kB,KAAAsQ,SAAW,GACkBtQ,KAAA0Q,WAAgC,GAC7D1Q,KAAAwQ,QAA0B,GAG1BxQ,KAAA6kB,QAAmB,KAGnB7kB,KAAA8kB,mBAA6B,MAoC7B9kB,KAAAuhB,QAAmB,MA9B5BzS,0BAEE9O,KAAKskB,SAAWxH,EAAY9c,KAAKskB,UAEjCtkB,KAAKwQ,cAAgBqB,EAAY7R,KAAK0kB,gBACtC,MAAMpU,QAAiBD,EAAarQ,KAAKukB,gBACzC,MAAMQ,QAAsB1U,EAAarQ,KAAKwkB,qBAC9CxkB,KAAKsQ,SAAW,IAAIA,KAAayU,GAGjCxP,EAAMjF,SAAWtQ,KAAKsQ,SAGtBtQ,KAAK0Q,iBAAmB1Q,KAAKglB,aAAahlB,KAAKskB,UAG/C/O,EAAM6E,QAAO9W,OAAAoO,OAAApO,OAAAoO,OAAA,GACR6D,EAAM6E,SAAO,CAChB1J,WAAY1Q,KAAK0Q,aAGnB,IAAI+L,MAAuBlH,EAAM6E,QAAS,CACxCpa,KAAK4kB,QAAU,MAInB9V,4BACEiP,KAIFjP,WACE,IAAI9O,KAAKuhB,QAAS,CAChBvhB,KAAKuhB,QAAU,KACfvhB,KAAKqiB,GAAG9D,UAAUC,IAAI,YAI1B1P,aAAa8Q,GAEXrK,EAAM6E,QAAQgC,MAAQpc,KAAKsiB,aAAalP,MACxCpT,KAAKqiB,GAAG9D,UAAUgB,OAAO,WACzBvf,KAAKuhB,QAAU,MAGfhM,EAAMyG,MAAQ,MAIhBlN,kBAAkB4B,GAChB,MAAMuU,EAAevU,EAAW5D,KAAI6D,IAAS,IAAAI,EAAI,OAAAA,EAAAJ,EAAUL,YAAQ,MAAAS,SAAA,OAAA,EAAAA,EAAEjE,KAAIsE,GAAUA,EAAOrJ,UAAOmd,OAEjG,MAAMC,EAAoBnlB,KAAKsQ,SAASxM,QAAOsN,IACrC6T,EAAa9T,SAASC,EAAOrJ,QAEvC,OAAOod,EAGTrW,mBAAmBwV,EAA4BzI,EAAgBG,OAC7D,IAAItL,EAAgC,GAEpC,OAAQ4T,GACN,KAAKzI,EAAgBgB,QAAS,CAC5BnM,QAAmBH,EAAevQ,KAAKykB,kBAAmBzkB,KAAKwQ,QAASxQ,KAAKsQ,UAC7E,MAEF,KAAKuL,EAAgBG,MAAO,CAC1BtL,QAAmBuM,GAAWjd,KAAKwQ,QAASxQ,KAAKsQ,UACjD,MAEF,QAAS,CAEP,IAAIiB,EAAsBvR,KAAK0Q,WAAW5M,QAAOP,IAAMA,EAAEuN,WACzDJ,QAAmBW,EAAUE,IAIjCgE,EAAMjF,SAAWtQ,KAAKmlB,kBAAkBzU,GACxC6E,EAAM7E,WAAaA,EAEnB,OAAOA,EAIT5B,uBAAuBuR,GACrBpE,IACA,MAAMvL,QAAmB1Q,KAAKglB,aAAa3E,EAAIC,QAC/CtgB,KAAK0Q,WAAa,IAAIA,GACtB6E,EAAM6E,QAAU,CAAC1J,WAAY1Q,KAAK0Q,YAIpC5B,sBAAsBuR,GACpBrgB,KAAK2kB,eAAiBtE,EAAIC,OAG5BxR,iBACE,OACEjO,EAAA,sBAAA,CACEukB,OAAO,aACPhC,WAAW,QACX3D,MAAM,IACN8D,MAAM,QAEN1iB,EAAA,2BAAA,CAA0BuS,MAAM,WAAWiS,QAAQ,IAAE,YAGrDxkB,EAAA,2BAAA,CAA0BuS,MAAM,WAAS,YAQ/CtE,SAEE,OACEjO,EAACge,EAAI,KACHhe,EAAA,MAAA,CAAKqB,GAAG,YAAYid,MAAO,WAAWnf,KAAK2kB,0BAA0B3kB,KAAK6kB,QAAU,UAAY,YAC9FhkB,EAAA,MAAA,CAAKqB,GAAG,UACNrB,EAAA,OAAA,CAAMkH,KAAK,WACV/H,KAAKsf,kBAILtf,KAAKslB,wBAEP/P,EAAMzE,SAAW9Q,KAAKulB,gBAAkB,KACxCvlB,KAAKwlB,YAAYxlB,KAAK0Q,YACtB1Q,KAAKylB,iBAON3W,uBACN,OAAOjO,EAAA,sBAAA,CACL0J,KAAMvK,KAAK4kB,QACXzF,MAAM,UACNjd,GAAG,SACHrB,EAAA,OAAA,CAAMqB,GAAG,QAAQkd,KAAK,SAAO,oBAIzBtQ,eACN,OAAOjO,EAAA,MAAA,CAAKqB,GAAG,UACbrB,EAAA,OAAA,CAAMkH,KAAK,YAIP+G,YAAYyM,GAClB,OAAO1a,EAAA,MAAA,CAAKqB,GAAG,SACbrB,EAAA,4BAAA,CACE6P,WAAY1Q,KAAK0Q,YAEjB7P,EAAA,OAAA,CAAMqB,GAAG,eACRlC,KAAK0lB,sBAEJ7kB,EAAA,mBAAA,CAAkBse,MAAM,UAAUM,MAAM,KAAG,SAG3C5e,EAAA,2BAAA,CACE6P,WAAY6E,EAAM7E,YAElB7P,EAAA,OAAA,CAAMue,KAAK,SAAO,yBAEpBve,EAAA,OAAA,CAAMqB,GAAG,oBACNqT,EAAMwG,cAQTjN,8BAEN,OAAOjO,EAAA,OAAA,CAAMue,KAAK,QAAQld,GAAG,SAC3BrB,EAAA,OAAA,CAAMqB,GAAG,YACPyd,QAAS3f,KAAKyiB,SAASzD,KAAKhf,WAC1B+Q,EAAAwE,EAAM6E,WAAO,MAAArJ,SAAA,OAAA,EAAAA,EAAEqL,OAAQ7G,EAAM6E,QAAQgC,MAAQ,wCAEjDvb,EAAA,0BAAA,CACEqB,GAAG,YACHud,MAAM,IAAGiD,sBACW,WAAUC,sBACV,wBAAuBC,uBACtB,UACrBC,SAAU,MAEVhiB,EAAA,qBAAA,CACE4e,MAAM,IACN5U,OAAO,OACPiY,UAAU,QAAOC,cACL,GAAEC,cACF,GACZ5P,OAAO4K,EAAAzI,EAAM6E,WAAO,MAAA4D,SAAA,OAAA,EAAAA,EAAE5B,MACtB6G,YAAY,eACZC,IAAKb,GAAMriB,KAAKsiB,aAAeD,MAOvCvT,0BAA0BuR,GACxBlQ,QAAQ6K,IAAI,sBAAuB,CAACqF,IAAAA,EAAKjN,MAAOpT,KAAK2lB,gBAAgBN,UACrErlB,KAAK8kB,mBAAqB9kB,KAAK2lB,gBAAgBN,QAGzCvW,gBACN,OAAOjO,EAAA,MAAA,CAAKqB,GAAG,UACbid,MAAO,CACLyG,OAAQ5lB,KAAK6kB,UAGfhkB,EAAA,MAAA,CAAKqB,GAAG,YAAYlC,KAAK6lB,kBACzBhlB,EAAA,MAAA,CAAKqB,GAAG,UACNrB,EAAA,yBAAA,CACE2P,QAASxQ,KAAKwQ,UAGhB3P,EAAA,yBAAA,CACEof,QAASjgB,KAAK8kB,mBAAqB,MAAQ,QAC3CxU,SAAUiF,EAAMjF,SAChB6O,MAAM,SACNrO,SAAU,OAEZjQ,EAAA,gBAAA,CAAeukB,OAAO,UACpBvkB,EAAA,mBAAA,CAAkBqiB,IAAKb,GAAMriB,KAAK2lB,gBAAkBtD,EAAIgD,QAASrlB,KAAK8kB,mBAAoBrF,MAAM,MAAuB,yBAK3H5e,EAAA,OAAA,CAAMqB,GAAG,cAAcyd,QAAS,IAAM3f,KAAK6kB,QAAU7kB,KAAK6kB,QAAU,MAAQ,MAC1EhkB,EAAA,eAAA,CAAc2e,KAAMxf,KAAK6kB,QAAU,cAAgB,eAAgBpF,MAAM,QAMvE3Q,kBACN,OAAOjO,EAAA,wBAAA,KACLA,EAAA,OAAA,CAAMue,KAAK,SAAO,wBAClBve,EAAA,MAAA,CAAKue,KAAK,UAAQ,wBAClBve,EAAA,IAAA,CAAGue,KAAK,WACNve,EAAA,KAAA,KACEA,EAAA,KAAA,KAAA,yCACAA,EAAA,KAAA,KAAA,+GACAA,EAAA,KAAA,KAAA,uEACAA,EAAA,KAAA,KAAA,mKCxSV,MAAMilB,GAAwB,uDCOjBC,GAAkB,MAL/BjX,YAAAqP,aAM0Cne,KAAAuK,KAAgB,MAChDvK,KAAAyf,MAAe,IAGhB3Q,kBACL9O,KAAKuK,KAAO,KAGPuE,kBACL9O,KAAKuK,KAAO,MAIduE,aACE9O,KAAKgmB,YAGPlX,SACE,OACEjO,EAACge,EAAI,KACHhe,EAAA,iBAAA,CACEuiB,WAAW,cACX3D,MAAM,IACLE,QAAS3f,KAAKimB,UAAUjH,KAAKhf,OAE9Ba,EAAA,OAAA,CAAMkH,KAAK,WAEZ/H,KAAKkmB,eAIJpX,cACN,OAAOjO,EAAA,gBAAA,CACLwiB,MAAM,GACN9Y,KAAMvK,KAAKuK,KAAI4b,mBACE,QACjB1G,MAAOzf,KAAKyf,MACZ8D,MAAOvjB,KAAKyf,MAAK2G,aACN,QAAOC,kBAEF,eAEhBxlB,EAAA,KAAA,CAAIqB,GAAG,SAASkd,KAAK,UACnBve,EAAA,OAAA,CAAMkH,KAAK,UAAQ,+BAErBlH,EAAA,MAAA,CAAKqB,GAAG,UAAUkd,KAAK,WACrBve,EAAA,OAAA,CAAMkH,KAAK,aAEblH,EAAA,iBAAA,CACEue,KAAK,UACLmE,MAAM,OACN5D,QAAS3f,KAAKgmB,UAAUhH,KAAKhf,OAAK,uBC3D1C,MAAMsmB,GAAyB,gVCWlBC,GAAmB,MANhCzX,YAAAqP,wDAcUne,KAAA8Q,SAAmB,KAKnB9Q,KAAA6H,OAAoB,KAG5BiH,QAAQsP,GACN7I,EAAM1N,OAAS,GAIjBiH,UAAUuP,GACR9I,EAAM1N,OAAS,SAQfwW,EAAGI,aAAaC,YAGhBL,EAAGI,aAAaE,QAAQ,aAAc7Z,KAAKa,UAAU3F,KAAKwmB,SAG5D1X,iBACE,MAAM2X,EAAWC,EAAa,yBAAyB1mB,KAAKwmB,OAAOG,SAEnE,OACE9lB,EAACge,EAAI,CACH9C,UAAW/V,OAAOhG,KAAK8Q,WAAa9K,OAAOuP,EAAMzE,UACjDgO,YAAa9e,KAAK+e,UAAUC,KAAKhf,MACjCif,UAAWjf,KAAKkf,QAAQF,KAAKhf,OAE7Ba,EAAA,OAAA,MACAA,EAAA,kBAAA,CACEsgB,UAAWnhB,KAAKwmB,OAAOG,MAAQF,EAAW,MAE1C5lB,EAAA,OAAA,CAAMue,KAAK,UACRpf,KAAKqf,aAAarf,KAAK6H,SAE1BhH,EAAA,OAAA,CAAMue,KAAK,QAAQD,MAAM,SAEvBte,EAAA,OAAA,CAAMqB,GAAG,SAAQ6O,EAAA/Q,KAAKwmB,UAAM,MAAAzV,SAAA,OAAA,EAAAA,EAAEhJ,MAAYlH,EAAA,KAAA,MAC1CA,EAAA,OAAA,CAAMqB,GAAG,SAAQ8b,EAAAhe,KAAKwmB,UAAM,MAAAxI,SAAA,OAAA,EAAAA,EAAE4I,OAGhC/lB,EAAA,MAAA,CAAKue,KAAK,WAAWld,GAAG,cAQxB4M,aAAajH,GACnB,GAAG7H,KAAK8Q,UAAYjJ,IAAWiU,EAAWyD,OAAQ,CAChD,OAAO1e,EAAA,eAAA,CAAc2e,KAAK,IAAIC,MAAM,IAAGC,cAAa,OAClDC,QAAUC,GAAS5f,KAAK6mB,aAAa/G,KAAK9f,KAAKwmB,kEChFvD,MAAMM,GAAyB,8wBCQlBC,GAAmB,MALhCjY,YAAAqP,4DAaUne,KAAA+jB,IAAa,KAKkB/jB,KAAAwQ,QAAyB,GAWxDxQ,KAAA8Q,SAAmB,KAG3BhC,WAAWkY,EAA2BC,EAA6B,IAEjE,MAAMC,EAAkBlnB,KAAKwQ,QAAQ1D,KAAIpJ,GAAKA,EAAEqE,OAChDif,EAAaA,EAAWljB,QAAO0iB,IACrBU,EAAgB/V,SAASqV,EAAOze,QAI1C,MAAMof,EAAiBnnB,KAAKwQ,QAAQxM,OAASgjB,EAAWhjB,OACxD,KAAKhE,KAAK+jB,KAAOoD,EAAUnnB,KAAK+jB,IAAK,CAGnC,MAAMqD,EAAgBD,EAAUnnB,KAAK+jB,IACrC/jB,KAAKwQ,QAAU,IACVxQ,KAAKwQ,QAAQ5K,MAAMwhB,EAAcpnB,KAAKwQ,QAAQxM,WAC9CgjB,OAEA,CACLhnB,KAAKwQ,QAAU,IAAIxQ,KAAKwQ,WAAYwW,GAItChnB,KAAKqnB,eAAevH,KAAK9f,KAAKwQ,SAIhC1B,aAAauR,GACXA,EAAII,iBACJ,IAAIxb,EAAOob,EAAI5B,aAAaiC,QAAQ,QAEpC,MAAM4G,EAAYxiB,KAAK/D,MAAMkE,GAC7BjF,KAAKunB,WAAW,CAACD,IAInBxY,aAAauR,GACXrgB,KAAKwQ,QAAUxQ,KAAKwQ,QAAQ1M,QAAQ0iB,GAC3BA,EAAOze,OAASsY,EAAIC,OAAOvY,OAGpC/H,KAAKqnB,eAAevH,KAAK9f,KAAKwQ,SAKhC1B,UAAUuR,GAIR,GAAGrgB,KAAK8Q,UAAYyE,EAAM1N,SAAW,SAAU,CAC7CwY,EAAII,kBAIR3R,SACE,MAAMyT,EAAUviB,KAAKwnB,aACrB,OACE3mB,EAACge,EAAI,CACHM,MAAOoD,EAAQld,KAAK,KACpBwb,OAAQ7gB,KAAK8gB,aAAa9B,KAAKhf,MAC/B+gB,WAAY/gB,KAAKghB,UAAUhC,KAAKhf,OAE9Ba,EAAA,OAAA,CAAMqB,GAAG,SACPrB,EAAA,OAAA,OAEFA,EAAA,MAAA,CAAKqB,GAAG,WACPlC,KAAKwQ,QAAQ1D,KAAK0Z,GAEf3lB,EAAA,yBAAA,CACE2lB,OAAQA,EACR1V,SAAU9Q,KAAK8Q,SACfjJ,SAAU7H,KAAKga,SAAW8B,EAAWyD,OAAS,WAUpDzQ,aACN,MAAMyT,EAAU,CAAC,WAAY,UAAUhN,EAAM1N,UAC7C,GAAI7H,KAAK8Q,SAAU,CACjByR,EAAQ/c,KAAK,YAGf,GAAIxF,KAAKwQ,QAAQxM,OAAShE,KAAK+jB,IAAK,CAClCxB,EAAQ/c,KAAK,mBAEf,OAAO+c,wCC7HX,MAAMkF,GAAsB,2QCUfC,GAAgB,MAN7B5Y,YAAAqP,aAQ0Cne,KAAA0Q,WAA0B,GAElE5B,SACE,OACEjO,EAACge,EAAI,KACHhe,EAAA,OAAA,MACAA,EAAA,MAAA,CAAKqB,GAAG,cACPlC,KAAK0Q,WAAW5D,KAAK6D,GACb3Q,KAAK2nB,uBAAuBhX,OAM3C7B,uBAAuB6B,GAErB,IAAIO,EAAQP,EAAUH,QAAQU,MAAM,GACpC,IAAIA,EAAO,CACTA,EAAQ,CAENnJ,KAAM,uBACN4e,MAAO,cAKX,OAAO9lB,EAAA,MAAA,CAAKse,MAAM,eACbjO,EAAQlR,KAAK4nB,aAAa1W,EAAOP,GAAa,KACjD9P,EAAA,OAAA,CAAMse,MAAM,UAAU5M,EAAgB5B,EAAUL,UAAS,aAG7DxB,aAAa+Y,EAAiBlX,GAC5B,MAAM8V,EAAWC,EAAa,yBAAyBmB,IAAM,MAANA,SAAM,OAAA,EAANA,EAAQlB,SAE/D,MAAM5e,EAAO8f,IAAM,MAANA,SAAM,OAAA,EAANA,EAAQ9f,KAAKmF,MAAM,KAAKtH,MAAM,GAAGP,KAAK,KACnD,OACExE,EAAA,MAAA,CAAKse,MAAM,UACRpX,EACDlH,EAAA,MAAA,CAAKse,MAAM,QAAQiC,IAAKqF,IACvB9V,EAAU5I,6DCnDnB,MAAM+f,GAAoB,uhBCSbC,GAAc,MAL3BjZ,YAAAqP,aAU0Cne,KAAAuK,KAAgB,MAChBvK,KAAAyd,QAAkB,GAClBzd,KAAA4d,SAAmB,GACnD5d,KAAAyf,MAAe,IAGdzf,KAAAgoB,OAAkB,MAE3BlZ,oBACE9O,KAAK4d,SAAWxd,OAAOM,SAASgd,KAI3B5O,kBACL9O,KAAKuK,KAAO,KAGPuE,kBACL9O,KAAKuK,KAAO,MAGduE,QACE9O,KAAKuK,KAAO,MAIPuE,oBACL9O,KAAKgoB,OAAS,KACd,MAAMC,QAAa/K,GAAW3H,EAAM7E,YAEpC1Q,KAAK4d,SAAWqK,EAAK,SACrBjoB,KAAKyd,QAAUwK,EAAK,QAEpBjoB,KAAKgoB,OAAS,MAIhBlZ,eAAeyL,EAAc,IAC3B,OACE1Z,EAAA,MAAA,CAAKse,MAAM,eACXte,EAAA,iBAAA,CACEwiB,MAAM,OACND,WAAW,UACX5D,KAAK,eACL+D,MAAM,OACN5X,OAAO,OACP+R,KAAM,gDAAgDnD,KAAK,sBAOjEzL,cAAcyL,EAAc,IAC1B,OACE1Z,EAAA,MAAA,CAAKse,MAAM,eACXte,EAAA,iBAAA,CACEwiB,MAAM,OACND,WAAW,UACX5D,KAAK,eACL+D,MAAM,OACN5X,OAAO,OACP+R,KAAM,yCAAyCnD,KAAK,qBAQ1DzL,WAAWoZ,EAAyBC,EAAkB,GAAIC,EAAmB,MAC3E,OACEvnB,EAAA,MAAA,KACAA,EAAA,OAAA,CAAMse,MAAM,YACZte,EAAA,QAAA,CACEiB,KAAK,OACLqd,MAAM,OACN+D,IAAMb,GAAyB6F,EAAQ7F,EACvCjP,MAAO+U,EACPE,SAAQ,OAGVxnB,EAAA,iBAAA,CACIue,KAAK,SACL0D,UAAU,SACVM,WAAYgF,EAAU,QAAU,UAChC/E,MAAM,OACN5D,MAAM,IACN3d,KAAK,SACLyhB,MAAM,OACN5D,QAAUvB,GAAepe,KAAKsoB,SAASJ,IAAM,cAQrDpZ,SAASoZ,GAEPA,EAAMK,SACNL,EAAMM,kBAAkB,EAAG,OAG3BloB,SAASmoB,YAAY,QAGvB3Z,SACE,OACEjO,EAACge,EAAI,KACF7e,KAAK0oB,eAAenT,EAAMzE,UAAayE,EAAMzE,UAAYyE,EAAMyG,OAChEnb,EAAA,gBAAA,CACEwiB,MAAM,GACN9Y,KAAMvK,KAAKuK,KAAI4b,mBACE,QACjB1G,MAAOzf,KAAKyf,MACZ8D,MAAOvjB,KAAKyf,MAAK2G,aACN,QAAOC,kBAEF,eAEhBxlB,EAAA,KAAA,CAAIue,KAAK,UAAQ,8BACjBve,EAAA,MAAA,CAAKue,KAAK,WACRve,EAAA,MAAA,CAAKqB,GAAG,aACNrB,EAAA,IAAA,KAAA,8IAE6EA,EAAA,KAAA,OAE5Eb,KAAK2oB,cAAcpT,EAAM7E,YAC1B7P,EAAA,IAAA,KACGb,KAAK4oB,WAAW5oB,KAAK6oB,gBAAiB7oB,KAAK4d,SAAU,OAExD/c,EAAA,IAAA,CAAGqB,GAAG,gBACHlC,KAAK8oB,cAAc9oB,KAAK4d,UACxB5d,KAAK+oB,eAAe/oB,KAAK4d,YAG7BrI,EAAMzE,SAAW9Q,KAAKgpB,iBAAmB,MAE5CnoB,EAAA,iBAAA,CACEue,KAAK,UACLmE,MAAM,OACN5D,QAAS3f,KAAKgmB,UAAUhH,KAAKhf,OAAK,UAUpC8O,cAAc4B,SACpB,OAAO7P,EAAA,MAAA,CAAKqB,GAAG,WACbrB,EAAA,OAAA,CAAMqB,GAAG,iBAAgB6O,EAAAwE,EAAM6E,WAAO,MAAArJ,SAAA,OAAA,EAAAA,EAAEqL,OACxCvb,EAAA,OAAA,CAAMqB,GAAG,eAAa,+CACtBrB,EAAA,qBAAA,CACE6P,WAAYA,KAKV5B,iBACN,OAAOjO,EAAA,MAAA,CAAKqB,GAAG,YACbrB,EAAA,IAAA,KAAA,mHAGAA,EAAA,IAAA,KACGb,KAAK4oB,WAAW5oB,KAAKipB,eAAgBjpB,KAAKyd,QAAS,SAKlD3O,cAAcoa,GAEpB,MAAMC,EAActoB,EAAA,iBAAA,CAClBiiB,UAAU,QACVM,WAAW,UACXC,MAAM,OAAMC,aACD,QACX7D,MAAM,IACNE,QAAS3f,KAAKimB,UAAUjH,KAAKhf,OAE7Ba,EAAA,OAAA,KAAA,UAGF,MAAMuoB,EAAavoB,EAAA,iBAAA,CACjBiiB,UAAU,QACVM,WAAY8F,EAAa,UAAY,QACrC7F,MAAM,OAAMC,aACD,OACX7D,MAAM,IACN4J,QAASrpB,KAAKgoB,OACdrI,QAAS3f,KAAKma,YAAY6E,KAAKhf,OAAK,QAKtC,OAAOkpB,EAAaC,EAAcC,gBCpNtC,MAAME,GAAuB,gOCOhBC,GAAiB,MAL9Bza,YAAAqP,gEAO0Cne,KAAAskB,SAAmB,UACnBtkB,KAAAuK,KAAgB,MAIjDuE,kBACL9O,KAAKuK,KAAO,KAGPuE,kBACL9O,KAAKuK,KAAO,MAIduE,aACE9O,KAAKwpB,iBAAiB1J,KAAK9f,KAAKskB,UAChCtkB,KAAKgmB,YAGPlX,aAAauR,GAEX,MAAMoJ,EAASpJ,EAAIqJ,KAAK,GAAGtW,MAC3BpT,KAAKskB,SAAWmF,EAIlB3a,gBACE9O,KAAKskB,SAAW,QAElBxV,kBACE9O,KAAKskB,SAAW,UAElBxV,eAAewV,GACbtkB,KAAKwpB,iBAAiB1J,KAAKwE,GAM7BxV,eACE,OACEjO,EAAA,4BAAA,CACEqiB,IAAKb,GAAOriB,KAAK2pB,aAAetH,EAC9B+C,OAAO,aACPwE,IAAI,OACN/oB,EAAA,sBAAA,CACEwkB,QAAS,KACTzU,YAAY,kEACZiZ,QAAQ,kBACRrK,KAAK,eACLzX,KAAK,QAAO+hB,kBACI,QAChBvG,MAAM,OACNzhB,KAAK,QACLsR,MAAM,UACNuM,QAASvB,GAAOpe,KAAK+pB,gBAAgB/K,KAAKhf,OAE1Ca,EAAA,uBAAA,CACEwkB,QAAS,KACTnjB,GAAG,YACHkR,MAAM,YACNrL,KAAK,QACL0X,MAAM,OAGV5e,EAAA,sBAAA,CACE+P,YAAY,oEACZiZ,QAAQ,QACRrK,KAAK,aACLzX,KAAK,QAAO+hB,kBACI,QAChBvG,MAAM,OACNzhB,KAAK,QACLsR,MAAM,QACNuM,QAAS3f,KAAKgqB,cAAchL,KAAKhf,OAEjCa,EAAA,uBAAA,CACEqB,GAAG,UACH6F,KAAK,QACL0X,MAAM,QAOhB3Q,SACE,OACEjO,EAACge,EAAI,KACHhe,EAAA,OAAA,CAAMkH,KAAK,UACV/H,KAAKiqB,sBACLjqB,KAAKkmB,eAoBJpX,sBACN,OACEjO,EAAA,OAAA,CAAMse,MAAM,iBACZte,EAAA,iBAAA,CACEiiB,UAAU,QACVM,WAAW,UACXC,MAAM,OAAMC,aACD,eACX7D,MAAM,IACJE,QAAUvB,IAASpe,KAAKkqB,eAAe,aAAW,+BAItDrpB,EAAA,iBAAA,CACEiiB,UAAU,QACVM,WAAW,UACXC,MAAM,MAAKC,aACA,QACX7D,MAAM,IACJE,QAAUvB,IAASpe,KAAKkqB,eAAe,WAAS,yBAShDpb,cACN,OAAOjO,EAAA,gBAAA,CACLwiB,MAAM,GACN9Y,KAAMvK,KAAKuK,KAAI4b,mBACE,QACjB1G,MAAM,IACN8D,MAAM,IAAG6C,aACE,QAAOC,kBAEF,eAEhBxlB,EAAA,KAAA,CAAIue,KAAK,UAAQ,8BACjBve,EAAA,MAAA,CAAKue,KAAK,WACRve,EAAA,IAAA,KAAA,kLAGAA,EAAA,IAAA,CAAGqB,GAAG,WACHlC,KAAKmqB,iBAGVtpB,EAAA,iBAAA,CACEue,KAAK,UACLmE,MAAM,OACN5D,QAAS3f,KAAKoqB,WAAWpL,KAAKhf,OAAK,uBC3J3C,IAAIqqB,GAAgB,SAAS9kB,EAAGzE,GAC5BupB,GAAgB/mB,OAAOgnB,gBAClB,CAAEC,UAAW,cAAgBrmB,OAAS,SAAUqB,EAAGzE,GAAKyE,EAAEglB,UAAYzpB,IACvE,SAAUyE,EAAGzE,GAAK,IAAK,IAAIkC,KAAKlC,EAAG,GAAIwC,OAAOwI,UAAUsN,eAAejQ,KAAKrI,EAAGkC,GAAIuC,EAAEvC,GAAKlC,EAAEkC,IAChG,OAAOqnB,GAAc9kB,EAAGzE,IAGrB,SAAS0pB,GAAUjlB,EAAGzE,GACzB,UAAWA,IAAM,YAAcA,IAAM,KACjC,MAAM,IAAI2pB,UAAU,uBAAyBzkB,OAAOlF,GAAK,iCAC7DupB,GAAc9kB,EAAGzE,GACjB,SAAS4pB,IAAO1qB,KAAKyF,YAAcF,EACnCA,EAAEuG,UAAYhL,IAAM,KAAOwC,OAAOsL,OAAO9N,IAAM4pB,EAAG5e,UAAYhL,EAAEgL,UAAW,IAAI4e,GAyC5E,SAASC,GAAUC,EAASC,EAAYC,EAAGC,GAC9C,SAASC,EAAM5X,GAAS,OAAOA,aAAiB0X,EAAI1X,EAAQ,IAAI0X,GAAE,SAAUG,GAAWA,EAAQ7X,MAC/F,OAAO,IAAK0X,IAAMA,EAAII,WAAU,SAAUD,EAASE,GAC/C,SAASC,EAAUhY,GAAS,IAAMhR,EAAK2oB,EAAUM,KAAKjY,IAAW,MAAOxT,GAAKurB,EAAOvrB,IACpF,SAAS0rB,EAASlY,GAAS,IAAMhR,EAAK2oB,EAAU,SAAS3X,IAAW,MAAOxT,GAAKurB,EAAOvrB,IACvF,SAASwC,EAAKwJ,GAAUA,EAAO2f,KAAON,EAAQrf,EAAOwH,OAAS4X,EAAMpf,EAAOwH,OAAOoY,KAAKJ,EAAWE,GAClGlpB,GAAM2oB,EAAYA,EAAUhf,MAAM6e,EAASC,GAAc,KAAKQ,WAI/D,SAASI,GAAYb,EAAS/P,GACjC,IAAI5Y,EAAI,CAAEypB,MAAO,EAAGC,KAAM,WAAa,GAAI9rB,EAAE,GAAK,EAAG,MAAMA,EAAE,GAAI,OAAOA,EAAE,IAAO+rB,KAAM,GAAIC,IAAK,IAAM3rB,EAAGyD,EAAG9D,EAAGuD,EAC/G,OAAOA,EAAI,CAAEioB,KAAMS,EAAK,GAAIC,MAASD,EAAK,GAAIE,OAAUF,EAAK,WAAaG,SAAW,aAAe7oB,EAAE6oB,OAAOC,UAAY,WAAa,OAAOlsB,OAAUoD,EACvJ,SAAS0oB,EAAKzrB,GAAK,OAAO,SAAU+E,GAAK,OAAOhD,EAAK,CAAC/B,EAAG+E,KACzD,SAAShD,EAAK+pB,GACV,GAAIjsB,EAAG,MAAM,IAAIuqB,UAAU,mCAC3B,MAAOrnB,IAAMA,EAAI,EAAG+oB,EAAG,KAAOlqB,EAAI,IAAKA,MACnC,GAAI/B,EAAI,EAAGyD,IAAM9D,EAAIssB,EAAG,GAAK,EAAIxoB,EAAE,UAAYwoB,EAAG,GAAKxoB,EAAE,YAAc9D,EAAI8D,EAAE,YAAc9D,EAAEsJ,KAAKxF,GAAI,GAAKA,EAAE0nB,SAAWxrB,EAAIA,EAAEsJ,KAAKxF,EAAGwoB,EAAG,KAAKZ,KAAM,OAAO1rB,EAC3J,GAAI8D,EAAI,EAAG9D,EAAGssB,EAAK,CAACA,EAAG,GAAK,EAAGtsB,EAAEuT,OACjC,OAAQ+Y,EAAG,IACP,KAAK,EAAG,KAAK,EAAGtsB,EAAIssB,EAAI,MACxB,KAAK,EAAGlqB,EAAEypB,QAAS,MAAO,CAAEtY,MAAO+Y,EAAG,GAAIZ,KAAM,OAChD,KAAK,EAAGtpB,EAAEypB,QAAS/nB,EAAIwoB,EAAG,GAAIA,EAAK,CAAC,GAAI,SACxC,KAAK,EAAGA,EAAKlqB,EAAE4pB,IAAIO,MAAOnqB,EAAE2pB,KAAKQ,MAAO,SACxC,QACI,KAAMvsB,EAAIoC,EAAE2pB,KAAM/rB,EAAIA,EAAEmE,OAAS,GAAKnE,EAAEA,EAAEmE,OAAS,MAAQmoB,EAAG,KAAO,GAAKA,EAAG,KAAO,GAAI,CAAElqB,EAAI,EAAG,SACjG,GAAIkqB,EAAG,KAAO,KAAOtsB,GAAMssB,EAAG,GAAKtsB,EAAE,IAAMssB,EAAG,GAAKtsB,EAAE,IAAM,CAAEoC,EAAEypB,MAAQS,EAAG,GAAI,MAC9E,GAAIA,EAAG,KAAO,GAAKlqB,EAAEypB,MAAQ7rB,EAAE,GAAI,CAAEoC,EAAEypB,MAAQ7rB,EAAE,GAAIA,EAAIssB,EAAI,MAC7D,GAAItsB,GAAKoC,EAAEypB,MAAQ7rB,EAAE,GAAI,CAAEoC,EAAEypB,MAAQ7rB,EAAE,GAAIoC,EAAE4pB,IAAIrmB,KAAK2mB,GAAK,MAC3D,GAAItsB,EAAE,GAAIoC,EAAE4pB,IAAIO,MAChBnqB,EAAE2pB,KAAKQ,MAAO,SAEtBD,EAAKtR,EAAK1R,KAAKyhB,EAAS3oB,GAC1B,MAAOrC,GAAKusB,EAAK,CAAC,EAAGvsB,GAAI+D,EAAI,EAAI,QAAWzD,EAAIL,EAAI,EACtD,GAAIssB,EAAG,GAAK,EAAG,MAAMA,EAAG,GAAI,MAAO,CAAE/Y,MAAO+Y,EAAG,GAAKA,EAAG,QAAU,EAAGZ,KAAM,OAgC3E,SAASc,GAAO7rB,EAAGH,GACtB,IAAIqD,SAAWuoB,SAAW,YAAczrB,EAAEyrB,OAAOC,UACjD,IAAKxoB,EAAG,OAAOlD,EACf,IAAIQ,EAAI0C,EAAEyF,KAAK3I,GAAIe,EAAG+qB,EAAK,GAAI1sB,EAC/B,IACI,OAAQS,SAAW,GAAKA,KAAM,MAAQkB,EAAIP,EAAEqqB,QAAQE,KAAMe,EAAG9mB,KAAKjE,EAAE6R,OAExE,MAAO1Q,GAAS9C,EAAI,CAAE8C,MAAOA,GACjC,QACQ,IACI,GAAInB,IAAMA,EAAEgqB,OAAS7nB,EAAI1C,EAAE,WAAY0C,EAAEyF,KAAKnI,GAE1D,QAAkB,GAAIpB,EAAG,MAAMA,EAAE8C,OAE7B,OAAO4pB,EAmBJ,SAASC,GAAcC,EAAI/W,EAAMgX,GACpC,GAAIA,GAAQzgB,UAAUhI,SAAW,EAAG,IAAK,IAAIhD,EAAI,EAAG+B,EAAI0S,EAAKzR,OAAQsoB,EAAItrB,EAAI+B,EAAG/B,IAAK,CACjF,GAAIsrB,KAAQtrB,KAAKyU,GAAO,CACpB,IAAK6W,EAAIA,EAAKpoB,MAAM4H,UAAUlG,MAAMuD,KAAKsM,EAAM,EAAGzU,GAClDsrB,EAAGtrB,GAAKyU,EAAKzU,IAGrB,OAAOwrB,EAAG1iB,OAAOwiB,GAAMpoB,MAAM4H,UAAUlG,MAAMuD,KAAKsM,IC/J/C,SAASiX,GAAMtZ,GAClB,OAAO9D,OAAO8D,KAAWA,EAStB,SAASuZ,GAAQvZ,GACpB,MAAO,GAAK1R,SAASyH,KAAKiK,GAcvB,SAASwZ,GAASxZ,GACrB,GAAIA,GAAS,OAASyZ,GAASzZ,GAAQ,CACnC,IAAI0Z,EAAYxd,OAAO8D,GACvB,GAAIsZ,GAAMI,IAAcC,GAAS3Z,IAAUA,GAAS,GAAI,CACpD,OAAOwZ,GAASxZ,EAAMvN,QAAQ,cAAe,KAEjD,OAAOinB,EAEX,OAAO1Z,EAQJ,SAAS4Z,GAAO5Z,GACnB,GAAI6Z,GAAO7Z,GAAQ,CAEf,OAAO,IAAI1N,KAAK0N,QAEf,GAAIyZ,GAASzZ,GAAQ,CACtB,OAAO,IAAI1N,KAAK0N,OAEf,CAED,IAAI8Z,EAAM5d,OAAO8D,GACjB,IAAKyZ,GAASK,GAAM,CAChB,OAAO,IAAIxnB,KAAK0N,OAEf,CACD,OAAO,IAAI1N,KAAKwnB,KAWrB,SAASC,GAAe/Z,GAE3B,GAAIsZ,GAAMtZ,GAAQ,CACd,MAAO,MAEX,GAAIA,IAAUga,SAAU,CACpB,MAAO,WAEX,GAAIha,KAAWga,SAAU,CACrB,MAAO,YAGX,GAAKha,IAAU,GAAO,EAAIA,KAAWga,SAAW,CAC5C,MAAO,KAGX,IAAIC,EAAWja,EAAQ,EACvBA,EAAQ9H,KAAK8B,IAAIgG,GAEjB,IAAIka,EAAS,gDAAgDC,KAAK,GAAKna,GACvE,IAAIoa,EAASF,EAAO,GACpB,IAAIG,EAAWH,EAAO,IAAM,GAC5B,IAAInW,EAEJ,GAAImW,EAAO,KAAOpV,UAAW,CACzBf,EAAOsW,IAAa,GAAKD,EAASA,EAAS,IAAMC,MAEhD,CACD,IAAIC,GAAYJ,EAAO,GAEvB,GAAIla,EAAQ,EAAG,CACX,IAAIua,EAAQD,EAAW,EACvBvW,EAAM,KAAOyW,GAAO,IAAKD,GAASH,EAASC,MAG1C,CACD,IAAIE,EAAQD,EAAWD,EAASzpB,OAChC,GAAI2pB,IAAU,EAAG,CACbxW,EAAMqW,EAASC,OAEd,GAAIE,EAAQ,EAAG,CAChBxW,EAAMqW,EAASC,EAAS7nB,MAAM,EAAG+nB,GAAS,IAAMF,EAAS7nB,MAAM+nB,OAE9D,CACDxW,EAAMqW,EAASC,EAAWG,GAAO,IAAKD,KAIlD,OAAON,EAAW,IAAMlW,EAAMA,EAW3B,SAASyW,GAAOC,EAAQC,GAC3B,OAAO,IAAI5pB,MAAM4pB,EAAS,GAAGzoB,KAAKwoB,GAc/B,SAASZ,GAAO7Z,GACnB,OAAOuZ,GAAQvZ,KAAW,gBAQvB,SAAS2Z,GAAS3Z,GACrB,cAAcA,IAAU,SAQrB,SAASyZ,GAASzZ,GACrB,cAAcA,IAAU,UAAY9D,OAAO8D,IAAUA,EAQlD,SAAS2a,GAAS3a,GACrB,cAAcA,IAAU,UAAYA,IAAU,KAoB3C,IAAI4a,GAAc,UAIlB,IAAIC,GAAe,WCjMnB,SAASlqB,GAAQyN,EAAO4B,GAC3B,IAAIpP,EAASwN,EAAMxN,OACnB,IAAK,IAAIhD,EAAI,EAAGA,EAAIgD,IAAUhD,EAAG,CAE7B,GAAIwQ,EAAMxQ,KAAOoS,EAAO,CACpB,OAAOpS,GAGf,OAAQ,EAaL,SAASktB,GAAI1c,EAAO/Q,GACvB,IAAIuD,EAASwN,EAAMxN,OACnB,IAAK,IAAIhD,EAAI,EAAGA,EAAIgD,IAAUhD,EAAG,CAC7B,GAAIP,EAAK+Q,EAAMxQ,IAAK,CAChB,OAAO,MAGf,OAAO,MAUJ,SAAS8L,GAAI0E,EAAOxK,GACvB,IAAIhD,EAASwN,EAAMxN,OACnB,IAAImqB,EAAS,IAAIjqB,MAAMF,GACvB,IAAK,IAAIhD,EAAI,EAAGA,EAAIgD,IAAUhD,EAAG,CAC7BmtB,EAAOntB,GAAKgG,EAAGwK,EAAMxQ,GAAIA,GAE7B,OAAOmtB,EASJ,SAASlnB,GAAKuK,EAAOxK,GACxB,IAAIhD,EAASwN,EAAMxN,OACnB,IAAK,IAAIhD,EAAI,EAAGA,EAAIgD,IAAUhD,EAAG,CAC7BgG,EAAGwK,EAAMxQ,GAAIA,IAUd,SAASotB,GAAY5c,EAAOxK,GAC/B,IAAIhG,EAAIwQ,EAAMxN,OACd,MAAOhD,EAAI,EAAG,GACRA,EACFgG,EAAGwK,EAAMxQ,GAAIA,IAYd,SAASqtB,GAAa7c,EAAOxK,GAChC,IAAIhD,EAASwN,EAAMxN,OACnB,IAAK,IAAIhD,EAAI,EAAGA,EAAIgD,IAAUhD,EAAG,CAC7B,IAAKgG,EAAGwK,EAAMxQ,GAAIA,GAAI,CAClB,QAmFL,SAASue,GAAO/N,EAAO8c,GAC1B,IAAIC,EAAQ,MACZ,IAAIhgB,EAAQ,EACZ,OAAS,CACLA,EAAQiD,EAAMzN,QAAQuqB,EAAS/f,GAC/B,GAAIA,KAAW,EAAG,CACd,OAAOggB,MAEN,CACDA,EAAQ,KACR/c,EAAMxJ,OAAOuG,EAAO,KAIzB,SAASigB,GAAYhd,EAAO8c,GAC/B,IAAI/f,EAAQiD,EAAMzN,QAAQuqB,GAC1B,GAAI/f,KAAW,EAAG,CACdiD,EAAMxJ,OAAOuG,EAAO,GACpB,OAAO,SAEN,CACD,OAAO,OA2DR,SAASkgB,GAAQjd,EAAO8c,GAC3B,GAAI9c,EAAMzN,QAAQuqB,MAAc,EAAG,CAC/B9c,EAAMhM,KAAK8oB,IA2DZ,SAASI,GAAKld,GACjB,IAAIxN,EAASwN,EAAMxN,OAEnB,IAAImqB,EAAS,IAAIjqB,MAAMF,GACvB,IAAK,IAAIhD,EAAI,EAAGA,EAAIgD,IAAUhD,EAAG,CAG7BmtB,EAAOntB,GAAKwQ,EAAMxQ,GAEtB,OAAOmtB,EA4BJ,SAASQ,GAAYnd,EAAOjD,EAAO6E,GACtC5B,EAAMxJ,OAAOuG,EAAO,EAAG6E,GAQpB,SAASwb,GAAYpd,EAAOjD,GAC/BiD,EAAMxJ,OAAOuG,EAAO,GAejB,SAASsgB,GAAUrd,EAAOsd,GAC7B,IAAI9qB,EAASwN,EAAMxN,OACnB,IAAK,IAAIhD,EAAI,EAAGA,EAAIgD,IAAUhD,EAAG,CAC7B,GAAI8tB,EAAQtd,EAAMxQ,GAAIA,GAAI,CACtB,OAAOA,GAGf,OAAQ,EASL,SAAS+tB,GAAiBvd,EAAOsd,GACpC,IAAI9tB,EAAIwQ,EAAMxN,OACd,MAAOhD,EAAI,EAAG,GACRA,EACF,GAAI8tB,EAAQtd,EAAMxQ,GAAIA,GAAI,CACtB,OAAOA,GAGf,OAAQ,EAcL,SAASguB,GAAKxd,EAAOsd,GACxB,IAAIvgB,EAAQsgB,GAAUrd,EAAOsd,GAC7B,GAAIvgB,KAAW,EAAG,CACd,OAAOiD,EAAMjD,IAUd,SAAS0gB,GAAYzd,EAAOsd,GAC/B,IAAIvgB,EAAQwgB,GAAiBvd,EAAOsd,GACpC,GAAIvgB,KAAW,EAAG,CACd,OAAOiD,EAAMjD,IAsDd,SAAS2gB,GAAe1d,EAAO2d,GAClC,IAAIC,EAAQ,EACZ,IAAIC,EAAM7d,EAAMxN,OAChB,IAAIuqB,EAAQ,MACZ,MAAOa,EAAQC,EAAK,CAEhB,IAAIC,EAASF,EAAQC,GAAQ,EAC7B,IAAIE,EAAQJ,EAAS3d,EAAM8d,IAE3B,GAAIC,EAAQ,EAAG,CACXH,EAAQE,EAAQ,OAGf,GAAIC,IAAU,EAAG,CAClBhB,EAAQ,KACRa,EAAQE,EAAQ,MAGf,CACDD,EAAMC,GAGd,MAAO,CACHf,MAAOA,EACPhgB,MAAQggB,EAAQa,EAAQ,EAAIA,GAY7B,SAASI,GAAoBhe,EAAO2d,GACvC,IAAIC,EAAQ,EACZ,IAAIC,EAAM7d,EAAMxN,OAChB,IAAIuqB,EAAQ,MACZ,MAAOa,EAAQC,EAAK,CAEhB,IAAIC,EAASF,EAAQC,GAAQ,EAC7B,IAAIE,EAAQJ,EAAS3d,EAAM8d,IAE3B,GAAIC,EAAQ,EAAG,CACXH,EAAQE,EAAQ,OAGf,GAAIC,IAAU,EAAG,CAClBhB,EAAQ,KACRc,EAAMC,MAGL,CACDD,EAAMC,GAGd,MAAO,CACHf,MAAOA,EACPhgB,MAAO6gB,GAGR,SAASK,GAAOje,EAAOke,GAC1B,IAAI1uB,EAAIwQ,EAAMxN,OACd,MAAOhD,EAAI,EAAG,GACRA,EACF,IAAK0uB,EAAKle,EAAMxQ,IAAK,CACjBwQ,EAAMxJ,OAAOhH,EAAG,KCviB5B,IAAI2uB,GAA+B,WAI/B,SAASA,IAILrsB,OAAOssB,eAAe5vB,KAAM,YAAa,CACrC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhBpT,KAAK8vB,UAAY,MAOrBxsB,OAAOssB,eAAeD,EAAc7jB,UAAW,aAAc,CACzD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,OAAOpT,KAAK8vB,aAMpBxsB,OAAOssB,eAAeD,EAAc7jB,UAAW,UAAW,CACtD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAKpT,KAAK8vB,UAAW,CACjB9vB,KAAK8vB,UAAY,KACjB9vB,KAAK+vB,eAIjB,OAAOJ,EA3CM,GAmDjB,IAAIK,GAA0B,WAM1B,SAASA,EAAS3b,GAId/Q,OAAOssB,eAAe5vB,KAAM,YAAa,CACrC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAKhB9P,OAAOssB,eAAe5vB,KAAM,WAAY,CACpC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhBpT,KAAK8vB,UAAY,MACjB9vB,KAAK+vB,SAAW1b,EAOpB/Q,OAAOssB,eAAeI,EAASlkB,UAAW,aAAc,CACpD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,OAAOpT,KAAK8vB,aAMpBxsB,OAAOssB,eAAeI,EAASlkB,UAAW,UAAW,CACjD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAKpT,KAAK8vB,UAAW,CACjB9vB,KAAK8vB,UAAY,KACjB9vB,KAAK+vB,eAIjB,OAAOC,EAvDC,GA+DZ,IAAIC,GAA+B,SAAUC,GACzC1F,GAAUyF,EAAeC,GACzB,SAASD,IACL,IAAIE,EAAQD,IAAW,MAAQA,EAAOnkB,MAAM/L,KAAMgM,YAAchM,KAChEsD,OAAOssB,eAAeO,EAAO,aAAc,CACvCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,KAEX,OAAO+c,EAEX7sB,OAAOssB,eAAeK,EAAcnkB,UAAW,WAAY,CACvD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACHgd,GAAYpwB,KAAKqwB,YAAY,SAAUziB,GACnCA,EAAEyG,gBAId,OAAO4b,EAtBM,CAuBfN,IAOF,IAAIW,GAA+B,SAAUJ,GACzC1F,GAAU8F,EAAeJ,GACzB,SAASI,EAAcC,GACnB,IAAIJ,EAAQD,EAAO/mB,KAAKnJ,OAASA,KACjCsD,OAAOssB,eAAeO,EAAO,aAAc,CACvCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB+c,EAAME,WAAaE,EACnB,OAAOJ,EAEX7sB,OAAOssB,eAAeU,EAAcxkB,UAAW,WAAY,CACvD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACHgd,GAAYpwB,KAAKqwB,YAAY,SAAUziB,GACnCA,EAAEyG,gBAId,OAAOic,EAvBM,CAwBfX,KAWyB,SAAyBO,GAChD1F,GAAUgG,EAAsBN,GAChC,SAASM,IACL,IAAIL,EAAQD,IAAW,MAAQA,EAAOnkB,MAAM/L,KAAMgM,YAAchM,KAIhEsD,OAAOssB,eAAeO,EAAO,YAAa,CACtCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAKhB9P,OAAOssB,eAAeO,EAAO,SAAU,CACnCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB,OAAO+c,EAEX7sB,OAAOssB,eAAeY,EAAqB1kB,UAAW,WAAY,CAC9D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,GAAIpT,KAAKywB,WAAa,KAAM,CACxBzwB,KAAKywB,UAAUpc,UACfrU,KAAKywB,UAAYvY,cAS7B5U,OAAOssB,eAAeY,EAAqB1kB,UAAW,MAAO,CACzD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,OAAOpT,KAAK0wB,UASpBptB,OAAOssB,eAAeY,EAAqB1kB,UAAW,MAAO,CACzD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUA,EAAOud,GACpB,GAAI3wB,KAAKywB,WAAa,KAAM,CACxBzwB,KAAKywB,UAAUpc,UAEnBrU,KAAKywB,UAAYE,EACjB3wB,KAAK0wB,OAAStd,KAMtB9P,OAAOssB,eAAeY,EAAqB1kB,UAAW,QAAS,CAC3D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACHpT,KAAKuT,IAAI2E,UAAWA,cAG5B,OAAOsY,GA7EgB,CA8EzBb,IAMF,IAAIiB,GAAiC,SAAUV,GAC3C1F,GAAUoG,EAAiBV,GAC3B,SAASU,IACL,IAAIT,EAAQD,IAAW,MAAQA,EAAOnkB,MAAM/L,KAAMgM,YAAchM,KAMhEsD,OAAOssB,eAAeO,EAAO,WAAY,CACrCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,IAEX,OAAO+c,EAOX7sB,OAAOssB,eAAegB,EAAgB9kB,UAAW,YAAa,CAC1D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAI+c,EAAQnwB,OAEVA,KAAK6wB,SAEP,OAAO,IAAIb,IAAS,aACdG,EAAMU,SACR,GAAIV,EAAMU,WAAa,EAAG,CACtBV,EAAM9b,iBAKtB,OAAOuc,EAvCQ,CAwCjBZ,ICzSF,IAAIc,GAAiC,WAIjC,SAASA,IACLxtB,OAAOssB,eAAe5vB,KAAM,aAAc,CACtC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAe5vB,KAAM,UAAW,CACnC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAe5vB,KAAM,YAAa,CACrC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAe5vB,KAAM,aAAc,CACtC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAe5vB,KAAM,WAAY,CACpC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAe5vB,KAAM,YAAa,CACrC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhBpT,KAAK+wB,WAAa,GAClB/wB,KAAKgxB,QAAU,GACfhxB,KAAKixB,UAAY,GACjBjxB,KAAKkxB,WAAa,EAClBlxB,KAAKmxB,SAAW,KAChBnxB,KAAK8vB,UAAY,MAOrBxsB,OAAOssB,eAAekB,EAAgBhlB,UAAW,aAAc,CAC3D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,OAAOpT,KAAK8vB,aAMpBxsB,OAAOssB,eAAekB,EAAgBhlB,UAAW,UAAW,CACxD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAKpT,KAAK8vB,UAAW,CACjB9vB,KAAK8vB,UAAY,KACjB,IAAIlvB,EAAIZ,KAAK+wB,WACb/wB,KAAKkxB,WAAa,EAClBlxB,KAAK+wB,WAAa,KAClB/wB,KAAKixB,UAAY,KACjB,IACIb,GAAYxvB,GAAG,SAAUgN,GACrBA,EAAE+iB,SAAStc,aAGnC,QACoBrU,KAAKgxB,QAAU,KACfhxB,KAAKkxB,WAAa,UAUlC5tB,OAAOssB,eAAekB,EAAgBhlB,UAAW,eAAgB,CAC7D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,OAAOpT,KAAK+wB,WAAW/sB,SAAW,KAQ1CV,OAAOssB,eAAekB,EAAgBhlB,UAAW,qBAAsB,CACnE4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUtR,GACb,OAAOsvB,GAAWpxB,KAAK+wB,YAAY,SAAUnjB,GAAK,OAAQA,EAAE9L,OAAS,MAAQ8L,EAAE9L,OAASA,KAAU8L,EAAEyjB,aAO5G/tB,OAAOssB,eAAekB,EAAgBhlB,UAAW,SAAU,CACvD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACHpT,KAAKmxB,SAAW,QAMxB7tB,OAAOssB,eAAekB,EAAgBhlB,UAAW,UAAW,CACxD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACHpT,KAAKmxB,SAAW,SASxB7tB,OAAOssB,eAAekB,EAAgBhlB,UAAW,aAAc,CAC3D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUtR,UACN9B,KAAKixB,UAAUnvB,MAY9BwB,OAAOssB,eAAekB,EAAgBhlB,UAAW,cAAe,CAC5D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUtR,EAAMgsB,GACnB,GAAIA,SAAgB,EAAG,CAAEA,EAASV,SAClCptB,KAAKixB,UAAUnvB,GAAQgsB,KAU/BxqB,OAAOssB,eAAekB,EAAgBhlB,UAAW,kBAAmB,CAChE4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUke,GACb,GAAItxB,KAAKkxB,aAAe,EAAG,CACvB,IAAI3iB,EAAQvO,KAAK+wB,WAAWhtB,QAAQutB,GACpC,GAAI/iB,KAAW,EAAG,CACd,MAAM,IAAI9J,MAAM,4CAEpBzE,KAAK+wB,WAAW/oB,OAAOuG,EAAO,OAE7B,CACDvO,KAAKgxB,QAAQxrB,KAAK8rB,OAY9BhuB,OAAOssB,eAAekB,EAAgBhlB,UAAW,0BAA2B,CACxE4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUme,EAAMzvB,EAAMgU,EAAU0b,GACnC,GAAIxxB,KAAK8vB,UAAW,CAChB,MAAM,IAAIrrB,MAAM,+BAEpBzE,KAAKyxB,eAAc,SAAUC,GACzB,GAAIA,EAAKH,OAASA,GACdG,EAAK5vB,OAASA,IACbgU,IAAaoC,WAAawZ,EAAK5b,WAAaA,IAC7C4b,EAAKF,UAAYA,EAAS,CAC1BE,EAAKf,SAAStc,iBAW9B/Q,OAAOssB,eAAekB,EAAgBhlB,UAAW,YAAa,CAC1D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUtR,GACb,GAAI9B,KAAK8vB,UAAW,CAChB,MAAM,IAAIrrB,MAAM,+BAGpB,OAAOzE,KAAKmxB,UAAYnxB,KAAK+wB,WAAW/sB,OAAS,GAAKhE,KAAK2xB,mBAAmB7vB,IAAS9B,KAAKixB,UAAUnvB,KAAUoW,aAQxH5U,OAAOssB,eAAekB,EAAgBhlB,UAAW,aAAc,CAC3D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUtR,GACb,GAAI9B,KAAK8vB,UAAW,CAChB,MAAM,IAAIrrB,MAAM,+BAEpBzE,KAAKyxB,eAAc,SAAUC,GACzB,GAAIA,EAAK5vB,OAASA,EAAM,CACpB4vB,EAAKf,SAAStc,iBAa9B/Q,OAAOssB,eAAekB,EAAgBhlB,UAAW,MAAO,CACpD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUtR,EAAMgU,EAAU0b,GAC7B,IAAIjjB,EAAQqjB,GAAiB5xB,KAAK+wB,YAAY,SAAUW,GACpD,OAAOA,EAAKH,OAAS,MACjBG,EAAK5vB,OAASA,IACbgU,IAAaoC,WAAawZ,EAAK5b,WAAaA,IAC7C4b,EAAKF,UAAYA,KAEzB,OAAOjjB,KAAW,KAS1BjL,OAAOssB,eAAekB,EAAgBhlB,UAAW,kBAAmB,CAChE4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUtR,GACb,GAAI9B,KAAK8vB,UAAW,CAChB,MAAM,IAAIrrB,MAAM,+BAEpB,IAAIyd,EAAQliB,KAAKixB,UAAUnvB,GAC3B,IAAK+vB,GAAe3P,GAAQ,CACxB,OAAOliB,KAAKmxB,aAEX,CACD,GAAIjP,GAAS,EAAG,QACLliB,KAAKixB,UAAUnvB,OAErB,GACC9B,KAAKixB,UAAUnvB,GAErB,OAAO,UAYnBwB,OAAOssB,eAAekB,EAAgBhlB,UAAW,gBAAiB,CAC9D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUpM,GACb,IAAImpB,EAAQnwB,OACVA,KAAKkxB,WACP,IACId,GAAYpwB,KAAK+wB,WAAY/pB,GAE7C,UACkBhH,KAAKkxB,WAEP,GAAIlxB,KAAKkxB,aAAe,GAAKlxB,KAAKgxB,QAAQhtB,SAAW,EAAG,CAEpDosB,GAAYpwB,KAAKgxB,SAAS,SAAUK,GAChClB,EAAM2B,gBAAgBT,MAE1BrxB,KAAKgxB,QAAQhtB,OAAS,OAYtCV,OAAOssB,eAAekB,EAAgBhlB,UAAW,WAAY,CACzD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUtR,EAAMiwB,GACnB,GAAI/xB,KAAKgyB,gBAAgBlwB,GAAO,CAG5B9B,KAAKyxB,eAAc,SAAUH,GACzB,IAAKA,EAASD,SAAWC,EAASxvB,OAAS,MAAQwvB,EAASxvB,OAASA,GAAO,CACxEwvB,EAASW,SAASnwB,EAAMiwB,WA0C5CzuB,OAAOssB,eAAekB,EAAgBhlB,UAAW,MAAO,CACpD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUme,EAAMzvB,EAAMgU,EAAU0b,EAASU,EAAaD,GACzD,IAAI9B,EAAQnwB,KACZ,GAAIA,KAAK8vB,UAAW,CAChB,MAAM,IAAIrrB,MAAM,+BAEpBzE,KAAKmyB,wBAAwBZ,EAAMzvB,EAAMgU,EAAU0b,GACnD,IAAIE,EAAO,CACP5vB,KAAMA,EACNgU,SAAUA,EACV0b,QAASA,EACTU,YAAaA,EACbD,SAAUA,EACVZ,OAAQ,MACRE,KAAMA,EACNZ,SAAU,IAAIX,IAAS,WACnB0B,EAAKL,OAAS,KACdlB,EAAM2B,gBAAgBJ,OAG9B1xB,KAAK+wB,WAAWvrB,KAAKksB,GACrB,OAAOA,KAWfpuB,OAAOssB,eAAekB,EAAgBhlB,UAAW,QAAS,CACtD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU0C,EAAU0b,EAASU,GAChC,GAAIA,SAAqB,EAAG,CAAEA,EAAc,KAC5C,OAAOlyB,KAAKoyB,IAAI,MAAO,KAAMtc,EAAU0b,EAASU,GAAa,SAAUG,EAAON,GAAS,OAAOjc,EAAS3M,KAAKqoB,EAASO,MAAWpB,YA0BxIrtB,OAAOssB,eAAekB,EAAgBhlB,UAAW,KAAM,CACnD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUtR,EAAMgU,EAAU0b,EAASU,GACtC,GAAIA,SAAqB,EAAG,CAAEA,EAAc,KAC5C,OAAOlyB,KAAKoyB,IAAI,MAAOtwB,EAAMgU,EAAU0b,EAASU,GAAa,SAAUG,EAAON,GAAS,OAAOjc,EAAS3M,KAAKqoB,EAASO,MAAWpB,YA4BxIrtB,OAAOssB,eAAekB,EAAgBhlB,UAAW,OAAQ,CACrD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUtR,EAAMgU,EAAU0b,EAASU,GACtC,GAAIA,SAAqB,EAAG,CAAEA,EAAc,KAC5C,IAAItkB,EAAI5N,KAAKoyB,IAAI,KAAMtwB,EAAMgU,EAAU0b,EAASU,GAAa,SAAUG,EAAON,GAC1EnkB,EAAE+iB,SAAStc,UACXyB,EAAS3M,KAAKqoB,EAASO,MAG3B,OAAOnkB,EAAE+iB,YAUjBrtB,OAAOssB,eAAekB,EAAgBhlB,UAAW,MAAO,CACpD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUtR,EAAMgU,EAAU0b,GAC7BxxB,KAAKmyB,wBAAwB,MAAOrwB,EAAMgU,EAAU0b,MAU5DluB,OAAOssB,eAAekB,EAAgBhlB,UAAW,WAAY,CACzD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUkf,GACb,IAAInC,EAAQnwB,KACZ,GAAIA,KAAK8vB,UAAW,CAChB,MAAM,IAAIrrB,MAAM,+BAEpB,GAAI6tB,IAAWtyB,KAAM,CACjB,MAAM,IAAIyE,MAAM,oDAEpB,IAAI8rB,EAAY,GAChBH,GAAYkC,EAAOvB,YAAY,SAAUnjB,GAErC,IAAKA,EAAEyjB,QAAUzjB,EAAEskB,YAAa,CAC5B,GAAItkB,EAAE9L,OAAS,KAAM,CACjByuB,EAAU/qB,KAAK2qB,EAAMoC,MAAM3kB,EAAEkI,SAAUlI,EAAE4jB,eAExC,GAAI5jB,EAAE2jB,KAAM,CACbhB,EAAU/qB,KAAK2qB,EAAMoB,KAAK3jB,EAAE9L,KAAM8L,EAAEkI,SAAUlI,EAAE4jB,cAE/C,CACDjB,EAAU/qB,KAAK2qB,EAAMhtB,GAAGyK,EAAE9L,KAAM8L,EAAEkI,SAAUlI,EAAE4jB,eAI1D,OAAO,IAAIlB,GAAcC,MAGjC,OAAOO,EApjBQ,IA6jBW,SAAyBZ,GACnD1F,GAAUgI,EAAyBtC,GAMnC,SAASsC,EAAwB7mB,GAC7B,IAAIwkB,EAAQD,EAAO/mB,KAAKnJ,OAASA,KAIjCsD,OAAOssB,eAAeO,EAAO,SAAU,CACnCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB+c,EAAMxkB,OAASA,EACf,OAAOwkB,EASX7sB,OAAOssB,eAAe4C,EAAwB1mB,UAAW,WAAY,CACjE4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUkf,GACb,IAAInC,EAAQnwB,KACZ,GAAIA,KAAK8vB,UAAW,CAChB,MAAM,IAAIrrB,MAAM,+BAEpB,GAAI6tB,IAAWtyB,KAAM,CACjB,MAAM,IAAIyE,MAAM,oDAEpB,IAAI8rB,EAAY,GAChBH,GAAYkC,EAAOvB,YAAY,SAAUnjB,GAErC,GAAIA,EAAE4jB,UAAYc,EAAO3mB,OAAQ,CAC7B,OAGJ,IAAKiC,EAAEyjB,QAAUzjB,EAAEskB,YAAa,CAC5B,GAAItkB,EAAE9L,OAAS,KAAM,CACjByuB,EAAU/qB,KAAK2qB,EAAMoC,MAAM3kB,EAAEkI,SAAUlI,EAAE4jB,eAExC,GAAI5jB,EAAE2jB,KAAM,CACbhB,EAAU/qB,KAAK2qB,EAAMoB,KAAK3jB,EAAE9L,KAAM8L,EAAEkI,SAAUlI,EAAE4jB,cAE/C,CACDjB,EAAU/qB,KAAK2qB,EAAMhtB,GAAGyK,EAAE9L,KAAM8L,EAAEkI,SAAUlI,EAAE4jB,eAI1D,OAAO,IAAIlB,GAAcC,MAGjC,OAAOiC,GA9DmB,CA+D5B1B,ICroBF,SAAS2B,GAAYlkB,EAAOmkB,GACxB,KAAMnkB,GAAS,GAAKA,EAAQmkB,GAAM,CAC9B,MAAM,IAAIjuB,MAAM,wBAA0B8J,IAMlD,IAAIokB,GAAsB,WAMtB,SAASA,EAAKC,GACV,GAAIA,SAAiB,EAAG,CAAEA,EAAU,GAIpCtvB,OAAOssB,eAAe5vB,KAAM,UAAW,CACnC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAe5vB,KAAM,SAAU,CAClC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,IAAI0d,KAEf9wB,KAAK6yB,QAAUD,EAEnBtvB,OAAOssB,eAAe+C,EAAK7mB,UAAW,SAAU,CAU5CwH,IAAK,WACD,OAAOtT,KAAK6yB,SAEhBnd,WAAY,MACZC,aAAc,OAQlBrS,OAAOssB,eAAe+C,EAAK7mB,UAAW,WAAY,CAC9C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUA,GACb,OAAOpT,KAAK6yB,QAAQ9uB,QAAQqP,MAAY,KAQhD9P,OAAOssB,eAAe+C,EAAK7mB,UAAW,cAAe,CACjD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUA,GACb,IAAIpS,EAAI,EACR,IAAIgD,EAAShE,KAAK6yB,QAAQ7uB,OAC1B,MAAOhD,EAAIgD,EAAQ,CAEf,GAAIhE,KAAK6yB,QAAQ7xB,KAAOoS,EAAO,CAC3BpT,KAAK4uB,YAAY5tB,KACfgD,MAED,GACChD,OAWlBsC,OAAOssB,eAAe+C,EAAK7mB,UAAW,UAAW,CAC7C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUA,GACb,OAAO0f,GAAe9yB,KAAK6yB,QAASzf,MAG5C9P,OAAOssB,eAAe+C,EAAK7mB,UAAW,SAAU,CAO5CwH,IAAK,WACD,OAAOtT,KAAK6yB,QAAQ7uB,QAExB0R,WAAY,MACZC,aAAc,OAQlBrS,OAAOssB,eAAe+C,EAAK7mB,UAAW,WAAY,CAC9C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU7E,GACb,OAAOA,GAAS,GAAKA,EAAQvO,KAAK6yB,QAAQ7uB,UASlDV,OAAOssB,eAAe+C,EAAK7mB,UAAW,WAAY,CAC9C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU7E,GACb,OAAOvO,KAAK6yB,QAAQtkB,MAG5BjL,OAAOssB,eAAe+C,EAAK7mB,UAAW,UAAW,CAC7C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU8C,GACb,GAAIlW,KAAK+yB,OAAOC,UAAU,QAAS,CAC/BhzB,KAAK+yB,OAAOd,SAAS,OAAQ,CACzBnwB,KAAM,OACN6J,OAAQ3L,KACRkW,SAAUA,QAK1B5S,OAAOssB,eAAe+C,EAAK7mB,UAAW,iBAAkB,CACpD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU7E,EAAO2H,GACpB,GAAIlW,KAAK+yB,OAAOC,UAAU,eAAgB,CACtChzB,KAAK+yB,OAAOd,SAAS,cAAe,CAChCnwB,KAAM,cACN6J,OAAQ3L,KACRuO,MAAOA,EACP2H,SAAUA,QAK1B5S,OAAOssB,eAAe+C,EAAK7mB,UAAW,cAAe,CACjD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU7E,EAAO+G,EAAUY,GAC9B,GAAIlW,KAAK+yB,OAAOC,UAAU,YAAa,CACnChzB,KAAK+yB,OAAOd,SAAS,WAAY,CAC7BnwB,KAAM,WACN6J,OAAQ3L,KACRuO,MAAOA,EACP+G,SAAUA,EACVY,SAAUA,QAK1B5S,OAAOssB,eAAe+C,EAAK7mB,UAAW,iBAAkB,CACpD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU7E,EAAO+G,GACpB,GAAItV,KAAK+yB,OAAOC,UAAU,eAAgB,CACtChzB,KAAK+yB,OAAOd,SAAS,cAAe,CAChCnwB,KAAM,cACN6J,OAAQ3L,KACRuO,MAAOA,EACP+G,SAAUA,QAK1BhS,OAAOssB,eAAe+C,EAAK7mB,UAAW,eAAgB,CAClD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU6f,EAAUC,EAAU9f,GACjC,GAAIpT,KAAK+yB,OAAOC,UAAU,aAAc,CACpChzB,KAAK+yB,OAAOd,SAAS,YAAa,CAC9BnwB,KAAM,YACN6J,OAAQ3L,KACRizB,SAAUA,EACVC,SAAUA,EACV9f,MAAOA,QAKvB9P,OAAOssB,eAAe+C,EAAK7mB,UAAW,WAAY,CAC9C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU+f,GACb,GAAInzB,KAAK+yB,OAAOC,UAAU,SAAU,CAChChzB,KAAK+yB,OAAOd,SAAS,QAAS,CAC1BnwB,KAAM,QACN6J,OAAQ3L,KACRmzB,UAAWA,QAc3B7vB,OAAOssB,eAAe+C,EAAK7mB,UAAW,WAAY,CAC9C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU7E,EAAO6E,GACpBqf,GAAYlkB,EAAOvO,KAAK6yB,QAAQ7uB,QAChC,IAAIsR,EAAWtV,KAAK6yB,QAAQtkB,GAE5B,GAAI+G,IAAalC,EAAO,CACpBpT,KAAK6yB,QAAQtkB,GAAS6E,EACtBpT,KAAKozB,YAAY7kB,EAAO+G,EAAUlC,GAEtC,OAAOkC,KAUfhS,OAAOssB,eAAe+C,EAAK7mB,UAAW,cAAe,CACjD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU7E,EAAO6E,GACpBqf,GAAYlkB,EAAOvO,KAAK6yB,QAAQ7uB,OAAS,GACzCqvB,GAAmBrzB,KAAK6yB,QAAStkB,EAAO6E,GACxCpT,KAAKszB,eAAe/kB,EAAO6E,GAC3B,OAAOA,KASf9P,OAAOssB,eAAe+C,EAAK7mB,UAAW,OAAQ,CAC1C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUxS,EAAGE,GAChB,IAAI4xB,EAAM1yB,KAAK6yB,QAAQ7uB,OACvByuB,GAAY7xB,EAAG8xB,GACfD,GAAY3xB,EAAG4xB,GACf,GAAI9xB,IAAME,EAAG,CACT,IAAIyyB,EAAUvzB,KAAK6yB,QAAQjyB,GAC3B,IAAI4yB,EAAUxzB,KAAK6yB,QAAQ/xB,GAC3Bd,KAAK6yB,QAAQjyB,GAAK4yB,EAClBxzB,KAAKozB,YAAYxyB,EAAG2yB,EAASC,GAC7BxzB,KAAK6yB,QAAQ/xB,GAAKyyB,EAClBvzB,KAAKozB,YAAYtyB,EAAG0yB,EAASD,OAUzCjwB,OAAOssB,eAAe+C,EAAK7mB,UAAW,cAAe,CACjD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU7E,GACbkkB,GAAYlkB,EAAOvO,KAAK6yB,QAAQ7uB,QAChC,IAAIsR,EAAWtV,KAAK6yB,QAAQtkB,GAC5BklB,GAAmBzzB,KAAK6yB,QAAStkB,GACjCvO,KAAK0zB,eAAenlB,EAAO+G,GAC3B,OAAOA,KAYfhS,OAAOssB,eAAe+C,EAAK7mB,UAAW,YAAa,CAC/C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUA,EAAOugB,GAEpB,IAAIplB,EAAQvO,KAAK+D,QAAQqP,GAEzB,GAAI7E,KAAW,EAAG,CACdklB,GAAmBzzB,KAAK6yB,QAAStkB,GACjC,GAAIolB,GAAW,KAAM,CACjB,IAAIC,EAAY5zB,KAAK6yB,QAAQ7uB,OAC7BhE,KAAK6yB,QAAQrtB,KAAK4N,GAClBpT,KAAK6zB,aAAatlB,EAAOqlB,EAAWxgB,OAEnC,CACDigB,GAAmBrzB,KAAK6yB,QAASc,EAASvgB,GAC1CpT,KAAK6zB,aAAatlB,EAAOolB,EAASvgB,SAGrC,GAAIugB,GAAW,KAAM,CACtB3zB,KAAK6yB,QAAQrtB,KAAK4N,GAClBpT,KAAK8zB,QAAQ1gB,OAEZ,CACDigB,GAAmBrzB,KAAK6yB,QAASc,EAASvgB,GAC1CpT,KAAKszB,eAAeK,EAASvgB,GAEjC,OAAOA,KAQf9P,OAAOssB,eAAe+C,EAAK7mB,UAAW,OAAQ,CAC1C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUA,GACbpT,KAAK6yB,QAAQrtB,KAAK4N,GAClBpT,KAAK8zB,QAAQ1gB,GACb,OAAOA,KAQf9P,OAAOssB,eAAe+C,EAAK7mB,UAAW,UAAW,CAC7C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUA,GACbpT,KAAK2uB,YAAY,EAAGvb,GACpB,OAAOA,KAQf9P,OAAOssB,eAAe+C,EAAK7mB,UAAW,UAAW,CAC7C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUnB,GACb,IAAIke,EAAQnwB,KACZowB,GAAYne,GAAQ,SAAUmB,GAC1B+c,EAAM3qB,KAAK4N,SASvB9P,OAAOssB,eAAe+C,EAAK7mB,UAAW,WAAY,CAC9C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUkf,GACbtyB,KAAK+zB,QAAQzB,EAAOO,YAQ5BvvB,OAAOssB,eAAe+C,EAAK7mB,UAAW,MAAO,CACzC4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAI7E,EAAQvO,KAAK6yB,QAAQ7uB,OAAS,EAClC,OAAOuK,EAAQ,EAAI2J,UAAYlY,KAAK4uB,YAAY5uB,KAAK6yB,QAAQ7uB,OAAS,MAQ9EV,OAAOssB,eAAe+C,EAAK7mB,UAAW,QAAS,CAC3C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,OAAOpT,KAAK6yB,QAAQ7uB,OAAShE,KAAK4uB,YAAY,GAAK1W,aAU3D5U,OAAOssB,eAAe+C,EAAK7mB,UAAW,SAAU,CAC5C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU4gB,GACb,IAAI7D,EAAQnwB,KACZ,IAAIi0B,EAAMj0B,KAAK6yB,QACf7yB,KAAK6yB,QAAU,GACf7yB,KAAKk0B,SAASD,GACd7D,GAAY4D,GAAU,SAAU5gB,GAC5B+c,EAAM0C,QAAQrtB,KAAK4N,GACnB+c,EAAM2D,QAAQ1gB,SAO1B9P,OAAOssB,eAAe+C,EAAK7mB,UAAW,QAAS,CAC3C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACHpT,KAAKm0B,OAAO,OAMpB7wB,OAAOssB,eAAe+C,EAAK7mB,UAAWmgB,OAAOC,SAAU,CACnDxW,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAIpP,EAAQhD,EACZ,OAAOyqB,GAAYzrB,MAAM,SAAU+Q,GAC/B,OAAQA,EAAG2a,OACP,KAAK,EACD1nB,EAAShE,KAAK6yB,QAAQ7uB,OACtBhD,EAAI,EACJ+P,EAAG2a,MAAQ,EACf,KAAK,EACD,KAAM1qB,EAAIgD,GAAS,MAAO,CAAC,EAAa,GACxC,MAAO,CAAC,EAAahE,KAAK6yB,QAAQ7xB,IACtC,KAAK,EACD+P,EAAG4a,OACH5a,EAAG2a,MAAQ,EACf,KAAK,IACC1qB,EACF,MAAO,CAAC,EAAa,GACzB,KAAK,EAAG,MAAO,CAAC,UAWhCsC,OAAOssB,eAAe+C,EAAK7mB,UAAW,OAAQ,CAC1C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUlT,GACbkwB,GAAYpwB,KAAK6yB,QAAS3yB,MASlCoD,OAAOssB,eAAe+C,EAAK7mB,UAAW,cAAe,CACjD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUlT,GACbk0B,GAAmBp0B,KAAK6yB,QAAS3yB,MAGzC,OAAOyyB,EA3gBH,GAkhBR,IAAI0B,GAAiC,SAAUnE,GAC3C1F,GAAU6J,EAAiBnE,GAC3B,SAASmE,IACL,IAAIlE,EAAQD,IAAW,MAAQA,EAAOnkB,MAAM/L,KAAMgM,YAAchM,KAMhEsD,OAAOssB,eAAeO,EAAO,cAAe,CACxCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,OAEX9P,OAAOssB,eAAeO,EAAO,YAAa,CACtCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,QAEX,OAAO+c,EAEX7sB,OAAOssB,eAAeyE,EAAgBvoB,UAAW,cAAe,CAC5D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU7E,EAAO+G,EAAUY,GAC9B,GAAIlW,KAAKs0B,YAAa,CAClBhf,EAASjB,UAEb6b,EAAOpkB,UAAUsnB,YAAYjqB,KAAKnJ,KAAMuO,EAAO+G,EAAUY,MAGjE5S,OAAOssB,eAAeyE,EAAgBvoB,UAAW,iBAAkB,CAC/D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU7E,EAAO+G,GACpB,GAAItV,KAAKs0B,YAAa,CAClBhf,EAASjB,UAEb6b,EAAOpkB,UAAU4nB,eAAevqB,KAAKnJ,KAAMuO,EAAO+G,MAG1DhS,OAAOssB,eAAeyE,EAAgBvoB,UAAW,WAAY,CACzD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU+f,GACb,GAAInzB,KAAKs0B,YAAa,CAClBlE,GAAY+C,GAAW,SAAUvlB,GAC7BA,EAAEyG,aAGV6b,EAAOpkB,UAAUooB,SAAS/qB,KAAKnJ,KAAMmzB,MAG7C7vB,OAAOssB,eAAeyE,EAAgBvoB,UAAW,aAAc,CAC3D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,OAAOpT,KAAK8vB,aAGpBxsB,OAAOssB,eAAeyE,EAAgBvoB,UAAW,UAAW,CACxD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAKpT,KAAK8vB,UAAW,CACjB9vB,KAAK8vB,UAAY,KACjB,GAAI9vB,KAAKs0B,YAAa,CAClBlE,GAAYpwB,KAAK6yB,SAAS,SAAUjlB,GAChCA,EAAEyG,kBAMtB,OAAOggB,EAjFQ,CAkFjB1B,IAQF,IAAI4B,GAA8B,SAAUrE,GACxC1F,GAAU+J,EAAcrE,GACxB,SAASqE,EAAajQ,EAAUkQ,GAC5B,IAAIrE,EAAQD,EAAO/mB,KAAKnJ,OAASA,KACjCsD,OAAOssB,eAAeO,EAAO,WAAY,CACrCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAeO,EAAO,OAAQ,CACjCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB+c,EAAM7L,SAAWA,EACjB6L,EAAMqE,KAAOA,EACb,OAAOrE,EAEX,OAAOoE,EApBK,CAqBdF,IC3oBF,IAAII,GAA0B,SAAUvE,GACpC1F,GAAUiK,EAAUvE,GACpB,SAASuE,EAASC,GACd,IAAIvE,EAAQD,EAAO/mB,KAAKnJ,OAASA,KACjCsD,OAAOssB,eAAeO,EAAO,YAAa,CACtCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,QAEX9P,OAAOssB,eAAeO,EAAO,aAAc,CACvCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAeO,EAAO,UAAW,CACpCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB+c,EAAMwE,WAAaD,EACnBvE,EAAMyE,QAAUzE,EAAM4C,OAAOR,OAAM,SAAUsC,GACzC,GAAIA,EAAO/yB,OAAS,QAAS,CACzBsuB,GAAYyE,EAAO1B,WAAW,SAAUvlB,GACpCuiB,EAAM2E,WAAWlnB,WAGpB,GAAIinB,EAAO/yB,OAAS,OAAQ,CAC7BquB,EAAM4E,YAAYF,EAAO3e,eAExB,GAAI2e,EAAO/yB,OAAS,WAAY,CACjCquB,EAAM2E,WAAWD,EAAOvf,UACxB6a,EAAM4E,YAAYF,EAAO3e,SAAU2e,EAAOtmB,YAEzC,GAAIsmB,EAAO/yB,OAAS,cAAe,CACpCquB,EAAM4E,YAAYF,EAAO3e,SAAU2e,EAAOtmB,YAEzC,GAAIsmB,EAAO/yB,OAAS,cAAe,CACpCquB,EAAM2E,WAAWD,EAAOvf,eAEvB,GAAIuf,EAAO/yB,OAAS,YAAa,CAClCquB,EAAM2E,WAAWD,EAAOzhB,OACxB+c,EAAM4E,YAAYF,EAAOzhB,MAAOyhB,EAAO3B,cAEtC,CACD,MAAM,IAAIzuB,MAAM,+BAGxB,OAAO0rB,EAEX7sB,OAAOssB,eAAe6E,EAAS3oB,UAAW,cAAe,CACrD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU4hB,EAAOzmB,GACpBymB,EAAMC,WAAWj1B,KAAK20B,WAAY,MAClC,IAAIO,EAAkBl1B,KAAK20B,WAAWQ,iBACtC,GAAI5mB,IAAU2J,UAAW,CACrBgd,EAAgBE,SAASJ,EAAMK,cAE9B,CACDH,EAAgBI,WAAWN,EAAMK,SAAU9mB,OAIvDjL,OAAOssB,eAAe6E,EAAS3oB,UAAW,aAAc,CACpD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU4hB,GACbh1B,KAAK20B,WAAWQ,iBAAiBI,YAAYP,EAAMK,UACnDr1B,KAAK20B,WAAWa,kBAChBx1B,KAAK20B,WAAWc,eAMxBnyB,OAAOssB,eAAe6E,EAAS3oB,UAAW,aAAc,CACpD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,OAAOpT,KAAK8vB,aAMpBxsB,OAAOssB,eAAe6E,EAAS3oB,UAAW,UAAW,CACjD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAKpT,KAAK8vB,UAAW,CACjB9vB,KAAK8vB,UAAY,KACjB9vB,KAAK40B,QAAQvgB,UACb+b,GAAYpwB,KAAKiS,QAAQ,SAAU+iB,GAC/BA,EAAM3gB,iBAKtB,OAAOogB,EAzGC,CA0GV9B,IC/FF,IAAI+C,GAAyB,WAMzB,SAASA,EAAQC,GAIbryB,OAAOssB,eAAe5vB,KAAM,SAAU,CAClC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhBpT,KAAK0wB,OAASiF,EAElBryB,OAAOssB,eAAe8F,EAAQ5pB,UAAW,QAAS,CAmC9CwH,IAAK,WACD,OAAOtT,KAAK0wB,OAAS,KAEzBhb,WAAY,MACZC,aAAc,OAElBrS,OAAOssB,eAAe8F,EAAQ5pB,UAAW,UAAW,CAMhDwH,IAAK,WACD,OAAOtT,KAAK0wB,QAEhBhb,WAAY,MACZC,aAAc,OAElBrS,OAAOssB,eAAe8F,EAAQ5pB,UAAW,WAAY,CACjD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,MAAO,GAAKpT,KAAK0wB,OAAS,OAGlCptB,OAAOssB,eAAe8F,EAAQ5pB,UAAW,cAAe,CACpD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU7H,EAAKwY,GAClB,OAAOxY,EAAOvL,KAAKoT,OAAS2Q,EAAMxY,MAG1CjI,OAAOssB,eAAe8F,EAAS,YAAa,CACxChgB,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUuiB,EAASpqB,EAAKwY,GAC3B,GAAI4R,aAAmBD,EAAS,CAC5B,OAAOC,MAEN,CACD,GAAIpqB,IAAQwY,EAAK,CACb,OAAO,IAAI2R,EAAQ,OAElB,CACD,OAAO,IAAIA,EAAQpqB,KAAKC,IAAID,KAAKyY,KAAK4R,EAAUpqB,IAAQ,GAAKwY,EAAMxY,IAAO,GAAI,GAAK,UAKnG,OAAOmqB,EAzGA,GAyHJ,SAASC,GAAQviB,GACpB,OAAO,IAAIsiB,GAAQtiB,GAKPuiB,GAAQ,GAIjB,IAAIC,GAAOD,GAAQ,KAInB,IAAIE,GAAMF,GAAQ,ICzJlB,SAAS3wB,GAAKqW,GACjB,OAAO/X,OAAO0B,KAAKqW,GAUhB,SAASya,GAAYza,EAAQkU,GAChC,OAAOvqB,GAAKqW,GAAQ0a,KAAKxG,GAEtB,SAASb,GAAKrT,GACjB,OAAO/X,OAAOoO,OAAO,GAAI2J,GAEtB,SAASpU,GAAKoU,EAAQnb,GACzB8E,GAAKqW,GAAQxO,SAAQ,SAAUmH,GAC3B9T,EAAE8T,EAAKqH,EAAOrH,OAYf,SAASqa,GAAahT,EAAQrU,GACjC,IAAK,IAAIgN,KAAOqH,EAAQ,CACpB,GAAI2a,GAAO3a,EAAQrH,GAAM,CACrB,IAAKhN,EAAGgN,EAAKqH,EAAOrH,IAAO,CACvB,SAyBT,SAASgiB,GAAO3a,EAAQrH,GAC3B,MAAO,GAAGoF,eAAejQ,KAAKkS,EAAQrH,GC3BnC,SAASiiB,GAAc5T,GAC1B,GAAIA,EAAG6T,WAAY,CACf7T,EAAG6T,WAAWX,YAAYlT,IAY3B,SAAS8T,GAAiBC,EAAKt0B,EAAMwvB,EAAU+E,GAGlDD,EAAID,iBAAiBr0B,EAAMwvB,EAAU+E,GAAW,OAChD,OAAO,IAAIrG,IAAS,WAChBoG,EAAIE,oBAAoBx0B,EAAMwvB,EAAU+E,GAAW,UASpD,SAASE,GAAOjF,GAEnB,OAAO6E,GAAiB/1B,OAAQ,UAAU,SAAUge,GAChDkT,OAMD,SAASkF,GAASC,GACrB,OAAQA,GACJ,IAAK,cAED,OAAOr2B,OAAOgZ,eAAe,cACjC,IAAK,gBACD,OAAOhZ,OAAOgZ,eAAe,gBACjC,IAAK,cACD,OAAOhZ,OAAOgZ,eAAe,cACjC,IAAK,cACD,OAAOhZ,OAAOgZ,eAAe,cACjC,IAAK,iBACD,OAAOhZ,OAAOgZ,eAAe,iBAErC,OAAO,MAKJ,SAASsd,GAAa3E,GACzB,IAAI7vB,EAAK6vB,EAAM4E,WAAa,EAE5B,OAAOz0B,EAOJ,SAAS00B,KACZ,GAAIt2B,SAASu2B,eAAiBv2B,SAASu2B,eAAiBv2B,SAASua,KAAM,CACnE,GAAIva,SAASu2B,cAAcD,KAAM,CAC7Bt2B,SAASu2B,cAAcD,WAEtB,CACD,IAAIj0B,EAAQrC,SAASw2B,cAAc,UACnCn0B,EAAMsM,MAAM+K,SAAW,QACvBrX,EAAMsM,MAAM8nB,IAAM,MAClBp0B,EAAMsM,MAAM+nB,KAAO,WACnB12B,SAASua,KAAKoc,YAAYt0B,GAC1BA,EAAMu0B,QACNv0B,EAAMi0B,OACNt2B,SAASua,KAAK0a,YAAY5yB,KAS/B,SAASu0B,GAAM7U,GAClB,GAAIA,EAAI,CACJA,EAAG6U,SAMJ,SAASC,GAAiBnjB,GAC7B,GAAIwiB,GAAS,iBAAkB,CAC3B,OAAOxiB,OAEN,GAAIwiB,GAAS,eAAgB,CAC9B,OAAQxiB,GACJ,IAAK,cAAe,MAAO,aAC3B,IAAK,aAAc,MAAO,WAC1B,IAAK,cAAe,MAAO,aAC3B,IAAK,cAAe,MAAO,YAC3B,IAAK,YAAa,MAAO,WACzB,IAAK,QAAS,MAAO,QACrB,IAAK,WAAY,MAAO,iBAG3B,GAAIwiB,GAAS,eAAgB,CAC9B,OAAQxiB,GACJ,IAAK,cAAe,MAAO,YAC3B,IAAK,aAAc,MAAO,WAC1B,IAAK,cAAe,MAAO,YAC3B,IAAK,cAAe,MAAO,YAC3B,IAAK,YAAa,MAAO,UACzB,IAAK,QAAS,MAAO,QACrB,IAAK,WAAY,MAAO,YAGhC,OAAOA,EAQJ,SAASojB,GAAa/Y,GACzB,UAAWgZ,QAAU,aAAehZ,aAAcgZ,MAAO,CACrD,OAAO,UAEN,UAAWC,eAAiB,aAAejZ,aAAciZ,cAAgBjZ,EAAGkZ,aAAe,KAAM,CAClG,OAAQlZ,EAAGkZ,aACP,IAAK,QACL,IAAK,MACL,KAAK,EACD,OAAO,KACX,IAAK,QACL,KAAK,EACD,OAAO,MACX,QACI,QAASlZ,aAAcmZ,kBAG9B,GAAInZ,EAAGvc,MAAQ,KAAM,CACtB,GAAIuc,EAAGvc,KAAK21B,MAAM,UAAW,CACzB,OAAO,OAGf,OAAO,KAOJ,SAASC,GAAStB,EAAKuB,EAAUvkB,GACpCgjB,EAAInnB,MAAM0oB,GAAYvkB,EAEnB,SAASwkB,GAASxB,EAAKuB,GAC1B,OAAOvB,EAAInnB,MAAM0oB,GASd,SAASE,GAASj3B,EAAGE,GACxB,IAAI0I,EAAS1I,EACb,MAAO,KAAM,CACT,GAAIF,IAAM4I,EAAQ,CACd,OAAO,UAEN,GAAIA,EAAO0sB,aAAe,KAAM,CAEjC,GAAI1sB,EAAOsuB,MAAQ,KAAM,CACrB,OAAO,UAEN,CACDtuB,EAASA,EAAOsuB,UAGnB,CACDtuB,EAASA,EAAO0sB,aAWrB,SAAS6B,GAAahG,EAAOpmB,GAChC,OAAOomB,EAAMpmB,QAAUksB,GAASlsB,EAAOqsB,KAAK5B,IAAKrE,EAAMpmB,QAQpD,SAASssB,GAAetsB,EAAQusB,GACnC,GAAIA,EAAa,CACbvsB,EAAOsD,MAAMkpB,cAAgB,WAE5B,CACDxsB,EAAOsD,MAAMkpB,cAAgB,QAgCrC,IAAIC,GAIJ,SAASC,GAAiB/J,EAASve,EAAMuoB,GACrC,GAAIA,SAAe,EAAG,CAAEA,EAAQ,GAEhC,IAAI14B,EAAIU,SAASw2B,cAAc,SAC/Bl3B,EAAEkC,KAAO,WACT,GAAIw2B,GAAS,GAAI,CACb14B,EAAE24B,aAAa,QAASD,GAE5B14B,EAAE44B,YAAczoB,EAChB,GAAIue,IAAY,KAAM,CAClBhuB,SAASm4B,KAAKxB,YAAYr3B,OAEzB,CACD0uB,EAAQ2I,YAAYr3B,GAExB,OAAOA,EASX,SAAS84B,GAAcpK,EAASgK,GAC5B,GAAIA,SAAe,EAAG,CAAEA,EAAQ,GAChC,GAAIhK,IAAY,KAAM,CAClB,GAAI8J,IAAkB,KAAM,CAExB,IAAIx4B,EAAIU,SAASw2B,cAAc,SAC/Bl3B,EAAEkC,KAAO,WACT,GAAIw2B,GAAS,GAAI,CACb14B,EAAE24B,aAAa,QAASD,GAE5Bh4B,SAASm4B,KAAKxB,YAAYr3B,GAC1Bw4B,GAAiBx4B,EAAE+4B,MAEvB,OAAOP,OAEN,CAED,IAAIx4B,EAAIU,SAASw2B,cAAc,SAC/Bl3B,EAAEkC,KAAO,WACT,GAAIw2B,GAAS,GAAI,CACb14B,EAAE24B,aAAa,QAASD,GAE5BhK,EAAQ2I,YAAYr3B,GACpB,OAAOA,EAAE+4B,OAWjB,SAASC,GAAiBZ,EAAMa,GAC5B,IAAItqB,EAAQypB,EAAKc,SAAS90B,OAC1Bg0B,EAAKe,WAAWF,EAAW,KAAMtqB,GACjC,OAAOypB,EAAKc,SAASvqB,IAOT,SAAyB2hB,GACrC1F,GAAUwO,EAAW9I,GAOrB,SAAS8I,EAAU1K,EAASuK,EAAUI,EAAQX,GAC1C,GAAIA,SAAe,EAAG,CAAEA,EAAQ,GAChC,IAAInI,EAAQD,EAAO/mB,KAAKnJ,OAASA,KACjCsD,OAAOssB,eAAeO,EAAO,QAAS,CAClCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAKhB9P,OAAOssB,eAAeO,EAAO,QAAS,CAClCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB+c,EAAM+I,MAAQR,GAAcpK,EAASgK,GACrC,IACInI,EAAMgJ,MAAQP,GAAiBzI,EAAM+I,MAAOL,GAC5CO,GAAaH,GAAQ,SAAUjlB,EAAKZ,GAChC+c,EAAMuH,SAAS1jB,EAAKZ,MAG5B,MAAOimB,GAEHlJ,EAAMgJ,MAAQ,IAAIG,aAEtB,OAAOnJ,EAEX7sB,OAAOssB,eAAeoJ,EAAUltB,UAAW,WAAY,CAInDwH,IAAK,WACD,OAAOtT,KAAKm5B,MAAMI,cAStBhmB,IAAK,SAAUslB,GACX74B,KAAKm5B,MAAMI,aAAeV,GAE9BnjB,WAAY,MACZC,aAAc,OAGlBrS,OAAOssB,eAAeoJ,EAAUltB,UAAW,WAAY,CACnD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WAEH,IAAI7E,EAAQukB,GAAe9yB,KAAKk5B,MAAMJ,SAAU94B,KAAKm5B,OACrD,GAAI5qB,KAAW,EAAG,CACd,MAAM,IAAI9J,MAAM,mCAEf,CAEDzE,KAAKk5B,MAAMM,WAAWjrB,OAUlCjL,OAAOssB,eAAeoJ,EAAUltB,UAAW,uBAAwB,CAC/D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUrL,EAAMqL,GACnB,IAAInE,EAAQjP,KAAKm5B,MAAMlqB,MACvBA,EAAMwqB,YAAY,WAAa1xB,EAAMqL,EAAO,IAC5CnE,EAAMwqB,YAAY,QAAU1xB,EAAMqL,EAAO,IACzCnE,EAAMwqB,YAAY,OAAS1xB,EAAMqL,EAAO,IACxCnE,EAAMwqB,YAAY,MAAQ1xB,EAAMqL,EAAO,IACvCnE,EAAMwqB,YAAY1xB,EAAMqL,EAAO,OASvC9P,OAAOssB,eAAeoJ,EAAUltB,UAAW,WAAY,CACnD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUrL,EAAMqL,GACnB,GAAIrL,IAAS,aAAc,CACvB/H,KAAK05B,qBAAqB3xB,EAAMqL,OAE/B,CACDpT,KAAKm5B,MAAMlqB,MAAMwqB,YAAY1xB,EAAMqL,EAAO,QAItD,OAAO4lB,GAlHK,CAmHdrJ,KAOe,SAAyBO,GACtC1F,GAAUmP,EAAYzJ,GAMtB,SAASyJ,EAAWrL,EAASve,EAAMuoB,GAC/B,GAAIA,SAAe,EAAG,CAAEA,EAAQ,GAChC,IAAInI,EAAQD,EAAO/mB,KAAKnJ,OAASA,KACjCsD,OAAOssB,eAAeO,EAAO,WAAY,CACrCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB+c,EAAMyJ,SAAWvB,GAAiB/J,EAASve,EAAMuoB,GACjD,OAAOnI,EAEX7sB,OAAOssB,eAAe+J,EAAW7tB,UAAW,WAAY,CACpD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,GAAIpT,KAAK45B,SAAS1D,WAAY,CAC1Bl2B,KAAK45B,SAAS1D,WAAWX,YAAYv1B,KAAK45B,cAItD,OAAOD,GA7BM,CA8BfhK,IAwGK,SAASkK,KACZ,MAAO,SAASp5B,KAAKq5B,UAAUC,SAAW,eAAgBz5B,SAEvD,SAAS05B,KACZ,OAAOH,KAAQ,EAAI3hB,UAEhB,SAAS+hB,GAAgBtE,EAASuE,GACrC,GAAIrI,GAAe8D,GAAU,CACzB,OAAOA,OAEN,GAAIA,GAAW,MAAQ9D,GAAe8D,EAAQviB,QAAUye,GAAeqI,GAAO,CAC/E,OAAOA,EAAOvE,EAAQviB,UAErB,CACD,OAAO,GA+BR,SAAS+mB,GAAU/mB,EAAOsf,EAAK0H,GAClC,GAAI1H,SAAa,EAAG,CAAEA,EAAM,EAC5B,GAAI0H,SAAc,EAAG,CAAEA,EAAO,IAC9B,UAAWhnB,IAAU,SAAU,CAC3BA,EAAQA,EAAM1R,WAElB,OAAOgxB,EAAMtf,EAAMpP,OAASE,MAAMwuB,EAAMtf,EAAMpP,OAAS,GAAGqB,KAAK+0B,GAAQhnB,EAAQA,EAE5E,SAASinB,GAAStqB,GACrB,OAAOA,EAAKlK,QAAQ,SAAU,IAE3B,SAASy0B,GAAUvqB,GACtB,OAAOA,EAAKlK,QAAQ,SAAU,IAE3B,SAASP,GAAKyK,GACjB,OAAOsqB,GAASC,GAAUvqB,IASvB,SAASwqB,GAAUtnB,GAEtB,UAAWA,IAAW,YAAa,CAC/B,MAAO,SAGXA,EAASA,EAAO5L,cAAcxB,QAAQ,cAAe,IAErDoN,EAASA,EAAOpN,QAAQ,aAAc,IAEtCoN,EAASA,EAAO3N,OAEhB,IAAIk1B,EAAQvnB,EAAOwkB,MAAM,6BACzB,GAAI+C,EAAO,CACP,OAAOA,EAAM,GAGjB,GAAIvnB,IAAW,SAAU,CACrB,MAAO,SAEX,GAAIA,IAAW,OAAQ,CACnB,MAAO,OAEX,GAAIA,IAAW,WAAY,CACvB,MAAO,WAGX,GAAIA,EAAOwkB,MAAM,QAAS,CACtB,MAAO,SAGX,GAAIxkB,EAAOwkB,MAAM,sBAAuB,CACpC,MAAO,OAGX,MAAO,SAUJ,SAASgD,GAAYxnB,GACxB,OAAOA,EAAOpN,QAAQ,6BAA8B,IAQjD,SAAS60B,GAAU3qB,GACtB,OAAOA,EAAOA,EAAKlK,QAAQ,WAAY,IAAMkK,EAiB1C,SAAS4qB,GAAcvnB,GAC1B,OAAOA,EAAMvN,QAAQ,2BAA4B,QAgB9C,SAAS+0B,GAAWC,EAAMC,GAI7B,IAAI1L,EAAQ,IAAI1pB,KAAKm1B,EAAKE,cAAe,EAAG,GAC5C,IAAIC,EAAQH,EAAKI,UAAY7L,EAAM6L,WAAe7L,EAAM8L,oBAAsBL,EAAKK,qBAAuB,GAAK,IAC/G,IAAIC,EAAS,IAAO,GAAK,GAAK,GAC9B,OAAO7vB,KAAK+D,MAAM2rB,EAAOG,GAUtB,SAASC,GAAQP,EAAMQ,GAE1B,IAAI91B,EAAI,IAAIG,KAAKA,KAAK41B,IAAIT,EAAKE,cAAeF,EAAKU,WAAYV,EAAKW,YACpE,IAAIC,EAAMl2B,EAAEm2B,aAAe,EAC3Bn2B,EAAEo2B,WAAWp2B,EAAEq2B,aAAe,EAAIH,GAClC,IAAII,EAAW,IAAIn2B,KAAKA,KAAK41B,IAAI/1B,EAAEu2B,iBAAkB,EAAG,IACxD,OAAOxwB,KAAKywB,OAAQx2B,EAAE01B,UAAYY,EAASZ,WAAa,MAAY,GAAK,GAStE,SAASe,GAAanB,EAAMC,GAE/B,IAAImB,EAAYb,GAAQ,IAAI11B,KAAKm1B,EAAKE,cAAeF,EAAKU,WAAY,IACtE,IAAIW,EAAcd,GAAQP,GAC1B,GAAIqB,GAAe,EAAG,CAClBA,EAAc,GAElB,OAAOA,EAAcD,EAAY,EAW9B,SAASE,GAAeC,EAAMC,EAAMC,EAASxB,GAChD,GAAIwB,SAAiB,EAAG,CAAEA,EAAU,EACpC,GAAIxB,SAAa,EAAG,CAAEA,EAAM,MAC5B,IAAID,EAAO,IAAIn1B,KAAK22B,EAAM,EAAG,EAAG,EAAG,EAAG,EAAG,GACzC,GAAIvB,EAAK,CACLD,EAAK0B,eAAeF,GAExB,IAAIZ,EAAMW,EAAO,EAAIE,IAAYzB,EAAK2B,UAAY,GAAK,GACvD,OAAOf,EAQJ,SAASgB,GAAWC,EAAOC,GAC9B,GAAID,EAAQ,GAAI,CACZA,GAAS,QAER,GAAIA,IAAU,EAAG,CAClBA,EAAQ,GAEZ,OAAOC,GAAQ,KAAOD,GAASC,EAAO,GAAKD,EAWxC,SAASE,GAAY/B,EAAMgC,EAAMC,EAAShC,GAC7C,GAAI+B,SAAc,EAAG,CAAEA,EAAO,MAC9B,GAAIC,SAAiB,EAAG,CAAEA,EAAU,MACpC,GAAIhC,SAAa,EAAG,CAAEA,EAAM,MAC5B,GAAIA,EAAK,CACL,OAAO+B,EAAO,6BAA+B,MAEjD,IAAIE,EAAOlC,EAAKmC,eAAe,OAC/B,IAAIC,EAAMpC,EAAKmC,eAAe,MAAO,CAAEE,aAAcL,EAAO,OAAS,UAAWruB,OAAOuuB,EAAK/4B,QAE5F,GAAI84B,IAAY,MAAO,CACnBG,EAAMA,EAAIp3B,QAAQ,uCAAwC,KAE9D,OAAOo3B,EAEJ,SAAS/B,GAAkBiC,GAC9B,IAAItC,EAAO,IAAIn1B,KAAKA,KAAK41B,IAAI,KAAM,EAAG,EAAG,EAAG,EAAG,EAAG,IAClD,IAAI8B,EAAU,IAAI13B,KAAKm1B,EAAKmC,eAAe,QAAS,CAAEK,SAAU,SAChE,IAAIC,EAAS,IAAI53B,KAAKm1B,EAAKmC,eAAe,QAAS,CAAEK,SAAUF,KAC/D,OAAQG,EAAOrC,UAAYmC,EAAQnC,WAAa,KAAO,EA0BpD,SAASsC,GAASla,GACrB,IAAI9hB,EAAG6B,EAAGtC,EACV,IAAID,EAAIwiB,EAAMxiB,EACd,IAAIZ,EAAIojB,EAAMpjB,EACd,IAAI8C,EAAIsgB,EAAMtgB,EACd,GAAI9C,GAAK,EAAG,CACRsB,EAAI6B,EAAItC,EAAIiC,MAEX,CACD,IAAIy6B,EAAU,SAASA,EAAQx6B,EAAGy6B,EAAG59B,GACjC,GAAIA,EAAI,EAAG,CACPA,GAAK,EAET,GAAIA,EAAI,EAAG,CACPA,GAAK,EAET,GAAIA,EAAI,EAAI,EAAG,CACX,OAAOmD,GAAKy6B,EAAIz6B,GAAK,EAAInD,EAE7B,GAAIA,EAAI,EAAI,EAAG,CACX,OAAO49B,EAEX,GAAI59B,EAAI,EAAI,EAAG,CACX,OAAOmD,GAAKy6B,EAAIz6B,IAAM,EAAI,EAAInD,GAAK,EAEvC,OAAOmD,GAEX,IAAIy6B,EAAI16B,EAAI,GAAMA,GAAK,EAAI9C,GAAK8C,EAAI9C,EAAI8C,EAAI9C,EAC5C,IAAI+C,EAAI,EAAID,EAAI06B,EAChBl8B,EAAIi8B,EAAQx6B,EAAGy6B,EAAG58B,EAAI,EAAI,GAC1BuC,EAAIo6B,EAAQx6B,EAAGy6B,EAAG58B,GAClBC,EAAI08B,EAAQx6B,EAAGy6B,EAAG58B,EAAI,EAAI,GAE9B,MAAO,CACHU,EAAG+J,KAAKoyB,MAAMn8B,EAAI,KAClB6B,EAAGkI,KAAKoyB,MAAMt6B,EAAI,KAClBtC,EAAGwK,KAAKoyB,MAAM58B,EAAI,MAkBnB,SAAS68B,GAASta,GACrB,IAAI9hB,EAAI8hB,EAAM9hB,EAAI,IAClB,IAAI6B,EAAIigB,EAAMjgB,EAAI,IAClB,IAAItC,EAAIuiB,EAAMviB,EAAI,IAClB,IAAIijB,EAAMzY,KAAKyY,IAAIxiB,EAAG6B,EAAGtC,GACzB,IAAIyK,EAAMD,KAAKC,IAAIhK,EAAG6B,EAAGtC,GACzB,IAAID,EAAI,EACR,IAAIZ,EAAI,EACR,IAAI8C,GAAKghB,EAAMxY,GAAO,EACtB,GAAIwY,IAAQxY,EAAK,CACb1K,EAAIZ,EAAI,MAEP,CACD,IAAIsF,EAAIwe,EAAMxY,EACdtL,EAAI8C,EAAI,GAAMwC,GAAK,EAAIwe,EAAMxY,GAAOhG,GAAKwe,EAAMxY,GAC/C,OAAQwY,GACJ,KAAKxiB,EACDV,GAAKuC,EAAItC,GAAKyE,GAAKnC,EAAItC,EAAI,EAAI,GAC/B,MACJ,KAAKsC,EACDvC,GAAKC,EAAIS,GAAKgE,EAAI,EAClB,MACJ,KAAKzE,EACDD,GAAKU,EAAI6B,GAAKmC,EAAI,EAClB,MAER1E,GAAK,EAET,MAAO,CACHA,EAAGA,EACHZ,EAAGA,EACH8C,EAAGA,GAWJ,SAAS66B,GAAQC,EAAKlI,GACzB,GAAIkI,EAAK,CACL,MAAO,CACHt8B,EAAG+J,KAAKyY,IAAI,EAAGzY,KAAKC,IAAI,IAAKsyB,EAAIt8B,EAAIu8B,GAAiBD,EAAIt8B,EAAGo0B,KAC7DvyB,EAAGkI,KAAKyY,IAAI,EAAGzY,KAAKC,IAAI,IAAKsyB,EAAIz6B,EAAI06B,GAAiBD,EAAIz6B,EAAGuyB,KAC7D70B,EAAGwK,KAAKyY,IAAI,EAAGzY,KAAKC,IAAI,IAAKsyB,EAAI/8B,EAAIg9B,GAAiBD,EAAI/8B,EAAG60B,KAC7D/0B,EAAGi9B,EAAIj9B,OAGV,CAED,OAAOi9B,GAYR,SAASC,GAAiB1qB,EAAOuiB,GACpC,IAAIgH,EAAOhH,EAAU,EAAI,IAAMviB,EAAQA,EACvC,OAAO9H,KAAKoyB,MAAMf,EAAOhH,GAUtB,SAASoI,GAASF,EAAKlI,GAC1B,GAAIkI,EAAK,CACL,IAAIlB,EAAOrxB,KAAKC,IAAID,KAAKyY,IAAI8Z,EAAIt8B,EAAGs8B,EAAIz6B,EAAGy6B,EAAI/8B,GAAI,KAEnD,IAAIsB,EAAO07B,GAAiBnB,EAAMhH,GAClC,MAAO,CACHp0B,EAAG+J,KAAKyY,IAAI,EAAGzY,KAAKC,IAAI,IAAKD,KAAKoyB,MAAMG,EAAIt8B,EAAIa,KAChDgB,EAAGkI,KAAKyY,IAAI,EAAGzY,KAAKC,IAAI,IAAKD,KAAKoyB,MAAMG,EAAIz6B,EAAIhB,KAChDtB,EAAGwK,KAAKyY,IAAI,EAAGzY,KAAKC,IAAI,IAAKD,KAAKoyB,MAAMG,EAAI/8B,EAAIsB,KAChDxB,EAAGi9B,EAAIj9B,OAGV,CAED,OAAOi9B,GAyBR,SAASG,GAAQ3a,GACpB,OAASA,EAAM9hB,EAAI,IAAQ8hB,EAAMjgB,EAAI,IAAQigB,EAAMviB,EAAI,KAAQ,KAAQ,IAcpE,SAASm9B,GAASJ,EAAKK,GAC1B,GAAIL,IAAQ3lB,WAAagmB,GAAc,EAAG,CACtC,OAAOL,EAEX,IAAIM,EAAMR,GAASE,GACnBM,EAAIl+B,EAAIi+B,EACR,OAAOX,GAASY,GAEb,SAASC,GAAiB/a,EAAOgb,EAAkBC,GACtD,GAAID,SAA0B,EAAG,CAAEA,EAAmB,CAAE98B,EAAG,IAAK6B,EAAG,IAAKtC,EAAG,KAC3E,GAAIw9B,SAAyB,EAAG,CAAEA,EAAkB,CAAE/8B,EAAG,IAAK6B,EAAG,IAAKtC,EAAG,KACzE,IAAIy9B,EAAQF,EACZ,IAAIG,EAAOF,EACX,GAAIN,GAAQM,GAAkB,CAC1BC,EAAQD,EACRE,EAAOH,EAEX,OAAOL,GAAQ3a,GAASmb,EAAOD,EA6B5B,SAASE,GAAUC,EAAOC,GAC7B,IAAKD,EAAO,CACRA,EAAQ,GAEZ,OAAOnS,GAAcA,GAAc,GAAIF,GAAOqS,GAAQ,OAAQrS,GAAOsS,GAAQ,OAAO76B,QAAO,SAAUsP,EAAO7E,EAAOpO,GAC/G,OAAOA,EAAK4D,QAAQqP,KAAW7E,KCrmCvC,SAASqwB,GAAW/Q,GAEhB,GAAIA,EAAO,KAAO,IAAK,CACnBA,EAASA,EAAOrf,OAAO,GAE3B,GAAIqf,EAAO7pB,QAAU,EAAG,CACpB6pB,EAASA,EAAO,GAAGD,OAAO,GAAKC,EAAO,GAAGD,OAAO,GAAKC,EAAO,GAAGD,OAAO,GAE1E,OAAO5kB,SAAS6kB,EAAQ,IAKrB,SAASgR,GAASxb,GACrBA,EAAQA,EAAMxd,QAAQ,OAAQ,IAE9B,IAAIipB,EAAUzL,EAAMoU,MAAM,uCAE1B,GAAI3I,EAAS,CACTA,EAAQtpB,KAAK,SAEZ,CACDspB,EAAUzL,EAAMoU,MAAM,kDACtB,IAAK3I,EAAS,CACV,OAAO,GAGf,IAAIgQ,EAAM,GACV,IAAK,IAAI99B,EAAI,EAAGA,GAAK,EAAGA,IAAK,CACzB,IAAI6T,EAAM7L,SAAS8lB,EAAQ9tB,IAAIU,SAAS,IACxC,GAAImT,EAAI7Q,QAAU,EAAG,CACjB6Q,EAAM,IAAMA,EAEhBiqB,GAAOjqB,EAEX,OAAO+pB,GAAWE,GAgBf,SAASzb,GAAM1gB,GAClB,OAAOo8B,GAAMC,QAAQr8B,GASzB,IAAIo8B,GAAuB,WACvB,SAASA,EAAMD,GACXx7B,OAAOssB,eAAe5vB,KAAM,OAAQ,CAChC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhBpT,KAAKi/B,KAAOH,EAAM,EAEtBx7B,OAAOssB,eAAemP,EAAMjzB,UAAW,MAAO,CAI1CwH,IAAK,WACD,OAAOtT,KAAKi/B,MAEhBvpB,WAAY,MACZC,aAAc,OAElBrS,OAAOssB,eAAemP,EAAMjzB,UAAW,IAAK,CAKxCwH,IAAK,WACD,OAAOtT,KAAKi/B,OAAS,IAEzBvpB,WAAY,MACZC,aAAc,OAElBrS,OAAOssB,eAAemP,EAAMjzB,UAAW,IAAK,CAKxCwH,IAAK,WACD,OAAQtT,KAAKi/B,MAAQ,EAAK,KAE9BvpB,WAAY,MACZC,aAAc,OAElBrS,OAAOssB,eAAemP,EAAMjzB,UAAW,IAAK,CAKxCwH,IAAK,WACD,OAAOtT,KAAKi/B,KAAO,KAEvBvpB,WAAY,MACZC,aAAc,OAQlBrS,OAAOssB,eAAemP,EAAMjzB,UAAW,QAAS,CAC5C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU8rB,GACb,GAAIA,SAAe,EAAG,CAAEA,EAAQ,EAChC,MAAO,QAAUl/B,KAAKuB,EAAI,KAAOvB,KAAKoD,EAAI,KAAOpD,KAAKc,EAAI,KAAOo+B,EAAQ,OAQjF57B,OAAOssB,eAAemP,EAAMjzB,UAAW,WAAY,CAC/C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,MAAO,IAAM+rB,GAAiBn/B,KAAKuB,EAAEG,SAAS,IAAK,GAAKy9B,GAAiBn/B,KAAKoD,EAAE1B,SAAS,IAAK,GAAKy9B,GAAiBn/B,KAAKc,EAAEY,SAAS,IAAK,MAQjJ4B,OAAOssB,eAAemP,EAAMjzB,UAAW,QAAS,CAC5C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU8rB,GACb,GAAIA,SAAe,EAAG,CAAEA,EAAQ,EAChC,OAAOE,GAAgB,CACnB79B,EAAGvB,KAAKuB,EACR6B,EAAGpD,KAAKoD,EACRtC,EAAGd,KAAKc,EACRF,EAAGs+B,OAYf57B,OAAOssB,eAAemP,EAAO,UAAW,CACpCrpB,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUvS,EAAGZ,EAAG8C,GACnB,IAAI86B,EAAMwB,GAAgB,CACtBx+B,EAAGA,EACHZ,EAAGA,EACH8C,EAAGA,IAEP,OAAO/C,KAAKs/B,QAAQzB,EAAIt8B,EAAGs8B,EAAIz6B,EAAGy6B,EAAI/8B,MAG9CwC,OAAOssB,eAAemP,EAAMjzB,UAAW,WAAY,CAC/C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,OAAOpT,KAAKu/B,cAgBpBj8B,OAAOssB,eAAemP,EAAO,UAAW,CACpCrpB,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU0rB,GACb,OAAO,IAAIC,EAAMD,MAWzBx7B,OAAOssB,eAAemP,EAAO,UAAW,CACpCrpB,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU7R,EAAG6B,EAAGtC,GACnB,OAAO,IAAIi+B,GAAOj+B,EAAI,IAAMsC,GAAK,IAAM7B,GAAK,QAgBpD+B,OAAOssB,eAAemP,EAAO,aAAc,CACvCrpB,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUnT,GACb,OAAO,IAAI8+B,EAAMH,GAAW3+B,OAgBpCqD,OAAOssB,eAAemP,EAAO,UAAW,CACpCrpB,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUnT,GACb,OAAO,IAAI8+B,EAAMF,GAAS5+B,OAWlCqD,OAAOssB,eAAemP,EAAO,UAAW,CACpCrpB,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUnT,GACb,GAAIu/B,GAAev/B,GAAI,CACnB,GAAIA,EAAE,IAAM,IAAK,CACb,OAAO8+B,EAAMU,WAAWx/B,QAEvB,GAAIA,EAAEuO,OAAO,EAAG,IAAM,MAAO,CAC9B,OAAOuwB,EAAMW,QAAQz/B,SAGxB,GAAI4xB,GAAe5xB,GAAI,CACxB,OAAO8+B,EAAMY,QAAQ1/B,QAEpB,GAAIA,aAAa8+B,EAAO,CACzB,OAAOA,EAAMY,QAAQ1/B,EAAE6+B,KAE3B,MAAM,IAAIr6B,MAAM,yBAA2BxE,MAanDqD,OAAOssB,eAAemP,EAAO,cAAe,CACxCrpB,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUiQ,EAAOgb,EAAkBC,GACtC,IAAIT,EAAM+B,GAAwB,CAAEr+B,EAAG8hB,EAAM9hB,EAAG6B,EAAGigB,EAAMjgB,EAAGtC,EAAGuiB,EAAMviB,GAAKu9B,EAAmB,CAAE98B,EAAG88B,EAAiB98B,EAAG6B,EAAGi7B,EAAiBj7B,EAAGtC,EAAGu9B,EAAiBv9B,GAAMoX,UAAWomB,EAAkB,CAAE/8B,EAAG+8B,EAAgB/8B,EAAG6B,EAAGk7B,EAAgBl7B,EAAGtC,EAAGw9B,EAAgBx9B,GAAMoX,WAC3Q,OAAOlY,KAAKs/B,QAAQzB,EAAIt8B,EAAGs8B,EAAIz6B,EAAGy6B,EAAI/8B,MAa9CwC,OAAOssB,eAAemP,EAAO,cAAe,CACxCrpB,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU4nB,EAAMvlB,EAAM+W,EAAIqT,GAC7B,GAAIA,SAAc,EAAG,CAAEA,EAAO,MAC9B,GAAIA,GAAQ,MAAO,CACf,IAAIC,EAAUrqB,EAAKsqB,QACnB,IAAIA,EAAQvT,EAAGuT,QACf,OAAOhB,EAAMe,QAAQE,GAAMhF,EAAM8E,EAAQj/B,EAAGk/B,EAAMl/B,GAAIm/B,GAAMhF,EAAM8E,EAAQ7/B,EAAG8/B,EAAM9/B,GAAI+/B,GAAMhF,EAAM8E,EAAQ/8B,EAAGg9B,EAAMh9B,QAEnH,CACD,OAAOg8B,EAAMO,QAAQU,GAAMhF,EAAMvlB,EAAKlU,EAAGirB,EAAGjrB,GAAIy+B,GAAMhF,EAAMvlB,EAAKrS,EAAGopB,EAAGppB,GAAI48B,GAAMhF,EAAMvlB,EAAK3U,EAAG0rB,EAAG1rB,QAa9GwC,OAAOssB,eAAemP,EAAO,UAAW,CACpCrpB,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUiQ,EAAOsS,GACpB,IAAIkI,EAAMoC,GAAe,CAAE1+B,EAAG8hB,EAAM9hB,EAAG6B,EAAGigB,EAAMjgB,EAAGtC,EAAGuiB,EAAMviB,GAAK60B,GACjE,OAAOoJ,EAAMO,QAAQzB,EAAIt8B,EAAGs8B,EAAIz6B,EAAGy6B,EAAI/8B,MAY/CwC,OAAOssB,eAAemP,EAAO,WAAY,CACrCrpB,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUiQ,EAAOsS,GACpB,IAAIkI,EAAMqC,GAAgB,CAAE3+B,EAAG8hB,EAAM9hB,EAAG6B,EAAGigB,EAAMjgB,EAAGtC,EAAGuiB,EAAMviB,GAAK60B,GAClE,OAAOoJ,EAAMO,QAAQzB,EAAIt8B,EAAGs8B,EAAIz6B,EAAGy6B,EAAI/8B,MAY/CwC,OAAOssB,eAAemP,EAAO,WAAY,CACrCrpB,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUiQ,EAAOsS,GACpB,IAAIkI,EAAMsC,GAAgB,CAAE5+B,EAAG8hB,EAAM9hB,EAAG6B,EAAGigB,EAAMjgB,EAAGtC,EAAGuiB,EAAMviB,GAAK60B,GAClE,OAAOoJ,EAAMO,QAAQzB,EAAIt8B,EAAGs8B,EAAIz6B,EAAGy6B,EAAI/8B,MAG/C,OAAOi+B,EAjVF,GC3DF,SAASqB,GAAkBC,GAC9B,OAAO1V,GAAU3qB,UAAW,OAAQ,GAAG,WACnC,IAAIsgC,EACJ,OAAO7U,GAAYzrB,MAAM,SAAU+Q,GAC/B,OAAQA,EAAG2a,OACP,KAAK,EACD,KAAM2U,IAAenoB,WAAY,MAAO,CAAC,EAAa,GACtDooB,EAAa,GACblH,GAAaiH,GAAY,SAAUp+B,EAAGs+B,GAClCD,EAAW96B,KAAK+6B,EAAUC,kBAE9B,MAAO,CAAC,EAAatV,QAAQuV,IAAIH,IACrC,KAAK,EACDvvB,EAAG4a,OACH5a,EAAG2a,MAAQ,EACf,KAAK,EAAG,MAAO,CAAC,UAmBzB,SAASsU,GAAMhF,EAAMvlB,EAAM+W,GAC9B,OAAO/W,EAAQulB,GAAQxO,EAAK/W,GAKzB,SAASirB,GAAmB1F,EAAMvlB,EAAM+W,GAC3C,GAAIwO,GAAQ,EAAG,CACX,OAAOxO,MAEN,CACD,OAAO/W,GAMR,SAASkrB,GAAmB3F,EAAMvlB,EAAM+W,GAC3C,OAAO,IAAIkJ,GAAQsK,GAAMhF,EAAMvlB,EAAKkgB,QAASnJ,EAAGmJ,UAK7C,SAASiL,GAAiB5F,EAAMvlB,EAAM+W,GACzC,OAAOuS,GAAM8B,YAAY7F,EAAMvlB,EAAM+W,GAKlC,SAASsU,GAAerrB,EAAM+W,GACjC,UAAW/W,IAAS,iBAAmB+W,IAAO,SAAU,CACpD,OAAOwT,GAEX,GAAIvqB,aAAgBigB,IAAWlJ,aAAckJ,GAAS,CAClD,OAAOiL,GAEX,GAAIlrB,aAAgBspB,IAASvS,aAAcuS,GAAO,CAC9C,OAAO6B,GAEX,OAAOF,IAKS,WAChB,SAASK,EAAcC,EAAQC,GAC3B39B,OAAOssB,eAAe5vB,KAAM,UAAW,CACnC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAe5vB,KAAM,YAAa,CACrC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAe5vB,KAAM,mBAAoB,CAC5C0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,OAEX9P,OAAOssB,eAAe5vB,KAAM,gBAAiB,CACzC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,OAEX9P,OAAOssB,eAAe5vB,KAAM,WAAY,CACpC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,IAEX9P,OAAOssB,eAAe5vB,KAAM,QAAS,CACjC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,IAEX9P,OAAOssB,eAAe5vB,KAAM,MAAO,CAC/B0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,IAEX9P,OAAOssB,eAAe5vB,KAAM,SAAU,CAClC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,IAAI0d,KAEfxtB,OAAOssB,eAAe5vB,KAAM,SAAU,CAClC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhBpT,KAAKkhC,QAAUF,EACfhhC,KAAKmhC,UAAYF,EAErB39B,OAAOssB,eAAemR,EAAcj1B,UAAW,aAAc,CACzD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAItR,EAAO,UACX,GAAI9B,KAAK+yB,OAAOC,UAAUlxB,GAAO,CAC7B9B,KAAK+yB,OAAOd,SAASnwB,EAAM,CAAEA,KAAMA,EAAM6J,OAAQ3L,WAI7DsD,OAAOssB,eAAemR,EAAcj1B,UAAW,gBAAiB,CAC5D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUguB,GACb,GAAIphC,KAAKqhC,mBAAqB,KAAM,CAChC,GAAIrhC,KAAKshC,gBAAkB,KAAM,CAC7BthC,KAAKshC,cAAgBF,EACrB,OAAO,SAEN,CACD,IAAIpG,GAAQoG,EAAcphC,KAAKshC,eAAiBthC,KAAKqhC,iBACrD,GAAIrG,GAAQ,EAAG,CACXh7B,KAAKqhC,iBAAmB,KACxBrhC,KAAKshC,cAAgB,KACrBthC,KAAKuhC,MAAQvhC,KAAKwhC,IAClBxhC,KAAKyhC,SAAWzhC,KAAKwhC,IACrBxhC,KAAKkhC,QAAQzL,YACbz1B,KAAK0hC,aACL,IAAI5/B,EAAO,QACX,GAAI9B,KAAK+yB,OAAOC,UAAUlxB,GAAO,CAC7B9B,KAAK+yB,OAAOd,SAASnwB,EAAM,CAAEA,KAAMA,EAAM6J,OAAQ3L,OAErD,OAAO,UAEN,CACDA,KAAKyhC,SAAWzB,GAAMhF,EAAMh7B,KAAKuhC,MAAOvhC,KAAKwhC,KAC7CxhC,KAAKkhC,QAAQzL,YACb,IAAI3zB,EAAO,WACX,GAAI9B,KAAK+yB,OAAOC,UAAUlxB,GAAO,CAC7B9B,KAAK+yB,OAAOd,SAASnwB,EAAM,CAAEA,KAAMA,EAAM6J,OAAQ3L,KAAM2hC,SAAU3G,IAErE,OAAO,WAId,CACD,OAAO,UAInB13B,OAAOssB,eAAemR,EAAcj1B,UAAW,QAAS,CACpD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACHpT,KAAKuhC,MAAQvhC,KAAKyhC,SAClB,GAAIzhC,KAAKqhC,mBAAqB,KAAM,CAChCrhC,KAAKkhC,QAAQhI,MAAM0I,cAAc5hC,MACjC,IAAI8B,EAAO,UACX,GAAI9B,KAAK+yB,OAAOC,UAAUlxB,GAAO,CAC7B9B,KAAK+yB,OAAOd,SAASnwB,EAAM,CAAEA,KAAMA,EAAM6J,OAAQ3L,YAGpD,CACDA,KAAKshC,cAAgB,KAEzBthC,KAAKqhC,iBAAmB/1B,KAAK8B,IAAIpN,KAAKwhC,IAAMxhC,KAAKuhC,OAASvhC,KAAKmhC,aAGvE79B,OAAOssB,eAAemR,EAAcj1B,UAAW,WAAY,CACvDwH,IAAK,WACD,OAAOtT,KAAKmhC,WAEhB5tB,IAAK,SAAUH,GACX,GAAIpT,KAAKmhC,YAAc/tB,EAAO,CAC1BpT,KAAKmhC,UAAY/tB,EACjB,GAAIA,IAAU,EAAG,CACbpT,KAAK6hC,OAAO7hC,KAAKwhC,UAEhB,GAAIxhC,KAAKyhC,WAAazhC,KAAKwhC,IAAK,CACjCxhC,KAAK8hC,WAIjBpsB,WAAY,MACZC,aAAc,OAElBrS,OAAOssB,eAAemR,EAAcj1B,UAAW,UAAW,CACtDwH,IAAK,WACD,GAAItT,KAAK+hC,OAAQ,CACb,OAAO/hC,KAAK+hC,OAAO/hC,KAAKyhC,cAEvB,CACD,OAAOzhC,KAAKyhC,WAGpB/rB,WAAY,MACZC,aAAc,OAElBrS,OAAOssB,eAAemR,EAAcj1B,UAAW,OAAQ,CACnD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACHpT,KAAK6hC,OAAO7hC,KAAKyhC,aAGzBn+B,OAAOssB,eAAemR,EAAcj1B,UAAW,SAAU,CACrD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUA,GACb,GAAIpT,KAAKyhC,WAAaruB,EAAO,CACzBpT,KAAKkhC,QAAQzL,YAEjB,GAAIz1B,KAAKqhC,mBAAqB,KAAM,CAChCrhC,KAAK0hC,aAET1hC,KAAKqhC,iBAAmB,KACxBrhC,KAAKshC,cAAgB,KACrBthC,KAAKyhC,SAAWruB,EAChBpT,KAAKuhC,MAAQnuB,EACbpT,KAAKwhC,IAAMpuB,KAGnB9P,OAAOssB,eAAemR,EAAcj1B,UAAW,UAAW,CACtD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUA,GACb,GAAIpT,KAAKyhC,WAAaruB,GAASpT,KAAKmhC,YAAc,EAAG,CACjDnhC,KAAK6hC,OAAOzuB,OAEX,CACD,GAAIpT,KAAKwhC,MAAQpuB,EAAO,CACpBpT,KAAKwhC,IAAMpuB,EACXpT,KAAK8hC,aAKrB,OAAOf,GA1MS,GC/Eb,IAAIiB,GAAK12B,KAAK02B,GAEd,IAAIC,GAAUD,GAAK,IACnB,IAAIE,GAAU,IAAMF,GAwEpB,SAASG,GAAW/uB,EAAO7H,EAAKwY,GACnC,OAAOzY,KAAKC,IAAID,KAAKyY,IAAI3Q,EAAO7H,GAAMwY,GAQnC,SAASqe,GAAIC,GAChB,OAAO/2B,KAAK82B,IAAIH,GAAUI,GAiBvB,SAASC,GAAID,GAChB,OAAO/2B,KAAKg3B,IAAIL,GAAUI,GAGvB,SAASE,GAAenvB,GAC3BA,EAAQA,EAAQ,IAChB,GAAIA,EAAQ,EAAG,CACXA,GAAS,IAEb,OAAOA,EAGJ,SAASovB,GAAaC,EAAIC,EAAIC,EAAYC,EAAUC,GACvD,IAAIC,EAAOxzB,OAAOyzB,UAClB,IAAIC,EAAO1zB,OAAOyzB,UAClB,IAAIE,GAAQ3zB,OAAOyzB,UACnB,IAAIG,GAAQ5zB,OAAOyzB,UACnB,IAAII,EAAU,GACdA,EAAQ39B,KAAK49B,GAAYP,EAAQF,IACjCQ,EAAQ39B,KAAK49B,GAAYP,EAAQD,IACjC,IAAIS,EAAY/3B,KAAKC,IAAID,KAAK+D,MAAMszB,EAAa,IAAM,GAAIr3B,KAAK+D,MAAMuzB,EAAW,IAAM,IACvF,IAAIU,EAAUh4B,KAAKyY,IAAIzY,KAAKywB,KAAK4G,EAAa,IAAM,GAAIr3B,KAAKywB,KAAK6G,EAAW,IAAM,IACnF,IAAK,IAAIP,EAAQgB,EAAWhB,GAASiB,EAASjB,GAAS,GAAI,CACvD,GAAIA,GAASM,GAAcN,GAASO,EAAU,CAC1CO,EAAQ39B,KAAK49B,GAAYP,EAAQR,KAGzC,IAAK,IAAIrhC,EAAI,EAAGA,EAAImiC,EAAQn/B,OAAQhD,IAAK,CACrC,IAAIuiC,EAAKJ,EAAQniC,GACjB,GAAIuiC,EAAG31B,EAAIk1B,EAAM,CACbA,EAAOS,EAAG31B,EAEd,GAAI21B,EAAG5/B,EAAIq/B,EAAM,CACbA,EAAOO,EAAG5/B,EAEd,GAAI4/B,EAAG31B,EAAIq1B,EAAM,CACbA,EAAOM,EAAG31B,EAEd,GAAI21B,EAAG5/B,EAAIu/B,EAAM,CACbA,EAAOK,EAAG5/B,GAGlB,MAAA,CAAUqzB,KAAMyL,EAAKK,EAAM/L,IAAK2L,EAAKM,EAAMQ,MAAOf,EAAKQ,EAAMQ,OAAQf,EAAKQ,GAUvE,SAASE,GAAYP,EAAQa,GAChC,MAAA,CAAU91B,EAAGi1B,EAASP,GAAIoB,GAAM//B,EAAGk/B,EAAST,GAAIsB,IClH7C,SAASC,GAAO9jC,GACnB,OAAOA,EAKJ,SAAS+jC,GAAM/jC,GAClB,OAAOA,EAAIA,EAAIA,EAgCZ,SAASgkC,GAAIC,GAChB,OAAO,SAAUjkC,GACb,OAAO,EAAMikC,EAAK,EAAMjkC,IClFhC,IAAIkkC,GAAuB,WACvB,SAASA,EAAM/C,EAAQgD,GACnB1gC,OAAOssB,eAAe5vB,KAAM,UAAW,CACnC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAe5vB,KAAM,YAAa,CACrC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAe5vB,KAAM,gBAAiB,CACzC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,KAEXpT,KAAKkhC,QAAUF,EACfhhC,KAAKikC,UAAYD,EAErB1gC,OAAOssB,eAAemU,EAAMj4B,UAAW,MAAO,CAC1C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUY,EAAKkwB,GAClB,IAAI9wB,EAAQpT,KAAKikC,UAAUjwB,GAC3B,GAAIZ,IAAU8E,UAAW,CACrB,OAAO9E,MAEN,CACD,OAAO8wB,MAOnB5gC,OAAOssB,eAAemU,EAAMj4B,UAAW,SAAU,CAC7C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUY,EAAKZ,GAClBpT,KAAKikC,UAAUjwB,GAAOZ,KAW9B9P,OAAOssB,eAAemU,EAAMj4B,UAAW,MAAO,CAC1C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUY,EAAKZ,GAClBpT,KAAKmkC,cAAcnwB,GAAO,KAC1BhU,KAAKokC,OAAOpwB,EAAKZ,MASzB9P,OAAOssB,eAAemU,EAAMj4B,UAAW,SAAU,CAC7C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUY,UACNhU,KAAKmkC,cAAcnwB,UACnBhU,KAAKikC,UAAUjwB,MAW9B1Q,OAAOssB,eAAemU,EAAMj4B,UAAW,SAAU,CAC7C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU4wB,GACb,IAAI7T,EAAQnwB,KACZqkC,GAAaL,GAAUn3B,SAAQ,SAAUmH,GACrCmc,EAAM5c,IAAIS,EAAKgwB,EAAShwB,UAIpC1Q,OAAOssB,eAAemU,EAAMj4B,UAAW,eAAgB,CACnD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUlT,GACbk5B,GAAap5B,KAAKikC,UAAW/jC,MAQrCoD,OAAOssB,eAAemU,EAAMj4B,UAAW,QAAS,CAC5C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAI+c,EAAQnwB,KACZ,IAAIskC,EAAO,GACXA,EAAK,wBAA0B,KAC/BA,EAAK,0BAA4B,KACjC,IAAIvvB,EAAe/U,KAAKkhC,QAAQhsB,OAAOqvB,OAAO,WAC9CvkC,KAAKwkC,cAAa,SAAUxwB,EAAKZ,GAC7B,IAAKkxB,EAAKtwB,GAAM,CACZswB,EAAKtwB,GAAO,KAEZ,GAAImc,IAAUpb,EAAc,CACxB,KAAMf,KAAOe,EAAakvB,WAAY,CAClClvB,EAAakvB,UAAUjwB,GAAOmc,EAAM+Q,QAAQ5tB,IAAIU,IAGxDmc,EAAM+Q,QAAQ3tB,IAAIS,EAAKZ,UAavC9P,OAAOssB,eAAemU,EAAMj4B,UAAW,eAAgB,CACnD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU6tB,GACb,IAAI9Q,EAAQnwB,KACZ,GAAIihC,GAAY,KAAM,CAClBA,EAAWjhC,KAAKikC,UAAUQ,uBAE9B,GAAIxD,GAAY,KAAM,CAClBA,EAAWjhC,KAAKsT,IAAI,yBAA0BtT,KAAKkhC,QAAQ5tB,IAAI,yBAA0B,IAE7F,IAAIyuB,EAAS/hC,KAAKikC,UAAUS,qBAC5B,GAAI3C,GAAU,KAAM,CAChBA,EAAS/hC,KAAKsT,IAAI,uBAAwBtT,KAAKkhC,QAAQ5tB,IAAI,uBAAwBqxB,KAEvF,IAAI5vB,EAAe/U,KAAKkhC,QAAQhsB,OAAOqvB,OAAO,WAC9C,IAAID,EAAO,GACXA,EAAK,wBAA0B,KAC/BA,EAAK,0BAA4B,KACjC,IAAIjE,EAAa,GACjBrgC,KAAKwkC,cAAa,SAAUxwB,EAAKZ,GAC7B,IAAKkxB,EAAKtwB,GAAM,CACZswB,EAAKtwB,GAAO,KAEZ,GAAImc,GAASpb,EAAc,CACvB,KAAMf,KAAOe,EAAakvB,WAAY,CAClClvB,EAAakvB,UAAUjwB,GAAOmc,EAAM+Q,QAAQ5tB,IAAIU,IAGxD,IAAIusB,EAAYpQ,EAAM+Q,QAAQ0D,QAAQ,CAClC5wB,IAAKA,EACLwY,GAAIpZ,EACJ6tB,SAAUA,EACVc,OAAQA,IAEZ,GAAIxB,EAAW,CACXF,EAAWrsB,GAAOusB,OAI9B,OAAOF,KAGf,OAAO0D,EA5LF,GAoMT,IAAIc,GAAwB,WACxB,SAASA,EAAO7D,GACZ19B,OAAOssB,eAAe5vB,KAAM,UAAW,CACnC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,KAEX9P,OAAOssB,eAAe5vB,KAAM,UAAW,CACnC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhBpT,KAAKkhC,QAAUF,EAQnB19B,OAAOssB,eAAeiV,EAAO/4B,UAAW,SAAU,CAC9C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUrL,GACb,OAAO/H,KAAK8kC,QAAQ/8B,MAY5BzE,OAAOssB,eAAeiV,EAAO/4B,UAAW,SAAU,CAC9C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUrL,EAAMi8B,GACnB,IAAIzuB,EAAQvV,KAAK8kC,QAAQ/8B,GACzB,GAAIwN,EAAO,CACPA,EAAM4e,OAAO6P,GACb,OAAOzuB,MAEN,CACD,IAAIwvB,EAAU,IAAIhB,GAAM/jC,KAAKkhC,QAAS8C,GACtChkC,KAAK8kC,QAAQ/8B,GAAQg9B,EACrB,OAAOA,MASnBzhC,OAAOssB,eAAeiV,EAAO/4B,UAAW,SAAU,CAC9C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUrL,UACN/H,KAAK8kC,QAAQ/8B,MAQ5BzE,OAAOssB,eAAeiV,EAAO/4B,UAAW,QAAS,CAC7C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU4xB,GACb,IAAIzvB,EAAQvV,KAAK8kC,QAAQE,GACzB,GAAIzvB,EAAO,CACPA,EAAMxJ,QAEV/L,KAAKkhC,QAAQ+D,YAAYD,MAYjC1hC,OAAOssB,eAAeiV,EAAO/4B,UAAW,eAAgB,CACpD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU4xB,EAAU/D,GACvB,IAAIZ,EACJ,IAAI9qB,EAAQvV,KAAK8kC,QAAQE,GACzB,GAAIzvB,EAAO,CACP8qB,EAAa9qB,EAAM2vB,aAAajE,GAEpCjhC,KAAKkhC,QAAQiE,oBAAoBH,EAAU/D,GAC3C,OAAOZ,KAGf,OAAOwE,EA7GD,GCxMV,IAAIO,GAA0B,WAC1B,SAASA,IAIL9hC,OAAOssB,eAAe5vB,KAAM,UAAW,CACnC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WAMX9P,OAAOssB,eAAe5vB,KAAM,WAAY,CACpC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,KAKX9P,OAAOssB,eAAe5vB,KAAM,eAAgB,CACxC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,KAKX9P,OAAOssB,eAAe5vB,KAAM,eAAgB,CACxC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,KAGf,OAAOgyB,EAxCC,GA8CL,IAAIC,GAAW,IAAID,GC9CnB,SAASE,GAAQtO,EAAMwM,GAC1B,GAAIxM,IAASwM,EAAO,CAChB,OAAO,OAEN,GAAIxM,EAAOwM,EAAO,CACnB,OAAQ,MAEP,CACD,OAAO,GAMR,SAAS+B,GAAavO,EAAMwM,EAAOtjC,GACtC,IAAIslC,EAAaxO,EAAKhzB,OACtB,IAAIyhC,EAAcjC,EAAMx/B,OACxB,IAAIA,EAASsH,KAAKC,IAAIi6B,EAAYC,GAClC,IAAK,IAAIzkC,EAAI,EAAGA,EAAIgD,IAAUhD,EAAG,CAC7B,IAAIuuB,EAAQrvB,EAAE82B,EAAKh2B,GAAIwiC,EAAMxiC,IAC7B,GAAIuuB,IAAU,EAAG,CACb,OAAOA,GAGf,OAAO+V,GAAQE,EAAYC,GCZ/B,IAAIC,GAA0B,WAC1B,SAASA,EAAS1E,GACd19B,OAAOssB,eAAe5vB,KAAM,UAAW,CACnC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAe5vB,KAAM,aAAc,CACtC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,KAEX9P,OAAOssB,eAAe5vB,KAAM,YAAa,CACrC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,KAEXpT,KAAKkhC,QAAUF,EAOnB19B,OAAOssB,eAAe8V,EAAS55B,UAAW,MAAO,CAC7C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUY,EAAK8B,GAClB,IAAIqa,EAAQnwB,KACZ,IAAI2lC,EAAY3lC,KAAK4lC,WAAW5xB,GAChC,GAAI2xB,IAAcztB,UAAW,CACzBytB,EAAY3lC,KAAK4lC,WAAW5xB,GAAO,GAEvC2xB,EAAUngC,KAAKsQ,GACf9V,KAAKkhC,QAAQ2E,cAAc7xB,GAC3B,OAAO,IAAIgc,IAAS,WAChB,GAAI8V,GAAmBH,EAAW7vB,GAAW,CACzCqa,EAAM+Q,QAAQ2E,cAAc7xB,UAU5C1Q,OAAOssB,eAAe8V,EAAS55B,UAAW,SAAU,CAChD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUY,GACb,IAAI2xB,EAAY3lC,KAAK4lC,WAAW5xB,GAChC,GAAI2xB,IAAcztB,UAAW,QAClBlY,KAAK4lC,WAAW5xB,GACvB,GAAI2xB,EAAU3hC,SAAW,EAAG,CACxBhE,KAAKkhC,QAAQ2E,cAAc7xB,QAU3C1Q,OAAOssB,eAAe8V,EAAS55B,UAAW,SAAU,CAChD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUY,GACb,GAAIhU,KAAKixB,UAAUjd,GAAM,QACdhU,KAAKixB,UAAUjd,GACtBhU,KAAKkhC,QAAQ2E,cAAc7xB,OASvC1Q,OAAOssB,eAAe8V,EAAS55B,UAAW,UAAW,CACjD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUY,GACb,IAAKhU,KAAKixB,UAAUjd,GAAM,CACtBhU,KAAKixB,UAAUjd,GAAO,KACtBhU,KAAKkhC,QAAQ2E,cAAc7xB,OAOvC1Q,OAAOssB,eAAe8V,EAAS55B,UAAW,OAAQ,CAC9C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUY,EAAKZ,GAClB,IAAKpT,KAAKixB,UAAUjd,GAAM,CACtB,IAAI2xB,EAAY3lC,KAAK4lC,WAAW5xB,GAChC,GAAI2xB,IAAcztB,UAAW,CACzB,IAAK,IAAIlX,EAAI,EAAG0xB,EAAMiT,EAAU3hC,OAAQhD,EAAI0xB,IAAO1xB,EAAG,CAClDoS,EAAQuyB,EAAU3kC,GAAGoS,EAAOpT,KAAKkhC,QAASltB,KAItD,OAAOZ,KAGf,OAAOsyB,EApHC,GA4HZ,IAAIK,GAA2B,WAC3B,SAASA,EAAUxF,EAAW9qB,EAAM+W,EAAIyU,EAAUc,EAAQiE,EAAOC,GAC7D3iC,OAAOssB,eAAe5vB,KAAM,aAAc,CACtC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAe5vB,KAAM,QAAS,CACjC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAe5vB,KAAM,MAAO,CAC/B0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAe5vB,KAAM,YAAa,CACrC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAe5vB,KAAM,UAAW,CACnC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAe5vB,KAAM,SAAU,CAClC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAe5vB,KAAM,eAAgB,CACxC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAe5vB,KAAM,WAAY,CACpC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAe5vB,KAAM,QAAS,CACjC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,IAEX9P,OAAOssB,eAAe5vB,KAAM,WAAY,CACpC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,QAEX9P,OAAOssB,eAAe5vB,KAAM,WAAY,CACpC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,OAEX9P,OAAOssB,eAAe5vB,KAAM,SAAU,CAClC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,IAAI0d,KAEf9wB,KAAKkmC,WAAa3F,EAClBvgC,KAAKuhC,MAAQ9rB,EACbzV,KAAKwhC,IAAMhV,EACXxsB,KAAKmhC,UAAYF,EACjBjhC,KAAKmmC,QAAUpE,EACf/hC,KAAKomC,OAASJ,EACdhmC,KAAKqmC,aAAevF,GAAerrB,EAAM+W,GACzCxsB,KAAKsmC,SAAWL,EAEpB3iC,OAAOssB,eAAemW,EAAUj6B,UAAW,KAAM,CAC7CwH,IAAK,WACD,OAAOtT,KAAKwhC,KAEhB9rB,WAAY,MACZC,aAAc,OAElBrS,OAAOssB,eAAemW,EAAUj6B,UAAW,OAAQ,CAC/CwH,IAAK,WACD,OAAOtT,KAAKuhC,OAEhB7rB,WAAY,MACZC,aAAc,OAElBrS,OAAOssB,eAAemW,EAAUj6B,UAAW,UAAW,CAClDwH,IAAK,WACD,OAAOtT,KAAKumC,UAEhB7wB,WAAY,MACZC,aAAc,OAElBrS,OAAOssB,eAAemW,EAAUj6B,UAAW,UAAW,CAClDwH,IAAK,WACD,OAAOtT,KAAKwmC,UAEhB9wB,WAAY,MACZC,aAAc,OAElBrS,OAAOssB,eAAemW,EAAUj6B,UAAW,OAAQ,CAC/C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAKpT,KAAKwmC,SAAU,CAChBxmC,KAAKwmC,SAAW,KAChBxmC,KAAKumC,SAAW,MAChB,GAAIvmC,KAAK+yB,OAAOC,UAAU,WAAY,CAClChzB,KAAK+yB,OAAOd,SAAS,UAAW,CAC5BnwB,KAAM,UACN6J,OAAQ3L,YAM5BsD,OAAOssB,eAAemW,EAAUj6B,UAAW,QAAS,CAChD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACHpT,KAAKumC,SAAW,MAChBvmC,KAAKsmC,SAAW,QAGxBhjC,OAAOssB,eAAemW,EAAUj6B,UAAW,OAAQ,CAC/C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAKpT,KAAKwmC,WAAaxmC,KAAKumC,SAAU,CAClCvmC,KAAKumC,SAAW,KAChBvmC,KAAKkmC,WAAWO,sBAI5BnjC,OAAOssB,eAAemW,EAAUj6B,UAAW,aAAc,CACrDwH,IAAK,WACD,OAAOtT,KAAK0mC,MAAQ1mC,KAAKmhC,WAE7BzrB,WAAY,MACZC,aAAc,OAElBrS,OAAOssB,eAAemW,EAAUj6B,UAAW,cAAe,CACtD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAI+c,EAAQnwB,KACZ,OAAO,IAAIkrB,SAAQ,SAAUD,EAAS0b,GAClC,GAAIxW,EAAMqW,SAAU,CAChBvb,QAEC,CACD,IAAIqG,EAAW,WACXsV,EAAUvyB,UACV4W,KAEJ,IAAI2b,EAAYzW,EAAM4C,OAAO5vB,GAAG,UAAWmuB,UAK3DhuB,OAAOssB,eAAemW,EAAUj6B,UAAW,cAAe,CACtD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,GAAIpT,KAAKomC,OAAS,EAAG,GACfpmC,KAAKomC,OACP,OAAO,UAEN,CACD,OAAO,SAInB9iC,OAAOssB,eAAemW,EAAUj6B,UAAW,OAAQ,CAC/C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUguB,GACb,GAAIphC,KAAKsmC,WAAa,KAAM,CACxBtmC,KAAK0mC,OAAStF,EAAcphC,KAAKsmC,SACjC,GAAItmC,KAAK0mC,MAAQ1mC,KAAKmhC,UAAW,CAC7BnhC,KAAK0mC,MAAQ1mC,KAAKmhC,WAG1BnhC,KAAKsmC,SAAWlF,KAGxB99B,OAAOssB,eAAemW,EAAUj6B,UAAW,SAAU,CACjD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUguB,GACbphC,KAAKsmC,SAAWlF,EAChBphC,KAAK0mC,MAAQ,KAGrBpjC,OAAOssB,eAAemW,EAAUj6B,UAAW,SAAU,CACjD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU4nB,GACb,OAAOh7B,KAAKqmC,aAAarmC,KAAKmmC,QAAQnL,GAAOh7B,KAAKuhC,MAAOvhC,KAAKwhC,QAGtE,OAAOuE,EA5NE,GAkOb,IAAIc,GAAU,EAMd,IAAIC,GAA0B,WAC1B,SAASA,EAAS9C,GAId1gC,OAAOssB,eAAe5vB,KAAM,MAAO,CAC/B0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,QAASyzB,KAEbvjC,OAAOssB,eAAe5vB,KAAM,YAAa,CACrC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAe5vB,KAAM,mBAAoB,CAC5C0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,KAEX9P,OAAOssB,eAAe5vB,KAAM,iBAAkB,CAC1C0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,KAEX9P,OAAOssB,eAAe5vB,KAAM,wBAAyB,CACjD0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,KAEX9P,OAAOssB,eAAe5vB,KAAM,gBAAiB,CACzC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,KAEX9P,OAAOssB,eAAe5vB,KAAM,uBAAwB,CAChD0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,KAEX9P,OAAOssB,eAAe5vB,KAAM,qBAAsB,CAC9C0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,KAEX9P,OAAOssB,eAAe5vB,KAAM,4BAA6B,CACrD0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,KAEX9P,OAAOssB,eAAe5vB,KAAM,YAAa,CACrC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,QAGX9P,OAAOssB,eAAe5vB,KAAM,kBAAmB,CAC3C0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,KAEXpT,KAAKikC,UAAYD,EAErB1gC,OAAOssB,eAAekX,EAASh7B,UAAW,cAAe,CACrD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAI+c,EAAQnwB,KACZqkC,GAAarkC,KAAKikC,WAAWp3B,SAAQ,SAAUmH,GAC3Cmc,EAAM4W,gBAAgB/yB,GAAO,KAC7Bmc,EAAM0V,cAAc7xB,SAOhC1Q,OAAOssB,eAAekX,EAASh7B,UAAW,oBAAqB,CAC3D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACHpT,KAAK+mC,gBAAkB,MAG/BzjC,OAAOssB,eAAekX,EAASh7B,UAAW,gBAAiB,CACvD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUguB,GACb,IAAIjR,EAAQnwB,KACZ,IAAKA,KAAKgnC,aAAc,CACpB,IAAIC,EAAY,MAChB7N,GAAap5B,KAAKknC,oBAAoB,SAAUlzB,EAAKusB,GACjD,GAAIA,EAAUiG,SAAU,CACpBrW,EAAMgX,eAAenzB,QAEpB,GAAIusB,EAAUgG,SAAU,CACzBhG,EAAU6G,KAAKhG,GACf,IAAIpG,EAAOuF,EAAU8G,WACrB,GAAIrM,GAAQ,EAAG,CACX,GAAIuF,EAAU+G,cAAe,CACzBnX,EAAM5c,IAAIS,EAAKusB,EAAU7P,OAAO,QAE/B,CACDuW,EAAY,KACZ1G,EAAUgH,OAAOnG,GACjBjR,EAAMqX,KAAKxzB,EAAKusB,EAAU7P,OAAO,SAGpC,CACDuW,EAAY,KACZ9W,EAAMqX,KAAKxzB,EAAKusB,EAAU7P,OAAOsK,SAI7C5B,GAAap5B,KAAKynC,2BAA2B,SAAUzzB,EAAKusB,GACxD,GAAIA,EAAUiG,SAAU,CACpBrW,EAAMuX,sBAAsB1zB,QAE3B,GAAIusB,EAAUgG,SAAU,CACzBhG,EAAU6G,KAAKhG,GACf,IAAIpG,EAAOuF,EAAU8G,WACrB,GAAIrM,GAAQ,EAAG,CACX,GAAIuF,EAAU+G,cAAe,CACzBnX,EAAMwX,WAAW3zB,EAAKusB,EAAU7P,OAAO,QAEtC,CACDuW,EAAY,KACZ1G,EAAUgH,OAAOnG,GACjBjR,EAAMyX,YAAY5zB,EAAKusB,EAAU7P,OAAO,SAG3C,CACDuW,EAAY,KACZ9W,EAAMyX,YAAY5zB,EAAKusB,EAAU7P,OAAOsK,SAIpD,OAAOiM,MAEN,CACD,OAAO,UAInB3jC,OAAOssB,eAAekX,EAASh7B,UAAW,gBAAiB,CACvD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUy0B,GACb7nC,KAAKy1B,eAGbnyB,OAAOssB,eAAekX,EAASh7B,UAAW,uBAAwB,CAC9D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUy0B,GACb7nC,KAAKy1B,eAYbnyB,OAAOssB,eAAekX,EAASh7B,UAAW,KAAM,CAC5C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUY,EAAK8B,GAClB,IAAIqa,EAAQnwB,KACZ,IAAI+yB,EAAS/yB,KAAK8nC,eAAe9zB,GACjC,GAAI+e,IAAW7a,UAAW,CACtB6a,EAAS/yB,KAAK8nC,eAAe9zB,GAAO,GAExC+e,EAAOvtB,KAAKsQ,GACZ,OAAO,IAAIka,IAAS,WAChB8V,GAAmB/S,EAAQjd,GAC3B,GAAIid,EAAO/uB,SAAW,EAAG,QACdmsB,EAAM2X,eAAe9zB,UAe5C1Q,OAAOssB,eAAekX,EAASh7B,UAAW,YAAa,CACnD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUY,EAAK8B,GAClB,IAAIqa,EAAQnwB,KACZ,IAAI+yB,EAAS/yB,KAAK+nC,sBAAsB/zB,GACxC,GAAI+e,IAAW7a,UAAW,CACtB6a,EAAS/yB,KAAK+nC,sBAAsB/zB,GAAO,GAE/C+e,EAAOvtB,KAAKsQ,GACZ,OAAO,IAAIka,IAAS,WAChB8V,GAAmB/S,EAAQjd,GAC3B,GAAIid,EAAO/uB,SAAW,EAAG,QACdmsB,EAAM4X,sBAAsB/zB,UAQnD1Q,OAAOssB,eAAekX,EAASh7B,UAAW,SAAU,CAChD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUY,EAAKkwB,GAClB,IAAI9wB,EAAQpT,KAAKikC,UAAUjwB,GAC3B,GAAIZ,IAAU8E,UAAW,CACrB,OAAO9E,MAEN,CACD,OAAO8wB,MAInB5gC,OAAOssB,eAAekX,EAASh7B,UAAW,MAAO,CAC7C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUY,EAAKkwB,GAClB,OAAOlkC,KAAKgoC,OAAOh0B,EAAKkwB,MAGhC5gC,OAAOssB,eAAekX,EAASh7B,UAAW,gBAAiB,CACvD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUY,EAAKZ,GAClB,IAAI+c,EAAQnwB,KACZ,IAAI+yB,EAAS/yB,KAAK8nC,eAAe9zB,GACjC,GAAI+e,IAAW7a,UAAW,CACtBkY,GAAY2C,GAAQ,SAAUjd,GAC1BA,EAAS1C,EAAO+c,EAAOnc,UAKvC1Q,OAAOssB,eAAekX,EAASh7B,UAAW,uBAAwB,CAC9D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUY,EAAKZ,GAClB,IAAI+c,EAAQnwB,KACZ,IAAI+yB,EAAS/yB,KAAK+nC,sBAAsB/zB,GACxC,GAAI+e,IAAW7a,UAAW,CACtBkY,GAAY2C,GAAQ,SAAUjd,GAC1BA,EAAS1C,EAAO+c,EAAOnc,UAQvC1Q,OAAOssB,eAAekX,EAASh7B,UAAW,UAAW,CACjD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUY,EAAKigB,EAAK7gB,GACvBpT,KAAKioC,cAAcj0B,GAAOigB,EAC1Bj0B,KAAKkoC,cAAcl0B,EAAKZ,MAMhC9P,OAAOssB,eAAekX,EAASh7B,UAAW,SAAU,CAChD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUY,EAAKZ,GAClB,IAAI6gB,EAAMj0B,KAAKikC,UAAUjwB,GACzBhU,KAAKikC,UAAUjwB,GAAOZ,EACtB,GAAI6gB,IAAQ7gB,EAAO,CACfpT,KAAKmoC,QAAQn0B,EAAKigB,EAAK7gB,OAOnC9P,OAAOssB,eAAekX,EAASh7B,UAAW,OAAQ,CAC9C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUY,EAAKZ,GAClB,IAAI6gB,EAAMj0B,KAAKikC,UAAUjwB,GACzBhU,KAAKikC,UAAUjwB,GAAOZ,EACtB,GAAI6gB,IAAQ7gB,EAAO,CACfpT,KAAKmoC,QAAQn0B,EAAKigB,EAAK7gB,GACvBpT,KAAK6lC,cAAc7xB,OAI/B1Q,OAAOssB,eAAekX,EAASh7B,UAAW,iBAAkB,CACxD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUY,GACb,IAAIusB,EAAYvgC,KAAKknC,mBAAmBlzB,GACxC,GAAIusB,EAAW,QACJvgC,KAAKknC,mBAAmBlzB,GAC/BusB,EAAU6H,WAYtB9kC,OAAOssB,eAAekX,EAASh7B,UAAW,MAAO,CAC7C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUY,EAAKZ,GAClBpT,KAAKwnC,KAAKxzB,EAAKZ,GACfpT,KAAKmnC,eAAenzB,GACpB,OAAOZ,KASf9P,OAAOssB,eAAekX,EAASh7B,UAAW,SAAU,CAChD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUY,GACb,GAAIA,KAAOhU,KAAKikC,UAAW,CACvBjkC,KAAKioC,cAAcj0B,GAAOhU,KAAKikC,UAAUjwB,UAClChU,KAAKikC,UAAUjwB,GACtBhU,KAAKkoC,cAAcl0B,EAAKkE,WACxBlY,KAAK6lC,cAAc7xB,GAEvBhU,KAAKmnC,eAAenzB,MAQ5B1Q,OAAOssB,eAAekX,EAASh7B,UAAW,YAAa,CACnD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAI+c,EAAQnwB,KACZowB,GAAYiU,GAAarkC,KAAKikC,YAAY,SAAUjwB,GAChDmc,EAAM5Q,OAAOvL,SASzB1Q,OAAOssB,eAAekX,EAASh7B,UAAW,aAAc,CACpD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUY,EAAKkwB,GAClB,IAAI9wB,EAAQpT,KAAKqoC,iBAAiBr0B,GAClC,GAAIZ,IAAU8E,UAAW,CACrB,OAAO9E,MAEN,CACD,OAAO8wB,MAOnB5gC,OAAOssB,eAAekX,EAASh7B,UAAW,iBAAkB,CACxD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUY,EAAKigB,EAAK7gB,GACvBpT,KAAKsoC,qBAAqBt0B,GAAOigB,EACjCj0B,KAAKuoC,qBAAqBv0B,EAAKZ,MAMvC9P,OAAOssB,eAAekX,EAASh7B,UAAW,gBAAiB,CACvD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUY,EAAKZ,GAClB,IAAI6gB,EAAMj0B,KAAKqoC,iBAAiBr0B,GAChChU,KAAKqoC,iBAAiBr0B,GAAOZ,EAC7B,GAAI6gB,IAAQ7gB,EAAO,CACfpT,KAAKwoC,eAAex0B,EAAKigB,EAAK7gB,OAO1C9P,OAAOssB,eAAekX,EAASh7B,UAAW,cAAe,CACrD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUY,EAAKZ,GAClB,IAAI6gB,EAAMj0B,KAAKqoC,iBAAiBr0B,GAChChU,KAAKqoC,iBAAiBr0B,GAAOZ,EAC7B,GAAI6gB,IAAQ7gB,EAAO,CACfpT,KAAKwoC,eAAex0B,EAAKigB,EAAK7gB,GAC9BpT,KAAKyoC,qBAAqBz0B,OAItC1Q,OAAOssB,eAAekX,EAASh7B,UAAW,wBAAyB,CAC/D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUY,GACb,IAAIusB,EAAYvgC,KAAKynC,0BAA0BzzB,GAC/C,GAAIusB,EAAW,CACXA,EAAU6H,cACHpoC,KAAKynC,0BAA0BzzB,OAOlD1Q,OAAOssB,eAAekX,EAASh7B,UAAW,aAAc,CACpD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUY,EAAKZ,GAClBpT,KAAK4nC,YAAY5zB,EAAKZ,GACtBpT,KAAK0nC,sBAAsB1zB,GAC3B,OAAOZ,KAMf9P,OAAOssB,eAAekX,EAASh7B,UAAW,gBAAiB,CACvD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUY,GACb,GAAIA,KAAOhU,KAAKqoC,iBAAkB,CAC9BroC,KAAKsoC,qBAAqBt0B,GAAOhU,KAAKqoC,iBAAiBr0B,UAChDhU,KAAKqoC,iBAAiBr0B,GAC7BhU,KAAKyoC,qBAAqBz0B,GAE9BhU,KAAK0nC,sBAAsB1zB,MAWnC1Q,OAAOssB,eAAekX,EAASh7B,UAAW,SAAU,CAChD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU4wB,GACb,IAAI7T,EAAQnwB,KACZo5B,GAAa4K,GAAU,SAAUhwB,EAAKZ,GAClC+c,EAAM5c,IAAIS,EAAKZ,SAW3B9P,OAAOssB,eAAekX,EAASh7B,UAAW,UAAW,CACjD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUijB,GACb,IAAIriB,EAAMqiB,EAAQriB,IAClB,IAAIwY,EAAK6J,EAAQ7J,GACjB,IAAIyU,EAAW5K,EAAQ4K,UAAY,EACnC,IAAI+E,EAAQ3P,EAAQ2P,OAAS,EAC7B,IAAIvwB,EAAQ4gB,EAAQ5gB,OAASyC,UAAYlY,KAAKsT,IAAIU,GAAOqiB,EAAQ5gB,KACjE,IAAIssB,EAAU1L,EAAQ0L,SAAW7pB,UAAYwwB,GAAerS,EAAQ0L,OACpE,GAAId,IAAa,EAAG,CAChBjhC,KAAKuT,IAAIS,EAAKwY,OAEb,CACD,GAAI/W,IAASyC,WAAazC,IAAS+W,EAAI,CACnCxsB,KAAKuT,IAAIS,EAAKwY,OAEb,CACDxsB,KAAKuT,IAAIS,EAAKyB,GACd,IAAIkzB,EAAc3oC,KAAKknC,mBAAmBlzB,GAAO,IAAI+xB,GAAU/lC,KAAMyV,EAAM+W,EAAIyU,EAAUc,EAAQiE,EAAOhmC,KAAK4oC,kBAC7G5oC,KAAKymC,kBACL,OAAOkC,GAGf,IAAIpI,EAAY,IAAIwF,GAAU/lC,KAAMyV,EAAM+W,EAAIyU,EAAUc,EAAQiE,EAAO,MACvEzF,EAAU6H,OACV,OAAO7H,KAMfj9B,OAAOssB,eAAekX,EAASh7B,UAAW,iBAAkB,CACxD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUijB,GACb,IAAIriB,EAAMqiB,EAAQriB,IAClB,IAAIwY,EAAK6J,EAAQ7J,GACjB,IAAIyU,EAAW5K,EAAQ4K,UAAY,EACnC,IAAI+E,EAAQ3P,EAAQ2P,OAAS,EAC7B,IAAIvwB,EAAQ4gB,EAAQ5gB,OAASyC,UAAYlY,KAAK6oC,WAAW70B,GAAOqiB,EAAQ5gB,KACxE,IAAIssB,EAAU1L,EAAQ0L,SAAW7pB,UAAYwwB,GAAerS,EAAQ0L,OACpE,GAAId,IAAa,EAAG,CAChBjhC,KAAK2nC,WAAW3zB,EAAKwY,OAEpB,CACD,GAAI/W,IAASyC,WAAazC,IAAS+W,EAAI,CACnCxsB,KAAK2nC,WAAW3zB,EAAKwY,OAEpB,CACDxsB,KAAK2nC,WAAW3zB,EAAKyB,GACrB,IAAIqzB,EAAc9oC,KAAKynC,0BAA0BzzB,GAAO,IAAI+xB,GAAU/lC,KAAMyV,EAAM+W,EAAIyU,EAAUc,EAAQiE,EAAOhmC,KAAK4oC,kBACpH5oC,KAAKymC,kBACL,OAAOqC,GAGf,IAAIvI,EAAY,IAAIwF,GAAU/lC,KAAMyV,EAAM+W,EAAIyU,EAAUc,EAAQiE,EAAO,MACvEzF,EAAU6H,OACV,OAAO7H,KAGfj9B,OAAOssB,eAAekX,EAASh7B,UAAW,WAAY,CAClD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,eAOX9P,OAAOssB,eAAekX,EAASh7B,UAAW,aAAc,CACpD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,OAAOpT,KAAK8vB,aAMpBxsB,OAAOssB,eAAekX,EAASh7B,UAAW,UAAW,CACjD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAKpT,KAAK8vB,UAAW,CACjB9vB,KAAK8vB,UAAY,KACjB9vB,KAAK+vB,eAIjB,OAAO+W,EA1mBC,GAknBZ,IAAIiC,GAAwB,SAAU7Y,GAClC1F,GAAUue,EAAQ7Y,GASlB,SAAS6Y,EAAO/Q,EAAMgM,EAAUgF,EAAQC,GACpC,GAAIA,SAAmB,EAAG,CAAEA,EAAY,GACxC,IAAI9Y,EAAQD,EAAO/mB,KAAKnJ,KAAMgkC,IAAahkC,KAC3CsD,OAAOssB,eAAeO,EAAO,QAAS,CAClCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAeO,EAAO,WAAY,CACrCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAeO,EAAO,SAAU,CACnCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,IAAIyxB,GAAO1U,KAEtB7sB,OAAOssB,eAAeO,EAAO,WAAY,CACrCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,IAAIsyB,GAASvV,KAExB7sB,OAAOssB,eAAeO,EAAO,SAAU,CACnCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO+c,EAAM+Y,kBAEjB5lC,OAAOssB,eAAeO,EAAO,yBAA0B,CACnDza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,KAEX9P,OAAOssB,eAAeO,EAAO,SAAU,CACnCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,KAEX9P,OAAOssB,eAAeO,EAAO,gBAAiB,CAC1Cza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,KAEX9P,OAAOssB,eAAeO,EAAO,YAAa,CACtCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAGhB9P,OAAOssB,eAAeO,EAAO,aAAc,CACvCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,KAGX9P,OAAOssB,eAAeO,EAAO,qBAAsB,CAC/Cza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAGhB9P,OAAOssB,eAAeO,EAAO,iBAAkB,CAC3Cza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,KAGX9P,OAAOssB,eAAeO,EAAO,qBAAsB,CAC/Cza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,KAEX9P,OAAOssB,eAAeO,EAAO,aAAc,CACvCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,KAGX9P,OAAOssB,eAAeO,EAAO,YAAa,CACtCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,OAEX9P,OAAOssB,eAAeO,EAAO,sBAAuB,CAChDza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,KAEX,IAAK41B,EAAQ,CACT,MAAM,IAAIvkC,MAAM,2DAEpB0rB,EAAM+I,MAAQlB,EACd7H,EAAMgZ,mBAAqBF,EAC3B,GAAIjF,EAAS9hC,GAAI,CACbiuB,EAAMiZ,YAAYpF,EAAS9hC,IAE/B,OAAOiuB,EAWX7sB,OAAOssB,eAAemZ,EAAQ,MAAO,CACjCrzB,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU4kB,EAAMgM,EAAU1f,GAC7B,IAAI1W,EAAC,IAAQ5N,KAAKg4B,EAAMgM,EAAU,MAClCp2B,EAAEy7B,UAAY/kB,EACd1W,EAAE07B,YACF,OAAO17B,KAGftK,OAAOssB,eAAemZ,EAAQ,OAAQ,CAClCrzB,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU4kB,EAAMgM,EAAUiF,GAC7B,GAAIA,SAAmB,EAAG,CAAEA,EAAY,GACxC,IAAIr7B,EAAC,IAAQ5N,KAAKg4B,EAAMgM,EAAU,KAAMiF,GACxCr7B,EAAE07B,YACF,OAAO17B,KAGftK,OAAOssB,eAAemZ,EAAOj9B,UAAW,YAAa,CACjD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAI+c,EAAQnwB,KACZA,KAAKupC,cACL,IAAIC,EAAc,MAClB,IAAIllB,EAAWtkB,KAAKqpC,UACpB,GAAI/kB,EAAU,CACVklB,EAAc,KACdllB,EAASmlB,mBAAmBzpC,MAEhCowB,GAAYpwB,KAAKmpC,oBAAoB,SAAU7kB,GAC3CklB,EAAc,KACdllB,EAASmlB,mBAAmBtZ,MAEhC,GAAIqZ,EAAa,CACbxpC,KAAK0pC,gBAAgB,OAEzB1pC,KAAKkV,OAAOtG,OAAO,UAAW,IAC9B5O,KAAK2pC,kBAKbrmC,OAAOssB,eAAemZ,EAAOj9B,UAAW,uBAAwB,CAC5D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAI+c,EAAQnwB,KACZA,KAAKupC,cACL,IAAIjlB,EAAWtkB,KAAKqpC,UACpB,GAAI/kB,EAAU,CACVA,EAASmlB,mBAAmBzpC,MAEhCowB,GAAYpwB,KAAKmpC,oBAAoB,SAAU7kB,GAC3CA,EAASmlB,mBAAmBtZ,MAEhCnwB,KAAKkV,OAAOtG,OAAO,UAAW,IAC9B5O,KAAK2pC,eACL3pC,KAAK4pC,kBAGbtmC,OAAOssB,eAAemZ,EAAOj9B,UAAW,gBAAiB,CACrD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,OAAO,IAAI0d,MAGnBxtB,OAAOssB,eAAemZ,EAAOj9B,UAAW,aAAc,CAIlDwH,IAAK,WACD,OAAOtT,KAAKyF,YAAYokC,YAE5Bn0B,WAAY,MACZC,aAAc,OAElBrS,OAAOssB,eAAemZ,EAAOj9B,UAAW,YAAa,CAIjDwH,IAAK,WACD,OAAOtT,KAAKyF,YAAYqkC,WAE5Bp0B,WAAY,MACZC,aAAc,OAElBrS,OAAOssB,eAAemZ,EAAOj9B,UAAW,eAAgB,CACpD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,eAGX9P,OAAOssB,eAAemZ,EAAOj9B,UAAW,cAAe,CACnD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUY,EAAKZ,GAClB,KAAMY,KAAOhU,KAAKikC,WAAY,CAC1B/T,EAAOpkB,UAAUyH,IAAIpK,KAAKnJ,KAAMgU,EAAKZ,OAIjD9P,OAAOssB,eAAemZ,EAAOj9B,UAAW,iBAAkB,CACtD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUY,EAAKZ,GAClB,KAAMY,KAAOhU,KAAKikC,WAAY,CAC1B/T,EAAOpkB,UAAUs4B,OAAOj7B,KAAKnJ,KAAMgU,EAAKZ,OAIpD9P,OAAOssB,eAAemZ,EAAOj9B,UAAW,cAAe,CACnD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAI+c,EAAQnwB,KACZqkC,GAAarkC,KAAK+pC,QAAQl9B,SAAQ,SAAUmH,GACxCmc,EAAM4Z,OAAO/1B,GAAO,SAExBqwB,GAAarkC,KAAKgqC,eAAen9B,SAAQ,SAAUmH,GAC/Cmc,EAAM6Z,cAAch2B,GAAO,YAOvC1Q,OAAOssB,eAAemZ,EAAOj9B,UAAW,UAAW,CAC/C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUY,GACb,QAAShU,KAAK+pC,OAAO/1B,MAM7B1Q,OAAOssB,eAAemZ,EAAOj9B,UAAW,iBAAkB,CACtD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUY,GACb,QAAShU,KAAKgqC,cAAch2B,MAGpC1Q,OAAOssB,eAAemZ,EAAOj9B,UAAW,gBAAiB,CACrD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUY,GACbhU,KAAK+pC,OAAO/1B,GAAO,KACnBkc,EAAOpkB,UAAU+5B,cAAc18B,KAAKnJ,KAAMgU,MAGlD1Q,OAAOssB,eAAemZ,EAAOj9B,UAAW,uBAAwB,CAC5D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUY,GACbhU,KAAKgqC,cAAch2B,GAAO,KAC1Bkc,EAAOpkB,UAAU+5B,cAAc18B,KAAKnJ,KAAMgU,MASlD1Q,OAAOssB,eAAemZ,EAAOj9B,UAAW,SAAU,CAC9C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUtR,GACb,OAAO9B,KAAK6pC,WAAW9lC,QAAQjC,MAAW,KAGlDwB,OAAOssB,eAAemZ,EAAOj9B,UAAW,wBAAyB,CAC7D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUY,EAAK2c,GAClB,IAAIJ,EAAYvwB,KAAKiqC,oBAAoBj2B,GACzC,GAAIuc,IAAcrY,UAAW,CACzBqY,EAAYvwB,KAAKiqC,oBAAoBj2B,GAAO,GAEhDuc,EAAU/qB,KAAKmrB,GACf,OAAOA,KAGfrtB,OAAOssB,eAAemZ,EAAOj9B,UAAW,mBAAoB,CACxD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUY,GACb,IAAIuc,EAAYvwB,KAAKiqC,oBAAoBj2B,GACzC,GAAIuc,IAAcrY,UAAW,CACzBkY,GAAYG,GAAW,SAAUI,GAC7BA,EAAStc,oBAENrU,KAAKiqC,oBAAoBj2B,OAI5C1Q,OAAOssB,eAAemZ,EAAOj9B,UAAW,WAAY,CAChDwH,IAAK,WACD,OAAOtT,KAAKqpC,WAMhB91B,IAAK,SAAUH,GACX,IAAIkR,EAAWtkB,KAAKqpC,UACpB,GAAI/kB,IAAalR,EAAO,CACpBpT,KAAKqpC,UAAYj2B,EACjB,GAAIkR,EAAU,CACVA,EAAS4lB,sBAAsBlqC,MAEnC,GAAIoT,EAAO,CACPA,EAAMq2B,mBAAmBzpC,MAE7BA,KAAK0pC,oBAGbh0B,WAAY,MACZC,aAAc,OAKlBrS,OAAOssB,eAAemZ,EAAOj9B,UAAW,YAAa,CACjD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACHpT,KAAKk5B,MAAMiR,gBAAgBnqC,SAGnCsD,OAAOssB,eAAemZ,EAAOj9B,UAAW,kBAAmB,CACvD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACHpT,KAAKk5B,MAAM0I,cAAc5hC,SAGjCsD,OAAOssB,eAAemZ,EAAOj9B,UAAW,iBAAkB,CACtD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,OAAOpT,KAAKk5B,MAAMkR,iBAG1B9mC,OAAOssB,eAAemZ,EAAOj9B,UAAW,cAAe,CACnD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUi3B,OAErB/mC,OAAOssB,eAAemZ,EAAOj9B,UAAW,sBAAuB,CAC3D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUi3B,EAAOlJ,OAE5B79B,OAAOssB,eAAemZ,EAAOj9B,UAAW,MAAO,CAC3C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUY,EAAKkwB,GAClB,IAAI9wB,EAAQpT,KAAKsqC,SAASC,KAAKv2B,EAAKhU,KAAKikC,UAAUjwB,IACnD,GAAIZ,IAAU8E,UAAW,CACrB,OAAO9E,MAEN,CACD,OAAO8wB,MAYnB5gC,OAAOssB,eAAemZ,EAAOj9B,UAAW,MAAO,CAC3C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUY,EAAKZ,GAClBpT,KAAK+mC,gBAAgB/yB,GAAO,KAC5B,OAAOkc,EAAOpkB,UAAUyH,IAAIpK,KAAKnJ,KAAMgU,EAAKZ,MAMpD9P,OAAOssB,eAAemZ,EAAOj9B,UAAW,SAAU,CAC9C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUY,EAAKZ,GAClBpT,KAAK+mC,gBAAgB/yB,GAAO,KAC5Bkc,EAAOpkB,UAAUs4B,OAAOj7B,KAAKnJ,KAAMgU,EAAKZ,MAWhD9P,OAAOssB,eAAemZ,EAAOj9B,UAAW,WAAY,CAChD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUY,EAAKZ,GAClB,IAAKpT,KAAK+mC,gBAAgB/yB,GAAM,CAC5B,OAAOkc,EAAOpkB,UAAUyH,IAAIpK,KAAKnJ,KAAMgU,EAAKZ,GAEhD,OAAOA,KASf9P,OAAOssB,eAAemZ,EAAOj9B,UAAW,SAAU,CAC9C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUY,UACNhU,KAAK+mC,gBAAgB/yB,GAC5BhU,KAAKwqC,wBAAwBx2B,MAMrC1Q,OAAOssB,eAAemZ,EAAOj9B,UAAW,aAAc,CAClD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUY,EAAKZ,GAClBpT,KAAKyqC,uBAAuBz2B,GAAO,KACnC,OAAOkc,EAAOpkB,UAAU67B,WAAWx+B,KAAKnJ,KAAMgU,EAAKZ,MAM3D9P,OAAOssB,eAAemZ,EAAOj9B,UAAW,gBAAiB,CACrD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUY,EAAKZ,GAClBpT,KAAKyqC,uBAAuBz2B,GAAO,KACnCkc,EAAOpkB,UAAU4+B,cAAcvhC,KAAKnJ,KAAMgU,EAAKZ,MAMvD9P,OAAOssB,eAAemZ,EAAOj9B,UAAW,gBAAiB,CACrD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUY,UACNhU,KAAKyqC,uBAAuBz2B,GACnChU,KAAK2qC,+BAA+B32B,MAG5C1Q,OAAOssB,eAAemZ,EAAOj9B,UAAW,uBAAwB,CAC5D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUkR,EAAUtQ,EAAKZ,GAC5B,IAAKpT,KAAK+mC,gBAAgB/yB,GAAM,CAC5B,IAAIyjB,EAAQz3B,KAAK4qC,mBAAmB52B,GACpC,GAAIsQ,IAAamT,EAAO,CACpBvH,EAAOpkB,UAAUyH,IAAIpK,KAAKnJ,KAAMgU,EAAKZ,QAKrD9P,OAAOssB,eAAemZ,EAAOj9B,UAAW,8BAA+B,CACnE4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUkR,EAAUtQ,EAAKZ,GAC5B,IAAKpT,KAAKyqC,uBAAuBz2B,GAAM,CACnC,IAAIyjB,EAAQz3B,KAAK6qC,0BAA0B72B,GAC3C,GAAIsQ,IAAamT,EAAO,CACpBvH,EAAOpkB,UAAU67B,WAAWx+B,KAAKnJ,KAAMgU,EAAKZ,QAK5D9P,OAAOssB,eAAemZ,EAAOj9B,UAAW,0BAA2B,CAC/D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUY,GACb,IAAKhU,KAAK+mC,gBAAgB/yB,GAAM,CAC5B,IAAIyjB,EAAQz3B,KAAK4qC,mBAAmB52B,GACpC,GAAIyjB,EAAO,CAEPvH,EAAOpkB,UAAUyH,IAAIpK,KAAKnJ,KAAMgU,EAAKyjB,EAAMwM,UAAUjwB,QAEpD,CACDkc,EAAOpkB,UAAUyT,OAAOpW,KAAKnJ,KAAMgU,QAKnD1Q,OAAOssB,eAAemZ,EAAOj9B,UAAW,iCAAkC,CACtE4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUY,GACb,IAAKhU,KAAKyqC,uBAAuBz2B,GAAM,CACnC,IAAIyjB,EAAQz3B,KAAK6qC,0BAA0B72B,GAC3C,GAAIyjB,EAAO,CAEPvH,EAAOpkB,UAAU67B,WAAWx+B,KAAKnJ,KAAMgU,EAAKyjB,EAAM4Q,iBAAiBr0B,QAElE,CACDkc,EAAOpkB,UAAUg/B,cAAc3hC,KAAKnJ,KAAMgU,QAK1D1Q,OAAOssB,eAAemZ,EAAOj9B,UAAW,eAAgB,CACpD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUlT,GACbA,EAAEF,KAAKk5B,MAAM6R,gBACb7qC,EAAEF,SAIVsD,OAAOssB,eAAemZ,EAAOj9B,UAAW,mBAAoB,CACxD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUrL,GACb,IAAIijC,EAAQhrC,KAAKkV,OAAOtG,OAAO7G,EAAM,IACrC,IAAIu8B,EAAO,GACXtkC,KAAKirC,eAAc,SAAU3mB,GACzB,IAAI/O,EAAQ+O,EAASpP,OAAOqvB,OAAOx8B,GACnC,GAAIwN,EAAO,CACPA,EAAM21B,OAAOF,EAAO1G,OAG5BlL,GAAa4R,EAAM/G,WAAW,SAAUjwB,GACpC,IAAKswB,EAAKtwB,KAASg3B,EAAM7G,cAAcnwB,GAAM,CACzCg3B,EAAMzrB,OAAOvL,UAK7B1Q,OAAOssB,eAAemZ,EAAOj9B,UAAW,iBAAkB,CACtD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUkR,EAAU/O,GACvB,IAAI4a,EAAQnwB,KACZA,KAAKmrC,mBAAmB3lC,KAAK8e,EAAS4mB,OAAOlrC,KAAMuV,IACnD6jB,GAAa9U,EAAS2f,WAAW,SAAUjwB,EAAKZ,GAC5C,IAAKmC,EAAMyuB,SAAShwB,KAASmc,EAAM4W,gBAAgB/yB,GAAM,CACrDuB,EAAMyuB,SAAShwB,GAAO,KACtBkc,EAAOpkB,UAAUyH,IAAIpK,KAAKgnB,EAAOnc,EAAKZ,OAG9CgmB,GAAa9U,EAAS+jB,kBAAkB,SAAUr0B,EAAKZ,GACnD,IAAKmC,EAAM61B,gBAAgBp3B,KAASmc,EAAMsa,uBAAuBz2B,GAAM,CACnEuB,EAAM61B,gBAAgBp3B,GAAO,KAC7Bkc,EAAOpkB,UAAU67B,WAAWx+B,KAAKgnB,EAAOnc,EAAKZ,OAGrD,GAAIpT,KAAKqrC,WAAa/mB,EAASgnB,MAAO,CAClCtrC,KAAKqrC,UAAY,MACjB/mB,EAASgnB,MAAMtrC,UAO3BsD,OAAOssB,eAAemZ,EAAOj9B,UAAW,sBAAuB,CAC3D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUlT,GACb,GAAIF,KAAKqpC,UAAW,CAChB,GAAInpC,EAAEF,KAAKqpC,WAAY,CACnB,OAAOrpC,KAAKqpC,eAK5B/lC,OAAOssB,eAAemZ,EAAOj9B,UAAW,gBAAiB,CACrD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUlT,GACbF,KAAKurC,qBAAoB,SAAUjnB,GAC/BpkB,EAAEokB,GACF,OAAO,SAGX8P,GAAmBp0B,KAAKmpC,mBAAoBjpC,GAE5CkwB,GAAYpwB,KAAKwrC,WAAYtrC,MAGrCoD,OAAOssB,eAAemZ,EAAOj9B,UAAW,kBAAmB,CACvD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUmM,GACb,IAAI4Q,EAAQnwB,KACZ,GAAIuf,SAAgB,EAAG,CAAEA,EAAS,KAClC,GAAIA,EAAQ,CACRvf,KAAKyrC,oBAET,IAAIl2B,EAAQ,CACRyuB,SAAU,GACVoH,gBAAiB,GACjBl2B,OAAQ,IAEZlV,KAAKirC,eAAc,SAAU3mB,GACzB6L,EAAMub,eAAepnB,EAAU/O,MAEnC,GAAIgK,EAAQ,CACR6Z,GAAap5B,KAAKikC,WAAW,SAAUjwB,GACnC,IAAKmc,EAAM4W,gBAAgB/yB,KAASuB,EAAMyuB,SAAShwB,GAAM,CACrDkc,EAAOpkB,UAAUyT,OAAOpW,KAAKgnB,EAAOnc,OAG5ColB,GAAap5B,KAAKqoC,kBAAkB,SAAUr0B,GAC1C,IAAKmc,EAAMsa,uBAAuBz2B,KAASuB,EAAM61B,gBAAgBp3B,GAAM,CACnEkc,EAAOpkB,UAAUg/B,cAAc3hC,KAAKgnB,EAAOnc,WAM/D1Q,OAAOssB,eAAemZ,EAAOj9B,UAAW,gBAAiB,CACrD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUlT,GACb,IAAIkT,EAAQpT,KAAKurC,oBAAoBrrC,GACrC,GAAIkT,IAAU8E,UAAW,CAErB,IAAIyzB,EAAUC,GAAmB5rC,KAAKmpC,mBAAoBjpC,GAC1D,GAAIyrC,IAAYzzB,UAAW,CAEvB,OAAO2zB,GAAY7rC,KAAKwrC,WAAYtrC,OAEnC,CACD,OAAOyrC,OAGV,CACD,OAAOv4B,MAInB9P,OAAOssB,eAAemZ,EAAOj9B,UAAW,qBAAsB,CAC1D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUY,GACb,OAAOhU,KAAK8rC,eAAc,SAAUxnB,GAChC,OAAOtQ,KAAOsQ,EAAS2f,gBAInC3gC,OAAOssB,eAAemZ,EAAOj9B,UAAW,4BAA6B,CACjE4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUY,GACb,OAAOhU,KAAK8rC,eAAc,SAAUxnB,GAChC,OAAOtQ,KAAOsQ,EAAS+jB,uBAInC/kC,OAAOssB,eAAemZ,EAAOj9B,UAAW,oBAAqB,CACzD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACHgd,GAAYpwB,KAAKmrC,oBAAoB,SAAUxa,GAC3CA,EAAStc,aAEbrU,KAAKmrC,mBAAmBnnC,OAAS,KAGzCV,OAAOssB,eAAemZ,EAAOj9B,UAAW,mBAAoB,CACxD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAI+c,EAAQnwB,KACZowB,GAAYpwB,KAAKwrC,YAAY,SAAUlnB,GACnCA,EAAS4lB,sBAAsB/Z,MAEnCnwB,KAAKwrC,WAAWxnC,OAAS,KAGjCV,OAAOssB,eAAemZ,EAAOj9B,UAAW,eAAgB,CACpD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAI+c,EAAQnwB,KACZ,IAAI6T,EAAc,MAClB,IAAIk4B,EAAW,GACf,IAAIC,EAAS,GACb,IAAIC,EAAY,IAAIC,IACpB,IAAIC,EAAOnsC,KAAKsT,IAAI,iBACpB,GAAI64B,EAAM,CACN/b,GAAY+b,GAAM,SAAUC,GACxBH,EAAUztB,IAAI4tB,MAGtBpsC,KAAKqsC,cAAa,SAAUrL,GACxB,GAAIA,IAAW7Q,EAAM+I,MAAM6R,eAAgB,CACvCl3B,EAAc,KAElB,GAAImtB,EAAOsL,eAAetoC,OAAS,EAAG,CAClC+nC,EAASvmC,KAAKw7B,EAAOsL,gBAEzB,IAAIC,EAAQvL,EAAO1tB,IAAI,UACvB,GAAIi5B,EAAO,CACPP,EAAOxmC,KAAK+mC,GAEhB,IAAIJ,EAAOnL,EAAO1tB,IAAI,aACtB,GAAI64B,EAAM,CACN/b,GAAY+b,GAAM,SAAUC,GACxBH,EAAUztB,IAAI4tB,UAI1BJ,EAASD,EAASjiC,OAAOkiC,GACzBhsC,KAAKwsC,mBACL,GAAI34B,EAAa,CACbugB,GAAmBp0B,KAAK6pC,YAAY,SAAU9hC,GAC1C,IAAI0kC,EAAW,GACfrc,GAAY4b,GAAQ,SAAUA,GAC1B5b,GAAY4b,GAAQ,SAAUO,GAC1B,IAAIG,EAAQH,EAAMI,aAAa5kC,GAC/B,GAAI2kC,EAAO,CACPtY,GAAmBsY,GAAO,SAAUE,GAChC,IAAI9d,EAAU8d,EAAKT,KAAKU,OAAM,SAAUT,GACpC,OAAOH,EAAUr2B,IAAIw2B,MAEzB,GAAItd,EAAS,CACT,IAAIljB,EAASkhC,GAA2BL,GAAU,SAAU7+B,GACxD,IAAI2hB,EAAQwd,GAAeH,EAAKT,KAAKnoC,OAAQ4J,EAAEu+B,KAAKnoC,QACpD,GAAIurB,IAAU,EAAG,CACb,OAAOyd,GAAoBJ,EAAKT,KAAMv+B,EAAEu+B,KAAMY,QAE7C,CACD,OAAOxd,MAGfkd,EAASzkC,OAAO4D,EAAO2C,MAAO,EAAGq+B,cAMrDxc,GAAYqc,GAAU,SAAUG,GAC5Bzc,EAAMqb,WAAWhmC,KAAKonC,EAAKtoB,UAC3BsoB,EAAKtoB,SAASmlB,mBAAmBtZ,SAI7CnwB,KAAK0pC,kBACL,GAAI71B,EAAa,CAEb7T,KAAKqrC,UAAY,MAErB,OAAOx3B,KAGfvQ,OAAOssB,eAAemZ,EAAOj9B,UAAW,WAAY,CAChD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,eAEX9P,OAAOssB,eAAemZ,EAAOj9B,UAAW,iBAAkB,CACtD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,GAAIpT,KAAKitC,QAAQ,MAAO,CACpB,IAAI/qC,EAAKlC,KAAKsT,IAAI,MAClB,GAAIpR,EAAI,CACJlC,KAAKopC,YAAYlnC,GAErB,IAAIgrC,EAASltC,KAAKioC,cAAc/lC,GAChC,GAAIgrC,EAAQ,QACD7H,GAAS8H,aAAaD,QAK7C5pC,OAAOssB,eAAemZ,EAAOj9B,UAAW,cAAe,CACnD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUlR,GACb,GAAImjC,GAAS8H,aAAajrC,IAAOmjC,GAAS8H,aAAajrC,KAAQlC,KAAM,CACjE,MAAM,IAAIyE,MAAM,sBAAyBvC,EAAK,qBAElDmjC,GAAS8H,aAAajrC,GAAMlC,QAGpCsD,OAAOssB,eAAemZ,EAAOj9B,UAAW,gBAAiB,CACrD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,eAKX9P,OAAOssB,eAAemZ,EAAOj9B,UAAW,cAAe,CACnD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUud,GACb3wB,KAAKqwB,WAAW7qB,KAAKmrB,GACrB,OAAOA,KAGfrtB,OAAOssB,eAAemZ,EAAOj9B,UAAW,WAAY,CAChD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAI+c,EAAQnwB,KACZkwB,EAAOpkB,UAAUikB,SAAS5mB,KAAKnJ,MAC/B,IAAIskB,EAAWtkB,KAAKqpC,UACpB,GAAI/kB,EAAU,CACVA,EAAS4lB,sBAAsBlqC,MAEnCowB,GAAYpwB,KAAKmpC,oBAAoB,SAAU7kB,GAC3CA,EAAS4lB,sBAAsB/Z,MAEnCnwB,KAAKwsC,mBACLxsC,KAAKyrC,oBACLzrC,KAAK+yB,OAAO1e,UACZrU,KAAKqwB,WAAWxjB,SAAQ,SAAUe,GAC9BA,EAAEyG,aAEN+kB,GAAap5B,KAAKiqC,qBAAqB,SAAUhoC,EAAGsuB,GAChDH,GAAYG,GAAW,SAAUI,GAC7BA,EAAStc,gBAGjB,IAAInS,EAAKlC,KAAKsT,IAAI,MAClB,GAAIpR,EAAI,QACGmjC,GAAS8H,aAAajrC,OAWzCoB,OAAOssB,eAAemZ,EAAOj9B,UAAW,aAAc,CAClD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUpM,EAAIomC,GACjB,IAAIjd,EAAQnwB,KACZ,IAAIkC,EAAKuL,YAAW,WAChB0iB,EAAMkd,cAAc1c,GACpB3pB,MACDomC,GACH,IAAIzc,EAAW,IAAIX,IAAS,WACxBpc,aAAa1R,MAEjBlC,KAAKqwB,WAAW7qB,KAAKmrB,GACrB,OAAOA,KAMfrtB,OAAOssB,eAAemZ,EAAOj9B,UAAW,gBAAiB,CACrD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUzH,GACb,IAAK3L,KAAKgnC,aAAc,CACpB,IAAIz4B,EAAQukB,GAAe9yB,KAAKqwB,WAAY1kB,GAC5C,GAAI4C,GAAS,EAAG,CACZvO,KAAKqwB,WAAWroB,OAAOuG,EAAO,IAGtC5C,EAAO0I,aAMf/Q,OAAOssB,eAAemZ,EAAOj9B,UAAW,SAAU,CAC9C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUg5B,GACb,OAAOtZ,GAAe9yB,KAAKsT,IAAI,YAAa,IAAK84B,MAAU,KAMnE9oC,OAAOssB,eAAemZ,EAAOj9B,UAAW,SAAU,CAC9C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUg5B,GACb,IAAKpsC,KAAKstC,OAAOlB,GAAM,CACnB,IAAID,EAAOnsC,KAAKsT,IAAI,YAAa,IACjC64B,EAAK3mC,KAAK4mC,GACVpsC,KAAKuT,IAAI,YAAa44B,OAOlC7oC,OAAOssB,eAAemZ,EAAOj9B,UAAW,YAAa,CACjD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUg5B,GACb,GAAIpsC,KAAKstC,OAAOlB,GAAM,CAClB,IAAID,EAAOnsC,KAAKsT,IAAI,YAAa,IACjCi6B,GAAcpB,EAAMC,GACpBpsC,KAAKuT,IAAI,YAAa44B,OAIlC7oC,OAAOssB,eAAemZ,EAAOj9B,UAAW,KAAM,CAC1C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUrD,EAAMy9B,GACnB,IAAIz8B,EACJ,IAAI08B,EAAO,GACX,IAAK,IAAIC,EAAK,EAAGA,EAAK1hC,UAAUhI,OAAQ0pC,IAAM,CAC1CD,EAAKC,EAAK,GAAK1hC,UAAU0hC,GAE7B,OAAQ38B,EAAK/Q,KAAKk5B,MAAMyU,UAAUC,UAAU7hC,MAAMgF,EAAIwb,GAAc,CAACxc,EAAMy9B,GAASnhB,GAAOohB,GAAO,WAG1GnqC,OAAOssB,eAAemZ,EAAOj9B,UAAW,OAAQ,CAQ5CwH,IAAK,WACD,OAAOtT,KAAKk5B,OAEhBxjB,WAAY,MACZC,aAAc,OAElBrS,OAAOssB,eAAemZ,EAAQ,YAAa,CACvCrzB,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WAEX9P,OAAOssB,eAAemZ,EAAQ,aAAc,CACxCrzB,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,CAAC,YAEZ,OAAO21B,EAzhCD,CA0hCRjC,IC3/DF,IAAI+G,GAA+B,WAC/B,SAASA,EAAc9lC,EAAMuc,EAAU0f,GACnC1gC,OAAOssB,eAAe5vB,KAAM,YAAa,CACrC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAe5vB,KAAM,QAAS,CACjC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAe5vB,KAAM,YAAa,CACrC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhBpT,KAAKqqC,MAAQtiC,EACb/H,KAAKqpC,UAAY/kB,EACjBtkB,KAAKikC,UAAYD,EAErB1gC,OAAOssB,eAAeie,EAAc/hC,UAAW,MAAO,CAClD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUY,EAAKkwB,GAClB,IAAI9wB,EAAQpT,KAAKikC,UAAUjwB,GAC3B,GAAIZ,IAAU8E,UAAW,CACrB,OAAO9E,MAEN,CACD,OAAO8wB,MAInB5gC,OAAOssB,eAAeie,EAAc/hC,UAAW,MAAO,CAClD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUY,EAAKZ,GAClBpT,KAAKikC,UAAUjwB,GAAOZ,EAEtBpT,KAAKqpC,UAAUyE,cAAc9tC,KAAKqqC,UAG1C/mC,OAAOssB,eAAeie,EAAc/hC,UAAW,SAAU,CACrD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUY,UACNhU,KAAKikC,UAAUjwB,GAEtBhU,KAAKqpC,UAAUyE,cAAc9tC,KAAKqqC,UAG1C/mC,OAAOssB,eAAeie,EAAc/hC,UAAW,SAAU,CACrD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU4wB,GACb,IAAI7T,EAAQnwB,KACZqkC,GAAaL,GAAUn3B,SAAQ,SAAUmH,GACrCmc,EAAM8T,UAAUjwB,GAAOgwB,EAAShwB,MAEpChU,KAAKqpC,UAAUyE,cAAc9tC,KAAKqqC,UAG1C/mC,OAAOssB,eAAeie,EAAc/hC,UAAW,SAAU,CACrD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU43B,EAAO1G,GACpBlL,GAAap5B,KAAKikC,WAAW,SAAUjwB,EAAKZ,GACxC,IAAKkxB,EAAKtwB,KAASg3B,EAAM7G,cAAcnwB,GAAM,CACzCswB,EAAKtwB,GAAO,KACZg3B,EAAM5G,OAAOpwB,EAAKZ,UAKlC,OAAOy6B,EAnFM,GAsFjB,IAAIE,GAAgC,WAChC,SAASA,EAAezpB,GACpBhhB,OAAOssB,eAAe5vB,KAAM,YAAa,CACrC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAe5vB,KAAM,UAAW,CACnC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,KAEXpT,KAAKqpC,UAAY/kB,EAErBhhB,OAAOssB,eAAeme,EAAejiC,UAAW,SAAU,CACtD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUrL,GACb,OAAO/H,KAAK8kC,QAAQ/8B,MAG5BzE,OAAOssB,eAAeme,EAAejiC,UAAW,SAAU,CACtD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUrL,EAAMi8B,GACnB,IAAIzuB,EAAQvV,KAAK8kC,QAAQ/8B,GACzB,GAAIwN,EAAO,CACPA,EAAM4e,OAAO6P,GACb,OAAOzuB,MAEN,CACD,IAAIwvB,EAAU,IAAI8I,GAAc9lC,EAAM/H,KAAKqpC,UAAWrF,GACtDhkC,KAAK8kC,QAAQ/8B,GAAQg9B,EACrB/kC,KAAKqpC,UAAUyE,cAAc/lC,GAC7B,OAAOg9B,MAInBzhC,OAAOssB,eAAeme,EAAejiC,UAAW,SAAU,CACtD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUrL,UACN/H,KAAK8kC,QAAQ/8B,GACpB/H,KAAKqpC,UAAUyE,cAAc/lC,MAGrCzE,OAAOssB,eAAeme,EAAejiC,UAAW,SAAU,CACtD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU4tB,EAAQzrB,GACrB6jB,GAAap5B,KAAK8kC,SAAS,SAAU9wB,EAAKZ,GACtC,IAAIkxB,EAAO/uB,EAAML,OAAOlB,GACxB,GAAIswB,GAAQ,KAAM,CACdA,EAAO/uB,EAAML,OAAOlB,GAAO,GAE/B,IAAIg3B,EAAQhK,EAAO9rB,OAAOtG,OAAOoF,EAAK,IACtCZ,EAAM83B,OAAOF,EAAO1G,SAIhC,OAAOyJ,EAlEO,GAqElB,IAAIC,GAAkC,WAClC,SAASA,IACL1qC,OAAOssB,eAAe5vB,KAAM,aAAc,CACtC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,KAGf9P,OAAOssB,eAAeoe,EAAiBliC,UAAW,MAAO,CACrD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUY,EAAK8B,GAClB,IAAIqa,EAAQnwB,KACZ,IAAI2lC,EAAY3lC,KAAK4lC,WAAW5xB,GAChC,GAAI2xB,IAAcztB,UAAW,CACzBytB,EAAY3lC,KAAK4lC,WAAW5xB,GAAO,GAEvC2xB,EAAUngC,KAAKsQ,GACf,OAAO,IAAIka,IAAS,WAChB8V,GAAmBH,EAAW7vB,GAC9B,GAAI6vB,EAAU3hC,SAAW,EAAG,QACjBmsB,EAAMyV,WAAW5xB,UAKxC1Q,OAAOssB,eAAeoe,EAAiBliC,UAAW,SAAU,CACxD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUY,GACb,IAAI2xB,EAAY3lC,KAAK4lC,WAAW5xB,GAChC,GAAI2xB,IAAcztB,UAAW,QAClBlY,KAAK4lC,WAAW5xB,OAInC1Q,OAAOssB,eAAeoe,EAAiBliC,UAAW,SAAU,CACxD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU4tB,GACb,IAAIzQ,EAAY,GAChB6I,GAAap5B,KAAK4lC,YAAY,SAAU5xB,EAAK2xB,GACzCvV,GAAYuV,GAAW,SAAU7vB,GAC7Bya,EAAU/qB,KAAKw7B,EAAOsJ,SAAS9rB,IAAIxK,EAAK8B,UAGhD,OAAO,IAAIwa,GAAcC,MAGjC,OAAOyd,EArDS,GAyDpB,IAAIC,GAA0B,WAC1B,SAASA,EAASjK,EAAUgF,GACxB1lC,OAAOssB,eAAe5vB,KAAM,YAAa,CACrC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAe5vB,KAAM,mBAAoB,CAC5C0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,KAGX9P,OAAOssB,eAAe5vB,KAAM,iBAAkB,CAC1C0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,KAEX9P,OAAOssB,eAAe5vB,KAAM,wBAAyB,CACjD0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,KAEX9P,OAAOssB,eAAe5vB,KAAM,YAAa,CACrC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,KAEX9P,OAAOssB,eAAe5vB,KAAM,SAAU,CAClC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,IAAI26B,GAAe/tC,QAE9BsD,OAAOssB,eAAe5vB,KAAM,WAAY,CACpC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,IAAI46B,KAEf1qC,OAAOssB,eAAe5vB,KAAM,SAAU,CAClC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,IAAI0d,KAEfxtB,OAAOssB,eAAe5vB,KAAM,QAAS,CACjC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB,IAAK41B,EAAQ,CACT,MAAM,IAAIvkC,MAAM,2DAEpBzE,KAAKikC,UAAYD,EAWrB1gC,OAAOssB,eAAeqe,EAAU,MAAO,CACnCv4B,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU4wB,GACb,OAAO,IAAIiK,EAASjK,EAAU,SAGtC1gC,OAAOssB,eAAeqe,EAASniC,UAAW,MAAO,CAC7C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUY,EAAKkwB,GAClB,IAAI9wB,EAAQpT,KAAKikC,UAAUjwB,GAC3B,GAAIZ,IAAU8E,UAAW,CACrB,OAAO9E,MAEN,CACD,OAAO8wB,MAInB5gC,OAAOssB,eAAeqe,EAASniC,UAAW,SAAU,CAChD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUY,EAAKZ,GAClBpT,KAAKikC,UAAUjwB,GAAOZ,KAG9B9P,OAAOssB,eAAeqe,EAASniC,UAAW,MAAO,CAC7C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUY,EAAKZ,GAClB,IAAI+c,EAAQnwB,KACZ,GAAIA,KAAKikC,UAAUjwB,KAASZ,EAAO,CAC/BpT,KAAKokC,OAAOpwB,EAAKZ,GACjBpT,KAAKkuC,UAAUrhC,SAAQ,SAAUm0B,GAC7BA,EAAOmN,qBAAqBhe,EAAOnc,EAAKZ,UAKxD9P,OAAOssB,eAAeqe,EAASniC,UAAW,SAAU,CAChD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUY,GACb,GAAIA,KAAOhU,KAAKikC,UAAW,QAChBjkC,KAAKikC,UAAUjwB,GACtBhU,KAAKkuC,UAAUrhC,SAAQ,SAAUm0B,GAC7BA,EAAOwJ,wBAAwBx2B,UAK/C1Q,OAAOssB,eAAeqe,EAASniC,UAAW,YAAa,CACnD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAI+c,EAAQnwB,KACZo5B,GAAap5B,KAAKikC,WAAW,SAAUjwB,EAAK0c,GACxCP,EAAM5Q,OAAOvL,SAIzB1Q,OAAOssB,eAAeqe,EAASniC,UAAW,aAAc,CACpD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUY,EAAKkwB,GAClB,IAAI9wB,EAAQpT,KAAKqoC,iBAAiBr0B,GAClC,GAAIZ,IAAU8E,UAAW,CACrB,OAAO9E,MAEN,CACD,OAAO8wB,MAInB5gC,OAAOssB,eAAeqe,EAASniC,UAAW,gBAAiB,CACvD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUY,EAAKZ,GAClBpT,KAAKqoC,iBAAiBr0B,GAAOZ,EAC7B,OAAOA,KAGf9P,OAAOssB,eAAeqe,EAASniC,UAAW,aAAc,CACpD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUY,EAAKZ,GAClB,IAAI+c,EAAQnwB,KACZ,GAAIA,KAAKqoC,iBAAiBr0B,KAASZ,EAAO,CACtCpT,KAAK0qC,cAAc12B,EAAKZ,GACxBpT,KAAKkuC,UAAUrhC,SAAQ,SAAUm0B,GAC7BA,EAAOoN,4BAA4Bje,EAAOnc,EAAKZ,MAGvD,OAAOA,KAGf9P,OAAOssB,eAAeqe,EAASniC,UAAW,gBAAiB,CACvD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUY,GACb,GAAIA,KAAOhU,KAAKqoC,iBAAkB,QACvBroC,KAAKqoC,iBAAiBr0B,GAC7BhU,KAAKkuC,UAAUrhC,SAAQ,SAAUm0B,GAC7BA,EAAO2J,+BAA+B32B,UAKtD1Q,OAAOssB,eAAeqe,EAASniC,UAAW,SAAU,CAChD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUA,GACb,IAAI+c,EAAQnwB,KACZo5B,GAAahmB,GAAO,SAAUY,EAAKZ,GAC/B+c,EAAM5c,IAAIS,EAAKZ,SAK3B9P,OAAOssB,eAAeqe,EAASniC,UAAW,KAAM,CAC5C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUY,EAAK8B,GAClB,IAAIqa,EAAQnwB,KACZ,IAAI+yB,EAAS/yB,KAAK8nC,eAAe9zB,GACjC,GAAI+e,IAAW7a,UAAW,CACtB6a,EAAS/yB,KAAK8nC,eAAe9zB,GAAO,GAExC+e,EAAOvtB,KAAKsQ,GACZ,OAAO,IAAIka,IAAS,WAChB8V,GAAmB/S,EAAQjd,GAC3B,GAAIid,EAAO/uB,SAAW,EAAG,QACdmsB,EAAM2X,eAAe9zB,UAM5C1Q,OAAOssB,eAAeqe,EAASniC,UAAW,YAAa,CACnD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUY,EAAK8B,GAClB,IAAIqa,EAAQnwB,KACZ,IAAI+yB,EAAS/yB,KAAK+nC,sBAAsB/zB,GACxC,GAAI+e,IAAW7a,UAAW,CACtB6a,EAAS/yB,KAAK+nC,sBAAsB/zB,GAAO,GAE/C+e,EAAOvtB,KAAKsQ,GACZ,OAAO,IAAIka,IAAS,WAChB8V,GAAmB/S,EAAQjd,GAC3B,GAAIid,EAAO/uB,SAAW,EAAG,QACdmsB,EAAM4X,sBAAsB/zB,UAKnD1Q,OAAOssB,eAAeqe,EAASniC,UAAW,SAAU,CAChD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU4tB,EAAQzrB,GACrB,IAAIgb,EAAY,GAChB6I,GAAap5B,KAAK8nC,gBAAgB,SAAU9zB,EAAK+e,GAC7C3C,GAAY2C,GAAQ,SAAUhB,GAC1BxB,EAAU/qB,KAAKw7B,EAAO79B,GAAG6Q,EAAK+d,UAGtCqH,GAAap5B,KAAK+nC,uBAAuB,SAAU/zB,EAAK+e,GACpD3C,GAAY2C,GAAQ,SAAUhB,GAC1BxB,EAAU/qB,KAAKw7B,EAAOqN,UAAUr6B,EAAK+d,UAG7C/xB,KAAKkV,OAAOg2B,OAAOlK,EAAQzrB,GAC3Bgb,EAAU/qB,KAAKxF,KAAKsqC,SAASY,OAAOlK,IACpCzQ,EAAU/qB,KAAKw7B,EAAOjO,OAAOub,SAAStuC,KAAK+yB,SAC3C,OAAO,IAAIzC,GAAcC,MAGjCjtB,OAAOssB,eAAeqe,EAASniC,UAAW,qBAAsB,CAC5D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU4tB,GACbhhC,KAAKkuC,UAAU1oC,KAAKw7B,MAG5B19B,OAAOssB,eAAeqe,EAASniC,UAAW,wBAAyB,CAC/D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU4tB,GACbuM,GAAcvtC,KAAKkuC,UAAWlN,MAGtC19B,OAAOssB,eAAeqe,EAASniC,UAAW,gBAAiB,CACvD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUrL,GACb/H,KAAKkuC,UAAUrhC,SAAQ,SAAUm0B,GAC7BA,EAAOuN,iBAAiBxmC,SAIpC,OAAOkmC,EAjSC,GCtMZ,IAAIO,GAAuC,SAAUte,GACjD1F,GAAUgkB,EAAuBte,GACjC,SAASse,EAAsBC,GAC3B,IAAIte,EAAQD,EAAO/mB,KAAKnJ,OAASA,KACjCsD,OAAOssB,eAAeO,EAAO,UAAW,CACpCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAeO,EAAO,qBAAsB,CAC/Cza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,KAEX9P,OAAOssB,eAAeO,EAAO,mBAAoB,CAC7Cza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,OAEX+c,EAAMue,QAAUD,EAChB,OAAOte,EAEX7sB,OAAOssB,eAAe4e,EAAsB1iC,UAAW,oBAAqB,CACxE4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUY,EAAK+d,GAClB,MAAO,CACHjwB,KAAMkS,EACN26B,cAAe5c,EAAMA,MACrB6c,MAAO7c,EAAM6c,MACbC,UAAW9c,EAAM8c,UACjBC,OAAQ/c,EAAM+c,OACdnjC,OAAQ3L,KAAK0uC,YAIzBprC,OAAOssB,eAAe4e,EAAsB1iC,UAAW,cAAe,CAClE4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUY,EAAKie,GAClB,IAAI9B,EAAQnwB,KAEZA,KAAK0uC,QAAQn7B,IAAI,cAAe,MAChCvT,KAAK0uC,QAAQrZ,SAAS6C,YAAc,KACpC,IAAInF,EAAS/yB,KAAK+uC,mBAAmB/6B,GACrC,GAAI+e,IAAW7a,UAAW,CACtB,IAAI82B,EAAahvC,KAAK0uC,QAAQrZ,SAASlyB,GAAG6Q,GAAK,SAAUpU,GACrDqyB,EAAS9oB,KAAKgnB,EAAOvwB,MAEzBmzB,EAAS/yB,KAAK+uC,mBAAmB/6B,GAAO,IAAI4c,IAAgB,kBACjDT,EAAM4e,mBAAmB/6B,GAChCg7B,EAAW36B,aAGnB,OAAO0e,EAAOkc,eAGtB3rC,OAAOssB,eAAe4e,EAAsB1iC,UAAW,MAAO,CAC1D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUme,EAAMzvB,EAAMgU,EAAU0b,EAASU,EAAaD,GACzD,IAAIP,EAAOxB,EAAOpkB,UAAUsmB,IAAIjpB,KAAKnJ,KAAMuxB,EAAMzvB,EAAMgU,EAAU0b,EAASU,EAAaD,GACvF,IAAIid,EAAgBV,EAAsBW,gBAAgBrtC,GAC1D,GAAIotC,IAAkBh3B,UAAW,CAC7BwZ,EAAKf,SAAW,IAAIL,GAAc,CAC9BoB,EAAKf,SACL3wB,KAAKovC,YAAYttC,EAAMotC,KAG/B,OAAOxd,KAuBfpuB,OAAOssB,eAAe4e,EAAsB1iC,UAAW,qBAAsB,CACzE4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACHpT,KAAKqvC,iBAAmB,SAMhC/rC,OAAOssB,eAAe4e,EAAsB1iC,UAAW,kBAAmB,CACtE4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUtR,EAAMiwB,GACnB,IAAIkC,EAAMj0B,KAAKqvC,iBACfrvC,KAAKqvC,iBAAmB,KACxB,IACIrvC,KAAKiyB,SAASnwB,EAAMiwB,GACpB,GAAI/xB,KAAKqvC,kBAAoBrvC,KAAK0uC,QAAQY,OAAQ,CAC9CtvC,KAAK0uC,QAAQY,OAAOvc,OAAOwc,gBAAgBztC,EAAMiwB,IAGrE,QACgB/xB,KAAKqvC,iBAAmBpb,MAIpC3wB,OAAOssB,eAAe4e,EAAuB,kBAAmB,CAC5D94B,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,CACHo8B,MAAS,SAAUzd,GACf,GAAI/xB,KAAKgzB,UAAU,WAAahzB,KAAK0uC,QAAQe,cAAgBzvC,KAAK0uC,QAAQgB,aAAe1vC,KAAK0uC,QAAQiB,UAAU3vC,KAAK4vC,kBAAkB,QAAS7d,IAAS,CACrJ/xB,KAAKiyB,SAAS,QAASjyB,KAAK4vC,kBAAkB,QAAS7d,MAG/D8d,WAAc,SAAU9d,GACpB,GAAI/xB,KAAKgzB,UAAU,cAAe,CAC9BhzB,KAAKiyB,SAAS,aAAcjyB,KAAK4vC,kBAAkB,aAAc7d,MAGzE+d,YAAe,SAAU/d,GACrB,GAAI/xB,KAAKgzB,UAAU,eAAgB,CAC/BhzB,KAAKiyB,SAAS,cAAejyB,KAAK4vC,kBAAkB,cAAe7d,MAG3Ege,SAAY,SAAUhe,GAClB/xB,KAAKuvC,gBAAgB,WAAYvvC,KAAK4vC,kBAAkB,WAAY7d,KAExEie,YAAe,SAAUje,GACrB,GAAI/xB,KAAKgzB,UAAU,eAAgB,CAC/BhzB,KAAKiyB,SAAS,cAAejyB,KAAK4vC,kBAAkB,cAAe7d,MAG3Eke,WAAc,SAAUle,GACpB,GAAI/xB,KAAKgzB,UAAU,cAAe,CAC9BhzB,KAAKiyB,SAAS,aAAcjyB,KAAK4vC,kBAAkB,aAAc7d,MAGzEme,YAAe,SAAUne,GACrB/xB,KAAKuvC,gBAAgB,cAAevvC,KAAK4vC,kBAAkB,cAAe7d,KAE9Eoe,UAAa,SAAUpe,GACnB,GAAI/xB,KAAKgzB,UAAU,aAAc,CAC7BhzB,KAAKiyB,SAAS,YAAajyB,KAAK4vC,kBAAkB,YAAa7d,MAGvEqe,gBAAmB,SAAUre,GACzB,GAAI/xB,KAAKgzB,UAAU,mBAAoB,CACnChzB,KAAKiyB,SAAS,kBAAmBjyB,KAAK4vC,kBAAkB,kBAAmB7d,MAGnFse,kBAAqB,SAAUte,GAC3B,GAAI/xB,KAAKgzB,UAAU,qBAAsB,CACrChzB,KAAKiyB,SAAS,oBAAqBjyB,KAAK4vC,kBAAkB,oBAAqB7d,MAGvFue,MAAS,SAAUve,GACf/xB,KAAKuvC,gBAAgB,QAAS,CAC1BztC,KAAM,QACN6J,OAAQ3L,KAAK0uC,QACbC,cAAe5c,EAAMA,MACrB6c,MAAO7c,EAAM6c,YAK7B,OAAOJ,EA5Lc,CA6LvB1d,IAMF,IAAIyf,GAAwB,SAAUrgB,GAClC1F,GAAU+lB,EAAQrgB,GAClB,SAASqgB,IACL,IAAIpgB,EAAQD,IAAW,MAAQA,EAAOnkB,MAAM/L,KAAMgM,YAAchM,KAChEsD,OAAOssB,eAAeO,EAAO,uBAAwB,CACjDza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,CAAE4jB,KAAM,EAAGwM,MAAO,EAAGzM,IAAK,EAAG0M,OAAQ,KAEhDngC,OAAOssB,eAAeO,EAAO,eAAgB,CACzCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,CAAE4jB,KAAM,EAAGwM,MAAO,EAAGzM,IAAK,EAAG0M,OAAQ,KAEhDngC,OAAOssB,eAAeO,EAAO,UAAW,CACpCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAeO,EAAO,YAAa,CACtCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAeO,EAAO,iBAAkB,CAC3Cza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAeO,EAAO,aAAc,CACvCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,QAGX9P,OAAOssB,eAAeO,EAAO,cAAe,CACxCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,QAGX9P,OAAOssB,eAAeO,EAAO,aAAc,CACvCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAGhB9P,OAAOssB,eAAeO,EAAO,aAAc,CACvCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAeO,EAAO,YAAa,CACtCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,QAEX9P,OAAOssB,eAAeO,EAAO,aAAc,CACvCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,QAEX9P,OAAOssB,eAAeO,EAAO,YAAa,CACtCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,QAEX9P,OAAOssB,eAAeO,EAAO,UAAW,CACpCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,QAEX9P,OAAOssB,eAAeO,EAAO,aAAc,CACvCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAeO,EAAO,cAAe,CACxCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,KAEX9P,OAAOssB,eAAeO,EAAO,YAAa,CACtCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAeO,EAAO,UAAW,CACpCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAeO,EAAO,aAAc,CACvCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAeO,EAAO,WAAY,CACrCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAeO,EAAO,WAAY,CACrCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAeO,EAAO,iBAAkB,CAC3Cza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAeO,EAAO,oBAAqB,CAC9Cza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAeO,EAAO,iBAAkB,CAC3Cza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,QAEX,OAAO+c,EAEX7sB,OAAOssB,eAAe2gB,EAAOzkC,UAAW,YAAa,CACjD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACHpT,KAAK0qC,cAAc,UAAW,MAC9Bxa,EAAOpkB,UAAUw9B,UAAUngC,KAAKnJ,SAGxCsD,OAAOssB,eAAe2gB,EAAOzkC,UAAW,gBAAiB,CACrD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUY,GACbkc,EAAOpkB,UAAU+5B,cAAc18B,KAAKnJ,KAAMgU,GAC1C,GAAIA,GAAO,KAAOA,GAAO,KAAOA,GAAO,MAAQA,GAAO,KAAM,CACxDhU,KAAKw1B,kBACLx1B,KAAKwwC,iCACLxwC,KAAKywC,wBAIjBntC,OAAOssB,eAAe2gB,EAAOzkC,UAAW,uBAAwB,CAC5D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUY,GACbkc,EAAOpkB,UAAU28B,qBAAqBt/B,KAAKnJ,KAAMgU,GACjD,GAAIA,GAAO,KAAOA,GAAO,IAAK,CAC1BhU,KAAKywC,wBAIjBntC,OAAOssB,eAAe2gB,EAAOzkC,UAAW,uBAAwB,CAC5D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,GAAIpT,KAAK0wC,eAAgB,CACrB1wC,KAAK0wC,eAAexG,sBAAsBlqC,UAItDsD,OAAOssB,eAAe2gB,EAAOzkC,UAAW,gBAAiB,CACrD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,OAAO,IAAIo7B,GAAsBxuC,SAGzCsD,OAAOssB,eAAe2gB,EAAOzkC,UAAW,wBAAyB,CAC7D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAIkR,EACJ,IAAIqsB,EAAQ3wC,KAAKsT,IAAI,iBACrB,GAAIq9B,EAAO,CACP,IAAIC,EAAW5wC,KAAK4wC,SACpB,GAAIA,EAAU,CACV,IAAIpf,EAAUof,EAASC,YACvB,GAAIrf,EAAS,CACTlN,EAAWkN,EAAQmf,GACnB,KAAMrsB,aAAoB2pB,KAAa3pB,EAAU,CAC7CA,EAAW2pB,GAAS6C,IAAIxsB,MAKxC,GAAItkB,KAAK0wC,iBAAmBpsB,EAAU,CAClCtkB,KAAK+wC,uBACL/wC,KAAK0wC,eAAiBpsB,EACtB,GAAIA,EAAU,CACVA,EAASmlB,mBAAmBzpC,MAEhCA,KAAK0pC,sBAMjBpmC,OAAOssB,eAAe2gB,EAAOzkC,UAAW,eAAgB,CACpD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUw9B,GACb,IAAII,EAAchxC,KAAKixC,UACvBjxC,KAAKixC,UAAYL,EACjB5wC,KAAKkxC,wBACL,IAAIC,EAAY,kBAChB,GAAInxC,KAAK+yB,OAAOC,UAAUme,GAAY,CAClCnxC,KAAK+yB,OAAOd,SAASkf,EAAW,CAC5BrvC,KAAMqvC,EACNxlC,OAAQ3L,KACRgxC,YAAaA,EACbI,YAAaR,QAK7BttC,OAAOssB,eAAe2gB,EAAOzkC,UAAW,WAAY,CAIhDwH,IAAK,WACD,GAAItT,KAAKixC,UAAW,CAChB,OAAOjxC,KAAKixC,cAEX,CACD,IAAII,EAAWrxC,KAAKsxC,QACpB,MAAOD,EAAU,CACb,GAAIA,EAASJ,UAAW,CACpB,OAAOI,EAASJ,cAEf,CACDI,EAAWA,EAASC,YAcpC/9B,IAAK,SAAUH,GACXpT,KAAKuxC,aAAan+B,IAEtBsC,WAAY,MACZC,aAAc,OAElBrS,OAAOssB,eAAe2gB,EAAOzkC,UAAW,6BAA8B,CAClE4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAIk8B,EAAStvC,KAAKsvC,OAClB,GAAIA,EAAQ,CACR,GAAItvC,KAAKsT,IAAI,mBAAoBoiB,IAAW11B,KAAKsT,IAAI,oBAAqBoiB,GAAS,CAC/E8b,GAAelC,EAAOmC,wBAAyBzxC,UAE9C,CACD8lC,GAAmBwJ,EAAOmC,wBAAyBzxC,WAKnEsD,OAAOssB,eAAe2gB,EAAOzkC,UAAW,iCAAkC,CACtE4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAIk8B,EAAStvC,KAAKsvC,OAClB,GAAIA,EAAQ,CACR,GAAItvC,KAAKsT,IAAI,eAAgBoiB,IAAW11B,KAAKsT,IAAI,eAAgBoiB,GAAS,CACtE8b,GAAelC,EAAOoC,4BAA6B1xC,UAElD,CACD8lC,GAAmBwJ,EAAOoC,4BAA6B1xC,WAQvEsD,OAAOssB,eAAe2gB,EAAOzkC,UAAW,oBAAqB,CACzD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACHpT,KAAKk5B,MAAMyY,kBAAkB3xC,SAGrCsD,OAAOssB,eAAe2gB,EAAOzkC,UAAW,mBAAoB,CACxD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAIw+B,EAAS5xC,KAAK6xC,aAClB,GAAID,EAAQ,CACR,IAAIE,EAAU9xC,KAAKsT,IAAI,WACvB,GAAIw+B,GAAW,KAAM,CACjB9xC,KAAKq1B,SAAS/F,MAAM1hB,EAAIgkC,EAAO5a,KAAO+a,GAAuBD,EAASF,EAAOpO,MAAQoO,EAAO5a,MAEhG,IAAIgb,EAAUhyC,KAAKsT,IAAI,WACvB,GAAI0+B,GAAW,KAAM,CACjBhyC,KAAKq1B,SAAS/F,MAAM3rB,EAAIiuC,EAAO7a,IAAMgb,GAAuBC,EAASJ,EAAOnO,OAASmO,EAAO7a,UAK5GzzB,OAAOssB,eAAe2gB,EAAOzkC,UAAW,iBAAkB,CACtD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAI+c,EAAQnwB,KACZkwB,EAAOpkB,UAAUmmC,eAAe9oC,KAAKnJ,MAErCA,KAAKkyC,gBACL,GAAIlyC,KAAKitC,QAAQ,WAAY,CACzB,IAAIkF,EAAWnyC,KAAKioC,cAAcmK,QAClC,GAAID,EAAU,CACVA,EAAS99B,WAGjB,GAAIrU,KAAKitC,QAAQ,UAAYjtC,KAAKitC,QAAQ,eAAgB,CACtDjtC,KAAKq1B,SAASgd,SAASryC,KAAKsT,IAAI,SAAUtT,KAAKsT,IAAI,gBACnDtT,KAAKsyC,iBAET,GAAItyC,KAAKitC,QAAQ,mBAAoB,CACjC,IAAIsF,EAAgBvyC,KAAKwyC,eACzB,GAAID,EAAe,CACfA,EAAcl+B,UACdrU,KAAKwyC,eAAiBt6B,UAE1B,IAAIu6B,EAAmBzyC,KAAK0yC,kBAC5B,GAAID,EAAkB,CAClBA,EAAiBp+B,UACjBrU,KAAK0yC,kBAAoBx6B,UAE7B,GAAIlY,KAAKsT,IAAI,oBAAsB,UAAW,CAC1CtT,KAAK0yC,kBAAoB,IAAIpiB,GAAc,CACvCtwB,KAAK+yB,OAAO5vB,GAAG,eAAe,WAC1BgtB,EAAMqiB,eAAiBriB,EAAM4C,OAAO5vB,GAAG,qBAAqB,SAAUvD,GAClEuwB,EAAMwiB,YAAY/yC,EAAEgvC,aAG5B5uC,KAAK+yB,OAAO5vB,GAAG,cAAc,WACzB,IAAIovC,EAAgBpiB,EAAMqiB,eAC1B,GAAID,EAAe,CACfA,EAAcl+B,UACd8b,EAAMqiB,eAAiBt6B,qBAQnD5U,OAAOssB,eAAe2gB,EAAOzkC,UAAW,gBAAiB,CACrD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAKpT,KAAK4yC,eAAgB,CACtB,GAAI5yC,KAAKitC,QAAQ,UAAW,CACxB,GAAIjtC,KAAKsT,IAAI,UAAW,CACpBtT,KAAKkV,OAAOgwB,aAAa,UACzBllC,KAAKuT,IAAI,cAAe,UAEvB,CACD,IAAKvT,KAAK6yC,WAAY,CAClB7yC,KAAKkV,OAAOgwB,aAAa,WAE7BllC,KAAKuT,IAAI,cAAe,OAE5BvT,KAAK8yC,yBAET,GAAI9yC,KAAKitC,QAAQ,YAAa,CAC1B,GAAIjtC,KAAKsT,IAAI,YAAa,CACtBtT,KAAKkV,OAAOgwB,aAAa,YACzBllC,KAAKuT,IAAI,cAAe,WAEvB,CACD,IAAKvT,KAAK6yC,WAAY,CAClB7yC,KAAKkV,OAAOgwB,aAAa,WAE7BllC,KAAKuT,IAAI,cAAe,MAE5BvT,KAAK8yC,yBAET9yC,KAAK4yC,eAAiB,SAIlCtvC,OAAOssB,eAAe2gB,EAAOzkC,UAAW,WAAY,CAChD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAI+c,EAAQnwB,KACZkwB,EAAOpkB,UAAUinC,SAAS5pC,KAAKnJ,MAC/B,IAAIigB,EAAUjgB,KAAKq1B,SACnB,IAAItC,EAAS/yB,KAAK+yB,OAClB,GAAI/yB,KAAKitC,QAAQ,aAAc,CAC3B,IAAIlxB,EAAY/b,KAAKsT,IAAI,aACzB,GAAIyI,EAAW,CACX/b,KAAKuT,IAAI,cAAe,MACxBvT,KAAKgzC,QAAU,IAAI1iB,GAAc,CAC7ByC,EAAO5vB,GAAG,eAAe,SAAUkb,GAC/B8R,EAAMpR,UAAUV,MAEpB0U,EAAO5vB,GAAG,qBAAqB,SAAUkb,GACrC8R,EAAM8iB,SAAS50B,MAEnB0U,EAAO5vB,GAAG,mBAAmB,SAAUkb,GACnC8R,EAAM+iB,SAAS70B,YAItB,CACD,GAAIre,KAAKgzC,QAAS,CACdhzC,KAAKgzC,QAAQ3+B,UACbrU,KAAKgzC,QAAU96B,WAGvB+H,EAAQkzB,YAAcp3B,EAAY,KAAO,MAE7C,GAAI/b,KAAKitC,QAAQ,gBAAkBjtC,KAAKitC,QAAQ,gBAAkBjtC,KAAKitC,QAAQ,iBAAkB,CAC7F,IAAImG,EAAcpzC,KAAKsT,IAAI,eAC3B,IAAI+/B,EAAcrzC,KAAKsT,IAAI,eAC3B,IAAIggC,EAAgBtzC,KAAKsT,IAAI,gBAAiB,SAC9C,GAAItT,KAAKuzC,WAAY,CACjBvzC,KAAKuzC,WAAWl/B,UAChBrU,KAAKuzC,WAAar7B,UAEtB,GAAIk7B,GAAeC,EAAa,CAC5B,GAAIC,GAAiB,QAAS,CAC1BtzC,KAAKuzC,WAAa,IAAIjjB,GAAc,CAChCyC,EAAO5vB,GAAG,SAAS,WACfgtB,EAAM1iB,YAAW,WAAc,OAAO0iB,EAAMwiB,gBAAkB,OAElEa,GAAwBlzC,SAAU,SAAS,SAAU8d,GACjD+R,EAAMsjB,wBAIb,GAAIH,GAAiB,cAGrB,CACDtzC,KAAKuzC,WAAa,IAAIjjB,GAAc,CAChCyC,EAAO5vB,GAAG,eAAe,WACrBgtB,EAAMwiB,iBAEV5f,EAAO5vB,GAAG,cAAc,WACpBgtB,EAAMsjB,qBAM1B,GAAIzzC,KAAKitC,QAAQ,aAAc,CAC3B,IAAIyG,EAAc1zC,KAAKsT,IAAI,aAC3B,GAAIogC,GAAeA,GAAe,OAAQ,CACtC1zC,KAAK2zC,UAAY5gB,EAAO5vB,GAAG,SAAS,WAChC,IAAKgtB,EAAMyjB,YAAa,CACpBzjB,EAAM5c,IAAImgC,GAAcvjB,EAAM7c,IAAIogC,YAIzC,CACD,GAAI1zC,KAAK2zC,UAAW,CAChB3zC,KAAK2zC,UAAUt/B,UACfrU,KAAK2zC,UAAYz7B,YAI7B,GAAIlY,KAAKitC,QAAQ,WAAY,CACzBhtB,EAAQif,MAAQ5zB,KAAKyY,IAAI,EAAG/jB,KAAKsT,IAAI,UAAW,IAEpD,GAAItT,KAAKitC,QAAQ,YAAa,CAC1BjtC,KAAKw1B,kBACLvV,EAAQoiB,MAAQriC,KAAKsT,IAAI,WAAY,GAEzC,GAAItT,KAAKitC,QAAQ,SAAU,CACvBjtC,KAAKw1B,kBACLvV,EAAQR,MAAQzf,KAAKsT,IAAI,QAAS,GAEtC,GAAItT,KAAKitC,QAAQ,YAAcjtC,KAAKitC,QAAQ,WAAY,CACpDjtC,KAAKw1B,kBACLx1B,KAAK6zC,mBAET,GAAI7zC,KAAKitC,QAAQ,YAAcjtC,KAAK8zC,eAAe,YAAc9zC,KAAKitC,QAAQ,eAAgB,CAC1F,IAAKjtC,KAAKsT,IAAI,aAAetT,KAAK6oC,WAAW,YAAc7oC,KAAKsT,IAAI,eAAgB,CAChF2M,EAAQ8zB,QAAU,MAClB/zC,KAAKyzC,kBAEJ,CACDxzB,EAAQ8zB,QAAU,KAEtB/zC,KAAKw1B,kBACL,GAAIx1B,KAAKsT,IAAI,aAAc,CACvBtT,KAAK8yC,0BAGb,GAAI9yC,KAAKitC,QAAQ,UAAYjtC,KAAKitC,QAAQ,UAAW,CACjDjtC,KAAKw1B,kBACLx1B,KAAKg0C,6BACL,IAAIC,EAAWj0C,KAAKsvC,OACpB,GAAI2E,EAAU,CACV,GAAKj0C,KAAKitC,QAAQ,UAAYjtC,KAAKsT,IAAI,mBAAoBoiB,IAAa11B,KAAKitC,QAAQ,WAAajtC,KAAKsT,IAAI,oBAAqBoiB,GAAU,CACtIue,EAASxe,YACTwe,EAASC,WAAa,GAG9Bl0C,KAAKm0C,WAAa,KAEtB,GAAIn0C,KAAKitC,QAAQ,aAAejtC,KAAKitC,QAAQ,cAAgBjtC,KAAK8zC,eAAe,UAAY9zC,KAAK8zC,eAAe,WAAa9zC,KAAKitC,QAAQ,aAAejtC,KAAKitC,QAAQ,cAAgBjtC,KAAK8zC,eAAe,aAAe9zC,KAAK8zC,eAAe,cAAgB9zC,KAAK8zC,eAAe,aAAe9zC,KAAK8zC,eAAe,aAAc,CAC/T9zC,KAAKw1B,kBACLx1B,KAAKm0C,WAAa,KAEtB,GAAIn0C,KAAKm0C,WAAY,CACjBn0C,KAAKo0C,cAET,GAAIp0C,KAAKitC,QAAQ,aAAc,CAC3B,IAAIoH,EAAYr0C,KAAKsT,IAAI,aACzB,GAAI+gC,EAAW,CACXr0C,KAAKuT,IAAI,cAAe,MAE5B0M,EAAQo0B,UAAYA,EAAY,KAAO,MAG3C,GAAIr0C,KAAKitC,QAAQ,kBAAoBjtC,KAAKitC,QAAQ,kBAAmB,CACjE,GAAIjtC,KAAKsT,IAAI,aAAc,CACvBtT,KAAKk5B,MAAMob,uBAAuBt0C,UAEjC,CACDA,KAAKk5B,MAAMqb,yBAAyBv0C,OAG5C,GAAIA,KAAKitC,QAAQ,UAAW,CAExBhtB,EAAQnc,OAAS9D,KAAKsT,IAAI,UAE9B,GAAItT,KAAKitC,QAAQ,mBAAoB,CACjChtB,EAAQu0B,gBAAkBx0C,KAAKsT,IAAI,mBAEvC,GAAItT,KAAKitC,QAAQ,gBAAiB,CAC9B,GAAIjtC,KAAKsT,IAAI,gBAAiB,CAC1BtT,KAAKy0C,SAAW,IAAInkB,GAAc,CAC9ByC,EAAO5vB,GAAG,SAAS,WAEfgtB,EAAMwiB,iBAEV5f,EAAO5vB,GAAG,QAAQ,WAEdgtB,EAAMsjB,uBAIb,CACD,GAAIzzC,KAAKy0C,SAAU,CACfz0C,KAAKy0C,SAASpgC,UACdrU,KAAKy0C,SAAWv8B,YAI5B,GAAIlY,KAAKitC,QAAQ,aAAc,CAC3B,GAAIjtC,KAAKsT,IAAI,aAAc,CACvBtT,KAAKk5B,MAAMob,uBAAuBt0C,UAEjC,CACDA,KAAKk5B,MAAMqb,yBAAyBv0C,MAExCA,KAAK8yC,yBAET,GAAI9yC,KAAKitC,QAAQ,SAAWjtC,KAAKitC,QAAQ,aAAejtC,KAAKitC,QAAQ,gBAAkBjtC,KAAKitC,QAAQ,eAAiBjtC,KAAKitC,QAAQ,oBAAsBjtC,KAAKitC,QAAQ,iBAAmBjtC,KAAKitC,QAAQ,iBAAmBjtC,KAAKitC,QAAQ,iBAAmBjtC,KAAKitC,QAAQ,kBAAoBjtC,KAAKitC,QAAQ,cAAgBjtC,KAAKitC,QAAQ,gBAAiB,CAGhVjtC,KAAK8yC,yBAET,GAAI9yC,KAAKitC,QAAQ,cAAe,CAC5BhtB,EAAQy0B,WAAa10C,KAAKsT,IAAI,cAElC,GAAItT,KAAKitC,QAAQ,eAAgB,CAC7B,IAAI0H,EAAW30C,KAAK+yB,OACpB,GAAI/yB,KAAKsT,IAAI,eAAgB,CACzBtT,KAAK40C,SAAW,IAAItkB,GAAc,CAC9BqkB,EAASxxC,GAAG,SAAS,SAAUkb,GAC3B,GAAIw2B,GAAoBx2B,EAAGswB,eAAgB,CACvC,IAAKxe,EAAM0Y,WAAW,iBAAkB,CACpC1Y,EAAM1iB,YAAW,WACb0iB,EAAM2kB,cACN,GAAI3kB,EAAM7c,IAAI,gBAAkB6c,EAAM7c,IAAI,eAAgB,CACtD6c,EAAMwiB,cAEVxiB,EAAMua,cAAc,gBAAiB,MACrCva,EAAM4C,OAAOd,SAAS,cAAe,CACjCnwB,KAAM,cACN6J,OAAQ0S,EAAG1S,OACXgjC,cAAetwB,EAAGswB,cAClBC,MAAOvwB,EAAGuwB,MACVC,UAAWxwB,EAAGwwB,cAEnB,SAIf8F,EAASxxC,GAAG,mBAAmB,SAAUkb,GACrC,GAAIw2B,GAAoBx2B,EAAGswB,eAAgB,CACvC,GAAIxe,EAAM0Y,WAAW,iBAAkB,CACnC1Y,EAAM4kB,aACN,GAAI5kB,EAAM7c,IAAI,gBAAkB6c,EAAM7c,IAAI,eAAgB,CACtD6c,EAAMsjB,eAGdtjB,EAAMua,cAAc,gBAAiB,OACrCva,EAAM4C,OAAOd,SAAS,aAAc,CAChCnwB,KAAM,aACN6J,OAAQ0S,EAAG1S,OACXgjC,cAAetwB,EAAGswB,cAClBC,MAAOvwB,EAAGuwB,MACVC,UAAWxwB,EAAGwwB,YAGtB,GAAI1e,EAAM6kB,QAAS,CACf7kB,EAAM8kB,UAAU52B,OAIxBs2B,EAASxxC,GAAG,eAAe,WACvBgtB,EAAM2kB,iBAEVH,EAASxxC,GAAG,cAAc,WACtBgtB,EAAM4kB,gBAEVJ,EAASxxC,GAAG,eAAe,SAAUvD,GACjCuwB,EAAM+kB,YAAYt1C,YAIzB,CACDI,KAAKq1B,SAAS6C,YAAc,MAC5B,GAAIl4B,KAAK40C,SAAU,CACf50C,KAAK40C,SAASvgC,UACdrU,KAAK40C,SAAW18B,YAI5B,GAAIlY,KAAKitC,QAAQ,iBAAkB,CAC/BjtC,KAAKq1B,SAAS8f,SAAWn1C,KAAKsT,IAAI,gBAAiB,OAEvD,GAAItT,KAAKsT,IAAI,kBAAoB,UAAYtT,KAAKq1B,SAAS0e,QAAS,CAChE/zC,KAAK2yC,kBAQjBrvC,OAAOssB,eAAe2gB,EAAOzkC,UAAW,YAAa,CACjD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUxT,GACbI,KAAKo1C,WAAax1C,EAClBI,KAAK+yB,OAAOsiB,wBAOpB/xC,OAAOssB,eAAe2gB,EAAOzkC,UAAW,WAAY,CAChD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUxT,GACbI,KAAKo1C,WAAal9B,UAClBlY,KAAKs1C,WAAap9B,UAClBlY,KAAK+yB,OAAOsiB,qBACZ,GAAIr1C,KAAK4zC,YAAa,CAClB5zC,KAAK4zC,YAAc,MACnB,IAAI9xC,EAAO,WACX,GAAI9B,KAAK+yB,OAAOC,UAAUlxB,GAAO,CAC7B9B,KAAK+yB,OAAOd,SAASnwB,EAAM,CACvBA,KAAMA,EACN6J,OAAQ3L,KACR2uC,cAAe/uC,EAAE+uC,cACjBC,MAAOhvC,EAAEgvC,MACTC,UAAWjvC,EAAEivC,iBAMjCvrC,OAAOssB,eAAe2gB,EAAOzkC,UAAW,cAAe,CACnD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAKpT,KAAK6yC,WAAY,CAClB,GAAI7yC,KAAKsT,IAAI,WAAatT,KAAKkV,OAAOqvB,OAAO,eAAgB,CACzDvkC,KAAKkV,OAAOgwB,aAAa,oBAExB,GAAIllC,KAAKsT,IAAI,aAAetT,KAAKkV,OAAOqvB,OAAO,iBAAkB,CAClEvkC,KAAKkV,OAAOgwB,aAAa,qBAExB,CACDllC,KAAKkV,OAAOgwB,aAAa,cAKzC5hC,OAAOssB,eAAe2gB,EAAOzkC,UAAW,aAAc,CAClD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAKpT,KAAK6yC,WAAY,CAClB,GAAI7yC,KAAKsT,IAAI,WAAatT,KAAKkV,OAAOqvB,OAAO,UAAW,CACpDvkC,KAAKkV,OAAOgwB,aAAa,eAExB,GAAIllC,KAAKsT,IAAI,aAAetT,KAAKkV,OAAOqvB,OAAO,YAAa,CAC7DvkC,KAAKkV,OAAOgwB,aAAa,gBAExB,CACD,GAAIllC,KAAKkV,OAAOqvB,OAAO,UAAYvkC,KAAKkV,OAAOqvB,OAAO,eAAgB,CAClEvkC,KAAKkV,OAAOgwB,aAAa,iBAM7C5hC,OAAOssB,eAAe2gB,EAAOzkC,UAAW,YAAa,CACjD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUxT,GACb,IAAKI,KAAK6yC,WAAY,CAClB,GAAI7yC,KAAKsT,IAAI,WAAatT,KAAKkV,OAAOqvB,OAAO,UAAW,CACpDvkC,KAAKkV,OAAOgwB,aAAa,eAExB,GAAIllC,KAAKsT,IAAI,aAAetT,KAAKkV,OAAOqvB,OAAO,YAAa,CAC7DvkC,KAAKkV,OAAOgwB,aAAa,iBAExB,GAAIllC,KAAKkV,OAAOqvB,OAAO,QAAS,CACjC,GAAIvkC,KAAKu1C,UAAW,CAChBv1C,KAAKkV,OAAOgwB,aAAa,aAExB,CACDllC,KAAKkV,OAAOgwB,aAAa,YAIjCllC,KAAKw1C,WAAat9B,UAClB,IAAIye,EAAY8e,GAAoB71C,EAAE+uC,sBAC/B3uC,KAAK01C,YAAY/e,GACxB,GAAI0N,GAAarkC,KAAK01C,aAAa1xC,QAAU,EAAG,CAC5ChE,KAAKg1C,QAAU,WAK/B1xC,OAAOssB,eAAe2gB,EAAOzkC,UAAW,YAAa,CACjD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUxT,GAOb,IAAI+2B,EAAY8e,GAAoB71C,EAAE+uC,eACtC,IAAIgH,EAAY31C,KAAK01C,YAAY/e,GACjC,GAAIgf,EAAW,CACX,IAAI/nC,EAAItC,KAAK8B,IAAIuoC,EAAU/nC,EAAIhO,EAAEgvC,MAAMhhC,GACvC,IAAIjK,EAAI2H,KAAK8B,IAAIuoC,EAAUhyC,EAAI/D,EAAEgvC,MAAMjrC,GACvC,OAAQiK,EAAI,GAAOjK,EAAI,EAE3B,OAAO,SAGfL,OAAOssB,eAAe2gB,EAAOzkC,UAAW,WAAY,CAChD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,OAAOixB,GAAarkC,KAAK01C,aAAa1xC,OAAS,KAGvDV,OAAOssB,eAAe2gB,EAAOzkC,UAAW,cAAe,CACnD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUxT,GACb,IAAI0vC,EAAStvC,KAAKsvC,OAClB,GAAIA,IAAWtvC,KAAKsT,IAAI,aAAc,CAClCg8B,EAAO4F,YAAYt1C,GAEvB,GAAII,KAAKsT,IAAI,iBAAmBtT,KAAK6yC,WAAY,CAC7C,GAAI7yC,KAAKkV,OAAOqvB,OAAO,QAAS,CAC5BvkC,KAAKkV,OAAOgwB,aAAa,QAE7BllC,KAAKw1C,WAAa,CACd5nC,EAAGhO,EAAEgvC,MAAMhhC,EACXjK,EAAG/D,EAAEgvC,MAAMjrC,GAGf3D,KAAKg1C,QAAU,KACf,IAAIre,EAAY8e,GAAoB71C,EAAE+uC,eACtC3uC,KAAK01C,YAAY/e,GAAa,CAC1B/oB,EAAGhO,EAAEgvC,MAAMhhC,EACXjK,EAAG/D,EAAEgvC,MAAMjrC,OAS3BL,OAAOssB,eAAe2gB,EAAOzkC,UAAW,WAAY,CAChD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUxT,GACb,IAAIg2C,EAAY51C,KAAKo1C,WACrB,GAAIQ,EAAW,CACX,GAAIA,EAAU/G,YAAcjvC,EAAEivC,UAAW,CACrC,OAAO,KAEX,IAAIxM,EAAQ,EACZ,IAAIwT,EAAW71C,KAAKsvC,OACpB,MAAOuG,GAAY,KAAM,CACrBxT,GAASwT,EAASviC,IAAI,WAAY,GAClCuiC,EAAWA,EAASvG,OAExB,IAAI1hC,EAAIhO,EAAEgvC,MAAMhhC,EAAIgoC,EAAUhH,MAAMhhC,EACpC,IAAIjK,EAAI/D,EAAEgvC,MAAMjrC,EAAIiyC,EAAUhH,MAAMjrC,EACpC,IAAIovB,EAAS/yB,KAAK+yB,OAClB,GAAI6iB,EAAU/G,YAAc7uC,KAAK4zC,YAAa,CAC1C5zC,KAAK4zC,YAAc,KACnB5zC,KAAKo1C,WAAax1C,EAClBI,KAAKs1C,WAAa,CACd1nC,EAAG5N,KAAK4N,IACRjK,EAAG3D,KAAK2D,KAEZ,IAAI7B,EAAO,YACX,GAAIixB,EAAOC,UAAUlxB,GAAO,CACxBixB,EAAOd,SAASnwB,EAAM,CAClBA,KAAMA,EACN6J,OAAQ3L,KACR2uC,cAAe/uC,EAAE+uC,cACjBC,MAAOhvC,EAAEgvC,MACTC,UAAWjvC,EAAEivC,aAIzB,GAAI7uC,KAAK4zC,YAAa,CAClB,IAAIkC,EAAY91C,KAAKs1C,WACrBt1C,KAAKuT,IAAI,IAAKuiC,EAAUloC,EAAIA,EAAImoC,GAAU1T,GAAS1+B,EAAIqyC,GAAU3T,IACjEriC,KAAKuT,IAAI,IAAKuiC,EAAUnyC,EAAIA,EAAIoyC,GAAU1T,GAASz0B,EAAIooC,GAAU3T,IACjE,IAAIvgC,EAAO,UACX,GAAIixB,EAAOC,UAAUlxB,GAAO,CACxBixB,EAAOd,SAASnwB,EAAM,CAClBA,KAAMA,EACN6J,OAAQ3L,KACR2uC,cAAe/uC,EAAE+uC,cACjBC,MAAOhvC,EAAEgvC,MACTC,UAAWjvC,EAAEivC,iBAIpB,CACD,GAAIvjC,KAAK2qC,MAAMroC,EAAGjK,GAAK,EAAG,CACtB3D,KAAK4zC,YAAc,KACnB5zC,KAAKo1C,WAAax1C,EAClBI,KAAKs1C,WAAa,CACd1nC,EAAG5N,KAAK4N,IACRjK,EAAG3D,KAAK2D,KAEZ,IAAI7B,EAAO,YACX,GAAIixB,EAAOC,UAAUlxB,GAAO,CACxBixB,EAAOd,SAASnwB,EAAM,CAClBA,KAAMA,EACN6J,OAAQ3L,KACR2uC,cAAe/uC,EAAE+uC,cACjBC,MAAOhvC,EAAEgvC,MACTC,UAAWjvC,EAAEivC,mBAQzCvrC,OAAOssB,eAAe2gB,EAAOzkC,UAAW,cAAe,CACnD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,eAGX9P,OAAOssB,eAAe2gB,EAAOzkC,UAAW,aAAc,CAClD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACHpT,KAAK6xC,aAAe7xC,KAAKq1B,SAAS6gB,oBAS1C5yC,OAAOssB,eAAe2gB,EAAOzkC,UAAW,QAAS,CAC7C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAIjT,EAAOH,KAAKsvC,OAChB,IAAI6G,EAAQ,EACZ,MAAO,KAAM,CACT,GAAIh2C,EAAM,GACJg2C,EACFh2C,EAAOA,EAAKmvC,WAEX,CACD,OAAO6G,OAQvB7yC,OAAOssB,eAAe2gB,EAAOzkC,UAAW,gBAAiB,CACrD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACHpT,KAAKm0C,WAAa,KAClBn0C,KAAKy1B,eAMbnyB,OAAOssB,eAAe2gB,EAAOzkC,UAAW,kBAAmB,CACvD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAI6M,EAAUjgB,KAAKq1B,SACnB,GAAIr1B,KAAKsT,IAAI,cAAe,CACxBtT,KAAKk5B,MAAMkd,gBAAgBp2C,MAC3BigB,EAAQo2B,WAAa,KACrBp2B,EAAQq2B,mBACR,IAAIC,EAAWv2C,KAAKsvC,OACpB,GAAIiH,GAAYv2C,KAAKsT,IAAI,aAAe,WAAY,CAChD,GAAIijC,EAASjjC,IAAI,UAAY,MAAQijC,EAASjjC,IAAI,WAAa,MAAQijC,EAASjjC,IAAI,UAAW,CAC3FijC,EAAS/gB,mBAGjB,GAAIx1B,KAAKsT,IAAI,cAAgBtT,KAAKw2C,UAAW,CACzCx2C,KAAK8yC,8BAQrBxvC,OAAOssB,eAAe2gB,EAAOzkC,UAAW,yBAA0B,CAC9D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WAEHpT,KAAKk5B,MAAMud,yBAAyBz2C,SAO5CsD,OAAOssB,eAAe2gB,EAAOzkC,UAAW,iBAAkB,CACtD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WAEHpT,KAAKq1B,SAASid,eAAe,SAMrChvC,OAAOssB,eAAe2gB,EAAOzkC,UAAW,YAAa,CACjD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH8c,EAAOpkB,UAAU2pB,UAAUtsB,KAAKnJ,MAChCA,KAAKsyC,oBAGbhvC,OAAOssB,eAAe2gB,EAAOzkC,UAAW,gBAAiB,CACrD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAIsjC,EAAY12C,KAAK22C,qBACrB,IAAIC,EAEJ,IAAK52C,KAAKsT,IAAI,aAAetT,KAAK6oC,WAAW,YAAc7oC,KAAKsT,IAAI,eAAgB,CAChFsjC,EAAY,CACR5f,KAAM,EACNwM,MAAO,EACPzM,IAAK,EACL0M,OAAQ,GAEZzjC,KAAK6xC,aAAe+E,EACpB52C,KAAK22C,qBAAuBC,MAE3B,CACD52C,KAAK62C,aACL72C,KAAK82C,cAAc92C,KAAK6xC,cACxB7xC,KAAK6zC,mBACL7zC,KAAK22C,qBAAuB32C,KAAKq1B,SAAS0hB,kBAAkB/2C,KAAK6xC,cACjE+E,EAAY52C,KAAK22C,qBAErB,IAAKD,IAAcA,EAAU1f,OAAS4f,EAAU5f,MAAQ0f,EAAU3f,MAAQ6f,EAAU7f,KAAO2f,EAAUlT,QAAUoT,EAAUpT,OAASkT,EAAUjT,SAAWmT,EAAUnT,QAAS,CACtK,IAAI0N,EAAY,gBAChB,GAAInxC,KAAK+yB,OAAOC,UAAUme,GAAY,CAClCnxC,KAAK+yB,OAAOd,SAASkf,EAAW,CAAErvC,KAAMqvC,EAAWxlC,OAAQ3L,OAE/D,GAAIA,KAAKsvC,OAAQ,CACbtvC,KAAKsvC,OAAO7Z,YACZz1B,KAAKsvC,OAAO9Z,uBAK5BlyB,OAAOssB,eAAe2gB,EAAOzkC,UAAW,gBAAiB,CACrD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUw+B,GACb,IAAIoF,EAAWh3C,KAAKsT,IAAI,WAAYtT,KAAK6oC,WAAW,aACpD,IAAIoO,EAAYj3C,KAAKsT,IAAI,YAAatT,KAAK6oC,WAAW,cACtD,GAAIhX,GAAemlB,GAAW,CAC1B,GAAIpF,EAAOpO,MAAQoO,EAAO5a,KAAOggB,EAAU,CACvCpF,EAAOpO,MAAQoO,EAAO5a,KAAOggB,GAGrC,GAAInlB,GAAeolB,GAAY,CAC3B,GAAIrF,EAAOnO,OAASmO,EAAO7a,IAAMkgB,EAAW,CACxCrF,EAAOnO,OAASmO,EAAO7a,IAAMkgB,GAGrC,IAAIC,EAAel3C,KAAK6oC,WAAW,SACnC,IAAIsO,EAAgBn3C,KAAK6oC,WAAW,UACpC,GAAIhX,GAAeqlB,GAAe,CAC9BtF,EAAOpO,MAAQoO,EAAO5a,KAAOkgB,EAEjC,GAAIrlB,GAAeslB,GAAgB,CAC/BvF,EAAOnO,OAASmO,EAAO7a,IAAMogB,MAIzC7zC,OAAOssB,eAAe2gB,EAAOzkC,UAAW,gBAAiB,CACrD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUk8B,GACb,GAAIA,EAAQ,CACRA,EAAO8H,SAASC,YAAYr3C,MAC5B8lC,GAAmBwJ,EAAOmC,wBAAyBzxC,MACnD8lC,GAAmBwJ,EAAOoC,4BAA6B1xC,UAInEsD,OAAOssB,eAAe2gB,EAAOzkC,UAAW,cAAe,CACnD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH8c,EAAOpkB,UAAUwrC,YAAYnuC,KAAKnJ,MAClCA,KAAKm0C,WAAa,MAClBn0C,KAAK4yC,eAAiB,SAM9BtvC,OAAOssB,eAAe2gB,EAAOzkC,UAAW,QAAS,CAC7C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACHpT,KAAK2yC,cACL3yC,KAAK80C,iBAMbxxC,OAAOssB,eAAe2gB,EAAOzkC,UAAW,UAAW,CAC/C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACHpT,KAAKyzC,cACLzzC,KAAK+0C,gBAMbzxC,OAAOssB,eAAe2gB,EAAOzkC,UAAW,cAAe,CACnD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUw7B,GACb,IAAIwD,EAAUpyC,KAAKu3C,aACnB,IAAInE,EAAcpzC,KAAKsT,IAAI,eAC3B,IAAI+/B,EAAcrzC,KAAKsT,IAAI,eAC3B,IAAK8/B,GAAeC,IAAgBjB,EAAS,CACzC,IAAIoF,EAAkBx3C,KAAKsT,IAAI,mBAC/B,IAAImkC,EAAgBz3C,KAAK6oC,WAAW,gBAAiB7oC,MACrD,GAAIw3C,GAAmB,UAAY5I,EAAO,CACtC5uC,KAAKq1B,SAASqiB,aACd9I,EAAQ5uC,KAAK23C,SAASF,EAAcG,oBAExCxF,EAAQ7+B,IAAI,UAAWq7B,GACvBwD,EAAQ7+B,IAAI,gBAAiBkkC,GAC7B,IAAKrF,EAAQ9+B,IAAI,KAAM,CACnB8+B,EAAQ7+B,IAAI,IAAKq7B,EAAMhhC,GAE3B,IAAKwkC,EAAQ9+B,IAAI,KAAM,CACnB8+B,EAAQ7+B,IAAI,IAAKq7B,EAAMjrC,GAE3B,GAAIyvC,EAAa,CACbhB,EAAQ1mB,MAAMnY,IAAI,OAAQ6/B,GAE9B,GAAIC,EAAa,CACbjB,EAAQ1mB,MAAMnY,IAAI,OAAQ8/B,GAE9B,IAAIzC,EAAW5wC,KAAK4wC,SACpB,GAAIA,EAAU,CACVwB,EAAQ1mB,MAAM6lB,aAAaX,GAE/B,GAAI5wC,KAAKsT,IAAI,kBAAoB,WAAas7B,EAAMhhC,EAAI,GAAKghC,EAAMhhC,EAAI5N,KAAKk5B,MAAM3V,SAAWqrB,EAAMjrC,EAAI,GAAKirC,EAAMjrC,EAAI3D,KAAKk5B,MAAM2e,UAAW,CACxI73C,KAAKyzC,cACL,OAEJrB,EAAQ1mB,MAAM3b,KAAK+nC,gBACnB,IAAIC,EAAU3F,EAAQ4F,OACtBh4C,KAAK0qC,cAAc,iBAAkB,MACrC,OAAOqN,MAOnBz0C,OAAOssB,eAAe2gB,EAAOzkC,UAAW,cAAe,CACnD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAIg/B,EAAUpyC,KAAKu3C,aACnB,GAAInF,EAAS,CACT,IAAI6F,EAAU7F,EAAQ9+B,IAAI,oBAAsB8+B,EAAQ9+B,IAAI,yBAA0B,IAAM,EAAI,IAAM4E,UACtG,IAAI6/B,EAAU3F,EAAQ8F,KAAKD,GAC3Bj4C,KAAK0qC,cAAc,iBAAkB,OACrC,OAAOqN,MAInBz0C,OAAOssB,eAAe2gB,EAAOzkC,UAAW,mBAAoB,CACxD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAIw+B,EAAS5xC,KAAK6xC,aAClB,GAAID,EAAQ,CACR,IAAIhkC,EAAI,EACR,IAAIjK,EAAI,EACR,IAAK3D,KAAKsT,IAAI,cAAe,CACzB1F,EAAImkC,GAAuB/xC,KAAKsT,IAAI,WAAY,GAAItT,KAAKujB,SACzD5f,EAAIouC,GAAuB/xC,KAAKsT,IAAI,WAAY,GAAItT,KAAK63C,cAExD,CACDjqC,EAAIgkC,EAAO5a,KAAO+a,GAAuB/xC,KAAKsT,IAAI,WAAY,GAAIs+B,EAAOpO,MAAQoO,EAAO5a,MACxFrzB,EAAIiuC,EAAO7a,IAAMgb,GAAuB/xC,KAAKsT,IAAI,WAAY,GAAIs+B,EAAOnO,OAASmO,EAAO7a,KAE5F,MAAO,CAAEnpB,EAAGA,EAAGjK,EAAGA,GAEtB,MAAO,CAAEiK,EAAG,EAAGjK,EAAG,MAQ1BL,OAAOssB,eAAe2gB,EAAOzkC,UAAW,aAAc,CAClD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAIg/B,EAAUpyC,KAAKsT,IAAI,WACvB,IAAK8+B,EAAS,CACV,IAAI+F,EAAWn4C,KAAKsvC,OACpB,GAAI6I,EAAU,CACV,OAAOA,EAASZ,kBAGnB,CACD,OAAOnF,MAInB9uC,OAAOssB,eAAe2gB,EAAOzkC,UAAW,kBAAmB,CACvD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAIk8B,EAAStvC,KAAKsvC,OAClB,IAAI8I,EAAKp4C,KAAKsT,IAAI,KAAM,GACxB,IAAI+kC,EAAKr4C,KAAKsT,IAAI,KAAM,GACxB,IAAI1F,EAAI5N,KAAKsT,IAAI,KACjB,IAAIglC,EAAKt4C,KAAK6oC,WAAW,KACzB,IAAI0P,EAAK,EACT,IAAIC,EAAK,EACT,IAAIx+B,EAAWha,KAAKsT,IAAI,YACxB,GAAI1F,aAAa8nB,GAAS,CACtB,GAAI4Z,EAAQ,CACR1hC,EAAI0hC,EAAOmJ,aAAe7qC,EAAEwF,MAAQk8B,EAAOh8B,IAAI,cAAe,OAE7D,CACD1F,EAAI,GAGZ,GAAIikB,GAAejkB,GAAI,CACnB2qC,EAAK3qC,EAAIwqC,MAER,CACD,GAAIE,GAAM,KAAM,CACZC,EAAKD,OAEJ,GAAIhJ,EAAQ,CACb,GAAIt1B,GAAY,WAAY,CACxBu+B,EAAKjJ,EAAOh8B,IAAI,cAAe,GAAK8kC,IAIhD,IAAIz0C,EAAI3D,KAAKsT,IAAI,KACjB,IAAIolC,EAAK14C,KAAK6oC,WAAW,KACzB,GAAIllC,aAAa+xB,GAAS,CACtB,GAAI4Z,EAAQ,CACR3rC,EAAI2rC,EAAOqJ,cAAgBh1C,EAAEyP,MAAQk8B,EAAOh8B,IAAI,aAAc,OAE7D,CACD3P,EAAI,GAGZ,GAAIkuB,GAAeluB,GAAI,CACnB60C,EAAK70C,EAAI00C,MAER,CACD,GAAIK,GAAM,KAAM,CACZF,EAAKE,OAEJ,GAAIpJ,EAAQ,CACb,GAAIt1B,GAAY,WAAY,CACxBw+B,EAAKlJ,EAAOh8B,IAAI,aAAc,GAAK+kC,IAI/C,IAAIp4B,EAAUjgB,KAAKq1B,SACnB,GAAIpV,EAAQrS,GAAK2qC,GAAMt4B,EAAQtc,GAAK60C,EAAI,CACpCv4B,EAAQq2B,mBACRr2B,EAAQrS,EAAI2qC,EACZt4B,EAAQtc,EAAI60C,EACZ,IAAIrH,EAAY,kBAChB,GAAInxC,KAAK+yB,OAAOC,UAAUme,GAAY,CAClCnxC,KAAK+yB,OAAOd,SAASkf,EAAW,CAAErvC,KAAMqvC,EAAWxlC,OAAQ3L,QAInE,GAAIA,KAAK6oC,WAAW,kBAAmB,CACnC7oC,KAAK2yC,kBASjBrvC,OAAOssB,eAAe2gB,EAAOzkC,UAAW,IAAK,CACzC4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAIxF,EAAI5N,KAAKsT,IAAI,KACjB,IAAIglC,EAAKt4C,KAAK6oC,WAAW,KACzB,IAAIyG,EAAStvC,KAAKsvC,OAClB,GAAIA,EAAQ,CACR,GAAI1hC,aAAa8nB,GAAS,CACtB,OAAOqc,GAAuBnkC,EAAG0hC,EAAOmJ,cAAgBnJ,EAAOh8B,IAAI,cAAe,OAEjF,CACD,IAAKue,GAAejkB,GAAI,CACpB,GAAI0qC,GAAM,KAAM,CACZ,OAAOA,MAEN,CACD,OAAOhJ,EAAOh8B,IAAI,cAAetT,KAAKq1B,SAASznB,QAGlD,CACD,OAAOA,IAInB,OAAO5N,KAAKq1B,SAASznB,KAQ7BtK,OAAOssB,eAAe2gB,EAAOzkC,UAAW,IAAK,CACzC4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAIslC,EAAK14C,KAAK6oC,WAAW,KACzB,GAAI6P,GAAM,KAAM,CACZ,OAAOA,EAEX,IAAI/0C,EAAI3D,KAAKsT,IAAI,KACjB,IAAIg8B,EAAStvC,KAAKsvC,OAClB,GAAIA,EAAQ,CACR,GAAI3rC,aAAa+xB,GAAS,CACtB,OAAOqc,GAAuBpuC,EAAG2rC,EAAOqJ,eAAiBrJ,EAAOh8B,IAAI,aAAc,OAEjF,CACD,IAAKue,GAAeluB,GAAI,CACpB,GAAI+0C,GAAM,KAAM,CACZ,OAAOA,MAEN,CACD,OAAOpJ,EAAOh8B,IAAI,aAActT,KAAKq1B,SAAS1xB,QAGjD,CACD,OAAOA,IAInB,OAAO3D,KAAKq1B,SAAS1xB,KAG7BL,OAAOssB,eAAe2gB,EAAOzkC,UAAW,WAAY,CAChD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH8c,EAAOpkB,UAAUikB,SAAS5mB,KAAKnJ,MAC/BA,KAAKq1B,SAAShhB,UACdrU,KAAK+wC,uBACL/wC,KAAK44C,cAAc54C,KAAKsvC,QACxBtvC,KAAKk5B,MAAM2f,oBAAoB74C,MAC/B,IAAIoyC,EAAUpyC,KAAKsT,IAAI,WACvB,GAAI8+B,EAAS,CACTA,EAAQ/9B,UAEZrU,KAAKy1B,eAMbnyB,OAAOssB,eAAe2gB,EAAOzkC,UAAW,sBAAuB,CAC3D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACHpT,KAAK82C,cAAc92C,KAAK22C,sBACxB,OAAO32C,KAAK22C,wBASpBrzC,OAAOssB,eAAe2gB,EAAOzkC,UAAW,cAAe,CACnD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,OAAOpT,KAAK6xC,gBASpBvuC,OAAOssB,eAAe2gB,EAAOzkC,UAAW,SAAU,CAC9C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAIw+B,EAAS5xC,KAAK22C,qBAClB,IAAI/oC,EAAI5N,KAAK4N,IACb,IAAIjK,EAAI3D,KAAK2D,IACb,MAAO,CAAEqzB,KAAM4a,EAAO5a,KAAOppB,EAAG41B,MAAOoO,EAAOpO,MAAQ51B,EAAGmpB,IAAK6a,EAAO7a,IAAMpzB,EAAG8/B,OAAQmO,EAAOnO,OAAS9/B,MAS9GL,OAAOssB,eAAe2gB,EAAOzkC,UAAW,eAAgB,CACpD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAIw+B,EAAS5xC,KAAK84C,cAClB,IAAIC,EAAK/4C,KAAK23C,SAAS,CAAE/pC,EAAGgkC,EAAO5a,KAAMrzB,EAAGiuC,EAAO7a,MACnD,IAAIiiB,EAAKh5C,KAAK23C,SAAS,CAAE/pC,EAAGgkC,EAAOpO,MAAO7/B,EAAGiuC,EAAO7a,MACpD,IAAIkiB,EAAKj5C,KAAK23C,SAAS,CAAE/pC,EAAGgkC,EAAOpO,MAAO7/B,EAAGiuC,EAAOnO,SACpD,IAAIyV,EAAKl5C,KAAK23C,SAAS,CAAE/pC,EAAGgkC,EAAO5a,KAAMrzB,EAAGiuC,EAAOnO,SACnD,MAAO,CACHzM,KAAM1rB,KAAKC,IAAIwtC,EAAGnrC,EAAGorC,EAAGprC,EAAGqrC,EAAGrrC,EAAGsrC,EAAGtrC,GACpCmpB,IAAKzrB,KAAKC,IAAIwtC,EAAGp1C,EAAGq1C,EAAGr1C,EAAGs1C,EAAGt1C,EAAGu1C,EAAGv1C,GACnC6/B,MAAOl4B,KAAKyY,IAAIg1B,EAAGnrC,EAAGorC,EAAGprC,EAAGqrC,EAAGrrC,EAAGsrC,EAAGtrC,GACrC61B,OAAQn4B,KAAKyY,IAAIg1B,EAAGp1C,EAAGq1C,EAAGr1C,EAAGs1C,EAAGt1C,EAAGu1C,EAAGv1C,OAIlDL,OAAOssB,eAAe2gB,EAAOzkC,UAAW,UAAW,CAC/C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU+tB,OAGrB79B,OAAOssB,eAAe2gB,EAAOzkC,UAAW,UAAW,CAC/C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU+tB,OAWrB79B,OAAOssB,eAAe2gB,EAAOzkC,UAAW,SAAU,CAC9C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU6tB,EAAUmM,GACvB,OAAOziB,GAAU3qB,UAAW,OAAQ,GAAG,WACnC,IAAImwB,EAAQnwB,KACZ,OAAOyrB,GAAYzrB,MAAM,SAAU+Q,GAC/B,OAAQA,EAAG2a,OACP,KAAK,EAAG,MAAO,CAAC,EAAa1rB,KAAKk4C,KAAK,IACvC,KAAK,EACDnnC,EAAG4a,OACH,GAAIyhB,EAAO,CACP,MAAO,CAAC,EAAc,IAAIliB,SAAQ,SAAUiuB,EAASC,GAC7CjpB,EAAM1iB,YAAW,WACb0rC,EAAQhpB,EAAM6nB,KAAK/W,MACpBmM,WAGV,CACD,MAAO,CAAC,EAAcptC,KAAKg4C,KAAK/W,eAyB5D39B,OAAOssB,eAAe2gB,EAAOzkC,UAAW,OAAQ,CAC5C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU6tB,GACb,OAAOtW,GAAU3qB,UAAW,OAAQ,GAAG,WACnC,IAAIqgC,EACJ,OAAO5U,GAAYzrB,MAAM,SAAU+Q,GAC/B,OAAQA,EAAG2a,OACP,KAAK,EACD,KAAM1rB,KAAKq5C,WAAY,MAAO,CAAC,EAAa,GAC5Cr5C,KAAKs5C,UAAY,MACjBt5C,KAAKq5C,WAAa,KAClBr5C,KAAKu5C,UAAY,MACjB,GAAIv5C,KAAKkV,OAAOqvB,OAAO,WAAWjxB,IAAI,WAAY,CAC9CtT,KAAKuT,IAAI,UAAW,MAExBvT,KAAKw5C,QAAQvY,GACbZ,EAAargC,KAAKkV,OAAOgwB,aAAa,UAAWjE,GACjD,MAAO,CAAC,EAAab,GAAkBC,IAC3C,KAAK,EACDtvB,EAAG4a,OACH3rB,KAAKq5C,WAAa,MAClBtoC,EAAG2a,MAAQ,EACf,KAAK,EAAG,MAAO,CAAC,aAuBpCpoB,OAAOssB,eAAe2gB,EAAOzkC,UAAW,OAAQ,CAC5C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU6tB,GACb,OAAOtW,GAAU3qB,UAAW,OAAQ,GAAG,WACnC,IAAIuV,EAAO8qB,EACX,OAAO5U,GAAYzrB,MAAM,SAAU+Q,GAC/B,OAAQA,EAAG2a,OACP,KAAK,EACD,MAAO1rB,KAAKu5C,YAAcv5C,KAAKs5C,WAAY,MAAO,CAAC,EAAa,GAChEt5C,KAAKu5C,UAAY,KACjBv5C,KAAKq5C,WAAa,MAClB9jC,EAAQvV,KAAKkV,OAAOqvB,OAAO,UAC3B,IAAKhvB,EAAO,CACRA,EAAQvV,KAAKkV,OAAOtG,OAAO,SAAU,CACjC6qC,QAAW,EACX1F,QAAW,QAGnB/zC,KAAKs5C,UAAY,KACjBt5C,KAAK05C,QAAQzY,GACbZ,EAAargC,KAAKkV,OAAOgwB,aAAa,SAAUjE,GAChD,MAAO,CAAC,EAAab,GAAkBC,IAC3C,KAAK,EACDtvB,EAAG4a,OACH3rB,KAAKu5C,UAAY,MACjBxoC,EAAG2a,MAAQ,EACf,KAAK,EAAG,MAAO,CAAC,aAWpCpoB,OAAOssB,eAAe2gB,EAAOzkC,UAAW,WAAY,CAChD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,OAAOpT,KAAKs5C,aAQpBh2C,OAAOssB,eAAe2gB,EAAOzkC,UAAW,YAAa,CACjD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,OAAOpT,KAAKq5C,cAQpB/1C,OAAOssB,eAAe2gB,EAAOzkC,UAAW,WAAY,CAChD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,OAAOpT,KAAKu5C,aAQpBj2C,OAAOssB,eAAe2gB,EAAOzkC,UAAW,UAAW,CAC/C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,OAAOpT,KAAKq1B,SAASskB,cAQ7Br2C,OAAOssB,eAAe2gB,EAAOzkC,UAAW,UAAW,CAC/C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,OAAOpT,KAAKk5B,MAAM0gB,QAAQ55C,SAQlCsD,OAAOssB,eAAe2gB,EAAOzkC,UAAW,aAAc,CAClD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,OAAOpT,KAAK4zC,eASpBtwC,OAAOssB,eAAe2gB,EAAOzkC,UAAW,YAAa,CACjD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,GAAIpT,KAAKsT,IAAI,YAActT,KAAK6oC,WAAW,aAAe7oC,KAAKsT,IAAI,eAAgB,CAC/E,OAAO,KAEX,OAAO,SASfhQ,OAAOssB,eAAe2gB,EAAOzkC,UAAW,gBAAiB,CACrD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,OAAOpT,KAAKsxC,QAAWtxC,KAAKsxC,QAAQuI,iBAAmB75C,KAAK85C,YAAe95C,KAAK85C,eASxFx2C,OAAOssB,eAAe2gB,EAAOzkC,UAAW,mBAAoB,CACxD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAIqmC,EAAUz5C,KAAKsT,IAAI,UAAW,GAClC,OAAOtT,KAAKsxC,QAAWtxC,KAAKsxC,QAAQyI,mBAAqBN,EAAWA,KAQ5En2C,OAAOssB,eAAe2gB,EAAOzkC,UAAW,QAAS,CAC7C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAImQ,EAAQvjB,KAAKsT,IAAI,SACrB,IAAI0mC,EAAWh6C,KAAKsT,IAAI,WAAYtT,KAAK6oC,WAAW,aACpD,IAAImO,EAAWh3C,KAAKsT,IAAI,WAAYtT,KAAK6oC,WAAW,aACpD,IAAIqO,EAAel3C,KAAK6oC,WAAW,SACnC,IAAI//B,EAAI,EACR,GAAI+oB,GAAeqlB,GAAe,CAC9BpuC,EAAIouC,MAEH,CACD,GAAI3zB,GAAS,KAAM,CACf,GAAIvjB,KAAK22C,qBAAsB,CAC3B7tC,EAAI9I,KAAK22C,qBAAqBnT,MAAQxjC,KAAK22C,qBAAqB3f,UAGnE,CACD,GAAIzT,aAAiBmS,GAAS,CAC1B,IAAIukB,EAAWj6C,KAAKsvC,OACpB,GAAI2K,EAAU,CACVnxC,EAAImxC,EAASxB,aAAel1B,EAAMnQ,UAEjC,CACDtK,EAAI9I,KAAKk5B,MAAM3V,QAAUA,EAAMnQ,YAGlC,GAAIye,GAAetO,GAAQ,CAC5Bza,EAAIya,IAIhB,GAAIsO,GAAemlB,GAAW,CAC1BluC,EAAIwC,KAAKyY,IAAIizB,EAAUluC,GAE3B,GAAI+oB,GAAemoB,GAAW,CAC1BlxC,EAAIwC,KAAKC,IAAIyuC,EAAUlxC,GAE3B,OAAOA,KAQfxF,OAAOssB,eAAe2gB,EAAOzkC,UAAW,WAAY,CAChD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAI4mC,EAAWh6C,KAAKsT,IAAI,WAAYtT,KAAK6oC,WAAW,aACpD,GAAIhX,GAAemoB,GAAW,CAC1B,OAAOA,MAEN,CACD,IAAIz2B,EAAQvjB,KAAKsT,IAAI,SACrB,GAAIue,GAAetO,GAAQ,CACvB,OAAOA,GAGf,IAAI+rB,EAAStvC,KAAKsvC,OAClB,GAAIA,EAAQ,CACR,OAAOA,EAAOmJ,aAElB,OAAOz4C,KAAKk5B,MAAM3V,WAQ1BjgB,OAAOssB,eAAe2gB,EAAOzkC,UAAW,YAAa,CACjD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAI8mC,EAAYl6C,KAAKsT,IAAI,YAAatT,KAAK6oC,WAAW,cACtD,GAAIhX,GAAeqoB,GAAY,CAC3B,OAAOA,MAEN,CACD,IAAIrC,EAAS73C,KAAKsT,IAAI,UACtB,GAAIue,GAAegmB,GAAS,CACxB,OAAOA,GAGf,IAAIvI,EAAStvC,KAAKsvC,OAClB,GAAIA,EAAQ,CACR,OAAOA,EAAOqJ,cAElB,OAAO34C,KAAKk5B,MAAM2e,YAQ1Bv0C,OAAOssB,eAAe2gB,EAAOzkC,UAAW,SAAU,CAC9C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAIykC,EAAS73C,KAAKsT,IAAI,UACtB,IAAI4mC,EAAYl6C,KAAKsT,IAAI,YAAatT,KAAK6oC,WAAW,cACtD,IAAIoO,EAAYj3C,KAAKsT,IAAI,YAAatT,KAAK6oC,WAAW,cACtD,IAAIsO,EAAgBn3C,KAAK6oC,WAAW,UACpC,IAAIhoC,EAAI,EACR,GAAIgxB,GAAeslB,GAAgB,CAC/Bt2C,EAAIs2C,MAEH,CACD,GAAIU,GAAU,KAAM,CAChB,GAAI73C,KAAK22C,qBAAsB,CAC3B91C,EAAIb,KAAK22C,qBAAqBlT,OAASzjC,KAAK22C,qBAAqB5f,SAGpE,CACD,GAAI8gB,aAAkBniB,GAAS,CAC3B,IAAIykB,EAAWn6C,KAAKsvC,OACpB,GAAI6K,EAAU,CACVt5C,EAAIs5C,EAASxB,cAAgBd,EAAOzkC,UAEnC,CACDvS,EAAIb,KAAKk5B,MAAM2e,SAAWA,EAAOzkC,YAGpC,GAAIye,GAAegmB,GAAS,CAC7Bh3C,EAAIg3C,IAIhB,GAAIhmB,GAAeolB,GAAY,CAC3Bp2C,EAAIyK,KAAKyY,IAAIkzB,EAAWp2C,GAE5B,GAAIgxB,GAAeqoB,GAAY,CAC3Br5C,EAAIyK,KAAKC,IAAI2uC,EAAWr5C,GAE5B,OAAOA,KAGfyC,OAAOssB,eAAe2gB,EAAOzkC,UAAW,sBAAuB,CAC3D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUlT,GAEb,GAAIF,KAAK0wC,gBAAkBxwC,EAAEF,KAAK0wC,gBAAiB,CAC/C,OAAO1wC,KAAK0wC,eAEhB,OAAOxgB,EAAOpkB,UAAUy/B,oBAAoBpiC,KAAKnJ,KAAME,MAG/DoD,OAAOssB,eAAe2gB,EAAOzkC,UAAW,eAAgB,CACpD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUlT,GACb,GAAIF,KAAKsxC,QAAS,CACdtxC,KAAKo6C,YAAYl6C,OAI7BoD,OAAOssB,eAAe2gB,EAAOzkC,UAAW,cAAe,CACnD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUlT,GACb,GAAIF,KAAKsxC,QAAS,CACdtxC,KAAKsxC,QAAQ8I,YAAYl6C,GAE7BA,EAAEF,SAGVsD,OAAOssB,eAAe2gB,EAAOzkC,UAAW,SAAU,CAM9CwH,IAAK,WACD,OAAOtT,KAAKsxC,SAEhB57B,WAAY,MACZC,aAAc,OAElBrS,OAAOssB,eAAe2gB,EAAOzkC,UAAW,aAAc,CAClD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUk8B,EAAQ+K,GACrB,GAAIA,SAAwB,EAAG,CAAEA,EAAiB,MAClD,IAAIC,EAAat6C,KAAKsxC,QACtB,GAAIhC,IAAWgL,EAAY,CACvBt6C,KAAKw1B,kBACL8Z,EAAO7Z,YACPz1B,KAAKsxC,QAAUhC,EACf,GAAI+K,EAAgB,CAChBr6C,KAAK44C,cAAc0B,GACnB,GAAIhL,EAAQ,CACRtvC,KAAKg0C,6BACLh0C,KAAKwwC,kCAGbxwC,KAAKywC,oBACLzwC,KAAK4pC,mBAYjBtmC,OAAOssB,eAAe2gB,EAAOzkC,UAAW,qBAAsB,CAC1D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,OAAOpT,KAAKsT,IAAI,kBAAmBtT,KAAKk5B,MAAMqhB,oBAWtDj3C,OAAOssB,eAAe2gB,EAAOzkC,UAAW,mBAAoB,CACxD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,OAAOpT,KAAKsT,IAAI,gBAAiBtT,KAAKk5B,MAAMshB,kBAWpDl3C,OAAOssB,eAAe2gB,EAAOzkC,UAAW,uBAAwB,CAC5D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,OAAOpT,KAAKsT,IAAI,oBAAqBtT,KAAKk5B,MAAMuhB,sBASxDn3C,OAAOssB,eAAe2gB,EAAOzkC,UAAW,WAAY,CAChD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUw7B,GACb,OAAO5uC,KAAKq1B,SAASsiB,SAAS/I,MAStCtrC,OAAOssB,eAAe2gB,EAAOzkC,UAAW,UAAW,CAC/C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUw7B,GACb,OAAO5uC,KAAKq1B,SAASqlB,QAAQ9L,MAGrCtrC,OAAOssB,eAAe2gB,EAAOzkC,UAAW,gBAAiB,CACrD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAIlR,EAAKlC,KAAK26C,kBACd,GAAIz4C,EAAI,CACJ,OAAOlC,KAAK01C,YAAYxzC,OAIpCoB,OAAOssB,eAAe2gB,EAAOzkC,UAAW,kBAAmB,CACvD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,GAAIpT,KAAK01C,YAAa,CAClB,OAAOkF,GAAoB56C,KAAK01C,aAAa,SAAU90C,EAAGE,GACtD,GAAIF,EAAIE,EAAG,CACP,OAAO,EAEX,GAAIF,EAAIE,EAAG,CACP,OAAQ,EAEZ,OAAO,KACR,OAUfwC,OAAOssB,eAAe2gB,EAAOzkC,UAAW,UAAW,CAC/C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAIk8B,EAAStvC,KAAKsvC,OAClB,GAAIA,EAAQ,CACRA,EAAO8H,SAASyD,UAAU76C,KAAMsvC,EAAO8H,SAASpzC,OAAS,OAUrEV,OAAOssB,eAAe2gB,EAAOzkC,UAAW,SAAU,CAC9C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAIk8B,EAAStvC,KAAKsvC,OAClB,GAAIA,EAAQ,CACRA,EAAO8H,SAASyD,UAAU76C,KAAM,OAI5CsD,OAAOssB,eAAe2gB,EAAQ,YAAa,CACvC76B,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WAEX9P,OAAOssB,eAAe2gB,EAAQ,aAAc,CACxC76B,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO21B,GAAOc,WAAW//B,OAAO,CAACymC,EAAOzG,cAE5C,OAAOyG,EAvlED,CAwlERxH,ICtyEF,IAAI+R,GAAyB,SAAU5qB,GACnC1F,GAAUswB,EAAS5qB,GACnB,SAAS4qB,IACL,IAAI3qB,EAAQD,IAAW,MAAQA,EAAOnkB,MAAM/L,KAAMgM,YAAchM,KAChEsD,OAAOssB,eAAeO,EAAO,WAAY,CACrCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO+c,EAAM+I,MAAM6hB,UAAUC,iBAEjC13C,OAAOssB,eAAeO,EAAO,qBAAsB,CAC/Cza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO+c,EAAM+I,MAAM6hB,UAAUC,iBAEjC13C,OAAOssB,eAAeO,EAAO,SAAU,CACnCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,QAEX9P,OAAOssB,eAAeO,EAAO,WAAY,CACrCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB,OAAO+c,EAEX7sB,OAAOssB,eAAekrB,EAAQhvC,UAAW,YAAa,CAClD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WAEH8c,EAAOpkB,UAAUmvC,qBAAqB9xC,KAAKnJ,SAGnDsD,OAAOssB,eAAekrB,EAAQhvC,UAAW,UAAW,CAChDwH,IAAK,WACD,OAAOtT,KAAKk7C,UAEhBxlC,WAAY,MACZC,aAAc,OAElBrS,OAAOssB,eAAekrB,EAAQhvC,UAAW,QAAS,CAC9C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,eAEX9P,OAAOssB,eAAekrB,EAAQhvC,UAAW,iBAAkB,CACvD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH8c,EAAOpkB,UAAUmmC,eAAe9oC,KAAKnJ,MACrC,GAAIA,KAAKitC,QAAQ,eAAiBjtC,KAAKitC,QAAQ,UAAYjtC,KAAKitC,QAAQ,WAAajtC,KAAKitC,QAAQ,aAAejtC,KAAKitC,QAAQ,UAAYjtC,KAAKitC,QAAQ,gBAAkBjtC,KAAKitC,QAAQ,oBAAsBjtC,KAAKitC,QAAQ,qBAAuBjtC,KAAKitC,QAAQ,iBAAmBjtC,KAAKitC,QAAQ,SAAWjtC,KAAKitC,QAAQ,eAAgB,CACjUjtC,KAAKm7C,OAAS,SAI1B73C,OAAOssB,eAAekrB,EAAQhvC,UAAW,WAAY,CACjD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH8c,EAAOpkB,UAAUinC,SAAS5pC,KAAKnJ,MAC/B,GAAIA,KAAKm7C,OAAQ,CACb,IAAIC,EAAap7C,KAAKsT,IAAI,aAAc,IACxC,IAAIiQ,EAAQvjB,KAAKsT,IAAI,QAAS,KAC9B,IAAIukC,EAAS73C,KAAKsT,IAAI,SAAU,KAChC,IAAI+nC,EAAOr7C,KAAKsT,IAAI,QACpB,IAAIgoC,EAAct7C,KAAKsT,IAAI,cAAe,GAC1CtT,KAAKq1B,SAAS/gB,QACdtU,KAAKu7C,mBAAmBjnC,QACxB,GAAI+mC,GAASC,EAAc,EAAI,CAC3Bt7C,KAAKu7C,mBAAmBC,UAAUH,EAAMC,GACxCt7C,KAAKu7C,mBAAmBE,SAAS,EAAG,EAAGl4B,EAAOs0B,GAC9C73C,KAAKu7C,mBAAmBG,UAE5B17C,KAAKq1B,SAASgN,MAAQriC,KAAKsT,IAAI,WAAY,GAE3CtT,KAAK27C,QACL37C,KAAKk7C,SAAWl7C,KAAKk5B,MAAM6hB,UAAUa,cAAc57C,KAAKq1B,SAAUr1B,KAAKu7C,mBAAoBH,EAAY73B,EAAOs0B,OAI1Hv0C,OAAOssB,eAAekrB,EAAS,YAAa,CACxCplC,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,YAEX9P,OAAOssB,eAAekrB,EAAS,aAAc,CACzCplC,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO21B,GAAOc,WAAW//B,OAAO,CAACgxC,EAAQhR,cAE7C,OAAOgR,EArGA,CAsGT/R,ICpGF,IAAI8S,GAAgC,SAAU3rB,GAC1C1F,GAAUqxB,EAAgB3rB,GAC1B,SAAS2rB,IACL,IAAI1rB,EAAQD,IAAW,MAAQA,EAAOnkB,MAAM/L,KAAMgM,YAAchM,KAChEsD,OAAOssB,eAAeO,EAAO,SAAU,CACnCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB,OAAO+c,EAEX7sB,OAAOssB,eAAeisB,EAAe/vC,UAAW,iBAAkB,CAC9D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH8c,EAAOpkB,UAAUmmC,eAAe9oC,KAAKnJ,MACrCA,KAAKm7C,OAAS,KACd,GAAIn7C,KAAKitC,QAAQ,OAAQ,CACrBjtC,KAAK87C,YAIjBx4C,OAAOssB,eAAeisB,EAAe/vC,UAAW,QAAS,CACrD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH8c,EAAOpkB,UAAU6vC,MAAMxyC,KAAKnJ,MAC5B,IAAI+7C,EAAQ/7C,KAAKg8C,OACjB,GAAID,EAAO,CACP,IAAIE,EAAej8C,KAAKsT,IAAI,QAAS,KACrC,IAAI4oC,EAAgBl8C,KAAKsT,IAAI,SAAU,KAEvC,IAAI6oC,EAAMn8C,KAAKsT,IAAI,MAAO,SAC1B,IAAIiQ,EAAQ,EACZ,IAAIs0B,EAAS,EACb,GAAIsE,GAAO,UAAW,CAClB54B,EAAQ04B,EACRpE,EAASqE,MAER,CACD34B,EAAQw4B,EAAMx4B,MACds0B,EAASkE,EAAMlE,OACf,GAAIsE,GAAO,QAAS,CAChBn8C,KAAKuT,IAAI,QAASgQ,GAClBvjB,KAAKuT,IAAI,SAAUskC,IAI3B,IAAIuE,EAAWp8C,KAAKsT,IAAI,WAAY,MACpC,IAAI1F,EAAI,EACR,IAAIjK,EAAI,EACR,GAAIy4C,EAAU,CACVxuC,EAAIquC,EAAe,EAAI14B,EAAQ,EAC/B5f,EAAIu4C,EAAgB,EAAIrE,EAAS,EAErC73C,KAAKq1B,SAAS0mB,MAAMA,EAAOx4B,EAAOs0B,EAAQjqC,EAAGjK,OAIzDL,OAAOssB,eAAeisB,EAAe/vC,UAAW,QAAS,CACrD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAI+c,EAAQnwB,KACZ,IAAIohB,EAAMphB,KAAKsT,IAAI,OACnB,GAAI8N,EAAK,CACL,IAAIi7B,EAAU,IAAIC,MAElBD,EAAQj7B,IAAMA,EACdi7B,EAAQE,SAAS/wB,MAAK,WAClB2E,EAAM6rB,OAASK,EACflsB,EAAMwrB,QACN,GAAIxrB,EAAM4C,OAAOC,UAAU,UAAW,CAClC7C,EAAM4C,OAAOd,SAAS,SAAU,CAAEnwB,KAAM,SAAU6J,OAAQwkB,QAE/DqsB,OAAM,SAAUpD,WAM/B91C,OAAOssB,eAAeisB,EAAgB,YAAa,CAC/CnmC,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,mBAEX9P,OAAOssB,eAAeisB,EAAgB,aAAc,CAChDnmC,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO0nC,GAAQjR,WAAW//B,OAAO,CAAC+xC,EAAe/R,cAErD,OAAO+R,EAjGO,CAkGhBf,ICvGK,IAAI2B,IACX,SAAWA,GACPA,EAAU,OAAS,UACnBA,EAAU,SAAW,QACrBA,EAAU,cAAgB,aAC1BA,EAAU,eAAiB,cAC3BA,EAAU,UAAY,SACtBA,EAAU,cAAgB,aAC1BA,EAAU,YAAc,mBACxBA,EAAU,aAAe,YACzBA,EAAU,cAAgB,aAC1BA,EAAU,OAAS,MACnBA,EAAU,WAAa,UACvBA,EAAU,cAAgB,aAC1BA,EAAU,YAAc,WACxBA,EAAU,UAAY,cACtBA,EAAU,WAAa,UACvBA,EAAU,cAAgB,aAC1BA,EAAU,UAAY,SACtBA,EAAU,cAAgB,aAC1BA,EAAU,YAAc,cACxBA,EAAU,OAAS,OApBvB,CAqBGA,KAAcA,GAAY,KCb7B,IAAIC,GAA0B,SAAUxsB,GACpC1F,GAAUkyB,EAAUxsB,GACpB,SAASwsB,IACL,IAAIvsB,EAAQD,IAAW,MAAQA,EAAOnkB,MAAM/L,KAAMgM,YAAchM,KAChEsD,OAAOssB,eAAeO,EAAO,WAAY,CACrCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO+c,EAAM+I,MAAM6hB,UAAUC,iBAEjC13C,OAAOssB,eAAeO,EAAO,SAAU,CACnCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,QAEX,OAAO+c,EAEX7sB,OAAOssB,eAAe8sB,EAAS5wC,UAAW,iBAAkB,CACxD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAI+c,EAAQnwB,KACZkwB,EAAOpkB,UAAUmmC,eAAe9oC,KAAKnJ,MACrC,GAAIA,KAAKitC,QAAQ,SAAWjtC,KAAKitC,QAAQ,WAAY,CACjDjtC,KAAKw1B,kBAET,GAAIx1B,KAAKitC,QAAQ,SAAWjtC,KAAKitC,QAAQ,WAAajtC,KAAKitC,QAAQ,YAAcjtC,KAAKitC,QAAQ,gBAAkBjtC,KAAKitC,QAAQ,UAAYjtC,KAAKitC,QAAQ,iBAAmBjtC,KAAKitC,QAAQ,mBAAqBjtC,KAAKitC,QAAQ,gBAAkBjtC,KAAKitC,QAAQ,kBAAoBjtC,KAAKitC,QAAQ,gBAAkBjtC,KAAKitC,QAAQ,kBAAoBjtC,KAAKitC,QAAQ,gBAAkBjtC,KAAKitC,QAAQ,SAAWjtC,KAAKitC,QAAQ,cAAgBjtC,KAAKitC,QAAQ,oBAAsBjtC,KAAKitC,QAAQ,qBAAuBjtC,KAAKitC,QAAQ,YAAcjtC,KAAKitC,QAAQ,aAAejtC,KAAKitC,QAAQ,gBAAkBjtC,KAAKitC,QAAQ,eAAiBjtC,KAAKitC,QAAQ,kBAAoBjtC,KAAKitC,QAAQ,iBAAkB,CACtpBjtC,KAAKm7C,OAAS,KAElB,GAAIn7C,KAAKitC,QAAQ,gBAAiB,CAC9B,IAAI0P,EAAW38C,KAAKsT,IAAI,gBACxB,GAAIqpC,EAAU,CACV38C,KAAKq1B,SAASghB,WAAa,KAC3B,IAAIuG,EAAiBD,EAASrpC,IAAI,UAClC,GAAIspC,EAAgB,CAChB58C,KAAKqwB,WAAW7qB,KAAKo3C,EAAe7pB,OAAO5vB,GAAG,iBAAiB,WAC3DgtB,EAAM0V,cAAc,YAExB7lC,KAAKqwB,WAAW7qB,KAAKo3C,EAAe7pB,OAAO5vB,GAAG,mBAAmB,WAC7DgtB,EAAM0V,cAAc,cAKpC,GAAI7lC,KAAKitC,QAAQ,kBAAmB,CAChC,IAAI0P,EAAW38C,KAAKsT,IAAI,kBACxB,GAAIqpC,EAAU,CACV38C,KAAKq1B,SAASghB,WAAa,KAC3B,IAAIuG,EAAiBD,EAASrpC,IAAI,UAClC,GAAIspC,EAAgB,CAChB58C,KAAKqwB,WAAW7qB,KAAKo3C,EAAe7pB,OAAO5vB,GAAG,iBAAiB,WAC3DgtB,EAAM0V,cAAc,cAExB7lC,KAAKqwB,WAAW7qB,KAAKo3C,EAAe7pB,OAAO5vB,GAAG,mBAAmB,WAC7DgtB,EAAM0V,cAAc,oBAO5CviC,OAAOssB,eAAe8sB,EAAS5wC,UAAW,WAAY,CAClD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH8c,EAAOpkB,UAAUinC,SAAS5pC,KAAKnJ,MAC/B,GAAIA,KAAKm7C,OAAQ,CACbn7C,KAAKw1B,kBACLx1B,KAAKsyC,iBACLtyC,KAAKq1B,SAAS/gB,QACd,IAAIuoC,EAAkB78C,KAAKsT,IAAI,mBAC/B,GAAIue,GAAegrB,GAAkB,CACjC,GAAIA,EAAkB,GAAK,CACvBA,EAAkB,CAAC,OAElB,CACDA,EAAkB,CAACA,IAG3B78C,KAAKq1B,SAASynB,YAAYD,GAC1B,IAAIE,EAAmB/8C,KAAKsT,IAAI,oBAChC,GAAIypC,EAAkB,CAClB/8C,KAAKq1B,SAAS2nB,kBAAkBD,GAEpC,IAAIE,EAAYj9C,KAAKsT,IAAI,YAAampC,GAAUS,QAChDl9C,KAAKq1B,SAAS4nB,UAAYA,EAC1B,IAAIE,EAAOn9C,KAAKsT,IAAI,QACpB,GAAI6pC,EAAM,CACNA,EAAKn9C,KAAKq1B,SAAUr1B,MAExB,IAAIo9C,EAAUp9C,KAAKsT,IAAI,WACvB,GAAI8pC,GAAW,KAAM,CACjBp9C,KAAKq1B,SAAS+nB,QAAQA,QAKtC95C,OAAOssB,eAAe8sB,EAAS5wC,UAAW,gBAAiB,CACvD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAI+c,EAAQnwB,KACZkwB,EAAOpkB,UAAUuxC,cAAcl0C,KAAKnJ,MACpC,GAAIA,KAAKm7C,OAAQ,CACb,IAAImC,EAASt9C,KAAKsT,IAAI,QACtB,IAAIiqC,EAAev9C,KAAKsT,IAAI,gBAC5B,IAAIkqC,EAAcx9C,KAAKsT,IAAI,eAC3B,IAAImqC,EAAgBz9C,KAAKsT,IAAI,eAC7B,IAAIoqC,EAAW19C,KAAKsT,IAAI,UACxB,IAAIqqC,EAAiB39C,KAAKsT,IAAI,kBAC9B,IAAIsqC,EAAgB59C,KAAKsT,IAAI,iBAC7B,IAAIuqC,EAAc79C,KAAKsT,IAAI,eAC3B,IAAIwqC,EAAa99C,KAAKsT,IAAI,cAC1B,IAAIyqC,EAAgB/9C,KAAKsT,IAAI,iBAC7B,IAAI0qC,EAAgBh+C,KAAKsT,IAAI,iBAC7B,IAAI2qC,EAAgBj+C,KAAKsT,IAAI,iBAE7B,GAAIuqC,IAAgBC,GAAcC,GAAiBC,GAAgB,CAC/Dh+C,KAAKq1B,SAAS6oB,OAAOL,EAAaC,EAAYC,EAAeC,EAAeC,GAEhF,GAAIT,EAAa,CACb,IAAIW,EAAU,MACd,GAAIb,KAAYE,EAAYlqC,IAAI,SAAWkqC,EAAYlqC,IAAI,kBAAmB,CAC1EkqC,EAAYjqC,IAAI,OAAQ+pC,GACxBE,EAAYjqC,IAAI,gBAAiB,MACjC4qC,EAAU,KAEd,GAAIT,KAAcF,EAAYlqC,IAAI,UAAYkqC,EAAYlqC,IAAI,mBAAoB,CAC9EkqC,EAAYjqC,IAAI,QAASmqC,GACzBF,EAAYjqC,IAAI,iBAAkB,MAClC4qC,EAAU,KAEd,GAAIA,EAAS,CAETX,EAAYzK,WAEhB,IAAIqL,EAAUZ,EAAYY,QAC1B,GAAIA,EAAS,CACTp+C,KAAKq1B,SAASmmB,UAAU4C,EAASX,GACjCz9C,KAAKq1B,SAASqmB,UACd,GAAI8B,aAAuB3B,GAAgB,CACvC2B,EAAYzqB,OAAOxB,KAAK,UAAU,WAC9BpB,EAAMgrB,OAAS,KACfhrB,EAAMsF,sBAKjB,GAAI8nB,EAAc,CACnB,GAAID,EAAQ,CACR,IAAIe,EAAQd,EAAajqC,IAAI,QAAS,IACtC,GAAI+qC,EAAMr6C,OAAQ,CACdosB,GAAYiuB,GAAO,SAAUjW,GACzB,KAAMA,EAAK/kB,OAAS+kB,EAAKkW,iBAAmBhB,EAAQ,CAChDlV,EAAK/kB,MAAQi6B,EACblV,EAAKkW,eAAiB,KAE1B,GAAIlW,EAAKqR,SAAW,MAAQrR,EAAKmW,iBAAkB,CAC/CnW,EAAKqR,QAAUgE,EACfrV,EAAKmW,iBAAmB,UAKxC,IAAI5B,EAAWY,EAAaiB,QAAQx+C,MACpC,GAAI28C,EAAU,CACV38C,KAAKq1B,SAASmmB,UAAUmB,EAAUc,GAClCz9C,KAAKq1B,SAASqmB,gBAGjB,GAAI4B,EAAQ,CACbt9C,KAAKq1B,SAASmmB,UAAU8B,EAAQG,GAChCz9C,KAAKq1B,SAASqmB,UAElB,GAAIgC,GAAYC,GAAkBC,EAAe,CAC7C,IAAIa,EAAkBz+C,KAAKsT,IAAI,iBAC/B,IAAIorC,EAAc1+C,KAAKsT,IAAI,cAAe,GAC1C,GAAItT,KAAKsT,IAAI,oBAAqB,CAC9BorC,EAAcA,EAAc1+C,KAAKsT,IAAI,QAAS,GAElD,IAAIqrC,EAAW3+C,KAAKsT,IAAI,YACxB,GAAIsqC,EAAe,CACf,IAAIO,EAAU,MACd,GAAIT,KAAcE,EAActqC,IAAI,UAAYsqC,EAActqC,IAAI,mBAAoB,CAClFsqC,EAAcrqC,IAAI,QAASmqC,GAC3BE,EAAcrqC,IAAI,iBAAkB,MACpC4qC,EAAU,KAEd,GAAIA,EAAS,CAETP,EAAc7K,WAElB,IAAIqL,EAAUR,EAAcQ,QAC5B,GAAIA,EAAS,CACTp+C,KAAKq1B,SAASupB,UAAUF,EAAaN,EAASK,EAAiBE,GAC/D3+C,KAAKq1B,SAASwpB,YACd,GAAIjB,aAAyB/B,GAAgB,CACzC+B,EAAc7qB,OAAOxB,KAAK,UAAU,WAChCpB,EAAMgrB,OAAS,KACfhrB,EAAMsF,sBAKjB,GAAIkoB,EAAgB,CACrB,IAAIU,EAAQV,EAAerqC,IAAI,QAAS,IACxC,GAAI+qC,EAAMr6C,OAAQ,CACdosB,GAAYiuB,GAAO,SAAUjW,GACzB,KAAMA,EAAK/kB,OAAS+kB,EAAKkW,iBAAmBZ,EAAU,CAClDtV,EAAK/kB,MAAQq6B,EACbtV,EAAKkW,eAAiB,KAE1B,GAAIlW,EAAKqR,SAAW,MAAQrR,EAAKmW,iBAAkB,CAC/CnW,EAAKqR,QAAUgF,EACfrW,EAAKmW,iBAAmB,SAIpC,IAAI5B,EAAWgB,EAAea,QAAQx+C,MACtC,GAAI28C,EAAU,CACV38C,KAAKq1B,SAASupB,UAAUF,EAAa/B,EAAU8B,EAAiBE,GAChE3+C,KAAKq1B,SAASwpB,kBAGjB,GAAInB,EAAU,CACf19C,KAAKq1B,SAASupB,UAAUF,EAAahB,EAAUe,EAAiBE,GAChE3+C,KAAKq1B,SAASwpB,cAI1B7+C,KAAKm7C,OAAS,SAGtB73C,OAAOssB,eAAe8sB,EAAU,YAAa,CACzChnC,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,aAEX9P,OAAOssB,eAAe8sB,EAAU,aAAc,CAC1ChnC,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAOm9B,GAAO1G,WAAW//B,OAAO,CAAC4yC,EAAS5S,cAE9C,OAAO4S,EAzPC,CA0PVnM,IC/PF,IAAIuO,GAA2B,SAAU5uB,GACrC1F,GAAUs0B,EAAW5uB,GACrB,SAAS4uB,IACL,OAAO5uB,IAAW,MAAQA,EAAOnkB,MAAM/L,KAAMgM,YAAchM,KAE/DsD,OAAOssB,eAAekvB,EAAUhzC,UAAW,iBAAkB,CACzD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH8c,EAAOpkB,UAAUmmC,eAAe9oC,KAAKnJ,MACrC,GAAIA,KAAKitC,QAAQ,UAAYjtC,KAAKitC,QAAQ,WAAajtC,KAAK8zC,eAAe,UAAY9zC,KAAK8zC,eAAe,UAAW,CAClH9zC,KAAKm7C,OAAS,SAI1B73C,OAAOssB,eAAekvB,EAAUhzC,UAAW,WAAY,CACnD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH8c,EAAOpkB,UAAUinC,SAAS5pC,KAAKnJ,MAC/B,GAAIA,KAAKm7C,SAAWn7C,KAAKsT,IAAI,QAAS,CAClCtT,KAAK27C,YAIjBr4C,OAAOssB,eAAekvB,EAAUhzC,UAAW,QAAS,CAChD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACHpT,KAAKq1B,SAASomB,SAAS,EAAG,EAAGz7C,KAAKujB,QAASvjB,KAAK63C,aAGxDv0C,OAAOssB,eAAekvB,EAAUhzC,UAAW,cAAe,CACtD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACHpT,KAAKy1B,YACLz1B,KAAKm7C,OAAS,QAGtB73C,OAAOssB,eAAekvB,EAAW,YAAa,CAC1CppC,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,cAEX9P,OAAOssB,eAAekvB,EAAW,aAAc,CAC3CppC,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAOspC,GAAS7S,WAAW//B,OAAO,CAACg1C,EAAUhV,cAEjD,OAAOgV,EAxDE,CAyDXpC,IC/DK,SAASqC,GAAarqB,EAAWx0B,GACpC,GAAIw0B,EAAUphB,IAAI,kBAAmB,OAAQ,CACzCohB,EAAU0iB,SAAShpB,YAAYluB,OAE9B,CACDw0B,EAAU0iB,SAASnwC,KAAK/G,IAMhC,IAAI8+C,GAAwB,SAAU9uB,GAClC1F,GAAUw0B,EAAQ9uB,GAClB,SAAS8uB,IACL,OAAO9uB,IAAW,MAAQA,EAAOnkB,MAAM/L,KAAMgM,YAAchM,KAE/DsD,OAAOssB,eAAeovB,EAAQ,YAAa,CACvCtpC,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WAEX9P,OAAOssB,eAAeovB,EAAQ,aAAc,CACxCtpC,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO21B,GAAOc,WAAW//B,OAAO,CAACk1C,EAAOlV,cAE5C,OAAOkV,EAjBD,CAkBRjW,ICtBF,IAAIkW,GAAkC,SAAU/uB,GAC5C1F,GAAUy0B,EAAkB/uB,GAC5B,SAAS+uB,IACL,OAAO/uB,IAAW,MAAQA,EAAOnkB,MAAM/L,KAAMgM,YAAchM,KAK/DsD,OAAOssB,eAAeqvB,EAAiBnzC,UAAW,kBAAmB,CACjE4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUshB,GACb,IAAIwqB,EAAcxqB,EAAUphB,IAAI,cAAe,GAC/C,IAAI6rC,EAAiBzqB,EAAU+jB,aAC/B,IAAI2G,EAAe,EACnBL,GAAarqB,GAAW,SAAUM,GAC9B,GAAIA,EAAM8kB,YAAa,CACnB,GAAI9kB,EAAM1hB,IAAI,aAAe,WAAY,CACrC,IAAI+rC,EAAarqB,EAAM1hB,IAAI,SAC3B,GAAI+rC,aAAsB3pB,GAAS,CAC/B0pB,GAAgBC,EAAWjsC,MAC3B,IAAItK,EAAIq2C,EAAiBE,EAAWjsC,MACpC,IAAI4jC,EAAWhiB,EAAM1hB,IAAI,WAAY0hB,EAAM6T,WAAW,YAAazb,WACnE,GAAI4pB,EAAWluC,EAAG,CACdq2C,GAAkBnI,EAClBoI,GAAgBC,EAAWjsC,MAE/B,IAAI4mC,EAAWhlB,EAAM1hB,IAAI,WAAY0hB,EAAM6T,WAAW,WAAYzb,WAClE,GAAItkB,EAAIkxC,EAAU,CACdmF,GAAkBnF,EAClBoF,GAAgBC,EAAWjsC,WAG9B,CACD,IAAKye,GAAewtB,GAAa,CAC7BA,EAAarqB,EAAMzR,QAEvB47B,GAAkBE,EAAarqB,EAAM1hB,IAAI,aAAc,GAAK0hB,EAAM1hB,IAAI,cAAe,SAKrG,GAAI6rC,EAAiB,EAAG,CACpBA,EAAiB,IAGrBJ,GAAarqB,GAAW,SAAUM,GAC9B,GAAIA,EAAM8kB,YAAa,CACnB,GAAI9kB,EAAM1hB,IAAI,aAAe,WAAY,CACrC,IAAI+rC,EAAarqB,EAAM1hB,IAAI,SAC3B,GAAI+rC,aAAsB3pB,GAAS,CAC/B,IAAIwhB,EAAeiI,EAAiBE,EAAWjsC,MAAQgsC,EAAepqB,EAAM1hB,IAAI,aAAc,GAAK0hB,EAAM1hB,IAAI,cAAe,GAC5H,IAAI0jC,EAAWhiB,EAAM1hB,IAAI,WAAY0hB,EAAM6T,WAAW,YAAazb,WACnE,IAAI4sB,EAAWhlB,EAAM1hB,IAAI,WAAY0hB,EAAM6T,WAAW,WAAYzb,WAClE8pB,EAAe5rC,KAAKC,IAAID,KAAKyY,IAAIizB,EAAUE,GAAe8C,GAC1DhlB,EAAM2S,WAAW,QAASuP,SAM1C,IAAIoI,EAAQJ,EACZH,GAAarqB,GAAW,SAAUM,GAC9B,GAAIA,EAAM1hB,IAAI,aAAe,WAAY,CACrC,GAAI0hB,EAAM8kB,YAAa,CACnB,IAAIlI,EAAS5c,EAAMuqB,sBACnB,IAAIC,EAAaxqB,EAAM1hB,IAAI,aAAc,GACzC,IAAImsC,EAAczqB,EAAM1hB,IAAI,cAAe,GAC3C,IAAI0mC,EAAWhlB,EAAM1hB,IAAI,YACzB,IAAI0jB,EAAO4a,EAAO5a,KAClB,IAAIwM,EAAQoO,EAAOpO,MACnB,GAAIwW,EAAU,CACV,GAAIxW,EAAQxM,EAAOgjB,EAAU,CACzBxW,EAAQxM,EAAOgjB,GAGvB,IAAIpsC,EAAI0xC,EAAQE,EAAaxoB,EAC7BhC,EAAM2S,WAAW,IAAK/5B,GACtB0xC,EAAQ1xC,EAAI41B,EAAQic,MAEnB,CACDzqB,EAAM2S,WAAW,IAAKzvB,mBAM1C5U,OAAOssB,eAAeqvB,EAAkB,YAAa,CACjDvpC,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,qBAEX9P,OAAOssB,eAAeqvB,EAAkB,aAAc,CAClDvpC,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO4rC,GAAOnV,WAAW//B,OAAO,CAACm1C,EAAiBnV,cAEtD,OAAOmV,EApGS,CAqGlBD,ICrGF,IAAIU,GAAgC,SAAUxvB,GAC1C1F,GAAUk1B,EAAgBxvB,GAC1B,SAASwvB,IACL,OAAOxvB,IAAW,MAAQA,EAAOnkB,MAAM/L,KAAMgM,YAAchM,KAK/DsD,OAAOssB,eAAe8vB,EAAe5zC,UAAW,kBAAmB,CAC/D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUshB,GACb,IAAIirB,EAAajrB,EAAUphB,IAAI,aAAc,GAC7C,IAAIssC,EAAkBlrB,EAAUikB,cAChC,IAAIyG,EAAe,EACnBL,GAAarqB,GAAW,SAAUM,GAC9B,GAAIA,EAAM8kB,YAAa,CACnB,GAAI9kB,EAAM1hB,IAAI,aAAe,WAAY,CACrC,IAAIusC,EAAc7qB,EAAM1hB,IAAI,UAC5B,GAAIusC,aAAuBnqB,GAAS,CAChC0pB,GAAgBS,EAAYzsC,MAC5B,IAAIvS,EAAI++C,EAAkBC,EAAYzsC,MACtC,IAAI6jC,EAAYjiB,EAAM1hB,IAAI,YAAa0hB,EAAM6T,WAAW,aAAczb,WACtE,GAAI6pB,EAAYp2C,EAAG,CACf++C,GAAmB3I,EACnBmI,GAAgBS,EAAYzsC,MAEhC,IAAI8mC,EAAYllB,EAAM1hB,IAAI,YAAa0hB,EAAM6T,WAAW,YAAazb,WACrE,GAAIvsB,EAAIq5C,EAAW,CACf0F,GAAmB1F,EACnBkF,GAAgBS,EAAYzsC,WAG/B,CACD,IAAKye,GAAeguB,GAAc,CAC9BA,EAAc7qB,EAAM6iB,SAExB+H,GAAmBC,EAAc7qB,EAAM1hB,IAAI,YAAa,GAAK0hB,EAAM1hB,IAAI,eAAgB,SAKvG,GAAIssC,EAAkB,EAAG,CACrBA,EAAkB,IAGtBb,GAAarqB,GAAW,SAAUM,GAC9B,GAAIA,EAAM8kB,YAAa,CACnB,GAAI9kB,EAAM1hB,IAAI,aAAe,WAAY,CACrC,IAAIusC,EAAc7qB,EAAM1hB,IAAI,UAC5B,GAAIusC,aAAuBnqB,GAAS,CAChC,IAAIyhB,EAAgByI,EAAkBC,EAAYzsC,MAAQgsC,EAAepqB,EAAM1hB,IAAI,YAAa,GAAK0hB,EAAM1hB,IAAI,eAAgB,GAC/H,IAAI2jC,EAAYjiB,EAAM1hB,IAAI,YAAa0hB,EAAM6T,WAAW,aAAczb,WACtE,IAAI8sB,EAAYllB,EAAM1hB,IAAI,YAAa0hB,EAAM6T,WAAW,YAAazb,WACrE+pB,EAAgB7rC,KAAKC,IAAID,KAAKyY,IAAIkzB,EAAWE,GAAgB+C,GAC7DllB,EAAM2S,WAAW,SAAUwP,SAM3C,IAAI2I,EAAQH,EACZZ,GAAarqB,GAAW,SAAUM,GAC9B,GAAIA,EAAM1hB,IAAI,aAAe,WAAY,CACrC,GAAI0hB,EAAM8kB,YAAa,CACnB,IAAIlI,EAAS5c,EAAMuqB,sBACnB,IAAIQ,EAAY/qB,EAAM1hB,IAAI,YAAa,GACvC,IAAI0sC,EAAQpO,EAAO7a,IACnB,IAAI0M,EAASmO,EAAOnO,OACpB,IAAIyW,EAAYllB,EAAM1hB,IAAI,aAC1B,GAAI4mC,EAAW,CACX,GAAIzW,EAASuc,EAAQ9F,EAAW,CAC5BzW,EAASuc,EAAQ9F,GAGzB,IAAI+F,EAAejrB,EAAM1hB,IAAI,eAAgB,GAC7C,IAAI3P,EAAIm8C,EAAQC,EAAYC,EAC5BhrB,EAAM2S,WAAW,IAAKhkC,GACtBm8C,EAAQn8C,EAAI8/B,EAASwc,MAEpB,CACDjrB,EAAM2S,WAAW,IAAKzvB,mBAM1C5U,OAAOssB,eAAe8vB,EAAgB,YAAa,CAC/ChqC,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,mBAEX9P,OAAOssB,eAAe8vB,EAAgB,aAAc,CAChDhqC,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO4rC,GAAOnV,WAAW//B,OAAO,CAAC41C,EAAe5V,cAEpD,OAAO4V,EApGO,CAqGhBV,ICrGF,IAAIkB,GAA4B,SAAUhwB,GACtC1F,GAAU01B,EAAYhwB,GACtB,SAASgwB,IACL,OAAOhwB,IAAW,MAAQA,EAAOnkB,MAAM/L,KAAMgM,YAAchM,KAE/DsD,OAAOssB,eAAeswB,EAAWp0C,UAAW,YAAa,CACrD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACHpT,KAAKmgD,eAAe,aAAc7wC,OAAOyzB,WACzC7S,EAAOpkB,UAAUw9B,UAAUngC,KAAKnJ,SAMxCsD,OAAOssB,eAAeswB,EAAWp0C,UAAW,kBAAmB,CAC3D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUshB,GACb,IAAIwqB,EAAcxqB,EAAUphB,IAAI,cAAe,GAC/C,IAAI8sC,EAAe1rB,EAAUphB,IAAI,eAAgB,GACjD,IAAIqsC,EAAajrB,EAAUphB,IAAI,aAAc,GAC7C,IAAI6rC,EAAiBzqB,EAAUslB,WAAakF,EAAckB,EAC1D,IAAIC,EAAelB,EACnB,IAAImB,EAAe,EACnBvB,GAAarqB,GAAW,SAAUM,GAC9B,GAAIA,EAAM1hB,IAAI,YAAc0hB,EAAM6T,WAAW,aAAe7T,EAAM1hB,IAAI,eAAgB,CAClF,GAAI0hB,EAAM1hB,IAAI,aAAe,WAAY,CACrC,IAAI+rC,EAAarqB,EAAMzR,QACvB,GAAI87B,EAAagB,EAAc,CAC3BA,EAAehB,EAEnB,GAAIA,EAAaiB,EAAc,CAC3BA,EAAejB,QAK/BgB,EAAeE,GAAiBF,EAAc,EAAGlB,GACjDmB,EAAeC,GAAiBD,EAAc,EAAGnB,GACjD,IAAIqB,EAAc,EAClB,GAAIxgD,KAAKsT,IAAI,kBAAmB,CAC5BktC,EAAcrB,EAAiBmB,MAE9B,CACDE,EAAcrB,EAAiBkB,EAEnCG,EAAcl1C,KAAKyY,IAAI,EAAGzY,KAAK+D,MAAMmxC,IACrCA,EAAcl1C,KAAKC,IAAIvL,KAAKsT,IAAI,aAAchE,OAAOyzB,WAAYyd,GACjE,IAAIC,EAAezgD,KAAK0gD,gBAAgBhsB,EAAW8rB,EAAaF,EAAcnB,GAC9E,IAAIW,EAAQH,EACZ,IAAIgB,EAAS,EACb,IAAIC,EAAkB,EACtBJ,EAAcC,EAAaz8C,OAC3B,IAAIs7C,EAAQJ,EACZH,GAAarqB,GAAW,SAAUM,GAC9B,GAAIA,EAAM1hB,IAAI,aAAe,YAAc0hB,EAAM8kB,YAAa,CAC1D,IAAIiG,EAAY/qB,EAAM1hB,IAAI,YAAa,GACvC,IAAI2sC,EAAejrB,EAAM1hB,IAAI,eAAgB,GAC7C,IAAIs+B,EAAS5c,EAAMuqB,sBACnB,IAAIC,EAAaxqB,EAAM1hB,IAAI,aAAc,GACzC,IAAImsC,EAAczqB,EAAM1hB,IAAI,cAAe,GAC3C,IAAI1F,EAAI0xC,EAAQE,EAAa5N,EAAO5a,KACpC,IAAIrzB,EAAIm8C,EAAQC,EAAYnO,EAAO7a,IACnC/B,EAAM2S,WAAW,IAAK/5B,GACtBonB,EAAM2S,WAAW,IAAKhkC,GACtB27C,GAASmB,EAAaE,GAAUlB,EAChCmB,EAAkBt1C,KAAKyY,IAAI68B,EAAiB5rB,EAAM6iB,SAAWkI,EAAYE,GACzEU,IACA,GAAIA,GAAUH,EAAa,CACvBG,EAAS,EACTrB,EAAQJ,EACRY,GAASc,UAS7Bt9C,OAAOssB,eAAeswB,EAAWp0C,UAAW,kBAAmB,CAC3D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUshB,EAAW8rB,EAAaF,EAAcnB,GACnD,IAAIhvB,EAAQnwB,KACZ,IAAI6gD,EAAa,EACjB,IAAIJ,EAAe,GACnB,IAAIE,EAAS,EACb5B,GAAarqB,GAAW,SAAUM,GAC9B,IAAI4c,EAAS5c,EAAMuqB,sBACnB,GAAIvqB,EAAM1hB,IAAI,aAAe,YAAc0hB,EAAM8kB,YAAa,CAC1D,GAAI3pB,EAAM7c,IAAI,kBAAmB,CAC7BmtC,EAAaE,GAAUL,MAEtB,CACDG,EAAaE,GAAUr1C,KAAKyY,IAAI08B,EAAaE,GAAU,EAAG/O,EAAOpO,MAAQoO,EAAO5a,KAAOhC,EAAM1hB,IAAI,aAAc,GAAK0hB,EAAM1hB,IAAI,cAAe,IAEjJ,GAAIqtC,EAASjsB,EAAU0iB,SAASpzC,OAAS,EAAG,CACxC28C,IACA,GAAIA,GAAUH,EAAa,CACvBG,EAAS,QAKzBvwB,GAAYqwB,GAAc,SAAU33C,GAChC+3C,GAAc/3C,KAElB,GAAI+3C,EAAa1B,EAAgB,CAC7B,GAAIqB,EAAc,EAAG,CACjBA,GAAe,EACf,OAAOxgD,KAAK0gD,gBAAgBhsB,EAAW8rB,EAAaF,EAAcnB,OAEjE,CACD,MAAO,CAACA,IAGhB,OAAOsB,KAGfn9C,OAAOssB,eAAeswB,EAAY,YAAa,CAC3CxqC,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,eAEX9P,OAAOssB,eAAeswB,EAAY,aAAc,CAC5CxqC,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO4rC,GAAOnV,WAAW//B,OAAO,CAACo2C,EAAWpW,cAEhD,OAAOoW,EAzIG,CA0IZlB,ICjJF,IAAI8B,GAA+B,WAC/B,SAASA,KASTx9C,OAAOssB,eAAekxB,EAAe,SAAU,CAC3CprC,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUrD,GACb,OAAOA,EACHlK,QAAQ,QAAS7F,KAAK+gD,OAAS,KAC/Bl7C,QAAQ,oBAAqB,KAAO7F,KAAK+gD,OAAS,KAClDl7C,QAAQ,QAAS7F,KAAK+gD,OAAS,KAC/Bl7C,QAAQ,QAAS7F,KAAK+gD,OAAS,KAC/Bl7C,QAAQ,QAAS7F,KAAK+gD,OAAS,KAC/Bl7C,QAAQ,QAAS7F,KAAK+gD,OAAS,QAU3Cz9C,OAAOssB,eAAekxB,EAAe,WAAY,CAC7CprC,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUrD,GACb,OAAOA,EACHlK,QAAQ,IAAIjB,OAAO5E,KAAK+gD,OAAS,IAAK,KAAM,MAC5Cl7C,QAAQ,IAAIjB,OAAO5E,KAAK+gD,OAAS,IAAK,KAAM,MAC5Cl7C,QAAQ,IAAIjB,OAAO5E,KAAK+gD,OAAS,IAAK,KAAM,MAC5Cl7C,QAAQ,IAAIjB,OAAO5E,KAAK+gD,OAAS,IAAK,KAAM,MAC5Cl7C,QAAQ,IAAIjB,OAAO5E,KAAK+gD,OAAS,IAAK,KAAM,SAUxDz9C,OAAOssB,eAAekxB,EAAe,UAAW,CAC5CprC,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUrD,GACb,OAAOA,EACHlK,QAAQ,QAAS,KACjBA,QAAQ,QAAS,KACjBA,QAAQ,QAAS,KACjBA,QAAQ,QAAS,KACjBA,QAAQ,QAAS,QAuB7BvC,OAAOssB,eAAekxB,EAAe,QAAS,CAC1CprC,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUrD,EAAMixC,EAAcC,GACjC,GAAID,SAAsB,EAAG,CAAEA,EAAe,MAC9C,GAAIC,SAAsB,EAAG,CAAEA,EAAe,MAE9C,IAAI9pC,EAAM,GAEVpH,EAAO/P,KAAKkhD,OAAOnxC,GAEnB,IAAIoxC,EAASH,EAAejxC,EAAK7C,MAAM,KAAO,CAAC6C,GAC/C,IAAK,IAAI/O,EAAI,EAAGA,EAAImgD,EAAOn9C,OAAQhD,IAAK,CACpC,IAAIsB,EAAQ6+C,EAAOngD,GAEnB,GAAIsB,IAAU,GAAI,CACd,SAEJ,GAAKtB,EAAI,IAAO,EAAG,CAIfsB,EAAQA,EAAMuD,QAAQ,QAAS,IAAMu7C,GAAoB,KACzD9+C,EAAQA,EAAMuD,QAAQ,QAAS,OAC/B,IAAIw7C,EAAU/+C,EAAM4K,MAAM,WAC1B,IAAK,IAAIo0C,EAAK,EAAGA,EAAKD,EAAQr9C,OAAQs9C,IAAM,CACxC,IAAIC,EAASvhD,KAAKwhD,QAAQxhD,KAAKyhD,SAASJ,EAAQC,KAEhD,GAAIC,IAAWH,GAAmB,CAC9B,SAGJ,GAAIG,IAAW,GAAI,CACf,SAGJ,GAAKD,EAAK,IAAO,EAAG,CAChBnqC,EAAI3R,KAAK,CACL1D,KAAQ,QACRiO,KAAQwxC,QAGX,CACDpqC,EAAI3R,KAAK,CACL1D,KAAQm/C,EAAe,QAAU,SACjClxC,KAAQ,IAAMwxC,EAAS,YAKlC,CAGD,IAAIF,EAAU/+C,EAAM4K,MAAM,WAC1B,IAAK,IAAIo0C,EAAK,EAAGA,EAAKD,EAAQr9C,OAAQs9C,IAAM,CACxC,IAAIC,EAASvhD,KAAKwhD,QAAQxhD,KAAKyhD,SAASJ,EAAQC,KAEhD,GAAIC,IAAW,GAAI,CACf,SAGJ,GAAKD,EAAK,IAAO,EAAG,CAChBnqC,EAAI3R,KAAK,CACL1D,KAAQ,OACRiO,KAAQwxC,SAGX,GAAIvhD,KAAK0hD,QAAQH,GAAS,CAC3BpqC,EAAI3R,KAAK,CACL1D,KAAQ,QACRiO,KAAQ,IAAMwxC,EAAS,UAG1B,CACDpqC,EAAI3R,KAAK,CACL1D,KAAQ,SACRiO,KAAQ,IAAMwxC,EAAS,SAM3C,OAAOpqC,KAYf7T,OAAOssB,eAAekxB,EAAe,UAAW,CAC5CprC,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUrD,GACb,OAAOA,EAAK0nB,MAAM,YAAc,KAAO,SAG/Cn0B,OAAOssB,eAAekxB,EAAe,eAAgB,CACjDprC,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUnE,GAGb,IAAIgE,EAAS,GACb,GAAIhE,GAAS,IAAMA,GAAS,MAAO,CAC/B,MAAO,GAGX,IAAIwuB,EAAIxuB,EAAMwoB,MAAM,yBACpB,GAAIgG,EAAG,CACH,IAAK,IAAIz8B,EAAI,EAAGA,EAAIy8B,EAAEz5B,OAAQhD,IAAK,CAC/BiO,EAAQA,EAAMpJ,QAAQ43B,EAAEz8B,GAAIy8B,EAAEz8B,GAAG6E,QAAQ,SAAU,IAAIA,QAAQ,QAAS,OAIhF,IAAI/E,EAAImO,EAAMwoB,MAAM,2DAEpB,IAAK32B,EAAG,CACJ,MAAO,GAGX,IAAK,IAAIE,EAAI,EAAGA,EAAIF,EAAEkD,OAAQhD,IAAK,CAC/B,GAAIF,EAAEE,GAAGy2B,MAAM,uEAAwE,CACnFxkB,EAAO0uC,WAAa7gD,EAAEE,QAErB,GAAIF,EAAEE,GAAGy2B,MAAM,+BAAgC,CAChDxkB,EAAO2uC,eAAiB9gD,EAAEE,QAEzB,GAAIF,EAAEE,IAAM,UAIZ,IAAKF,EAAEE,GAAGy2B,MAAM,KAAM,CAEvBxkB,EAAOooC,KAAOtc,GAAMU,WAAW3+B,EAAEE,QAEhC,CACD,IAAIgC,EAAIlC,EAAEE,GAAG6E,QAAQ,IAAK,KAAKqH,MAAM,SACrC+F,EAAOjQ,EAAE,IAAMA,EAAE,IAKzB,OAAOiQ,KAGf3P,OAAOssB,eAAekxB,EAAe,SAAU,CAC3CprC,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,iBAEX,OAAO0tC,EAnPM,GCMV,SAASe,GAAel2C,EAAQkiB,GACnC,GAAIA,GAAU,KAAM,CAChBA,EAAS,GAAKA,EACdA,EAASizB,GAAcI,OAAOrzB,GAC9B,IAAIse,EAAOte,EAAO4J,MAAM,gBACxB,IAAIz2B,OAAS,EACb,GAAImrC,EAAM,CACN,IAAKnrC,EAAI,EAAGA,EAAImrC,EAAKnoC,OAAQhD,IAAK,CAC9B,IAAIorC,EAAMD,EAAKnrC,GAAG6E,QAAQ,cAAe,MACzC,IAAIuN,EAAQ0uC,GAAYn2C,EAAQygC,GAChC,GAAIh5B,GAAS,KAAM,CACfA,EAAQ,GAEZya,EAASA,EAAO3gB,MAAMi/B,EAAKnrC,IAAIqE,KAAK+N,IAG5Cya,EAASizB,GAAcW,SAAS5zB,OAE/B,CACDA,EAAS,GAGb,OAAOA,EAKX,SAASi0B,GAAYn2C,EAAQo2C,EAAS9uC,GAClC,IAAIG,EACJ,IAAIw9B,EAAWjlC,EAAOilC,SAEtB,IAAIoR,EAAQ,GACZ,IAAIC,EAAM,8BAEV,IAAInzB,EACJ,MAAO,KAAM,CACTA,EAAUmzB,EAAI10B,KAAKw0B,GACnB,GAAIjzB,IAAY,KAAM,CAClB,MAEJ,GAAIA,EAAQ,GAAI,CAEZkzB,EAAMx8C,KAAK,CACP0B,KAAM4nB,EAAQ,KAGlB,IAAIozB,EAAav2C,EAAOw2C,mBAAmB7uC,IAAI,aAAc,IAC7D,IAAI8uC,EAAgBz2C,EAAO02C,qBAAqB/uC,IAAI,gBAAiB,IACrE,IAAIgvC,EAAiB32C,EAAO42C,uBAAuBjvC,IAAI,iBAAkB,IACzE,GAAI4uC,EAAWn+C,QAAQ+qB,EAAQ,OAAS,EAAG,CACvCkzB,EAAMx8C,KAAK,CACPgV,OAAQ,aACRgoC,OAAQ,UAGX,GAAIJ,EAAcr+C,QAAQ+qB,EAAQ,OAAS,EAAG,CAC/CkzB,EAAMx8C,KAAK,CACPgV,OAAQ,eACRgoC,OAAQ,UAGX,GAAIF,EAAev+C,QAAQ+qB,EAAQ,OAAS,EAAG,CAChDkzB,EAAMx8C,KAAK,CACPgV,OAAQ,iBACRgoC,OAAQ,UAIf,CAGD,IAAIA,EAAS,GACb,GAAIC,GAAY3zB,EAAQ,KAAO,GAAI,CAC/B,IAAI4zB,EAAO,kCACX,IAAIC,OAAgB,EACpB,MAAO,KAAM,CACTA,EAAWD,EAAKn1B,KAAKuB,EAAQ,IAC7B,GAAI6zB,IAAa,KAAM,CACnB,MAEJH,EAAOh9C,KAAKm9C,EAAS,IAAMA,EAAS,IAAMA,EAAS,KAG3DX,EAAMx8C,KAAK,CACPgV,OAAQsU,EAAQ,GAChB0zB,OAAQA,KAKpB,GAAI5R,EAAU,CAEVx9B,EAAQwvC,GAAsBj3C,EAAQq2C,EAAOpR,EAAS3M,WAEtD,GAAI7wB,GAAS,MAAQyvC,GAAezvC,GAAQ,CACxCA,EAAQwvC,GAAsBj3C,EAAQq2C,EAAOpR,GAGjD,IAAIC,EAAcD,EAASC,YAC3B,GAAIz9B,GAAS,MAAQy9B,EAAa,CAC9Bz9B,EAAQwvC,GAAsBj3C,EAAQq2C,EAAOnR,GAE7C,GAAIz9B,GAAS,KAAM,CACfA,EAAQwvC,GAAsBj3C,EAAQ,CAAC,CAC/BzE,KAAM66C,IACNlR,GAGZ,GAAIz9B,GAAS,MAAQy9B,EAAYA,YAAa,CAC1Cz9B,EAAQwvC,GAAsBj3C,EAAQq2C,EAAOnR,EAAYA,cAIjE,GAAIz9B,GAAS,MAAQw9B,EAASkS,WAAalS,EAASkS,UAAUlS,WAAaA,EAAU,CACjFx9B,EAAQ0uC,GAAYlR,EAASkS,UAAWf,IAIhD,GAAI3uC,GAAS,KAAM,CACfA,EAAQwvC,GAAsBj3C,EAAQq2C,EAAOr2C,GAGjD,GAAIyH,GAAS,MAAQzH,EAAO2jC,OAAQ,CAChCl8B,EAAQ0uC,GAAYn2C,EAAO2jC,OAAQyS,GAEvC,OAAO3uC,EAKX,SAAS2vC,GAAmBp3C,EAAQzE,GAChC,IAAI87C,EAAar3C,EAAOk9B,WAAW,cACnC,GAAIga,GAAeG,GAAa,CAC5B,OAAOA,EAAW97C,IAMnB,SAAS07C,GAAsBj3C,EAAQq2C,EAAO3mC,EAAQpI,GACzD,IAAI4J,EAAUxB,EACd,IAAI4nC,EAAgB,MACpB,IAAK,IAAIjiD,EAAI,EAAG0xB,EAAMsvB,EAAMh+C,OAAQhD,EAAI0xB,EAAK1xB,IAAK,CAC9C,IAAIkiD,EAAOlB,EAAMhhD,GACjB,GAAIkiD,EAAKh8C,KAAM,CAEX,GAAI2V,aAAmB0zB,GAAQ,CAC3B,IAAI4S,EAAMtmC,EAAQvJ,IAAI4vC,EAAKh8C,MAC3B,GAAIi8C,GAAO,KACPA,EAAMtmC,EAAQgsB,WAAWqa,EAAKh8C,MAClC,GAAIi8C,GAAO,KACPA,EAAMtmC,EAAQqmC,EAAKh8C,MACvB,GAAIi8C,GAAO,KACPA,EAAMJ,GAAmBlmC,EAASqmC,EAAKh8C,MAC3C2V,EAAUsmC,OAET,GAAItmC,EAAQvJ,IAAK,CAClB,IAAI6vC,EAAMtmC,EAAQvJ,IAAI4vC,EAAKh8C,MAC3B,GAAIi8C,GAAO,KACPA,EAAMtmC,EAAQqmC,EAAKh8C,MACvB2V,EAAUsmC,MAET,CACDtmC,EAAUA,EAAQqmC,EAAKh8C,MAE3B,GAAI2V,GAAW,KAAM,CAEjB,YAGH,CAED,OAAQqmC,EAAK1oC,QACT,IAAK,eACD,IAAI4oC,EAAcC,GAAexmC,GACjC,GAAIumC,GAAe,KAAM,CACrBvmC,EAAUlR,EAAO02C,qBAAqBpvC,OAAOmwC,EAAanwC,GAAUiwC,EAAKV,OAAO,IAAMtqC,WACtF+qC,EAAgB,KAEpB,MACJ,IAAK,aACD,IAAIK,EAAYC,GAAa1mC,GAC7B,IAAK2mC,GAAaF,IAAcG,GAAYH,EAAUroB,WAAY,CAG9D,OAEJ,GAAIqoB,GAAa,KAAM,CACnBzmC,EAAUlR,EAAOw2C,mBAAmBlvC,OAAOqwC,EAAWrwC,GAAUiwC,EAAKV,OAAO,IAAMtqC,WAClF+qC,EAAgB,KAEpB,MACJ,IAAK,iBACD,IAAIS,EAAgBL,GAAexmC,GACnC,GAAI6mC,GAAiB,KAAM,CACvB7mC,EAAUlR,EAAO42C,uBAAuBtvC,OAAOywC,EAAezwC,GAAUiwC,EAAKV,OAAO,IAAMtqC,UAAWgrC,EAAKV,OAAO,IAAMtqC,WACvH+qC,EAAgB,KAEpB,MACJ,IAAK,YACL,IAAK,qBACDpmC,EAAU8mC,mBAAmB9mC,GAC7B,MACJ,QACI,GAAIA,EAAQqmC,EAAK1oC,QAAS,CACtBqC,EAAQqmC,EAAK1oC,QAAQzO,MAAMsP,EAAQ6nC,EAAKV,QAE5C,QAKhB,IAAKS,EAAe,CAChB,IAAIW,EAAc,CAAC,CACXppC,OAAQ,GACRgoC,OAAQvvC,IAEhB,GAAIA,GAAU,KAAM,CAGhB,GAAI4e,GAAehV,GAAU,CACzB+mC,EAAY,GAAGppC,OAAS,eACxBopC,EAAY,GAAGpB,OAAS,QAEvB,GAAIgB,GAAa3mC,GAAU,CAC5B+mC,EAAY,GAAGppC,OAAS,aACxBopC,EAAY,GAAGpB,OAAS,QAG3B,CAGD,IAAIqB,EAAgBC,GAAiB7wC,GAErC,GAAI4wC,IAAkB,SAAU,CAC5BD,EAAY,GAAGppC,OAAS,oBAEvB,GAAIqpC,IAAkB,OAAQ,CAC/BD,EAAY,GAAGppC,OAAS,kBAEvB,GAAIqpC,IAAkB,WAAY,CACnCD,EAAY,GAAGppC,OAAS,kBAIhC,GAAIopC,EAAY,GAAGppC,OAAQ,CACvBqC,EAAU+lC,GAAsBj3C,EAAQi4C,EAAa/mC,IAG7D,OAAOA,EC3OX,IAAIknC,GAA2B,SAAU7zB,GACrC1F,GAAUu5B,EAAW7zB,GACrB,SAAS6zB,IACL,IAAI5zB,EAAQD,IAAW,MAAQA,EAAOnkB,MAAM/L,KAAMgM,YAAchM,KAChEsD,OAAOssB,eAAeO,EAAO,WAAY,CACrCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO+c,EAAM+I,MAAM6hB,UAAUiJ,kBAEjC1gD,OAAOssB,eAAeO,EAAO,mBAAoB,CAC7Cza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO+c,EAAM+I,MAAM6hB,UAAUiJ,kBAKjC1gD,OAAOssB,eAAeO,EAAO,WAAY,CACrCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,IAAIqhB,GAAStE,KAExB7sB,OAAOssB,eAAeO,EAAO,0BAA2B,CACpDza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,KAEX9P,OAAOssB,eAAeO,EAAO,8BAA+B,CACxDza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,KAEX9P,OAAOssB,eAAeO,EAAO,aAAc,CACvCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,IAEX9P,OAAOssB,eAAeO,EAAO,cAAe,CACxCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,IAEX9P,OAAOssB,eAAeO,EAAO,gBAAiB,CAC1Cza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,IAEX9P,OAAOssB,eAAeO,EAAO,iBAAkB,CAC3Cza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,IAEX9P,OAAOssB,eAAeO,EAAO,eAAgB,CACzCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAeO,EAAO,SAAU,CACnCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAeO,EAAO,SAAU,CACnCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB,OAAO+c,EAEX7sB,OAAOssB,eAAem0B,EAAUj4C,UAAW,YAAa,CACpD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH8c,EAAOpkB,UAAUw9B,UAAUngC,KAAKnJ,MAChCA,KAAKq1B,SAASD,SAASp1B,KAAKm1B,qBAGpC7xB,OAAOssB,eAAem0B,EAAUj4C,UAAW,WAAY,CACnD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACHghB,GAAmBp0B,KAAKikD,eAAe,SAAUjvB,GAC7CA,EAAM3gB,aAEV,GAAIrU,KAAK6oC,WAAW,eAAgB,CAChC7oC,KAAKk5B,MAAMgrB,mBAAmBlkD,MAElCkwB,EAAOpkB,UAAUikB,SAAS5mB,KAAKnJ,SAGvCsD,OAAOssB,eAAem0B,EAAUj4C,UAAW,WAAY,CACnD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH8c,EAAOpkB,UAAUinC,SAAS5pC,KAAKnJ,MAC/B,GAAIA,KAAKitC,QAAQ,uBAAwB,CACrCjtC,KAAKq1B,SAAS8uB,oBAAsBnkD,KAAKsT,IAAI,sBAAuB,OAExE,GAAItT,KAAKitC,QAAQ,UAAW,CACxBjtC,KAAKk0C,WAAa,EAClBl0C,KAAKokD,YAAc,EACnBpkD,KAAKw1B,kBACL,GAAIx1B,KAAKioC,cAAc7iB,OAAQ,CAC3BplB,KAAKo3C,SAASnwC,MAAK,SAAU+tB,GACzBA,EAAM8V,cAAc,KACpB9V,EAAM8V,cAAc,SAIhC,GAAI9qC,KAAKitC,QAAQ,eAAiBjtC,KAAKitC,QAAQ,kBAAoBjtC,KAAKitC,QAAQ,gBAAkBjtC,KAAKitC,QAAQ,gBAAiB,CAC5HjtC,KAAKo3C,SAASnwC,MAAK,SAAU+tB,GACzBA,EAAMyb,uBAGd,GAAIzwC,KAAKitC,QAAQ,eAAgB,CAC7B,IAAI/X,EAAkBl1B,KAAKm1B,iBAC3B,IAAIkvB,EAAcrkD,KAAKskD,aACvB,GAAItkD,KAAKsT,IAAI,eAAgB,CACzB,IAAK+wC,EAAa,CACdA,EAAcvF,GAAUhO,IAAI9wC,KAAKk5B,MAAO,CACpC3V,MAAOvjB,KAAKujB,QAAU,GACtBs0B,OAAQ73C,KAAK63C,SAAW,KAE5B73C,KAAKskD,aAAeD,EACpBnvB,EAAgBI,WAAW+uB,EAAYhvB,SAAU,GACjDH,EAAgBqvB,KAAOF,EAAYhvB,cAGtC,CACD,GAAIgvB,EAAa,CACbnvB,EAAgBK,YAAY8uB,EAAYhvB,UACxCH,EAAgBqvB,KAAO,KACvBF,EAAYhwC,UACZrU,KAAKskD,aAAepsC,gBAMxC5U,OAAOssB,eAAem0B,EAAUj4C,UAAW,cAAe,CACtD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH8c,EAAOpkB,UAAUsoC,YAAYjrC,KAAKnJ,MAClCowB,GAAYpwB,KAAKyxC,yBAAyB,SAAUzc,GAChDA,EAAMof,iBAEVhkB,GAAYpwB,KAAK0xC,6BAA6B,SAAU1c,GACpDA,EAAMyb,oBACNzb,EAAMof,iBAEVp0C,KAAKwkD,sBAGblhD,OAAOssB,eAAem0B,EAAUj4C,UAAW,mBAAoB,CAC3D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAIqxC,EAAazkD,KAAKsT,IAAI,cAC1B,IAAIs+B,EAAS5xC,KAAK6xC,aAClB,GAAID,IAAW5xC,KAAK6yC,WAAY,CAC5B,IAAIjlC,EAAIgkC,EAAO5a,KACf,IAAIrzB,EAAIiuC,EAAO7a,IACf,IAAIjuB,EAAI8oC,EAAOpO,MAAQ51B,EACvB,IAAI/M,EAAI+wC,EAAOnO,OAAS9/B,EACxB,IAAIq2C,EAAWh6C,KAAKsT,IAAI,YACxB,IAAI4mC,EAAYl6C,KAAKsT,IAAI,aACzB,GAAI4mC,EAAW,CACX,GAAIr5C,EAAIq5C,EAAW,CACfr5C,EAAIq5C,GAGZ,GAAIF,EAAU,CACV,GAAIlxC,EAAIkxC,EAAU,CACdlxC,EAAIkxC,GAGZ,IAAIz2B,EAAQvjB,KAAKujB,QACjB,IAAIs0B,EAAS73C,KAAK63C,SAClB,GAAI4M,EAAY,CACZA,EAAWtwB,OAAO,CAAE5Q,MAAOza,EAAG+uC,OAAQh3C,EAAG+M,EAAGA,EAAGjK,EAAGA,IAClD,GAAI3D,KAAKq1B,SAAS6C,YAAa,CAC3BusB,EAAWpvB,SAAS6C,YAAc,MAG1C,IAAImsB,EAAcrkD,KAAKskD,aACvB,GAAID,EAAa,CACbA,EAAYlwB,OAAO,CAAE5Q,MAAOA,EAAQ,GAAIs0B,OAAQA,EAAS,KAE7D,IAAI6M,EAAoB1kD,KAAKsT,IAAI,qBACjC,GAAIoxC,EAAmB,CACnBA,EAAkBnxC,IAAI,SAAUskC,GAChC6M,EAAkBnxC,IAAI,IAAKgQ,EAAQmhC,EAAkBnhC,QAAUmhC,EAAkBpxC,IAAI,cAAe,IACpGoxC,EAAkBnxC,IAAI,MAAOmxC,EAAkBpxC,IAAI,QAAS,GAAKukC,EAAS73C,KAAK2kD,gBAC/E,IAAIC,EAAKF,EAAkBpxC,IAAI,cAC/B,GAAIsxC,EAAI,CACJA,EAAGzwB,OAAO,CAAE5Q,MAAOmhC,EAAkBnhC,QAASs0B,OAAQA,IAE1D,IAAI9D,EAAU,KACd,GAAI/zC,KAAK2kD,gBAAkB9M,EAAQ,CAC/B9D,EAAU,MAEd2Q,EAAkB/c,WAAW,UAAWoM,QAKxDzwC,OAAOssB,eAAem0B,EAAUj4C,UAAW,eAAgB,CACvD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,GAAI8c,EAAOpkB,UAAU89B,aAAazgC,KAAKnJ,MAAO,CAC1CA,KAAK++C,cAAa,SAAU/pB,GACxBA,EAAM4U,kBAEV,OAAO,SAEN,CACD,OAAO,UAInBtmC,OAAOssB,eAAem0B,EAAUj4C,UAAW,cAAe,CACtD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUrL,GACbmoB,EAAOpkB,UAAUm5B,YAAY97B,KAAKnJ,KAAM+H,GACxC,GAAI/H,KAAKsT,IAAI,sBAAuB,CAChCtT,KAAK++C,cAAa,SAAU/pB,GACxBA,EAAM9f,OAAOnJ,MAAMhE,UAKnCzE,OAAOssB,eAAem0B,EAAUj4C,UAAW,sBAAuB,CAC9D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUrL,EAAMk5B,GACnB/Q,EAAOpkB,UAAUq5B,oBAAoBh8B,KAAKnJ,KAAM+H,EAAMk5B,GACtD,GAAIjhC,KAAKsT,IAAI,sBAAuB,CAChCtT,KAAK++C,cAAa,SAAU/pB,GACxBA,EAAM9f,OAAOgwB,aAAan9B,EAAMk5B,UAUhD39B,OAAOssB,eAAem0B,EAAUj4C,UAAW,aAAc,CACrD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,OAAOpT,KAAKujB,QAAUvjB,KAAKsT,IAAI,eAAgB,GAAKtT,KAAKsT,IAAI,cAAe,MAQpFhQ,OAAOssB,eAAem0B,EAAUj4C,UAAW,cAAe,CACtD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,OAAOpT,KAAK63C,SAAW73C,KAAKsT,IAAI,aAAc,GAAKtT,KAAKsT,IAAI,gBAAiB,MAGrFhQ,OAAOssB,eAAem0B,EAAUj4C,UAAW,aAAc,CACrD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAImQ,EAAQvjB,KAAKsT,IAAI,SACrB,IAAIukC,EAAS73C,KAAKsT,IAAI,UACtB,IAAIuxC,EAAS7kD,KAAK6oC,WAAW,SAC7B,IAAIic,EAAU9kD,KAAK6oC,WAAW,UAC9B,IAAI+I,EAAS,CACT5a,KAAM,EACND,IAAK,EACLyM,MAAOxjC,KAAKujB,QACZkgB,OAAQzjC,KAAK63C,UAEjB,IAAIzyB,EAASplB,KAAKsT,IAAI,UACtB,IAAIyxC,EAAa,MACjB,IAAIC,EAAW,MACf,GAAI5/B,aAAkB65B,IAAoB75B,aAAkB86B,GAAY,CACpE6E,EAAa,KAEjB,GAAI3/B,aAAkBs6B,GAAgB,CAClCsF,EAAW,KAEf,IAAKzhC,GAAS,MAAQshC,GAAU,QAAUhN,GAAU,MAAQiN,GAAW,QAAU9kD,KAAKsT,IAAI,0BAGrF,CACD,IAAI5P,EAAI4L,OAAOyzB,UACf,IAAIkiB,EAAMvhD,EACV,IAAIwhD,GAAOxhD,EACX,IAAIyhD,EAAMzhD,EACV,IAAI0hD,GAAO1hD,EACX,IAAIw7C,EAAcl/C,KAAKsT,IAAI,cAAe,GAC1C,IAAIqsC,EAAa3/C,KAAKsT,IAAI,aAAc,GACxC,IAAI8sC,EAAepgD,KAAKsT,IAAI,eAAgB,GAC5C,IAAI+xC,EAAgBrlD,KAAKsT,IAAI,gBAAiB,GAC9CtT,KAAKo3C,SAASnwC,MAAK,SAAU+tB,GACzB,GAAIA,EAAM1hB,IAAI,aAAe,YAAc0hB,EAAM1hB,IAAI,cAAe,CAChE,IAAIgyC,EAActwB,EAAMuqB,sBACxB,IAAIgG,EAASvwB,EAAMpnB,IACnB,IAAI43C,EAASxwB,EAAMrxB,IACnB,IAAI8hD,EAAKF,EAASD,EAAYtuB,KAC9B,IAAI0uB,EAAKH,EAASD,EAAY9hB,MAC9B,IAAImiB,EAAKH,EAASF,EAAYvuB,IAC9B,IAAI1hB,EAAKmwC,EAASF,EAAY7hB,OAC9B,GAAIshB,EAAY,CACZU,GAAMzwB,EAAM1hB,IAAI,aAAc,GAC9BoyC,GAAM1wB,EAAM1hB,IAAI,cAAe,GAEnC,GAAI0xC,EAAU,CACVW,GAAM3wB,EAAM1hB,IAAI,YAAa,GAC7B+B,GAAM2f,EAAM1hB,IAAI,eAAgB,GAEpC,GAAImyC,EAAKR,EAAK,CACVA,EAAMQ,EAEV,GAAIC,EAAKR,EAAK,CACVA,EAAMQ,EAEV,GAAIC,EAAKR,EAAK,CACVA,EAAMQ,EAEV,GAAItwC,EAAK+vC,EAAK,CACVA,EAAM/vC,OAIlB,GAAI4vC,GAAOvhD,EAAG,CACVuhD,EAAM,EAEV,GAAIC,IAAQxhD,EAAG,CACXwhD,EAAM,EAEV,GAAIC,GAAOzhD,EAAG,CACVyhD,EAAM,EAEV,GAAIC,IAAQ1hD,EAAG,CACX0hD,EAAM,EAEVxT,EAAO5a,KAAOiuB,EAAM/F,EACpBtN,EAAO7a,IAAMouB,EAAMxF,EACnB/N,EAAOpO,MAAQ0hB,EAAM9E,EACrBxO,EAAOnO,OAAS2hB,EAAMC,EAE1BrlD,KAAK4lD,cAAgBhU,EAAOpO,MAAQoO,EAAO5a,KAC3Ch3B,KAAK2kD,eAAiB/S,EAAOnO,OAASmO,EAAO7a,IAC7C,GAAIlF,GAAetO,GAAQ,CACvBquB,EAAO5a,KAAO,EACd4a,EAAOpO,MAAQjgB,EAEnB,GAAIsO,GAAegzB,GAAS,CACxBjT,EAAO5a,KAAO,EACd4a,EAAOpO,MAAQqhB,EAEnB,GAAIhzB,GAAegmB,GAAS,CACxBjG,EAAO7a,IAAM,EACb6a,EAAOnO,OAASoU,EAEpB,GAAIhmB,GAAeizB,GAAU,CACzBlT,EAAO7a,IAAM,EACb6a,EAAOnO,OAASqhB,EAEpB9kD,KAAK6xC,aAAeD,KAG5BtuC,OAAOssB,eAAem0B,EAAUj4C,UAAW,gBAAiB,CACxD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAIgS,EAASplB,KAAKsT,IAAI,UACtB,GAAI8R,EAAQ,CACRA,EAAOygC,gBAAgB7lD,MAE3BkwB,EAAOpkB,UAAUg6C,cAAc38C,KAAKnJ,MACpCA,KAAKwkD,sBAMblhD,OAAOssB,eAAem0B,EAAUj4C,UAAW,YAAa,CACpD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH8c,EAAOpkB,UAAU2pB,UAAUtsB,KAAKnJ,MAChCA,KAAKk5B,MAAM6sB,gBAAgB/lD,SAGnCsD,OAAOssB,eAAem0B,EAAUj4C,UAAW,mBAAoB,CAC3D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAIqlC,EAAaz4C,KAAKy4C,aACtB,IAAIE,EAAc34C,KAAK24C,cACvB,GAAIF,GAAcz4C,KAAKk0C,YAAcyE,GAAe34C,KAAKokD,YAAa,CAClE,IAAIh/B,EAASplB,KAAKsT,IAAI,UACtB,IAAI0yC,EAAe,MACnB,IAAIC,EAAa,MACjB,GAAI7gC,EAAQ,CACR,GAAIA,aAAkB65B,IAAoB75B,aAAkB86B,GAAY,CACpE8F,EAAe,KAEnB,GAAI5gC,aAAkBs6B,GAAgB,CAClCuG,EAAa,MAGrB71B,GAAYpwB,KAAKyxC,yBAAyB,SAAUzc,GAChD,IAAKgxB,EAAc,CACf,IAAIziC,EAAQyR,EAAM1hB,IAAI,SACtB,GAAIiQ,aAAiBmS,GAAS,CAC1BV,EAAM2S,WAAW,QAASpkB,EAAMnQ,MAAQqlC,IAGhD,IAAKwN,EAAY,CACb,IAAIpO,EAAS7iB,EAAM1hB,IAAI,UACvB,GAAIukC,aAAkBniB,GAAS,CAC3BV,EAAM2S,WAAW,SAAUkQ,EAAOzkC,MAAQulC,QAItDvoB,GAAYpwB,KAAK0xC,6BAA6B,SAAU1c,GACpDA,EAAMyb,oBACNzb,EAAMQ,qBAEVx1B,KAAKk0C,WAAauE,EAClBz4C,KAAKokD,YAAczL,EACnB34C,KAAKm0C,WAAa,KAClBn0C,KAAKwkD,mBAETxkD,KAAKkyC,mBAGb5uC,OAAOssB,eAAem0B,EAAUj4C,UAAW,kBAAmB,CAC1D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAI+c,EAAQnwB,KACZ,GAAIA,KAAKitC,QAAQ,QAAS,CACtB,IAAIiZ,EAAOlmD,KAAKsT,IAAI,QACpB,GAAI4yC,GAAQA,IAAS,GAAI,CACrBlmD,KAAKk5B,MAAMitB,gBAAgBnmD,KAAM6hD,GAAe7hD,KAAMA,KAAKsT,IAAI,OAAQ,UAEtE,CACDtT,KAAKk5B,MAAMgrB,mBAAmBlkD,MAElCA,KAAKk5B,MAAMktB,qBAAqBpmD,MAEpC,GAAIA,KAAKitC,QAAQ,qBAAsB,CACnC,IAAIoZ,EAAsBrmD,KAAKsT,IAAI,qBACnC,GAAI+yC,EAAqB,CACrBA,EAAoBpxB,WAAWj1B,MAC/BqmD,EAAoBjP,SAASC,YAAYgP,EAAoBC,WAC7DD,EAAoBjP,SAASC,YAAYgP,EAAoBE,SAC7DvmD,KAAKuT,IAAI,cAAe,MACxBvT,KAAKuT,IAAI,eAAgB8yC,EAAoB9iC,QAAU8iC,EAAoB/yC,IAAI,cAAe,GAAK+yC,EAAoB/yC,IAAI,aAAc,IACzI,IAAImxC,EAAazkD,KAAKsT,IAAI,cAC1B,IAAKmxC,EAAY,CACbA,EAAazkD,KAAKuT,IAAI,aAAcurC,GAAUhO,IAAI9wC,KAAKk5B,MAAO,CAC1D+S,UAAW,CAAC,cACZqP,YAAa,EACbD,KAAMr7C,KAAKk5B,MAAMstB,gBAAgBlzC,IAAI,4BAG7CtT,KAAKymD,OAASzmD,KAAK+yB,OAAO5vB,GAAG,SAAS,SAAU4uB,GAC5C,IAAI20B,EAAa30B,EAAM4c,cAGvB,GAAIgY,GAAoBD,EAAYv2B,GAAQ,CACxCu2B,EAAWjmC,qBAEV,CACD,OAEJ,IAAImmC,EAASF,EAAWG,OAAS,IACjC,IAAIz3B,EAAQi3B,EAAoB/yC,IAAI,QAAS,GAC7C,IAAI+b,EAAMg3B,EAAoB/yC,IAAI,MAAO,GACzC,GAAI8b,EAAQw3B,EAAS,GAAKv3B,EAAMu3B,EAAS,EAAG,CACxCP,EAAoB9yC,IAAI,QAAS6b,EAAQw3B,GACzCP,EAAoB9yC,IAAI,MAAO8b,EAAMu3B,OAG7C5mD,KAAKqwB,WAAW7qB,KAAKxF,KAAKymD,QAC1BzmD,KAAK8mD,OAAST,EAAoBtzB,OAAO5vB,GAAG,gBAAgB,WACxD,IAAItC,EAAIsvB,EAAMw0B,eACd,IAAIzvB,EAAkB/E,EAAMgF,iBAC5B,IAAIkvB,EAAcl0B,EAAMm0B,aACxBpvB,EAAgBvxB,GAAK0iD,EAAoB/yC,IAAI,SAAWzS,EACxDq0B,EAAgBod,iBAChB,GAAI+R,EAAa,CACbA,EAAYhvB,SAAS1xB,GAAKuxB,EAAgBvxB,EAC1CuxB,EAAgBqvB,KAAOF,EAAYhvB,aAG3Cr1B,KAAKqwB,WAAW7qB,KAAKxF,KAAK8mD,QAC1B9mD,KAAKq1B,SAASD,SAASixB,EAAoBhxB,cAE1C,CACD,IAAI8c,EAAWnyC,KAAKioC,cAAcyc,kBAClC,GAAIvS,EAAU,CACVnyC,KAAKq1B,SAASE,YAAY4c,EAAS9c,UACnC,GAAIr1B,KAAKymD,OAAQ,CACbzmD,KAAKymD,OAAOpyC,UAEhB,GAAIrU,KAAK8mD,OAAQ,CACb9mD,KAAK8mD,OAAOzyC,UAEhB,IAAI6gB,EAAkBl1B,KAAKm1B,iBAC3BD,EAAgBvxB,EAAI,EACpB3D,KAAK2nC,WAAW,SAAUzvB,WAC1BlY,KAAKuT,IAAI,cAAe,OACxBvT,KAAKuT,IAAI,eAAgB2E,aAIrC,GAAIlY,KAAKitC,QAAQ,cAAe,CAE5B,IAAIkF,EAAWnyC,KAAKioC,cAAc,cAClC,GAAIkK,EAAU,CACVnyC,KAAKq1B,SAASE,YAAY4c,EAAS9c,UAEvC,IAAIovB,EAAazkD,KAAKsT,IAAI,cAC1B,GAAImxC,aAAsBlU,GAAQ,CAC9BkU,EAAWlxC,IAAI,aAAc,OAC7BkxC,EAAWxvB,WAAWj1B,MACtBA,KAAKq1B,SAASC,WAAWmvB,EAAWpvB,SAAU,IAGtD,GAAIr1B,KAAKitC,QAAQ,QAAS,CACtB,IAAIsX,EAAOvkD,KAAKsT,IAAI,QACpB,IAAI6+B,EAAWnyC,KAAKioC,cAAc,QAClC,GAAIkK,EAAU,CACVnyC,KAAKq1B,SAASE,YAAY4c,EAAS9c,UACnC,GAAI8c,GAAYoS,EAAM,CAClBpS,EAAS99B,WAGjB,GAAIkwC,EAAM,CACN,IAAIjV,EAASiV,EAAKjV,OAClB,GAAIA,EAAQ,CACRA,EAAO8H,SAASC,YAAYkN,GAEhCA,EAAKtvB,WAAWj1B,MAChBA,KAAKq1B,SAASC,WAAWivB,EAAKlvB,SAAU,GACxCr1B,KAAKm1B,iBAAiBovB,KAAOA,EAAKlvB,cAKlD/xB,OAAOssB,eAAem0B,EAAUj4C,UAAW,wBAAyB,CAChE4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH8c,EAAOpkB,UAAUolC,sBAAsB/nC,KAAKnJ,MAC5CA,KAAKo3C,SAASnwC,MAAK,SAAU+tB,GACzBA,EAAMkc,8BAOlB5tC,OAAOssB,eAAem0B,EAAUj4C,UAAW,eAAgB,CACvD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUlT,GACbF,KAAKo3C,SAASnwC,MAAK,SAAU+tB,GACzB,GAAIA,aAAiB+uB,EAAW,CAC5B/uB,EAAM+xB,aAAa7mD,GAEvBA,EAAE80B,SAId1xB,OAAOssB,eAAem0B,EAAUj4C,UAAW,eAAgB,CACvD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUlT,GACb,IAAIukD,EAAazkD,KAAKsT,IAAI,cAC1B,GAAImxC,EAAY,CACZvkD,EAAEukD,GAEN,IAAIC,EAAoB1kD,KAAKsT,IAAI,qBACjC,GAAIoxC,EAAmB,CACnBxkD,EAAEwkD,GAEN,IAAIH,EAAOvkD,KAAKsT,IAAI,QACpB,GAAIixC,EAAM,CACNrkD,EAAEqkD,GAENvkD,KAAKo3C,SAASnlC,OAAOpF,SAAQ,SAAUmoB,GACnC90B,EAAE80B,SAId1xB,OAAOssB,eAAem0B,EAAUj4C,UAAW,cAAe,CACtD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAI+a,EAAS,GACbnuB,KAAK++C,cAAa,SAAUnxC,GACxBugB,EAAO3oB,KAAKoI,MAEhB,OAAOugB,KAGf7qB,OAAOssB,eAAem0B,EAAUj4C,UAAW,eAAgB,CACvD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUw9B,GACb,IAAIoW,EAAWpW,IAAa5wC,KAAKixC,UACjC/gB,EAAOpkB,UAAUylC,aAAapoC,KAAKnJ,KAAM4wC,GACzC,IAAIsV,EAAOlmD,KAAKsT,IAAI,OAAQ,IAC5B,GAAI4yC,GAAQA,IAAS,IAAMc,EAAS,CAChChnD,KAAKk5B,MAAMitB,gBAAgBnmD,KAAM6hD,GAAe7hD,KAAMkmD,QAIlE5iD,OAAOssB,eAAem0B,EAAW,YAAa,CAC1CruC,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,cAEX9P,OAAOssB,eAAem0B,EAAW,aAAc,CAC3CruC,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAOm9B,GAAO1G,WAAW//B,OAAO,CAACi6C,EAAUja,cAE/C,OAAOia,EA/pBE,CAgqBXxT,IC/qBF,IAAI0W,GAAsB,SAAU/2B,GAChC1F,GAAUy8B,EAAM/2B,GAChB,SAAS+2B,IACL,IAAI92B,EAAQD,IAAW,MAAQA,EAAOnkB,MAAM/L,KAAMgM,YAAchM,KAChEsD,OAAOssB,eAAeO,EAAO,YAAa,CACtCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO+c,EAAM+I,MAAM6hB,UAAUmM,kBAEjC5jD,OAAOssB,eAAeO,EAAO,WAAY,CACrCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO+c,EAAM+I,MAAM6hB,UAAUoM,SAAS,GAAIh3B,EAAMi3B,aAEpD9jD,OAAOssB,eAAeO,EAAO,cAAe,CACxCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,CACH,YACA,aACA,WACA,YACA,aACA,YACA,cACA,iBACA,cACA,aACA,gBACA,gBACA,gBAGA,aACA,gBAMA,YACA,eACA,oBACA,aACA,WACA,cAGR9P,OAAOssB,eAAeO,EAAO,iBAAkB,CAC3Cza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB,OAAO+c,EAEX7sB,OAAOssB,eAAeq3B,EAAKn7C,UAAW,gBAAiB,CACnD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAKpT,KAAKsT,IAAI,QAAS,CACnB,IAAIsjC,EAAY,CACZ5f,KAAM,EACNwM,MAAO,EACPzM,IAAK,EACL0M,OAAQ,GAEZzjC,KAAK22C,qBAAuBC,MAE3B,CACD1mB,EAAOpkB,UAAUg6C,cAAc38C,KAAKnJ,UAIhDsD,OAAOssB,eAAeq3B,EAAKn7C,UAAW,WAAY,CAC9C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAI+c,EAAQnwB,KACZkwB,EAAOpkB,UAAUinC,SAAS5pC,KAAKnJ,MAC/BA,KAAKq1B,SAAS/gB,QACd,IAAI8yC,EAAYpnD,KAAKonD,UACrB,GAAIpnD,KAAKitC,QAAQ,WAAY,CACzB,IAAIwM,EAAUz5C,KAAKsT,IAAI,UAAW,GAClCtT,KAAKq1B,SAAS6J,MAAQua,EAE1B,GAAIz5C,KAAKitC,QAAQ,SAAWjtC,KAAKitC,QAAQ,gBAAiB,CACtDjtC,KAAKq1B,SAAStlB,KAAO/P,KAAKqnD,WAC1BrnD,KAAKw1B,kBACL,GAAIx1B,KAAKsT,IAAI,SAAW,UAAW,CAC/BtT,KAAKk5B,MAAMouB,cAActnD,OAGjC,GAAIA,KAAKitC,QAAQ,SAAU,CACvBma,EAAUG,cAAgBvnD,KAAKujB,QAC/BvjB,KAAKw1B,kBAET,GAAIx1B,KAAKitC,QAAQ,qBAAsB,CACnCma,EAAUI,kBAAoBxnD,KAAKsT,IAAI,oBAAqB,QAC5DtT,KAAKw1B,kBAET,GAAIx1B,KAAKitC,QAAQ,cAAe,CAC5Bma,EAAUK,WAAaznD,KAAKsT,IAAI,aAAc,OAC9CtT,KAAKw1B,kBAET,GAAIx1B,KAAKitC,QAAQ,YAAa,CAC1Bma,EAAUM,SAAW1nD,KAAKsT,IAAI,YAC9BtT,KAAKw1B,kBAET,GAAIx1B,KAAKitC,QAAQ,oBAAqB,CAClCma,EAAUO,iBAAmB3nD,KAAKsT,IAAI,mBAAoB,OAC1DtT,KAAKw1B,kBAET,GAAIx1B,KAAKitC,QAAQ,YAAa,CAC1Bma,EAAUQ,SAAW5nD,KAAKsT,IAAI,WAAY,GAC1CtT,KAAKw1B,kBAET,GAAIx1B,KAAKitC,QAAQ,QAAS,CACtB,IAAIoO,EAAOr7C,KAAKsT,IAAI,QACpB,GAAI+nC,EAAM,CACN+L,EAAU/L,KAAOA,GAGzB,GAAIr7C,KAAKitC,QAAQ,eAAgB,CAC7B,IAAIqO,EAAct7C,KAAKsT,IAAI,cAAe,GAC1C,GAAIgoC,EAAa,CACb8L,EAAU9L,YAAcA,GAGhC,GAAIt7C,KAAKitC,QAAQ,aAAejtC,KAAK8zC,eAAe,YAAa,CAC7DsT,EAAUpN,SAAWh6C,KAAKsT,IAAI,WAAYtT,KAAK6oC,WAAW,aAC1D7oC,KAAKw1B,kBAET,GAAIx1B,KAAKitC,QAAQ,cAAgBjtC,KAAK8zC,eAAe,aAAc,CAC/DsT,EAAUlN,UAAYl6C,KAAKsT,IAAI,YAAatT,KAAK6oC,WAAW,cAC5D7oC,KAAKw1B,kBAETpF,GAAYpwB,KAAK6nD,aAAa,SAAUC,GACpC,GAAI33B,EAAM4Z,OAAO+d,GAAY,CACzBV,EAAUU,GAAa33B,EAAM7c,IAAIw0C,GACjC33B,EAAMqF,sBAGd4xB,EAAU,YAAcpnD,KAAKsT,IAAI,YACjC8zC,EAAU,cAAgBpnD,KAAKsT,IAAI,cACnCtT,KAAKq1B,SAASpmB,MAAQm4C,EACtB,GAAIpnD,KAAKitC,QAAQ,SAAWjtC,KAAKsT,IAAI,SAAW,UAAW,CACvDtT,KAAKk5B,MAAMouB,cAActnD,UAIrCsD,OAAOssB,eAAeq3B,EAAKn7C,UAAW,WAAY,CAC9C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAIrD,EAAO/P,KAAKsT,IAAI,OAAQ,IAC5B,OAAOtT,KAAKsT,IAAI,gBAAkBuuC,GAAe7hD,KAAM+P,GAAQA,KAGvEzM,OAAOssB,eAAeq3B,EAAKn7C,UAAW,gBAAiB,CACnD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACHpT,KAAKq1B,SAAStlB,KAAO/P,KAAKqnD,WAC1B,GAAIrnD,KAAKsT,IAAI,SAAW,UAAW,CAC/BtT,KAAKk5B,MAAMouB,cAActnD,MAE7BA,KAAKw1B,kBACLx1B,KAAKy1B,eAGbnyB,OAAOssB,eAAeq3B,EAAKn7C,UAAW,eAAgB,CAClD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUw9B,GACb1gB,EAAOpkB,UAAUylC,aAAapoC,KAAKnJ,KAAM4wC,GACzC,GAAI5wC,KAAKsT,IAAI,gBAAiB,CAC1BtT,KAAK83C,oBAIjBx0C,OAAOssB,eAAeq3B,EAAKn7C,UAAW,qBAAsB,CACxD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,GAAIpT,KAAKsvC,OAAQ,CACb,OAAOtvC,KAAKsvC,OAAO+S,yBAElB,CACD,OAAOnyB,EAAOpkB,UAAUu2C,mBAAmBl5C,KAAKnJ,UAI5DsD,OAAOssB,eAAeq3B,EAAKn7C,UAAW,mBAAoB,CACtD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,GAAIpT,KAAKsvC,OAAQ,CACb,OAAOtvC,KAAKsvC,OAAO6S,uBAElB,CACD,OAAOjyB,EAAOpkB,UAAUq2C,iBAAiBh5C,KAAKnJ,UAI1DsD,OAAOssB,eAAeq3B,EAAKn7C,UAAW,uBAAwB,CAC1D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,GAAIpT,KAAKsvC,OAAQ,CACb,OAAOtvC,KAAKsvC,OAAOiT,2BAElB,CACD,OAAOryB,EAAOpkB,UAAUy2C,qBAAqBp5C,KAAKnJ,UAI9DsD,OAAOssB,eAAeq3B,EAAM,YAAa,CACrCvxC,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAEX9P,OAAOssB,eAAeq3B,EAAM,aAAc,CACtCvxC,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAOm9B,GAAO1G,WAAW//B,OAAO,CAACm9C,EAAKnd,cAE1C,OAAOmd,EAhPH,CAiPN1W,IClPF,IAAIwX,GAAwB,WACxB,SAASA,IACL,IAAI53B,EAAQnwB,KACZsD,OAAOssB,eAAe5vB,KAAM,YAAa,CACrC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAe5vB,KAAM,WAAY,CACpC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,KAEXpT,KAAKgoD,UAAY,IAAIC,gBAAe,SAAU9yC,GAC1Cib,GAAYjb,GAAS,SAAUwE,GAC3ByW,GAAYD,EAAM+3B,UAAU,SAAUt6C,GAClC,GAAIA,EAAEjC,SAAWgO,EAAMhO,OAAQ,CAC3BiC,EAAEkI,qBAMtBxS,OAAOssB,eAAem4B,EAAOj8C,UAAW,YAAa,CACjD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUzH,EAAQmK,GACrB9V,KAAKgoD,UAAUG,QAAQx8C,EAAQ,CAAEy8C,IAAK,eACtCpoD,KAAKkoD,SAAS1iD,KAAK,CAAEmG,OAAQA,EAAQmK,SAAUA,OAGvDxS,OAAOssB,eAAem4B,EAAOj8C,UAAW,eAAgB,CACpD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUzH,GACb3L,KAAKgoD,UAAUK,UAAU18C,GACzB28C,GAActoD,KAAKkoD,UAAU,SAAUt6C,GACnC,OAAOA,EAAEjC,SAAWA,QAIhC,OAAOo8C,EA7CD,GAkDV,IAAIQ,GAAqB,WACrB,SAASA,IACLjlD,OAAOssB,eAAe5vB,KAAM,SAAU,CAClC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,OAEX9P,OAAOssB,eAAe5vB,KAAM,WAAY,CACpC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,KAGf9P,OAAOssB,eAAe24B,EAAIz8C,UAAW,YAAa,CAC9C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUzH,EAAQmK,GACrB,IAAIqa,EAAQnwB,KACZ,GAAIA,KAAKwoD,SAAW,KAAM,CACtB,IAAIC,EAAa,KACjB,IAAIC,EAAS,WACT,IAAItnB,EAAc17B,KAAKijD,MACvB,GAAIF,IAAe,MAAQrnB,EAAeqnB,EAAaF,EAAInb,MAAQ,CAC/Dqb,EAAarnB,EACbhR,GAAYD,EAAM+3B,UAAU,SAAUt6C,GAClC,IAAIuZ,EAAUvZ,EAAEjC,OAAOi9C,wBACvB,GAAIzhC,EAAQ5D,QAAU3V,EAAEpC,KAAK+X,OAAS4D,EAAQ0wB,SAAWjqC,EAAEpC,KAAKqsC,OAAQ,CACpEjqC,EAAEpC,KAAO2b,EACTvZ,EAAEkI,eAId,GAAIqa,EAAM+3B,SAASlkD,SAAW,EAAG,CAC7BmsB,EAAMq4B,OAAS,SAEd,CACDr4B,EAAMq4B,OAASK,sBAAsBH,KAG7C1oD,KAAKwoD,OAASK,sBAAsBH,GAGxC,IAAIl9C,EAAO,CAAE+X,MAAO,EAAGs0B,OAAQ,EAAG7gB,KAAM,EAAGwM,MAAO,EAAGzM,IAAK,EAAG0M,OAAQ,EAAG71B,EAAG,EAAGjK,EAAG,GACjF3D,KAAKkoD,SAAS1iD,KAAK,CAAEmG,OAAQA,EAAQmK,SAAUA,EAAUtK,KAAMA,OAGvElI,OAAOssB,eAAe24B,EAAIz8C,UAAW,eAAgB,CACjD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUzH,GACb28C,GAActoD,KAAKkoD,UAAU,SAAUt6C,GACnC,OAAOA,EAAEjC,SAAWA,KAExB,GAAI3L,KAAKkoD,SAASlkD,SAAW,EAAG,CAC5B,GAAIhE,KAAKwoD,SAAW,KAAM,CACtBM,qBAAqB9oD,KAAKwoD,QAC1BxoD,KAAKwoD,OAAS,UAK9BllD,OAAOssB,eAAe24B,EAAK,QAAS,CAChC7yC,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,MAEX,OAAOm1C,EAvEJ,GA4EP,IAAIQ,GAAW,KAIf,SAASC,KACL,GAAID,KAAa,KAAM,CACnB,UAAWd,iBAAmB,YAAa,CACvCc,GAAW,IAAIhB,OAEd,CACDgB,GAAW,IAAIR,IAGvB,OAAOQ,GAKX,IAAIE,GAA8B,WAC9B,SAASA,EAAa36B,EAASxY,GAC3BxS,OAAOssB,eAAe5vB,KAAM,UAAW,CACnC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAe5vB,KAAM,WAAY,CACpC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAe5vB,KAAM,YAAa,CACrC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAe5vB,KAAM,YAAa,CACrC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,QAEXpT,KAAKkpD,QAAUF,KACfhpD,KAAK45B,SAAWtL,EAEhBtuB,KAAKmpD,UAAYC,GAActzC,GAC/B9V,KAAKkpD,QAAQG,UAAU/6B,EAASxY,GAEpCxS,OAAOssB,eAAeq5B,EAAan9C,UAAW,aAAc,CACxD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,OAAOpT,KAAK8vB,aAGpBxsB,OAAOssB,eAAeq5B,EAAan9C,UAAW,UAAW,CACrD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAKpT,KAAK8vB,UAAW,CACjB9vB,KAAK8vB,UAAY,KACjB9vB,KAAKkpD,QAAQI,aAAatpD,KAAK45B,UAC/B55B,KAAKmpD,UAAU90C,cAI3B/Q,OAAOssB,eAAeq5B,EAAan9C,UAAW,SAAU,CACpDwH,IAAK,WACD,OAAOtT,KAAKkpD,SAEhBxzC,WAAY,MACZC,aAAc,OAElB,OAAOszC,EA3DK,GCjJhB,IAAIM,GAAiC,SAAUr5B,GAC3C1F,GAAU++B,EAAiBr5B,GAC3B,SAASq5B,IACL,OAAOr5B,IAAW,MAAQA,EAAOnkB,MAAM/L,KAAMgM,YAAchM,KAE/DsD,OAAOssB,eAAe25B,EAAiB,YAAa,CAChD7zC,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,oBAEX9P,OAAOssB,eAAe25B,EAAiB,aAAc,CACjD7zC,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO21B,GAAOc,WAAW//B,OAAO,CAACy/C,EAAgBzf,cAErD,OAAOyf,EAjBQ,CAkBjBxgB,ICZF,IAAIygB,GAAuB,SAAUt5B,GACjC1F,GAAUg/B,EAAOt5B,GACjB,SAASs5B,IACL,IAAIr5B,EAAQD,IAAW,MAAQA,EAAOnkB,MAAM/L,KAAMgM,YAAchM,KAChEsD,OAAOssB,eAAeO,EAAO,QAAS,CAClCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAeO,EAAO,YAAa,CACtCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,CACH,OACA,OACA,cACA,YACA,aACA,WACA,YACA,aACA,YACA,cACA,iBACA,cACA,aACA,gBACA,gBACA,gBAGA,aACA,gBAMA,YACA,eACA,oBACA,aACA,WACA,WACA,eACA,OACA,sBAGR,OAAO+c,EAEX7sB,OAAOssB,eAAe45B,EAAM19C,UAAW,OAAQ,CAI3CwH,IAAK,WACD,OAAOtT,KAAKypD,OAEhB/zC,WAAY,MACZC,aAAc,OAElBrS,OAAOssB,eAAe45B,EAAM19C,UAAW,YAAa,CAChD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAI+c,EAAQnwB,KACZkwB,EAAOpkB,UAAUw9B,UAAUngC,KAAKnJ,MAChCA,KAAK0pD,YACLt5B,GAAYpwB,KAAK2pD,WAAW,SAAUhyB,GAClC,IAAIiyB,EAAYz5B,EAAM7c,IAAIqkB,GAC1B,GAAIiyB,GAAa1xC,UAAW,CACxBiY,EAAMs5B,MAAMl2C,IAAIokB,EAAUiyB,OAGlC,GAAI5pD,KAAKsT,IAAI,OAAQ,MAAQ,GAAI,CAC7BtT,KAAKypD,MAAMl2C,IAAI,OAAQ,IAE3BvT,KAAKquC,UAAU,YAAY,WACvBle,EAAM05B,uBAEV7pD,KAAKquC,UAAU,aAAa,WACxBle,EAAM05B,0BAIlBvmD,OAAOssB,eAAe45B,EAAM19C,UAAW,YAAa,CAChD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACHpT,KAAKypD,MAAQzpD,KAAKo3C,SAAS5xC,KAAKyhD,GAAKnW,IAAI9wC,KAAKk5B,MAAO,QAG7D51B,OAAOssB,eAAe45B,EAAM19C,UAAW,kBAAmB,CACtD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAI+c,EAAQnwB,KACZkwB,EAAOpkB,UAAUg+C,gBAAgB3gD,KAAKnJ,MACtCowB,GAAYpwB,KAAK2pD,WAAW,SAAUhyB,GAClCxH,EAAMs5B,MAAMl2C,IAAIokB,EAAUxH,EAAM7c,IAAIqkB,OAExC,GAAI33B,KAAKitC,QAAQ,YAAa,CAC1BjtC,KAAK6pD,oBAET,GAAI7pD,KAAKitC,QAAQ,aAAc,CAC3BjtC,KAAK6pD,oBAET,GAAI7pD,KAAKitC,QAAQ,YAAa,CAC1BjtC,KAAK6pD,oBAGT,GAAI7pD,KAAKsT,IAAI,OAAQ,MAAQ,GAAI,CAC7BtT,KAAKypD,MAAMl2C,IAAI,OAAQ,QAEtB,CACDvT,KAAKypD,MAAMl2C,IAAI,OAAQvT,KAAKsT,IAAI,SAEpC,GAAItT,KAAKitC,QAAQ,cAAgBjtC,KAAKitC,QAAQ,SAAU,CACpD,IAAI8c,EAAY/pD,KAAKsT,IAAI,aACzB,IAAI1F,OAAS,EACb,GAAI5N,KAAKsT,IAAI,UAAY,KAAM,CAC3B,GAAIy2C,GAAa,QAAS,CACtBn8C,EAAIgoB,QAEH,GAAIm0B,GAAa,SAAU,CAC5Bn8C,EAAIioB,OAEH,CACDjoB,EAAI,OAGP,CACD,GAAIm8C,GAAa,QAAUA,GAAa,QAAS,CAC7Cn8C,EAAI5N,KAAKsT,IAAI,oBAEZ,GAAIy2C,GAAa,SAAWA,GAAa,MAAO,CACjDn8C,GAAK5N,KAAKsT,IAAI,iBAGtBtT,KAAK+P,KAAKwD,IAAI,IAAK3F,OAI/BtK,OAAOssB,eAAe45B,EAAM19C,UAAW,oBAAqB,CACxD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAI42C,EAAWhqD,KAAKsT,IAAI,YACxB,IAAI0xC,EAAWgF,GAAY,IAAMA,GAAY,KAAOA,IAAa,GACjE,IAAIhQ,EAAWh6C,KAAKsT,IAAI,WAAYtT,KAAK6oC,WAAW,WAAYzb,WAChE,GAAIyE,GAAemoB,GAAW,CAC1Bh6C,KAAK+P,KAAKwD,IAAIyxC,EAAW,YAAc,WAAYhL,EAAWh6C,KAAKsT,IAAI,cAAe,GAAKtT,KAAKsT,IAAI,eAAgB,QAEnH,CACDtT,KAAK+P,KAAKwD,IAAIyxC,EAAW,YAAc,WAAY9sC,WAEvD,IAAIgiC,EAAYl6C,KAAKsT,IAAI,YAAatT,KAAK6oC,WAAW,YAAazb,WACnE,GAAIyE,GAAeqoB,GAAY,CAC3Bl6C,KAAK+P,KAAKwD,IAAIyxC,EAAW,WAAa,YAAa9K,EAAYl6C,KAAKsT,IAAI,aAAc,GAAKtT,KAAKsT,IAAI,gBAAiB,QAEpH,CACDtT,KAAK+P,KAAKwD,IAAIyxC,EAAW,WAAa,YAAa9sC,eAI/D5U,OAAOssB,eAAe45B,EAAM19C,UAAW,eAAgB,CACnD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUw9B,GACb1gB,EAAOpkB,UAAUylC,aAAapoC,KAAKnJ,KAAM4wC,GACzC5wC,KAAK6lC,cAAc,QACnB,GAAI7lC,KAAK+P,KAAKuD,IAAI,gBAAiB,CAC/BtT,KAAK+P,KAAK+nC,oBAUtBx0C,OAAOssB,eAAe45B,EAAM19C,UAAW,UAAW,CAC9C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,OAAOpT,KAAKypD,MAAMpC,cAG1B/jD,OAAOssB,eAAe45B,EAAO,YAAa,CACtC9zC,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,UAEX9P,OAAOssB,eAAe45B,EAAO,aAAc,CACvC9zC,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO2wC,GAAUla,WAAW//B,OAAO,CAAC0/C,EAAM1f,cAE9C,OAAO0f,EAjNF,CAkNPzF,ICpNF,IAAIkG,GAAkC,SAAU/5B,GAC5C1F,GAAUy/B,EAAkB/5B,GAC5B,SAAS+5B,IACL,OAAO/5B,IAAW,MAAQA,EAAOnkB,MAAM/L,KAAMgM,YAAchM,KAE/DsD,OAAOssB,eAAeq6B,EAAiBn+C,UAAW,iBAAkB,CAChE4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH8c,EAAOpkB,UAAUmmC,eAAe9oC,KAAKnJ,MACrC,GAAIA,KAAKitC,QAAQ,qBAAuBjtC,KAAKitC,QAAQ,iBAAmBjtC,KAAKitC,QAAQ,kBAAoBjtC,KAAKitC,QAAQ,aAAejtC,KAAKitC,QAAQ,aAAejtC,KAAKitC,QAAQ,UAAYjtC,KAAKitC,QAAQ,UAAW,CAC9MjtC,KAAKm7C,OAAS,SAI1B73C,OAAOssB,eAAeq6B,EAAiBn+C,UAAW,WAAY,CAC1D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH8c,EAAOpkB,UAAUinC,SAAS5pC,KAAKnJ,MAC/B,GAAIA,KAAKm7C,OAAQ,CACbn7C,KAAKw1B,kBACL,IAAI1sB,EAAI9I,KAAKujB,QACb,IAAI1iB,EAAIb,KAAK63C,SACb,GAAI/uC,EAAI,GAAKjI,EAAI,EAAG,CAChB,IAAI6kD,EAAK1lD,KAAKsT,IAAI,eAAgB,GAClCoyC,EAAKnF,GAAiBmF,EAAI,EAAGp6C,KAAKC,IAAIzC,EAAI,EAAGjI,EAAI,IACjD,IAAI+M,EAAI5N,KAAKsT,IAAI,WAAY,GAC7B,IAAI3P,EAAI3D,KAAKsT,IAAI,WAAY,GAC7B,IAAI42C,EAAMlqD,KAAKsT,IAAI,mBAAoB,IAAM,EAG7C,IAAI62C,EAAM,EACV,IAAIC,EAAM,EAEV,IAAIC,EAAMvhD,EACV,IAAIwhD,EAAM,EAEV,IAAIC,EAAMzhD,EACV,IAAI0hD,EAAM3pD,EAEV,IAAI4pD,EAAM,EACV,IAAIC,EAAM7pD,EAGV,IAAI8pD,GAAM/8C,EAAIu8C,IAAQK,EAAMJ,IAAQzmD,EAAIymD,IAAQG,EAAMJ,GACtD,IAAIS,GAAMh9C,EAAI68C,IAAQH,EAAMI,IAAQ/mD,EAAI+mD,IAAQL,EAAMI,GACtD,IAAIxqC,EAAUjgB,KAAKq1B,SAEnBpV,EAAQ4qC,OAAOnF,EAAI,GACnB,GAAIiF,EAAK,GAAKC,EAAK,EAAG,CAClB,IAAIE,EAAQx/C,KAAKoyB,MAAM6iB,GAAiB3yC,EAAG83C,EAAKwE,EAAKphD,EAAIohD,EAAMxE,IAC/D/hD,EAAI48C,GAAiB58C,GAAIypB,SAAU,GACnCnN,EAAQ8qC,OAAOD,EAAQZ,EAAK,GAC5BjqC,EAAQ8qC,OAAOn9C,EAAGjK,GAClBsc,EAAQ8qC,OAAOD,EAAQZ,EAAK,GAEhCjqC,EAAQ8qC,OAAOjiD,EAAI48C,EAAI,GACvBzlC,EAAQ+qC,MAAMliD,EAAG,EAAGA,EAAG48C,EAAIA,GAE3B,GAAIiF,EAAK,GAAKC,EAAK,EAAG,CAClB,IAAIK,EAAQ3/C,KAAKoyB,MAAM6iB,GAAiB58C,EAAG+hD,EAAKwE,EAAKrpD,EAAIqpD,EAAMxE,IAC/D93C,EAAI2yC,GAAiB3yC,EAAG9E,EAAGskB,UAC3BnN,EAAQ8qC,OAAOjiD,EAAG48C,GAClBzlC,EAAQ8qC,OAAOjiD,EAAGwC,KAAKyY,IAAIknC,EAAQf,EAAKxE,IACxCzlC,EAAQ8qC,OAAOn9C,EAAGjK,GAClBsc,EAAQ8qC,OAAOjiD,EAAGmiD,EAAQf,GAE9BjqC,EAAQ8qC,OAAOjiD,EAAGjI,EAAI6kD,GACtBzlC,EAAQ+qC,MAAMliD,EAAGjI,EAAGiI,EAAI48C,EAAI7kD,EAAG6kD,GAE/B,GAAIiF,EAAK,GAAKC,EAAK,EAAG,CAClB,IAAIE,EAAQx/C,KAAKoyB,MAAM6iB,GAAiB3yC,EAAG83C,EAAKwE,EAAKphD,EAAIohD,EAAMxE,IAC/D/hD,EAAI48C,GAAiB58C,EAAG9C,EAAGusB,UAC3BnN,EAAQ8qC,OAAOjiD,EAAI48C,EAAI7kD,GACvBof,EAAQ8qC,OAAOD,EAAQZ,EAAKrpD,GAC5Bof,EAAQ8qC,OAAOn9C,EAAGjK,GAClBsc,EAAQ8qC,OAAOD,EAAQZ,EAAKrpD,GAEhCof,EAAQ8qC,OAAOrF,EAAI7kD,GACnBof,EAAQ+qC,MAAM,EAAGnqD,EAAG,EAAGA,EAAI6kD,EAAIA,GAE/B,GAAIiF,EAAK,GAAKC,EAAK,EAAG,CAClB,IAAIK,EAAQ3/C,KAAKoyB,MAAM6iB,GAAiB58C,EAAG+hD,EAAKwE,EAAKrpD,EAAI6kD,EAAKwE,IAC9Dt8C,EAAI2yC,GAAiB3yC,GAAIwf,SAAU,GACnCnN,EAAQ8qC,OAAO,EAAGlqD,EAAI6kD,GACtBzlC,EAAQ8qC,OAAO,EAAGE,EAAQf,GAC1BjqC,EAAQ8qC,OAAOn9C,EAAGjK,GAClBsc,EAAQ8qC,OAAO,EAAGz/C,KAAKyY,IAAIknC,EAAQf,EAAKxE,IAE5CzlC,EAAQ8qC,OAAO,EAAGrF,GAClBzlC,EAAQ+qC,MAAM,EAAG,EAAGtF,EAAI,EAAGA,GAC3BzlC,EAAQirC,iBAKxB5nD,OAAOssB,eAAeq6B,EAAkB,YAAa,CACjDv0C,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,qBAEX9P,OAAOssB,eAAeq6B,EAAkB,aAAc,CAClDv0C,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAOspC,GAAS7S,WAAW//B,OAAO,CAACmgD,EAAiBngB,cAExD,OAAOmgB,EA/GS,CAgHlBvN,ICzGF,IAAIyO,GAAyB,SAAUj7B,GACnC1F,GAAU2gC,EAASj7B,GACnB,SAASi7B,EAAQnzB,EAAMgM,EAAUgF,EAAQC,GACrC,GAAIA,SAAmB,EAAG,CAAEA,EAAY,GACxC,IAAI9Y,EAAQD,EAAO/mB,KAAKnJ,KAAMg4B,EAAMgM,EAAUgF,EAAQC,IAAcjpC,KACpEsD,OAAOssB,eAAeO,EAAO,mBAAoB,CAC7Cza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAeO,EAAO,MAAO,CAChCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,IAEX9P,OAAOssB,eAAeO,EAAO,MAAO,CAChCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,IAEX9P,OAAOssB,eAAeO,EAAO,SAAU,CACnCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAeO,EAAO,UAAW,CACpCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAeO,EAAO,YAAa,CACtCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAeO,EAAO,WAAY,CACrCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAeO,EAAO,KAAM,CAC/Bza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,IAEX9P,OAAOssB,eAAeO,EAAO,KAAM,CAC/Bza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,IAEX9P,OAAOssB,eAAeO,EAAO,eAAgB,CACzCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB,OAAO+c,EAEX7sB,OAAOssB,eAAeu7B,EAAQr/C,UAAW,YAAa,CAClD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAI+c,EAAQnwB,KACZA,KAAKikC,UAAUgI,UAAYmf,GAAiBprD,KAAKikC,UAAUgI,UAAW,CAAC,YACvE/b,EAAOpkB,UAAUw9B,UAAUngC,KAAKnJ,MAChCA,KAAKuT,IAAI,aAAc02C,GAAiBnZ,IAAI9wC,KAAKk5B,MAAO,CACpD+S,UAAW,CAAC,UAAW,iBAE3BjsC,KAAKqrD,OAASrrD,KAAKo3C,SAAS5xC,KAAKgkD,GAAM1Y,IAAI9wC,KAAKk5B,MAAO,KACvDl5B,KAAKqwB,WAAW7qB,KAAKxF,KAAKqrD,OAAOt4B,OAAO5vB,GAAG,iBAAiB,WACxDgtB,EAAMm7B,wBAEVtrD,KAAKmD,GAAG,UAAU,WACdgtB,EAAMm7B,uBAEVtrD,KAAKurD,mBACLvrD,KAAKk5B,MAAMsyB,iBAAiBpU,SAAS5xC,KAAKxF,MAC1CA,KAAKk4C,KAAK,GACVl4C,KAAKk5B,MAAMuyB,UAAUjmD,KAAKxF,SAGlCsD,OAAOssB,eAAeu7B,EAAQr/C,UAAW,QAAS,CAO9CwH,IAAK,WACD,OAAOtT,KAAKqrD,QAEhB31C,WAAY,MACZC,aAAc,OAKlBrS,OAAOssB,eAAeu7B,EAAQr/C,UAAW,UAAW,CAChD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH8c,EAAOpkB,UAAUuI,QAAQlL,KAAKnJ,MAC9ButC,GAAcvtC,KAAKk5B,MAAMuyB,UAAWzrD,SAG5CsD,OAAOssB,eAAeu7B,EAAQr/C,UAAW,kBAAmB,CACxD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH8c,EAAOpkB,UAAUg+C,gBAAgB3gD,KAAKnJ,MACtC,IAAI0rD,EAAY1rD,KAAKsT,IAAI,aACzB,GAAIo4C,GAAa,KAAM,CACnB1rD,KAAK0rB,MAAMnY,IAAI,OAAQvT,KAAKsT,IAAI,cAEpC,IAAIq4C,EAAY3rD,KAAKsT,IAAI,aACzB,GAAIq4C,GAAa,KAAM,CACnB3rD,KAAK0rB,MAAMnY,IAAI,OAAQvT,KAAKsT,IAAI,kBAI5ChQ,OAAOssB,eAAeu7B,EAAQr/C,UAAW,WAAY,CACjD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAI+c,EAAQnwB,KACZkwB,EAAOpkB,UAAUinC,SAAS5pC,KAAKnJ,MAC/B,GAAIA,KAAKitC,QAAQ,WAAY,CAEzBjtC,KAAKsrD,oBAET,GAAItrD,KAAKitC,QAAQ,iBAAkB,CAC/BjtC,KAAK4rD,wBAET,GAAI5rD,KAAKitC,QAAQ,mBAAoB,CACjC,IAAI4e,EAAY7rD,KAAKsT,IAAI,mBACzB,GAAIu4C,EAAW,CACX,IAAIjH,EAAK5kD,KAAKsT,IAAI,cAClBtT,KAAK8rD,aAAe,IAAIx7B,GAAc,CAClCs0B,EAAG7xB,OAAO5vB,GAAG,eAAe,SAAUib,GAClC,IAAIzS,EAASwkB,EAAM7c,IAAI,iBACvB,GAAI3H,EAAQ,CACR,GAAIA,EAAO2jC,QAAU3jC,EAAO2jC,OAAOzG,WAAW,kBAAoBl9B,EAAQ,CACtEA,EAASA,EAAO2jC,OAEpB3jC,EAAOogD,YAGfnH,EAAG7xB,OAAO5vB,GAAG,cAAc,SAAUib,GACjC,IAAIzS,EAASwkB,EAAM7c,IAAI,iBACvB,GAAI3H,EAAQ,CACR,GAAIA,EAAO2jC,QAAU3jC,EAAO2jC,OAAOzG,WAAW,kBAAoBl9B,EAAQ,CACtEA,EAASA,EAAO2jC,OAEpB3jC,EAAOqgD,oBAKlB,CACD,GAAIhsD,KAAK8rD,aAAc,CACnB9rD,KAAK8rD,aAAaz3C,UAClBrU,KAAK8rD,aAAe5zC,gBAMxC5U,OAAOssB,eAAeu7B,EAAQr/C,UAAW,UAAW,CAChD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH8c,EAAOpkB,UAAU0tC,QAAQrwC,KAAKnJ,MAC9BA,KAAK4rD,2BAGbtoD,OAAOssB,eAAeu7B,EAAQr/C,UAAW,wBAAyB,CAC9D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAI+c,EAAQnwB,KACZ,IAAIy3C,EAAgBz3C,KAAKsT,IAAI,iBAC7B,IAAImxC,EAAazkD,KAAKsT,IAAI,cAC1B,IAAI+nC,EACJ,IAAI4Q,EACJ,GAAIxU,GAAiBgN,EAAY,CAC7BpJ,EAAO5D,EAAcnkC,IAAI,QACzB24C,EAASxU,EAAcnkC,IAAI,UAC3B,GAAI+nC,GAAQ,KAAM,CACdA,EAAO4Q,EAEX,GAAIjsD,KAAKsT,IAAI,qBAAsB,CAC/B,GAAItT,KAAKksD,QAAS,CACdlsD,KAAKksD,QAAQ73C,UAEjB,GAAIgnC,GAAQ,KAAM,CACdoJ,EAAWlxC,IAAI,OAAQ8nC,GAE3Br7C,KAAKksD,QAAUzU,EAAct0C,GAAG,QAAQ,SAAUk4C,GAC9C,GAAIA,GAAQ,KAAM,CACdoJ,EAAWlxC,IAAI,OAAQ8nC,GACvBlrB,EAAMo7B,iBAAiBlQ,OAInC,GAAIr7C,KAAKsT,IAAI,uBAAwB,CACjC,GAAItT,KAAKmsD,UAAW,CAChBnsD,KAAKmsD,UAAU93C,UAEnB,GAAIgnC,GAAQ,KAAM,CACdoJ,EAAWlxC,IAAI,SAAU8nC,GAE7Br7C,KAAKmsD,UAAY1U,EAAct0C,GAAG,QAAQ,SAAUk4C,GAChD,GAAIA,GAAQ,KAAM,CACdoJ,EAAWlxC,IAAI,SAAU8nC,OAIrC,GAAIr7C,KAAKsT,IAAI,0BAA2B,CACpC,GAAItT,KAAKosD,SAAU,CACfpsD,KAAKosD,SAAS/3C,UAElB,GAAIgnC,GAAQ,KAAM,CACdr7C,KAAK0rB,MAAMnY,IAAI,OAAQ8nC,GAE3Br7C,KAAKosD,SAAW3U,EAAct0C,GAAG,QAAQ,SAAUk4C,GAC/C,GAAIA,GAAQ,KAAM,CACdlrB,EAAMzE,MAAMnY,IAAI,OAAQ8nC,QAKxCr7C,KAAKurD,iBAAiBlQ,MAG9B/3C,OAAOssB,eAAeu7B,EAAQr/C,UAAW,mBAAoB,CACzD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUioC,GACb,GAAIr7C,KAAKsT,IAAI,iBAAkB,CAC3B,GAAI+nC,GAAQ,KAAM,CACdA,EAAOr7C,KAAKsT,IAAI,cAAcA,IAAI,QAEtC,GAAI+nC,GAAQ,KAAM,CACdA,EAAOr7C,KAAKk5B,MAAMstB,gBAAgBlzC,IAAI,cAE1C,GAAI+nC,aAAgBtc,GAAO,CACvB/+B,KAAK0rB,MAAMnY,IAAI,OAAQwrB,GAAMstB,YAAYhR,EAAMr7C,KAAKk5B,MAAMstB,gBAAgBlzC,IAAI,mBAAoBtT,KAAKk5B,MAAMstB,gBAAgBlzC,IAAI,eAKjJhQ,OAAOssB,eAAeu7B,EAAQr/C,UAAW,eAAgB,CACrD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUw9B,GACb1gB,EAAOpkB,UAAUylC,aAAapoC,KAAKnJ,KAAM4wC,GACzC5wC,KAAK0rB,MAAM6lB,aAAaX,MAGhCttC,OAAOssB,eAAeu7B,EAAQr/C,UAAW,oBAAqB,CAC1D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH8c,EAAOpkB,UAAU04C,iBAAiBr7C,KAAKnJ,MACvC,IAAIsvC,EAAStvC,KAAKk5B,MAAMxE,UACxB,GAAI4a,EAAQ,CACR,IAAIgd,EAAK,GACT,IAAIC,EAAK,GACT,IAAIza,EAAU9xC,KAAKsT,IAAI,WACvB,GAAIw+B,aAAmBpc,GAAS,CAC5B42B,EAAKxa,EAAQ1+B,MAEjB,IAAI4+B,EAAUhyC,KAAKsT,IAAI,WACvB,GAAI0+B,aAAmBtc,GAAS,CAC5B62B,EAAKva,EAAQ5+B,MAEjB,IAAIo5C,EAAUld,EAAO/rB,QACrB,IAAIkpC,EAAUnd,EAAOuI,SACrB,IAAI2T,EAAmBxrD,KAAKsvC,OAC5B,IAAIiJ,EAAK,EACT,IAAIC,EAAK,EACT,GAAIgT,EAAkB,CAClBjT,EAAKiT,EAAiB59C,IACtB4qC,EAAKgT,EAAiB7nD,IACtB,IAAI+oD,EAAclB,EAAiBl4C,IAAI,eACvC,GAAIo5C,EAAa,CACbnU,GAAMmU,EAAY11B,MAAQ,EAC1BwhB,GAAMkU,EAAY31B,KAAO,EACzBy1B,IAAYE,EAAY11B,MAAQ,IAAM01B,EAAYlpB,OAAS,GAC3DipB,IAAYC,EAAY31B,KAAO,IAAM21B,EAAYjpB,QAAU,IAGnE,IAAImO,EAAS5xC,KAAKsT,IAAI,SAAU,CAAE0jB,MAAOuhB,EAAIxhB,KAAMyhB,EAAIhV,MAAOgpB,EAAUjU,EAAI9U,OAAQgpB,EAAUjU,IAC9Fx4C,KAAK8lD,gBACL,IAAIh9C,EAAI9I,KAAKujB,QACb,IAAI1iB,EAAIb,KAAK63C,SAEb,GAAI/uC,IAAM,EAAG,CACTA,EAAI9I,KAAK2sD,GAEb,GAAI9rD,IAAM,EAAG,CACTA,EAAIb,KAAK4sD,GAEb,IAAIC,EAAU7sD,KAAKsT,IAAI,UAAW,CAAE1F,EAAG4+C,EAAU,EAAG7oD,EAAG8oD,EAAU,IACjE,IAAI7+C,EAAIi/C,EAAQj/C,EAChB,IAAIjK,EAAIkpD,EAAQlpD,EAChB,IAAImpD,EAAqB9sD,KAAKsT,IAAI,sBAClC,IAAImxC,EAAazkD,KAAKsT,IAAI,cAC1B,IAAIy5C,EAAgB,EACpB,IAAIC,EAAgB,EACpB,IAAIC,EAAgB,EACpB,GAAIxI,aAAsBwF,GAAkB,CACxC8C,EAAgBtI,EAAWnxC,IAAI,gBAAiB,GAChD05C,EAAgBvI,EAAWnxC,IAAI,cAAe,GAAK,EACnD25C,EAAgBD,EAEpB,IAAIE,EAAW,EACf,IAAIC,EAAW,EACf,IAAIC,EAAUxb,EAAOpO,MAAQoO,EAAO5a,KACpC,IAAIq2B,EAAUzb,EAAOnO,OAASmO,EAAO7a,IAErC,GAAI+1B,GAAsB,cAAgBA,GAAsB,QAAUA,GAAsB,QAAS,CACrGE,EAAgB,EAChB,GAAIF,GAAsB,aAAc,CACpC,GAAIl/C,EAAIgkC,EAAO5a,KAAOo2B,EAAU,EAAG,CAC/Bx/C,GAAM9E,GAAK,EAAIwjD,GAAMS,EACrBE,IAAkB,MAEjB,CACDr/C,GAAM9E,EAAIwjD,EAAKS,QAGlB,GAAID,GAAsB,OAAQ,CACnCl/C,GAAM9E,GAAK,EAAIwjD,GAAMS,MAEpB,CACDn/C,GAAM9E,EAAIwjD,EAAKS,EACfE,IAAkB,OAIrB,CACDA,EAAgB,EAChB,GAAIH,GAAsB,WAAY,CAClC,GAAInpD,EAAIiuC,EAAO7a,IAAMl2B,EAAI,EAAIksD,EAAe,CACxCppD,GAAM9C,GAAK,EAAI0rD,GAAMQ,MAEpB,CACDppD,GAAM9C,EAAI0rD,EAAKQ,EACfC,IAAkB,QAGrB,GAAIF,GAAsB,OAAQ,CACnCnpD,GAAM9C,GAAK,EAAI0rD,GAAMQ,MAEpB,CACDppD,GAAM9C,EAAI0rD,EAAKQ,EACfC,IAAkB,GAG1Bp/C,EAAI2yC,GAAiB3yC,EAAGgkC,EAAO5a,KAAOluB,EAAIwjD,EAAI1a,EAAO5a,KAAOo2B,EAAUtkD,GAAK,EAAIwjD,IAAOW,EACtFtpD,EAAI48C,GAAiB58C,EAAGiuC,EAAO7a,IAAMl2B,EAAI0rD,EAAI3a,EAAO7a,IAAMs2B,EAAUxsD,GAAK,EAAI0rD,IAAOS,EACpFE,EAAWL,EAAQj/C,EAAIA,EAAI9E,EAAIwjD,EAAKW,EACpCE,EAAWN,EAAQlpD,EAAIA,EAAI9C,EAAI0rD,EAAKS,EACpChtD,KAAKstD,IAAM1/C,EACX5N,KAAKutD,IAAM5pD,EACX,IAAI6pD,EAAoBxtD,KAAKsT,IAAI,oBAAqB,GACtD,GAAIk6C,EAAoB,GAAKxtD,KAAKsT,IAAI,YAActT,KAAKsT,IAAI,WAAa,GAAK,CAC3E,IAAIm6C,EAAkBztD,KAAKsT,IAAI,mBAC/BtT,KAAK4kC,QAAQ,CAAE5wB,IAAK,IAAKwY,GAAI5e,EAAGqzB,SAAUusB,EAAmBzrB,OAAQ0rB,IACrEztD,KAAK4kC,QAAQ,CAAE5wB,IAAK,IAAKwY,GAAI7oB,EAAGs9B,SAAUusB,EAAmBzrB,OAAQ0rB,QAEpE,CACDztD,KAAKuT,IAAI,IAAK3F,GACd5N,KAAKuT,IAAI,IAAK5P,GAElB,GAAI8gD,aAAsBwF,GAAkB,CACxCxF,EAAWlxC,IAAI,WAAY25C,GAC3BzI,EAAWlxC,IAAI,WAAY45C,GAE/B,GAAIrkD,EAAI,EAAG,CACP9I,KAAK2sD,GAAK7jD,EAEd,GAAIjI,EAAI,EAAG,CACPb,KAAK4sD,GAAK/rD,OAK1ByC,OAAOssB,eAAeu7B,EAAS,YAAa,CACxCz1C,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,YAEX9P,OAAOssB,eAAeu7B,EAAS,aAAc,CACzCz1C,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO2wC,GAAUla,WAAW//B,OAAO,CAACqhD,EAAQrhB,cAEhD,OAAOqhB,EAnaA,CAoaTpH,ICxaF,IAAI2J,GAAiC,SAAUx9B,GAC3C1F,GAAUkjC,EAAiBx9B,GAC3B,SAASw9B,IACL,OAAOx9B,IAAW,MAAQA,EAAOnkB,MAAM/L,KAAMgM,YAAchM,KAE/DsD,OAAOssB,eAAe89B,EAAgB5hD,UAAW,eAAgB,CAC7D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WAEHpT,KAAK2tD,YAAY,eAAgB,GACjC3tD,KAAK2tD,YAAY,eAAgB,eACjC3tD,KAAK2tD,YAAY,uBAAwB,GACzC,IAAIC,EAAM,sBACV,IAAIC,EAAM,wBACV,IAAIC,EAAK,gBACT9tD,KAAK2tD,YAAY,oBAAqB,CAClC,CAAEI,OAAU,IAAMC,OAAUhuD,KAAKiuD,GAAGL,EAAM,MAC1C,CAAEG,OAAU,IAAMC,OAAUhuD,KAAKiuD,GAAGL,EAAM,MAC1C,CAAEG,OAAU,IAAMC,OAAUhuD,KAAKiuD,GAAGL,EAAM,MAC1C,CAAEG,OAAU,KAAOC,OAAUhuD,KAAKiuD,GAAGL,EAAM,OAC3C,CAAEG,OAAU,KAAOC,OAAUhuD,KAAKiuD,GAAGL,EAAM,OAC3C,CAAEG,OAAU,KAAOC,OAAUhuD,KAAKiuD,GAAGL,EAAM,OAC3C,CAAEG,OAAU,KAAOC,OAAUhuD,KAAKiuD,GAAGL,EAAM,OAC3C,CAAEG,OAAU,KAAOC,OAAUhuD,KAAKiuD,GAAGL,EAAM,SAE/C5tD,KAAK2tD,YAAY,sBAAuB,CACpC,CAAEI,OAAU,MAAOC,OAAUhuD,KAAKiuD,GAAGJ,EAAM,OAC3C,CAAEE,OAAU,MAAOC,OAAUhuD,KAAKiuD,GAAGJ,EAAM,OAC3C,CAAEE,OAAU,MAAOC,OAAUhuD,KAAKiuD,GAAGJ,EAAM,OAC3C,CAAEE,OAAU,MAAOC,OAAUhuD,KAAKiuD,GAAGJ,EAAM,OAC3C,CAAEE,OAAU,MAAOC,OAAUhuD,KAAKiuD,GAAGJ,EAAM,OAC3C,CAAEE,OAAU,KAAMC,OAAUhuD,KAAKiuD,GAAGJ,EAAM,MAC1C,CAAEE,OAAU,KAAMC,OAAUhuD,KAAKiuD,GAAGJ,EAAM,MAC1C,CAAEE,OAAU,KAAMC,OAAUhuD,KAAKiuD,GAAGJ,EAAM,QAE9C7tD,KAAK2tD,YAAY,eAAgB,CAC7B,CAAEI,OAAU,EAAGC,OAAQhuD,KAAKiuD,GAAGH,EAAK,MACpC,CAAEC,OAAU,KAAMC,OAAQhuD,KAAKiuD,GAAGH,EAAK,OACvC,CAAEC,OAAU,QAASC,OAAQhuD,KAAKiuD,GAAGH,EAAK,OAC1C,CAAEC,OAAU,WAAYC,OAAQhuD,KAAKiuD,GAAGH,EAAK,OAC7C,CAAEC,OAAU,cAAeC,OAAQhuD,KAAKiuD,GAAGH,EAAK,OAChD,CAAEC,OAAU,gBAAkBC,OAAQhuD,KAAKiuD,GAAGH,EAAK,SAEvD59B,EAAOpkB,UAAU69B,aAAaxgC,KAAKnJ,SAG3CsD,OAAOssB,eAAe89B,EAAgB5hD,UAAW,iBAAkB,CAC/D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH8c,EAAOpkB,UAAUmmC,eAAe9oC,KAAKnJ,SAU7CsD,OAAOssB,eAAe89B,EAAgB5hD,UAAW,SAAU,CACvD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUA,EAAOH,EAAQi7C,GAE5B,GAAIj7C,GAAU,MAASusB,GAAevsB,IAAWA,EAAO5L,gBAAkB,SAAW,CACjF4L,EAASjT,KAAKsT,IAAI,eAAgB,IAGtC,IAAI66C,EAGJ,IAAI77B,EAAShjB,OAAO8D,GAEpB,GAAIyvC,GAAe5vC,GAAS,CACxB,IACI,GAAIjT,KAAKsT,IAAI,eAAgB,CACzB,OAAO,IAAIV,KAAKC,aAAa7S,KAAKsT,IAAI,eAAgBL,GAAQA,OAAOqf,OAEpE,CACD,OAAO,IAAI1f,KAAKC,aAAaqF,UAAWjF,GAAQA,OAAOqf,IAG/D,MAAO1yB,GACH,MAAO,eAGV,CAEDqT,EAASm7C,GAAmBn7C,GAE5B,IAAIye,EAAO1xB,KAAKquD,YAAYp7C,EAAQjT,KAAKk5B,MAAMyU,UAE/C,IAAI2gB,OAAe,EACnB,GAAIh8B,EAAStyB,KAAKsT,IAAI,gBAAiB,CACnCg7C,EAAU58B,EAAK68B,cAEd,GAAIj8B,EAAStyB,KAAKsT,IAAI,gBAAiB,CACxCg7C,EAAU58B,EAAKrE,aAEd,CACDihC,EAAU58B,EAAK88B,KAGnB,GAAIN,GAAa,OAASI,EAAQG,IAAK,CACnCH,EAAUI,GAAaJ,GACvBA,EAAQ7gC,SAASkhC,OAASr8B,GAAU,EAAI,EAAI47B,EAGhDC,EAAYG,EAAQhqC,SAASpX,MAAMk0C,IAAmB/7C,KAAKrF,KAAK4uD,YAAYt8B,EAAQg8B,IAExF,OAAOH,KAWf7qD,OAAOssB,eAAe89B,EAAgB5hD,UAAW,cAAe,CAC5D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUH,EAAQ06B,GAOrB,IAAIxd,EAAQnwB,KACZ,IAAI6uD,EAAoBlhB,EAASmhB,eAAe,sBAChD,IAAIC,EAAmBphB,EAASmhB,eAAe,qBAE/C,IAAIp9B,EAAO,CACP68B,SAAY,CACRS,UAAa,CACTL,QAAW,EACXM,SAAY,EACZC,UAAa,EACblgD,UAAa6/C,GAEjBphC,SAAY,CACRkhC,QAAW,EACXM,SAAY,EACZjgD,UAAa+/C,GAEjBzqC,SAAY,GACZgO,OAAU,GACVhF,OAAU,OAEdD,SAAY,CACR2hC,UAAa,CACTL,QAAW,EACXM,SAAY,EACZC,UAAa,EACblgD,UAAa6/C,GAEjBphC,SAAY,CACRkhC,QAAW,EACXM,SAAY,EACZjgD,UAAa+/C,GAEjBzqC,SAAY,GACZgO,OAAU,GACVhF,OAAU,OAEdkhC,KAAQ,CACJQ,UAAa,CACTL,QAAW,EACXM,SAAY,EACZC,UAAa,EACblgD,UAAa6/C,GAEjBphC,SAAY,CACRkhC,QAAW,EACXM,SAAY,EACZjgD,UAAa+/C,GAEjBzqC,SAAY,GACZgO,OAAU,GACVhF,OAAU,QAIlBra,EAASA,EAAOpN,QAAQ,KAAMspD,IAE9B,IAAInN,EAAQ/uC,EAAO/F,MAAM,KACzBwkB,EAAK68B,SAASj8B,OAAS0vB,EAAM,GAC7B,UAAWA,EAAM,KAAO,YAAa,CACjCtwB,EAAK88B,KAAO98B,EAAK68B,aAEhB,CACD78B,EAAK88B,KAAKl8B,OAAS0vB,EAAM,GAE7B,UAAWA,EAAM,KAAO,YAAa,CACjCtwB,EAAKrE,SAAWqE,EAAK68B,aAEpB,CACD78B,EAAKrE,SAASiF,OAAS0vB,EAAM,GAGjC5oB,GAAa1H,GAAM,SAAU09B,EAAO34C,GAEhC,GAAIA,EAAK6W,OAAQ,CACb,OASJ,IAAI+hC,EAAa54C,EAAK6b,OAEtB,GAAI+8B,EAAWhoD,gBAAkB,SAAU,CACvCgoD,EAAal/B,EAAM7c,IAAI,eAAgB,eAG3C,IAAI6tC,EAASL,GAAcx+C,MAAM+sD,EAAY,MAC7C,IAAK,IAAIruD,EAAI,EAAGA,EAAImgD,EAAOn9C,OAAQhD,IAAK,CACpC,IAAIsB,EAAQ6+C,EAAOngD,GAEnBsB,EAAMyN,KAAOzN,EAAMyN,KAAKlK,QAAQspD,GAAoB,KACpD,GAAI7sD,EAAMR,OAAS,QAAS,CAGxB,IAAIgtB,EAAUxsB,EAAMyN,KAAK0nB,MAAM,6CAC/B,GAAI3I,EAAS,CACT,GAAIA,IAAY,MAAQA,EAAQ,KAAO,GAAI,CAGvCrY,EAAK6N,UAAYhiB,EAAMyN,SAEtB,CAED,IAAIu/C,EAAOxgC,EAAQ,GAAG2I,MAAM,yCAC5B,GAAI63B,EAAM,CACN74C,EAAKg4C,IAAMa,EAAK,GAAGjoD,cACnBoP,EAAK84C,WAAazgC,EAAQ,GAAG2I,MAAM,6BAA+B,KAAO,MAG7E,IAAI72B,EAAIkuB,EAAQ,GAAG5hB,MAAM,KAEzB,GAAItM,EAAE,KAAO,QAIR,CAED6V,EAAKu4C,UAAUL,QAAU/tD,EAAE,GAAG62B,MAAM,OAAS,IAAIzzB,OACjDyS,EAAKu4C,UAAUC,SAAWruD,EAAE,GAAG62B,MAAM,QAAU,IAAIzzB,OAASyS,EAAKu4C,UAAUL,OAE3E,IAAI7tD,EAAIF,EAAE,GAAGsM,MAAM,KACnB,GAAIpM,EAAEkD,SAAW,OAIZ,CAEDyS,EAAKu4C,UAAUE,UAAYpuD,EAAEsrB,OAAS,IAAIpoB,OAC1C,GAAIyS,EAAKu4C,UAAUE,WAAa,EAAG,CAC/Bz4C,EAAKu4C,UAAUE,UAAY,IAKvC,UAAYtuD,EAAE,KAAQ,iBAIjB,CAED6V,EAAKgX,SAASkhC,QAAU/tD,EAAE,GAAG62B,MAAM,OAAS,IAAIzzB,OAChDyS,EAAKgX,SAASwhC,SAAWruD,EAAE,GAAG62B,MAAM,QAAU,IAAIzzB,OAASyS,EAAKgX,SAASkhC,OAG7El4C,EAAK6N,UAAYhiB,EAAMyN,KAAK7C,MAAM4hB,EAAQ,IAAIzpB,KAAK+7C,UAI1D,CAED3qC,EAAK6N,UAAYhiB,EAAMyN,MAS/B0G,EAAK6W,OAAS,QAKlB,OAAOoE,KAWfpuB,OAAOssB,eAAe89B,EAAgB5hD,UAAW,cAAe,CAC5D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUA,EAAOk7C,GAEpB,IAAIjhC,EAAWja,EAAQ,EACvBA,EAAQ9H,KAAK8B,IAAIgG,GAEjB,IAAI2tC,EAAS,GAAIiN,EAAS,GAC1B,IAAIsB,EAAOhB,EAAQG,IAAMH,EAAQG,IAAIvhD,MAAM,IAAM,GACjD,GAAIoiD,EAAKvrD,QAAQ,QAAU,EAAG,CAC1B,IAAIyrD,EAAMxvD,KAAKyvD,YAAYr8C,EAAOpT,KAAKsT,IAAI,gBAAiBg8C,EAAKvrD,QAAQ,QAAU,GACnFqP,EAAQo8C,EAAI,GACZzO,EAASyO,EAAI,GACbxB,EAASwB,EAAI,GACb,GAAIlB,EAAQiB,WAAY,CACpBvB,EAAS,IAAMA,QAGlB,GAAIsB,EAAKvrD,QAAQ,QAAU,EAAG,CAC/B,IAAI2rD,EAAM1vD,KAAKyvD,YAAYr8C,EAAOA,EAAQpT,KAAKsT,IAAI,wBAA0BtT,KAAKsT,IAAI,uBAAyBtT,KAAKsT,IAAI,qBAAsBg8C,EAAKvrD,QAAQ,QAAU,GACrKqP,EAAQs8C,EAAI,GACZ3O,EAAS2O,EAAI,GACb1B,EAAS0B,EAAI,GACb,GAAIpB,EAAQiB,WAAY,CACpBvB,EAAS,IAAMA,QAGlB,GAAIsB,EAAKvrD,QAAQ,QAAU,EAAG,CAC/B,IAAI4rD,EAAKrkD,KAAKC,IAAI6H,EAAM1R,WAAWsC,OAAS,EAAG,IAE/CoP,EAAQrG,WAAWqG,EAAMw8C,YAAYD,IACrC5O,EAAS/gD,KAAKk5B,MAAMyU,SAASC,UAAU,kBACvCogB,EAAShuD,KAAKk5B,MAAMyU,SAASC,UAAU,kBACvC,GAAImT,GAAU,IAAMiN,GAAU,GAAI,CAC9BA,EAAS,UAGZ,GAAIsB,EAAKvrD,QAAQ,QAAU,EAAG,CAC/B,IAAI4rD,EAAKrkD,KAAKC,IAAI6H,EAAM1R,WAAWsC,OAAS,EAAG,IAC/CoP,GAAS,IACTA,EAAQrG,WAAWqG,EAAMw8C,YAAYD,IACrC3B,EAAS,SAER,GAAIsB,EAAKvrD,QAAQ,QAAU,EAAG,CAC/B,IAAI4rD,EAAKrkD,KAAKC,IAAI6H,EAAM1R,WAAWsC,OAAS,EAAG,IAC/CoP,GAAS,IACTA,EAAQrG,WAAWqG,EAAMw8C,YAAYD,IACrC3B,EAAS,IAGb,GAAIsB,EAAKvrD,QAAQ,QAAU,EAAG,CAE1B,IAAI8rD,OAAW,EACf,GAAIvB,EAAQ7gC,SAASwhC,SAAW,EAAG,CAC/BY,EAAMz8C,EAAM08C,cAAcxB,EAAQ7gC,SAASwhC,SAAS/hD,MAAM,SAEzD,CACD2iD,EAAMz8C,EAAM08C,gBAAgB5iD,MAAM,KAEtCkG,EAAQ9D,OAAOugD,EAAI,IACnB7B,EAAS,IAAM6B,EAAI,GACnB,GAAIvB,EAAQiB,WAAY,CACpBvB,EAAS,IAAMA,QAGlB,GAAIM,EAAQ7gC,SAASwhC,UAAY,EAAG,CACrC77C,EAAQ9H,KAAKoyB,MAAMtqB,QAElB,GAAIk7C,EAAQ7gC,SAASwhC,QAAU,EAAG,CACnC,IAAI1pD,EAAI+F,KAAKmB,IAAI,GAAI6hD,EAAQ7gC,SAASwhC,SACtC77C,EAAQ9H,KAAKoyB,MAAMtqB,EAAQ7N,GAAKA,EAGpC,IAAI4R,EAAM,GAEV,IAAIvW,EAAImvD,GAAqB38C,GAAOlG,MAAM,KAE1C,IAAI8iD,EAAOpvD,EAAE,GAEb,GAAIovD,EAAKhsD,OAASsqD,EAAQU,UAAUL,OAAQ,CACxCqB,EAAO9rD,MAAMoqD,EAAQU,UAAUL,OAASqB,EAAKhsD,OAAS,GAAGqB,KAAK,KAAO2qD,EAGzE,GAAI1B,EAAQU,UAAUE,SAAW,EAAG,CAChC,IAAIe,EAAK,GACT,IAAIC,EAAQF,EAAK9iD,MAAM,IAAIijD,UAAU9qD,KAAK,IAC1C,IAAK,IAAIrE,EAAI,EAAG0xB,EAAMs9B,EAAKhsD,OAAQhD,GAAK0xB,EAAK1xB,GAAKstD,EAAQU,UAAUE,SAAU,CAC1E,IAAI3rD,EAAI2sD,EAAM1hD,OAAOxN,EAAGstD,EAAQU,UAAUE,UAAUhiD,MAAM,IAAIijD,UAAU9qD,KAAK,IAC7E,GAAI9B,IAAM,GAAI,CACV0sD,EAAGG,QAAQ7sD,IAGnBysD,EAAOC,EAAG5qD,KAAKipD,EAAQU,UAAUhgD,WAGrCmI,GAAO64C,EAEP,GAAIpvD,EAAEoD,SAAW,EAAG,CAChBpD,EAAE4E,KAAK,IAEX,IAAI6qD,EAAOzvD,EAAE,GAEb,GAAIyvD,EAAKrsD,OAASsqD,EAAQ7gC,SAASkhC,OAAQ,CACvC0B,GAAQnsD,MAAMoqD,EAAQ7gC,SAASkhC,OAAS0B,EAAKrsD,OAAS,GAAGqB,KAAK,KAElE,GAAIgrD,IAAS,GAAI,CACbl5C,GAAOm3C,EAAQ7gC,SAASze,UAAYqhD,EAGxC,GAAIl5C,IAAQ,GAAI,CACZA,EAAM,IAGV,GAAI/D,IAAU,GAAKia,GAAaiiC,EAAKvrD,QAAQ,QAAU,EAAI,CACvDoT,EAAM,IAAMA,EAGhB,GAAI4pC,EAAQ,CACR5pC,EAAM4pC,EAAS5pC,EAEnB,GAAI62C,EAAQ,CACR72C,GAAO62C,EAEX,OAAO72C,KAGf7T,OAAOssB,eAAe89B,EAAgB5hD,UAAW,cAAe,CAC5D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUA,EAAOk9C,EAAUC,GAC9B,GAAIA,SAAe,EAAG,CAAEA,EAAQ,MAChC,IAAIC,EAAWp9C,EACf,IAAI2tC,EAAS,GACb,IAAIiN,EAAS,GACb,IAAIyC,EAAU,MACd,IAAI9jD,EAAI,EACR,IAAK,IAAI3L,EAAI,EAAG0xB,EAAM49B,EAAStsD,OAAQhD,EAAI0xB,EAAK1xB,IAAK,CACjD,GAAIsvD,EAAStvD,GAAG+sD,QAAU36C,EAAO,CAC7B,GAAIk9C,EAAStvD,GAAG+sD,SAAW,EAAG,CAC1ByC,EAAW,MAEV,CACDA,EAAWp9C,EAAQk9C,EAAStvD,GAAG+sD,OAC/BphD,EAAI2jD,EAAStvD,GAAG+sD,OAEpBhN,EAASuP,EAAStvD,GAAG+/C,OACrBiN,EAASsC,EAAStvD,GAAGgtD,OACrByC,EAAU,MAGlB,IAAKA,GAAWF,GAASD,EAAStsD,QAAUoP,GAAS,EAAG,CAEpDo9C,EAAWp9C,EAAQk9C,EAAS,GAAGvC,OAC/BhN,EAASuP,EAAS,GAAGvP,OACrBiN,EAASsC,EAAS,GAAGtC,OACrByC,EAAU,KAEd,GAAIA,EAAS,CACTD,EAAWzjD,WAAWyjD,EAASZ,YAAYtkD,KAAKC,IAAIoB,EAAEjL,WAAWsC,OAASsH,KAAK+D,MAAMmhD,GAAU9uD,WAAWmE,QAAQ,WAAY,IAAI7B,OAAQ,MAE9I,MAAO,CAACwsD,EAAUzP,EAAQiN,MAUlC1qD,OAAOssB,eAAe89B,EAAgB5hD,UAAW,SAAU,CACvD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUrD,GACb,OAAOA,EAAKlK,QAAQ,KAAMspD,OAUlC7rD,OAAOssB,eAAe89B,EAAgB5hD,UAAW,WAAY,CACzD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUrD,GACb,OAAOA,EAAKlK,QAAQspD,GAAoB,QAGhD,OAAOzB,EAhgBQ,CAigBjB3kB,IC7gBF,SAAS2nB,GAAUvzB,EAAUtC,GACzB,IAAIwB,EAAO,EACX,IAAIs0B,EAAQ,EACZ,IAAIl1B,EAAM,EACV,IAAIm1B,EAAO,EACX,IAAIC,EAAS,EACb,IAAIC,EAAS,EACb,IAAIC,EAAc,EAClB,IAAIz0B,EAAU,EACda,EAAS6zB,cAAcn2B,GAAMhuB,SAAQ,SAAUe,GAC3C,OAAQA,EAAE9L,MACN,IAAK,OACDu6B,GAAQzuB,EAAEwF,MACV,MACJ,IAAK,QACDu9C,GAAU/iD,EAAEwF,MAAS,EACrB,MACJ,IAAK,MACDqoB,GAAO7tB,EAAEwF,MACT,MACJ,IAAK,OACDw9C,GAAQhjD,EAAEwF,MACV,MACJ,IAAK,SACDy9C,GAAUjjD,EAAEwF,MACZ,MACJ,IAAK,SACD09C,GAAUljD,EAAEwF,MACZ,MACJ,IAAK,mBACD29C,GAAenjD,EAAEwF,MACjB,MACJ,IAAK,UACD,OAAQxF,EAAEwF,OACN,IAAK,MACDkpB,EAAU,EACV,MACJ,IAAK,MACDA,EAAU,EACV,MACJ,IAAK,MACDA,EAAU,EACV,MACJ,IAAK,MACDA,EAAU,EACV,MACJ,IAAK,MACDA,EAAU,EACV,MACJ,IAAK,MACDA,EAAU,EACV,MACJ,IAAK,MACDA,EAAU,EACV,WAIpB,GAAIs0B,IAAS,GAAI,CACbA,EAAO,EAEX,MAAO,CAAEv0B,KAAMA,EAAMs0B,MAAOA,EAAOl1B,IAAKA,EAAKm1B,KAAMA,EAAMC,OAAQA,EAAQC,OAAQA,EAAQC,YAAaA,EAAaz0B,QAASA,GAEhI,SAAS20B,GAAU9zB,EAAUtC,GACzB,IAAI9pB,EAAK2/C,GAAUvzB,EAAUtC,GAAOwB,EAAOtrB,EAAGsrB,KAAMs0B,EAAQ5/C,EAAG4/C,MAAOl1B,EAAM1qB,EAAG0qB,IAAKm1B,EAAO7/C,EAAG6/C,KAAMC,EAAS9/C,EAAG8/C,OAAQC,EAAS//C,EAAG+/C,OAAQC,EAAchgD,EAAGggD,YAC7J,OAAOrrD,KAAK41B,IAAIe,EAAMs0B,EAAOl1B,EAAKm1B,EAAMC,EAAQC,EAAQC,GAE5D,IAAIG,GAA0B,WAC1B,SAASA,EAAS/zB,EAAU6L,GACxB1lC,OAAOssB,eAAe5vB,KAAM,OAAQ,CAChC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAe5vB,KAAM,OAAQ,CAChC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAe5vB,KAAM,OAAQ,CAChC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB,IAAK41B,EAAQ,CACT,MAAM,IAAIvkC,MAAM,2DAEpBzE,KAAK+H,KAAOo1B,EACZn9B,KAAKq7B,KAAO,IAAIzoB,KAAKu+C,eAAe,MAAO,CACvCC,OAAQ,MACR/zB,SAAU,MACVhB,KAAM,UACNs0B,MAAO,UACPl1B,IAAK,UACLm1B,KAAM,UACNC,OAAQ,UACRC,OAAQ,UACRx0B,QAAS,QACT+0B,uBAAwB,IAE5BrxD,KAAKsxD,KAAO,IAAI1+C,KAAKu+C,eAAe,MAAO,CACvCC,OAAQ,MACR/zB,SAAUF,EACVd,KAAM,UACNs0B,MAAO,UACPl1B,IAAK,UACLm1B,KAAM,UACNC,OAAQ,UACRC,OAAQ,UACRx0B,QAAS,QACT+0B,uBAAwB,IAUhC/tD,OAAOssB,eAAeshC,EAAU,MAAO,CACnCx7C,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU+pB,GACb,OAAA,IAAYn9B,KAAKm9B,EAAU,SAGnC75B,OAAOssB,eAAeshC,EAASplD,UAAW,eAAgB,CACtD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUynB,GACb,IAAI02B,EAASvxD,KAAKwxD,UAAU32B,GAC5B,IAAI42B,EAAa52B,EAAKK,oBACtB,IAAI/M,EAAS,IAAIzoB,KAAKm1B,GACtB1M,EAAOujC,cAAcvjC,EAAOwjC,iBAAmBJ,EAASE,IACxD,IAAIG,EAAgBzjC,EAAO+M,oBAC3B,GAAIu2B,GAAcG,EAAe,CAC7BzjC,EAAOujC,cAAcvjC,EAAOwjC,gBAAkBC,EAAgBH,GAElE,OAAOtjC,KAGf7qB,OAAOssB,eAAeshC,EAASplD,UAAW,YAAa,CACnD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUynB,GACb,IAAIC,EAAMm2B,GAAUjxD,KAAKq7B,KAAMR,GAC/B,IAAIg3B,EAAMZ,GAAUjxD,KAAKsxD,KAAMz2B,GAC/B,OAAQC,EAAM+2B,GAAO,OAG7BvuD,OAAOssB,eAAeshC,EAASplD,UAAW,YAAa,CACnD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUynB,GACb,OAAO61B,GAAU1wD,KAAKsxD,KAAMz2B,MAGpC,OAAOq2B,EAlGC,GC7DZ,IAAIY,GAA+B,SAAU5hC,GACzC1F,GAAUsnC,EAAe5hC,GACzB,SAAS4hC,IACL,OAAO5hC,IAAW,MAAQA,EAAOnkB,MAAM/L,KAAMgM,YAAchM,KAE/DsD,OAAOssB,eAAekiC,EAAchmD,UAAW,eAAgB,CAC3D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WAEHpT,KAAK2tD,YAAY,aAAc,MAC/B3tD,KAAK2tD,YAAY,aAAc,cAC/Bz9B,EAAOpkB,UAAU69B,aAAaxgC,KAAKnJ,SAG3CsD,OAAOssB,eAAekiC,EAAchmD,UAAW,iBAAkB,CAC7D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH8c,EAAOpkB,UAAUmmC,eAAe9oC,KAAKnJ,SAG7CsD,OAAOssB,eAAekiC,EAAchmD,UAAW,SAAU,CACrD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUkf,EAAQrf,GAIrB,UAAWA,IAAW,aAAeA,IAAW,GAAI,CAChDA,EAASjT,KAAKsT,IAAI,aAAc,cAGpC,IAAI66C,EAGJ,IAAItzB,EAAOvI,EAEX,GAAIuwB,GAAe5vC,GAAS,CACxB,IACI,IAAI8+C,EAAU/xD,KAAKsT,IAAI,eACvB,GAAIy+C,EAAS,CACT,OAAO,IAAIn/C,KAAKu+C,eAAeY,EAAS9+C,GAAQA,OAAO4nB,OAEtD,CACD,OAAO,IAAIjoB,KAAKu+C,eAAej5C,UAAWjF,GAAQA,OAAO4nB,IAGjE,MAAOj7B,GACH,MAAO,WAIf,IAAI8xB,EAAO1xB,KAAKquD,YAAYp7C,GAE5B,IAAIkqB,EAAWn9B,KAAKk5B,MAAMiE,SAC1B,GAAIA,IAAan9B,KAAKk5B,MAAM4B,IAAK,CAC7BD,EAAOsC,EAAS60B,aAAan3B,GAGjC,IAAKhJ,GAAegJ,EAAKI,WAAY,CAGjC,MAAO,eAGXkzB,EAAYnuD,KAAK4uD,YAAY/zB,EAAMnJ,GAEnC,GAAI1xB,KAAKsT,IAAI,cAAe,CACxB66C,EAAYA,EAAUtoD,QAAQ,QAASsoD,EAAU3/C,OAAO,EAAG,GAAGrH,eAGlE,OAAOgnD,KAUf7qD,OAAOssB,eAAekiC,EAAchmD,UAAW,cAAe,CAC1D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUynB,EAAMnJ,GAEnB,IAAIva,EAAMua,EAAKpN,SAEf,IAAI2tC,EAAUtB,EAAOr0B,EAASb,EAAKiB,EAAOw1B,EAASC,EAASC,EAAcC,EAAYx3B,EAAKI,UAC3F,GAAIj7B,KAAKk5B,MAAM4B,IAAK,CAChBm3B,EAAWp3B,EAAKiB,iBAChB60B,EAAQ91B,EAAKy3B,cACbh2B,EAAUzB,EAAKa,YACfD,EAAMZ,EAAKe,aACXc,EAAQ7B,EAAK03B,cACbL,EAAUr3B,EAAK82B,gBACfQ,EAAUt3B,EAAK23B,gBACfJ,EAAev3B,EAAK43B,yBAEnB,CACDR,EAAWp3B,EAAKE,cAChB41B,EAAQ91B,EAAKU,WACbe,EAAUzB,EAAK2B,SACff,EAAMZ,EAAKW,UACXkB,EAAQ7B,EAAK63B,WACbR,EAAUr3B,EAAK83B,aACfR,EAAUt3B,EAAK+3B,aACfR,EAAev3B,EAAKg4B,kBAGxB,IAAK,IAAI7xD,EAAI,EAAG0xB,EAAMhB,EAAKswB,MAAMh+C,OAAQhD,EAAI0xB,EAAK1xB,IAAK,CACnD,IAAIoS,EAAQ,GACZ,OAAQse,EAAKswB,MAAMhhD,IACf,IAAK,IACDoS,EAAQpT,KAAKiuD,GAAGgE,EAAW,EACrB,UACA,WACN,MACJ,IAAK,OACD7+C,EAAQ9H,KAAK8B,IAAI6kD,GAAUvwD,WAC3B,GAAIuwD,EAAW,EAAG,CACd7+C,GAASpT,KAAKiuD,GAAG,WAErB,MACJ,IAAK,MACL,IAAK,KACL,IAAK,IACD76C,EAAQ9H,KAAK8B,IAAI6kD,GAAUvwD,WAAW8M,QAAQkjB,EAAKswB,MAAMhhD,GAAGgD,QAC5D,GAAIiuD,EAAW,EAAG,CACd7+C,GAASpT,KAAKiuD,GAAG,WAErB,MACJ,IAAK,OACL,IAAK,MACL,IAAK,KACL,IAAK,IACD,IAAI7xB,EAAO02B,GAAej4B,GAC1B,IAAIwB,EAAO41B,EACX,GAAI71B,GAAQ,GAAME,EAAU,EAAI,CAC5BD,IAEJ,GAAI3K,EAAKswB,MAAMhhD,IAAM,OAAQ,CACzBoS,EAAQ9H,KAAK8B,IAAIivB,GAAM36B,eAEtB,CACD0R,EAAQ9H,KAAK8B,IAAIivB,GAAM36B,WAAW8M,QAAQkjB,EAAKswB,MAAMhhD,GAAGgD,QAE5D,GAAIq4B,EAAO,EAAG,CACVjpB,GAASpT,KAAKiuD,GAAG,WAErB,MACJ,IAAK,IAED,MACJ,IAAK,IACD76C,EAAQ,GAAK9H,KAAKywB,MAAMlB,EAAKU,WAAa,GAAK,GAC/C,MACJ,IAAK,QACDnoB,EAAQpT,KAAKiuD,GAAGjuD,KAAK+yD,UAAUpC,IAAQniD,OAAO,EAAG,GACjD,MACJ,IAAK,OACD4E,EAAQpT,KAAKiuD,GAAGjuD,KAAK+yD,UAAUpC,IAC/B,MACJ,IAAK,MACDv9C,EAAQpT,KAAKiuD,GAAGjuD,KAAKgzD,eAAerC,IACpC,MACJ,IAAK,KACDv9C,EAAQ+rB,GAAiBwxB,EAAQ,EAAG,EAAG,KACvC,MACJ,IAAK,IACDv9C,GAASu9C,EAAQ,GAAGjvD,WACpB,MACJ,IAAK,KACD0R,EAAQ+rB,GAAiB2zB,GAAej4B,GAAuB,EAAG,KAClE,MACJ,IAAK,IACDznB,EAAQ0/C,GAAej4B,GAAsBn5B,WAC7C,MACJ,IAAK,IACD0R,EAAQ6/C,GAAoBp4B,GAAsBn5B,WAClD,MACJ,IAAK,KACD0R,EAAQ+rB,GAAiB1D,EAAK,EAAG,KACjC,MACJ,IAAK,IACDroB,EAAQqoB,EAAI/5B,WACZ,MACJ,IAAK,KACL,IAAK,MACD0R,EAAQ+rB,GAAiB+zB,GAAkBr4B,GAAsBn5B,WAAYgwB,EAAKswB,MAAMhhD,GAAGgD,OAAQ,KACnG,MACJ,IAAK,IACDoP,EAAQ8/C,GAAkBr4B,GAAsBn5B,WAChD,MACJ,IAAK,IAED,MACJ,IAAK,IAED,MACJ,IAAK,IACD0R,EAAQpT,KAAKk5B,MAAMyU,SAASwlB,cAAc,YAAYhqD,KAAKnJ,KAAMy7B,GACjE,MACJ,IAAK,IACDroB,GAASkpB,GAAW,GAAG56B,WACvB,MACJ,IAAK,KACD0R,EAAQ+rB,IAAkB7C,GAAW,GAAG56B,WAAY,EAAG,KACvD,MACJ,IAAK,MACL,IAAK,MACD0R,EAAQpT,KAAKiuD,GAAGjuD,KAAKozD,iBAAiB92B,IACtC,MACJ,IAAK,OACL,IAAK,OACDlpB,EAAQpT,KAAKiuD,GAAGjuD,KAAKqzD,YAAY/2B,IACjC,MACJ,IAAK,QACL,IAAK,QACDlpB,EAAQpT,KAAKiuD,GAAGjuD,KAAKozD,iBAAiB92B,IAAU9tB,OAAO,EAAG,GAC1D,MACJ,IAAK,IACL,IAAK,KACD4E,GAASkpB,GAAWt8B,KAAKk5B,MAAMsU,OAAO8lB,gBAAkB,GAAK,GAAG5xD,WAChE,GAAIgwB,EAAKswB,MAAMhhD,IAAM,KAAM,CACvBoS,EAAQ+rB,GAAiB/rB,EAAO,EAAG,KAEvC,MACJ,IAAK,IACD,GAAIspB,GAAS,GAAI,CACbtpB,EAAQpT,KAAKiuD,GAAG,UAEf,CACD76C,EAAQpT,KAAKiuD,GAAG,MAEpB,MACJ,IAAK,KACD,GAAIvxB,GAAS,GAAI,CACbtpB,EAAQpT,KAAKiuD,GAAG,YAEf,CACD76C,EAAQpT,KAAKiuD,GAAG,QAEpB,MACJ,IAAK,MACD,GAAIvxB,GAAS,GAAI,CACbtpB,EAAQpT,KAAKiuD,GAAG,SAEf,CACD76C,EAAQpT,KAAKiuD,GAAG,KAEpB,MACJ,IAAK,IACD76C,EAAQmgD,GAAkB72B,GAAOh7B,WACjC,MACJ,IAAK,KACD0R,EAAQ+rB,GAAiBo0B,GAAkB72B,GAAQ,EAAG,KACtD,MACJ,IAAK,IACDtpB,EAAQspB,EAAMh7B,WACd,MACJ,IAAK,KACD0R,EAAQ+rB,GAAiBzC,EAAO,EAAG,KACnC,MACJ,IAAK,IACDtpB,EAAQmgD,GAAkB72B,EAAO,GAAGh7B,WACpC,MACJ,IAAK,KACD0R,EAAQ+rB,GAAiBo0B,GAAkB72B,EAAO,GAAI,EAAG,KACzD,MACJ,IAAK,IACDtpB,GAASspB,EAAQ,GAAGh7B,WACpB,MACJ,IAAK,KACD0R,EAAQ+rB,GAAiBzC,EAAQ,EAAG,EAAG,KACvC,MACJ,IAAK,IACDtpB,EAAQ8+C,EAAQxwD,WAChB,MACJ,IAAK,KACD0R,EAAQ+rB,GAAiB+yB,EAAS,EAAG,KACrC,MACJ,IAAK,IACD9+C,EAAQ++C,EAAQzwD,WAChB,MACJ,IAAK,KACD0R,EAAQ+rB,GAAiBgzB,EAAS,EAAG,KACrC,MACJ,IAAK,IACL,IAAK,KACL,IAAK,MACD/+C,EAAQ9H,KAAKoyB,MAAO00B,EAAe,IAAQ9mD,KAAKmB,IAAI,GAAIilB,EAAKswB,MAAMhhD,GAAGgD,SAAStC,WAC/E,MACJ,IAAK,IACD0R,EAAQi/C,EAAU3wD,WAClB,MACJ,IAAK,IACL,IAAK,KACL,IAAK,MACD0R,EAAQ+rB,GAAiBizB,EAAc1gC,EAAKswB,MAAMhhD,GAAGgD,OAAQ,KAC7D,MACJ,IAAK,IACDoP,EAAQogD,GAAmB34B,EAAM,MAAO,MAAO76B,KAAKk5B,MAAM4B,KAC1D,MACJ,IAAK,KACD1nB,EAAQogD,GAAmB34B,EAAM,KAAM,MAAO76B,KAAKk5B,MAAM4B,KACzD,MACJ,IAAK,MACD1nB,EAAQogD,GAAmB34B,EAAM,MAAO,KAAM76B,KAAKk5B,MAAM4B,KACzD,MACJ,IAAK,OACD1nB,EAAQogD,GAAmB34B,EAAM,KAAM,KAAM76B,KAAKk5B,MAAM4B,KACxD,MACJ,IAAK,IACL,IAAK,KACD,IAAIqC,EAAWn9B,KAAKk5B,MAAM4B,IAAM,MAAQ96B,KAAKk5B,MAAMiE,SACnD,GAAIA,aAAoB+zB,GAAU,CAC9B/zB,EAAWA,EAASp1B,KAExB,IAAIwpD,EAASp0B,EAAWs2B,GAAyBt2B,GAAYtC,EAAKK,oBAClE,IAAIw4B,EAAKpoD,KAAK8B,IAAImkD,GAAU,GAC5B,IAAIoC,EAAMroD,KAAK+D,MAAMqkD,GACrB,IAAIE,EAAMF,EAAK,GAAKC,EAAM,GAC1B,GAAI3zD,KAAKk5B,MAAM4B,IAAK,CAChB64B,EAAM,EACNC,EAAM,EAEV,GAAIliC,EAAKswB,MAAMhhD,IAAM,IAAK,CACtBoS,EAAQ,MACRA,GAASm+C,EAAS,EAAI,IAAM,IAC5Bn+C,GAAS+rB,GAAiBw0B,EAAK,GAAK,IAAMx0B,GAAiBy0B,EAAK,OAE/D,CACDxgD,EAAQm+C,EAAS,EAAI,IAAM,IAC3Bn+C,GAAS+rB,GAAiBw0B,EAAK,GAAKx0B,GAAiBy0B,EAAK,GAE9D,MACJ,IAAK,IACDxgD,EAAQynB,EAAKg5B,cACb,MACJ,IAAK,IACDzgD,EAAQynB,EAAKi5B,cACb,MAER38C,EAAMA,EAAItR,QAAQu7C,GAAmBhuC,GAEzC,OAAO+D,KAQf7T,OAAOssB,eAAekiC,EAAchmD,UAAW,cAAe,CAC1D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUH,GAIb,IAAIye,EAAO,CACPpN,SAAY,GACZ09B,MAAS,IAGb,IAAIb,EAASL,GAAcx+C,MAAM2Q,EAAQ,MACzC,IAAK,IAAIjS,EAAI,EAAGA,EAAImgD,EAAOn9C,OAAQhD,IAAK,CACpC,IAAIsB,EAAQ6+C,EAAOngD,GACnB,GAAIsB,EAAMR,OAAS,QAAS,CAExB,GAAIQ,EAAMyN,KAAK0nB,MAAM,WAAY,CAC7B,IAAIs8B,EAAa/zD,KAAKsT,IAAI,aAAc,cACxC,IAAKksB,GAAeu0B,GAAa,CAC7BA,EAAa,aAEjBzxD,EAAMyN,KAAOgkD,EAGjB,IAAIjlC,EAAUxsB,EAAMyN,KAAK0nB,MAAM,iNAE/B,GAAI3I,EAAS,CAET,IAAK,IAAIlhB,EAAI,EAAGA,EAAIkhB,EAAQ9qB,OAAQ4J,IAAK,CACrC8jB,EAAKswB,MAAMx8C,KAAKspB,EAAQlhB,IACxBtL,EAAMyN,KAAOzN,EAAMyN,KAAKlK,QAAQipB,EAAQlhB,GAAIwzC,MAKxD1vB,EAAKpN,UAAYhiB,EAAMyN,KAI3B,OAAO2hB,KAGfpuB,OAAOssB,eAAekiC,EAAchmD,UAAW,UAAW,CACtD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,MAAO,CAAC,UAAW,WAAY,QAAS,QAAS,MAAO,OAAQ,OAAQ,SAAU,YAAa,UAAW,WAAY,eAG9H9P,OAAOssB,eAAekiC,EAAchmD,UAAW,YAAa,CACxD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU7E,GACb,OAAOvO,KAAKg0D,UAAUzlD,MAG9BjL,OAAOssB,eAAekiC,EAAchmD,UAAW,eAAgB,CAC3D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,MAAO,CAAC,MAAO,MAAO,MAAO,MAAO,aAAc,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,UAGpG9P,OAAOssB,eAAekiC,EAAchmD,UAAW,iBAAkB,CAC7D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU7E,GACb,OAAOvO,KAAKi0D,eAAe1lD,MAGnCjL,OAAOssB,eAAekiC,EAAchmD,UAAW,YAAa,CACxD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,MAAO,CAAC,SAAU,SAAU,UAAW,YAAa,WAAY,SAAU,eAGlF9P,OAAOssB,eAAekiC,EAAchmD,UAAW,cAAe,CAC1D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU7E,GACb,OAAOvO,KAAKk0D,YAAY3lD,MAGhCjL,OAAOssB,eAAekiC,EAAchmD,UAAW,iBAAkB,CAC7D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,MAAO,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,UAG1D9P,OAAOssB,eAAekiC,EAAchmD,UAAW,mBAAoB,CAC/D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU7E,GACb,OAAOvO,KAAKm0D,iBAAiB5lD,MAGrCjL,OAAOssB,eAAekiC,EAAchmD,UAAW,QAAS,CACpD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUkf,EAAQrf,GAErB,GAAIqf,aAAkB5sB,KAAM,CACxB,OAAO4sB,EAGX,GAAIT,GAAeS,GAAS,CACxB,OAAO,IAAI5sB,KAAK4sB,GAGpB,IAAKkN,GAAelN,GAAS,CACzBA,EAASA,EAAO5wB,WAGpB,IAAIyV,EAEJ,IAAI8qC,EAAM,GAEVhvC,EAASm7C,GAAmBn7C,GAE5BA,EAASA,EAAOzE,OAAO,EAAG8jB,EAAOtuB,QAEjC,IAAI0tB,EAAO1xB,KAAKquD,YAAYp7C,GAE5B,IAAImhD,EAAgB,CAChB/3B,MAAS,EACTg4B,OAAU,EACVC,OAAU,EACVC,OAAU,EACV5D,OAAU,EACV6D,YAAe,EACfC,WAAc,EACdC,cAAiB,EACjBC,aAAgB,EAChBl5B,KAAQ,EACRm5B,SAAY,EACZx4B,MAAS,EACTy4B,WAAc,EACdC,aAAgB,EAChBC,WAAc,EACdC,aAAgB,EAChBnE,QAAW,EACXC,QAAW,EACXC,aAAgB,EAChBkE,mBAAsB,EACtBC,IAAO,EACPC,MAAS,EACT9C,WAAc,EACd+C,KAAQ,GAGZ,IAAIC,EAAY,CACZh5B,KAAQ,KACRs0B,MAAS,EACTl1B,IAAO,EACPm1B,KAAQ,EACRC,OAAU,EACVC,OAAU,EACVC,YAAe,EACfsB,UAAa,KACbd,OAAU,EACVz2B,IAAO96B,KAAKk5B,MAAM4B,KAGtB,IAAIw6B,EAAc,EAClB,IAAI/mD,EAAQ,EAEZ,IAAK,IAAIvN,EAAI,EAAGA,EAAI0wB,EAAKswB,MAAMh+C,OAAQhD,IAAK,CAExCuN,EAAQvN,EAAIs0D,EAAc,EAC1B,OAAQ5jC,EAAKswB,MAAMhhD,IACf,IAAK,OACL,IAAK,OACDihD,GAAO,aACPmS,EAAc/3B,KAAO9tB,EACrB,MACJ,IAAK,MACL,IAAK,MACD0zC,GAAO,aACPmS,EAAcC,MAAQ9lD,EACtB,MACJ,IAAK,KACL,IAAK,KACD0zC,GAAO,aACPmS,EAAcE,MAAQ/lD,EACtB,MACJ,IAAK,IACL,IAAK,IACD0zC,GAAO,aACPmS,EAAcG,MAAQhmD,EACtB,MACJ,IAAK,OACD0zC,GAAO,IAAMjiD,KAAKu1D,cAAcv1D,KAAKg0D,WAAW3uD,KAAK,KAAO,IAC5D+uD,EAAcK,UAAYlmD,EAC1B,MACJ,IAAK,MACD0zC,GAAO,IAAMjiD,KAAKu1D,cAAcv1D,KAAKi0D,gBAAgB5uD,KAAK,KAAO,IACjE+uD,EAAcI,WAAajmD,EAC3B,MACJ,IAAK,KACL,IAAK,IACD0zC,GAAO,sBACPmS,EAAczD,MAAQpiD,EACtB,MACJ,IAAK,KACL,IAAK,IACD0zC,GAAO,sBACPmS,EAAch4B,KAAO7tB,EACrB,MACJ,IAAK,KACL,IAAK,IACD0zC,GAAO,sBACPmS,EAAc34B,IAAMltB,EACpB,MACJ,IAAK,MACL,IAAK,KACL,IAAK,IACD0zC,GAAO,+BACPmS,EAAcQ,QAAUrmD,EACxB,MACJ,IAAK,OACD0zC,GAAO,IAAMjiD,KAAKu1D,cAAcv1D,KAAKk0D,aAAa7uD,KAAK,KAAO,IAC9D+uD,EAAcO,YAAcpmD,EAC5B,MACJ,IAAK,MACD0zC,GAAO,IAAMjiD,KAAKu1D,cAAcv1D,KAAKm0D,kBAAkB9uD,KAAK,KAAO,IACnE+uD,EAAcM,aAAenmD,EAC7B,MACJ,IAAK,MACL,IAAK,KACL,IAAK,IAED0zC,GAAO,IAAMjiD,KAAKu1D,cAAc,CAAC,KAAM,KAAM,OAAU,OAAU,IAAK,MAAMlwD,KAAK,KAAO,IACxF+uD,EAAcc,GAAK3mD,EACnB,MACJ,IAAK,KACL,IAAK,IACD0zC,GAAO,sBACPmS,EAAcY,YAAczmD,EAC5B,MACJ,IAAK,KACL,IAAK,IACD0zC,GAAO,sBACPmS,EAAcS,UAAYtmD,EAC1B,MACJ,IAAK,KACL,IAAK,IACD0zC,GAAO,sBACPmS,EAAcU,YAAcvmD,EAC5B,MACJ,IAAK,KACL,IAAK,IACD0zC,GAAO,sBACPmS,EAAcW,UAAYxmD,EAC1B,MACJ,IAAK,KACL,IAAK,IACD0zC,GAAO,sBACPmS,EAAcvD,OAAStiD,EACvB,MACJ,IAAK,KACL,IAAK,IACD0zC,GAAO,sBACPmS,EAActD,OAASviD,EACvB,MACJ,IAAK,MACL,IAAK,KACL,IAAK,IACD0zC,GAAO,+BACPmS,EAAcrD,YAAcxiD,EAC5B6lD,EAAca,kBAAoBvjC,EAAKswB,MAAMhhD,GAAGgD,OAChD,MACJ,IAAK,MACL,IAAK,KACL,IAAK,IACDi+C,GAAO,+BACPmS,EAAcrD,YAAcxiD,EAC5B,MACJ,IAAK,IACD0zC,GAAO,cACPmS,EAAc/B,UAAY9jD,EAC1B,MACJ,IAAK,IACD0zC,GAAO,8BACPmS,EAAce,KAAO5mD,EACrB,MACJ,IAAK,KACD0zC,GAAO,4BACPmS,EAAce,KAAO5mD,EACrB,MACJ,IAAK,IACD0zC,GAAO,0HACPmS,EAAcgB,IAAM7mD,EACpB+mD,GAAe,EACf,MACJ,IAAK,IACL,IAAK,OACL,IAAK,MACL,IAAK,KACL,IAAK,IACL,IAAK,QACL,IAAK,IACL,IAAK,QACL,IAAK,OACL,IAAK,MACL,IAAK,KACL,IAAK,IACL,IAAK,QACL,IAAK,OACL,IAAK,MACL,IAAK,KACL,IAAK,IACL,IAAK,OACL,IAAK,MACL,IAAK,KACL,IAAK,IACL,IAAK,IAEDA,IACA,MAERrT,GAAO,UAGX,IAAIuT,EAAQ,IAAI5wD,OAAOq9C,GACvB,IAAInzB,EAAUwD,EAAOmF,MAAM+9B,GAC3B,GAAI1mC,EAAS,CAGT,GAAIslC,EAAc/3B,MAAQ,EAAG,CACzBg5B,EAAUh5B,KAAOrzB,SAAS8lB,EAAQslC,EAAc/3B,OAGpD,GAAI+3B,EAAcC,OAAS,EAAG,CAC1B,IAAIx/C,EAAM7L,SAAS8lB,EAAQslC,EAAcC,QACzCx/C,GAAO,IACPwgD,EAAUh5B,KAAOxnB,EAGrB,GAAIu/C,EAAcE,OAAS,EAAG,CAC1B,IAAIz/C,EAAM7L,SAAS8lB,EAAQslC,EAAcE,QACzC,GAAIz/C,EAAM,GAAI,CACVA,GAAO,QAEN,CACDA,GAAO,IAEXwgD,EAAUh5B,KAAOxnB,EAGrB,GAAIu/C,EAAcG,OAAS,EAAG,CAC1B,IAAI1/C,EAAM7L,SAAS8lB,EAAQslC,EAAcG,QACzC1/C,EAAMvJ,KAAK+D,OAAO,IAAI3J,MAAOq1B,cAAiB,IAAM,GAAKlmB,EACzDwgD,EAAUh5B,KAAOxnB,EAGrB,GAAIu/C,EAAcK,WAAa,EAAG,CAC9BY,EAAU1E,MAAQ3wD,KAAKy1D,aAAa3mC,EAAQslC,EAAcK,YAG9D,GAAIL,EAAcI,YAAc,EAAG,CAC/Ba,EAAU1E,MAAQ3wD,KAAK01D,kBAAkB5mC,EAAQslC,EAAcI,aAGnE,GAAIJ,EAAczD,OAAS,EAAG,CAC1B0E,EAAU1E,MAAQ3nD,SAAS8lB,EAAQslC,EAAczD,QAAU,EAK/D,GAAKyD,EAAch4B,MAAQ,GAAOg4B,EAAc34B,OAAS,EAAI,CAIzD45B,EAAU1E,MAAQ,EAClB0E,EAAU55B,IAAMk6B,GAAsB3sD,SAAS8lB,EAAQslC,EAAch4B,OAAQi5B,EAAUh5B,KAAM,EAAGr8B,KAAKk5B,MAAM4B,KAG/G,GAAIs5B,EAAc34B,KAAO,EAAG,CACxB45B,EAAU55B,IAAMzyB,SAAS8lB,EAAQslC,EAAc34B,MAGnD,GAAI24B,EAAcQ,SAAW,EAAG,CAC5BS,EAAU1E,MAAQ,EAClB0E,EAAU55B,IAAMzyB,SAAS8lB,EAAQslC,EAAcQ,UAGnD,GAAIR,EAAcS,WAAa,EAAG,CAC9BQ,EAAUzE,KAAO5nD,SAAS8lB,EAAQslC,EAAcS,YAGpD,GAAIT,EAAcW,WAAa,EAAG,CAC9BM,EAAUzE,KAAO5nD,SAAS8lB,EAAQslC,EAAcW,YAAc,EAGlE,GAAIX,EAAcU,aAAe,EAAG,CAChC,IAAIjgD,EAAM7L,SAAS8lB,EAAQslC,EAAcU,cACzC,GAAIjgD,GAAO,GAAI,CACXA,EAAM,EAEV,GAAKu/C,EAAcc,IAAM,IAAOl1D,KAAK41D,KAAK9mC,EAAQslC,EAAcc,KAAM,CAClErgD,GAAO,GAEXwgD,EAAUzE,KAAO/7C,EAGrB,GAAIu/C,EAAcY,aAAe,EAAG,CAChC,IAAIngD,EAAM7L,SAAS8lB,EAAQslC,EAAcY,cACzC,GAAIngD,GAAO,GAAI,CACXA,EAAM,EAEV,GAAKu/C,EAAcc,IAAM,IAAOl1D,KAAK41D,KAAK9mC,EAAQslC,EAAcc,KAAM,CAClErgD,GAAO,GAEXwgD,EAAUzE,KAAO/7C,EAGrB,GAAIu/C,EAAcvD,QAAU,EAAG,CAC3BwE,EAAUxE,OAAS7nD,SAAS8lB,EAAQslC,EAAcvD,SAGtD,GAAIuD,EAActD,QAAU,EAAG,CAC3BuE,EAAUvE,OAAS9nD,SAAS8lB,EAAQslC,EAActD,SAGtD,GAAIsD,EAAcrD,aAAe,EAAG,CAChC,IAAIl8C,EAAM7L,SAAS8lB,EAAQslC,EAAcrD,cACzC,GAAIqD,EAAca,mBAAqB,EAAG,CACtCpgD,GAAO,QAEN,GAAIu/C,EAAca,mBAAqB,EAAG,CAC3CpgD,GAAO,IAEXwgD,EAAUtE,YAAcl8C,EAG5B,GAAIu/C,EAAc/B,WAAa,EAAG,CAC9BgD,EAAUhD,UAAYrpD,SAAS8lB,EAAQslC,EAAc/B,YACrD,IAAIwD,EAAK,IAAInwD,KAAK2vD,EAAUhD,WAC5BgD,EAAUh5B,KAAOw5B,EAAG/5B,iBACpBu5B,EAAU1E,MAAQkF,EAAGvD,cACrB+C,EAAU55B,IAAMo6B,EAAGj6B,aACnBy5B,EAAUzE,KAAOiF,EAAGtD,cACpB8C,EAAUxE,OAASgF,EAAGlE,gBACtB0D,EAAUvE,OAAS+E,EAAGrD,gBACtB6C,EAAUtE,YAAc8E,EAAGpD,qBAG/B,GAAI2B,EAAce,MAAQ,EAAG,CACzBE,EAAU9D,OAASvxD,KAAK81D,sBAAsB,IAAIpwD,KAAK2vD,EAAUh5B,KAAMg5B,EAAU1E,MAAO0E,EAAU55B,KAAM3M,EAAQslC,EAAce,OAGlI,GAAIf,EAAcgB,KAAO,EAAG,CACxBC,EAAUh5B,KAAOgnB,GAAev0B,EAAQslC,EAAcgB,IAAM,IAC5DC,EAAU1E,MAAQtN,GAAev0B,EAAQslC,EAAcgB,IAAM,IAAM,EACnEC,EAAU55B,IAAM4nB,GAAev0B,EAAQslC,EAAcgB,IAAM,IAC3DC,EAAUzE,KAAOvN,GAAev0B,EAAQslC,EAAcgB,IAAM,IAC5DC,EAAUxE,OAASxN,GAAev0B,EAAQslC,EAAcgB,IAAM,IAC9DC,EAAUvE,OAASzN,GAAev0B,EAAQslC,EAAcgB,IAAM,IAC9DC,EAAUtE,YAAc1N,GAAev0B,EAAQslC,EAAcgB,IAAM,IACnE,GAAItmC,EAAQslC,EAAcgB,IAAM,IAAM,KAAOtmC,EAAQslC,EAAcgB,IAAM,IAAM,IAAK,CAChFC,EAAUv6B,IAAM,UAEf,GAAIhM,EAAQslC,EAAcgB,IAAM,IAAM,GAAI,CAC3CC,EAAU9D,OAASvxD,KAAK81D,sBAAsB,IAAIpwD,KAAK2vD,EAAUh5B,KAAMg5B,EAAU1E,MAAO0E,EAAU55B,KAAM3M,EAAQslC,EAAcgB,IAAM,KAI5I,GAAIC,EAAUv6B,IAAK,CACf3jB,EAAM,IAAIzR,KAAKA,KAAK41B,IAAI+5B,EAAUh5B,KAAMg5B,EAAU1E,MAAO0E,EAAU55B,IAAK45B,EAAUzE,KAAMyE,EAAUxE,OAAQwE,EAAUvE,OAAQuE,EAAUtE,kBAErI,CACD55C,EAAM,IAAIzR,KAAK2vD,EAAUh5B,KAAMg5B,EAAU1E,MAAO0E,EAAU55B,IAAK45B,EAAUzE,KAAMyE,EAAUxE,OAASwE,EAAU9D,OAAQ8D,EAAUvE,OAAQuE,EAAUtE,kBAGnJ,CAGD55C,EAAM,IAAIzR,KAAK4sB,GAEnB,OAAOnb,KAGf7T,OAAOssB,eAAekiC,EAAchmD,UAAW,wBAAyB,CACpE4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUynB,EAAMs6B,GACnB,IAAI/hD,EAAQ+hD,EAAK19B,MAAM,kCACvB,GAAIrkB,EAAO,CACP,IAAIqkB,EAAQ09B,EAAK19B,MAAM,kCACvB,IAAI7N,EAAM6N,EAAM,GAChB,IAAIm5B,EAAOn5B,EAAM,GACjB,IAAIo5B,EAASp5B,EAAM,GACnB,IAAI85B,EAASvoD,SAAS4nD,GAAQ,GAAK5nD,SAAS6nD,GAI5C,GAAIjnC,GAAO,IAAK,CACZ2nC,IAAW,EAGf,IAAIwE,GAAkBl7B,GAAQ,IAAIn1B,MAAQw1B,oBAC1C,IAAIF,EAAOu2B,EAASwE,EACpB,OAAO/6B,EAEX,OAAO,KASf13B,OAAOssB,eAAekiC,EAAchmD,UAAW,eAAgB,CAC3D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUA,GAEb,IAAIu9C,EAAQ3wD,KAAKg0D,UAAUjwD,QAAQqP,GACnC,GAAIu9C,GAAS,EAAG,CACZ,OAAOA,EAGX,IAAK3wD,KAAKk5B,MAAMyU,SAASqoB,YAAa,CAClCrF,EAAQ3wD,KAAKk5B,MAAMyU,SAASsoB,aAAaj2D,KAAKg0D,WAAWjwD,QAAQqP,GACjE,GAAIu9C,GAAS,EAAG,CACZ,OAAOA,GAGf,OAAO,KASfrtD,OAAOssB,eAAekiC,EAAchmD,UAAW,oBAAqB,CAChE4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUA,GAEb,IAAIu9C,EAAQ3wD,KAAKi0D,eAAelwD,QAAQqP,GACxC,GAAIu9C,GAAS,EAAG,CACZ,OAAOA,EAGXA,EAAQ3wD,KAAKg0D,UAAUjwD,QAAQqP,GAC/B,GAAIu9C,GAAS,EAAG,CACZ,OAAOA,EAGX,GAAI3wD,KAAKk5B,MAAMyU,WAAa3tC,KAAKk5B,MAAMyU,SAASqoB,YAAa,CACzDrF,EAAQ3wD,KAAKk5B,MAAMyU,SAASsoB,aAAaj2D,KAAKi0D,gBAAgBlwD,QAAQqP,GACtE,GAAIu9C,GAAS,EAAG,CACZ,OAAOA,GAGf,OAAO,KAUfrtD,OAAOssB,eAAekiC,EAAchmD,UAAW,OAAQ,CACnD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUA,GACb,IAAI8iD,EAAOl2D,KAAKu1D,cAAc,CAAC,KAAM,OAAQ,MAC7C,OAAOW,EAAKnyD,QAAQqP,EAAMjM,gBAAkB,KASpD7D,OAAOssB,eAAekiC,EAAchmD,UAAW,gBAAiB,CAC5D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU8iD,GACb,IAAI/+C,EAAM,GACV,IAAK,IAAInW,EAAI,EAAGA,EAAIk1D,EAAKlyD,OAAQhD,IAAK,CAElC,GAAIhB,KAAKk5B,MAAMyU,SAAU,CACrBx2B,EAAI3R,KAAK2wD,GAAqBn2D,KAAKiuD,GAAGiI,EAAKl1D,UAE1C,CACDmW,EAAI3R,KAAK2wD,GAAqBD,EAAKl1D,MAG3C,OAAOmW,KAGf,OAAO26C,EAj9BM,CAk9Bf/oB,IC78BF,IAAIqtB,GAAmC,SAAUlmC,GAC7C1F,GAAU4rC,EAAmBlmC,GAC7B,SAASkmC,IACL,IAAIjmC,EAAQD,IAAW,MAAQA,EAAOnkB,MAAM/L,KAAMgM,YAAchM,KAIhEsD,OAAOssB,eAAeO,EAAO,eAAgB,CACzCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,CACHijD,EAAK,IACLtoD,EAAK,IACLuoD,EAAK,IACLC,EAAK,IACL5pD,EAAK,IACLtM,EAAK,OAGb,OAAO8vB,EAEX7sB,OAAOssB,eAAewmC,EAAkBtqD,UAAW,eAAgB,CAC/D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAIojD,EAAe,wBACnB,IAAIC,EAAU,mBACd,IAAIC,EAAU,mBACd,IAAIC,EAAQ,iBACZ,IAAIC,EAAO,gBACX,IAAIC,EAAQ,iBACZ,IAAIC,EAAS,kBACb,IAAIC,EAAQ,iBACZ,IAAIC,EAAU,UACd,IAAIC,EAAU,UACd,IAAIC,EAAQ,QACZ,IAAIC,EAAO,OACX,IAAIC,EAAQ,QACZ,IAAIC,EAAS,QACb,IAAIC,EAAQ,QAEZt3D,KAAK2tD,YAAY,eAAgB,GACjC3tD,KAAK2tD,YAAY,WAAY,UAC7B3tD,KAAK2tD,YAAY,kBAAmB,CAChCoD,YAAe,CACXA,YAAe/wD,KAAKiuD,GAAGuI,GACvB1F,OAAU9wD,KAAKiuD,GAAIuI,EAAeQ,GAClCnG,OAAU7wD,KAAKiuD,GAAIuI,EAAeS,GAClCrG,KAAQ5wD,KAAKiuD,GAAIuI,EAAeU,GAChCz7B,IAAOz7B,KAAKiuD,GAAIuI,EAAeW,GAC/B/6B,KAAQp8B,KAAKiuD,GAAIuI,EAAeY,GAChCzG,MAAS3wD,KAAKiuD,GAAIuI,EAAea,GACjCh7B,KAAQr8B,KAAKiuD,GAAIuI,EAAec,IAEpCxG,OAAU,CACNA,OAAU9wD,KAAKiuD,GAAE,GACjB4C,OAAU7wD,KAAKiuD,GAAIwI,EAAUQ,GAC7BrG,KAAQ5wD,KAAKiuD,GAAIwI,EAAUS,GAC3Bz7B,IAAOz7B,KAAKiuD,GAAIwI,EAAUU,GAC1B/6B,KAAQp8B,KAAKiuD,GAAIwI,EAAUW,GAC3BzG,MAAS3wD,KAAKiuD,GAAIwI,EAAUY,GAC5Bh7B,KAAQr8B,KAAKiuD,GAAIwI,EAAUa,IAE/BzG,OAAU,CACNA,OAAU7wD,KAAKiuD,GAAE,GACjB2C,KAAQ5wD,KAAKiuD,GAAIyI,EAAUQ,GAC3Bz7B,IAAOz7B,KAAKiuD,GAAIyI,EAAUS,GAC1B/6B,KAAQp8B,KAAKiuD,GAAIyI,EAAUU,GAC3BzG,MAAS3wD,KAAKiuD,GAAIyI,EAAUW,GAC5Bh7B,KAAQr8B,KAAKiuD,GAAIyI,EAAUY,IAE/B1G,KAAQ,CACJA,KAAQ5wD,KAAKiuD,GAAE,GACfxyB,IAAOz7B,KAAKiuD,GAAI0I,EAAQQ,GACxB/6B,KAAQp8B,KAAKiuD,GAAI0I,EAAQS,GACzBzG,MAAS3wD,KAAKiuD,GAAI0I,EAAQU,GAC1Bh7B,KAAQr8B,KAAKiuD,GAAI0I,EAAQW,IAE7B77B,IAAO,CACHA,IAAOz7B,KAAKiuD,GAAE,GACd7xB,KAAQp8B,KAAKiuD,GAAI2I,EAAOQ,GACxBzG,MAAS3wD,KAAKiuD,GAAI2I,EAAOS,GACzBh7B,KAAQr8B,KAAKiuD,GAAI2I,EAAOU,IAE5Bl7B,KAAQ,CACJA,KAAQp8B,KAAKiuD,GAAE,GACf0C,MAAS3wD,KAAKiuD,GAAI4I,EAAQQ,GAC1Bh7B,KAAQr8B,KAAKiuD,GAAI4I,EAAQS,IAE7B3G,MAAS,CACLA,MAAS3wD,KAAKiuD,GAAE,GAChB5xB,KAAQr8B,KAAKiuD,GAAI6I,EAASQ,IAE9Bj7B,KAAQ,CACJA,KAAQr8B,KAAKiuD,GAAG8I,MAGxB7mC,EAAOpkB,UAAU69B,aAAaxgC,KAAKnJ,SAG3CsD,OAAOssB,eAAewmC,EAAkBtqD,UAAW,iBAAkB,CACjE4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH8c,EAAOpkB,UAAUmmC,eAAe9oC,KAAKnJ,SAc7CsD,OAAOssB,eAAewmC,EAAkBtqD,UAAW,SAAU,CACzD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUA,EAAOH,EAAQ0pB,GAE5B,IAAI46B,EAAW56B,GAAQ38B,KAAKsT,IAAI,YAEhC,UAAWL,IAAW,aAAeA,IAAW,GAAI,CAChD,GAAIjT,KAAKsT,IAAI,mBAAqB,KAAM,CACpCL,EAASjT,KAAKsT,IAAI,sBAEjB,CACDL,EAASjT,KAAKu6B,UAAU8oB,GAAejwC,GAAQ8E,UAAWq/C,IAIlEtkD,EAASm7C,GAAmBn7C,GAE5B,IAAIye,EAAO1xB,KAAKquD,YAAYp7C,EAAQskD,GAGpC,IAAIjlC,EAAShjB,OAAO8D,GAEpB,IAAIk7C,EACJ,GAAIh8B,EAAStyB,KAAKsT,IAAI,gBAAiB,CACnCg7C,EAAU58B,EAAK68B,cAEd,GAAIj8B,EAAStyB,KAAKsT,IAAI,gBAAiB,CACxCg7C,EAAU58B,EAAKrE,aAEd,CACDihC,EAAU58B,EAAK88B,KAGnB,IAAIL,EAAYnuD,KAAK4uD,YAAYt8B,EAAQg8B,GAEzC,GAAIA,EAAQjrC,QAAU,GAAI,CACtB8qC,EAAY,IAAMG,EAAQjrC,MAAQ,IAAM8qC,EAAY,MAExD,OAAOA,KAWf7qD,OAAOssB,eAAewmC,EAAkBtqD,UAAW,cAAe,CAC9D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUH,EAAQ0pB,GAOrB,IAAIxM,EAAQnwB,KAEZ,IAAIu3D,EAAW56B,GAAQ38B,KAAKsT,IAAI,YAEhC,IAAIoe,EAAO,CACP68B,SAAY,CACRlrC,MAAS,GACTiB,SAAY,GACZ09B,MAAS,GACT1vB,OAAU,GACVilC,SAAYA,EACZjqC,OAAU,MACVkqC,SAAY,OAEhBnqC,SAAY,CACRhK,MAAS,GACTiB,SAAY,GACZ09B,MAAS,GACT1vB,OAAU,GACVilC,SAAYA,EACZjqC,OAAU,MACVkqC,SAAY,OAEhBhJ,KAAQ,CACJnrC,MAAS,GACTiB,SAAY,GACZ09B,MAAS,GACT1vB,OAAU,GACVilC,SAAYA,EACZjqC,OAAU,MACVkqC,SAAY,QAIpBvkD,EAASA,EAAOpN,QAAQ,KAAMspD,IAE9B,IAAInN,EAAQ/uC,EAAO/F,MAAM,KACzBwkB,EAAK68B,SAASj8B,OAAS0vB,EAAM,GAC7B,UAAWA,EAAM,KAAO,YAAa,CACjCtwB,EAAK88B,KAAO98B,EAAK68B,aAEhB,CACD78B,EAAK88B,KAAKl8B,OAAS0vB,EAAM,GAE7B,UAAWA,EAAM,KAAO,YAAa,CACjCtwB,EAAKrE,SAAWqE,EAAK68B,aAEpB,CACD78B,EAAKrE,SAASiF,OAAS0vB,EAAM,GAGjC5oB,GAAa1H,GAAM,SAAU09B,EAAO34C,GAEhC,GAAIA,EAAK6W,OAAQ,CACb,OASJ,IAAI+hC,EAAa54C,EAAK6b,OAEtB,IAAImlC,EAAO,GACXA,EAAOhhD,EAAK6b,OAAOmF,MAAM,iBACzB,GAAIggC,GAAQA,EAAKzzD,QAAUyzD,EAAK,KAAO,GAAI,CACvCpI,EAAa54C,EAAK6b,OAAO9jB,OAAOipD,EAAK,GAAGzzD,QACxCyS,EAAK4M,MAAQo0C,EAAK,GAGtB,IAAItW,EAASL,GAAcx+C,MAAM+sD,EAAY,MAC7C,IAAK,IAAIruD,EAAI,EAAGA,EAAImgD,EAAOn9C,OAAQhD,IAAK,CACpC,IAAIsB,EAAQ6+C,EAAOngD,GAEnBsB,EAAMyN,KAAOzN,EAAMyN,KAAKlK,QAAQspD,GAAoB,KACpD,GAAI7sD,EAAMR,OAAS,QAAS,CAMxB,GAAIQ,EAAMyN,KAAK0nB,MAAM,sBAAuB,CACxChhB,EAAK+gD,SAAW,KAChBl1D,EAAMyN,KAAOzN,EAAMyN,KAAKlK,QAAQ,uBAAwB,MAG5D,IAAIipB,EAAUxsB,EAAMyN,KAAK0nB,MAAM,8CAC/B,GAAI3I,EAAS,CAET,IAAK,IAAIlhB,EAAI,EAAGA,EAAIkhB,EAAQ9qB,OAAQ4J,IAAK,CAErC,GAAIkhB,EAAQlhB,IAAM,KAAM,CACpBkhB,EAAQlhB,GAAKuiB,EAAMunC,aAAa5oC,EAAQlhB,IAE5C6I,EAAKurC,MAAMx8C,KAAKspB,EAAQlhB,IACxBtL,EAAMyN,KAAOzN,EAAMyN,KAAKlK,QAAQipB,EAAQlhB,GAAIwzC,MAKxD3qC,EAAK6N,UAAYhiB,EAAMyN,KAQ3B0G,EAAK6W,OAAS,QAKlB,OAAOoE,KAUfpuB,OAAOssB,eAAewmC,EAAkBtqD,UAAW,cAAe,CAC9D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUA,EAAOk7C,GAEpB,IAAIjhC,GAAYihC,EAAQkJ,UAAapkD,EAAQpT,KAAKsT,IAAI,gBACtDF,EAAQ9H,KAAK8B,IAAIgG,GAEjB,IAAIukD,EAAS33D,KAAK43D,YAAYxkD,EAAOk7C,EAAQiJ,UAE7C,IAAIpgD,EAAMm3C,EAAQhqC,SAElB,IAAK,IAAItjB,EAAI,EAAG0xB,EAAM47B,EAAQtM,MAAMh+C,OAAQhD,EAAI0xB,EAAK1xB,IAAK,CAEtD,IAAIkiD,EAAOoL,EAAQtM,MAAMhhD,GACzB,IAAI62D,EAAO73D,KAAK83D,YAAY5U,EAAK10C,OAAO,EAAG,IAC3C,IAAIgf,EAAS01B,EAAKl/C,OAElB,IAAIgsD,EAAO1kD,KAAK+D,MAAMsoD,EAAS33D,KAAK+3D,cAAcF,IAClD1gD,EAAMA,EAAItR,QAAQu7C,GAAmBjiB,GAAiB6wB,EAAMxiC,EAAQ,MAEpEmqC,GAAU3H,EAAOhwD,KAAK+3D,cAAcF,GAGxC,GAAIxqC,EAAU,CACVlW,EAAM,IAAMA,EAEhB,OAAOA,KAUf7T,OAAOssB,eAAewmC,EAAkBtqD,UAAW,cAAe,CAC9D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUA,EAAOmkD,GACpB,OAAOnkD,EAAQpT,KAAK+3D,cAAcR,MAG1Cj0D,OAAOssB,eAAewmC,EAAkBtqD,UAAW,cAAe,CAC9D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUpG,GACb,OAAQA,GACJ,IAAK,IACD,MAAO,cACX,IAAK,IACD,MAAO,SACX,IAAK,IACD,MAAO,SACX,IAAK,IACD,MAAO,OACX,IAAK,IACD,MAAO,MACX,IAAK,IACD,MAAO,OACX,IAAK,IACD,MAAO,QACX,IAAK,IACD,MAAO,WAwBvB1J,OAAOssB,eAAewmC,EAAkBtqD,UAAW,YAAa,CAC5D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUA,EAAO4kD,EAAUT,GAE9B,GAAIv3D,KAAKsT,IAAI,mBAAqB,KAAM,CACpC,OAAOtT,KAAKsT,IAAI,kBAGpB,IAAKikD,EAAU,CACXA,EAAWv3D,KAAKsT,IAAI,YAExB,GAAI0kD,GAAY,MAAQ5kD,GAAS4kD,EAAU,CACvC5kD,EAAQ9H,KAAK8B,IAAIgG,GACjB4kD,EAAW1sD,KAAK8B,IAAI4qD,GACpB,IAAIC,EAAUj4D,KAAKk4D,aAAa5sD,KAAKyY,IAAI3Q,EAAO4kD,GAAWT,GAG3D,OAAOv3D,KAAKsT,IAAI,mBAAmBikD,GAAUU,OAE5C,CACD,IAAIJ,EAAO73D,KAAKk4D,aAAa9kD,EAAOmkD,GACpC,OAAOv3D,KAAKsT,IAAI,mBAAmBikD,GAAUM,OAYzDv0D,OAAOssB,eAAewmC,EAAkBtqD,UAAW,eAAgB,CAC/D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUA,EAAOmkD,GAEpB,IAAKA,EAAU,CACXA,EAAWv3D,KAAKsT,IAAI,YAGxB,IAAI6kD,EACJ,IAAI1kD,EAAKzT,KAAK6yD,gBAAgBz/C,EAAOmkD,GACrCa,GAAqBp4D,KAAKq4D,kBAAkB,SAAUrkD,EAAKa,GACvD,GAAIb,GAAOujD,GAAYY,EAAa,CAChC,IAAIjrC,EAAMzZ,EAAKoB,EACf,GAAIqY,GAAO,EAAG,CACV,IAAKirC,EAAa,CACdA,EAAcnkD,EAElB,OAAO,MAEXmkD,EAAcnkD,EAElB,OAAO,QAEX,OAAOmkD,KAUf70D,OAAOssB,eAAewmC,EAAkBtqD,UAAW,kBAAmB,CAClE4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUA,EAAOmkD,GAEpB,IAAKA,EAAU,CACXA,EAAWv3D,KAAKsT,IAAI,YAExB,OAAOF,EAAQpT,KAAK+3D,cAAcR,MAG1Cj0D,OAAOssB,eAAewmC,EAAkBtqD,UAAW,gBAAiB,CAChE4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUklD,GACb,OAAOt4D,KAAKq4D,iBAAiBC,MAGrCh1D,OAAOssB,eAAewmC,EAAkBtqD,UAAW,iBAAkB,CACjE4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,MAAO,CACH29C,YAAe,EACfD,OAAU,IACVD,OAAU,IACVD,KAAQ,KACRn1B,IAAO,MACPW,KAAQ,OACRu0B,MAAS,OACTt0B,KAAQ,YAIpB,OAAO+5B,EA1fU,CA2fnBrtB,IC9cF,MAAAwvB,GAAe,CACXjF,eAAkB,EAKlBkF,kBAAqB,IACrBC,mBAAsB,IAEtBC,eAAkB,KAClBC,eAAkB,IASlBC,qBAAwB,IACxBC,qBAAwB,IACxBC,qBAAwB,IACxBC,sBAAyB,IACzBC,sBAAyB,IACzBC,sBAAyB,IACzBC,sBAAyB,IACzBC,sBAAyB,IACzBC,uBAA0B,IAC1BC,uBAA0B,IAC1BC,uBAA0B,IAC1BC,wBAA2B,IAC3BC,wBAA2B,IAC3BC,wBAA2B,IAC3BC,wBAA2B,IAC3BC,wBAA2B,IAC3BC,eAAkB,IAClBC,gBAAmB,KACnBC,gBAAmB,KACnBC,gBAAmB,KACnBC,gBAAmB,KACnBC,gBAAmB,KAYnBC,MAAS,aACTC,kBAAqB,YACrBC,uBAA0B,eAC1BC,aAAgB,WAChBC,kBAAqB,WACrBC,aAAgB,QAChBC,kBAAqB,uBACrBC,WAAc,QACdC,gBAAmB,uBACnBC,UAAa,SACbC,eAAkB,eAClBC,WAAc,KACdC,gBAAmB,eACnBC,YAAe,MACfC,iBAAoB,YACpBC,WAAc,OAsBdC,sBAAyB,MACzBC,6BAAgC,SAChCC,6BAAgC,YAChCC,2BAA8B,eAC9BC,0BAA6B,iBAC7BC,2BAA8B,iBAC9BC,4BAA+B,uBAC/BC,2BAA8B,6BAC9BC,iBAAoB,KACpBC,wBAA2B,QAC3BC,sBAAyB,WACzBC,qBAAwB,gBACxBC,sBAAyB,gBACzBC,uBAA0B,sBAC1BC,sBAAyB,4BACzBC,iBAAoB,KACpBC,sBAAyB,QACzBC,qBAAwB,aACxBC,sBAAyB,aACzBC,uBAA0B,mBAC1BC,sBAAyB,yBACzBC,eAAkB,QAClBC,mBAAsB,aACtBC,oBAAuB,aACvBC,qBAAwB,mBACxBC,oBAAuB,yBACvBC,cAAiB,OACjBC,mBAAsB,OACtBC,oBAAuB,aACvBC,mBAAsB,mBACtBC,eAAkB,OAClBC,qBAAwB,OACxBC,oBAAuB,OACvBC,gBAAmB,OACnBC,qBAAwB,aACxBC,eAAkB,OAElBC,QAAW,KACXC,QAAW,KASXvvD,EAAK,GACL8c,EAAK,GACL0yC,GAAM,GACNC,GAAM,GACNC,OAAQ,GACRC,OAAQ,GAmBRC,QAAW,GACXC,SAAY,GACZC,MAAS,GACTC,MAAS,GACTC,IAAO,GACPC,KAAQ,GACRC,KAAQ,GACRC,OAAU,GACVC,UAAa,GACbC,QAAW,GACXC,SAAY,GACZC,SAAY,GACZC,IAAO,GACPC,IAAO,GACPC,IAAO,GACPC,IAAO,GACPC,aAAc,MACdC,IAAO,GACPC,IAAO,GACPC,IAAO,GACPC,IAAO,GACPC,IAAO,GACPC,IAAO,GACPC,IAAO,GAEPC,OAAU,GACVC,OAAU,GACVC,QAAW,GACXC,UAAa,GACbC,SAAY,GACZC,OAAU,GACVC,SAAY,GACZC,IAAO,GACPC,IAAO,GACPC,IAAO,GACPC,IAAO,GACPC,IAAO,GACPC,IAAO,GACPC,IAAO,GAUPC,SAAY,SAAUzkC,GAClB,IAAItkB,EAAM,KACV,GAAKskB,EAAM,IAAQA,EAAM,GAAK,CAC1B,OAAQA,EAAM,IACV,KAAK,EACDtkB,EAAM,KACN,MACJ,KAAK,EACDA,EAAM,KACN,MACJ,KAAK,EACDA,EAAM,KACN,OAGZ,OAAOA,GAIXgpD,WAAY,GAEZC,KAAQ,GACRC,KAAQ,GAERC,OAAU,GAEVC,wBAAyB,GAEzBC,QAAW,GAGXC,KAAQ,GAIRC,MAAS,GACTC,eAAgB,GAChBC,YAAa,GACbC,YAAa,GACbC,cAAe,GACfC,cAAe,GACfC,iBAAkB,GAClBC,eAAgB,GAChBC,gBAAiB,GACjBC,gBAAiB,GACjBC,sBAAuB,GACvBC,eAAgB,GAIhBC,OAAU,GACVC,qBAAsB,GACtBC,cAAe,GACfC,gBAAiB,GACjBC,cAAe,GACfC,mBAAoB,GACpBC,gBAAiB,GACjBC,iBAAkB,GAClBC,aAAc,GAEd1tD,IAAO,GACP2tD,yBAA0B,GAC1BC,0BAA2B,GAC3BC,oCAAqC,GACrCC,8DAA+D,GAW/DC,OAAU,GACV7lB,MAAS,GACT8lB,KAAQ,GACRC,MAAS,GACTC,4CAA6C,GAC7CC,sBAAuB,GACvBC,wBAAyB,GACzBC,+BAAgC,GAChCC,oCAAqC,GACrCC,wBAAyB,GACzBC,+EAAgF,GAChFC,aAAc,GACdC,IAAO,GACPC,IAAO,GACPC,IAAO,GACPC,IAAO,GACPC,IAAO,GACPp+D,KAAQ,GACRq+D,IAAO,GACPC,KAAQ,GACRC,KAAQ,GAWRC,8EAA+E,GAC/EC,8CAA+C,GAC/CC,mDAAoD,GACpDC,oDAAqD,GACrDC,wEAAyE,GACzEC,2CAA4C,GAC5CC,iDAAkD,GAClDC,iDAAkD,GAClDC,gBAAiB,GACjBC,UAAW,GACXC,QAAS,GAETC,mCAAoC,GACpCC,yBAA0B,GAC1BC,0BAA2B,GAC3BC,eAAgB,GAEhBC,MAAS,GACTC,SAAY,IC/XhB,IAAIC,GAA0B,SAAUr0C,GACpC1F,GAAU+5C,EAAUr0C,GACpB,SAASq0C,IACL,OAAOr0C,IAAW,MAAQA,EAAOnkB,MAAM/L,KAAMgM,YAAchM,KAE/DsD,OAAOssB,eAAe20C,EAASz4D,UAAW,eAAgB,CACtD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACHpT,KAAK2nC,WAAW,gBAAiB4wB,IACjCroC,EAAOpkB,UAAU69B,aAAaxgC,KAAKnJ,SAG3CsD,OAAOssB,eAAe20C,EAASz4D,UAAW,YAAa,CACnD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUoxD,EAAQh3B,GACrB,IAAIC,EAAO,GACX,IAAK,IAAIC,EAAK,EAAGA,EAAK1hC,UAAUhI,OAAQ0pC,IAAM,CAC1CD,EAAKC,EAAK,GAAK1hC,UAAU0hC,GAG7B,IAAKF,EAAQ,CACTA,EAASxtC,KAAKk5B,MAAMsU,QAAUxtC,KAAK6oC,WAAW,iBAGlD,IAAI47B,EAAcD,EAClB,IAAIpxD,EAAQo6B,EAAOg3B,GAEnB,GAAIpxD,IAAU,KAAM,CAChBqxD,EAAc,QAEb,GAAIrxD,GAAS,KAAM,CAEpB,GAAIA,EAAO,CACPqxD,EAAcrxD,QAGjB,GAAIo6B,IAAWxtC,KAAK6oC,WAAW,iBAAkB,CAElD,OAAO7oC,KAAK4tC,UAAU7hC,MAAM/L,KAAMusB,GAAc,CAACi4C,EAAQxkE,KAAK6oC,WAAW,kBAAmBxc,GAAOohB,GAAO,QAG9G,GAAIA,EAAKzpC,OAAQ,CACb,IAAK,IAAI0uB,EAAM+a,EAAKzpC,OAAQhD,EAAI,EAAGA,EAAI0xB,IAAO1xB,EAAG,CAC7CyjE,EAAcA,EAAYv3D,MAAM,KAAOlM,EAAI,IAAIqE,KAAKooC,EAAKzsC,KAIjE,OAAOyjE,KAGfnhE,OAAOssB,eAAe20C,EAASz4D,UAAW,eAAgB,CACtD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUoxD,EAAQh3B,GACrB,IAAIC,EAAO,GACX,IAAK,IAAIC,EAAK,EAAGA,EAAK1hC,UAAUhI,OAAQ0pC,IAAM,CAC1CD,EAAKC,EAAK,GAAK1hC,UAAU0hC,GAE7B,OAAO1tC,KAAK4tC,UAAU7hC,MAAM/L,KAAMusB,GAAc,CAACi4C,EAAQh3B,GAASnhB,GAAOohB,GAAO,WAGxFnqC,OAAOssB,eAAe20C,EAASz4D,UAAW,oBAAqB,CAC3D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUoxD,EAAQC,EAAaj3B,GAClC,IAAIk3B,EAAel3B,GAAUxtC,KAAKk5B,MAAMsU,OACxCk3B,EAAaF,GAAUC,KAG/BnhE,OAAOssB,eAAe20C,EAASz4D,UAAW,iBAAkB,CACxD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUoxD,EAAQh3B,GACrB,IAAIC,EAAO,GACX,IAAK,IAAIC,EAAK,EAAGA,EAAK1hC,UAAUhI,OAAQ0pC,IAAM,CAC1CD,EAAKC,EAAK,GAAK1hC,UAAU0hC,GAE7B,IAAI+2B,EAAczkE,KAAK4tC,UAAU7hC,MAAM/L,KAAMusB,GAAc,CAACi4C,EAAQh3B,GAASnhB,GAAOohB,GAAO,QAC3F,OAAOg3B,GAAeD,EAAS,GAAKC,KAG5CnhE,OAAOssB,eAAe20C,EAASz4D,UAAW,gBAAiB,CACvD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUoxD,EAAQh3B,GACrB,GAAIxtC,KAAKk5B,MAAMsU,OAAOg3B,GAAS,CAC3B,OAAOxkE,KAAKk5B,MAAMsU,OAAOg3B,GAG7B,GAAIh3B,IAAWxtC,KAAK6oC,WAAW,iBAAkB,CAC7C,OAAO7oC,KAAKmzD,cAAcqR,EAAQxkE,KAAK6oC,WAAW,kBAGtD,OAAO,WACH,MAAO,OAInBvlC,OAAOssB,eAAe20C,EAASz4D,UAAW,eAAgB,CACtD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU8iD,EAAM1oB,GACnB,IAAIrd,EAAQnwB,KAEZ,IAAKA,KAAKg2D,YAAa,CACnB,OAAO2O,GAAWzO,GAAM,SAAUtoD,GAAK,OAAOuiB,EAAMyd,UAAUhgC,EAAG4/B,UAEhE,CACD,OAAO0oB,MASnB5yD,OAAOssB,eAAe20C,EAASz4D,UAAW,YAAa,CACnD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,OAAOpT,KAAK6oC,WAAW,mBAAqB7oC,KAAKk5B,MAAMsU,UAG/D,OAAO+2B,EAtIC,CAuIVx7B,ICnIF,IAAI67B,GAAuB,WACvB,SAASA,EAAM5sC,EAAMgR,GACjB1lC,OAAOssB,eAAe5vB,KAAM,QAAS,CACjC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAe5vB,KAAM,SAAU,CAClC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,KAEXpT,KAAKk5B,MAAQlB,EACb,IAAKgR,EAAQ,CACT,MAAM,IAAIvkC,MAAM,4DAYxBnB,OAAOssB,eAAeg1C,EAAO,MAAO,CAChClvD,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU4kB,GACb,IAAIpqB,EAAC,IAAQ5N,KAAKg4B,EAAM,MACxBpqB,EAAEi3D,oBACF,OAAOj3D,KAGftK,OAAOssB,eAAeg1C,EAAM94D,UAAW,oBAAqB,CACxD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,eASX9P,OAAOssB,eAAeg1C,EAAM94D,UAAW,eAAgB,CACnD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU0xD,GACb,OAAO9kE,KAAK+kE,OAAOD,MAc3BxhE,OAAOssB,eAAeg1C,EAAM94D,UAAW,UAAW,CAC9C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU0xD,EAAY74B,GACzB,GAAIA,SAAmB,EAAG,CAAEA,EAAY,GACxC,IAAIS,EAAQ1sC,KAAK+kE,OAAOD,GACxB,IAAKp4B,EAAO,CACRA,EAAQ1sC,KAAK+kE,OAAOD,GAAc,GAEtC74B,EAAUlW,KAAKgX,IACf,IAAIh8B,EAAKi0D,GAAsBt4B,GAAO,SAAU9+B,GAC5C,IAAI2hB,EAAQwd,GAAen/B,EAAEu+B,KAAKnoC,OAAQioC,EAAUjoC,QACpD,GAAIurB,IAAU,EAAG,CACb,OAAOyd,GAAoBp/B,EAAEu+B,KAAMF,EAAWc,QAE7C,CACD,OAAOxd,MAEXhhB,EAAQwC,EAAGxC,MAAOggB,EAAQxd,EAAGwd,MACjC,GAAIA,EAAO,CACP,OAAOme,EAAMn+B,GAAO+V,aAEnB,CACD,IAAIA,EAAW2pB,GAAS6C,IAAI,IAC5BpE,EAAM1kC,OAAOuG,EAAO,EAAG,CACnB49B,KAAMF,EACN3nB,SAAUA,IAEd,OAAOA,MAYnBhhB,OAAOssB,eAAeg1C,EAAM94D,UAAW,OAAQ,CAC3C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU0xD,EAAY74B,GACzB,GAAIA,SAAmB,EAAG,CAAEA,EAAY,GACxC,OAAOjsC,KAAKilE,QAAQH,EAAY74B,MAGxC,OAAO24B,EAxHF,GCAF,SAASM,GAASt4B,EAAM54B,EAAKmxD,EAAIp9D,GAEpC6kC,EAAKr5B,IAAIS,EAAKmxD,EAAG7xD,IAAIvL,IACrBo9D,EAAGhiE,GAAG4E,GAAM,SAAUqL,GAClBw5B,EAAKr5B,IAAIS,EAAKZ,MAMtB,IAAIgyD,GAA8B,SAAUl1C,GACxC1F,GAAU46C,EAAcl1C,GACxB,SAASk1C,IACL,OAAOl1C,IAAW,MAAQA,EAAOnkB,MAAM/L,KAAMgM,YAAchM,KAE/DsD,OAAOssB,eAAew1C,EAAat5D,UAAW,oBAAqB,CAC/D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH8c,EAAOpkB,UAAU+4D,kBAAkB17D,KAAKnJ,MACxC,IAAI2tC,EAAW3tC,KAAKk5B,MAAMyU,SAC1B,IAAIw3B,EAAKnlE,KAAKk5B,MAAMstB,gBACpB,IAAI6e,EAAmBrlE,KAAKk5B,MAAMmsC,iBAClC,IAAIC,EAAiBtlE,KAAKk5B,MAAMosC,eAChC,IAAI/jE,EAAIvB,KAAK4sC,KAAK5tB,KAAKhf,MAMvBuB,EAAE,mBAAmB4yB,OAAO,CACxB83B,OAAQltB,GAAMY,QAAQ,UACtB0b,KAAMtc,GAAMY,QAAQ,UACpB4lC,cAAexmC,GAAMY,QAAQ,SAC7B6lC,mBAAoBzmC,GAAMY,QAAQ,SAClC8lC,kBAAmB1mC,GAAMY,QAAQ,SACjC+lC,oBAAqB3mC,GAAMY,QAAQ,SACnCgmC,kBAAmB5mC,GAAMY,QAAQ,UACjCimC,oBAAqB7mC,GAAMY,QAAQ,UACnCkmC,gBAAiB9mC,GAAMY,QAAQ,UAC/BmmC,qBAAsB/mC,GAAMY,QAAQ,UACpComC,oBAAqBhnC,GAAMY,QAAQ,SACnCqmC,sBAAuBjnC,GAAMY,QAAQ,UACrCsmC,oBAAqBlnC,GAAMY,QAAQ,GACnCumC,sBAAuBnnC,GAAMY,QAAQ,UACrCwmC,KAAMpnC,GAAMY,QAAQ,GACpB8kB,WAAY1lB,GAAMY,QAAQ,UAC1BymC,sBAAuBrnC,GAAMY,QAAQ,GACrC5vB,KAAMgvB,GAAMY,QAAQ,GACpB0mC,gBAAiBtnC,GAAMY,QAAQ,UAC/B2mC,SAAUvnC,GAAMY,QAAQ,UACxB4uB,SAAUxvB,GAAMY,QAAQ,SACxBtS,SAAU0R,GAAMY,QAAQ,YAE5B,CACI,IAAIiN,EAAOrrC,EAAE,YACbqrC,EAAKzY,OAAO,CACRoyC,YAAa,CACTC,IAAK,IACLtoC,WAAY,EACZuoC,UAAW,GAEfC,OAAQ,CACJ3nC,GAAMY,QAAQ,UAElBv9B,KAAM,EAGNukE,MAAO,MACPC,WAAY,IAEhBh6B,EAAKjF,WAAW,cAAe,GAC/BiF,EAAKjF,WAAW,cAAe,GAEnCpmC,EAAE,UAAU4yB,OAAO,CACfsQ,uBAAwB,EACxBC,qBAAsBmiC,GAAUliC,MAEpCpjC,EAAE,aAAa4yB,OAAO,CAClB2yC,sBAAuB,EACvBC,oBAAqBF,GAAUliC,MAEnCpjC,EAAE,UAAU4yB,OAAO,CACf4f,QAAS,KACTt0B,MAAO,EACPg6B,QAAS,EACTuQ,SAAU,EACVhwC,SAAU,WACVgtD,SAAUnxC,GACVoxC,SAAUpxC,GACV2hB,gBAAiB,QACjBnB,WAAY,OAEhB90C,EAAE,UAAU2T,OAAOtG,OAAO,UAAW,CAAEmlC,QAAW,KAAM0F,QAAS,IACjEl4C,EAAE,aAAa4yB,OAAO,CAClBgwB,oBAAqB,KACrB+iB,mBAAoB,QAExB3lE,EAAE,YAAY4yB,OAAO,CACjBuqB,YAAa,IAEjBn9C,EAAE,SAAS4yB,OAAO,CACd5Q,MAAOqS,GACPiiB,OAAQjiB,GACRuuB,oBAAqB,QAOzB5iD,EAAE,SAAU,CAAC,aAAc,WAAW4yB,OAAO,CACzC2d,QAASjc,GACTjoB,EAAGioB,KAEPt0B,EAAE,SAAU,CAAC,WAAY,WAAW4yB,OAAO,CACvC6d,QAASnc,GACTlyB,EAAGkyB,KAEPt0B,EAAE,YAAa,CAAC,aAAc,WAAW4yB,OAAO,CAC5C/O,OAAQigD,IAEZ9jE,EAAE,YAAa,CAAC,WAAY,WAAW4yB,OAAO,CAC1C/O,OAAQkgD,IAOZ/jE,EAAE,WAAW4yB,OAAO,CAChBinB,WAAY,SACZ73B,MAAO,GACPs0B,OAAQ,GACRmS,SAAU,EACV1O,YAAa,IAEjB/5C,EAAE,eAAe4yB,OAAO,CACpBgzC,IAAK,EACLC,aAAc,EACd7jD,MAAO,GACPs0B,OAAQ,KAEZt2C,EAAE,oBAAoB4yB,OAAO,CACzBgzC,IAAK,EACLE,UAAW,MACXjrB,SAAU,KACVpC,SAAU,EACVE,UAAW,EACX32B,MAAO,GACPs0B,OAAQ,GACR6G,YAAa,IAEjBn9C,EAAE,iBAAiB4yB,OAAO,CACtBgzC,IAAK,EACLE,UAAW,MACXjrB,SAAU,MACVvZ,OAAQ,EACR6b,YAAa,EACbn7B,MAAO,GACPs0B,OAAQ,KAOZt2C,EAAE,kBAAkB4yB,OAAO,CACvB61B,SAAU,KAOdzoD,EAAE,UAAU4yB,OAAO,CACfmzC,UAAW,OACXC,YAAa,SACbC,UAAW,OACXpiD,OAAQ86B,GAAWpP,IAAI9wC,KAAKk5B,MAAO,IACnCuuC,MAAO,GACPC,YAAa,kBAGjBnmE,EAAE,YAAa,CAAC,SAAU,OAAQ,kBAAkB4yB,OAAO,CACvD+qB,YAAa,EACbkB,aAAc,EACdiF,cAAe,EACf1F,WAAY,EACZv6B,OAAQigD,EACR6B,mBAAoB,KACpB/iB,oBAAqB,MACrBwjB,YAAa,KACbC,UAAW,KACXC,UAAWl6B,EAASC,UAAU,yBAC9BhnB,KAAM,aAEV,CACI,IAAIgmB,EAAOrrC,EAAE,YAAa,CAAC,SAAU,OAAQ,eAC7CqrC,EAAKzY,OAAO,CACRmnB,YAAa,IAEjB4pB,GAASt4B,EAAM,OAAQu4B,EAAI,cAE/B5jE,EAAE,YAAa,CAAC,SAAU,WAAW4yB,OAAO,CACxC+yC,mBAAoB,KACpBl1B,QAASnc,GACTqpB,YAAa,EACbkB,aAAc,EACdiF,cAAe,EACf1F,WAAY,EACZp8B,MAAO,GACPs0B,OAAQ,KAEZt2C,EAAE,mBAAoB,CAAC,SAAU,SAAU,cAAc4yB,OAAO,CAC5D5Q,MAAOqS,GACPiiB,OAAQjiB,GACRkyC,eAAgB,EAChBC,eAAgB,EAChBC,eAAgB,EAChBC,eAAgB,IAEpB,CACI,IAAIr7B,EAAOrrC,EAAE,mBAAoB,CAAC,SAAU,SAAU,cAAc2T,OAAOtG,OAAO,WAAY,IAC9Fs2D,GAASt4B,EAAM,OAAQu4B,EAAI,YAC3BD,GAASt4B,EAAM,SAAUu4B,EAAI,YAEjC5jE,EAAE,QAAS,CAAC,SAAU,UAAU4yB,OAAO,CACnC6d,QAASnc,GACT2pB,WAAY,EACZY,aAAc,EACdlB,YAAa,EACbS,WAAY,EACZ0F,cAAe,EACf6iB,aAAc,OAElB,CACI,IAAIt7B,EAAOrrC,EAAE,QAAS,CAAC,SAAU,UAAU2T,OAAOtG,OAAO,WAAY,IACrEs2D,GAASt4B,EAAM,OAAQu4B,EAAI,YAE/B5jE,EAAE,QAAS,CAAC,SAAU,QAAS,UAAU4yB,OAAO,CAC5C6d,QAASnc,GACT2pB,WAAY,EACZY,aAAc,EACdlB,YAAa,EACbS,WAAY,EACZ0F,cAAe,EACf9hC,MAAO,GACPuuB,QAASlc,GACTsyC,aAAc,OAElB,CACI,IAAIt7B,EAAOrrC,EAAE,QAAS,CAAC,SAAU,QAAS,UAAU2T,OAAOtG,OAAO,WAAY,IAC9Es2D,GAASt4B,EAAM,OAAQu4B,EAAI,YAO/B5jE,EAAE,cAAc4yB,OAAO,CACnBg0C,UAAW,IAEf5mE,EAAE,mBAAoB,CAAC,aAAc,WAAW4yB,OAAO,CACnD8zC,eAAgB,EAChBD,eAAgB,EAChBD,eAAgB,EAChBD,eAAgB,IAEpBvmE,EAAE,mBAAoB,CAAC,WAAY,aAAc,WAAW4yB,OAAO,CAC/D0jB,OAAQjiB,GACRrS,MAAO,KAEXhiB,EAAE,mBAAoB,CAAC,aAAc,aAAc,WAAW4yB,OAAO,CACjE5Q,MAAOqS,GACPiiB,OAAQ,KAEZt2C,EAAE,aAAc,CAAC,aAAa4yB,OAAO,CACjC0jB,OAAQjiB,KAEZr0B,EAAE,aAAc,CAAC,eAAe4yB,OAAO,CACnC5Q,MAAOqS,KAEXr0B,EAAE,QAAS,CAAC,aAAc,UAAU4yB,OAAO,CACvC+qB,YAAa,EACbkB,aAAc,EACdT,WAAY,EACZ0F,cAAe,IAEnB9jD,EAAE,QAAS,CAAC,aAAc,QAAQ4yB,OAAO,CACrC+qB,YAAa,EACbkB,aAAc,EACdT,WAAY,EACZ0F,cAAe,IAOnB,CACI,IAAIzY,EAAOrrC,EAAE,SACbqrC,EAAKzY,OAAO,CACRwrB,WAAY,EACZ0F,cAAe,EACfnG,YAAa,GACbkB,aAAc,GACdgoB,WAAY,gJACZC,SAAU,MACVH,aAAc,QAElBhD,GAASt4B,EAAM,OAAQu4B,EAAI,QAE/B5jE,EAAE,eAAe4yB,OAAO,CACpBm0C,SAAU,UACVt2B,QAASnc,GACTic,QAASjc,GACT0yC,OAAQ,MACR1lC,OAAQ,EACR2lC,WAAY5yC,GACZ6yC,YAAa,OACb1e,UAAW,WAOfxoD,EAAE,oBAAoB4yB,OAAO,CACzB4zC,eAAgB,EAChBD,eAAgB,EAChBG,eAAgB,EAChBD,eAAgB,IAEpBzmE,EAAE,oBAAoB4yB,OAAO,CACzBu0C,iBAAkB,GAClB3b,cAAe,GACf4b,aAAc,IAElBpnE,EAAE,SAAS4yB,OAAO,CACdy0C,YAAa,EACbC,QAAS,EACTC,aAAc,IAElB,CACI,IAAIl8B,EAAOrrC,EAAE,QACbqrC,EAAKzY,OAAO,CACR40C,cAAe,IACf1yB,WAAY,MACZryC,OAAQ,IACRgW,SAAU,aAEdkrD,GAASt4B,EAAM,SAAUu4B,EAAI,QAEjC5jE,EAAE,UAAU4yB,OAAO,CACf60C,UAAW,GACXC,UAAW,KAOf1nE,EAAE,WAAW4yB,OAAO,CAChBna,SAAU,WACVkvD,kBAAmB,KACnBC,oBAAqB,MACrBC,cAAe,KACfzpB,WAAY,EACZ0F,cAAe,EACfnG,YAAa,GACbkB,aAAc,GACdH,aAAc,EACd6M,mBAAoB,WACpBhb,QAASjc,GACTmc,QAASnc,GACT43B,gBAAiBoZ,GAAUliC,IAC3B+P,WAAY,QAGhB,CACI,IAAI9H,EAAOrrC,EAAE,mBAAoB,CAAC,UAAW,eAC7CqrC,EAAKzY,OAAO,CACR40C,cAAe,GACfJ,aAAc,EACd5b,cAAe,EACf2b,iBAAkB,EAClBptB,YAAa,GACb2Q,OAAQltB,GAAMY,QAAQ,YAG9B,CACI,IAAIiN,EAAOrrC,EAAE,QAAS,CAAC,YACvBqrC,EAAKzY,OAAO,CACRvN,KAAM,UACNshD,aAAc,KACd9nB,aAAc,EACdT,WAAY,EACZT,YAAa,EACbmG,cAAe,IAEnB6f,GAASt4B,EAAM,OAAQu4B,EAAI,mBAO/B5jE,EAAE,UAAU4yB,OAAO,CACfwrB,WAAY,EACZ0F,cAAe,EACfnG,YAAa,GACbkB,aAAc,GACdloB,YAAa,KACb9S,OAAQigD,EACRlhB,oBAAqB,MACrB+iB,mBAAoB,KACpBU,UAAW,OAEfrmE,EAAE,UAAU2T,OAAOtG,OAAO,QAAS,IACnCrN,EAAE,UAAU2T,OAAOtG,OAAO,OAAQ,CAAE61B,uBAAwB,IAC5DljC,EAAE,UAAU2T,OAAOtG,OAAO,SAAU,IACpC,CACI,IAAIg+B,EAAOrrC,EAAE,mBAAoB,CAAC,SAAU,eAC5C2jE,GAASt4B,EAAM,OAAQu4B,EAAI,iBAC3BD,GAASt4B,EAAM,SAAUu4B,EAAI,uBAEjC,CACI,IAAIv4B,EAAOrrC,EAAE,mBAAoB,CAAC,SAAU,eAAe2T,OAAOtG,OAAO,QAAS,IAClFs2D,GAASt4B,EAAM,OAAQu4B,EAAI,sBAE/B,CACI,IAAIv4B,EAAOrrC,EAAE,mBAAoB,CAAC,SAAU,eAAe2T,OAAOtG,OAAO,OAAQ,CAAE61B,uBAAwB,IAC3GygC,GAASt4B,EAAM,OAAQu4B,EAAI,qBAE/B,CACI,IAAIv4B,EAAOrrC,EAAE,mBAAoB,CAAC,SAAU,eAAe2T,OAAOtG,OAAO,SAAU,IACnFs2D,GAASt4B,EAAM,OAAQu4B,EAAI,uBAE/B,CACI,IAAIv4B,EAAOrrC,EAAE,WAAY,CAAC,SAAU,SACpC2jE,GAASt4B,EAAM,SAAUu4B,EAAI,qBAEjC,CACI,IAAIv4B,EAAOrrC,EAAE,QAAS,CAAC,WACvB2jE,GAASt4B,EAAM,OAAQu4B,EAAI,qBAO/B5jE,EAAE,SAAU,CAAC,SAAS4yB,OAAO,CACzBwrB,WAAY,GACZ0F,cAAe,GACfnG,YAAa,GACbkB,aAAc,GACdtO,QAAS,GACTE,SAAU,GACVruC,EAAG,EACHiK,EAAGgoB,GACHhP,KAAM,SACNihD,UAAWl6B,EAASC,UAAU,YAC9B65B,MAAO,KAEX,CACI,IAAI76B,EAAOrrC,EAAE,mBAAoB,CAAC,aAAc,SAAU,SAC1DqrC,EAAKzY,OAAO,CACR2zC,eAAgB,GAChBE,eAAgB,GAChBD,eAAgB,GAChBE,eAAgB,KAEpB/C,GAASt4B,EAAM,OAAQu4B,EAAI,iBAE/B,CACI,IAAIv4B,EAAOrrC,EAAE,mBAAoB,CAAC,aAAc,SAAU,SAAS2T,OAAOtG,OAAO,QAAS,IAC1Fs2D,GAASt4B,EAAM,OAAQu4B,EAAI,sBAE/B,CACI,IAAIv4B,EAAOrrC,EAAE,mBAAoB,CAAC,aAAc,SAAU,SAAS2T,OAAOtG,OAAO,OAAQ,CAAE61B,uBAAwB,IACnHygC,GAASt4B,EAAM,OAAQu4B,EAAI,qBAE/B,CACI,IAAIv4B,EAAOrrC,EAAE,WAAY,CAAC,OAAQ,SAAU,SAC5CqrC,EAAKzY,OAAO,CACR40C,cAAe,GACf5rB,KAAM,SAAUl9B,GACZA,EAAQ4qC,OAAO,EAAG,GAClB5qC,EAAQ8qC,OAAO,GAAI,MAG3Bma,GAASt4B,EAAM,SAAUu4B,EAAI,qBAOjC5jE,EAAE,SAAU,CAAC,WAAW4yB,OAAO,CAC3BwrB,WAAY,EACZ0F,cAAe,EACfnG,YAAa,GACbkB,aAAc,GACdrkC,UAAW,KACX+1B,QAASjc,GACTmc,QAASnc,GACT7b,SAAU,WACV4M,KAAM,SACNyiD,aAAc,IACdC,aAAc,MACdzB,UAAWl6B,EAASC,UAAU,8CAElC,CACI,IAAIhB,EAAOrrC,EAAE,mBAAoB,CAAC,aAAc,SAAU,WAC1DqrC,EAAKzY,OAAO,CACR2zC,eAAgB,GAChBE,eAAgB,GAChBD,eAAgB,GAChBE,eAAgB,KAEpB/C,GAASt4B,EAAM,OAAQu4B,EAAI,mBAC3BD,GAASt4B,EAAM,SAAUu4B,EAAI,yBAEjC,CACI,IAAIv4B,EAAOrrC,EAAE,mBAAoB,CAAC,aAAc,SAAU,WAAW2T,OAAOtG,OAAO,QAAS,IAC5Fs2D,GAASt4B,EAAM,OAAQu4B,EAAI,wBAE/B,CACI,IAAIv4B,EAAOrrC,EAAE,mBAAoB,CAAC,aAAc,SAAU,WAAW2T,OAAOtG,OAAO,OAAQ,CAAE61B,uBAAwB,IACrHygC,GAASt4B,EAAM,OAAQu4B,EAAI,uBAE/B,CACI,IAAIv4B,EAAOrrC,EAAE,WAAY,CAAC,SAAU,SAAU,SAC9CqrC,EAAKzY,OAAO,CACR40C,cAAe,GACf5rB,KAAM,SAAUl9B,GACZA,EAAQ4qC,OAAO,EAAG,GAClB5qC,EAAQ8qC,OAAO,EAAG,IAClB9qC,EAAQ4qC,OAAO,EAAG,GAClB5qC,EAAQ8qC,OAAO,EAAG,OAG1Bma,GAASt4B,EAAM,SAAUu4B,EAAI,uBAEjC5jE,EAAE,SAAU,CAAC,SAAU,aAAa4yB,OAAO,CACvC61B,SAAU,GACVxV,gBAAiB,cAErBjzC,EAAE,SAAU,CAAC,SAAU,eAAe4yB,OAAO,CACzCqgB,gBAAiB,cAOrBjzC,EAAE,SAAU,CAAC,SAAS4yB,OAAO,CACzBwrB,WAAY,GACZ0F,cAAe,GACfnG,YAAa,GACbkB,aAAc,GACdynB,UAAWl6B,EAASC,UAAU,QAC9B27B,UAAW,WAEf,CACI,IAAI38B,EAAOrrC,EAAE,mBAAoB,CAAC,OAAQ,eAC1CqrC,EAAKzY,OAAO,CACR40C,cAAe,GACfjB,eAAgB,IAChBE,eAAgB,IAChBD,eAAgB,IAChBE,eAAgB,MAEpB/C,GAASt4B,EAAM,OAAQu4B,EAAI,iBAE/B,CACI,IAAIv4B,EAAOrrC,EAAE,WAAY,CAAC,OAAQ,SAClCqrC,EAAKzY,OAAO,CACRsQ,uBAAwB,EACxB2T,GAAI,EACJ+E,KAAM,SAAUl9B,GACZA,EAAQ4qC,OAAO,GAAI,GACnB5qC,EAAQ8qC,OAAO,EAAG,GAClB9qC,EAAQ8qC,OAAO,EAAG,GAClB9qC,EAAQ8qC,OAAO,GAAI,MAG3Bma,GAASt4B,EAAM,OAAQu4B,EAAI,qBAE/B5jE,EAAE,WAAY,CAAC,OAAQ,SAAS2T,OAAOtG,OAAO,UAAW,CACrD61B,uBAAwB,IAE5BljC,EAAE,WAAY,CAAC,OAAQ,SAAS2T,OAAOtG,OAAO,SAAU,CACpD61B,uBAAwB,EACxB0Y,KAAM,SAAUl9B,GACZA,EAAQ4qC,QAAQ,GAAI,GACpB5qC,EAAQ8qC,QAAQ,GAAI,GACpB9qC,EAAQ8qC,QAAQ,EAAG,GACnB9qC,EAAQ8qC,QAAQ,EAAG,GACnB9qC,EAAQ8qC,QAAQ,GAAI,GACpB9qC,EAAQ4qC,OAAO,GAAI,GACnB5qC,EAAQ8qC,OAAO,GAAI,GACnB9qC,EAAQ8qC,OAAO,EAAG,GAClB9qC,EAAQ8qC,OAAO,EAAG,GAClB9qC,EAAQ8qC,OAAO,GAAI,MAQ3BxpD,EAAE,SAAU,CAAC,WAAW4yB,OAAO,CAC3BwrB,WAAY,EACZ0F,cAAe,EACfnG,YAAa,EACbkB,aAAc,EACdynB,UAAWl6B,EAASC,UAAU,yBAC9B27B,UAAW,SACXhmD,MAAO,GACPs0B,OAAQ,GACRzyB,OAAQ,OAEZ,CACI,IAAIwnB,EAAOrrC,EAAE,mBAAoB,CAAC,SAAU,eAC5CqrC,EAAKzY,OAAO,CACR40C,cAAe,GACfjB,eAAgB,IAChBE,eAAgB,IAChBD,eAAgB,IAChBE,eAAgB,MAEpB/C,GAASt4B,EAAM,OAAQu4B,EAAI,iBAE/B,CACI,IAAIv4B,EAAOrrC,EAAE,SAAU,CAAC,SAAU,SAClCqrC,EAAKzY,OAAO,CACR0O,OAAQ,EACRmP,QAAS,EACTF,QAAS,EACTsG,GAAI,IAER8sB,GAASt4B,EAAM,OAAQu4B,EAAI,qBAE/B5jE,EAAE,WAAY,CAAC,SAAU,SAAS2T,OAAOtG,OAAO,SAAU,CACtDwpC,GAAI,KAOR72C,EAAE,aAAa4yB,OAAO,CAClB/E,MAAO,EACPC,IAAK,EACLo4C,MAAO,GACPha,gBAAiBoZ,GAAUliC,MAE/BpjC,EAAE,YAAa,CAAC,aAAa4yB,OAAO,CAChCsrB,YAAa,GACbD,WAAY,GACZxI,SAAU,GACVa,OAAQjiB,KAEZr0B,EAAE,YAAa,CAAC,eAAe4yB,OAAO,CAClC4rB,UAAW,GACXE,aAAc,GACdhJ,UAAW,GACX1zB,MAAOqS,KAEX51B,KAAK4sC,KAAK,SAAU,CAAC,cAAczY,OAAO,CACtCugB,WAAY,QAEhB,CACI,IAAI9H,EAAOrrC,EAAE,mBAAoB,CAAC,YAAa,OAAQ,eACvDqrC,EAAKzY,OAAO,CACR4zC,eAAgB,EAChBD,eAAgB,EAChBG,eAAgB,EAChBD,eAAgB,EAChB1sB,YAAa,KAEjB4pB,GAASt4B,EAAM,OAAQu4B,EAAI,QAE/B,CACI,IAAIv4B,EAAOrrC,EAAE,mBAAoB,CAAC,YAAa,UAC/CqrC,EAAKzY,OAAO,CACRvN,KAAM,SACN4iD,SAAU,SACVxvD,SAAU,WACV+B,UAAW,OAEfmpD,GAASt4B,EAAM,OAAQu4B,EAAI,mBAE/B,CACI,IAAIv4B,EAAOrrC,EAAE,mBAAoB,CAAC,YAAa,UAAU2T,OAAOtG,OAAO,QAAS,IAChFs2D,GAASt4B,EAAM,OAAQu4B,EAAI,wBAE/B,CACI,IAAIv4B,EAAOrrC,EAAE,mBAAoB,CAAC,YAAa,UAAU2T,OAAOtG,OAAO,OAAQ,CAAE61B,uBAAwB,IACzGygC,GAASt4B,EAAM,OAAQu4B,EAAI,uBAE/B5jE,EAAE,mBAAoB,CAAC,YAAa,QAAS,aAAa4yB,OAAO,CAC7DvmB,EAAGioB,GACHtS,MAAOqS,GACPkc,QAASjc,GACTgyC,UAAWl6B,EAASC,UAAU,8CAElCrsC,EAAE,mBAAoB,CAAC,YAAa,QAAS,eAAe4yB,OAAO,CAC/DxwB,EAAGkyB,GACHmc,QAASnc,GACTgiB,OAAQjiB,GACRiyC,UAAWl6B,EAASC,UAAU,iDAiBlC,CACI,IAAIhB,EAAOrrC,EAAE,mBAAoB,CAAC,OAAQ,UAAW,eACrDqrC,EAAKzY,OAAO,CACRw0C,aAAc,IAElBzD,GAASt4B,EAAM,OAAQu4B,EAAI,yBAE/B5jE,EAAE,QAAS,CAAC,OAAQ,YAAY4yB,OAAO,CACnCvN,KAAM1O,YAEV3W,EAAE,QAAS,CAAC,OAAQ,UAAW,MAAM4yB,OAAO,CACxC41B,UAAW,UAEfxoD,EAAE,QAAS,CAAC,OAAQ,UAAW,IAAK,aAAa4yB,OAAO,CACpD41B,UAAW,SAEfxoD,EAAE,QAAS,CAAC,OAAQ,UAAW,MAAM4yB,OAAO,CACxC41B,UAAW,WAEfxoD,EAAE,UAAW,CAAC,iBAAiB4yB,OAAO,CAClCu3B,UAAW,eAQfnqD,EAAE,QAAQ4yB,OAAO,CACbs1C,OAAQ,EACRC,YAAa,EACb7mC,OAAQ,KAGZthC,EAAE,UAAW,CAAC,UAAU4yB,OAAO,CAC3BwrB,WAAY,EACZ0F,cAAe,EACfnG,YAAa,EACbkB,aAAc,IAElB7+C,EAAE,mBAAoB,CAAC,UAAW,QAAS,SAAS4yB,OAAO,CACvD44B,cAAe,EACf2b,iBAAkB,EAClBC,aAAc,IAElBpnE,EAAE,QAAS,CAAC,UAAW,UAAU4yB,OAAO,CACpCk0C,SAAU,UAGd9mE,EAAE,iBAAiB4yB,OAAO,CACtBw1C,aAAc,KAElB,CACI,IAAI/8B,EAAOrrC,EAAE,YAAa,CAAC,UAAW,SACtCqrC,EAAK13B,OAAOtG,OAAO,QAAS,IAEhC,CACI,IAAIg+B,EAAOrrC,EAAE,mBAAoB,CAAC,UAAW,SAC7CqrC,EAAKzY,OAAO,CACR40C,cAAe,GACfrqB,YAAa,EACbpD,YAAa,EACb/3B,MAAO,GACPs0B,OAAQ,KAEZqtB,GAASt4B,EAAM,OAAQu4B,EAAI,cAC3BD,GAASt4B,EAAM,SAAUu4B,EAAI,yBAEjC,CACI,IAAIv4B,EAAOrrC,EAAE,mBAAoB,CAAC,UAAW,OAAQ,YACrDqrC,EAAKzY,OAAO,CACR40C,cAAe,EACfztB,YAAa,EACb/3B,MAAO,GACPs0B,OAAQ,KAEZjL,EAAK13B,OAAOtG,OAAO,QAAS,CACxB0sC,YAAa,KAEjB4pB,GAASt4B,EAAM,OAAQu4B,EAAI,yBAE/B5jE,EAAE,mBAAoB,CAAC,UAAW,OAAQ,SAAS4yB,OAAO,CACtD2zC,eAAgB,EAChBE,eAAgB,EAChBD,eAAgB,EAChBE,eAAgB,IAEpB1mE,EAAE,mBAAoB,CAAC,UAAW,OAAQ,UAAU4yB,OAAO,CACvD2zC,eAAgB,EAChBE,eAAgB,EAChBD,eAAgB,EAChBE,eAAgB,IAEpB,CACI,IAAIr7B,EAAOrrC,EAAE,YAAa,CAAC,UAAW,cACtCqrC,EAAKzY,OAAO,CACR0oB,gBAAiB,CAAC,EAAG,GACrBksB,cAAe,GACfrqB,YAAa,IAEjBwmB,GAASt4B,EAAM,SAAUu4B,EAAI,6BAIzC,OAAOC,EAzzBK,CA0zBdR,ICjzBF,IAAIgF,GAAwB,WACxB,SAASA,EAAOhpE,EAAGE,EAAGyC,EAAGgC,EAAGskE,EAAIC,GAC5B,GAAIlpE,SAAW,EAAG,CAAEA,EAAI,EACxB,GAAIE,SAAW,EAAG,CAAEA,EAAI,EACxB,GAAIyC,SAAW,EAAG,CAAEA,EAAI,EACxB,GAAIgC,SAAW,EAAG,CAAEA,EAAI,EACxB,GAAIskE,SAAY,EAAG,CAAEA,EAAK,EAC1B,GAAIC,SAAY,EAAG,CAAEA,EAAK,EAC1BxmE,OAAOssB,eAAe5vB,KAAM,IAAK,CAC7B0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAe5vB,KAAM,IAAK,CAC7B0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAe5vB,KAAM,IAAK,CAC7B0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAe5vB,KAAM,IAAK,CAC7B0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAe5vB,KAAM,KAAM,CAC9B0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAe5vB,KAAM,KAAM,CAC9B0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhBpT,KAAKY,EAAIA,EACTZ,KAAKc,EAAIA,EACTd,KAAKuD,EAAIA,EACTvD,KAAKuF,EAAIA,EACTvF,KAAK6pE,GAAKA,EACV7pE,KAAK8pE,GAAKA,EAKdxmE,OAAOssB,eAAeg6C,EAAO99D,UAAW,eAAgB,CACpD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUxF,EAAGjK,EAAGomE,EAAQC,EAAQhgB,EAAUvqC,GAC7C,GAAIA,SAAe,EAAG,CAAEA,EAAQ,EAChCzf,KAAKY,EAAI0K,KAAKg3B,IAAI0nB,GAAYvqC,EAC9Bzf,KAAKc,EAAIwK,KAAK82B,IAAI4nB,GAAYvqC,EAC9Bzf,KAAKuD,GAAK+H,KAAK82B,IAAI4nB,GAAYvqC,EAC/Bzf,KAAKuF,EAAI+F,KAAKg3B,IAAI0nB,GAAYvqC,EAC9Bzf,KAAK6pE,GAAKj8D,GAAMm8D,EAAS/pE,KAAKY,EAAMopE,EAAShqE,KAAKuD,GAClDvD,KAAK8pE,GAAKnmE,GAAMomE,EAAS/pE,KAAKc,EAAMkpE,EAAShqE,KAAKuF,MAO1DjC,OAAOssB,eAAeg6C,EAAO99D,UAAW,QAAS,CAC7C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU62D,GACb,MAAO,CACHr8D,EAAI5N,KAAKY,EAAIqpE,EAAOr8D,EAAM5N,KAAKuD,EAAI0mE,EAAOtmE,EAAK3D,KAAK6pE,GACpDlmE,EAAI3D,KAAKc,EAAImpE,EAAOr8D,EAAM5N,KAAKuF,EAAI0kE,EAAOtmE,EAAK3D,KAAK8pE,OAQhExmE,OAAOssB,eAAeg6C,EAAO99D,UAAW,eAAgB,CACpD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU62D,GACb,IAAI/nE,EAAK,GAAMlC,KAAKY,EAAIZ,KAAKuF,EAAMvF,KAAKuD,GAAKvD,KAAKc,GAClD,MAAO,CACH8M,EAAI5N,KAAKuF,EAAIrD,EAAK+nE,EAAOr8D,GAAO5N,KAAKuD,EAAIrB,EAAK+nE,EAAOtmE,GAAQ3D,KAAK8pE,GAAK9pE,KAAKuD,EAAMvD,KAAK6pE,GAAK7pE,KAAKuF,GAAMrD,EACvGyB,EAAI3D,KAAKY,EAAIsB,EAAK+nE,EAAOtmE,GAAO3D,KAAKc,EAAIoB,EAAK+nE,EAAOr8D,IAAS5N,KAAK8pE,GAAK9pE,KAAKY,EAAMZ,KAAK6pE,GAAK7pE,KAAKc,GAAMoB,MAOpHoB,OAAOssB,eAAeg6C,EAAO99D,UAAW,SAAU,CAC9C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU82D,GACb,IAAIC,EAAKnqE,KAAKY,EACd,IAAIwpE,EAAKpqE,KAAKc,EACd,IAAIupE,EAAKrqE,KAAKuD,EACd,IAAIonD,EAAK3qD,KAAKuF,EACdvF,KAAKY,EAAKspE,EAAOtpE,EAAIupE,EAAOD,EAAOppE,EAAIupE,EACvCrqE,KAAKc,EAAKopE,EAAOtpE,EAAIwpE,EAAOF,EAAOppE,EAAI6pD,EACvC3qD,KAAKuD,EAAK2mE,EAAO3mE,EAAI4mE,EAAOD,EAAO3kE,EAAI8kE,EACvCrqE,KAAKuF,EAAK2kE,EAAO3mE,EAAI6mE,EAAOF,EAAO3kE,EAAIolD,EACvC3qD,KAAK6pE,GAAMK,EAAOL,GAAKM,EAAOD,EAAOJ,GAAKO,EAAMrqE,KAAK6pE,GACrD7pE,KAAK8pE,GAAMI,EAAOL,GAAKO,EAAOF,EAAOJ,GAAKnf,EAAM3qD,KAAK8pE,MAM7DxmE,OAAOssB,eAAeg6C,EAAO99D,UAAW,UAAW,CAC/C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU82D,GACb,IAAII,EAAMtqE,KAAK6pE,GACf,GAAIK,EAAOtpE,IAAM,GAAKspE,EAAOppE,IAAM,GAAKopE,EAAO3mE,IAAM,GAAK2mE,EAAO3kE,IAAM,EAAG,CACtE,IAAI4kE,EAAKnqE,KAAKY,EACd,IAAIypE,EAAKrqE,KAAKuD,EACdvD,KAAKY,EAAKupE,EAAKD,EAAOtpE,EAAMZ,KAAKc,EAAIopE,EAAO3mE,EAC5CvD,KAAKc,EAAKqpE,EAAKD,EAAOppE,EAAMd,KAAKc,EAAIopE,EAAO3kE,EAC5CvF,KAAKuD,EAAK8mE,EAAKH,EAAOtpE,EAAMZ,KAAKuF,EAAI2kE,EAAO3mE,EAC5CvD,KAAKuF,EAAK8kE,EAAKH,EAAOppE,EAAMd,KAAKuF,EAAI2kE,EAAO3kE,EAEhDvF,KAAK6pE,GAAMS,EAAMJ,EAAOtpE,EAAMZ,KAAK8pE,GAAKI,EAAO3mE,EAAK2mE,EAAOL,GAC3D7pE,KAAK8pE,GAAMQ,EAAMJ,EAAOppE,EAAMd,KAAK8pE,GAAKI,EAAO3kE,EAAK2kE,EAAOJ,MAMnExmE,OAAOssB,eAAeg6C,EAAO99D,UAAW,WAAY,CAChD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU82D,GACblqE,KAAKY,EAAIspE,EAAOtpE,EAChBZ,KAAKc,EAAIopE,EAAOppE,EAChBd,KAAKuD,EAAI2mE,EAAO3mE,EAChBvD,KAAKuF,EAAI2kE,EAAO3kE,EAChBvF,KAAK6pE,GAAKK,EAAOL,GACjB7pE,KAAK8pE,GAAKI,EAAOJ,MAGzB,OAAOF,EA5JD,GC5BV,IAAIW,GAAiB,WAAc,SAASC,EAAcC,EAAKzpE,GAAK,IAAI0pE,EAAO,GAAI,IAAIC,EAAK,KAAM,IAAIxoD,EAAK,MAAO,IAAIyoD,EAAK1yD,UAAW,IAAM,IAAK,IAAIw1B,EAAK+8B,EAAIx+C,OAAOC,YAAa2+C,IAAMF,GAAME,EAAKn9B,EAAGriB,QAAQE,MAAOo/C,EAAK,KAAM,CAAED,EAAKllE,KAAKqlE,EAAGz3D,OAAQ,GAAIpS,GAAK0pE,EAAK1mE,SAAWhD,EAAG,OAAW,MAAOq4B,GAAOlX,EAAK,KAAMyoD,EAAKvxC,EAAM,QAAW,IAAM,IAAKsxC,GAAMj9B,EAAG,UAAWA,EAAG,YAAc,QAAW,GAAIvrB,EAAI,MAAMyoD,GAAQ,OAAOF,EAAQ,OAAO,SAAUD,EAAKzpE,GAAK,GAAIkD,MAAMC,QAAQsmE,GAAM,CAAE,OAAOA,OAAY,GAAIx+C,OAAOC,YAAY5oB,OAAOmnE,GAAM,CAAE,OAAOD,EAAcC,EAAKzpE,OAAW,CAAE,MAAM,IAAIypB,UAAU,0DAAjkB,GAErB,IAAIqgD,GAAMx/D,KAAK02B,GAAK,EAEpB,IAAI+oC,GAAe,SAASA,EAAaC,EAAMC,EAAIC,EAAIC,EAAQC,EAAQC,EAASC,GAC9E,IAAI19D,EAAIo9D,EAAKp9D,EACTjK,EAAIqnE,EAAKrnE,EAEbiK,GAAKq9D,EACLtnE,GAAKunE,EAEL,IAAIK,EAAKJ,EAASv9D,EAAIw9D,EAASznE,EAC/B,IAAI6nE,EAAKJ,EAASx9D,EAAIu9D,EAASxnE,EAE/B,MAAO,CACLiK,EAAG29D,EAAKF,EACR1nE,EAAG6nE,EAAKF,IAIZ,IAAIG,GAAgB,SAASA,EAAcC,EAAMC,GAG/C,IAAI/qE,EAAI+qE,IAAS,mBAAqB,cAAiBA,KAAU,oBAAsB,cAAiB,EAAI,EAAIrgE,KAAKsgE,IAAID,EAAO,GAEhI,IAAIE,EAAKvgE,KAAKg3B,IAAIopC,GAClB,IAAII,EAAKxgE,KAAK82B,IAAIspC,GAClB,IAAIK,EAAKzgE,KAAKg3B,IAAIopC,EAAOC,GACzB,IAAIK,EAAK1gE,KAAK82B,IAAIspC,EAAOC,GAEzB,MAAO,CAAC,CACN/9D,EAAGi+D,EAAKC,EAAKlrE,EACb+C,EAAGmoE,EAAKD,EAAKjrE,GACZ,CACDgN,EAAGm+D,EAAKC,EAAKprE,EACb+C,EAAGqoE,EAAKD,EAAKnrE,GACZ,CACDgN,EAAGm+D,EACHpoE,EAAGqoE,KAIP,IAAIC,GAAc,SAASA,EAAYC,EAAIC,EAAIC,EAAIC,GACjD,IAAIC,EAAOJ,EAAKG,EAAKF,EAAKC,EAAK,GAAK,EAAI,EAExC,IAAIG,EAAML,EAAKE,EAAKD,EAAKE,EAEzB,GAAIE,EAAM,EAAG,CACXA,EAAM,EAGR,GAAIA,GAAO,EAAG,CACZA,GAAO,EAGT,OAAOD,EAAOhhE,KAAKkhE,KAAKD,IAG1B,IAAIE,GAAe,SAASA,EAAaC,EAAIC,EAAIlqC,EAAIC,EAAIuoC,EAAIC,EAAI0B,EAAcC,EAAWzB,EAAQD,EAAQ2B,EAAKC,GAC7G,IAAIC,EAAO1hE,KAAKmB,IAAIw+D,EAAI,GACxB,IAAIgC,EAAO3hE,KAAKmB,IAAIy+D,EAAI,GACxB,IAAIgC,EAAQ5hE,KAAKmB,IAAIqgE,EAAK,GAC1B,IAAIK,EAAQ7hE,KAAKmB,IAAIsgE,EAAK,GAE1B,IAAIK,EAAWJ,EAAOC,EAAOD,EAAOG,EAAQF,EAAOC,EAEnD,GAAIE,EAAW,EAAG,CAChBA,EAAW,EAGbA,GAAYJ,EAAOG,EAAQF,EAAOC,EAClCE,EAAW9hE,KAAK+hE,KAAKD,IAAaR,IAAiBC,GAAa,EAAI,GAEpE,IAAIS,EAAWF,EAAWnC,EAAKC,EAAK6B,EACpC,IAAIQ,EAAWH,GAAYlC,EAAKD,EAAK6B,EAErC,IAAIzB,EAAUF,EAASmC,EAAWlC,EAASmC,GAAYb,EAAKjqC,GAAM,EAClE,IAAI6oC,EAAUF,EAASkC,EAAWnC,EAASoC,GAAYZ,EAAKjqC,GAAM,EAElE,IAAI8qC,GAAOV,EAAMQ,GAAYrC,EAC7B,IAAIwC,GAAOV,EAAMQ,GAAYrC,EAC7B,IAAIwC,IAAQZ,EAAMQ,GAAYrC,EAC9B,IAAI0C,IAAQZ,EAAMQ,GAAYrC,EAE9B,IAAIQ,EAAOO,GAAY,EAAG,EAAGuB,EAAKC,GAClC,IAAI9B,EAAOM,GAAYuB,EAAKC,EAAKC,EAAKC,GAEtC,GAAId,IAAc,GAAKlB,EAAO,EAAG,CAC/BA,GAAQb,GAGV,GAAI+B,IAAc,GAAKlB,EAAO,EAAG,CAC/BA,GAAQb,GAGV,MAAO,CAACO,EAASC,EAASI,EAAMC,IAGlC,IAAIiC,GAAc,SAASA,EAAYC,GACrC,IAAInB,EAAKmB,EAAMnB,GACXC,EAAKkB,EAAMlB,GACXlqC,EAAKorC,EAAMprC,GACXC,EAAKmrC,EAAMnrC,GACXuoC,EAAK4C,EAAM5C,GACXC,EAAK2C,EAAM3C,GACX4C,EAAsBD,EAAME,cAC5BA,EAAgBD,IAAwB51D,UAAY,EAAI41D,EACxDE,EAAqBH,EAAMjB,aAC3BA,EAAeoB,IAAuB91D,UAAY,EAAI81D,EACtDC,EAAkBJ,EAAMhB,UACxBA,EAAYoB,IAAoB/1D,UAAY,EAAI+1D,EAEpD,IAAIC,EAAS,GAEb,GAAIjD,IAAO,GAAKC,IAAO,EAAG,CACxB,MAAO,GAGT,IAAIE,EAAS9/D,KAAK82B,IAAI2rC,EAAgBjD,GAAM,KAC5C,IAAIK,EAAS7/D,KAAKg3B,IAAIyrC,EAAgBjD,GAAM,KAE5C,IAAIgC,EAAM3B,GAAUuB,EAAKjqC,GAAM,EAAI2oC,GAAUuB,EAAKjqC,GAAM,EACxD,IAAIqqC,GAAO3B,GAAUsB,EAAKjqC,GAAM,EAAI0oC,GAAUwB,EAAKjqC,GAAM,EAEzD,GAAIoqC,IAAQ,GAAKC,IAAQ,EAAG,CAC1B,MAAO,GAGT9B,EAAK3/D,KAAK8B,IAAI69D,GACdC,EAAK5/D,KAAK8B,IAAI89D,GAEd,IAAIiD,EAAS7iE,KAAKmB,IAAIqgE,EAAK,GAAKxhE,KAAKmB,IAAIw+D,EAAI,GAAK3/D,KAAKmB,IAAIsgE,EAAK,GAAKzhE,KAAKmB,IAAIy+D,EAAI,GAElF,GAAIiD,EAAS,EAAG,CACdlD,GAAM3/D,KAAK+hE,KAAKc,GAChBjD,GAAM5/D,KAAK+hE,KAAKc,GAGlB,IAAIC,EAAgB3B,GAAaC,EAAIC,EAAIlqC,EAAIC,EAAIuoC,EAAIC,EAAI0B,EAAcC,EAAWzB,EAAQD,EAAQ2B,EAAKC,GACnGsB,EAAiB9D,GAAe6D,EAAe,GAC/C/C,EAAUgD,EAAe,GACzB/C,EAAU+C,EAAe,GACzB3C,EAAO2C,EAAe,GACtB1C,EAAO0C,EAAe,GAQ1B,IAAIC,EAAQhjE,KAAK8B,IAAIu+D,IAASb,GAAM,GACpC,GAAIx/D,KAAK8B,IAAI,EAAMkhE,GAAS,KAAW,CACrCA,EAAQ,EAGV,IAAIC,EAAWjjE,KAAKyY,IAAIzY,KAAKywB,KAAKuyC,GAAQ,GAE1C3C,GAAQ4C,EAER,IAAK,IAAIvtE,EAAI,EAAGA,EAAIutE,EAAUvtE,IAAK,CACjCktE,EAAO1oE,KAAKimE,GAAcC,EAAMC,IAChCD,GAAQC,EAGV,OAAOuC,EAAOphE,KAAI,SAAU0hE,GAC1B,IAAIC,EAAgB1D,GAAayD,EAAM,GAAIvD,EAAIC,EAAIC,EAAQC,EAAQC,EAASC,GACxEO,EAAK4C,EAAc7gE,EACnBk+D,EAAK2C,EAAc9qE,EAEvB,IAAI+qE,EAAiB3D,GAAayD,EAAM,GAAIvD,EAAIC,EAAIC,EAAQC,EAAQC,EAASC,GACzES,EAAK2C,EAAe9gE,EACpBo+D,EAAK0C,EAAe/qE,EAExB,IAAIgrE,EAAiB5D,GAAayD,EAAM,GAAIvD,EAAIC,EAAIC,EAAQC,EAAQC,EAASC,GACzE19D,EAAI+gE,EAAe/gE,EACnBjK,EAAIgrE,EAAehrE,EAEvB,MAAO,CAAEkoE,GAAIA,EAAIC,GAAIA,EAAIC,GAAIA,EAAIC,GAAIA,EAAIp+D,EAAGA,EAAGjK,EAAGA,OChKtD,SAASirE,GAAU7mE,EAAM8mE,EAAQC,GAC7B,GAAID,IAAWC,EAAU,CACrB,MAAM,IAAIrqE,MAAM,YAAcqqE,EAAW,kBAAoB/mE,EAAO,YAAc8mE,IAM1F,SAASE,GAAahnE,EAAM8mE,EAAQC,GAChC,GAAID,EAASC,EAAU,CACnB,MAAM,IAAIrqE,MAAM,qBAAuBqqE,EAAW,kBAAoB/mE,EAAO,YAAc8mE,IAMnG,SAASG,GAAcjnE,EAAM8mE,EAAQC,GACjCC,GAAahnE,EAAM8mE,EAAQC,GAC3B,GAAKD,EAASC,IAAc,EAAG,CAC3B,MAAM,IAAIrqE,MAAM,iBAAmBsD,EAAO,wBAA0B+mE,IAS5E,SAASG,GAAct7D,GACnB,IAAK,IAAI3S,EAAI,EAAGA,EAAI2S,EAAK3P,OAAQhD,GAAK,EAAG,CACrC,IAAIuN,EAAQvN,EAAI,EAChB,IAAIkuE,EAAOv7D,EAAKpF,GAChB,GAAI2gE,EAAKlrE,OAAS,EAAG,CACjB,IAAIpD,EAAI,qBAAqB2sB,KAAK2hD,GAClC,GAAItuE,IAAM,KAAM,CACZ+S,EAAK3L,OAAOuG,EAAO,EAAG3N,EAAE,MACtB2N,EACFoF,EAAK3L,OAAOuG,EAAO,EAAG3N,EAAE,MACtB2N,EACF,GAAI3N,EAAE,GAAGoD,OAAS,EAAG,CACjB2P,EAAKpF,GAAS3N,EAAE,OAEf,CACD+S,EAAK3L,OAAOuG,EAAO,OAI7BA,EACF2gE,EAAOv7D,EAAKpF,GACZ,GAAI2gE,EAAKlrE,OAAS,EAAG,CACjB,IAAIpD,EAAI,eAAe2sB,KAAK2hD,GAC5B,GAAItuE,IAAM,KAAM,CACZ+S,EAAK3L,OAAOuG,EAAO,EAAG3N,EAAE,MACtB2N,EACFoF,EAAKpF,GAAS3N,EAAE,MAQhC,SAASuuE,GAAa/7D,GAClB,GAAIA,IAAU,GAAKA,IAAU,EAAG,CAC5B,OAAOA,MAEN,CACD,MAAM,IAAI3O,MAAM,wBAwCxB,SAAS2qE,GAAaltE,GAClB,IAAI27B,EAAM,CAAC,EAAG,EAAG,GACjB,IAAK,IAAI78B,EAAI,EAAGA,EAAI,GAAIA,IAAK,CACzB68B,EAAI78B,EAAI,KAAO,EACf68B,EAAI78B,EAAI,IAAMkB,EAAK,EACnBA,IAAO,EAEX,OAAQ27B,EAAI,GAAK,IAAMA,EAAI,IAAM,IAAMA,EAAI,IAAM,IAKrD,SAASwxC,GAAYC,EAAWpvE,GAC5B,OAAS,CACL,GAAIovE,EAAUp3C,YAAa,CACvB,IAAKh4B,EAAEovE,GAAY,CACf,OAGR,GAAIA,EAAUh+B,QAAS,CACnBg+B,EAAYA,EAAUh+B,YAErB,CACD,QAQZ,SAASi+B,GAAejhD,EAASvmB,EAAM7H,GACnC,OAAOszC,GAAwBllB,EAASkhD,GAAwBznE,IAAO,SAAUgqB,GAC7E,IAAI09C,EAAU19C,EAAM09C,QACpB,GAAIA,EAAS,CACT,GAAIA,EAAQzrE,QAAU,EAAG,CACrByrE,EAAU19C,EAAM29C,eAEpBxvE,EAAEyvE,GAAYF,QAEb,CACDvvE,EAAE,CAAC6xB,QAOf,SAAS69C,GAAU7zB,GACf,IAAI8zB,EAASvvE,SAASw2B,cAAc,UACpC+4C,EAAOtsD,MAAQ,EACfssD,EAAOh4B,OAAS,EAChB,IAAIrmB,EAAUq+C,EAAOC,WAAW,KAAM,CAAEC,mBAAoB,OAC5Dv+C,EAAQw+C,UAAUj0B,EAAO,EAAG,EAAG,EAAG,GAClC,IACIvqB,EAAQy+C,aAAa,EAAG,EAAG,EAAG,GAC9B,OAAO,MAEX,MAAO52C,GACHlpB,QAAQ+/D,KAAK,UAAan0B,EAAM36B,IAAM,4KACtC,OAAO,MAQf,SAAS+uD,GAAYC,GACjBA,EAAK7sD,MAAQ,EACb6sD,EAAKv4B,OAAS,EACdu4B,EAAKnhE,MAAMsU,MAAQ,MACnB6sD,EAAKnhE,MAAM4oC,OAAS,MAKxB,IAAIw4B,GAA6B,WAC7B,SAASA,IACL/sE,OAAOssB,eAAe5vB,KAAM,KAAM,CAC9B0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,IAEX9P,OAAOssB,eAAe5vB,KAAM,KAAM,CAC9B0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,IAGf9P,OAAOssB,eAAeygD,EAAYvkE,UAAW,IAAK,CAC9CwH,IAAK,WACD,OAAOtT,KAAKs4C,IAEhB/kC,IAAK,SAAUH,GACXpT,KAAKs4C,GAAKllC,GAEdsC,WAAY,MACZC,aAAc,OAElBrS,OAAOssB,eAAeygD,EAAYvkE,UAAW,IAAK,CAC9CwH,IAAK,WACD,OAAOtT,KAAK04C,IAEhBnlC,IAAK,SAAUH,GACXpT,KAAK04C,GAAKtlC,GAEdsC,WAAY,MACZC,aAAc,OAElB,OAAO06D,EAnCI,GAyCf,IAAIC,GAAqC,SAAUpgD,GAC/C1F,GAAU8lD,EAAqBpgD,GAC/B,SAASogD,EAAoBC,GACzB,IAAIpgD,EAAQD,EAAO/mB,KAAKnJ,OAASA,KACjCsD,OAAOssB,eAAeO,EAAO,SAAU,CACnCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAeO,EAAO,OAAQ,CACjCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,OAEX9P,OAAOssB,eAAeO,EAAO,UAAW,CACpCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,OAEX9P,OAAOssB,eAAeO,EAAO,aAAc,CACvCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,OAEX9P,OAAOssB,eAAeO,EAAO,cAAe,CACxCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,QAEX9P,OAAOssB,eAAeO,EAAO,WAAY,CACrCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,QAEX9P,OAAOssB,eAAeO,EAAO,YAAa,CACtCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,QAEX9P,OAAOssB,eAAeO,EAAO,cAAe,CACxCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,QAEX9P,OAAOssB,eAAeO,EAAO,aAAc,CACvCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,QAEX9P,OAAOssB,eAAeO,EAAO,aAAc,CACvCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,QAEX9P,OAAOssB,eAAeO,EAAO,QAAS,CAClCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,IAEX9P,OAAOssB,eAAeO,EAAO,gBAAiB,CAC1Cza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,IAEX9P,OAAOssB,eAAeO,EAAO,QAAS,CAClCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,IAEX9P,OAAOssB,eAAeO,EAAO,QAAS,CAClCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,IAEX9P,OAAOssB,eAAeO,EAAO,IAAK,CAC9Bza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,IAEX9P,OAAOssB,eAAeO,EAAO,IAAK,CAC9Bza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,IAEX9P,OAAOssB,eAAeO,EAAO,QAAS,CAClCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,IAAIi9D,KAEf/sE,OAAOssB,eAAeO,EAAO,SAAU,CACnCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAeO,EAAO,kBAAmB,CAC5Cza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAeO,EAAO,uBAAwB,CACjDza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAeO,EAAO,eAAgB,CACzCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,IAAIw2D,KAEftmE,OAAOssB,eAAeO,EAAO,UAAW,CACpCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,IAAIw2D,KAGftmE,OAAOssB,eAAeO,EAAO,WAAY,CACrCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,IAAIw2D,KAEftmE,OAAOssB,eAAeO,EAAO,YAAa,CACtCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAeO,EAAO,UAAW,CACpCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAeO,EAAO,eAAgB,CACzCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAeO,EAAO,UAAW,CACpCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAeO,EAAO,WAAY,CACrCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB+c,EAAM4qB,UAAYw1B,EAClB,OAAOpgD,EAEX7sB,OAAOssB,eAAe0gD,EAAoBxkE,UAAW,WAAY,CAC7D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACHpT,KAAK+6C,UAAUy1B,cAAcxwE,SAGrCsD,OAAOssB,eAAe0gD,EAAoBxkE,UAAW,YAAa,CAC9D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,OAAOpT,KAAKywE,WAAWL,QAG/B9sE,OAAOssB,eAAe0gD,EAAoBxkE,UAAW,WAAY,CAC7D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAIjT,EAAOH,KACX,OAAS,CACL,GAAIG,EAAKuwE,OAAQ,CACb,OAAOvwE,EAAKuwE,YAEX,GAAIvwE,EAAKmxC,QAAS,CACnBnxC,EAAOA,EAAKmxC,YAEX,CACD,OAAOtxC,KAAK+6C,UAAU41B,kBAKtCrtE,OAAOssB,eAAe0gD,EAAoBxkE,UAAW,WAAY,CAC7D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUmc,EAAOqhD,GACpB,GAAIrhD,GAAS,KAAM,CACfvvB,KAAK0wE,OAASx4D,cAEb,CACD,IAAI67B,EAAU,KACd/zC,KAAK0wE,OAAS1wE,KAAK+6C,UAAU01B,SAASlhD,EAAOwkB,GAC7C/zC,KAAK0wE,OAAO38B,QAAUA,EACtB/zC,KAAK0wE,OAAOE,OAASA,EACrB,GAAIA,EAAQ,CACRC,GAAsB7wE,KAAK0wE,OAAON,KAAM,OAE5C,GAAIpwE,KAAKsxC,QAAS,CACdtxC,KAAKsxC,QAAQw/B,mBAAmB9wE,KAAK0wE,QAEzC1wE,KAAK+6C,UAAUg2B,YAAY/wE,KAAK0wE,YAI5CptE,OAAOssB,eAAe0gD,EAAoBxkE,UAAW,iBAAkB,CACnE4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACHpT,KAAKywE,WAAWO,MAAQ,QAGhC1tE,OAAOssB,eAAe0gD,EAAoBxkE,UAAW,QAAS,CAC1D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACHpT,KAAKs2C,sBAGbhzC,OAAOssB,eAAe0gD,EAAoBxkE,UAAW,mBAAoB,CACrE4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACHpT,KAAK6xC,aAAe35B,aAG5B5U,OAAOssB,eAAe0gD,EAAoBxkE,UAAW,aAAc,CAC/D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU69D,OAErB3tE,OAAOssB,eAAe0gD,EAAoBxkE,UAAW,cAAe,CAChE4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,GAAIpT,KAAKkxE,WAAah5D,UAAW,CAC7BlY,KAAKkxE,SAAWlxE,KAAK+6C,UAAUo2B,QAAQnxE,MAE3C,OAAOA,KAAKkxE,YAGpB5tE,OAAOssB,eAAe0gD,EAAoBxkE,UAAW,iBAAkB,CACnE4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,OAAOpT,KAAKm1C,UAAY,QAAUn1C,KAAKk4B,aAAel4B,KAAK+6C,UAAUq2B,kBAAoB,MAGjG9tE,OAAOssB,eAAe0gD,EAAoBxkE,UAAW,qBAAsB,CACvE4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,OAAOpT,KAAKqxE,oBAGpB/tE,OAAOssB,eAAe0gD,EAAoBxkE,UAAW,WAAY,CAC7D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU4hB,GACb,OAAS,CACL,GAAIA,IAAUh1B,KAAM,CAChB,OAAO,UAEN,GAAIg1B,EAAMsc,QAAS,CACpBtc,EAAQA,EAAMsc,YAEb,CACD,OAAO,WAKvBhuC,OAAOssB,eAAe0gD,EAAoBxkE,UAAW,WAAY,CAC7D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUw7B,GACb,OAAO5uC,KAAKsxE,QAAQvlE,MAAM6iC,MAGlCtrC,OAAOssB,eAAe0gD,EAAoBxkE,UAAW,UAAW,CAC5D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUw7B,GACb,OAAO5uC,KAAKsxE,QAAQC,aAAa3iC,MAGzCtrC,OAAOssB,eAAe0gD,EAAoBxkE,UAAW,iBAAkB,CACnE4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACHpT,KAAKwxE,SAASC,aAAa,EAAG,EAAGzxE,KAAKsvB,MAAM1hB,EAAG5N,KAAKsvB,MAAM3rB,EAAG3D,KAAKqiC,MAAQ/2B,KAAK02B,GAAK,IAAKhiC,KAAKyf,OAC9F,OAAOzf,KAAKwxE,YAGpBluE,OAAOssB,eAAe0gD,EAAoBxkE,UAAW,iBAAkB,CACnE4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAKpT,KAAK6xC,aAAc,CACpB,IAAI6/B,EAAK,IACT1xE,KAAK6xC,aAAe,CAChB7a,KAAM06C,EACN36C,IAAK26C,EACLluC,OAAQkuC,EACRjuC,QAASiuC,GAEb1xE,KAAK2xE,WAAW3xE,KAAK6xC,cAEzB,OAAO7xC,KAAK6xC,gBAGpBvuC,OAAOssB,eAAe0gD,EAAoBxkE,UAAW,oBAAqB,CACtE4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUw+B,GACb5xC,KAAK03C,aACL,IAAIwyB,EAASlqE,KAAK4xE,iBAClB,IAAI74B,EAAKmxB,EAAOn+D,MAAM,CAAE6B,EAAGgkC,EAAO5a,KAAMrzB,EAAGiuC,EAAO7a,MAClD,IAAIiiB,EAAKkxB,EAAOn+D,MAAM,CAAE6B,EAAGgkC,EAAOpO,MAAO7/B,EAAGiuC,EAAO7a,MACnD,IAAIkiB,EAAKixB,EAAOn+D,MAAM,CAAE6B,EAAGgkC,EAAOpO,MAAO7/B,EAAGiuC,EAAOnO,SACnD,IAAIyV,EAAKgxB,EAAOn+D,MAAM,CAAE6B,EAAGgkC,EAAO5a,KAAMrzB,EAAGiuC,EAAOnO,SAClD,MAAO,CACHzM,KAAM1rB,KAAKC,IAAIwtC,EAAGnrC,EAAGorC,EAAGprC,EAAGqrC,EAAGrrC,EAAGsrC,EAAGtrC,GACpCmpB,IAAKzrB,KAAKC,IAAIwtC,EAAGp1C,EAAGq1C,EAAGr1C,EAAGs1C,EAAGt1C,EAAGu1C,EAAGv1C,GACnC6/B,MAAOl4B,KAAKyY,IAAIg1B,EAAGnrC,EAAGorC,EAAGprC,EAAGqrC,EAAGrrC,EAAGsrC,EAAGtrC,GACrC61B,OAAQn4B,KAAKyY,IAAIg1B,EAAGp1C,EAAGq1C,EAAGr1C,EAAGs1C,EAAGt1C,EAAGu1C,EAAGv1C,OAIlDL,OAAOssB,eAAe0gD,EAAoBxkE,UAAW,KAAM,CACvD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUY,EAAK8B,EAAU0b,GAC5B,GAAIxxB,KAAKk4B,YAAa,CAClB,OAAOl4B,KAAK+6C,UAAU82B,UAAU7xE,KAAMgU,EAAK8B,EAAU0b,OAEpD,CACD,OAAO,IAAIxB,IAAS,mBAIhC1sB,OAAOssB,eAAe0gD,EAAoBxkE,UAAW,aAAc,CAC/D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WAEHpT,KAAK8xE,aAAaL,aAAazxE,KAAK4N,EAAG5N,KAAK2D,EAAG3D,KAAKsvB,MAAM1hB,EAAG5N,KAAKsvB,MAAM3rB,EAExE3D,KAAKqiC,MAAQ/2B,KAAK02B,GAAK,IAAKhiC,KAAKyf,OACjCzf,KAAKsxE,QAAQhjC,SAAStuC,KAAK8xE,cAC3B,GAAI9xE,KAAKsxC,QAAS,CAEdtxC,KAAKsxE,QAAQS,QAAQ/xE,KAAKsxC,QAAQggC,aAI9ChuE,OAAOssB,eAAe0gD,EAAoBxkE,UAAW,aAAc,CAC/D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUoe,EAASwgD,GACtB,IAAItuE,EAAI1D,KAAKsxE,QACb9/C,EAAQigD,aAAa/tE,EAAE9C,EAAIoxE,EAAYtuE,EAAE5C,EAAIkxE,EAAYtuE,EAAEH,EAAIyuE,EAAYtuE,EAAE6B,EAAIysE,EAAYtuE,EAAEmmE,GAAKmI,EAAYtuE,EAAEomE,GAAKkI,MAG/H1uE,OAAOssB,eAAe0gD,EAAoBxkE,UAAW,mBAAoB,CACrE4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUoe,EAASwgD,EAAYpB,GAClC,IAAIltE,EAAI1D,KAAKsxE,QACb9/C,EAAQigD,aAAa/tE,EAAE9C,EAAIoxE,EAAYtuE,EAAE5C,EAAIkxE,EAAYtuE,EAAEH,EAAIyuE,EAAYtuE,EAAE6B,EAAIysE,GAAatuE,EAAEmmE,GAAK+G,EAAO55C,MAAQg7C,GAAatuE,EAAEomE,GAAK8G,EAAO75C,KAAOi7C,MAG9J1uE,OAAOssB,eAAe0gD,EAAoBxkE,UAAW,kBAAmB,CACpE4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUoe,EAASwgD,EAAYvK,GAClC,GAAIA,EAAMmJ,OAAQ,CACd5wE,KAAKiyE,iBAAiBzgD,EAASi2C,EAAMhoD,OAASuyD,EAAYvK,EAAMmJ,YAE/D,CACD5wE,KAAKkyE,WAAW1gD,EAASi2C,EAAMhoD,OAASuyD,OAIpD1uE,OAAOssB,eAAe0gD,EAAoBxkE,UAAW,SAAU,CAC3D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU++D,GACb,IAAIhiD,EAAQnwB,KACZ,GAAIA,KAAK+zC,UAAY/zC,KAAK00C,aAAe,QAAU10C,KAAK+6C,UAAUq3B,cAAe,CAC7EpyE,KAAK03C,aACL,IAAI26B,EAAeryE,KAAK+6C,UAAUi3B,WAClC,IAAIM,EAAStyE,KAAK+6C,UAAUu3B,OAC5B,IAAIC,EAAevyE,KAAK+6C,UAAUy3B,cAClC,IAAIC,EAASzyE,KAAKukD,KAClB,GAAIkuB,EAAQ,CACRA,EAAO/6B,aAGXtnB,GAAYkiD,GAAQ,SAAU7K,GAC1B,GAAIA,EAAO,CACP,IAAIj2C,EAAUi2C,EAAMj2C,QACpBA,EAAQkhD,OAER,GAAID,EAAQ,CACRA,EAAOE,gBAAgBnhD,EAAS6gD,EAAc5K,GAC9CgL,EAAOG,SAASphD,GAChBA,EAAQqhD,OAEZrhD,EAAQshD,YAAc3iD,EAAM4iD,cAAgB5iD,EAAM+O,MAClD/O,EAAMwiD,gBAAgBnhD,EAAS6gD,EAAc5K,GAC7C,GAAIt3C,EAAMrsB,OAAQ,CACd0tB,EAAQ1tB,OAASqsB,EAAMrsB,YAInCyuE,EAAaG,OAEb,GAAID,GAAUzyE,KAAKgzE,qBAAsB,CACrCP,EAAOP,WAAWK,EAAcF,GAChCI,EAAOG,SAASL,GAChBA,EAAaM,OAEjB7yE,KAAKkyE,WAAWK,EAAcF,GAC9BryE,KAAKizE,QAAQd,GACbI,EAAaW,UACb9iD,GAAYkiD,GAAQ,SAAU7K,GAC1B,GAAIA,EAAO,CACPA,EAAMj2C,QAAQ0hD,kBAMlC5vE,OAAOssB,eAAe0gD,EAAoBxkE,UAAW,UAAW,CAC5D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU++D,GACb,GAAInyE,KAAK00C,aAAe,MAAO,CAC3B,IAAI+yB,EAAQznE,KAAK0wE,QAAUyB,EAC3B1K,EAAM0L,QAAU,SAI5B7vE,OAAOssB,eAAe0gD,EAAoBxkE,UAAW,WAAY,CAC7D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,OAAOpT,KAAK+6C,UAAUq4B,UAAUx9D,IAAI5V,SAG5CsD,OAAOssB,eAAe0gD,EAAoBxkE,UAAW,WAAY,CAC7D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAI+c,EAAQnwB,KACZ,OAAOA,KAAK+6C,UAAUs4B,UAAUC,MAAK,SAAU1lE,GAAK,OAAOA,EAAEwF,QAAU+c,QAG/E7sB,OAAOssB,eAAe0gD,EAAoBxkE,UAAW,UAAW,CAC5D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACHpT,KAAKywE,WAAWO,MAAQ,QAGhC1tE,OAAOssB,eAAe0gD,EAAoBxkE,UAAW,oBAAqB,CACtE4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAIm9D,EAAWvwE,KAAK+6C,UACpB,GAAIw1B,EAASgD,gBAAkBhD,EAASiD,aAAc,CAClD,OAAO,MAEX,GAAIxzE,KAAKmzC,YAAa,CAClB,OAAO,UAEN,GAAInzC,KAAKsxC,QAAS,CACnB,OAAOtxC,KAAKsxC,QAAQmiC,oBAExB,OAAO,SAGf,OAAOnD,EAxhBY,CAyhBrB3gD,IAKF,IAAI+jD,GAAiC,SAAUxjD,GAC3C1F,GAAUkpD,EAAiBxjD,GAC3B,SAASwjD,IACL,IAAIvjD,EAAQD,IAAW,MAAQA,EAAOnkB,MAAM/L,KAAMgM,YAAchM,KAChEsD,OAAOssB,eAAeO,EAAO,sBAAuB,CAChDza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,OAEX9P,OAAOssB,eAAeO,EAAO,eAAgB,CACzCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAeO,EAAO,YAAa,CACtCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,KAEX,OAAO+c,EAEX7sB,OAAOssB,eAAe8jD,EAAgB5nE,UAAW,qBAAsB,CACnE4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,OAAOpT,KAAKmkD,qBAAuBj0B,EAAOpkB,UAAUknE,mBAAmB7pE,KAAKnJ,SAGpFsD,OAAOssB,eAAe8jD,EAAgB5nE,UAAW,WAAY,CACzD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU4hB,GACbA,EAAMsc,QAAUtxC,KAChBA,KAAK2zE,UAAUnuE,KAAKwvB,GACpB,GAAIA,EAAM07C,OAAQ,CACd1wE,KAAK8wE,mBAAmB97C,EAAM07C,YAI1CptE,OAAOssB,eAAe8jD,EAAgB5nE,UAAW,aAAc,CAC3D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU4hB,EAAOzmB,GACpBymB,EAAMsc,QAAUtxC,KAChBA,KAAK2zE,UAAU3rE,OAAOuG,EAAO,EAAGymB,GAChC,GAAIA,EAAM07C,OAAQ,CACd1wE,KAAK8wE,mBAAmB97C,EAAM07C,YAI1CptE,OAAOssB,eAAe8jD,EAAgB5nE,UAAW,cAAe,CAC5D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU4hB,GACbA,EAAMsc,QAAUp5B,UAChB4tB,GAAmB9lC,KAAK2zE,UAAW3+C,MAG3C1xB,OAAOssB,eAAe8jD,EAAgB5nE,UAAW,UAAW,CACxD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU++D,GACb,IAAIhiD,EAAQnwB,KACZkwB,EAAOpkB,UAAUmnE,QAAQ9pE,KAAKnJ,KAAMmyE,GACpC,IAAI5B,EAAWvwE,KAAK+6C,UACpB,GAAI/6C,KAAKk4B,aAAel4B,KAAKmkD,oBAAqB,GAC5CosB,EAASa,kBAEf,IAAI3J,EAAQznE,KAAK0wE,QAAUyB,EAC3B/hD,GAAYpwB,KAAK2zE,WAAW,SAAU3+C,GAClCA,EAAM+9C,cAAgB5iD,EAAM4iD,cAAgB5iD,EAAM+O,MAClDlK,EAAM4+C,OAAOnM,MAEjB,GAAIznE,KAAKk4B,aAAel4B,KAAKmkD,oBAAqB,GAC5CosB,EAASa,sBAIvB9tE,OAAOssB,eAAe8jD,EAAgB5nE,UAAW,qBAAsB,CACnE4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUq0D,GACb,IAAKznE,KAAK6zE,aAAc,CACpB7zE,KAAK6zE,aAAe,GAExBriC,GAAexxC,KAAK6zE,aAAcpM,GAClC,GAAIznE,KAAKsxC,QAAS,CACdtxC,KAAKsxC,QAAQw/B,mBAAmBrJ,OAI5CnkE,OAAOssB,eAAe8jD,EAAgB5nE,UAAW,iBAAkB,CAC/D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU0gE,GACb,GAAIA,SAAc,EAAG,CAAEA,EAAO,MAC9B5jD,EAAOpkB,UAAUwmC,eAAenpC,KAAKnJ,MACrC,GAAI8zE,GAAQ9zE,KAAK6zE,aAAc,CAC3BzjD,GAAYpwB,KAAK6zE,cAAc,SAAUpM,GAAS,OAAOA,EAAMuJ,MAAQ,YAInF1tE,OAAOssB,eAAe8jD,EAAgB5nE,UAAW,UAAW,CACxD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH8c,EAAOpkB,UAAUuI,QAAQlL,KAAKnJ,MAC9B,GAAIA,KAAK6zE,aAAc,CACnBzjD,GAAYpwB,KAAK6zE,cAAc,SAAUpM,GACrCA,EAAMuJ,MAAQ,YAK9B,OAAO0C,EA7HQ,CA8HjBpD,IAKF,SAASyD,GAASniC,EAAQhD,GACtBgD,EAAO5a,KAAO1rB,KAAKC,IAAIqmC,EAAO5a,KAAM4X,EAAMhhC,GAC1CgkC,EAAO7a,IAAMzrB,KAAKC,IAAIqmC,EAAO7a,IAAK6X,EAAMjrC,GACxCiuC,EAAOpO,MAAQl4B,KAAKyY,IAAI6tB,EAAOpO,MAAOoL,EAAMhhC,GAC5CgkC,EAAOnO,OAASn4B,KAAKyY,IAAI6tB,EAAOnO,OAAQmL,EAAMjrC,GAKlD,IAAIqwE,GAAoB,WACpB,SAASA,KAET1wE,OAAOssB,eAAeokD,EAAGloE,UAAW,WAAY,CAC5C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU6gE,EAAUC,OAE/B5wE,OAAOssB,eAAeokD,EAAGloE,UAAW,OAAQ,CACxC4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU6gE,OAErB3wE,OAAOssB,eAAeokD,EAAGloE,UAAW,YAAa,CAC7C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU69D,OAErB,OAAO+C,EArBL,GA0BN,IAAIG,GAA2B,SAAUjkD,GACrC1F,GAAU2pD,EAAWjkD,GACrB,SAASikD,EAAU9wD,GACf,IAAI8M,EAAQD,EAAO/mB,KAAKnJ,OAASA,KACjCsD,OAAOssB,eAAeO,EAAO,QAAS,CAClCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAOiQ,IAEX,OAAO8M,EAEX7sB,OAAOssB,eAAeukD,EAAUroE,UAAW,WAAY,CACnD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUoe,EAAS4iD,GACtB,GAAIA,IAAel8D,UAAW,CAC1BsZ,EAAQ6iD,UAAYD,MAEnB,CACD5iD,EAAQ6iD,UAAYr0E,KAAKqjB,UAIrC,OAAO8wD,EAzBE,CA0BXH,IAIF,IAAIM,GAAyB,SAAUpkD,GACnC1F,GAAU8pD,EAASpkD,GACnB,SAASokD,EAAQC,GACb,IAAIpkD,EAAQD,EAAO/mB,KAAKnJ,OAASA,KACjCsD,OAAOssB,eAAeO,EAAO,cAAe,CACxCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAOmhE,IAEX,OAAOpkD,EAEX7sB,OAAOssB,eAAe0kD,EAAQxoE,UAAW,WAAY,CACjD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUoe,EAAS0iD,GACtB1iD,EAAQ6pB,OACR,GAAIr7C,KAAKu0E,YAAa,CAClB/iD,EAAQqsB,YAAc,GACtBrsB,EAAQssB,WAAa,EACrBtsB,EAAQusB,cAAgB,EACxBvsB,EAAQwsB,cAAgB,MAIpC,OAAOs2B,EA1BA,CA2BTN,IAIF,IAAIQ,GAA2B,SAAUtkD,GACrC1F,GAAUgqD,EAAWtkD,GACrB,SAASskD,IACL,OAAOtkD,IAAW,MAAQA,EAAOnkB,MAAM/L,KAAMgM,YAAchM,KAE/DsD,OAAOssB,eAAe4kD,EAAU1oE,UAAW,WAAY,CACnD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUoe,EAAS0iD,GACtB1iD,EAAQy6B,YAGhB,OAAOuoB,EAbE,CAcXR,IAIF,IAAIS,GAA2B,SAAUvkD,GACrC1F,GAAUiqD,EAAWvkD,GACrB,SAASukD,EAAUlxD,EAAOF,EAAOs7B,GAC7B,IAAIxuB,EAAQD,EAAO/mB,KAAKnJ,OAASA,KACjCsD,OAAOssB,eAAeO,EAAO,QAAS,CAClCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAOmQ,IAEXjgB,OAAOssB,eAAeO,EAAO,QAAS,CAClCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAOiQ,IAEX/f,OAAOssB,eAAeO,EAAO,WAAY,CACrCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAOurC,IAEX,OAAOxuB,EAEX7sB,OAAOssB,eAAe6kD,EAAU3oE,UAAW,WAAY,CACnD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUoe,EAAS4iD,GACtB,GAAIA,IAAel8D,UAAW,CAC1BsZ,EAAQkjD,YAAcN,MAErB,CACD5iD,EAAQkjD,YAAc10E,KAAKqjB,MAE/BmO,EAAQmjD,UAAY30E,KAAKujB,MACzB,GAAIvjB,KAAK2+C,SAAU,CACfntB,EAAQmtB,SAAW3+C,KAAK2+C,aAIpC,OAAO81B,EAzCE,CA0CXT,IAIF,IAAIY,GAA0B,SAAU1kD,GACpC1F,GAAUoqD,EAAU1kD,GACpB,SAAS0kD,EAASC,GACd,IAAI1kD,EAAQD,EAAO/mB,KAAKnJ,OAASA,KACjCsD,OAAOssB,eAAeO,EAAO,OAAQ,CACjCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAOyhE,IAEX,OAAO1kD,EAEX7sB,OAAOssB,eAAeglD,EAAS9oE,UAAW,WAAY,CAClD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUoe,EAAS0iD,GACtB1iD,EAAQsrB,YAAY98C,KAAK60E,SAGjC,OAAOD,EApBC,CAqBVZ,IAIF,IAAIc,GAAgC,SAAU5kD,GAC1C1F,GAAUsqD,EAAgB5kD,GAC1B,SAAS4kD,EAAeC,GACpB,IAAI5kD,EAAQD,EAAO/mB,KAAKnJ,OAASA,KACjCsD,OAAOssB,eAAeO,EAAO,aAAc,CACvCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO2hE,IAEX,OAAO5kD,EAEX7sB,OAAOssB,eAAeklD,EAAehpE,UAAW,WAAY,CACxD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUoe,EAAS0iD,GACtB1iD,EAAQwjD,eAAiBh1E,KAAK+0E,cAGtC,OAAOD,EApBO,CAqBhBd,IAIF,IAAIiB,GAA0B,SAAU/kD,GACpC1F,GAAUyqD,EAAU/kD,GACpB,SAAS+kD,EAASrnE,EAAGjK,EAAG4f,EAAOs0B,GAC3B,IAAI1nB,EAAQD,EAAO/mB,KAAKnJ,OAASA,KACjCsD,OAAOssB,eAAeO,EAAO,IAAK,CAC9Bza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAOxF,IAEXtK,OAAOssB,eAAeO,EAAO,IAAK,CAC9Bza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAOzP,IAEXL,OAAOssB,eAAeO,EAAO,QAAS,CAClCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAOmQ,IAEXjgB,OAAOssB,eAAeO,EAAO,SAAU,CACnCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAOykC,IAEX,OAAO1nB,EAEX7sB,OAAOssB,eAAeqlD,EAASnpE,UAAW,OAAQ,CAC9C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUoe,GACbA,EAAQ0jD,KAAKl1E,KAAK4N,EAAG5N,KAAK2D,EAAG3D,KAAKujB,MAAOvjB,KAAK63C,WAGtDv0C,OAAOssB,eAAeqlD,EAASnpE,UAAW,YAAa,CACnD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUw+B,GACb,IAAI7uC,EAAI/C,KAAK4N,EACb,IAAI/N,EAAIG,KAAK2D,EACb,IAAIpC,EAAIwB,EAAI/C,KAAKujB,MACjB,IAAIziB,EAAIjB,EAAIG,KAAK63C,OACjBk8B,GAASniC,EAAQ,CAAEhkC,EAAG7K,EAAGY,EAAG9D,IAC5Bk0E,GAASniC,EAAQ,CAAEhkC,EAAGrM,EAAGoC,EAAG9D,IAC5Bk0E,GAASniC,EAAQ,CAAEhkC,EAAG7K,EAAGY,EAAG7C,IAC5BizE,GAASniC,EAAQ,CAAEhkC,EAAGrM,EAAGoC,EAAG7C,OAGpC,OAAOm0E,EArDC,CAsDVjB,IAIF,IAAImB,GAA4B,SAAUjlD,GACtC1F,GAAU2qD,EAAYjlD,GACtB,SAASilD,EAAWvnE,EAAGjK,EAAGk/B,GACtB,IAAI1S,EAAQD,EAAO/mB,KAAKnJ,OAASA,KACjCsD,OAAOssB,eAAeO,EAAO,IAAK,CAC9Bza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAOxF,IAEXtK,OAAOssB,eAAeO,EAAO,IAAK,CAC9Bza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAOzP,IAEXL,OAAOssB,eAAeO,EAAO,SAAU,CACnCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAOyvB,IAEX,OAAO1S,EAEX7sB,OAAOssB,eAAeulD,EAAWrpE,UAAW,OAAQ,CAChD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUoe,GACbA,EAAQq5B,OAAO7qD,KAAK4N,EAAI5N,KAAK6iC,OAAQ7iC,KAAK2D,GAC1C6tB,EAAQkS,IAAI1jC,KAAK4N,EAAG5N,KAAK2D,EAAG3D,KAAK6iC,OAAQ,EAAG,EAAIv3B,KAAK02B,OAI7D1+B,OAAOssB,eAAeulD,EAAWrpE,UAAW,YAAa,CACrD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUw+B,GACbmiC,GAASniC,EAAQ,CAAEhkC,EAAG5N,KAAK4N,EAAI5N,KAAK6iC,OAAQl/B,EAAG3D,KAAK2D,EAAI3D,KAAK6iC,SAC7DkxC,GAASniC,EAAQ,CAAEhkC,EAAG5N,KAAK4N,EAAI5N,KAAK6iC,OAAQl/B,EAAG3D,KAAK2D,EAAI3D,KAAK6iC,YAGrE,OAAOsyC,EA3CG,CA4CZnB,IAIF,IAAIoB,GAA6B,SAAUllD,GACvC1F,GAAU4qD,EAAallD,GACvB,SAASklD,EAAYxnE,EAAGjK,EAAG0xE,EAASC,GAChC,IAAInlD,EAAQD,EAAO/mB,KAAKnJ,OAASA,KACjCsD,OAAOssB,eAAeO,EAAO,IAAK,CAC9Bza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAOxF,IAEXtK,OAAOssB,eAAeO,EAAO,IAAK,CAC9Bza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAOzP,IAEXL,OAAOssB,eAAeO,EAAO,UAAW,CACpCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAOiiE,IAEX/xE,OAAOssB,eAAeO,EAAO,UAAW,CACpCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAOkiE,IAEX,OAAOnlD,EAEX7sB,OAAOssB,eAAewlD,EAAYtpE,UAAW,OAAQ,CACjD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUoe,GACbA,EAAQ+jD,QAAQ,EAAG,EAAGv1E,KAAKq1E,QAASr1E,KAAKs1E,QAAS,EAAG,EAAGhqE,KAAK02B,GAAK,MAI1E1+B,OAAOssB,eAAewlD,EAAYtpE,UAAW,YAAa,CACtD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUw+B,GACbmiC,GAASniC,EAAQ,CAAEhkC,EAAG5N,KAAK4N,EAAI5N,KAAKq1E,QAAS1xE,EAAG3D,KAAK2D,EAAI3D,KAAKs1E,UAC9DvB,GAASniC,EAAQ,CAAEhkC,EAAG5N,KAAK4N,EAAI5N,KAAKq1E,QAAS1xE,EAAG3D,KAAK2D,EAAI3D,KAAKs1E,aAGtE,OAAOF,EAhDI,CAiDbpB,IAIF,IAAIwB,GAAqB,SAAUtlD,GAC/B1F,GAAUgrD,EAAKtlD,GACf,SAASslD,EAAI/yC,EAAIC,EAAIG,EAAQF,EAAYC,EAAU6yC,GAC/C,IAAItlD,EAAQD,EAAO/mB,KAAKnJ,OAASA,KACjCsD,OAAOssB,eAAeO,EAAO,KAAM,CAC/Bza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAOqvB,IAEXn/B,OAAOssB,eAAeO,EAAO,KAAM,CAC/Bza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAOsvB,IAEXp/B,OAAOssB,eAAeO,EAAO,SAAU,CACnCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAOyvB,IAEXv/B,OAAOssB,eAAeO,EAAO,aAAc,CACvCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAOuvB,IAEXr/B,OAAOssB,eAAeO,EAAO,WAAY,CACrCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAOwvB,IAEXt/B,OAAOssB,eAAeO,EAAO,gBAAiB,CAC1Cza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAOqiE,IAEX,OAAOtlD,EAEX7sB,OAAOssB,eAAe4lD,EAAI1pE,UAAW,OAAQ,CACzC4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUoe,GACb,GAAIxxB,KAAK6iC,OAAS,EAAG,CACjBrR,EAAQkS,IAAI1jC,KAAKyiC,GAAIziC,KAAK0iC,GAAI1iC,KAAK6iC,OAAQ7iC,KAAK2iC,WAAY3iC,KAAK4iC,SAAU5iC,KAAKy1E,mBAI5FnyE,OAAOssB,eAAe4lD,EAAI1pE,UAAW,YAAa,CAC9C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUw+B,GACb,IAAI8jC,EAAYC,GAAmB31E,KAAKyiC,GAAIziC,KAAK0iC,GAAI1iC,KAAK2iC,WAAaizC,GAAe51E,KAAK4iC,SAAWgzC,GAAe51E,KAAK6iC,QAC1HkxC,GAASniC,EAAQ,CAAEhkC,EAAG8nE,EAAU1+C,KAAMrzB,EAAG+xE,EAAU3+C,MACnDg9C,GAASniC,EAAQ,CAAEhkC,EAAG8nE,EAAUlyC,MAAO7/B,EAAG+xE,EAAUjyC,YAG5D,OAAO+xC,EA9DJ,CA+DLxB,IAIF,IAAI6B,GAAuB,SAAU3lD,GACjC1F,GAAUqrD,EAAO3lD,GACjB,SAAS2lD,EAAMhK,EAAIC,EAAIC,EAAIC,EAAInpC,GAC3B,IAAI1S,EAAQD,EAAO/mB,KAAKnJ,OAASA,KACjCsD,OAAOssB,eAAeO,EAAO,KAAM,CAC/Bza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAOy4D,IAEXvoE,OAAOssB,eAAeO,EAAO,KAAM,CAC/Bza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO04D,IAEXxoE,OAAOssB,eAAeO,EAAO,KAAM,CAC/Bza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO24D,IAEXzoE,OAAOssB,eAAeO,EAAO,KAAM,CAC/Bza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO44D,IAEX1oE,OAAOssB,eAAeO,EAAO,SAAU,CACnCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAOyvB,IAEX,OAAO1S,EAEX7sB,OAAOssB,eAAeimD,EAAM/pE,UAAW,OAAQ,CAC3C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUoe,GACb,GAAIxxB,KAAK6iC,OAAS,EAAG,CACjBrR,EAAQw5B,MAAMhrD,KAAK6rE,GAAI7rE,KAAK8rE,GAAI9rE,KAAK+rE,GAAI/rE,KAAKgsE,GAAIhsE,KAAK6iC,YAKnEv/B,OAAOssB,eAAeimD,EAAM/pE,UAAW,YAAa,CAChD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU69D,OA4BrB,OAAO4E,EA/EF,CAgFP7B,IAIF,IAAI8B,GAAwB,SAAU5lD,GAClC1F,GAAUsrD,EAAQ5lD,GAClB,SAAS4lD,EAAOloE,EAAGjK,GACf,IAAIwsB,EAAQD,EAAO/mB,KAAKnJ,OAASA,KACjCsD,OAAOssB,eAAeO,EAAO,IAAK,CAC9Bza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAOxF,IAEXtK,OAAOssB,eAAeO,EAAO,IAAK,CAC9Bza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAOzP,IAEX,OAAOwsB,EAEX7sB,OAAOssB,eAAekmD,EAAOhqE,UAAW,OAAQ,CAC5C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUoe,GACbA,EAAQu5B,OAAO/qD,KAAK4N,EAAG5N,KAAK2D,MAGpCL,OAAOssB,eAAekmD,EAAOhqE,UAAW,YAAa,CACjD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUw+B,GACbmiC,GAASniC,EAAQ,CAAEhkC,EAAG5N,KAAK4N,EAAGjK,EAAG3D,KAAK2D,OAG9C,OAAOmyE,EAlCD,CAmCR9B,IAIF,IAAI+B,GAAwB,SAAU7lD,GAClC1F,GAAUurD,EAAQ7lD,GAClB,SAAS6lD,EAAOnoE,EAAGjK,GACf,IAAIwsB,EAAQD,EAAO/mB,KAAKnJ,OAASA,KACjCsD,OAAOssB,eAAeO,EAAO,IAAK,CAC9Bza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAOxF,IAEXtK,OAAOssB,eAAeO,EAAO,IAAK,CAC9Bza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAOzP,IAEX,OAAOwsB,EAEX7sB,OAAOssB,eAAemmD,EAAOjqE,UAAW,OAAQ,CAC5C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUoe,GACbA,EAAQq5B,OAAO7qD,KAAK4N,EAAG5N,KAAK2D,MAGpCL,OAAOssB,eAAemmD,EAAOjqE,UAAW,YAAa,CACjD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUw+B,GACbmiC,GAASniC,EAAQ,CAAEhkC,EAAG5N,KAAK4N,EAAGjK,EAAG3D,KAAK2D,OAG9C,OAAOoyE,EAlCD,CAmCR/B,IAIF,IAAIgC,GAA2B,SAAU9lD,GACrC1F,GAAUwrD,EAAW9lD,GACrB,SAAS8lD,IACL,OAAO9lD,IAAW,MAAQA,EAAOnkB,MAAM/L,KAAMgM,YAAchM,KAE/DsD,OAAOssB,eAAeomD,EAAUlqE,UAAW,OAAQ,CAC/C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUoe,GACbA,EAAQ05B,eAGhB,OAAO8qB,EAbE,CAcXhC,IAIF,IAAIiC,GAA+B,SAAU/lD,GACzC1F,GAAUyrD,EAAe/lD,GACzB,SAAS+lD,EAAcC,EAAKC,EAAKC,EAAMC,EAAMC,EAAKC,GAC9C,IAAIpmD,EAAQD,EAAO/mB,KAAKnJ,OAASA,KACjCsD,OAAOssB,eAAeO,EAAO,MAAO,CAChCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO8iE,IAEX5yE,OAAOssB,eAAeO,EAAO,MAAO,CAChCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO+iE,IAEX7yE,OAAOssB,eAAeO,EAAO,OAAQ,CACjCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAOgjE,IAEX9yE,OAAOssB,eAAeO,EAAO,OAAQ,CACjCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAOijE,IAEX/yE,OAAOssB,eAAeO,EAAO,MAAO,CAChCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAOkjE,IAEXhzE,OAAOssB,eAAeO,EAAO,MAAO,CAChCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAOmjE,IAEX,OAAOpmD,EAEX7sB,OAAOssB,eAAeqmD,EAAcnqE,UAAW,OAAQ,CACnD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUoe,GACbA,EAAQglD,cAAcx2E,KAAKk2E,IAAKl2E,KAAKm2E,IAAKn2E,KAAKo2E,KAAMp2E,KAAKq2E,KAAMr2E,KAAKs2E,IAAKt2E,KAAKu2E,QAIvFjzE,OAAOssB,eAAeqmD,EAAcnqE,UAAW,YAAa,CACxD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUw+B,GACbmiC,GAASniC,EAAQ,CAAEhkC,EAAG5N,KAAKk2E,IAAKvyE,EAAG3D,KAAKm2E,MACxCpC,GAASniC,EAAQ,CAAEhkC,EAAG5N,KAAKo2E,KAAMzyE,EAAG3D,KAAKq2E,OACzCtC,GAASniC,EAAQ,CAAEhkC,EAAG5N,KAAKs2E,IAAK3yE,EAAG3D,KAAKu2E,SAGhD,OAAON,EA7DM,CA8DfjC,IAIF,IAAIyC,GAAkC,SAAUvmD,GAC5C1F,GAAUisD,EAAkBvmD,GAC5B,SAASumD,EAAiBP,EAAKC,EAAKG,EAAKC,GACrC,IAAIpmD,EAAQD,EAAO/mB,KAAKnJ,OAASA,KACjCsD,OAAOssB,eAAeO,EAAO,MAAO,CAChCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO8iE,IAEX5yE,OAAOssB,eAAeO,EAAO,MAAO,CAChCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO+iE,IAEX7yE,OAAOssB,eAAeO,EAAO,MAAO,CAChCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAOkjE,IAEXhzE,OAAOssB,eAAeO,EAAO,MAAO,CAChCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAOmjE,IAEX,OAAOpmD,EAEX7sB,OAAOssB,eAAe6mD,EAAiB3qE,UAAW,OAAQ,CACtD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUoe,GACbA,EAAQklD,iBAAiB12E,KAAKk2E,IAAKl2E,KAAKm2E,IAAKn2E,KAAKs2E,IAAKt2E,KAAKu2E,QAIpEjzE,OAAOssB,eAAe6mD,EAAiB3qE,UAAW,YAAa,CAC3D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUw+B,GACbmiC,GAASniC,EAAQ,CAAEhkC,EAAG5N,KAAKk2E,IAAKvyE,EAAG3D,KAAKm2E,MACxCpC,GAASniC,EAAQ,CAAEhkC,EAAG5N,KAAKs2E,IAAK3yE,EAAG3D,KAAKu2E,SAGhD,OAAOE,EAhDS,CAiDlBzC,IAIF,IAAI2C,GAAwB,SAAUzmD,GAClC1F,GAAUmsD,EAAQzmD,GAClB,SAASymD,EAAOtzD,EAAOuT,EAAMggD,EAASC,EAASp9B,GAC3C,IAAItpB,EAAQD,EAAO/mB,KAAKnJ,OAASA,KACjCsD,OAAOssB,eAAeO,EAAO,QAAS,CAClCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAOiQ,IAEX/f,OAAOssB,eAAeO,EAAO,OAAQ,CACjCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAOwjB,IAEXtzB,OAAOssB,eAAeO,EAAO,UAAW,CACpCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAOwjE,IAEXtzE,OAAOssB,eAAeO,EAAO,UAAW,CACpCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAOyjE,IAEXvzE,OAAOssB,eAAeO,EAAO,UAAW,CACpCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAOqmC,IAEX,OAAOtpB,EAEX7sB,OAAOssB,eAAe+mD,EAAO7qE,UAAW,WAAY,CAChD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUoe,EAAS0iD,GACtB,GAAIl0E,KAAKy5C,QAAS,CACdjoB,EAAQ6iD,UAAYr0E,KAAKqjB,MAE7BmO,EAAQqsB,YAAc79C,KAAKqjB,MAC3BmO,EAAQssB,WAAa99C,KAAK42B,KAC1BpF,EAAQusB,cAAgB/9C,KAAK42E,QAC7BplD,EAAQwsB,cAAgBh+C,KAAK62E,WAGrC,OAAOF,EAlDD,CAmDR3C,IAIF,IAAI8C,GAA+B,SAAU5mD,GACzC1F,GAAUssD,EAAe5mD,GACzB,SAAS4mD,EAAc/6B,EAAOx4B,EAAOs0B,EAAQjqC,EAAGjK,GAC5C,IAAIwsB,EAAQD,EAAO/mB,KAAKnJ,OAASA,KACjCsD,OAAOssB,eAAeO,EAAO,QAAS,CAClCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO2oC,IAEXz4C,OAAOssB,eAAeO,EAAO,QAAS,CAClCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAOmQ,IAEXjgB,OAAOssB,eAAeO,EAAO,SAAU,CACnCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAOykC,IAEXv0C,OAAOssB,eAAeO,EAAO,IAAK,CAC9Bza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAOxF,IAEXtK,OAAOssB,eAAeO,EAAO,IAAK,CAC9Bza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAOzP,IAEX,OAAOwsB,EAEX7sB,OAAOssB,eAAeknD,EAAchrE,UAAW,OAAQ,CACnD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUoe,GACbA,EAAQw+C,UAAUhwE,KAAK+7C,MAAO/7C,KAAK4N,EAAG5N,KAAK2D,EAAG3D,KAAKujB,MAAOvjB,KAAK63C,WAIvEv0C,OAAOssB,eAAeknD,EAAchrE,UAAW,YAAa,CACxD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUw+B,GACbmiC,GAASniC,EAAQ,CAAEhkC,EAAG5N,KAAK4N,EAAGjK,EAAG3D,KAAK2D,IACtCowE,GAASniC,EAAQ,CAAEhkC,EAAG5N,KAAKujB,MAAO5f,EAAG3D,KAAK63C,YAGlD,OAAOi/B,EAtDM,CAuDf9C,IAIF,IAAI+C,GAAgC,SAAU7mD,GAC1C1F,GAAUusD,EAAgB7mD,GAC1B,SAAS6mD,IACL,IAAI5mD,EAAQD,IAAW,MAAQA,EAAOnkB,MAAM/L,KAAMgM,YAAchM,KAChEsD,OAAOssB,eAAeO,EAAO,cAAe,CACxCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,KAEX9P,OAAOssB,eAAeO,EAAO,YAAa,CACtCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAOqpC,GAAUS,SAErB55C,OAAOssB,eAAeO,EAAO,cAAe,CACxCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,QAEX9P,OAAOssB,eAAeO,EAAO,aAAc,CACvCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAeO,EAAO,eAAgB,CACzCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB,OAAO+c,EAEX7sB,OAAOssB,eAAemnD,EAAejrE,UAAW,QAAS,CACrD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH8c,EAAOpkB,UAAUwI,MAAMnL,KAAKnJ,MAC5BA,KAAKg3E,YAAYhzE,OAAS,KAGlCV,OAAOssB,eAAemnD,EAAejrE,UAAW,UAAW,CACvD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU+Y,GACbnsB,KAAKg3E,YAAYxxE,KAAK2mB,MAG9B7oB,OAAOssB,eAAemnD,EAAejrE,UAAW,YAAa,CACzD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUiQ,EAAO6b,GACpB,GAAIA,SAAe,EAAG,CAAEA,EAAQ,EAChCl/B,KAAKi3E,WAAa/3C,EAClB,GAAI7b,EAAO,CACP,GAAIA,aAAiB0b,GAAO,CACxB/+B,KAAKk3E,QAAQ,IAAI/C,GAAU9wD,EAAM8zD,MAAMj4C,SAEtC,CACDl/B,KAAKq2C,WAAa,KAClBr2C,KAAKk3E,QAAQ,IAAI/C,GAAU9wD,SAG9B,CACDrjB,KAAKk3E,QAAQ,IAAI/C,GAAU,iBAAmBj1C,EAAQ,UAIlE57B,OAAOssB,eAAemnD,EAAejrE,UAAW,UAAW,CACvD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACHpT,KAAKk3E,QAAQ,IAAI5C,GAAQt0E,KAAKo3E,iBAGtC9zE,OAAOssB,eAAemnD,EAAejrE,UAAW,YAAa,CACzD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACHpT,KAAKk3E,QAAQ,IAAI1C,OAGzBlxE,OAAOssB,eAAemnD,EAAejrE,UAAW,YAAa,CACzD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUmQ,EAAOF,EAAO6b,EAAOyf,GAClC,GAAIp7B,SAAe,EAAG,CAAEA,EAAQ,EAChC,GAAI2b,SAAe,EAAG,CAAEA,EAAQ,EAChCl/B,KAAKq3E,aAAen4C,EACpB,GAAI7b,EAAO,CACP,GAAIA,aAAiB0b,GAAO,CACxB/+B,KAAKk3E,QAAQ,IAAIzC,GAAUlxD,EAAOF,EAAM8zD,MAAMj4C,GAAQyf,QAErD,CACD3+C,KAAKk3E,QAAQ,IAAIzC,GAAUlxD,EAAOF,EAAOs7B,SAG5C,CACD3+C,KAAKk3E,QAAQ,IAAIzC,GAAUlxD,EAAO,iBAAmB2b,EAAQ,IAAKyf,QAI9Er7C,OAAOssB,eAAemnD,EAAejrE,UAAW,cAAe,CAC3D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUyhE,GACb70E,KAAKk3E,QAAQ,IAAItC,GAASC,EAAOA,EAAO,QAGhDvxE,OAAOssB,eAAemnD,EAAejrE,UAAW,oBAAqB,CACjE4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU2hE,GACb,GAAIA,SAAoB,EAAG,CAAEA,EAAa,EAC1C/0E,KAAKk3E,QAAQ,IAAIpC,GAAeC,OAGxCzxE,OAAOssB,eAAemnD,EAAejrE,UAAW,WAAY,CACxD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUxF,EAAGjK,EAAG4f,EAAOs0B,GAC1B73C,KAAKk3E,QAAQ,IAAIjC,GAASrnE,EAAGjK,EAAG4f,EAAOs0B,OAG/Cv0C,OAAOssB,eAAemnD,EAAejrE,UAAW,aAAc,CAC1D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUxF,EAAGjK,EAAGk/B,GACnB7iC,KAAKk3E,QAAQ,IAAI/B,GAAWvnE,EAAGjK,EAAGk/B,OAG1Cv/B,OAAOssB,eAAemnD,EAAejrE,UAAW,cAAe,CAC3D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUxF,EAAGjK,EAAG0xE,EAASC,GAC5Bt1E,KAAKk3E,QAAQ,IAAI9B,GAAYxnE,EAAGjK,EAAG0xE,EAASC,OAGpDhyE,OAAOssB,eAAemnD,EAAejrE,UAAW,MAAO,CACnD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUqvB,EAAIC,EAAIG,EAAQF,EAAYC,EAAU6yC,GACnD,GAAIA,SAAuB,EAAG,CAAEA,EAAgB,MAChDz1E,KAAKk3E,QAAQ,IAAI1B,GAAI/yC,EAAIC,EAAIG,EAAQF,EAAYC,EAAU6yC,OAGnEnyE,OAAOssB,eAAemnD,EAAejrE,UAAW,QAAS,CACrD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUy4D,EAAIC,EAAIC,EAAIC,EAAInpC,GAC7B7iC,KAAKk3E,QAAQ,IAAIrB,GAAMhK,EAAIC,EAAIC,EAAIC,EAAInpC,OAG/Cv/B,OAAOssB,eAAemnD,EAAejrE,UAAW,SAAU,CACtD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUxF,EAAGjK,GAChB3D,KAAKk3E,QAAQ,IAAIpB,GAAOloE,EAAGjK,OAGnCL,OAAOssB,eAAemnD,EAAejrE,UAAW,SAAU,CACtD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUxF,EAAGjK,GAChB3D,KAAKk3E,QAAQ,IAAInB,GAAOnoE,EAAGjK,OAGnCL,OAAOssB,eAAemnD,EAAejrE,UAAW,gBAAiB,CAC7D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU8iE,EAAKC,EAAKC,EAAMC,EAAMC,EAAKC,GACxCv2E,KAAKk3E,QAAQ,IAAIjB,GAAcC,EAAKC,EAAKC,EAAMC,EAAMC,EAAKC,OAGlEjzE,OAAOssB,eAAemnD,EAAejrE,UAAW,mBAAoB,CAChE4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU8iE,EAAKC,EAAKG,EAAKC,GAC5Bv2E,KAAKk3E,QAAQ,IAAIT,GAAiBP,EAAKC,EAAKG,EAAKC,OAGzDjzE,OAAOssB,eAAemnD,EAAejrE,UAAW,YAAa,CACzD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACHpT,KAAKk3E,QAAQ,IAAIlB,OAGzB1yE,OAAOssB,eAAemnD,EAAejrE,UAAW,SAAU,CACtD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUiQ,EAAOuT,EAAMggD,EAASC,EAASp9B,GAC5C,GAAI7iB,SAAc,EAAG,CAAEA,EAAO,EAC9B,GAAIggD,SAAiB,EAAG,CAAEA,EAAU,EACpC,GAAIC,SAAiB,EAAG,CAAEA,EAAU,EACpC72E,KAAKo3E,YAAc,KACnBp3E,KAAKk3E,QAAQ,IAAIP,GAAOl9B,EAAUp2B,EAAM8zD,MAAM19B,GAAWp2B,EAAM8zD,MAAMn3E,KAAKi3E,YAAcj3E,KAAKq3E,cAAezgD,EAAMggD,EAASC,OAGnIvzE,OAAOssB,eAAemnD,EAAejrE,UAAW,QAAS,CACrD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU2oC,EAAOx4B,EAAOs0B,EAAQjqC,EAAGjK,GACtC3D,KAAKk3E,QAAQ,IAAIJ,GAAc/6B,EAAOx4B,EAAOs0B,EAAQjqC,EAAGjK,OAKhEL,OAAOssB,eAAemnD,EAAejrE,UAAW,UAAW,CACvD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUsW,GACb,IAAIyG,EAAQnwB,KACZ,IAAI4N,EAAI,EACR,IAAIjK,EAAI,EACR,IAAI2zE,EAAM,KACV,IAAIC,EAAM,KACV,IAAIC,EAAO,KACX,IAAIC,EAAO,KACX,IAAIC,EAAkB,sDACtB,IAAIC,EAAc,sHAClB,IAAIlgD,EACJ,OAAQA,EAAQigD,EAAgBnqD,KAAK7D,MAAW,KAAM,CAClD,IAAIkuD,EAASngD,EAAM,GACnB,IAAIgW,EAAOhW,EAAM,GACjB,IAAI9jB,EAAO,GACX,OAAQ8jB,EAAQkgD,EAAYpqD,KAAKkgB,MAAW,KAAM,CAC9C95B,EAAKnO,KAAKiyB,EAAM,IAGpB,GAAImgD,IAAW,KAAOA,IAAW,KAAOA,IAAW,KAAOA,IAAW,IAAK,CACtEN,EAAM,KACNC,EAAM,KAGV,GAAIK,IAAW,KAAOA,IAAW,KAAOA,IAAW,KAAOA,IAAW,IAAK,CACtEJ,EAAO,KACPC,EAAO,KAEX,OAAQG,GACJ,IAAK,IACD5I,GAAc4I,EAAQjkE,EAAK3P,OAAQ,GACnC4J,GAAK+F,EAAK,GACVhQ,GAAKgQ,EAAK,GACV3T,KAAK6qD,OAAOj9C,EAAGjK,GACf,IAAK,IAAI3C,EAAI,EAAGA,EAAI2S,EAAK3P,OAAQhD,GAAK,EAAG,CACrC4M,GAAK+F,EAAK3S,GACV2C,GAAKgQ,EAAK3S,EAAI,GACdhB,KAAK+qD,OAAOn9C,EAAGjK,GAEnB,MACJ,IAAK,IACDqrE,GAAc4I,EAAQjkE,EAAK3P,OAAQ,GACnC4J,IAAM+F,EAAK,GACXhQ,IAAMgQ,EAAK,GACX3T,KAAK6qD,OAAOj9C,EAAGjK,GACf,IAAK,IAAI3C,EAAI,EAAGA,EAAI2S,EAAK3P,OAAQhD,GAAK,EAAG,CACrC4M,IAAM+F,EAAK3S,GACX2C,IAAMgQ,EAAK3S,EAAI,GACfhB,KAAK+qD,OAAOn9C,EAAGjK,GAEnB,MACJ,IAAK,IACDqrE,GAAc4I,EAAQjkE,EAAK3P,OAAQ,GACnC,IAAK,IAAIhD,EAAI,EAAGA,EAAI2S,EAAK3P,OAAQhD,GAAK,EAAG,CACrC4M,GAAK+F,EAAK3S,GACV2C,GAAKgQ,EAAK3S,EAAI,GACdhB,KAAK+qD,OAAOn9C,EAAGjK,GAEnB,MACJ,IAAK,IACDqrE,GAAc4I,EAAQjkE,EAAK3P,OAAQ,GACnC,IAAK,IAAIhD,EAAI,EAAGA,EAAI2S,EAAK3P,OAAQhD,GAAK,EAAG,CACrC4M,IAAM+F,EAAK3S,GACX2C,IAAMgQ,EAAK3S,EAAI,GACfhB,KAAK+qD,OAAOn9C,EAAGjK,GAEnB,MACJ,IAAK,IACDorE,GAAa6I,EAAQjkE,EAAK3P,OAAQ,GAClC,IAAK,IAAIhD,EAAI,EAAGA,EAAI2S,EAAK3P,SAAUhD,EAAG,CAClC4M,GAAK+F,EAAK3S,GACVhB,KAAK+qD,OAAOn9C,EAAGjK,GAEnB,MACJ,IAAK,IACDorE,GAAa6I,EAAQjkE,EAAK3P,OAAQ,GAClC,IAAK,IAAIhD,EAAI,EAAGA,EAAI2S,EAAK3P,SAAUhD,EAAG,CAClC4M,IAAM+F,EAAK3S,GACXhB,KAAK+qD,OAAOn9C,EAAGjK,GAEnB,MACJ,IAAK,IACDorE,GAAa6I,EAAQjkE,EAAK3P,OAAQ,GAClC,IAAK,IAAIhD,EAAI,EAAGA,EAAI2S,EAAK3P,SAAUhD,EAAG,CAClC2C,GAAKgQ,EAAK3S,GACVhB,KAAK+qD,OAAOn9C,EAAGjK,GAEnB,MACJ,IAAK,IACDorE,GAAa6I,EAAQjkE,EAAK3P,OAAQ,GAClC,IAAK,IAAIhD,EAAI,EAAGA,EAAI2S,EAAK3P,SAAUhD,EAAG,CAClC2C,IAAMgQ,EAAK3S,GACXhB,KAAK+qD,OAAOn9C,EAAGjK,GAEnB,MACJ,IAAK,IACDqrE,GAAc4I,EAAQjkE,EAAK3P,OAAQ,GACnC,IAAK,IAAIhD,EAAI,EAAGA,EAAI2S,EAAK3P,OAAQhD,GAAK,EAAG,CACrC,IAAI6qE,GAAMl4D,EAAK3S,GACf,IAAI8qE,GAAMn4D,EAAK3S,EAAI,GACnBs2E,GAAO3jE,EAAK3S,EAAI,GAChBu2E,GAAO5jE,EAAK3S,EAAI,GAChB4M,GAAK+F,EAAK3S,EAAI,GACd2C,GAAKgQ,EAAK3S,EAAI,GACdhB,KAAKw2E,cAAc3K,EAAIC,EAAIwL,EAAKC,EAAK3pE,EAAGjK,GAE5C,MACJ,IAAK,IACDqrE,GAAc4I,EAAQjkE,EAAK3P,OAAQ,GACnC,IAAK,IAAIhD,EAAI,EAAGA,EAAI2S,EAAK3P,OAAQhD,GAAK,EAAG,CACrC,IAAI6qE,GAAMl4D,EAAK3S,GAAK4M,EACpB,IAAIk+D,GAAMn4D,EAAK3S,EAAI,GAAK2C,EACxB2zE,GAAO3jE,EAAK3S,EAAI,GAAK4M,EACrB2pE,GAAO5jE,EAAK3S,EAAI,GAAK2C,EACrBiK,IAAM+F,EAAK3S,EAAI,GACf2C,IAAMgQ,EAAK3S,EAAI,GACfhB,KAAKw2E,cAAc3K,EAAIC,EAAIwL,EAAKC,EAAK3pE,EAAGjK,GAE5C,MACJ,IAAK,IACDqrE,GAAc4I,EAAQjkE,EAAK3P,OAAQ,GACnC,GAAIszE,IAAQ,MAAQC,IAAQ,KAAM,CAC9BD,EAAM1pE,EACN2pE,EAAM5zE,EAEV,IAAK,IAAI3C,EAAI,EAAGA,EAAI2S,EAAK3P,OAAQhD,GAAK,EAAG,CACrC,IAAI6qE,EAAK,EAAIj+D,EAAI0pE,EACjB,IAAIxL,EAAK,EAAInoE,EAAI4zE,EACjBD,GAAO3jE,EAAK3S,GACZu2E,GAAO5jE,EAAK3S,EAAI,GAChB4M,GAAK+F,EAAK3S,EAAI,GACd2C,GAAKgQ,EAAK3S,EAAI,GACdhB,KAAKw2E,cAAc3K,EAAIC,EAAIwL,EAAKC,EAAK3pE,EAAGjK,GAE5C,MACJ,IAAK,IACDqrE,GAAc4I,EAAQjkE,EAAK3P,OAAQ,GACnC,GAAIszE,IAAQ,MAAQC,IAAQ,KAAM,CAC9BD,EAAM1pE,EACN2pE,EAAM5zE,EAEV,IAAK,IAAI3C,EAAI,EAAGA,EAAI2S,EAAK3P,OAAQhD,GAAK,EAAG,CACrC,IAAI6qE,EAAK,EAAIj+D,EAAI0pE,EACjB,IAAIxL,EAAK,EAAInoE,EAAI4zE,EACjBD,GAAO3jE,EAAK3S,GAAK4M,EACjB2pE,GAAO5jE,EAAK3S,EAAI,GAAK2C,EACrBiK,IAAM+F,EAAK3S,EAAI,GACf2C,IAAMgQ,EAAK3S,EAAI,GACfhB,KAAKw2E,cAAc3K,EAAIC,EAAIwL,EAAKC,EAAK3pE,EAAGjK,GAE5C,MACJ,IAAK,IACDqrE,GAAc4I,EAAQjkE,EAAK3P,OAAQ,GACnC,IAAK,IAAIhD,EAAI,EAAGA,EAAI2S,EAAK3P,OAAQhD,GAAK,EAAG,CACrCw2E,GAAQ7jE,EAAK3S,GACby2E,GAAQ9jE,EAAK3S,EAAI,GACjB4M,GAAK+F,EAAK3S,EAAI,GACd2C,GAAKgQ,EAAK3S,EAAI,GACdhB,KAAK02E,iBAAiBc,EAAMC,EAAM7pE,EAAGjK,GAEzC,MACJ,IAAK,IACDqrE,GAAc4I,EAAQjkE,EAAK3P,OAAQ,GACnC,IAAK,IAAIhD,EAAI,EAAGA,EAAI2S,EAAK3P,OAAQhD,GAAK,EAAG,CACrCw2E,GAAQ7jE,EAAK3S,GAAK4M,EAClB6pE,GAAQ9jE,EAAK3S,EAAI,GAAK2C,EACtBiK,IAAM+F,EAAK3S,EAAI,GACf2C,IAAMgQ,EAAK3S,EAAI,GACfhB,KAAK02E,iBAAiBc,EAAMC,EAAM7pE,EAAGjK,GAEzC,MACJ,IAAK,IACDqrE,GAAc4I,EAAQjkE,EAAK3P,OAAQ,GACnC,GAAIwzE,IAAS,MAAQC,IAAS,KAAM,CAChCD,EAAO5pE,EACP6pE,EAAO9zE,EAEX,IAAK,IAAI3C,EAAI,EAAGA,EAAI2S,EAAK3P,OAAQhD,GAAK,EAAG,CACrCw2E,EAAO,EAAI5pE,EAAI4pE,EACfC,EAAO,EAAI9zE,EAAI8zE,EACf7pE,GAAK+F,EAAK3S,GACV2C,GAAKgQ,EAAK3S,EAAI,GACdhB,KAAK02E,iBAAiBc,EAAMC,EAAM7pE,EAAGjK,GAEzC,MACJ,IAAK,IACDqrE,GAAc4I,EAAQjkE,EAAK3P,OAAQ,GACnC,GAAIwzE,IAAS,MAAQC,IAAS,KAAM,CAChCD,EAAO5pE,EACP6pE,EAAO9zE,EAEX,IAAK,IAAI3C,EAAI,EAAGA,EAAI2S,EAAK3P,OAAQhD,GAAK,EAAG,CACrCw2E,EAAO,EAAI5pE,EAAI4pE,EACfC,EAAO,EAAI9zE,EAAI8zE,EACf7pE,IAAM+F,EAAK3S,GACX2C,IAAMgQ,EAAK3S,EAAI,GACfhB,KAAK02E,iBAAiBc,EAAMC,EAAM7pE,EAAGjK,GAEzC,MACJ,IAAK,IACL,IAAK,IACD,IAAIk0E,EAAYD,IAAW,IAC3B3I,GAAct7D,GACdq7D,GAAc4I,EAAQjkE,EAAK3P,OAAQ,GACnC,IAAK,IAAIhD,EAAI,EAAGA,EAAI2S,EAAK3P,OAAQhD,GAAK,EAAG,CACrC,IAAIyhC,GAAM9uB,EAAK3S,EAAI,GACnB,IAAI0hC,GAAM/uB,EAAK3S,EAAI,GACnB,GAAI62E,EAAU,CACVp1C,GAAM70B,EACN80B,GAAM/+B,EAEV,IAAImqD,EAAK8f,GAAY,CACjBlB,GAAI9+D,EACJ++D,GAAIhpE,EACJsnE,IAAKt3D,EAAK3S,GACVkqE,IAAKv3D,EAAK3S,EAAI,GACd+sE,eAAgBp6D,EAAK3S,EAAI,GACzB4rE,aAAcuC,IAAcx7D,EAAK3S,EAAI,IACrC6rE,UAAWsC,IAAcx7D,EAAK3S,EAAI,IAClCyhC,GAAIA,EACJC,GAAIA,IAERtS,GAAY09B,GAAI,SAAUhtD,GACtBqvB,EAAMqmD,cAAc11E,EAAE+qE,GAAI/qE,EAAEgrE,GAAIhrE,EAAEirE,GAAIjrE,EAAEkrE,GAAIlrE,EAAE8M,EAAG9M,EAAE6C,GACnDiK,EAAI9M,EAAE8M,EACNjK,EAAI7C,EAAE6C,KAGd,MACJ,IAAK,IACL,IAAK,IACDirE,GAAUgJ,EAAQjkE,EAAK3P,OAAQ,GAC/BhE,KAAKkrD,YACL,WAKpB5nD,OAAOssB,eAAemnD,EAAejrE,UAAW,WAAY,CACxD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUoe,GACbA,EAAQsmD,YACR1nD,GAAYpwB,KAAKg3E,aAAa,SAAU7qD,GACpCA,EAAGzC,KAAK8H,SAIpBluB,OAAOssB,eAAemnD,EAAejrE,UAAW,UAAW,CACvD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU++D,GACbjiD,EAAOpkB,UAAUmnE,QAAQ9pE,KAAKnJ,KAAMmyE,GACpC,IAAI1K,EAAQznE,KAAK0wE,QAAUyB,EAC3B,IAAI4F,EAAatQ,EAAMuJ,MACvB,IAAI94C,EAAcl4B,KAAKqxE,iBACvB,GAAI0G,GAAc7/C,EAAa,CAC3B,IAAI8/C,EAAYvQ,EAAMj2C,QACtB,IAAIymD,EAAiBj4E,KAAK+6C,UAAUy3B,cACpC,GAAIuF,EAAY,CACZC,EAAUE,yBAA2Bl4E,KAAKi9C,UAC1C+6B,EAAUF,YAEd,IAAIK,EACJ,GAAIjgD,EAAa,CACb+/C,EAAeH,YACfK,EAAUn4E,KAAKo4E,cAEnBhoD,GAAYpwB,KAAKg3E,aAAa,SAAU7qD,GACpC,GAAI4rD,EAAY,CACZ5rD,EAAGzC,KAAKsuD,GACR7rD,EAAGksD,SAASL,EAAW9/D,WAE3B,GAAIggB,EAAa,CACb/L,EAAGzC,KAAKuuD,GACR9rD,EAAGksD,SAASJ,EAAgBE,WAMhD70E,OAAOssB,eAAemnD,EAAejrE,UAAW,iBAAkB,CAC9D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUoe,GACb,GAAIxxB,KAAK+zC,QAAS,CACd/zC,KAAK03C,aACLlmB,EAAQkhD,OAER,IAAInuB,EAAOvkD,KAAKukD,KAChB,GAAIA,EAAM,CACNA,EAAK7M,aACL6M,EAAK2tB,WAAW1gD,EAAS,GACzB+yB,EAAKquB,SAASphD,GACdA,EAAQqhD,OAGZrhD,EAAQshD,YAAc9yE,KAAK+yE,cAAgB/yE,KAAKk/B,MAChDl/B,KAAKkyE,WAAW1gD,EAAS,GACzB,GAAIxxB,KAAK8D,OAAQ,CACb0tB,EAAQ1tB,OAAS9D,KAAK8D,OAE1B0tB,EAAQ0mD,yBAA2Bl4E,KAAKi9C,UACxCzrB,EAAQsmD,YACR1nD,GAAYpwB,KAAKg3E,aAAa,SAAU7qD,GACpCA,EAAGzC,KAAK8H,GACRrF,EAAGksD,SAAS7mD,EAAStZ,cAEzBsZ,EAAQ0hD,cAIpB5vE,OAAOssB,eAAemnD,EAAejrE,UAAW,aAAc,CAC1D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUw+B,GACb,GAAI5xC,KAAK+zC,SAAW/zC,KAAKq2C,WAAY,CACjCjmB,GAAYpwB,KAAKg3E,aAAa,SAAU7qD,GACpCA,EAAGmsD,UAAU1mC,UAK7B,OAAOmlC,EAljBO,CAmjBhBzG,IAKF,IAAIiI,GAA4B,SAAUroD,GACtC1F,GAAU+tD,EAAYroD,GACtB,SAASqoD,EAAWhI,EAAUxgE,EAAMd,GAChC,IAAIkhB,EAAQD,EAAO/mB,KAAKnJ,KAAMuwE,IAAavwE,KAC3CsD,OAAOssB,eAAeO,EAAO,OAAQ,CACjCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAeO,EAAO,QAAS,CAClCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAeO,EAAO,aAAc,CACvCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,IAEX9P,OAAOssB,eAAeO,EAAO,YAAa,CACtCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAeO,EAAO,eAAgB,CACzCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,OAEX9P,OAAOssB,eAAeO,EAAO,iBAAkB,CAC3Cza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,IAEX+c,EAAMpgB,KAAOA,EACbogB,EAAMlhB,MAAQA,EACd,OAAOkhB,EAEX7sB,OAAOssB,eAAe2oD,EAAWzsE,UAAW,mBAAoB,CAC5D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH8c,EAAOpkB,UAAUwqC,iBAAiBntC,KAAKnJ,MACvCA,KAAKw4E,UAAYtgE,aAGzB5U,OAAOssB,eAAe2oD,EAAWzsE,UAAW,UAAW,CACnD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUoe,GACb,GAAIxxB,KAAKiP,MAAM86C,UAAW,CACtBv4B,EAAQu4B,UAAY/pD,KAAKiP,MAAM86C,UAEnC,GAAI/pD,KAAKiP,MAAMwpE,UAAW,CACtBjnD,EAAQinD,UAAYz4E,KAAKiP,MAAMwpE,UAEnC,GAAIz4E,KAAKiP,MAAMypE,aAAc,CACzBlnD,EAAQknD,aAAe14E,KAAKiP,MAAMypE,iBAI9Cp1E,OAAOssB,eAAe2oD,EAAWzsE,UAAW,aAAc,CACtD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUq0D,EAAOkR,EAAaC,GACjC,GAAID,SAAqB,EAAG,CAAEA,EAAc,MAC5C,GAAIC,SAA0B,EAAG,CAAEA,EAAmB,MACtD1oD,EAAOpkB,UAAUmnE,QAAQ9pE,KAAKnJ,KAAMynE,GACpC,IAAIj2C,EAAUi2C,EAAMj2C,QACpB,IAAI+gD,EAAevyE,KAAK+6C,UAAUy3B,cAElC,IAAIvjE,EAAQjP,KAAKiP,MACjB,IAAI4pE,EAAY74E,KAAK84E,cAAc5gE,UAAW0gE,GAC9CpnD,EAAQunD,KAAOF,EACf,GAAI74E,KAAKqxE,mBAAqBsH,EAAa,CACvCpG,EAAawG,KAAOF,EAGxB,GAAI5pE,EAAMosC,KAAM,CACZ,GAAIpsC,EAAMosC,gBAAgBtc,GAAO,CAC7BvN,EAAQ6iD,UAAYplE,EAAMosC,KAAK87B,MAAMloE,EAAMqsC,aAAepjC,UAAYjJ,EAAMqsC,YAAc,OAEzF,CACD9pB,EAAQ6iD,UAAYplE,EAAMosC,MAGlC,GAAIpsC,EAAM4uC,YAAa,CACnB4pB,EAAMj2C,QAAQqsB,YAAc5uC,EAAM4uC,YAAYs5B,MAAMloE,EAAMgvC,eAAiB,GAE/E,GAAIhvC,EAAM6uC,WAAY,CAClB2pB,EAAMj2C,QAAQssB,WAAa7uC,EAAM6uC,WAErC,GAAI7uC,EAAM8uC,cAAe,CACrB0pB,EAAMj2C,QAAQusB,cAAgB9uC,EAAM8uC,cAExC,GAAI9uC,EAAM+uC,cAAe,CACrBypB,EAAMj2C,QAAQwsB,cAAgB/uC,EAAM+uC,cAExCh+C,KAAKg5E,QAAQxnD,GACb,GAAIxxB,KAAKqxE,mBAAqBsH,EAAa,CACvCpG,EAAa8B,UAAYr0E,KAAKo4E,cAC9Bp4E,KAAKg5E,QAAQzG,OAIzBjvE,OAAOssB,eAAe2oD,EAAWzsE,UAAW,gBAAiB,CACzD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU6lE,EAAQL,GACrB,GAAIA,SAA0B,EAAG,CAAEA,EAAmB,MAEtD,IAAI3pE,EAAQjP,KAAKiP,MACjB,IAAI4pE,EAAY,GAChB,GAAII,GAAUA,EAAOC,YAAa,CAC9BL,EAAUrzE,KAAKyzE,EAAOC,kBAErB,GAAIjqE,EAAMiqE,YAAa,CACxBL,EAAUrzE,KAAKyJ,EAAMiqE,aAEzB,IAAKN,EAAkB,CACnB,GAAIK,GAAUA,EAAOt3B,WAAY,CAC7Bk3B,EAAUrzE,KAAKyzE,EAAOt3B,iBAErB,GAAI1yC,EAAM0yC,WAAY,CACvBk3B,EAAUrzE,KAAKyJ,EAAM0yC,aAG7B,GAAIs3B,GAAUA,EAAOJ,UAAW,CAC5BA,EAAUrzE,KAAKyzE,EAAOJ,gBAErB,GAAI5pE,EAAM4pE,UAAW,CACtBA,EAAUrzE,KAAKyJ,EAAM4pE,WAEzB,GAAII,GAAUA,EAAO5Q,SAAU,CAC3B,GAAIx2C,GAAeonD,EAAO5Q,UAAW,CACjC4Q,EAAO5Q,SAAW4Q,EAAO5Q,SAAW,KAExCwQ,EAAUrzE,KAAKyzE,EAAO5Q,eAErB,GAAIp5D,EAAMo5D,SAAU,CACrB,GAAIx2C,GAAe5iB,EAAMo5D,UAAW,CAChCp5D,EAAMo5D,SAAWp5D,EAAMo5D,SAAW,KAEtCwQ,EAAUrzE,KAAKyJ,EAAMo5D,UAEzB,GAAI4Q,GAAUA,EAAO7Q,WAAY,CAC7ByQ,EAAUrzE,KAAKyzE,EAAO7Q,iBAErB,GAAIn5D,EAAMm5D,WAAY,CACvByQ,EAAUrzE,KAAKyJ,EAAMm5D,iBAEpB,GAAIyQ,EAAU70E,OAAQ,CACvB60E,EAAUrzE,KAAK,SAEnB,OAAOqzE,EAAUxzE,KAAK,QAG9B/B,OAAOssB,eAAe2oD,EAAWzsE,UAAW,UAAW,CACnD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU++D,GACb,IAAIhiD,EAAQnwB,KACZ,IAAIynE,EAAQznE,KAAK0wE,QAAUyB,EAE3B,IAAKnyE,KAAKw4E,UAAW,CACjBx4E,KAAKm5E,SAAS1R,GAElB,GAAIznE,KAAKo5E,aAAc,CACnB,IAAIC,EAAgBr5E,KAAKqxE,iBACzB,IAAIiI,EAAY7R,EAAMj2C,QACtB,IAAI+nD,EAAe9R,EAAMuJ,MACzB,IAAIwI,EAAiBx5E,KAAK+6C,UAAUy3B,cACpC8G,EAAU5G,OACV8G,EAAe9G,OACf1yE,KAAKy5E,WAAWhS,GAIhBr3C,GAAYpwB,KAAKw4E,WAAW,SAAUkB,EAAMC,GACxCvpD,GAAYspD,EAAKE,YAAY,SAAUt3E,EAAOq3E,GAE1C,GAAIr3E,EAAM2M,MAAO,CACbqqE,EAAU5G,OACV8G,EAAe9G,OACf4G,EAAUP,KAAOz2E,EAAM2M,MACvB,GAAIkhB,EAAMkhD,iBAAkB,CACxBmI,EAAeT,KAAOz2E,EAAM2M,OAGpC,GAAI3M,EAAM+4C,KAAM,CACZi+B,EAAU5G,OACV4G,EAAUjF,UAAY/xE,EAAM+4C,KAAK87B,QAIrC,GAAIoC,EAAc,CACdD,EAAUO,SAASv3E,EAAMyN,KAAMzN,EAAMs0E,QAAS8C,EAAK7C,QAAUv0E,EAAMu0E,SAGvE,GAAIv0E,EAAMs/C,gBAAkB,aAAet/C,EAAMs/C,gBAAkB,eAAgB,CAC/E,IAAIk4B,EAAY,EAChB,IAAIvoB,EAAS,EACb,IAAI8W,EAAW/lE,EAAMu1C,OACrB,IAAI++B,EAAUt0E,EAAMs0E,QACpB,OAAQzmD,EAAMlhB,MAAM86C,WAChB,IAAK,QACL,IAAK,MACD6sB,GAAWt0E,EAAMihB,MACjB,MACJ,IAAK,SACDqzD,GAAWt0E,EAAMihB,MAAQ,EACzB,MAER,GAAIjhB,EAAM2M,MAAO,CACb,IAAIgE,EAAS6tC,GAAci5B,aAAaz3E,EAAM2M,OAC9C,OAAQgE,EAAO0uC,YACX,IAAK,SACL,IAAK,OACL,IAAK,MACL,IAAK,MACL,IAAK,MACDm4B,EAAY,EACZ,OAGZ,GAAIzR,EAAU,CACV9W,EAAS8W,EAAW,GAExB,IAAI1kE,OAAS,EACb,GAAIrB,EAAMs/C,gBAAkB,eAAgB,CACxCj+C,EAAIm2E,EAAYJ,EAAK7C,QAAUv0E,EAAMu0E,QAAUv0E,EAAMu1C,OAAS,MAE7D,CACDl0C,EAAIm2E,EAAYvoB,EAAS,IAAMmoB,EAAK7C,QAAUv0E,EAAMu0E,QAExDyC,EAAU5G,OACV4G,EAAUxB,YACV,GAAIx1E,EAAM+4C,KAAM,CACZi+B,EAAU5E,YAAcpyE,EAAM+4C,KAAK87B,aAElC,GAAIhnD,EAAMlhB,MAAMosC,MAAQlrB,EAAMlhB,MAAMosC,gBAAgBtc,GAAO,CAC5Du6C,EAAU5E,YAAcvkD,EAAMlhB,MAAMosC,KAAK87B,QAE7CmC,EAAU3E,UAAYmF,EAAYvoB,EAClC+nB,EAAUzuB,OAAO+rB,EAASjzE,GAC1B21E,EAAUvuB,OAAO6rB,EAAUt0E,EAAMihB,MAAO5f,GACxC21E,EAAUrtB,SACVqtB,EAAUpG,UAEd,GAAImG,GAAiBlpD,EAAM+H,YAAa,CAIpCshD,EAAeK,SAASv3E,EAAMyN,KAAMzN,EAAMs0E,QAAS8C,EAAK7C,QAAUv0E,EAAMu0E,SAE5E,GAAIv0E,EAAM+4C,KAAM,CACZi+B,EAAUpG,UAId,GAAI5wE,EAAM2M,MAAO,CACbqqE,EAAUpG,UACVsG,EAAetG,iBAI3BoG,EAAUpG,UACVsG,EAAetG,cAI3B5vE,OAAOssB,eAAe2oD,EAAWzsE,UAAW,aAAc,CACtD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUw+B,GACb,GAAI5xC,KAAK+zC,SAAW/zC,KAAKq2C,WAAY,CAEjC,IAAIzoC,EAAI5N,KAAKm5E,SAASn5E,KAAKywE,YAC3BsD,GAASniC,EAAQ,CAAEhkC,EAAGA,EAAEopB,KAAMrzB,EAAGiK,EAAEmpB,MACnCg9C,GAASniC,EAAQ,CAAEhkC,EAAGA,EAAE41B,MAAO7/B,EAAGiK,EAAE61B,aAKhDngC,OAAOssB,eAAe2oD,EAAWzsE,UAAW,oBAAqB,CAC7D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,MAAO,SAAS3S,KAAKq5B,UAAUC,WAGvCz2B,OAAOssB,eAAe2oD,EAAWzsE,UAAW,WAAY,CACpD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUq0D,GACb,IAAIt3C,EAAQnwB,KACZ,IAAIwxB,EAAUi2C,EAAMj2C,QACpB,IAAI+gD,EAAevyE,KAAK+6C,UAAUy3B,cAClC,IAAIwH,EAAMh6E,KAAKiP,MAAMwpE,WAAa,MAElCz4E,KAAKw4E,UAAY,GAEjB,IAAIhxB,EAAoBxnD,KAAKiP,MAAMu4C,kBACnC,IAAIxN,EAAWh6C,KAAKiP,MAAM+qC,SAC1B,IAAIigC,EAAWpoD,GAAemoB,IAAawN,GAAqB,WAChE,IAAI0yB,EAAOroD,GAAemoB,KAAcwN,GAAqB,QAAUA,GAAqB,iBAE5Fh2B,EAAQkhD,OACRH,EAAaG,OACb1yE,KAAKy5E,WAAWhS,EAAO,KAAMznE,KAAKm6E,qBAElC,IAAIC,EAAU,kEAEd,IAAIC,EAAQr6E,KAAK+P,KAAKrO,WAAWmE,QAAQ,MAAO,IAAIqH,MAAM,MAC1D,IAAIotE,EAAgB,KACpB,IAAIx3C,EAAO,EACX,IAAIG,EAAO,EAEX,IAAI4zC,EAAU,EACd,IAAI0D,EACJnqD,GAAYiqD,GAAO,SAAUX,EAAMC,GAE/B,IAAIx4B,EACJ,GAAIu4B,GAAQ,GAAI,CACZv4B,EAAS,CAAC,CACFr/C,KAAM,QACNiO,KAAM,SAGb,CACDoxC,EAASL,GAAcx+C,MAAMo3E,EAAM,MAAOvpD,EAAMlhB,MAAM04C,kBAE1D,IAAI6yB,EAAU,WAEV,IAAIC,EAAW,CACX5D,QAASA,EACT6D,OAAQ,EACRn3D,MAAO,EACPs0B,OAAQ,EACR7gB,KAAM,EACNwM,MAAO,EACPo2C,WAAY,IAGhB,IAAIe,EAAUxqD,EAAMyqD,aAAaR,EAAS5oD,GAC1C,IAAIqmB,EAAS8iC,EAAQE,wBAA0BF,EAAQG,yBACvDL,EAAS5iC,OAASA,EAClB4iC,EAASC,OAASC,EAAQE,wBAC1B,IAAIE,EACJ,IAAIC,EAAoB7qD,EAAMlhB,MAAM2yC,eACpC,IAAIq5B,EACJ,IAAIC,EACJ,IAAIC,EAAkB,MACtB,IAAIC,EAAiB,KACrB,IAAIC,EAAiB,GACrB,IAAIC,EAIJC,GAAoBp6B,GAAQ,SAAU7+C,EAAOiM,GAEzC,GAAIjM,EAAMR,MAAQ,SAAU,CACxB,GAAIQ,EAAMyN,MAAQ,MAAO,CACrB,IAAKuqE,EAAe,CAChB9oD,EAAQ0hD,UACRX,EAAaW,UACboH,EAAgB,KAEpBW,EAAc/iE,UACdqiE,EAAeriE,UACfgjE,EAAoBhjE,UACpB8iE,EAAoB7qD,EAAMlhB,MAAM2yC,eAChC05B,EAAuBpjE,UACvB6iE,EAAgBz4E,EAAMyN,SAErB,CACD,IAAKuqE,EAAe,CAChB9oD,EAAQ0hD,UACRX,EAAaW,UAEjB,IAAIjgE,EAAS6tC,GAAci5B,aAAaz3E,EAAMyN,MAC9C,IAAI8oE,EAAY1oD,EAAM2oD,cAAc7lE,GACpCue,EAAQkhD,OACRH,EAAaG,OACblhD,EAAQunD,KAAOF,EACf0B,EAAe1B,EACfkC,EAAgBz4E,EAAMyN,KACtB,GAAIkD,EAAO2uC,eAAgB,CACvBo5B,EAAoB/nE,EAAO2uC,eAE/B,GAAI3uC,EAAOooC,KAAM,CACb4/B,EAAchoE,EAAOooC,KAEzB,GAAIpoC,EAAOsQ,MAAO,CACd23D,EAAoB73B,GAAepwC,EAAOsQ,OAE9C,GAAItQ,EAAOuoE,cAAe,CACtBF,EAAuBroE,EAAOuoE,cAElClB,EAAgB,MAEhB,IAAImB,EAAYtrD,EAAMyqD,aAAaR,EAAS5oD,GAC5C,IAAIkqD,EAAWD,EAAUZ,wBAA0BY,EAAUX,yBAC7D,GAAIY,EAAWjB,EAAS5iC,OAAQ,CAC5B4iC,EAAS5iC,OAAS6jC,EAEtB,GAAID,EAAUZ,wBAA0BJ,EAASC,OAAQ,CACrDD,EAASC,OAASe,EAAUZ,+BAKnC,GAAIv4E,EAAMR,MAAQ,UAAYq5E,EAAiB,CAEhD,IAAIQ,EAAYxrD,EAAMyqD,aAAat4E,EAAMyN,KAAMyhB,GAC/C,IAAIoqD,EAAaD,EAAUE,sBAAwBF,EAAUG,uBAE7D,GAAI7B,EAAU,CAEV,IAAIxyB,EAAa2zB,GAAkBjrD,EAAMlhB,MAAMw4C,YAAc,MAE7D,IAAIC,EAAWv3B,EAAMlhB,MAAMy4C,UAAY,GACvC,IAAIq0B,EAAkB5rD,EAAMyqD,aAAalzB,EAAUl2B,GACnD,IAAIwqD,EAAgBD,EAAgBF,sBAAwBE,EAAgBD,uBAE5E,GAAKrB,EAASl3D,MAAQq4D,EAAc5hC,EAAU,CAC1C,IAAIiiC,EAAcjiC,EAAWygC,EAASl3D,MAAQy4D,EAC9C15E,EAAMyN,KAAOogB,EAAM+rD,cAAc1qD,EAASlvB,EAAMyN,KAAMksE,EAAax0B,GACnEnlD,EAAMyN,MAAQ23C,EACdyzB,EAAkB,WAGrB,GAAIjB,EAAM,CAEX,GAAKO,EAASl3D,MAAQq4D,EAAc5hC,EAAU,CAC1C,IAAIiiC,EAAcjiC,EAAWygC,EAASl3D,MACtC,IAAI44D,EAAUhsD,EAAM+rD,cAAc1qD,EAASlvB,EAAMyN,KAAMksE,EAAa,MAAQb,GAAkBjrD,EAAMlhB,MAAMu4C,mBAAqB,iBAC/H,GAAI20B,GAAW,GAAI,CAEfhsD,EAAMipD,aAAe,KACrB,OAAO,MAIXiC,EAAiBl6B,EAAOv7C,MAAM2I,EAAQ,GAEtC,GAAIk0C,GAAY05B,IAAY15B,GAAYngD,EAAMyN,MAAO,CACjDsrE,EAAejrB,QAAQ,CACnBtuD,KAAM,QACNiO,KAAMzN,EAAMyN,KAAKvB,OAAO2tE,EAAQn4E,UAEpC,GAAI+2E,EAAe,CACfM,EAAejrB,QAAQ,CACnBtuD,KAAM,SACNiO,KAAMgrE,KAKlBz4E,EAAMyN,KAAO0yC,GAAY05B,GACzBh7B,EAAS,GACTg6B,EAAkB,MAI1B,IAAIiB,EAAe,EACnB,IAAIC,EAAgB,EACpB,GAAI9B,GAAgBW,GAAsBA,EAAoBU,EAAa,CAEvE,IAAIU,EAAYV,EAAaV,EAC7B,OAAQ/qD,EAAMlhB,MAAM86C,WAChB,IAAK,QACL,IAAK,MACDqyB,EAAeE,EACf,MACJ,IAAK,SACDF,EAAeE,EACfD,EAAgBC,EAChB,MACJ,QACID,EAAgBC,EAExBV,EAAaV,EAEjB,IAAIqB,EAAcZ,EAAUd,wBAA0Bc,EAAUb,yBAChE,GAAIyB,EAAc9B,EAAS5iC,OAAQ,CAC/B4iC,EAAS5iC,OAAS0kC,EAEtB,GAAIZ,EAAUd,wBAA0BJ,EAASC,OAAQ,CACrDD,EAASC,OAASiB,EAAUd,wBAEhCJ,EAASl3D,OAASq4D,EAClBnB,EAASzjD,MAAQ2kD,EAAUE,sBAAwBO,EACnD3B,EAASj3C,OAASm4C,EAAUG,uBAAyBO,EACrD5B,EAASb,WAAWp0E,KAAK,CACrByJ,MAAOsrE,EACPl/B,KAAM4/B,EACNlrE,KAAMzN,EAAMyN,KACZwT,MAAOq4D,EACP/jC,OAAQ0kC,EACRvlD,KAAM2kD,EAAUE,sBAChBr4C,MAAOm4C,EAAUG,uBACjBpB,OAAQiB,EAAUd,wBAClBjE,QAAS,EACTC,QAAS,EACTj1B,eAAgBo5B,EAChBQ,cAAeF,IAGnBF,EAAiB,MAKrB,OAAO,QAGX,GAAIjrD,EAAMlhB,MAAMutE,sBAAsB9mD,GAAS,CAC3C+kD,EAAS5iC,QAAU1nB,EAAMlhB,MAAMutE,WAAWppE,MAC1CqnE,EAASC,QAAUvqD,EAAMlhB,MAAMutE,WAAWppE,UAEzC,CACDqnE,EAAS5iC,QAAU1nB,EAAMlhB,MAAMutE,YAAc,IAC7C/B,EAASC,QAAUvqD,EAAMlhB,MAAMutE,YAAc,IAEjD,GAAI15C,EAAO23C,EAASzjD,KAAM,CACtB8L,EAAO23C,EAASzjD,KAEpB,GAAIiM,EAAOw3C,EAASj3C,MAAO,CACvBP,EAAOw3C,EAASj3C,MAEpBrT,EAAMqoD,UAAUhzE,KAAKi1E,GAErB5D,GAAW4D,EAAS5iC,OAEpBsJ,EAASk6B,GAAkB,IAE/B,MAAOl6B,EAAOn9C,OAAS,EAAG,CACtBw2E,QAGR,IAAKF,EAAe,CAChB9oD,EAAQ0hD,UACRX,EAAaW,UAGjB9iD,GAAYpwB,KAAKw4E,WAAW,SAAUiC,EAAUd,GAC5C,IAAI8C,EAAqB,EACzBrsD,GAAYqqD,EAASb,YAAY,SAAUt3E,GACvCA,EAAMs0E,QAAU6F,EAAqBn6E,EAAM00B,KAAOyjD,EAASzjD,KAC3D10B,EAAMu0E,SAAW4D,EAAS5iC,OAAS4iC,EAAS5iC,QAAU1nB,EAAMlhB,MAAMytE,eAAiB,KACnFD,GAAsBn6E,EAAMihB,MAC5B,GAAIjhB,EAAMk5E,cAAe,CACrB,OAAQl5E,EAAMk5E,eACV,IAAK,QACDl5E,EAAMu0E,SAAW4D,EAAS5iC,OAAS,EAAIv1C,EAAMu1C,OAAS,EACtD,MACJ,IAAK,MACDv1C,EAAMu0E,SAAWv0E,EAAMu1C,OAAS,EAChC,cAKpB,IAAIjG,EAAS,CACT5a,KAAMgjD,GAAO/2C,GAAQH,EACrB/L,IAAK,EACLyM,MAAOw2C,EAAMl3C,EAAOG,EACpBQ,OAAQozC,GAGZ,GAAIrvB,IAAsB,OAAQ,CAC9B,IAAI8mB,EAAQtuE,KAAK28E,UAAU/qC,GAC3B,GAAI08B,EAAQ,EAAG,CACX,GAAI9mB,GAAqB,MAAO,CAC5B,GAAI31B,GAAe7xB,KAAKiP,MAAM24C,WAAc0mB,EAAQtuE,KAAKiP,MAAM24C,SAAW,CACtE5nD,KAAKo5E,aAAe,UAEnB,CACD,IAAKp5E,KAAK48E,gBAAkB58E,KAAK48E,gBAAkB,EAAG,CAClD58E,KAAK48E,eAAiB58E,KAAKyf,MAE/Bzf,KAAKyf,MAAQ6uD,EACbtuE,KAAKo5E,aAAe,WAGvB,GAAI5xB,GAAqB,OAAQ,CAClCxnD,KAAKo5E,aAAe,UAEnB,CACD,OAAQp5E,KAAKiP,MAAM86C,WACf,IAAK,QACL,IAAK,MACDnY,EAAO5a,MAAQgjB,EACfpI,EAAOpO,MAAQ,EACf,MACJ,IAAK,SACDoO,EAAO5a,MAAQgjB,EAAW,EAC1BpI,EAAOpO,MAAQwW,EAAW,EAC1B,MACJ,QACIpI,EAAO5a,KAAO,EACd4a,EAAOpO,MAAQwW,EAEvBh6C,KAAKyf,MAAQzf,KAAK48E,gBAAkB,EACpC58E,KAAK48E,eAAiB1kE,UACtBlY,KAAKo5E,aAAe,UAGvB,CACDp5E,KAAKyf,MAAQzf,KAAK48E,gBAAkB,EACpC58E,KAAK48E,eAAiB1kE,UACtBlY,KAAKo5E,aAAe,MAG5B5nD,EAAQ0hD,UACRX,EAAaW,UACb,OAAOthC,KAGftuC,OAAOssB,eAAe2oD,EAAWzsE,UAAW,YAAa,CACrD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUw+B,GACb,IAAIirC,EAAO78E,KAAKiP,MAAM+qC,SACtB,IAAI8iC,EAAO98E,KAAKiP,MAAMirC,UACtB,IAAKroB,GAAegrD,KAAUhrD,GAAeirD,GAAO,CAChD,OAAO,EAEX,IAAIh0E,EAAI8oC,EAAOpO,MAAQoO,EAAO5a,KAC9B,IAAIn2B,EAAI+wC,EAAOnO,OAASmO,EAAO7a,IAC/B,OAAOzrB,KAAKC,IAAIsxE,EAAO/zE,GAAK,EAAGg0E,EAAOj8E,GAAK,MAGnDyC,OAAOssB,eAAe2oD,EAAWzsE,UAAW,gBAAiB,CACzD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUoe,EAASzhB,EAAMiqC,EAAUyN,EAAYs1B,GAClD,GAAIt1B,SAAoB,EAAG,CAAEA,EAAa,MAC1C,GAAIs1B,SAA4B,EAAG,CAAEA,EAAqB,KAC1D,IAAIx5D,EACJ,EAAG,CACC,GAAIkkC,EAAY,CACZ13C,EAAOA,EAAKnK,MAAM,GAAI,OAErB,CACD,IAAIu9C,EAAMpzC,EAAKlK,QAAQ,kCAAmC,IAC1D,GAAIs9C,GAAO,IAAM45B,EAAoB,CACjCt1B,EAAa,UAEZ,GAAItE,GAAO,GAAI,CAChB,OAAOpzC,MAEN,CACDA,EAAOozC,GAGf,IAAIw3B,EAAU36E,KAAK46E,aAAa7qE,EAAMyhB,GACtCjO,EAAQo3D,EAAQkB,sBAAwBlB,EAAQmB,6BAC1Cv4D,EAAQy2B,GAAajqC,GAAQ,IACvC,OAAOA,KAGfzM,OAAOssB,eAAe2oD,EAAWzsE,UAAW,eAAgB,CACxD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUrD,EAAMyhB,GACnB,IAAImpD,EAAUnpD,EAAQwrD,YAAYjtE,GAClC,IAAIktE,EAAc,GAClB,GAAItC,EAAQE,yBAA2B,KAAM,CACzC,IAAIqC,EAAM58E,SAASw2B,cAAc,OACjComD,EAAIC,UAAYptE,EAChBmtE,EAAIjuE,MAAMmuE,WAAa,SACvBF,EAAIjuE,MAAM+K,SAAW,WACrBkjE,EAAIjuE,MAAM8nB,IAAM,cAChBmmD,EAAIjuE,MAAMm5D,WAAapoE,KAAKiP,MAAMm5D,YAAc,GAChD8U,EAAIjuE,MAAMo5D,SAAWroE,KAAKiP,MAAMo5D,SAAW,GAC3C/nE,SAASua,KAAKoc,YAAYimD,GAC1B,IAAIG,EAAOH,EAAIt0B,wBACftoD,SAASua,KAAK0a,YAAY2nD,GAC1B,IAAIr8E,EAAIw8E,EAAKxlC,OACb,IAAIylC,EAAM3C,EAAQp3D,MAClB,IAAIyT,EAAO,EACX,IAAIwM,EAAQ85C,EACZL,EAAc,CACVpC,wBAAyBh6E,EACzBi6E,yBAA0B,EAC1Be,sBAAuB7kD,EACvB8kD,uBAAwBt4C,EACxB+5C,sBAAuB18E,EACvB28E,uBAAwB,EACxBj6D,MAAO+5D,OAIV,CACDL,EAAc,CACVpC,wBAAyBF,EAAQE,wBACjCC,yBAA0BH,EAAQG,yBAClCe,sBAAuBlB,EAAQkB,sBAC/BC,uBAAwBnB,EAAQmB,uBAChCyB,sBAAuB5C,EAAQE,wBAC/B2C,uBAAwB7C,EAAQG,yBAChCv3D,MAAOo3D,EAAQp3D,OAGvB,IAAIza,EAAI6xE,EAAQp3D,MAChB,OAAQvjB,KAAKiP,MAAM86C,WACf,IAAK,QACL,IAAK,MACDkzB,EAAYpB,sBAAwB/yE,EACpCm0E,EAAYnB,uBAAyB,EACrC,MACJ,IAAK,SACDmB,EAAYpB,sBAAwB/yE,EAAI,EACxCm0E,EAAYnB,uBAAyBhzE,EAAI,EACzC,MACJ,QACIm0E,EAAYpB,sBAAwB,EACpCoB,EAAYnB,uBAAyBhzE,EAE7C,OAAOm0E,KAGf,OAAO1E,EAruBG,CAsuBZjI,IAKF,IAAImN,GAAiC,WACjC,SAASA,IAELn6E,OAAOssB,eAAe5vB,KAAM,OAAQ,CAChC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAe5vB,KAAM,cAAe,CACvC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAe5vB,KAAM,YAAa,CACrC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAe5vB,KAAM,aAAc,CACtC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAe5vB,KAAM,WAAY,CACpC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAe5vB,KAAM,aAAc,CACtC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAe5vB,KAAM,YAAa,CACrC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAe5vB,KAAM,cAAe,CACvC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAe5vB,KAAM,iBAAkB,CAC1C0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAe5vB,KAAM,cAAe,CACvC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAe5vB,KAAM,aAAc,CACtC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAe5vB,KAAM,gBAAiB,CACzC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAe5vB,KAAM,gBAAiB,CACzC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAe5vB,KAAM,gBAAiB,CACzC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAIhB9P,OAAOssB,eAAe5vB,KAAM,aAAc,CACtC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAOuiB,GAAQ,OAEnBryB,OAAOssB,eAAe5vB,KAAM,gBAAiB,CACzC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,MAOX9P,OAAOssB,eAAe5vB,KAAM,YAAa,CACrC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAe5vB,KAAM,eAAgB,CACxC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAe5vB,KAAM,oBAAqB,CAC7C0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAEX9P,OAAOssB,eAAe5vB,KAAM,aAAc,CACtC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,QAEX9P,OAAOssB,eAAe5vB,KAAM,WAAY,CACpC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,MAEX9P,OAAOssB,eAAe5vB,KAAM,WAAY,CACpC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAe5vB,KAAM,YAAa,CACrC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAe5vB,KAAM,WAAY,CACpC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAe5vB,KAAM,mBAAoB,CAC5C0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,QAGf,OAAOqqE,EAjKQ,GAuKnB,IAAIC,GAAkC,SAAUxtD,GAC5C1F,GAAUkzD,EAAkBxtD,GAC5B,SAASwtD,IACL,IAAIvtD,EAAQD,IAAW,MAAQA,EAAOnkB,MAAM/L,KAAMgM,YAAchM,KAChEsD,OAAOssB,eAAeO,EAAO,WAAY,CACrCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,aAEX9P,OAAOssB,eAAeO,EAAO,SAAU,CACnCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAeO,EAAO,aAAc,CACvCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAeO,EAAO,SAAU,CACnCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,QAEX9P,OAAOssB,eAAeO,EAAO,cAAe,CACxCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAEX9P,OAAOssB,eAAeO,EAAO,UAAW,CACpCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,IAEX9P,OAAOssB,eAAeO,EAAO,gBAAiB,CAC1Cza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,QAEX,OAAO+c,EAEX7sB,OAAOssB,eAAe8tD,EAAiB5xE,UAAW,UAAW,CACzD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU++D,GACb,OAAQnyE,KAAKsoE,UACT,IAAK,WACDtoE,KAAK29E,gBAAgBxL,GACrB,MACJ,QACIjiD,EAAOpkB,UAAUmnE,QAAQ9pE,KAAKnJ,KAAMmyE,GACpC,UAIhB7uE,OAAOssB,eAAe8tD,EAAiB5xE,UAAW,kBAAmB,CACjE4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU++D,GACb,GAAInyE,KAAKo5E,aAAc,CACnB,IAAI3R,EAAQznE,KAAK0wE,QAAUyB,EAC3BnyE,KAAKy5E,WAAWhS,GAChB,IAAImW,EAAgB59E,KAAKqxE,iBACzB,IAAIwM,EAAYpW,EAAMj2C,QACtB,IAAIssD,EAAerW,EAAMuJ,MACzB,IAAI+M,EAAiB/9E,KAAK+6C,UAAUy3B,cAEpCqL,EAAUnL,OACV,GAAIkL,EAAe,CACfG,EAAerL,OAGnB,IAAIsL,EAAYh+E,KAAK6iC,QAAU,EAC/B,IAAIo7C,EAAgBj+E,KAAK2iC,YAAc,EACvC,IAAIu7C,EAAe,EACnB,IAAIC,EAAgBn+E,KAAKyoE,YACzB,IAAI2V,EAAWD,GAAiB,OAAS,OAASA,GAAiB,SACnE,IAAIE,EAAWr+E,KAAKuoE,OACpB,IAAI+V,EAAUt+E,KAAKiP,MAAM86C,WAAa,OACtC,IAAIw0B,EAAYv+E,KAAKw+E,SAAW,EAChC,IAAIC,EAAcH,GAAW,OAAS,GAAK,EAC3C,IAAII,GAAmB1+E,KAAK2+E,cAE5B,IAAK3+E,KAAKw4E,UAAW,CACjBx4E,KAAKm5E,SAAS1R,GAGlB,GAAI2W,GAAY,OAAQ,CAEpB,IAAIQ,EAAa,EACjB,IAAIC,EAAW,EACfzuD,GAAYpwB,KAAKw4E,WAAW,SAAUkB,EAAMC,GACxC,IAAImF,EAAab,EAAgBvE,EAAKn2D,OAASy6D,EAAWtE,EAAK7hC,QAAW,GAAK4mC,EAC/E,GAAIK,EAAaF,EAAY,CACzBA,EAAaE,MAGrB,GAAIR,GAAW,OAAQ,CACnBO,GAAYD,EAAaV,EAAe,GAAKtI,QAE5C,GAAI0I,GAAW,QAAS,CACzBO,GAAYD,EAAaV,EAAe,GAAKtI,OAE5C,CACDiJ,EAAWZ,EAAerI,GAE9BiJ,EAAWE,GAAqBF,GAChCT,EAAYS,GAAY,KAASA,GAAY,GAEjD,GAAIT,GAAY,MAAQM,EAAiB,CACrC1+E,KAAKw4E,UAAUroB,UACfnwD,KAAK2+E,cAAgB,KAMzBvuD,GAAYpwB,KAAKw4E,WAAW,SAAUkB,EAAMC,GACxC,IAAIqF,EAAatF,EAAK7hC,OAGtB,IAAKwmC,EAAU,CACXL,GAAYgB,EAGhB,IAAMP,IAAgB,GAAKL,GAAcK,GAAe,IAAML,IAAcM,EAAiB,CACzFhF,EAAKE,WAAWzpB,UAGpB,IAAI8uB,EAAiBhB,EACrBC,EAAe,EAEf,GAAII,GAAW,SAAU,CACrBW,GAAmBvF,EAAKn2D,OAASy6D,EAAWgB,GAAe,GAAKP,EAChEP,EAAee,EAAiBhB,EAapCgB,GAAmB3zE,KAAK02B,IAAMo8C,EAAW,EAAI,GAE7CP,EAAUnL,OACV,GAAIkL,EAAe,CACfG,EAAerL,OAGnBmL,EAAUqB,OAAOD,GACjB,GAAIrB,EAAe,CACfG,EAAemB,OAAOD,GAE1B,IAAIE,EAAa,EACjB/uD,GAAYspD,EAAKE,YAAY,SAAUt3E,EAAOq3E,GAE1C,IAAIv/C,EAAO93B,EAAMyN,KACjB,IAAIqvE,EAAY98E,EAAMihB,MAEtB47D,EAAcC,EAAY,GAAMpB,EAAWgB,GAAcP,EACzDZ,EAAUqB,OAAOC,GACjB,GAAIvB,EAAe,CACfG,EAAemB,OAAOC,GAG1B,GAAI78E,EAAM2M,MAAO,CACb4uE,EAAUnL,OACVqL,EAAerL,OACfmL,EAAU9E,KAAOz2E,EAAM2M,MACvB,GAAI2uE,EAAe,CACfG,EAAehF,KAAOz2E,EAAM2M,OAGpC,GAAI3M,EAAM+4C,KAAM,CACZwiC,EAAUnL,OACVmL,EAAUxJ,UAAY/xE,EAAM+4C,KAAK87B,QAIrC0G,EAAUnF,aAAe,SACzBmF,EAAU9zB,UAAY,SACtB,GAAI6zB,EAAe,CACfG,EAAerF,aAAe,SAC9BqF,EAAeh0B,UAAY,SAG/B,GAAI+zB,EAAc,CACdD,EAAUhE,SAASz/C,EAAM,GAAIgkD,EAAW,GAAK,IAAM,EAAIJ,EAAWgB,EAAa,IAEnF,GAAIpB,EAAe,CACfG,EAAelE,SAASz/C,EAAM,GAAIgkD,EAAW,GAAK,IAAM,EAAIJ,EAAWgB,EAAa,IAExF,GAAI18E,EAAM+4C,KAAM,CACZwiC,EAAU3K,UAId,GAAI5wE,EAAM2M,MAAO,CACb4uE,EAAU3K,UACV6K,EAAe7K,UAGnBiM,GAAcC,EAAY,EAAIb,IAAcP,EAAWgB,GAAcP,EACrEZ,EAAUqB,OAAOC,GACjB,GAAIvB,EAAe,CACfG,EAAemB,OAAOC,OAI9BtB,EAAU3K,UACV,GAAI0K,EAAe,CACfG,EAAe7K,UAGnB,GAAImL,EAAU,CACVL,GAAYgB,MAIpBnB,EAAU3K,UACV,GAAI0K,EAAe,CACfG,EAAe7K,eAK/B5vE,OAAOssB,eAAe8tD,EAAiB5xE,UAAW,WAAY,CAC1D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUq0D,GACb,OAAQznE,KAAKsoE,UACT,IAAK,WACD,OAAOtoE,KAAKq/E,iBAAiB5X,GACjC,QACI,OAAOv3C,EAAOpkB,UAAUqtE,SAAShwE,KAAKnJ,KAAMynE,OAI5DnkE,OAAOssB,eAAe8tD,EAAiB5xE,UAAW,mBAAoB,CAClE4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUq0D,GACb,IAAIt3C,EAAQnwB,KACZ,IAAIwxB,EAAUi2C,EAAMj2C,QACpB,IAAI+gD,EAAevyE,KAAK+6C,UAAUy3B,cAClC,IAAIwH,EAAMh6E,KAAKiP,MAAMwpE,WAAa,MAClC,IAAIjxB,EAAoBxnD,KAAKiP,MAAMu4C,kBACnC,IAAIxN,EAAWh6C,KAAKiP,MAAM+qC,SAC1B,IAAIigC,EAAWpoD,GAAemoB,IAAawN,GAAqB,WAChE,IAAIE,EAAW1nD,KAAKiP,MAAMy4C,UAAY,GACtC,IAAIq0B,EAGJ/7E,KAAKo5E,aAAe,KACpBp5E,KAAKw4E,UAAY,GACjBx4E,KAAK2+E,cAAgB,MAErBntD,EAAQkhD,OACRH,EAAaG,OACb1yE,KAAKy5E,WAAWhS,EAAO,MAEvB,IAAI4S,EAAQr6E,KAAK+P,KAAKrO,WAAWmE,QAAQ,MAAO,IAAIqH,MAAM,MAC1D,IAAIotE,EAAgB,KACpB,IAAIz5B,EAAa,EAEjB,IAAIg2B,EAAU,EACdzmD,GAAYiqD,GAAO,SAAUX,EAAMC,GAE/B,IAAIx4B,EAASL,GAAcx+C,MAAMo3E,EAAM,MAAOvpD,EAAMlhB,MAAM04C,kBAE1D,IAAI8yB,EAAW,CACX5D,QAASA,EACT6D,OAAQ,EACRn3D,MAAO,EACPs0B,OAAQ,EACR7gB,KAAM,EACNwM,MAAO,EACPo2C,WAAY,IAEhB,IAAIW,EACJ,IAAIU,EACJ,IAAIC,EAEJ9qD,GAAY+wB,GAAQ,SAAU7+C,EAAOq3E,GAEjC,GAAIr3E,EAAMR,MAAQ,SAAU,CACxB,GAAIQ,EAAMyN,MAAQ,MAAO,CACrB,IAAKuqE,EAAe,CAChB9oD,EAAQ0hD,UACRX,EAAaW,UACboH,EAAgB,KAEpBW,EAAc/iE,UACdqiE,EAAeriE,UACfgjE,EAAoBhjE,cAEnB,CACD,IAAIjF,EAAS6tC,GAAci5B,aAAaz3E,EAAMyN,MAC9C,IAAI8oE,EAAY1oD,EAAM2oD,cAAc7lE,GACpCue,EAAQkhD,OACRH,EAAaG,OACblhD,EAAQunD,KAAOF,EACf0B,EAAe1B,EACf,GAAI5lE,EAAOooC,KAAM,CACb4/B,EAAchoE,EAAOooC,KAEzB,GAAIpoC,EAAOsQ,MAAO,CACd23D,EAAoB73B,GAAepwC,EAAOsQ,OAE9C+2D,EAAgB,MAEpB,GAAIL,EAAU,CACV8B,EAAkB5rD,EAAMyqD,aAAalzB,EAAUl2B,SAIlD,GAAIlvB,EAAMR,MAAQ,QAAS,CAE5B,IAAIw9E,EAAQh9E,EAAMyN,KAAK0nB,MAAM,QAAU,GACvC,GAAIuiD,EAAK,CACLsF,EAAMnvB,UAEV,IAAK,IAAInvD,EAAI,EAAGA,EAAIs+E,EAAMt7E,OAAQhD,IAAK,CACnC,IAAIo5B,EAAOklD,EAAMt+E,GAEjB,IAAI25E,EAAUxqD,EAAMyqD,aAAaxgD,EAAM5I,GACvC,IAAIoqD,EAAajB,EAAQp3D,MAEzB,GAAIg3D,GAAgBW,GAAsBA,EAAoBU,EAAa,CACvEA,EAAaV,EAEjB,IAAIqB,EAAc5B,EAAQE,wBAA0BF,EAAQG,yBAC5D,GAAIyB,EAAc9B,EAAS5iC,OAAQ,CAC/B4iC,EAAS5iC,OAAS0kC,EAEtB,GAAI5B,EAAQE,wBAA0BJ,EAASC,OAAQ,CACnDD,EAASC,OAASC,EAAQE,wBAE9BJ,EAASl3D,OAASq4D,EAClBnB,EAASzjD,MAAQ2jD,EAAQkB,sBACzBpB,EAASj3C,OAASm3C,EAAQmB,uBAC1BrB,EAASb,WAAWp0E,KAAK,CACrByJ,MAAOsrE,EACPl/B,KAAM4/B,EACNlrE,KAAMqqB,EACN7W,MAAOq4D,EACP/jC,OAAQ0kC,EAAc5B,EAAQG,yBAC9B9jD,KAAM2jD,EAAQkB,sBACdr4C,MAAOm3C,EAAQmB,uBACfpB,OAAQC,EAAQE,wBAChBjE,QAAS,EACTC,QAAS0F,EACT36B,eAAgB1pC,YAEpB2oC,GAAc+6B,EAEd,GAAI3B,EAAU,CAEV,IAAK8B,EAAiB,CAClBA,EAAkB5rD,EAAMyqD,aAAalzB,EAAUl2B,GAEnD,IAAIwqD,EAAgBD,EAAgBF,sBAAwBE,EAAgBD,uBAC5Ej7B,GAAcm7B,EACd,GAAKn7B,EAAam7B,EAAiBhiC,EAAU,CACzC,GAAIygC,EAASb,WAAW51E,QAAU,EAAG,CACjCmsB,EAAMipD,aAAe,UAEpB,CACDqB,EAASl3D,OAASy4D,EAClBvB,EAASzjD,MAAQ+kD,EAAgBF,sBACjCpB,EAASj3C,OAASu4C,EAAgBD,uBAClCrB,EAASb,WAAWp0E,KAAK,CACrByJ,MAAOsrE,EACPl/B,KAAM4/B,EACNlrE,KAAM23C,EACNnkC,MAAOy4D,EACPnkC,OAAQ0kC,EAAcR,EAAgBjB,yBACtC9jD,KAAM+kD,EAAgBF,sBACtBr4C,MAAOu4C,EAAgBD,uBACvBpB,OAAQqB,EAAgBlB,wBACxBjE,QAAS,EACTC,QAAS0F,EACT36B,eAAgB1pC,YAGxB,OAGR,GAAI8hE,EAAK,CACL,YAKhB,GAAI7pD,EAAMlhB,MAAMutE,sBAAsB9mD,GAAS,CAC3C+kD,EAAS5iC,QAAU1nB,EAAMlhB,MAAMutE,WAAWppE,UAEzC,CACDqnE,EAAS5iC,QAAU1nB,EAAMlhB,MAAMutE,YAAc,IAEjDrsD,EAAMqoD,UAAUhzE,KAAKi1E,GAErB5D,GAAW4D,EAAS5iC,UAExB,IAAKyiC,EAAe,CAChB9oD,EAAQ0hD,UACRX,EAAaW,UAEjB,GAAI1rB,GAAqB,QAAW3G,EAAa7G,EAAW,CACxDh6C,KAAKo5E,aAAe,MAGxBhpD,GAAYpwB,KAAKw4E,WAAW,SAAUiC,GAClCrqD,GAAYqqD,EAASb,YAAY,SAAUt3E,GACvCA,EAAMu0E,SAAWvrE,KAAKoyB,OAAO+8C,EAAS5iC,OAASv1C,EAAMu1C,QAAU4iC,EAASC,OAASp4E,EAAMo4E,SAAW,SAG1GlpD,EAAQ0hD,UACRX,EAAaW,UACb,MAAO,CACHl8C,KAAM,EACND,IAAK,EACLyM,MAAO,EACPC,OAAQ,MAIpB,OAAOi6C,EA3bS,CA4blBnF,IAKF,IAAIgH,GAA6B,SAAUrvD,GACvC1F,GAAU+0D,EAAarvD,GACvB,SAASqvD,EAAYhP,EAAUx0B,GAC3B,IAAI5rB,EAAQD,EAAO/mB,KAAKnJ,KAAMuwE,IAAavwE,KAC3CsD,OAAOssB,eAAeO,EAAO,QAAS,CAClCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAeO,EAAO,SAAU,CACnCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAeO,EAAO,QAAS,CAClCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAeO,EAAO,UAAW,CACpCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAeO,EAAO,cAAe,CACxCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAeO,EAAO,aAAc,CACvCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAeO,EAAO,gBAAiB,CAC1Cza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAeO,EAAO,gBAAiB,CAC1Cza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAeO,EAAO,gBAAiB,CAC1Cza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAeO,EAAO,aAAc,CACvCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB+c,EAAM4rB,MAAQA,EACd,OAAO5rB,EAEX7sB,OAAOssB,eAAe2vD,EAAYzzE,UAAW,WAAY,CACrD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH8c,EAAOpkB,UAAUikB,SAAS5mB,KAAKnJ,MAC/B,GAAIA,KAAKw/E,WAAY,CACjBrP,GAAYnwE,KAAKw/E,gBAI7Bl8E,OAAOssB,eAAe2vD,EAAYzzE,UAAW,iBAAkB,CAC3D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAKpT,KAAK6xC,aAAc,CACpB,IAAI/oC,EAAI,EACR,IAAIjI,EAAI,EACR,GAAIb,KAAKujB,MAAO,CACZza,EAAI9I,KAAKujB,MAEb,GAAIvjB,KAAK63C,OAAQ,CACbh3C,EAAIb,KAAK63C,OAEb73C,KAAK6xC,aAAe,CAChB7a,KAAM,EACND,IAAK,EACLyM,MAAO16B,EACP26B,OAAQ5iC,GAEZb,KAAK2xE,WAAW3xE,KAAK6xC,cAEzB,OAAO7xC,KAAK6xC,gBAGpBvuC,OAAOssB,eAAe2vD,EAAYzzE,UAAW,UAAW,CACpD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU++D,GACbjiD,EAAOpkB,UAAUmnE,QAAQ9pE,KAAKnJ,KAAMmyE,GACpC,GAAInyE,KAAK+7C,MAAO,CACZ,IAAI0rB,EAAQznE,KAAK0wE,QAAUyB,EAC3B,GAAInyE,KAAKmzE,UAAYj7D,UAAW,CAC5BlY,KAAKmzE,QAAUvD,GAAU5vE,KAAK+7C,OAC9B0rB,EAAM0L,QAAU,KAEpB,GAAInzE,KAAKmzE,SAAWnzE,KAAK+6C,UAAUq3B,aAAc,CAC7C,OAEJ,GAAI3K,EAAMuJ,MAAO,CACb,GAAIhxE,KAAK69C,YAAa,CAClB4pB,EAAMj2C,QAAQqsB,YAAc79C,KAAK69C,YAAYs5B,MAAMn3E,KAAKi+C,eAAiB,GAE7E,GAAIj+C,KAAK89C,WAAY,CACjB2pB,EAAMj2C,QAAQssB,WAAa99C,KAAK89C,WAEpC,GAAI99C,KAAK+9C,cAAe,CACpB0pB,EAAMj2C,QAAQusB,cAAgB/9C,KAAK+9C,cAEvC,GAAI/9C,KAAKg+C,cAAe,CACpBypB,EAAMj2C,QAAQwsB,cAAgBh+C,KAAKg+C,cAGvC,IAAIz6B,EAAQvjB,KAAKujB,OAASvjB,KAAK+7C,MAAM0jC,aACrC,IAAI5nC,EAAS73C,KAAK63C,QAAU73C,KAAK+7C,MAAM2jC,cACvCjY,EAAMj2C,QAAQw+C,UAAUhwE,KAAK+7C,MAAO,EAAG,EAAGx4B,EAAOs0B,GAErD,GAAI73C,KAAKk4B,aAAel4B,KAAKqxE,iBAAkB,CAC3C,IAAI9sB,EAAOvkD,KAAK2/E,SAAS3/E,KAAK+7C,OAC9B/7C,KAAK+6C,UAAUy3B,cAAcxC,UAAUzrB,EAAM,EAAG,QAKhEjhD,OAAOssB,eAAe2vD,EAAYzzE,UAAW,QAAS,CAClD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH8c,EAAOpkB,UAAUwI,MAAMnL,KAAKnJ,MAC5BA,KAAK+7C,MAAQ7jC,UACblY,KAAKw/E,WAAatnE,aAG1B5U,OAAOssB,eAAe2vD,EAAYzzE,UAAW,WAAY,CACrD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU2oC,GACb,GAAI/7C,KAAKw/E,aAAetnE,UAAW,CAE/B,IAAIqL,EAAQvjB,KAAKujB,OAASw4B,EAAM0jC,aAChC,IAAI5nC,EAAS73C,KAAK63C,QAAUkE,EAAM2jC,cAElC,IAAI7P,EAASvvE,SAASw2B,cAAc,UACpC+4C,EAAOtsD,MAAQA,EACfssD,EAAOh4B,OAASA,EAChB,IAAIrmB,EAAUq+C,EAAOC,WAAW,MAChCt+C,EAAQouD,sBAAwB,MAChCpuD,EAAQ6iD,UAAYr0E,KAAKo4E,cACzB5mD,EAAQquD,SAAS,EAAG,EAAGt8D,EAAOs0B,GAC9B,IAAK+3B,GAAU7zB,GAAQ,CACnBvqB,EAAQ0mD,yBAA2B,iBACnC1mD,EAAQw+C,UAAUj0B,EAAO,EAAG,EAAGx4B,EAAOs0B,GAE1C73C,KAAKw/E,WAAa3P,EAEtB,OAAO7vE,KAAKw/E,cAGpB,OAAOD,EAnLI,CAoLbjP,IAKF,IAAIwP,GAAqC,WACrC,SAASA,EAAoB/tD,EAAO6c,EAAOyuC,GACvC/5E,OAAOssB,eAAe5vB,KAAM,QAAS,CACjC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO2e,IAEXzuB,OAAOssB,eAAe5vB,KAAM,QAAS,CACjC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAOw7B,IAEXtrC,OAAOssB,eAAe5vB,KAAM,OAAQ,CAChC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAOiqE,IAEX/5E,OAAOssB,eAAe5vB,KAAM,KAAM,CAC9B0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAe5vB,KAAM,YAAa,CACrC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,QAEX9P,OAAOssB,eAAe5vB,KAAM,SAAU,CAClC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,OAEX,GAAI2sE,GAAgB,gBAAkBhuD,aAAiBsF,MAAO,CAC1Dr3B,KAAKkC,GAAK6vB,EAAMiuD,eAEf,CACDhgF,KAAKkC,GAAK,MAGlB,OAAO49E,EA7CY,GAmDvB,IAAIG,GAAgC,SAAU/vD,GAC1C1F,GAAUy1D,EAAgB/vD,GAK1B,SAAS+vD,EAAejO,GACpB,IAAI7hD,EAAQD,EAAO/mB,KAAKnJ,OAASA,KACjCsD,OAAOssB,eAAeO,EAAO,OAAQ,CACjCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO9S,SAASw2B,cAAc,SAElCxzB,OAAOssB,eAAeO,EAAO,YAAa,CACtCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO9S,SAASw2B,cAAc,SAElCxzB,OAAOssB,eAAeO,EAAO,SAAU,CACnCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,KAEX9P,OAAOssB,eAAeO,EAAO,eAAgB,CACzCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,KAEX9P,OAAOssB,eAAeO,EAAO,eAAgB,CACzCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO+c,EAAMsgD,SAAS,KAE1BntE,OAAOssB,eAAeO,EAAO,aAAc,CACvCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAeO,EAAO,gBAAiB,CAC1Cza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAeO,EAAO,iBAAkB,CAC3Cza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO9S,SAASw2B,cAAc,YAElCxzB,OAAOssB,eAAeO,EAAO,kBAAmB,CAC5Cza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO+c,EAAM+vD,eAAepQ,WAAW,QAE3CxsE,OAAOssB,eAAeO,EAAO,SAAU,CACnCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,IAEX9P,OAAOssB,eAAeO,EAAO,UAAW,CACpCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,IAEX9P,OAAOssB,eAAeO,EAAO,eAAgB,CACzCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,IAEX9P,OAAOssB,eAAeO,EAAO,gBAAiB,CAC1Cza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,IAEX9P,OAAOssB,eAAeO,EAAO,aAAc,CACvCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAeO,EAAO,sBAAuB,CAChDza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,OAEX9P,OAAOssB,eAAeO,EAAO,aAAc,CACvCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,KAEX9P,OAAOssB,eAAeO,EAAO,UAAW,CACpCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,KAEX9P,OAAOssB,eAAeO,EAAO,WAAY,CACrCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,IAEX9P,OAAOssB,eAAeO,EAAO,YAAa,CACtCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,KAEX9P,OAAOssB,eAAeO,EAAO,oBAAqB,CAC9Cza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,IAEX9P,OAAOssB,eAAeO,EAAO,eAAgB,CACzCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,QAGX9P,OAAOssB,eAAeO,EAAO,YAAa,CACtCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,IAAI84B,MAEf5oC,OAAOssB,eAAeO,EAAO,YAAa,CACtCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,KAEX9P,OAAOssB,eAAeO,EAAO,aAAc,CACvCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,KAEX9P,OAAOssB,eAAeO,EAAO,wBAAyB,CAClDza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAeO,EAAO,gBAAiB,CAC1Cza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,QAEX9P,OAAOssB,eAAeO,EAAO,uBAAwB,CACjDza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,MAEX9P,OAAOssB,eAAeO,EAAO,eAAgB,CACzCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,QAEX9P,OAAOssB,eAAeO,EAAO,sBAAuB,CAChDza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB,GAAI4+D,GAAc,KAAM,CACpB7hD,EAAM6hD,WAAa5xE,OAAO+/E,qBAEzB,CACDhwD,EAAM6hD,WAAaA,EAEvB7hD,EAAMigD,KAAKnhE,MAAM+K,SAAW,WAC5BmW,EAAMigD,KAAKn5C,YAAY9G,EAAMiwD,WAC7BjwD,EAAME,WAAW7qB,KAAK,IAAIwqB,IAAS,WAC/BoJ,GAAajJ,EAAMyE,SAAS,SAAUiT,EAAM9U,GACxCA,EAAOpC,SAAStc,aAEpB+b,GAAYD,EAAMmiD,QAAQ,SAAU7K,GAChC0I,GAAY1I,EAAM2I,MAClB,GAAI3I,EAAM4Y,eAAgB,CACtBlQ,GAAY1I,EAAM4Y,oBAG1BlQ,GAAYhgD,EAAMmwD,YAClBnQ,GAAYhgD,EAAM+vD,oBAGtB/vD,EAAMmwD,WAAahgF,SAASw2B,cAAc,UAC1C3G,EAAMqiD,cAAgBriD,EAAMmwD,WAAWxQ,WAAW,KAAM,CAAE5wC,MAAO,MAAO6wC,mBAAoB,OAC5F5/C,EAAMqiD,cAAcoN,sBAAwB,MAC5CzvD,EAAMmwD,WAAWrxE,MAAM+K,SAAW,WAClCmW,EAAMmwD,WAAWrxE,MAAM8nB,IAAM,MAC7B5G,EAAMmwD,WAAWrxE,MAAM+nB,KAAO,MAC9B7G,EAAME,WAAW7qB,KAAKguC,GAAwBrjB,EAAMmwD,WAAY,SAAS,SAAU3xC,GAC/E,IAAI5c,EAAQ5B,EAAMowD,SAAS5xC,GAC3B,IAAIhjC,EAASwkB,EAAMqwD,cAAczuD,EAAM6c,MAAO7c,EAAMsrD,MACpDltE,QAAQswE,MAAM90E,OAGlBwkB,EAAME,WAAW7qB,KAAK4jD,IAAc,WAChC,GAAI4oB,GAAc,KAAM,CACpB7hD,EAAM6hD,WAAa5xE,OAAO+/E,sBAKlC,GAAIJ,GAAgB,eAAgB,CAChC,IAAIzuD,EAAW,SAAUjT,GACrB,GAAI8R,EAAMkjD,UAAUrvE,SAAW,EAAG,CAC9Bu3E,GAAoBprD,EAAMkjD,WAAW,SAAU58D,GAC3C,GAAIA,EAAKrD,MAAMqgE,oBAAqB,CAChCp1D,EAAGoC,iBACH,OAAO,MAEX,OAAO,QAIf,GAAI0P,EAAMuwD,oBAAqB,CAC3BvwD,EAAMwwD,0BAGdxwD,EAAME,WAAW7qB,KAAKguC,GAAwBpzC,OAAQ,aAAckxB,EAAU,CAAE29B,QAAS,SACzF9+B,EAAME,WAAW7qB,KAAKguC,GAAwBrjB,EAAMigD,KAAM,aAAc9+C,EAAU,CAAE29B,QAAS,SAC7F9+B,EAAME,WAAW7qB,KAAKguC,GAAwBrjB,EAAMigD,KAAM,aAAa,WAEnE,GAAIjgD,EAAMuwD,oBAAqB,CAC3BvwD,EAAMwwD,2BAEX,CAAE1xB,QAAS,QACd9+B,EAAME,WAAW7qB,KAAKguC,GAAwBpzC,OAAQ,SAAS,SAAUge,GACrE+R,EAAMqjD,aAAe,QACtB,CAAEvkB,QAAS,QACd9+B,EAAME,WAAW7qB,KAAKguC,GAAwBrjB,EAAMigD,KAAM,SAAS,SAAUhyD,GACzEhe,OAAOqN,YAAW,WACd0iB,EAAMqjD,aAAe,KACrBrjD,EAAMwwD,0BACP,OACJ,CAAE1xB,QAAS,QAGlB,GAAI8wB,GAAgB,eAAgB,CAChC5vD,EAAME,WAAW7qB,KAAKguC,GAAwBrjB,EAAMigD,KAAM,SAAS,SAAU/xD,GACzE,IAAIuiE,EAAU,MACdzwD,EAAMijD,UAAUvmE,SAAQ,SAAUg0E,GAC9B,GAAIA,EAAIxsC,UAAW,CACfusC,EAAU,KACV,OAAO,UAGf,GAAIA,EAAS,CACTviE,EAAGoC,oBAER,CAAEwuC,QAAS,SAElB,OAAO9+B,EAEX7sB,OAAOssB,eAAeqwD,EAAen0E,UAAW,wBAAyB,CACrE4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAI+c,EAAQnwB,KACZ,GAAIA,KAAK0gF,oBAAqB,CAC1B9sE,aAAa5T,KAAK0gF,qBAEtB,GAAI1gF,KAAK8gF,qBAAuB,EAAG,CAC/B9gF,KAAK0gF,oBAAsBtgF,OAAOqN,YAAW,WACzC0iB,EAAMqjD,aAAe,QACtBxzE,KAAK8gF,0BAIpBx9E,OAAOssB,eAAeqwD,EAAen0E,UAAW,iBAAkB,CAC9DwH,IAAK,WACD,QAAStT,KAAKsgF,WAAWpqD,YAE7B3iB,IAAK,SAAUH,GACX,GAAIA,EAAO,CACP,IAAKpT,KAAKsgF,WAAWpqD,WAAY,CAC7Bl2B,KAAKowE,KAAKn5C,YAAYj3B,KAAKsgF,iBAG9B,CACD,GAAItgF,KAAKsgF,WAAWpqD,WAAY,CAC5Bl2B,KAAKsgF,WAAWpqD,WAAWX,YAAYv1B,KAAKsgF,eAIxD5qE,WAAY,MACZC,aAAc,OAElBrS,OAAOssB,eAAeqwD,EAAen0E,UAAW,uBAAwB,CACpE4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUy4D,EAAIC,EAAIC,EAAIC,GACzB,OAAOhsE,KAAK2wE,aAAan/C,QAAQuvD,qBAAqBlV,EAAIC,EAAIC,EAAIC,MAG1E1oE,OAAOssB,eAAeqwD,EAAen0E,UAAW,uBAAwB,CACpE4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUy4D,EAAIC,EAAIkV,EAASjV,EAAIC,EAAIiV,GACtC,OAAOjhF,KAAK2wE,aAAan/C,QAAQ0vD,qBAAqBrV,EAAIC,EAAIkV,EAASjV,EAAIC,EAAIiV,MAGvF39E,OAAOssB,eAAeqwD,EAAen0E,UAAW,gBAAiB,CAC7D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU+tE,EAAU18B,EAAYrJ,EAAY73B,EAAOs0B,GAuBtD73C,KAAKkgF,eAAe38D,MAAQA,EAC5BvjB,KAAKkgF,eAAeroC,OAASA,EAC7B73C,KAAKohF,gBAAgBC,UAAU,EAAG,EAAG99D,EAAOs0B,GAG5C4M,EAAW68B,eAAethF,KAAKohF,iBAC/BD,EAASG,eAAethF,KAAKohF,iBAC7B,OAAOphF,KAAKohF,gBAAgBxlC,cAAc57C,KAAKkgF,eAAgB9kC,MAGvE93C,OAAOssB,eAAeqwD,EAAen0E,UAAW,gBAAiB,CAC7D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,OAAO,IAAIsgE,GAAgB1zE,SAGnCsD,OAAOssB,eAAeqwD,EAAen0E,UAAW,eAAgB,CAC5D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,OAAO,IAAI2jE,GAAe/2E,SAGlCsD,OAAOssB,eAAeqwD,EAAen0E,UAAW,WAAY,CACxD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUrD,EAAMd,GACnB,OAAO,IAAIspE,GAAWv4E,KAAM+P,EAAMd,MAG1C3L,OAAOssB,eAAeqwD,EAAen0E,UAAW,gBAAiB,CAC7D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,OAAO,IAAIqqE,MAGnBn6E,OAAOssB,eAAeqwD,EAAen0E,UAAW,iBAAkB,CAC9D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUrD,EAAMd,GACnB,OAAO,IAAIyuE,GAAiB19E,KAAM+P,EAAMd,MAGhD3L,OAAOssB,eAAeqwD,EAAen0E,UAAW,cAAe,CAC3D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU2oC,GACb,OAAO,IAAIwjC,GAAYv/E,KAAM+7C,MAGrCz4C,OAAOssB,eAAeqwD,EAAen0E,UAAW,cAAe,CAC3D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUq0D,GACbA,EAAMuJ,MAAQ,KACdvJ,EAAM8Z,OAAOvhF,KAAKwhF,aAAcxhF,KAAKyhF,cAAezhF,KAAKgyE,eAGjE1uE,OAAOssB,eAAeqwD,EAAen0E,UAAW,SAAU,CACtD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUmQ,EAAOs0B,GACpB,IAAI1nB,EAAQnwB,KACZA,KAAKwhF,aAAej+D,EACpBvjB,KAAKyhF,cAAgB5pC,EACrB73C,KAAK0hF,OAASp2E,KAAK+D,MAAMkU,EAAQvjB,KAAKgyE,YACtChyE,KAAK2hF,QAAUr2E,KAAK+D,MAAMwoC,EAAS73C,KAAKgyE,YACxC5hD,GAAYpwB,KAAKsyE,QAAQ,SAAU7K,GAC/B,GAAIA,EAAO,CACPt3C,EAAM4gD,YAAYtJ,OAI1BznE,KAAKsgF,WAAW/8D,MAAQvjB,KAAK0hF,OAC7B1hF,KAAKsgF,WAAWzoC,OAAS73C,KAAK2hF,QAC9B3hF,KAAKsgF,WAAWrxE,MAAMsU,MAAQA,EAAQ,KACtCvjB,KAAKsgF,WAAWrxE,MAAM4oC,OAASA,EAAS,KACxC73C,KAAKowE,KAAKnhE,MAAMsU,MAAQA,EAAQ,KAChCvjB,KAAKowE,KAAKnhE,MAAM4oC,OAASA,EAAS,QAG1Cv0C,OAAOssB,eAAeqwD,EAAen0E,UAAW,sBAAuB,CACnE4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU28D,GACb,GAAIA,SAA4B,EAAG,CAAEA,EAAqB,MAC1D,IAAIK,EAAO9vE,SAASw2B,cAAc,UAClC,IAAItF,EAAU4+C,EAAKN,WAAW,KAAM,CAAEC,mBAAoBA,IAC1D,IAAItI,EAAQ,IAAIma,GAAYxR,EAAM5+C,GAClC4+C,EAAKnhE,MAAM+K,SAAW,WACtBo2D,EAAKnhE,MAAM8nB,IAAM,MACjBq5C,EAAKnhE,MAAM+nB,KAAO,MAClB,OAAOywC,KAGfnkE,OAAOssB,eAAeqwD,EAAen0E,UAAW,kBAAmB,CAC/D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUmc,GACb,IAAI+iD,EAAStyE,KAAKsyE,OAClB,IAAItuE,EAASsuE,EAAOtuE,OACpB,IAAK,IAAIhD,EAAI,EAAGA,EAAIgD,EAAQhD,IAAK,CAC7B,IAAIymE,EAAQ6K,EAAOtxE,GACnB,GAAIymE,EAAMl4C,OAASA,EAAO,CACtB,OAAOk4C,OAKvBnkE,OAAOssB,eAAeqwD,EAAen0E,UAAW,WAAY,CACxD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUmc,EAAOwkB,GACpB,GAAIA,SAAiB,EAAG,CAAEA,EAAU,KACpC,IAAI8tC,EAAgB7hF,KAAK8hF,gBAAgBvyD,GACzC,GAAIsyD,EAAe,CACf,OAAOA,EAEX,IAAIpa,EAAQznE,KAAK+hF,oBAAoBxyD,GAAS,IAC9Ck4C,EAAMl4C,MAAQA,EACdk4C,EAAM1zB,QAAUA,EAChB,GAAI0zB,EAAM1zB,SAAW/zC,KAAK0hF,OAAQ,CAC9Bja,EAAM2I,KAAK7sD,MAAQvjB,KAAK0hF,OACxBja,EAAM2I,KAAKnhE,MAAMsU,MAAQvjB,KAAKwhF,aAAe,KAC7C/Z,EAAM2I,KAAKv4B,OAAS73C,KAAK2hF,QACzBla,EAAM2I,KAAKnhE,MAAM4oC,OAAS73C,KAAKyhF,cAAgB,KAEnD,IAAInP,EAAStyE,KAAKsyE,OAClBA,EAAO9sE,KAAKiiE,GACZ6K,EAAOv8C,MAAK,SAAUn1B,EAAGE,GACrB,GAAIF,EAAE2uB,MAAQzuB,EAAEyuB,MAAO,CACnB,OAAO,OAEN,GAAI3uB,EAAE2uB,MAAQzuB,EAAEyuB,MAAO,CACxB,OAAQ,MAEP,CACD,OAAO,MAGf,IAAIvrB,EAASsuE,EAAOtuE,OACpB,IAAIg+E,EAAalvD,GAAew/C,EAAQ7K,GACxC,IAAIp8C,EACJ,IAAK,IAAIrqB,EAAIghF,EAAa,EAAGhhF,EAAIgD,EAAQhD,IAAK,CAC1C,GAAIsxE,EAAOtxE,GAAG+yC,QAAS,CACnB1oB,EAAOinD,EAAOtxE,GACd,OAGR,GAAIymE,EAAM1zB,QAAS,CACf,GAAI1oB,IAASnT,UAAW,CACpBlY,KAAKogF,UAAUnpD,YAAYwwC,EAAM2I,UAEhC,CACDpwE,KAAKogF,UAAU6B,aAAaxa,EAAM2I,KAAM/kD,EAAK+kD,OAGrD,OAAO3I,KAGfnkE,OAAOssB,eAAeqwD,EAAen0E,UAAW,SAAU,CACtD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU4kB,GACb,IAAI7H,EAAQnwB,KACZA,KAAKkiF,aAAal+E,OAAS,EAC3BosB,GAAYpwB,KAAKsyE,QAAQ,SAAU7K,GAC/B,GAAIA,EAAO,CACP,GAAIA,EAAMuJ,OAASvJ,EAAM1zB,QAAS,CAC9B5jB,EAAM+xD,aAAa18E,KAAKiiE,GACxBA,EAAMnzD,aAIlBtU,KAAKwyE,cAAcE,OAGnB1yE,KAAKwyE,cAAc6B,UAAY,OAC/Br0E,KAAKwyE,cAAcqN,SAAS,EAAG,EAAG7/E,KAAK0hF,OAAQ1hF,KAAK2hF,SACpD3pD,EAAK47C,OAAO5zE,KAAK2wE,cACjB3wE,KAAKwyE,cAAcU,UAInB9iD,GAAYpwB,KAAKsyE,QAAQ,SAAU7K,GAC/B,GAAIA,EAAO,CACP,IAAIj2C,EAAUi2C,EAAMj2C,QACpBA,EAAQsmD,YACRtmD,EAAQq5B,OAAO,EAAG,GAClBr5B,EAAQy6B,aAGhB77B,GAAYpwB,KAAKkiF,cAAc,SAAUza,GACrCA,EAAMj2C,QAAQ0hD,UACdzL,EAAMuJ,MAAQ,SAGlB,GAAIhxE,KAAKozE,UAAU5nE,MAAQxL,KAAKmiF,sBAAuB,CAEnD,IAAIC,EAAWpiF,KAAKmiF,sBAAsBrzC,OAC1C1e,GAAYpwB,KAAKmiF,sBAAsBpvD,QAAQ,SAAUhB,GACrD5B,EAAMkyD,yBAAyBtwD,EAAOqwD,UAKtD9+E,OAAOssB,eAAeqwD,EAAen0E,UAAW,UAAW,CACvD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUytE,GACb,IAAI3+E,EAAKktE,KAAepvE,KAAKkxE,UAC7B,IAAI7tD,EAAQ0b,GAAMY,QAAQz9B,GAAIi1E,QAC9Bn3E,KAAKsiF,UAAUj/D,GAASw9D,EACxB,OAAOx9D,KAGf/f,OAAOssB,eAAeqwD,EAAen0E,UAAW,gBAAiB,CAC7D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUytE,GACb,GAAIA,EAAI3P,WAAah5D,UAAW,QACrBlY,KAAKsiF,UAAUzB,EAAI3P,cAOtC5tE,OAAOssB,eAAeqwD,EAAen0E,UAAW,WAAY,CACxD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUu7B,EAAe4zC,GAC5B,GAAIA,SAAqB,EAAG,CAAEA,EAAc,KAC5C,IAAIlF,EAAOkF,EAAcviF,KAAKowE,KAAKxnB,wBAA0B,IAAI45B,QAAQ,EAAG,EAAG,EAAG,GAClF,OAAO,IAAI1C,GAAoBnxC,EAAgBA,EAAc8zC,SAAW9zC,EAAc+zC,QAAU,CAC5F90E,EAAG+gC,EAAc8zC,SAAW9zC,EAAc8zC,QAAUpF,EAAKrmD,KAAO,GAChErzB,EAAGgrC,EAAc+zC,SAAW/zC,EAAc+zC,QAAUrF,EAAKtmD,IAAM,IAC/D,CACAnpB,EAAG,EACHjK,EAAG,GACH05E,MAGZ/5E,OAAOssB,eAAeqwD,EAAen0E,UAAW,gBAAiB,CAC7D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUw7B,EAAOyuC,GACpB,GAAIA,EAAK95D,QAAU,GAAK85D,EAAKxlC,SAAW,GAAKjJ,EAAMhhC,EAAI,GAAKghC,EAAMhhC,EAAIyvE,EAAK95D,OAASqrB,EAAMjrC,EAAI,GAAKirC,EAAMjrC,EAAI05E,EAAKxlC,OAAQ,CACtH,WAEC,CACD,IAAI8qC,EAAQ3iF,KAAKwyE,cAAcvC,aAE/B3kE,KAAKoyB,MAAOkR,EAAMhhC,EAAIyvE,EAAK95D,MAASvjB,KAAK0hF,QAASp2E,KAAKoyB,MAAOkR,EAAMjrC,EAAI05E,EAAKxlC,OAAU73C,KAAK2hF,SAAU,EAAG,GACzG,GAAIgB,EAAM19E,KAAK,KAAO,GAAK09E,EAAM19E,KAAK,KAAO,GAAK09E,EAAM19E,KAAK,KAAO,EAAG,CACnE,OAAO,MAEX,IAAI29E,EAAU7jD,GAAMO,QAAQqjD,EAAM19E,KAAK,GAAI09E,EAAM19E,KAAK,GAAI09E,EAAM19E,KAAK,IAAIkyE,QACzE,IAAI0L,EAAM7iF,KAAKsiF,UAAUM,GACzB,OAAOC,MAInBv/E,OAAOssB,eAAeqwD,EAAen0E,UAAW,cAAe,CAC3D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUY,EAAK9T,GAClB,IAAI6yB,EAAS/yB,KAAK40B,QAAQ5gB,GAC1B,GAAI+e,IAAW7a,UAAW,CACtB6a,EAAO+vD,YAAc,KACrB,IACI5iF,EAAE6yB,GAEtB,QACoBA,EAAO+vD,YAAc,MACrB,GAAI/vD,EAAOgwD,QAAS,CAChBhwD,EAAOgwD,QAAU,MACjBz6B,GAAcv1B,EAAO4S,WAAW,SAAU7vB,GACtC,OAAQA,EAASktE,YAErB,GAAIjwD,EAAO4S,UAAU3hC,SAAW,EAAG,CAC/B+uB,EAAOpC,SAAStc,iBACTrU,KAAK40B,QAAQ5gB,UAO5C1Q,OAAOssB,eAAeqwD,EAAen0E,UAAW,oBAAqB,CACjE4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUY,EAAK+d,GAClB,IAAK/xB,KAAKijF,oBAAqB,CAC3B,OAEJjjF,KAAKkjF,YAAYlvE,GAAK,SAAU+e,GAC5B3C,GAAY2C,EAAO4S,WAAW,SAAU7vB,GACpC,IAAKA,EAASktE,SAAU,CACpBltE,EAASA,SAAS3M,KAAK2M,EAAS0b,QAASO,aAM7DzuB,OAAOssB,eAAeqwD,EAAen0E,UAAW,iBAAkB,CAC9D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUY,EAAKrI,EAAQomB,GAC1B,IAAK/xB,KAAKijF,oBAAqB,CAC3B,OAAO,MAEX,IAAIE,EAAa,MACjBnjF,KAAKkjF,YAAYlvE,GAAK,SAAU+e,GAC5B3C,GAAY2C,EAAO4S,WAAW,SAAU7vB,GACpC,IAAKA,EAASktE,UAAYltE,EAASuF,SAAW1P,EAAQ,CAClDmK,EAASA,SAAS3M,KAAK2M,EAAS0b,QAASO,GACzCoxD,EAAa,YAIzB,OAAOA,KAGf7/E,OAAOssB,eAAeqwD,EAAen0E,UAAW,qBAAsB,CAClE4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUu7B,GACb,IAAIxe,EAAQnwB,KACZ,IAAIojF,EAASz0C,EAAcy0C,OAC3B,GAAIA,GAAU,GAAKA,GAAU,GAAKA,GAAU,GAAKA,IAAWlrE,UAAW,CAEnE,OAEJ,IAAI6Z,EAAQ/xB,KAAKugF,SAAS5xC,GAC1B,IAAIhjC,EAAS3L,KAAKwgF,cAAczuD,EAAM6c,MAAO7c,EAAMsrD,MACnD,GAAI1xE,EAAQ,CACR,IAAI03E,EAAOtxD,EAAM7vB,GACjB,IAAIohF,EAAY,MAChBjU,GAAY1jE,GAAQ,SAAUk1E,GAC1B,IAAInvD,EAAO,CAAExvB,GAAImhF,EAAMjwE,MAAOytE,GAC9B1wD,EAAMozD,WAAW/9E,KAAKksB,GACtB,IAAK4xD,GAAanzD,EAAMqzD,eAAe,cAAe3C,EAAK9uD,GAAQ,CAE/DuxD,EAAY,KACZ,IAAI1tE,EAAMua,EAAMkjD,UAAUC,MAAK,SAAU1lE,GACrC,OAAOA,EAAEwF,QAAUytE,GAAOjzE,EAAE1L,KAAOmhF,KAEvC,IAAKztE,EAAK,CACNua,EAAMkjD,UAAU7tE,KAAKksB,IAG7B,OAAO,YAKvBpuB,OAAOssB,eAAeqwD,EAAen0E,UAAW,2BAA4B,CACxE4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUu7B,EAAeG,GAC5B,IAAI3e,EAAQnwB,KACZ,IAAI+xB,EAAQ/xB,KAAKugF,SAAS5xC,GAC1B,IAAIhjC,EAAS3L,KAAKwgF,cAAczuD,EAAM6c,MAAO7c,EAAMsrD,MACnDtrD,EAAM+c,OAASA,EACf,GAAInjC,EAAQ,CACR3L,KAAKozE,UAAUvmE,SAAQ,SAAUg0E,GAC7B,IAAKA,EAAIhpD,SAASlsB,GAAS,CACvBwkB,EAAMijD,UAAUz1D,OAAOkjE,GACvB,GAAIA,EAAIrsC,gBAAiB,CACrBivC,GAAgBnjF,SAASua,KAAM,SAAUgmE,EAAI6C,sBAEjDvzD,EAAMqzD,eAAe,aAAc3C,EAAK9uD,OAGhD,GAAIA,EAAM+c,OAAQ,CACdugC,GAAY1jE,GAAQ,SAAUk1E,GAC1B,IAAK1wD,EAAMijD,UAAUx9D,IAAIirE,GAAM,CAC3B1wD,EAAMijD,UAAU50D,IAAIqiE,GACpB,GAAIA,EAAIrsC,gBAAiB,CACrBqsC,EAAI6C,qBAAuBC,GAAgBrjF,SAASua,KAAM,UAC1D4oE,GAAgBnjF,SAASua,KAAM,SAAUgmE,EAAIrsC,iBAEjDrkB,EAAMqzD,eAAe,cAAe3C,EAAK9uD,GAE7C,OAAO,aAKd,CACD/xB,KAAKozE,UAAUvmE,SAAQ,SAAUg0E,GAC7B,GAAIA,EAAIrsC,gBAAiB,CACrBivC,GAAgBnjF,SAASua,KAAM,SAAUgmE,EAAI6C,sBAEjDvzD,EAAMqzD,eAAe,aAAc3C,EAAK9uD,MAE5C/xB,KAAKozE,UAAU9+D,QAEnBtU,KAAK4jF,kBAAkB,oBAAqB7xD,MAGpDzuB,OAAOssB,eAAeqwD,EAAen0E,UAAW,yBAA0B,CACtE4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUu7B,EAAeG,GAC5B,IAAI/c,EAAQ/xB,KAAKugF,SAAS5xC,GAC1B5c,EAAM+c,OAASA,EAEf9uC,KAAK4jF,kBAAkB,kBAAmB7xD,MAGlDzuB,OAAOssB,eAAeqwD,EAAen0E,UAAW,oBAAqB,CACjE4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUu7B,GACb,IAAIxe,EAAQnwB,KACZ,GAAIA,KAAKqzE,UAAUrvE,SAAW,EAAG,CAC7B,IAAI6/E,EAAU7jF,KAAKugF,SAAS5xC,GAC5B,IAAIm1C,EAAOD,EAAQ3hF,GACnBlC,KAAKqzE,UAAUxmE,SAAQ,SAAUg0E,GAC7B,GAAIA,EAAI3+E,KAAO4hF,EAAM,CACjB3zD,EAAMqzD,eAAe,cAAe3C,EAAIztE,MAAOywE,WAMnEvgF,OAAOssB,eAAeqwD,EAAen0E,UAAW,mBAAoB,CAChE4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUu7B,GACb,IAAIxe,EAAQnwB,KACZ,IAAIojF,EAASz0C,EAAcy0C,OAC3B,IAAIW,EACJ,GAAIX,GAAU,GAAKA,IAAWlrE,UAAW,CACrC6rE,EAAa,aAEZ,GAAIX,GAAU,EAAG,CAClBW,EAAa,kBAEZ,GAAIX,GAAU,EAAG,CAClBW,EAAa,kBAEZ,CAED,OAEJ,IAAIhyD,EAAQ/xB,KAAKugF,SAAS5xC,GAC1B,IAAIzsC,EAAK6vB,EAAM7vB,GACf,GAAIlC,KAAKujF,WAAWv/E,SAAW,EAAG,CAC9B,IAAIggF,EAAWhkF,KAAKwgF,cAAczuD,EAAM6c,MAAO7c,EAAMsrD,MACrD,GAAI2G,EAAU,CACVhkF,KAAKujF,WAAW12E,SAAQ,SAAUg0E,GAC9B,GAAIA,EAAI3+E,KAAOA,GAAM2+E,EAAIztE,MAAMykB,SAASmsD,GAAW,CAC/C7zD,EAAMqzD,eAAeO,EAAYlD,EAAIztE,MAAO2e,OAIxD/xB,KAAKujF,WAAWv/E,OAAS,EAE7B,GAAIhE,KAAKqzE,UAAUrvE,SAAW,EAAG,CAC7BhE,KAAKqzE,UAAUxmE,SAAQ,SAAUg0E,GAC7B,GAAIA,EAAI3+E,KAAOA,EAAI,CACfiuB,EAAMqzD,eAAe,YAAa3C,EAAIztE,MAAO2e,OAGrD/xB,KAAKqzE,UAAUrvE,OAAS,MAIpCV,OAAOssB,eAAeqwD,EAAen0E,UAAW,uBAAwB,CACpE4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUu7B,GACb,IAAIxe,EAAQnwB,KACZ,IAAI+xB,EAAQ/xB,KAAKugF,SAAS5xC,GAC1B,IAAIhjC,EAAS3L,KAAKwgF,cAAczuD,EAAM6c,MAAO7c,EAAMsrD,MACnD,GAAI1xE,EAAQ,CACR0jE,GAAY1jE,GAAQ,SAAUk1E,GAC1B,GAAI1wD,EAAMqzD,eAAe,WAAY3C,EAAK9uD,GAAQ,CAC9C,OAAO,UAEN,CACD,OAAO,aAM3BzuB,OAAOssB,eAAeqwD,EAAen0E,UAAW,iBAAkB,CAC9D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUu7B,GACb,IAAIxe,EAAQnwB,KACZ,IAAI+xB,EAAQ/xB,KAAKugF,SAAS5xC,GAC1B,IAAIhjC,EAAS3L,KAAKwgF,cAAczuD,EAAM6c,MAAO7c,EAAMsrD,MACnD,GAAI1xE,EAAQ,CACR0jE,GAAY1jE,GAAQ,SAAUk1E,GAC1B,GAAI1wD,EAAMqzD,eAAe,QAAS3C,EAAK9uD,GAAQ,CAC3C,OAAO,UAEN,CACD,OAAO,aAM3BzuB,OAAOssB,eAAeqwD,EAAen0E,UAAW,mBAAoB,CAChE4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUY,EAAK9T,GAClB,IAAIiwB,EAAQnwB,KACZ,GAAIA,KAAK+wB,WAAW/c,KAASkE,UAAW,CACpC,IAAI+rE,EAAa/jF,IACjBF,KAAK+wB,WAAW/c,GAAO,IAAI4c,IAAgB,kBAChCT,EAAMY,WAAW/c,GACxBiwE,EAAW5vE,aAGnB,OAAOrU,KAAK+wB,WAAW/c,GAAKi7B,eAGpC3rC,OAAOssB,eAAeqwD,EAAen0E,UAAW,kBAAmB,CAC/D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUrL,EAAM7H,GACnB,IAAI4uC,EAAS,MACb,IAAIo1C,EAAQ,KACZ,SAAS5vE,IACL4vE,EAAQ,KACRp1C,EAAS,MAEb,OAAO,IAAIxe,GAAc,CACrB,IAAIN,IAAS,WACT,GAAIk0D,IAAU,KAAM,CAChBtwE,aAAaswE,GAEjB5vE,OAEJk/B,GAAwBxzC,KAAKowE,KAAMZ,GAAwBznE,IAAO,SAAU9F,GACxE6sC,EAAS,KACT,GAAIo1C,IAAU,KAAM,CAChBtwE,aAAaswE,GAEjBA,EAAQ9jF,OAAOqN,WAAW6G,EAAO,MAErCi7D,GAAenvE,OAAQ2H,GAAM,SAAUsW,GACnC,GAAI6lE,IAAU,KAAM,CAChBtwE,aAAaswE,GACbA,EAAQ,KAEZhkF,EAAEme,EAAIywB,GACNA,EAAS,cAMzBxrC,OAAOssB,eAAeqwD,EAAen0E,UAAW,aAAc,CAC1D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUY,GACb,IAAImc,EAAQnwB,KACZ,OAAQgU,GACJ,IAAK,oBACL,IAAK,cACL,IAAK,aACD,OAAOhU,KAAKmkF,iBAAiB,eAAe,WACxC,IAAI7yD,EAAW,SAAUyB,EAAQ+b,GAC7B3e,EAAMgyD,sBAAwB,CAAEpvD,OAAQA,EAAQ+b,OAAQA,GACxD1e,GAAY2C,GAAQ,SAAUhB,GAC1B5B,EAAMkyD,yBAAyBtwD,EAAO+c,OAG9C,OAAO,IAAIxe,GAAc,CACrBH,EAAMi0D,gBAAgB,cAAe9yD,GACrCnB,EAAMi0D,gBAAgB,cAAe9yD,QAGjD,IAAK,kBACD,OAAOtxB,KAAKmkF,iBAAiB,aAAa,WACtC,IAAIE,EAAUl0D,EAAMi0D,gBAAgB,aAAa,SAAUrxD,EAAQ+b,GAC/D1e,GAAY2C,GAAQ,SAAUhB,GAC1B5B,EAAMm0D,uBAAuBvyD,EAAO+c,MAExC3e,EAAMgyD,sBAAwB,CAAEpvD,OAAQA,EAAQ+b,OAAQA,MAE5D,IAAIy1C,EAAgBp0D,EAAMi0D,gBAAgB,iBAAiB,SAAUrxD,EAAQ+b,GACzE1e,GAAY2C,GAAQ,SAAUhB,GAC1B5B,EAAMm0D,uBAAuBvyD,EAAO+c,MAExC3e,EAAMgyD,sBAAwB,CAAEpvD,OAAQA,EAAQ+b,OAAQA,MAE5D,OAAO,IAAI9e,IAAS,WAChBq0D,EAAQhwE,UACRkwE,EAAclwE,gBAG1B,IAAK,QACL,IAAK,aACL,IAAK,cACL,IAAK,cASL,IAAK,cACL,IAAK,YACD,OAAOrU,KAAKmkF,iBAAiB,eAAe,WAExC,IAAIK,EAAYjV,GAAep/C,EAAMigD,KAAM,eAAe,SAAUr9C,GAChE3C,GAAY2C,GAAQ,SAAU1U,GAC1B8R,EAAMs0D,mBAAmBpmE,SAIjC,IAAIqmE,EAAYv0D,EAAMi0D,gBAAgB,eAAe,SAAU/lE,GAE3D+R,GAAY/R,GAAI,SAAUA,GACtB8R,EAAMw0D,kBAAkBtmE,SAIhC,IAAIgmE,EAAUl0D,EAAMi0D,gBAAgB,aAAa,SAAU/lE,GACvD+R,GAAY/R,GAAI,SAAUA,GACtB8R,EAAMy0D,iBAAiBvmE,SAG/B,IAAIkmE,EAAgBp0D,EAAMi0D,gBAAgB,iBAAiB,SAAU/lE,GACjE+R,GAAY/R,GAAI,SAAUA,GACtB8R,EAAMy0D,iBAAiBvmE,SAG/B,OAAO,IAAI2R,IAAS,WAChBw0D,EAAUnwE,UACVqwE,EAAUrwE,UACVgwE,EAAQhwE,UACRkwE,EAAclwE,gBAG1B,IAAK,WACD,OAAOrU,KAAKmkF,iBAAiB,YAAY,WACrC,OAAOh0D,EAAMi0D,gBAAgB,YAAY,SAAU/lE,GAC/C+R,GAAY/R,GAAI,SAAUA,GACtB8R,EAAM00D,qBAAqBxmE,YAI3C,IAAK,QACD,OAAOre,KAAKmkF,iBAAiB,SAAS,WAClC,OAAO3wC,GAAwBpzC,OAAQovE,GAAwB,UAAU,SAAUz9C,GAC/E5B,EAAM20D,eAAe/yD,KACtB,CAAEk9B,QAAS,eAKlC3rD,OAAOssB,eAAeqwD,EAAen0E,UAAW,YAAa,CACzD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUiI,EAAQrH,EAAK8B,EAAU0b,GACpC,IAAIrB,EAAQnwB,KACZ,IAAI+yB,EAAS/yB,KAAK40B,QAAQ5gB,GAC1B,GAAI+e,IAAW7a,UAAW,CACtB6a,EAAS/yB,KAAK40B,QAAQ5gB,GAAO,CACzB2c,SAAU3wB,KAAK+kF,WAAW/wE,GAC1B2xB,UAAW,GACXm9C,YAAa,MACbC,QAAS,OAGjB,IAAIzxD,EAAW,CAAEjW,OAAQA,EAAQmW,QAASA,EAAS1b,SAAUA,EAAUktE,SAAU,OACjFjwD,EAAO4S,UAAUngC,KAAK8rB,GACtB,OAAO,IAAItB,IAAS,WAChBsB,EAAS0xD,SAAW,KACpB,GAAIjwD,EAAO+vD,YAAa,CACpB/vD,EAAOgwD,QAAU,SAEhB,CACDj9C,GAAmB/S,EAAO4S,UAAWrU,GACrC,GAAIyB,EAAO4S,UAAU3hC,SAAW,EAAG,CAC/B+uB,EAAOpC,SAAStc,iBACT8b,EAAMyE,QAAQ5gB,WAMzC1Q,OAAOssB,eAAeqwD,EAAen0E,UAAW,YAAa,CACzD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU4kB,EAAM3B,GACnB,IAAIlG,EAAQnwB,KAEZA,KAAK4zE,OAAO57C,GACZ,IAAK3B,EAAS,CACVA,EAAU,GAEd,IAAI5W,EAAQzf,KAAKgyE,WAEjB,GAAI37C,EAAQ2gB,UAAa3gB,EAAQ2gB,SAAWh3C,KAAK0hF,OAAS,CACtD,IAAI95B,EAAWvxB,EAAQ2gB,SAAWh3C,KAAK0hF,OACvC,GAAI95B,EAAWnoC,EAAO,CAClBA,EAAQmoC,EAAW5nD,KAAKgyE,YAGhC,GAAI37C,EAAQ4gB,WAAc5gB,EAAQ4gB,UAAYj3C,KAAK2hF,QAAU,CACzD,IAAI/5B,EAAWvxB,EAAQ4gB,UAAYj3C,KAAK2hF,QACxC,GAAI/5B,EAAWnoC,EAAO,CAClBA,EAAQmoC,EAAW5nD,KAAKgyE,YAGhC,GAAI37C,EAAQ2jB,UAAa3jB,EAAQ2jB,SAAWh6C,KAAK0hF,OAAS,CACtD,IAAIsD,EAAW3uD,EAAQ2jB,SAAWh6C,KAAK0hF,OACvC,GAAIsD,EAAWvlE,EAAO,CAClBA,EAAQulE,EAAWhlF,KAAKgyE,YAGhC,GAAI37C,EAAQ6jB,WAAc7jB,EAAQ6jB,UAAYl6C,KAAK2hF,QAAU,CACzD,IAAIqD,EAAW3uD,EAAQ6jB,UAAYl6C,KAAK2hF,QACxC,GAAIqD,EAAWvlE,EAAO,CAClBA,EAAQulE,EAAWhlF,KAAKgyE,YAIhC,GAAI37C,EAAQ4uD,mBAAoB,CAC5BxlE,GAASzf,KAAKgyE,WAGlB,IAAIkT,EAAW,GAEf,IAAIC,EAAc,MAClB,IAAIC,EAAcplF,KAAK0hF,OACvB,IAAI2D,EAAerlF,KAAK2hF,QACxB,IAAI9R,EAASvvE,SAASw2B,cAAc,UACpC,GAAIrX,GAASzf,KAAKgyE,WAAY,CAC1BmT,EAAc,KACdC,EAAcplF,KAAK0hF,OAASjiE,EAAQzf,KAAKgyE,WACzCqT,EAAerlF,KAAK2hF,QAAUliE,EAAQzf,KAAKgyE,WAE/CnC,EAAOtsD,MAAQ6hE,EACfvV,EAAOh4B,OAASwtC,EAEhBxV,EAAO5gE,MAAM+K,SAAW,QACxB61D,EAAO5gE,MAAM8nB,IAAM,WACnB/2B,KAAKowE,KAAKn5C,YAAY44C,GACtBqV,EAAS1/E,KAAKqqE,GAEd,IAAIr+C,EAAUq+C,EAAOC,WAAW,MAChC,IAAIvsD,EAAQ,EACZ,IAAIs0B,EAAS,EACb,IAAIytC,EAAe,MACnBl1D,GAAYpwB,KAAKsyE,QAAQ,SAAU7K,GAC/B,GAAIA,GAASA,EAAM1zB,QAAS,CACxB,GAAI0zB,EAAM0L,SAAWgS,EAAa,CAC9BG,EAAe,KACf7d,EAAM4Y,eAAiB5Y,EAAM2I,KAC7B3I,EAAM8d,kBAAoB9d,EAAMj2C,QAChCi2C,EAAM2I,KAAO9vE,SAASw2B,cAAc,UAEpC2wC,EAAM2I,KAAKnhE,MAAM+K,SAAW,QAC5BytD,EAAM2I,KAAKnhE,MAAM8nB,IAAM,WACvB5G,EAAMigD,KAAKn5C,YAAYwwC,EAAM2I,MAC7B8U,EAAS1/E,KAAKiiE,EAAM2I,MACpB3I,EAAM2I,KAAK7sD,MAAQ6hE,EACnB3d,EAAM2I,KAAKv4B,OAASwtC,EACpB5d,EAAMj2C,QAAUi2C,EAAM2I,KAAKN,WAAW,MACtCrI,EAAMuJ,MAAQ,KACdvJ,EAAMhoD,MAAQA,OAI1B,GAAI6lE,EAAc,CACdtlF,KAAKoyE,aAAe,KACpBpyE,KAAK4zE,OAAO57C,GACZh4B,KAAKoyE,aAAe,MAExBhiD,GAAYpwB,KAAKsyE,QAAQ,SAAU7K,GAC/B,GAAIA,GAASA,EAAM1zB,QAAS,CAExBviB,EAAQw+C,UAAUvI,EAAM2I,KAAM,EAAG,GAEjC,GAAI3I,EAAM4Y,eAAgB,CACtB5Y,EAAM2I,KAAO3I,EAAM4Y,eACnB5Y,EAAM4Y,eAAiBnoE,UAE3B,GAAIuvD,EAAM8d,kBAAmB,CACzB9d,EAAMj2C,QAAUi2C,EAAM8d,kBACtB9d,EAAM8d,kBAAoBrtE,UAE9B,GAAIqL,EAAQkkD,EAAM2I,KAAKoV,YAAa,CAChCjiE,EAAQkkD,EAAM2I,KAAKoV,YAEvB,GAAI3tC,EAAS4vB,EAAM2I,KAAKqV,aAAc,CAClC5tC,EAAS4vB,EAAM2I,KAAKqV,aAExBhe,EAAMhoD,MAAQvH,cAGtB23D,EAAO5gE,MAAMsU,MAAQA,EAAQ,KAC7BssD,EAAO5gE,MAAM4oC,OAASA,EAAS,KAC/BznB,GAAY80D,GAAU,SAAUrV,GAC5BA,EAAO5gE,MAAM+K,SAAW,GACxB61D,EAAO5gE,MAAM8nB,IAAM,GACnB5G,EAAMigD,KAAK76C,YAAYs6C,MAE3B,OAAOA,KAGf,OAAOoQ,EAjrCO,CAkrChBhwD,IAKF,IAAI2xD,GAA6B,WAC7B,SAASA,EAAYxR,EAAM5+C,GACvBluB,OAAOssB,eAAe5vB,KAAM,OAAQ,CAChC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAe5vB,KAAM,UAAW,CACnC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAe5vB,KAAM,UAAW,CACnC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,OAEX9P,OAAOssB,eAAe5vB,KAAM,SAAU,CAClC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAe5vB,KAAM,QAAS,CACjC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,IAEX9P,OAAOssB,eAAe5vB,KAAM,UAAW,CACnC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,OAEX9P,OAAOssB,eAAe5vB,KAAM,QAAS,CACjC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAe5vB,KAAM,SAAU,CAClC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAe5vB,KAAM,QAAS,CACjC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAe5vB,KAAM,QAAS,CACjC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,OAEX9P,OAAOssB,eAAe5vB,KAAM,iBAAkB,CAC1C0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAe5vB,KAAM,oBAAqB,CAC7C0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAe5vB,KAAM,SAAU,CAClC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,IAEX9P,OAAOssB,eAAe5vB,KAAM,UAAW,CACnC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,IAEXpT,KAAKowE,KAAOA,EACZpwE,KAAKwxB,QAAUA,EAEnBluB,OAAOssB,eAAegyD,EAAY91E,UAAW,SAAU,CACnD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUmQ,EAAOs0B,EAAQm6B,GAC5B,GAAIhyE,KAAKujB,OAAS,KAAM,CACpBA,EAAQvjB,KAAKujB,MAEjB,GAAIvjB,KAAK63C,QAAU,KAAM,CACrBA,EAAS73C,KAAK63C,OAElB,GAAI73C,KAAK4wE,OAAQ,CACbrtD,GAAUvjB,KAAK4wE,OAAO55C,KAAOh3B,KAAK4wE,OAAOptC,MACzCqU,GAAW73C,KAAK4wE,OAAO75C,IAAM/2B,KAAK4wE,OAAOntC,OACzCzjC,KAAKowE,KAAKnhE,MAAM+nB,MAAQh3B,KAAK4wE,OAAO55C,KAAO,KAC3Ch3B,KAAKowE,KAAKnhE,MAAM8nB,KAAO/2B,KAAK4wE,OAAO75C,IAAM,SAExC,CACD/2B,KAAKowE,KAAKnhE,MAAM+nB,KAAO,MACvBh3B,KAAKowE,KAAKnhE,MAAM8nB,IAAM,MAE1B/2B,KAAK0hF,OAASp2E,KAAK+D,MAAMkU,EAAQyuD,GACjChyE,KAAK2hF,QAAUr2E,KAAK+D,MAAMwoC,EAASm6B,GACnChyE,KAAKowE,KAAK7sD,MAAQvjB,KAAK0hF,OACvB1hF,KAAKowE,KAAKnhE,MAAMsU,MAAQA,EAAQ,KAChCvjB,KAAKowE,KAAKv4B,OAAS73C,KAAK2hF,QACxB3hF,KAAKowE,KAAKnhE,MAAM4oC,OAASA,EAAS,QAG1Cv0C,OAAOssB,eAAegyD,EAAY91E,UAAW,QAAS,CAClD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACHpT,KAAKwxB,QAAQkhD,OACb1yE,KAAKwxB,QAAQ6vD,UAAU,EAAG,EAAGrhF,KAAK0hF,OAAQ1hF,KAAK2hF,YAGvD,OAAOC,EA/HI,GCv/Jf,SAAS8D,GAAIC,EAAK7vE,GACd,GAAI6vE,GAAO,KAAM,CACb98B,sBAAsB/yC,OAErB,CACDrI,YAAW,WACPo7C,sBAAsB/yC,KACvB,IAAO6vE,IASlB,IAAIC,GAAsB,WACtB,SAASA,EAAK1jF,EAAI8hC,EAAUgF,GACxB,GAAIhF,SAAkB,EAAG,CAAEA,EAAW,GAItC1gC,OAAOssB,eAAe5vB,KAAM,MAAO,CAC/B0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAe5vB,KAAM,SAAU,CAClC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAe5vB,KAAM,WAAY,CACpC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,QAEX9P,OAAOssB,eAAe5vB,KAAM,kBAAmB,CAC3C0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,QAEX9P,OAAOssB,eAAe5vB,KAAM,SAAU,CAClC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,KAEX9P,OAAOssB,eAAe5vB,KAAM,gBAAiB,CACzC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,KAEX9P,OAAOssB,eAAe5vB,KAAM,eAAgB,CACxC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,KAEX9P,OAAOssB,eAAe5vB,KAAM,kBAAmB,CAC3C0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,KAEX9P,OAAOssB,eAAe5vB,KAAM,UAAW,CACnC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,OAEX9P,OAAOssB,eAAe5vB,KAAM,WAAY,CACpC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,KAOX9P,OAAOssB,eAAe5vB,KAAM,SAAU,CAClC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,IAAI0d,KAMfxtB,OAAOssB,eAAe5vB,KAAM,gBAAiB,CACzC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,OAEX9P,OAAOssB,eAAe5vB,KAAM,cAAe,CACvC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,KAEX9P,OAAOssB,eAAe5vB,KAAM,YAAa,CACrC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAe5vB,KAAM,iBAAkB,CAC1C0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAKhB9P,OAAOssB,eAAe5vB,KAAM,YAAa,CACrC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAKhB9P,OAAOssB,eAAe5vB,KAAM,mBAAoB,CAC5C0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAe5vB,KAAM,4BAA6B,CACrD0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAe5vB,KAAM,WAAY,CACpC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAMhB9P,OAAOssB,eAAe5vB,KAAM,WAAY,CACpC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAOmxD,GAASzzB,IAAI9wC,KAAM,MAO9BsD,OAAOssB,eAAe5vB,KAAM,SAAU,CAClC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAOmlD,KAQXj1D,OAAOssB,eAAe5vB,KAAM,MAAO,CAC/B0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,QAWX9P,OAAOssB,eAAe5vB,KAAM,WAAY,CACpC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAShB9P,OAAOssB,eAAe5vB,KAAM,MAAO,CAC/B0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAOhB9P,OAAOssB,eAAe5vB,KAAM,kBAAmB,CAC3C0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAOs6C,GAAgB5c,IAAI9wC,KAAM,MAOrCsD,OAAOssB,eAAe5vB,KAAM,gBAAiB,CACzC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO0+C,GAAchhB,IAAI9wC,KAAM,MAOnCsD,OAAOssB,eAAe5vB,KAAM,oBAAqB,CAC7C0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAOgjD,GAAkBtlB,IAAI9wC,KAAM,MAQvCsD,OAAOssB,eAAe5vB,KAAM,WAAY,CACpC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,IAGX9P,OAAOssB,eAAe5vB,KAAM,cAAe,CACvC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,KAEX9P,OAAOssB,eAAe5vB,KAAM,qBAAsB,CAC9C0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,QAEX9P,OAAOssB,eAAe5vB,KAAM,yBAA0B,CAClD0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAe5vB,KAAM,iBAAkB,CAC1C0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAe5vB,KAAM,WAAY,CACpC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAe5vB,KAAM,qBAAsB,CAC9C0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAe5vB,KAAM,2BAA4B,CACpD0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAe5vB,KAAM,sBAAuB,CAC/C0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAe5vB,KAAM,QAAS,CACjC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAe5vB,KAAM,cAAe,CACvC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAKhB9P,OAAOssB,eAAe5vB,KAAM,QAAS,CACjC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAOhB9P,OAAOssB,eAAe5vB,KAAM,kBAAmB,CAC3C0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAQhB9P,OAAOssB,eAAe5vB,KAAM,iBAAkB,CAC1C0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAOssC,GAAe5O,IAAI9wC,KAAM,MAQpCsD,OAAOssB,eAAe5vB,KAAM,mBAAoB,CAC5C0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO6rC,GAAiBnO,IAAI9wC,KAAM,MAQtCsD,OAAOssB,eAAe5vB,KAAM,aAAc,CACtC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO8sC,GAAWpP,IAAI9wC,KAAM,MAShCsD,OAAOssB,eAAe5vB,KAAM,aAAc,CACtC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,OAEX9P,OAAOssB,eAAe5vB,KAAM,YAAa,CACrC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,KAEX9P,OAAOssB,eAAe5vB,KAAM,cAAe,CACvC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,QAEX9P,OAAOssB,eAAe5vB,KAAM,aAAc,CACtC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,KAEX9P,OAAOssB,eAAe5vB,KAAM,wBAAyB,CACjD0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAe5vB,KAAM,YAAa,CACrC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,KAEX9P,OAAOssB,eAAe5vB,KAAM,wBAAyB,CACjD0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAe5vB,KAAM,yBAA0B,CAClD0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,KAEX,IAAK41B,EAAQ,CACT,MAAM,IAAIvkC,MAAM,2DAEpB,GAAIu/B,EAAS6hD,mBAAqB,KAAM,CACpC7hD,EAAS6hD,kBAAoB,KAEjC,IAAI7T,EACJ,GAAIhuC,EAAS6hD,kBAAmB,CAC5B7T,EAAa8T,KAEjB9lF,KAAK+6C,UAAY,IAAIklC,GAAejO,GACpC,IAAI57C,EACJ,GAAIl0B,aAAc6jF,YAAa,CAC3B3vD,EAAMl0B,MAEL,CACDk0B,EAAM91B,SAAS0lF,eAAe9jF,GAElCkuB,GAAYiV,GAAS4gD,cAAc,SAAUjuD,GACzC,GAAIA,EAAK5B,MAAQA,EAAK,CAClB,MAAM,IAAI3xB,MAAM,2DAGxBzE,KAAKwmD,gBAAkB+C,GAAgBzY,IAAI9wC,KAAM,IACjD,GAAIo2B,IAAQ,KAAM,CACd,MAAM,IAAI3xB,MAAM,wCAA0CvC,EAAK,KAEnElC,KAAKo2B,IAAMA,EACX,IAAI8vD,EAAQ5lF,SAASw2B,cAAc,OACnCovD,EAAMj3E,MAAM+K,SAAW,WACvBksE,EAAMj3E,MAAM4oC,OAAS,OACrBzhB,EAAIa,YAAYivD,GAChB,IAAIC,EAAyBniD,EAASmiD,uBACtC,GAAIA,EAAwB,CACxBnmF,KAAKomF,0BAA4BD,EAErCnmF,KAAKqmF,OAASH,EACdlmF,KAAKsmF,wBACLjhD,GAAS4gD,aAAazgF,KAAKxF,MAE/BsD,OAAOssB,eAAeg2D,EAAM,MAAO,CAC/BlwE,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUlR,EAAI8hC,GACjB,IAAIhM,EAAO,IAAI4tD,EAAK1jF,EAAI8hC,EAAU,MAClChM,EAAKuuD,QACL,OAAOvuD,KAGf10B,OAAOssB,eAAeg2D,EAAK95E,UAAW,UAAW,CAC7C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUlR,GACb,IAAIk0B,EACJ,GAAIl0B,aAAc6jF,YAAa,CAC3B3vD,EAAMl0B,MAEL,CACDk0B,EAAM91B,SAAS0lF,eAAe9jF,GAElC,GAAIk0B,EAAK,CACL,MAAOp2B,KAAKo2B,IAAIowD,WAAWxiF,OAAS,EAAG,CACnCoyB,EAAIa,YAAYj3B,KAAKo2B,IAAIowD,WAAW,IAExCxmF,KAAKo2B,IAAMA,EACXp2B,KAAKymF,oBACLzmF,KAAKuhF,aAIjBj+E,OAAOssB,eAAeg2D,EAAK95E,UAAW,cAAe,CACjD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,GAAIpT,KAAK0mF,MAAO,CACZ,IAAI59E,EAAI9I,KAAKo2B,IAAIuwD,YACjB,IAAI9lF,EAAIb,KAAKo2B,IAAIwwD,aACjB,GAAK99E,GAAK,KAASjI,GAAK,GAAK,CACzBb,KAAK0mF,MAAMxuC,WAEV,CACDl4C,KAAK0mF,MAAM1uC,YAK3B10C,OAAOssB,eAAeg2D,EAAK95E,UAAW,gBAAiB,CACnD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAKpT,KAAK0mF,MAAO,CACb,IAAIG,EAAO7mF,KAAKwrD,iBAAiBpU,SAAS5xC,KAAKu+C,GAAUjT,IAAI9wC,KAAM,CAC/Dk4B,YAAa,KACbisB,oBAAqB,MACrBnqC,SAAU,WACVktD,mBAAoB,KACpBvnB,WAAY,EACZS,aAAc,EACdiF,cAAe,EACfnG,YAAa,EACbz/B,MAAO,GACP9b,EAAGgyB,GAAQ,KACXqc,QAASpc,GACTwd,YAAa,2BACb4zB,SAAUpxC,GACV4e,gBAAiB,UACjBiQ,WAAY3F,GAAUhO,IAAI9wC,KAAM,CAC5Bq7C,KAAMh4B,GAAM,SACZi4B,YAAa,EACb2rB,SAAU,OAGlB,IAAI70B,EAAU+Y,GAAQra,IAAI9wC,KAAM,CAC5B8sD,mBAAoB,aACpBnN,WAAY,EACZS,aAAc,EACdiF,cAAe,EACfnG,YAAa,IAEjB9M,EAAQ1mB,MAAMyI,OAAO,CACjBk0C,SAAU,KAEdj2B,EAAQ9+B,IAAI,cAAc6gB,OAAO,CAC7BknB,KAAMr7C,KAAKwmD,gBAAgBlzC,IAAI,cAC/B24C,OAAQjsD,KAAKwmD,gBAAgBlzC,IAAI,QACjCy1D,cAAe,KAEnB8d,EAAKtzE,IAAI,UAAW6+B,GACpBy0C,EAAK9zD,OAAO5vB,GAAG,SAAS,WACpB/C,OAAOmK,KAAK,4BAA6B,aAE7Cs8E,EAAK3xE,OAAOtG,OAAO,QAAS,IAC5B,IAAIlL,EAAImjF,EAAKzvC,SAAS5xC,KAAKk3C,GAAS5L,IAAI9wC,KAAM,CAC1CisD,OAAQ5oC,GAAM,UACdq7B,YAAa,EACbtB,QAAS,8IAEb15C,EAAEwR,OAAOtG,OAAO,QAAS,CAAEq9C,OAAQ5oC,GAAM,WACzC,IAAIziB,EAAIimF,EAAKzvC,SAAS5xC,KAAKk3C,GAAS5L,IAAI9wC,KAAM,CAC1CisD,OAAQ5oC,GAAM,SACdq7B,YAAa,EACbtB,QAAS,6DAEbx8C,EAAEsU,OAAOtG,OAAO,QAAS,CAAEq9C,OAAQ5oC,GAAM,WAGzCrjB,KAAK0mF,MAAQG,EACb7mF,KAAK8mF,kBAIjBxjF,OAAOssB,eAAeg2D,EAAK95E,UAAW,QAAS,CAC3C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAI+c,EAAQnwB,KACZ,IAAIuwE,EAAWvwE,KAAK+6C,UACpB,IAAIm6B,EAAOl1E,KAAKo2B,IAAIwyB,wBACpB,IAAIrlC,EAAQjY,KAAK+D,MAAM6lE,EAAK3xD,OAC5B,IAAIs0B,EAASvsC,KAAK+D,MAAM6lE,EAAKr9B,QAC7B,IAAIkvC,EAAgBhjC,GAAUjT,IAAI9wC,KAAM,CAAE+zC,QAAS,KAAMxwB,MAAOA,EAAOs0B,OAAQA,IAC/E73C,KAAK+qC,eAAiBg8C,EACtB/mF,KAAK+qC,eAAeuB,eAAe9mC,KAAK4/D,GAAat0B,IAAI9wC,OACzD,IAAI00B,EAAYqyD,EAAc3vC,SAAS5xC,KAAKu+C,GAAUjT,IAAI9wC,KAAM,CAAE+zC,QAAS,KAAMxwB,MAAOqS,GAAMiiB,OAAQjiB,MACtG51B,KAAK00B,UAAYA,EACjB67C,EAASgR,OAAOh+D,EAAOs0B,GAEvB73C,KAAKqmF,OAAOpvD,YAAYs5C,EAASH,MAGjCpwE,KAAKymF,oBAELzmF,KAAKgnF,sBAAwB1mF,SAASw2B,cAAc,OACpD92B,KAAKgnF,sBAAsBl9C,UAAY,qBACvC9pC,KAAKgnF,sBAAsB/3E,MAAM+K,SAAW,WAC5Cha,KAAKgnF,sBAAsB/3E,MAAMkpB,cAAgB,OACjD,IAAKn4B,KAAKomF,0BAA2B,CACjCpmF,KAAKgnF,sBAAsB/3E,MAAMg4E,SAAW,SAEhDjnF,KAAKqmF,OAAOpvD,YAAYj3B,KAAKgnF,uBAE7B,IAAIE,EAAqB5mF,SAASw2B,cAAc,OAChDowD,EAAmBp9C,UAAY,uBAC/Bo9C,EAAmB3uD,aAAa,OAAQ,SACxC2uD,EAAmBj4E,MAAMk4E,OAAS,UAClCD,EAAmBj4E,MAAMwqC,QAAU,IACnCytC,EAAmBj4E,MAAM+K,SAAW,WACpCktE,EAAmBj4E,MAAM8nB,IAAM,IAC/B/2B,KAAKonF,oBAAsBF,EAC3BlnF,KAAKqmF,OAAOpvD,YAAYj3B,KAAKonF,qBAC7B,IAAIC,EAAwB/mF,SAASw2B,cAAc,OACnDuwD,EAAsBv9C,UAAY,sBAClCu9C,EAAsBp4E,MAAM+K,SAAW,WACvCqtE,EAAsBp4E,MAAMkpB,cAAgB,OAC5CkvD,EAAsBp4E,MAAM8nB,IAAM,MAClCswD,EAAsBp4E,MAAM+nB,KAAO,MACnCqwD,EAAsBp4E,MAAMg4E,SAAW,SACvCI,EAAsBp4E,MAAMsU,MAAQA,EAAQ,KAC5C8jE,EAAsBp4E,MAAM4oC,OAASA,EAAS,KAC9CwvC,EAAsB9uD,aAAa,OAAQ,eAC3Cs4C,GAAsBwW,EAAuB,OAC7CrnF,KAAKsnF,uBAAyBD,EAC9BrnF,KAAKqmF,OAAOpvD,YAAYj3B,KAAKsnF,wBAC7BtnF,KAAKunF,yBAA2BjnF,SAASw2B,cAAc,OACvD92B,KAAKunF,yBAAyBz9C,UAAY,wBAC1C9pC,KAAKqmF,OAAOpvD,YAAYj3B,KAAKunF,0BAG7B,GAAIxH,GAAgB,kBAAmB,CACnC//E,KAAKqwB,WAAW7qB,KAAKguC,GAAwBpzC,OAAQ,WAAW,SAAUie,GACtE,GAAIA,EAAGmpE,SAAW,GAAI,CAClBr3D,EAAMs3D,SAAW,UAGzBznF,KAAKqwB,WAAW7qB,KAAKguC,GAAwBpzC,OAAQ,SAAS,SAAUie,GACpE,GAAIA,EAAGmpE,SAAW,GAAI,CAClBr3D,EAAMs3D,SAAW,WAGzBznF,KAAKqwB,WAAW7qB,KAAKguC,GAAwB6zC,EAAuB,WAAW,SAAUhpE,GACrF,IAAIqpE,EAAgBv3D,EAAMw3D,eAC1B,GAAID,EAAe,CACf,GAAIrpE,EAAGmpE,SAAW,GAAI,CAElBI,KACAz3D,EAAMw3D,eAAiBzvE,UAE3B,IAAI2vE,EAAc,EAClB,IAAIC,EAAc,EAGlB,OAAQzpE,EAAGmpE,SACP,KAAK,GACDnpE,EAAGoC,iBACH,IAAIsnE,EAAYxX,EAASgQ,SAAS,IAAI/oD,WAAW,UACjDkwD,EAAc30D,OAAOd,SAAS,QAAS,CACnCnwB,KAAM,QACN6sC,cAAeo5C,EAAUh2D,MACzB6c,MAAOm5C,EAAUn5C,MACjBC,UAAW,KACXljC,OAAQ+7E,IAEZ,OACJ,KAAK,GACDG,GAAe,EACf,MACJ,KAAK,GACDA,EAAc,EACd,MACJ,KAAK,GACDC,GAAe,EACf,MACJ,KAAK,GACDA,EAAc,EACd,MACJ,QACI,OAER,GAAID,GAAe,GAAKC,GAAe,EAAG,CACtCzpE,EAAGoC,iBACH,IAAKinE,EAAcj4C,aAAc,CAE7Btf,EAAM63D,mBAAqB,CACvBp6E,EAAG,EACHjK,EAAG,GAEP,IAAIokF,EAAYxX,EAASgQ,SAAS,IAAI/oD,WAAW,YAAa,CAC1DirD,QAAS,EACTC,QAAS,KAEb,GAAIgF,EAAc30D,OAAOC,UAAU,eAAgB,CAC/C00D,EAAc30D,OAAOd,SAAS,cAAe,CACzCnwB,KAAM,cACN6sC,cAAeo5C,EAAUh2D,MACzB6c,MAAOm5C,EAAUn5C,MACjBC,UAAW,KACXljC,OAAQ+7E,KASpB,IAAI5xC,EAAY3lB,EAAM63D,mBACtBlyC,EAAUloC,GAAKi6E,EACf/xC,EAAUnyC,GAAKmkF,EACf,IAAIG,EAAY1X,EAASgQ,SAAS,IAAI/oD,WAAW,YAAa,CAC1DirD,QAAS3sC,EAAUloC,EACnB80E,QAAS5sC,EAAUnyC,IACnB,OACJ,GAAI+jF,EAAc30D,OAAOC,UAAU,qBAAsB,CACrD00D,EAAc30D,OAAOd,SAAS,oBAAqB,CAC/CnwB,KAAM,oBACN6sC,cAAes5C,EAAUl2D,MACzB6c,MAAOq5C,EAAUr5C,MACjBC,UAAW,KACXljC,OAAQ+7E,WAM5B1nF,KAAKqwB,WAAW7qB,KAAKguC,GAAwB6zC,EAAuB,SAAS,SAAUhpE,GACnF,GAAI8R,EAAMw3D,eAAgB,CACtB,IAAID,EAAgBv3D,EAAMw3D,eAC1B,IAAIH,EAAUnpE,EAAGmpE,QACjB,OAAQA,GACJ,KAAK,GACL,KAAK,GACL,KAAK,GACL,KAAK,GACD,GAAIE,EAAcj4C,aAAc,CAE5B,IAAIqG,EAAY3lB,EAAM63D,mBACtB,IAAIE,EAAU3X,EAASgQ,SAAS,IAAI/oD,WAAW,UAAW,CACtDirD,QAAS3sC,EAAUloC,EACnB80E,QAAS5sC,EAAUnyC,KAEvB,GAAI+jF,EAAc30D,OAAOC,UAAU,mBAAoB,CACnD00D,EAAc30D,OAAOd,SAAS,kBAAmB,CAC7CnwB,KAAM,kBACN6sC,cAAeu5C,EAAQn2D,MACvB6c,MAAOs5C,EAAQt5C,MACfC,UAAW,KACXljC,OAAQ+7E,IAIhBv3D,EAAM63D,mBAAqB9vE,UAG3B,YAEC,GAAIwvE,EAAcp0E,IAAI,kBAAmB,CAE1C,IAAI60E,EAAUT,EAAcp0E,IAAI,kBAChC,IAAID,EAAQ8c,EAAMi4D,YAAYtkF,QAAO,SAAU2S,GAAQ,OAAOA,EAAKnD,IAAI,mBAAqB60E,KAC5F,IAAI55E,EAAQ8E,EAAMtP,QAAQ2jF,GAC1B,IAAIW,EAAYh1E,EAAMrP,OAAS,EAC/BuK,GAAUi5E,GAAW,IAAMA,GAAW,GAAM,GAAK,EACjD,GAAIj5E,EAAQ,EAAG,CACXA,EAAQ85E,OAEP,GAAI95E,EAAQ85E,EAAW,CACxB95E,EAAQ,EAEZ+5E,GAAaj1E,EAAM9E,GAAOs6B,WAAW,gBAAgBzS,KAEzD,YAKpBp2B,KAAKuoF,eACLvoF,KAAKwoF,UAAU,IACfxoF,KAAKyoF,cACL,IAAKzoF,KAAK0oF,cAAe,CACrB1oF,KAAK2oF,oBAIjBrlF,OAAOssB,eAAeg2D,EAAK95E,UAAW,oBAAqB,CACvD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAI+c,EAAQnwB,KACZ,GAAIA,KAAK4oF,sBAAuB,CAC5B5oF,KAAK4oF,sBAAsBv0E,UAE/BrU,KAAK4oF,sBAAwB,IAAI3/B,GAAajpD,KAAKo2B,KAAK,WACpD,GAAIjG,EAAM04D,WAAY,CAClB14D,EAAMoxD,aAGdvhF,KAAKqwB,WAAW7qB,KAAKxF,KAAK4oF,0BAOlCtlF,OAAOssB,eAAeg2D,EAAK95E,UAAW,SAAU,CAC5C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAIgjB,EAAMp2B,KAAKo2B,IACf,IAAI8+C,EAAO9+C,EAAIwyB,wBACf,IAAI9/C,EAAIwC,KAAK+D,MAAM6lE,EAAK3xD,OACxB,IAAI1iB,EAAIyK,KAAK+D,MAAM6lE,EAAKr9B,QACxB,GAAI/uC,EAAI,GAAKjI,EAAI,EAAG,CAChB,IAAIioF,EAAuB9oF,KAAKgnF,sBAChC8B,EAAqB75E,MAAMsU,MAAQza,EAAI,KACvCggF,EAAqB75E,MAAM4oC,OAASh3C,EAAI,KACxC,IAAIwmF,EAAwBrnF,KAAKsnF,uBACjCD,EAAsBp4E,MAAMsU,MAAQza,EAAI,KACxCu+E,EAAsBp4E,MAAM4oC,OAASh3C,EAAI,KACzCb,KAAK+6C,UAAUwmC,OAAOz4E,EAAGjI,GACzB,IAAIkmF,EAAgB/mF,KAAK+qC,eACzBg8C,EAAcp/C,WAAW,QAAS7+B,GAClCi+E,EAAcp/C,WAAW,SAAU9mC,GACnCb,KAAKizE,UACLjzE,KAAK8mF,kBAIjBxjF,OAAOssB,eAAeg2D,EAAK95E,UAAW,UAAW,CAC7C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACHpT,KAAK+6C,UAAU64B,OAAO5zE,KAAK+qC,eAAe1V,UAC1C,GAAIr1B,KAAK+oF,mBAAoB,CACzB/oF,KAAKgpF,sBACLhpF,KAAK+oF,mBAAqB,UAItCzlF,OAAOssB,eAAeg2D,EAAK95E,UAAW,cAAe,CACjD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUguB,GACbhR,GAAYpwB,KAAKipF,UAAU,SAAU/oF,GACjCA,EAAEkhC,SAId99B,OAAOssB,eAAeg2D,EAAK95E,UAAW,iBAAkB,CACpD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUguB,GACbknB,GAActoD,KAAKkpF,aAAa,SAAU3oD,GACtC,OAAOA,EAAU4oD,cAAc/nD,SAI3C99B,OAAOssB,eAAeg2D,EAAK95E,UAAW,cAAe,CACjD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAI+c,EAAQnwB,KAEZ,IAAIopF,EAAa,GACjB,MAAOppF,KAAKqpF,gBAAiB,CAEzBrpF,KAAKqpF,gBAAkB,MACvBhlD,GAAarkC,KAAKspF,eAAez8E,SAAQ,SAAUmH,GAC/C,IAAIs7B,EAASnf,EAAMm5D,cAAct1E,UAC1Bmc,EAAMm5D,cAAct1E,GAC3B,IAAKs7B,EAAOtI,aAAc,CACtBoiD,EAAW95C,EAAOi6C,KAAOj6C,EACzBA,EAAOk6C,uBAInBnlD,GAAa+kD,GAAYv8E,SAAQ,SAAUmH,GACvCo1E,EAAWp1E,GAAK81C,qBAEpB,IAAI2/B,EAAU,GAEdplD,GAAarkC,KAAK+pC,QAAQl9B,SAAQ,SAAUmH,GACxC,IAAIgtB,EAAS7Q,EAAM4Z,OAAO/1B,GAC1B,GAAIgtB,EAAOgG,aAAc,QACd7W,EAAM4Z,OAAO/I,EAAOuoD,SAE1B,CACDE,EAAQjkF,KAAKw7B,GACbA,EAAOiR,qBAIfw3C,EAAQ58E,SAAQ,SAAUm0B,GACtBA,EAAO+R,kBACA5iB,EAAM4Z,OAAO/I,EAAOuoD,KAC3BvoD,EAAOsW,iBAEXt3C,KAAK0pF,SAAW,MAChB,IAAIC,EAAS,GACb,IAAI/3C,EAAS,GACbvN,GAAarkC,KAAK4pF,cAAc/8E,SAAQ,SAAUmH,GAC9C,IAAIgtB,EAAS7Q,EAAMy5D,aAAa51E,UACzBmc,EAAMy5D,aAAa51E,GAC1B,IAAKgtB,EAAOgG,aAAc,CACtB2iD,EAAO3oD,EAAOuoD,KAAOvoD,EAAOmV,QAC5BvE,EAAOpsC,KAAKw7B,OAIpB4Q,EAAO7b,MAAK,SAAUnoB,EAAGjK,GACrB,OAAOopC,GAAe48C,EAAOhmF,EAAE4lF,KAAMI,EAAO/7E,EAAE27E,SAGlD33C,EAAO/kC,SAAQ,SAAUm0B,GACrBA,EAAO8kB,mBAGX,IAAI+jC,EAAiB7pF,KAAK8pF,gBAC1BzlD,GAAawlD,GAAgBh9E,SAAQ,SAAUmH,GAC3C,IAAIy6B,EAASo7C,EAAe71E,UACrB61E,EAAe71E,GACtB,IAAKy6B,EAAOzH,aAAc,CACtByH,EAAOs7C,sBAIfN,EAAQ58E,SAAQ,SAAUm0B,GACtBA,EAAOqc,sBAInB/5C,OAAOssB,eAAeg2D,EAAK95E,UAAW,eAAgB,CAClD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUguB,GACb,GAAIphC,KAAK+yB,OAAOC,UAAU,gBAAiB,CACvChzB,KAAK+yB,OAAOd,SAAS,eAAgB,CACjCnwB,KAAM,eACN6J,OAAQ3L,KACRqyD,UAAWjxB,IAGnBphC,KAAKgqF,uBACLhqF,KAAKiqF,YAAY7oD,GACjBphC,KAAKkqF,eAAe9oD,GACpBphC,KAAKmqF,cACLnqF,KAAKizE,UACLjzE,KAAKoqF,wBACL,GAAIpqF,KAAK+yB,OAAOC,UAAU,cAAe,CACrChzB,KAAK+yB,OAAOd,SAAS,aAAc,CAC/BnwB,KAAM,aACN6J,OAAQ3L,KACRqyD,UAAWjxB,IAGnB,OAAOphC,KAAKipF,SAASjlF,SAAW,GAC5BhE,KAAKkpF,YAAYllF,SAAW,IAC3BhE,KAAK0pF,YAGlBpmF,OAAOssB,eAAeg2D,EAAK95E,UAAW,aAAc,CAChD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUguB,GACb,IAAKphC,KAAKgnC,aAAc,CACpBhnC,KAAKoqC,cAAgBhJ,EACrB,IAAI7V,EAAOvrB,KAAKqqF,aAAajpD,GAE7B,GAAI7V,EAAM,CACNvrB,KAAKsqF,QAAU,KACftqF,KAAKoqC,cAAgB,SAEpB,CACDs7C,GAAI1lF,KAAK2lF,IAAK3lF,KAAKsqF,cAKnChnF,OAAOssB,eAAeg2D,EAAK95E,UAAW,gBAAiB,CACnD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAKpT,KAAKgnC,aAAc,CACpB,OAAS,CACL,IAAI5F,EAAcmpD,YAAY5hC,MAC9B3oD,KAAKoqC,cAAgBhJ,EACrB,IAAI7V,EAAOvrB,KAAKqqF,aAAajpD,GAC7B,GAAI7V,EAAM,CACNvrB,KAAKoqC,cAAgB,KACrB,YAMpB9mC,OAAOssB,eAAeg2D,EAAK95E,UAAW,eAAgB,CAClD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAI+c,EAAQnwB,KACZ,GAAIA,KAAKsqF,UAAY,KAAM,CACvBtqF,KAAKoqC,cAAgB,KACrBpqC,KAAKsqF,QAAU,SAAUlpD,GACrBjR,EAAMq6D,WAAWppD,IAErBskD,GAAI1lF,KAAK2lF,IAAK3lF,KAAKsqF,aAI/BhnF,OAAOssB,eAAeg2D,EAAK95E,UAAW,kBAAmB,CACrD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU4tB,GACb,GAAIhhC,KAAK+pC,OAAO/I,EAAOuoD,OAASrxE,UAAW,CACvClY,KAAK0pF,SAAW,KAChB1pF,KAAK+pC,OAAO/I,EAAOuoD,KAAOvoD,EAC1BhhC,KAAKuoF,mBAIjBjlF,OAAOssB,eAAeg2D,EAAK95E,UAAW,kBAAmB,CACrD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUk8B,GACb,GAAItvC,KAAKspF,cAAch6C,EAAOi6C,OAASrxE,UAAW,CAC9ClY,KAAK0pF,SAAW,KAChB1pF,KAAKqpF,gBAAkB,KACvBrpF,KAAKspF,cAAch6C,EAAOi6C,KAAOj6C,EACjCtvC,KAAKuoF,mBAIjBjlF,OAAOssB,eAAeg2D,EAAK95E,UAAW,kBAAmB,CACrD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU4tB,GACb,GAAIhhC,KAAK4pF,aAAa5oD,EAAOuoD,OAASrxE,UAAW,CAC7ClY,KAAK0pF,SAAW,KAChB1pF,KAAK4pF,aAAa5oD,EAAOuoD,KAAOvoD,EAChChhC,KAAKuoF,mBAIjBjlF,OAAOssB,eAAeg2D,EAAK95E,UAAW,oBAAqB,CACvD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUq7B,GACb,GAAIzuC,KAAK8pF,gBAAgBr7C,EAAO86C,OAASrxE,UAAW,CAChDlY,KAAK0pF,SAAW,KAChB1pF,KAAK8pF,gBAAgBr7C,EAAO86C,KAAO96C,EACnCzuC,KAAKuoF,mBAIjBjlF,OAAOssB,eAAeg2D,EAAK95E,UAAW,gBAAiB,CACnD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUmtB,GAEb,GAAIvgC,KAAKkpF,YAAYnlF,QAAQw8B,MAAgB,EAAG,CAC5CvgC,KAAKkpF,YAAY1jF,KAAK+6B,GACtBvgC,KAAKuoF,mBAIjBjlF,OAAOssB,eAAeg2D,EAAK95E,UAAW,aAAc,CAChD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACHpT,KAAK0pF,SAAW,QAGxBpmF,OAAOssB,eAAeg2D,EAAK95E,UAAW,mBAAoB,CACtD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAI+c,EAAQnwB,KACZA,KAAK+yB,OAAOxB,KAAK,cAAc,WAC3BpB,EAAMu5D,SAAW,KACjBv5D,EAAMo4D,qBAIlBjlF,OAAOssB,eAAeg2D,EAAK95E,UAAW,YAAa,CAC/C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUlT,GACb,IAAIiwB,EAAQnwB,KACZA,KAAKipF,SAASzjF,KAAKtF,GACnBF,KAAKuoF,eACL,OAAO,IAAIv4D,IAAS,WAChB8V,GAAmB3V,EAAM84D,SAAU/oF,SAI/CoD,OAAOssB,eAAeg2D,EAAK95E,UAAW,kBAAmB,CACrD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUshB,GACb,IAAIvE,EAAQnwB,KACZ,IAAK00B,EAAW,CACZA,EAAY10B,KAAK00B,UAErBvkB,QAAQ6K,IAAIhb,KAAKujB,SACjBmR,EAAUqyB,cAAa,SAAU/xB,GAC7B,GAAIA,aAAiB+uB,GAAW,CAC5B5zB,EAAMs6D,gBAAgBz1D,GAE1BA,EAAMS,YACNT,EAAMQ,wBASlBlyB,OAAOssB,eAAeg2D,EAAK95E,UAAW,QAAS,CAC3C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WAEH,OAAO9H,KAAK+D,MAAMrP,KAAKo2B,IAAIwyB,wBAAwBrlC,UAQ3DjgB,OAAOssB,eAAeg2D,EAAK95E,UAAW,SAAU,CAC5C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WAEH,OAAO9H,KAAK+D,MAAMrP,KAAKo2B,IAAIwyB,wBAAwB/Q,WAM3Dv0C,OAAOssB,eAAeg2D,EAAK95E,UAAW,UAAW,CAC7C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAKpT,KAAK0qF,YAAa,CACnB1qF,KAAK0qF,YAAc,KACnB1qF,KAAK+qC,eAAe12B,UACpBrU,KAAK+6C,UAAU1mC,UACfrU,KAAKqlE,iBAAiBhxD,UACtBrU,KAAKslE,eAAejxD,UACpBrU,KAAKwmD,gBAAgBnyC,UACrB+b,GAAYpwB,KAAKqwB,YAAY,SAAUziB,GACnCA,EAAEyG,aAEN,GAAIrU,KAAKqmF,OAAQ,CACbsE,GAAqB3qF,KAAKqmF,QAE9B94C,GAAclI,GAAS4gD,aAAcjmF,UASjDsD,OAAOssB,eAAeg2D,EAAK95E,UAAW,aAAc,CAChD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,OAAOpT,KAAK0qF,eASpBpnF,OAAOssB,eAAeg2D,EAAK95E,UAAW,cAAe,CACjD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUrD,GACb/P,KAAKonF,oBAAoBwD,UAAYC,GAAiB96E,MAS9DzM,OAAOssB,eAAeg2D,EAAK95E,UAAW,YAAa,CAC/C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU44B,GACbhsC,KAAK+qC,eAAex3B,IAAI,SAAUy4B,GAElC,IAAIwf,EAAmBxrD,KAAKwrD,iBAC5B,GAAIA,EAAkB,CAClBA,EAAiB5hB,eAGrB,IAAI4c,EAAkBxmD,KAAKwmD,gBAC3B,GAAIA,EAAiB,CACjBA,EAAgB5c,mBAI5BtmC,OAAOssB,eAAeg2D,EAAK95E,UAAW,cAAe,CACjD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAKpT,KAAKwrD,iBAAkB,CACxB,IAAIA,EAAmBxrD,KAAK+qC,eAAeqM,SAAS5xC,KAAKu+C,GAAUjT,IAAI9wC,KAAM,CACzEga,SAAU,WACVq8B,WAAY,MACZ9yB,MAAOqS,GACPiiB,OAAQjiB,GACR6xC,MAAOznE,KAAKomF,0BAA4B,GAAK,GAC7C15B,YAAa1sD,KAAKomF,0BAA4BpmF,KAAKomF,0BAA4BluE,aAEnFlY,KAAKwrD,iBAAmBA,EACxB,IAAIpZ,EAAU+Y,GAAQra,IAAI9wC,KAAM,IAChCA,KAAK00B,UAAUnhB,IAAI,UAAW6+B,GAC9BA,EAAQ8F,KAAK,GACbl4C,KAAK8qF,SAAW14C,MAO5B9uC,OAAOssB,eAAeg2D,EAAK95E,UAAW,yBAA0B,CAC5D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUzH,GACb,GAAIA,EAAO2H,IAAI,aAAc,CACzBk+B,GAAexxC,KAAKooF,YAAaz8E,OAEhC,CACD4hC,GAAcvtC,KAAKooF,YAAaz8E,GAEpC3L,KAAK+qF,2BAGbznF,OAAOssB,eAAeg2D,EAAK95E,UAAW,2BAA4B,CAC9D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUzH,GACb4hC,GAAcvtC,KAAKooF,YAAaz8E,GAChC3L,KAAK+qF,2BAGbznF,OAAOssB,eAAeg2D,EAAK95E,UAAW,wBAAyB,CAC3D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAI+c,EAAQnwB,KACZA,KAAKooF,YAAYryD,MAAK,SAAUn1B,EAAGE,GAC/B,IAAIkqF,EAASpqF,EAAE0S,IAAI,gBAAiB,GACpC,IAAI23E,EAASnqF,EAAEwS,IAAI,gBAAiB,GACpC,GAAI03E,GAAUC,EAAQ,CAClB,OAAO,OAEN,GAAID,EAASC,EAAQ,CACtB,OAAO,MAEN,CACD,OAAQ,MAGhB,IAAIC,EAAS,GACb96D,GAAYpwB,KAAKooF,aAAa,SAAU3xE,EAAMlI,GAC1C,IAAKkI,EAAKoyB,WAAW,gBAAiB,CAClC1Y,EAAMg7D,kBAAkB58E,EAAOkI,OAE9B,CACD0Z,EAAMi7D,kBAAkB78E,EAAOkI,GAEnC,IAAI40E,EAAQ50E,EAAKnD,IAAI,kBACrB,GAAI+3E,EAAO,CACP,GAAIH,EAAOnnF,QAAQsnF,MAAY,EAAG,CAE9B50E,EAAKoyB,WAAW,gBAAgBzS,IAAImC,aAAa,WAAY,UAE5D,CACD2yD,EAAO1lF,KAAK6lF,WAMhC/nF,OAAOssB,eAAeg2D,EAAK95E,UAAW,sBAAuB,CACzD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,GAAIpT,KAAK2nF,eAAgB,CACrB3nF,KAAKsrF,sBAAsBtrF,KAAK2nF,gBAChC3nF,KAAKurF,sBAAsBvrF,KAAK2nF,oBAI5CrkF,OAAOssB,eAAeg2D,EAAK95E,UAAW,wBAAyB,CAC3D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUzH,EAAQ6/E,GAErB,IAAKA,EAAc,CACfA,EAAe7/E,EAAOk9B,WAAW,gBAAgBzS,IAErD,IAAKo1D,EAAc,CACf,OAEJ,GAAI7/E,EAAO2H,IAAI,YAAc3H,EAAO2H,IAAI,SAAW,YAAc3H,EAAOknC,WAAY,CAChF,GAAI24C,EAAaC,aAAa,aAAe,KAAM,CAC/CD,EAAajzD,aAAa,WAAY,GAAKv4B,KAAK0rF,eAGnD,CACDF,EAAaG,gBAAgB,YAEjC,IAAI/kE,EAAOjb,EAAO2H,IAAI,QACtB,GAAIsT,EAAM,CACN4kE,EAAajzD,aAAa,OAAQ3R,OAEjC,CACD4kE,EAAaG,gBAAgB,QAEjC,IAAI9jB,EAAYl8D,EAAO2H,IAAI,aAC3B,GAAIu0D,EAAW,CACX,IAAIn8C,EAAQm2B,GAAel2C,EAAQk8D,GACnC2jB,EAAajzD,aAAa,aAAc7M,OAEvC,CACD8/D,EAAaG,gBAAgB,cAEjC,IAAIniB,EAAW79D,EAAO2H,IAAI,YAC1B,GAAIk2D,EAAU,CACVgiB,EAAajzD,aAAa,YAAaixC,OAEtC,CACDgiB,EAAaG,gBAAgB,aAEjC,IAAIhkB,EAAch8D,EAAO2H,IAAI,eAC7B,GAAIq0D,GAAe,KAAM,CACrB6jB,EAAajzD,aAAa,eAAgBovC,EAAc,OAAS,aAEhE,CACD6jB,EAAaG,gBAAgB,gBAEjC,GAAIhgF,EAAO2H,IAAI,cAAe,CAC1Bk4E,EAAajzD,aAAa,cAAe,cAExC,CACDizD,EAAaG,gBAAgB,eAEjC,IAAIC,EAAkBjgF,EAAO2H,IAAI,mBACjC,GAAIs4E,EAAiB,CACjBJ,EAAajzD,aAAa,mBAAoBqzD,OAE7C,CACDJ,EAAaG,gBAAgB,oBAEjC,IAAIE,EAAelgF,EAAO2H,IAAI,gBAC9B,GAAIu4E,EAAc,CACdL,EAAajzD,aAAa,gBAAiBszD,OAE1C,CACDL,EAAaG,gBAAgB,iBAEjC,IAAItiB,EAAe19D,EAAO2H,IAAI,gBAC9B,GAAI+1D,EAAc,CACdmiB,EAAajzD,aAAa,gBAAiB8wC,OAE1C,CACDmiB,EAAaG,gBAAgB,iBAEjC,IAAIriB,EAAe39D,EAAO2H,IAAI,gBAC9B,GAAIg2D,EAAc,CACdkiB,EAAajzD,aAAa,gBAAiB+wC,OAE1C,CACDkiB,EAAaG,gBAAgB,iBAEjC,IAAIG,EAAgBngF,EAAO2H,IAAI,iBAC/B,GAAIw4E,EAAe,CACfN,EAAajzD,aAAa,iBAAkBuzD,OAE3C,CACDN,EAAaG,gBAAgB,kBAEjC,IAAII,EAAepgF,EAAO2H,IAAI,gBAC9B,GAAIy4E,EAAc,CACdP,EAAajzD,aAAa,gBAAiBwzD,OAE1C,CACDP,EAAaG,gBAAgB,qBAIzCroF,OAAOssB,eAAeg2D,EAAK95E,UAAW,oBAAqB,CACvD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU7E,EAAO5C,GACpB,IAAIwkB,EAAQnwB,KACZ,GAAI2L,EAAOk9B,WAAW,gBAAiB,CACnC,OAGJ,IAAI2iD,EAAelrF,SAASw2B,cAAc,OAC1C,GAAInrB,EAAO2H,IAAI,SAAW,UAAW,CACjCk4E,EAAaQ,SAAWhsF,KAAK0rF,SAEjCF,EAAav8E,MAAM+K,SAAW,WAC9B62D,GAAsB2a,EAAc,OACpC,IAAIj7D,EAAY,GAChB5kB,EAAOg8B,WAAW,eAAgB,CAC9BvR,IAAKo1D,EACLj7D,UAAWA,IAEfvwB,KAAKsrF,sBAAsB3/E,GAC3B4kB,EAAU/qB,KAAKguC,GAAwBg4C,EAAc,SAAS,SAAUntE,GACpE8R,EAAM87D,aAAa5tE,EAAI9P,OAE3BgiB,EAAU/qB,KAAKguC,GAAwBg4C,EAAc,QAAQ,SAAUntE,GACnE8R,EAAM+7D,YAAY7tE,EAAI9P,OAE1BvO,KAAKorF,kBAAkB78E,EAAO5C,MAGtCrI,OAAOssB,eAAeg2D,EAAK95E,UAAW,sBAAuB,CACzD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUzH,GACb4hC,GAAcvtC,KAAKooF,YAAaz8E,GAChC,IAAI6/E,EAAe7/E,EAAOk9B,WAAW,gBACrC,GAAI2iD,EAAc,CACd,IAAI92D,EAAY10B,KAAKsnF,uBACrB5yD,EAAUa,YAAYi2D,EAAap1D,KACnChG,GAAYo7D,EAAaj7D,WAAW,SAAU3iB,GAC1CA,EAAEyG,iBAKlB/Q,OAAOssB,eAAeg2D,EAAK95E,UAAW,oBAAqB,CACvD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUzH,GACb,IAAI6/E,EAAe7/E,EAAOk9B,WAAW,gBACrC2iD,EAAap1D,IAAInnB,MAAMgR,QAAU,UAGzC3c,OAAOssB,eAAeg2D,EAAK95E,UAAW,oBAAqB,CACvD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU7E,EAAO5C,GAEpB,IAAI+oB,EAAY10B,KAAKsnF,uBACrB,IAAIkE,EAAe7/E,EAAOk9B,WAAW,gBAAgBzS,IACrD,GAAIo1D,IAAiBxrF,KAAKsnF,uBAAuBlwC,SAAS7oC,GAAQ,CAE9D,OAEJ,IAAI8c,EAAOrrB,KAAKsnF,uBAAuBlwC,SAAS7oC,EAAQ,GACxD,GAAI8c,EAAM,CACNqJ,EAAUutD,aAAauJ,EAAcngE,OAEpC,CACDqJ,EAAUy3D,OAAOX,OAI7BloF,OAAOssB,eAAeg2D,EAAK95E,UAAW,wBAAyB,CAC3D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUzH,GACb,IAAIimC,EAASjmC,EAAOygF,eACpB,IAAI7oE,EAAQquB,EAAOpO,OAASoO,EAAO5a,KAAOrrB,EAAO4X,QAAUquB,EAAOpO,MAAQoO,EAAO5a,KACjF,IAAI6gB,EAASjG,EAAO7a,KAAO6a,EAAOnO,OAAS93B,EAAOksC,SAAWjG,EAAOnO,OAASmO,EAAO7a,IACpF,IAAIy0D,EAAe7/E,EAAOk9B,WAAW,gBAAgBzS,IACrDo1D,EAAav8E,MAAM8nB,IAAO6a,EAAO7a,IAAM,EAAK,KAC5Cy0D,EAAav8E,MAAM+nB,KAAQ4a,EAAO5a,KAAO,EAAK,KAC9Cw0D,EAAav8E,MAAMsU,MAASA,EAAQ,EAAK,KACzCioE,EAAav8E,MAAM4oC,OAAUA,EAAS,EAAK,QAGnDv0C,OAAOssB,eAAeg2D,EAAK95E,UAAW,eAAgB,CAClD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUiL,EAAI9P,GAEjB,IAAIqrC,EAAU55C,KAAKooF,YAAY75E,GAE/B,IAAKqrC,EAAQC,gBAAiB,CAC1B75C,KAAKqsF,WAAWhuE,EAAG1S,OAAQ3L,KAAKynF,UAAY,EAAI,GAChD,OAGJznF,KAAKurF,sBAAsB3xC,GAE3B55C,KAAK2nF,eAAiB/tC,EACtB,GAAIA,EAAQ7mB,OAAOC,UAAU,SAAU,CACnC4mB,EAAQ7mB,OAAOd,SAAS,QAAS,CAC7BnwB,KAAM,QACN6sC,cAAetwB,EACf1S,OAAQiuC,QAKxBt2C,OAAOssB,eAAeg2D,EAAK95E,UAAW,aAAc,CAChD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUiP,EAAIo2D,GACjB,IAAI6T,EAAoBpoF,MAAMuR,KAAKnV,SAASisF,iBAAiB,CACzD,UACA,aACA,yBACA,UACA,wBACA,yBACA,yBACA,2BACA,uBACA,2BACA,2BACA,mCAEFlnF,KAAK,OACP,IAAIkJ,EAAQ+9E,EAAkBvoF,QAAQse,GAAMo2D,EAC5C,GAAIlqE,EAAQ,EAAG,CACXA,EAAQ+9E,EAAkBtoF,OAAS,OAElC,GAAIuK,GAAS+9E,EAAkBtoF,OAAQ,CACxCuK,EAAQ,EAEZ+9E,EAAkB/9E,GAAO2oB,WAGjC5zB,OAAOssB,eAAeg2D,EAAK95E,UAAW,cAAe,CACjD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUiL,EAAIs7D,GACjB,IAAI//B,EAAU55C,KAAK2nF,eACnB,GAAI/tC,GAAWA,EAAQ7mB,OAAOC,UAAU,QAAS,CAC7C4mB,EAAQ7mB,OAAOd,SAAS,OAAQ,CAC5BnwB,KAAM,OACN6sC,cAAetwB,EACf1S,OAAQiuC,IAGhB55C,KAAK2nF,eAAiBzvE,aAM9B5U,OAAOssB,eAAeg2D,EAAK95E,UAAW,gBAAiB,CACnD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUzH,GACb,IAAIoE,EAAO86E,GAAiBl/E,EAAO07C,YACnC,IAAImlC,EAAiB7gF,EAAOk9B,WAAW,kBACvC,GAAIl9B,EAAO2H,IAAI,SAAW,WAAavD,GAAQ,GAAI,CAC/C,IAAKy8E,EAAgB,CACjBA,EAAiBxsF,KAAKysF,oBAAoB9gF,GAE9C,GAAI6gF,EAAe5B,WAAa76E,EAAM,CAClCy8E,EAAe5B,UAAY76E,QAG9B,GAAIy8E,EAAgB,CACrBA,EAAejtE,SACf5T,EAAOm/B,cAAc,sBAIjCxnC,OAAOssB,eAAeg2D,EAAK95E,UAAW,sBAAuB,CACzD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUzH,GACb,IAAI+oB,EAAY10B,KAAKunF,yBACrB,IAAIiF,EAAiBlsF,SAASw2B,cAAc,OAC5C01D,EAAev9E,MAAM+K,SAAW,WAChCwyE,EAAev9E,MAAM8nB,IAAM,aAC3By1D,EAAev9E,MAAMwqC,QAAU,YAC/Bo3B,GAAsB2b,EAAgB,OACtCxsF,KAAKsrF,sBAAsB3/E,EAAQ6gF,GACnC93D,EAAUy3D,OAAOK,GACjB7gF,EAAOg8B,WAAW,iBAAkB6kD,GACpC,OAAOA,KAGflpF,OAAOssB,eAAeg2D,EAAK95E,UAAW,2BAA4B,CAC9D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUzH,GACb3L,KAAK+oF,mBAAqB,KAC1B,IAAIyC,EAAe7/E,EAAOk9B,WAAW,gBACrC,GAAIl9B,EAAO2H,IAAI,aAAc,CACzB,GAAIk4E,EAAc,CACdxrF,KAAKsrF,sBAAsB3/E,GAC3B3L,KAAKurF,sBAAsB5/E,SAM9B,GAAI6/E,EAAc,CACnBxrF,KAAK64C,oBAAoBltC,OAWrCrI,OAAOssB,eAAeg2D,EAAK95E,UAAW,UAAW,CAC7C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUzH,GACb,OAAO3L,KAAK2nF,iBAAmBh8E,KASvCrI,OAAOssB,eAAeg2D,EAAK95E,UAAW,sBAAuB,CACzD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUw7B,GACb,IAAIyuC,EAAOr9E,KAAKo2B,IAAIwyB,wBACpB,MAAO,CACHh7C,EAAGghC,EAAMhhC,EAAIyvE,EAAKrmD,KAClBrzB,EAAGirC,EAAMjrC,EAAI05E,EAAKtmD,QAU9BzzB,OAAOssB,eAAeg2D,EAAK95E,UAAW,sBAAuB,CACzD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUw7B,GACb,IAAIyuC,EAAOr9E,KAAKo2B,IAAIwyB,wBACpB,MAAO,CACHh7C,EAAGghC,EAAMhhC,EAAIyvE,EAAKrmD,KAClBrzB,EAAGirC,EAAMjrC,EAAI05E,EAAKtmD,QAO9BzzB,OAAOssB,eAAeg2D,EAAK95E,UAAW,cAAe,CACjD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUud,GACb3wB,KAAKqwB,WAAW7qB,KAAKmrB,GACrB,OAAOA,KAGfrtB,OAAOssB,eAAeg2D,EAAK95E,UAAW,wBAAyB,CAC3D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAI6lB,EAAS74B,OAAOssF,iBAAiB1sF,KAAKo2B,KAC1C,IAAIu2D,EAAW,GACfvzD,GAAaH,GAAQ,SAAUjlB,EAAKa,GAChC,GAAI2qB,GAAexrB,IAAQA,EAAIyjB,MAAM,SAAU,CAC3Ck1D,GAAY93E,MAGpB,IAAIspC,EAAUwuC,GAAY3sF,KAAK4sF,UAC/B,GAAIzuC,EAAS,CACTn+C,KAAK4sF,UAAYD,EAErB,OAAOxuC,KAGf76C,OAAOssB,eAAeg2D,EAAK95E,UAAW,uBAAwB,CAC1D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,GAAIpT,KAAKsmF,wBAAyB,CAC9BtmF,KAAK6sF,uBAAuB7sF,KAAK00B,eAI7CpxB,OAAOssB,eAAeg2D,EAAK95E,UAAW,yBAA0B,CAC5D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUzH,GACb,IAAIwkB,EAAQnwB,KACZ,GAAI2L,aAAkBo4C,GAAW,CAC7Bp4C,EAAOyrC,SAASnwC,MAAK,SAAU+tB,GAC3B7E,EAAM08D,uBAAuB73D,WAGhC,GAAIrpB,aAAkBs7C,GAAM,CAC7Bt7C,EAAO6pB,sBAiBnBlyB,OAAOssB,eAAeg2D,EAAK95E,UAAW,cAAe,CACjD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAK,IAAIpS,EAAI,EAAGA,EAAIqkC,GAASynD,SAAS9oF,OAAQhD,IAAK,CAC/C,GAAIqkC,GAASynD,SAAS9rF,GAAGy2B,MAAM,eAAgB,CAC3C,OAAO,MAGf,OAAO,SAGfn0B,OAAOssB,eAAeg2D,EAAK95E,UAAW,kBAAmB,CACrD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,GAAIpT,KAAK0mF,MAAO,CACZ1mF,KAAK0mF,MAAMnzE,IAAI,cAAe,UAI1CjQ,OAAOssB,eAAeg2D,EAAK95E,UAAW,iBAAkB,CAIpDwH,IAAK,WACD,OAAOtT,KAAK+6C,UAAUgyC,gBAK1Bx5E,IAAK,SAAUH,GACXpT,KAAK+6C,UAAUgyC,eAAiB35E,GAEpCsC,WAAY,MACZC,aAAc,OAElBrS,OAAOssB,eAAeg2D,EAAK95E,UAAW,gBAAiB,CAInDwH,IAAK,WACD,OAAOtT,KAAK+6C,UAAUw4B,eAW1BhgE,IAAK,SAAUH,GACXpT,KAAK+6C,UAAUw4B,cAAgBngE,GAEnCsC,WAAY,MACZC,aAAc,OAElBrS,OAAOssB,eAAeg2D,EAAK95E,UAAW,uBAAwB,CAI1DwH,IAAK,WACD,OAAOtT,KAAK+6C,UAAU+lC,sBAY1BvtE,IAAK,SAAUH,GACXpT,KAAK+6C,UAAU+lC,qBAAuB1tE,GAE1CsC,WAAY,MACZC,aAAc,OAElBrS,OAAOssB,eAAeg2D,EAAK95E,UAAW,mBAAoB,CACtD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUzH,GACb,IAAIwkB,EAAQnwB,KAEZ,IAAI00B,EAAY10B,KAAKgnF,sBAErB,IAAIgG,EAAc1sF,SAASw2B,cAAc,OACzCnrB,EAAOg8B,WAAW,cAAeqlD,GAEjCA,EAAY/9E,MAAM+K,SAAW,WAC7BgzE,EAAY/9E,MAAMg4E,SAAW,OAC7B+F,EAAY/9E,MAAMg+E,UAAY,aAC9Bpc,GAAsBmc,EAAa,MAEnC,GAAIrhF,EAAOonB,OAAOC,UAAU,SAAU,CAClChzB,KAAKqwB,WAAW7qB,KAAKguC,GAAwBw5C,EAAa,SAAS,SAAU3uE,GACzE,IAAI0pE,EAAY53D,EAAM4qB,UAAUwlC,SAASliE,GACzC1S,EAAOonB,OAAOd,SAAS,QAAS,CAC5BnwB,KAAM,QACN6sC,cAAeo5C,EAAUh2D,MACzB6c,MAAOm5C,EAAUn5C,MACjBC,UAAW,MACXljC,OAAQA,QAIpB3L,KAAKomD,qBAAqBz6C,GAC1B+oB,EAAUy3D,OAAOa,GACjBx7C,GAAexxC,KAAKktF,uBAAwBvhF,GAC5C,OAAOqhF,KAGf1pF,OAAOssB,eAAeg2D,EAAK95E,UAAW,wBAAyB,CAC3D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAI+c,EAAQnwB,KACZowB,GAAYpwB,KAAKktF,wBAAwB,SAAUvhF,GAC/CwkB,EAAMi2B,qBAAqBz6C,SAIvCrI,OAAOssB,eAAeg2D,EAAK95E,UAAW,uBAAwB,CAC1D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUzH,GACb,IAAIqhF,EAAcrhF,EAAOk9B,WAAW,eACpC,GAAImkD,EAAa,CAEb,IAAIG,EAAiB,CAAC,aAAc,eAAgB,gBAAiB,cAAe,WAAY,YAAa,WAAY,aACzH/8D,GAAY+8D,GAAgB,SAAUC,GAClC,IAAIh6E,EAAQzH,EAAO2H,IAAI85E,GACvB,GAAIh6E,EAAO,CACP45E,EAAY/9E,MAAMm+E,GAAWh6E,EAAQ,SAEpC,CACD45E,EAAY/9E,MAAMm+E,GAAW,OAIrC,IAAIC,EAAY1hF,EAAOouC,mBACvBtsC,YAAW,WACPu/E,EAAY/9E,MAAMwqC,QAAU4zC,EAAY,KACzC,IACH,IAAIt5C,EAAUpoC,EAAOkuC,gBACrB,GAAI9F,EAAS,CACTi5C,EAAY/9E,MAAMgR,QAAU,QAGhC,IAAI2xB,EAASjmC,EAAOygF,eACpBY,EAAY/9E,MAAM8nB,IAAO6a,EAAU,IAAI,KACvCo7C,EAAY/9E,MAAM+nB,KAAQ4a,EAAW,KAAI,KAEzC,IAAIruB,EAAQ5X,EAAO2H,IAAI,SACvB,IAAIukC,EAASlsC,EAAO2H,IAAI,UACxB,IAAIxK,EAAI,EACR,IAAIjI,EAAI,EACR,GAAI0iB,EAAO,CACPza,EAAI6C,EAAO4X,QAEf,GAAIs0B,EAAQ,CACRh3C,EAAI8K,EAAOksC,SAEf,IAAKt0B,IAAUs0B,EAAQ,CACnBm1C,EAAY/9E,MAAMsU,MAAQ,GAC1BypE,EAAY/9E,MAAM4oC,OAAS,GAC3B,IAAIwlC,EAAO2P,EAAYpkC,wBACvB9/C,EAAIu0E,EAAK95D,MACT1iB,EAAIw8E,EAAKxlC,OACTlsC,EAAOgrC,qBAAuB,CAAE3f,KAAM,EAAGwM,MAAO,EAAGzM,IAAK,EAAG0M,OAAQ,GACnE93B,EAAOg8B,WAAW,WAAY7+B,GAC9B6C,EAAOg8B,WAAW,YAAa9mC,OAE9B,CACD8K,EAAOm/B,cAAc,YACrBn/B,EAAOm/B,cAAc,aAEzB,GAAIhiC,EAAI,EAAG,CACPkkF,EAAY/9E,MAAM+nC,SAAW,EAAM,KAEvC,GAAIn2C,EAAI,EAAG,CACPmsF,EAAY/9E,MAAMgoC,UAAY,EAAM,KAGxC,IAAKlD,GAAWs5C,GAAa,EAAG,CAC5BL,EAAY/9E,MAAMgR,QAAU,YAK5C3c,OAAOssB,eAAeg2D,EAAK95E,UAAW,kBAAmB,CACrD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUzH,EAAQu6C,GACrB,IAAI8mC,EAAcrhF,EAAOk9B,WAAW,eACpC,IAAKmkD,EAAa,CACdA,EAAchtF,KAAKstF,iBAAiB3hF,GAExC,GAAIqhF,EAAYpC,WAAa1kC,EAAM,CAC/B8mC,EAAYpC,UAAY1kC,MAIpC5iD,OAAOssB,eAAeg2D,EAAK95E,UAAW,qBAAsB,CACxD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUzH,GACb,IAAIqhF,EAAcrhF,EAAOk9B,WAAW,eACpC,GAAImkD,EAAa,CACbhtF,KAAKgnF,sBAAsBzxD,YAAYy3D,GAE3Cz/C,GAAcvtC,KAAKktF,uBAAwBvhF,MAGnD,OAAOi6E,EAl9DH,GCjCR,IAAI2H,GAAkC,SAAUr9D,GAC5C1F,GAAU+iE,EAAkBr9D,GAC5B,SAASq9D,IACL,OAAOr9D,IAAW,MAAQA,EAAOnkB,MAAM/L,KAAMgM,YAAchM,KAE/DsD,OAAOssB,eAAe29D,EAAiBzhF,UAAW,iBAAkB,CAChE4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH8c,EAAOpkB,UAAUmmC,eAAe9oC,KAAKnJ,MACrC,GAAIA,KAAKitC,QAAQ,mBAAqBjtC,KAAKitC,QAAQ,mBAAqBjtC,KAAKitC,QAAQ,mBAAqBjtC,KAAKitC,QAAQ,kBAAmB,CACtIjtC,KAAKm7C,OAAS,SAI1B73C,OAAOssB,eAAe29D,EAAiBzhF,UAAW,QAAS,CACvD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAImQ,EAAQvjB,KAAKujB,QACjB,IAAIs0B,EAAS73C,KAAK63C,SAClB,IAAI/uC,EAAIya,EACR,IAAI1iB,EAAIg3C,EACR,IAAI21C,EAAQ1kF,EAAIwC,KAAK8B,IAAImW,GACzB,IAAIkqE,EAAQ5sF,EAAIyK,KAAK8B,IAAIyqC,GACzB,GAAIhmB,GAAe/oB,IAAM+oB,GAAehxB,GAAI,CACxC,IAAI6sF,EAAUpiF,KAAKC,IAAIzC,EAAGjI,GAAK,EAC/B,IAAI8sF,EAAO57C,GAAuB/xC,KAAKsT,IAAI,iBAAkB,GAAIo6E,GACjE,IAAIE,EAAO77C,GAAuB/xC,KAAKsT,IAAI,iBAAkB,GAAIo6E,GACjE,IAAIG,EAAO97C,GAAuB/xC,KAAKsT,IAAI,iBAAkB,GAAIo6E,GACjE,IAAII,EAAO/7C,GAAuB/xC,KAAKsT,IAAI,iBAAkB,GAAIo6E,GACjE,IAAIK,EAAQziF,KAAKC,IAAID,KAAK8B,IAAItE,EAAI,GAAIwC,KAAK8B,IAAIvM,EAAI,IACnD8sF,EAAOptC,GAAiBotC,EAAM,EAAGI,GACjCH,EAAOrtC,GAAiBqtC,EAAM,EAAGG,GACjCF,EAAOttC,GAAiBstC,EAAM,EAAGE,GACjCD,EAAOvtC,GAAiButC,EAAM,EAAGC,GACjC,IAAI9tE,EAAUjgB,KAAKq1B,SACnBpV,EAAQ4qC,OAAO8iC,EAAOH,EAAO,GAC7BvtE,EAAQ8qC,OAAOjiD,EAAI8kF,EAAOJ,EAAO,GACjC,GAAII,EAAO,EAAG,CACV3tE,EAAQ+qC,MAAMliD,EAAG,EAAGA,EAAG8kF,EAAOH,EAAOG,GAEzC3tE,EAAQ8qC,OAAOjiD,EAAGjI,EAAIgtF,EAAOJ,GAC7B,GAAII,EAAO,EAAG,CACV5tE,EAAQ+qC,MAAMliD,EAAGjI,EAAGiI,EAAI+kF,EAAOL,EAAO3sF,EAAGgtF,GAE7C5tE,EAAQ8qC,OAAO+iC,EAAON,EAAO3sF,GAC7B,GAAIitF,EAAO,EAAG,CACV7tE,EAAQ+qC,MAAM,EAAGnqD,EAAG,EAAGA,EAAIitF,EAAOL,EAAOK,GAE7C7tE,EAAQ8qC,OAAO,EAAG4iC,EAAOF,GACzB,GAAIE,EAAO,EAAG,CACV1tE,EAAQ+qC,MAAM,EAAG,EAAG2iC,EAAOH,EAAO,EAAGG,GAEzC1tE,EAAQirC,gBAIpB5nD,OAAOssB,eAAe29D,EAAkB,YAAa,CACjD73E,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,qBAEX9P,OAAOssB,eAAe29D,EAAkB,aAAc,CAClD73E,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO0rC,GAAUjV,WAAW//B,OAAO,CAACyjF,EAAiBzjD,cAEzD,OAAOyjD,EAxES,CAyElBzuC,IC7EF,IAAIkvC,GAA0B,SAAU99D,GACpC1F,GAAUwjE,EAAU99D,GACpB,SAAS89D,IACL,IAAI79D,EAAQD,IAAW,MAAQA,EAAOnkB,MAAM/L,KAAMgM,YAAchM,KAMhEsD,OAAOssB,eAAeO,EAAO,YAAa,CACtCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB,OAAO+c,EAKX7sB,OAAOssB,eAAeo+D,EAASliF,UAAW,eAAgB,CACtD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,eAKX9P,OAAOssB,eAAeo+D,EAASliF,UAAW,eAAgB,CACtD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,eAEX9P,OAAOssB,eAAeo+D,EAASliF,UAAW,UAAW,CACjD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU8C,GACb,GAAIlW,KAAKiuF,UAAW,CAChBjuF,KAAKiuF,UAAUC,WAAWh4E,GAG9Bga,EAAOpkB,UAAUgoB,QAAQ3qB,KAAKnJ,KAAMkW,MAG5C5S,OAAOssB,eAAeo+D,EAASliF,UAAW,iBAAkB,CACxD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU7E,EAAO2H,GACpB,GAAIlW,KAAKiuF,UAAW,CAChBjuF,KAAKiuF,UAAUC,WAAWh4E,GAE9Bga,EAAOpkB,UAAUwnB,eAAenqB,KAAKnJ,KAAMuO,EAAO2H,MAG1D5S,OAAOssB,eAAeo+D,EAASliF,UAAW,cAAe,CACrD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU7E,EAAO+G,EAAUY,GAC9B,GAAIlW,KAAKiuF,UAAW,CAChBjuF,KAAKiuF,UAAUC,WAAWh4E,GAE9Bga,EAAOpkB,UAAUsnB,YAAYjqB,KAAKnJ,KAAMuO,EAAO+G,EAAUY,MAGjE,OAAO83E,EArEC,CAsEVr7D,KAMa,WACX,SAASw7D,EAAS/6E,GACd9P,OAAOssB,eAAe5vB,KAAM,YAAa,CACrC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAe5vB,KAAM,SAAU,CAClC0V,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhBpT,KAAK0wB,OAAStd,EAElB9P,OAAOssB,eAAeu+D,EAASriF,UAAW,eAAgB,CACtD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,eAEX9P,OAAOssB,eAAeu+D,EAASriF,UAAW,eAAgB,CACtD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,eAEX,OAAO+6E,GA5BI,GC1Ef,IAAIC,GAA0B,SAAUl+D,GACpC1F,GAAU4jE,EAAUl+D,GACpB,SAASk+D,EAAStrC,EAAWjS,EAAa7M,GACtC,IAAI7T,EAAQD,EAAO/mB,KAAKnJ,KAAMgkC,IAAahkC,KAI3CsD,OAAOssB,eAAeO,EAAO,YAAa,CACtCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAKhB9P,OAAOssB,eAAeO,EAAO,cAAe,CACxCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAKhB9P,OAAOssB,eAAeO,EAAO,UAAW,CACpCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAKhB9P,OAAOssB,eAAeO,EAAO,OAAQ,CACjCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAKhB9P,OAAOssB,eAAeO,EAAO,QAAS,CAClCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB+c,EAAM0gB,YAAcA,EACpB1gB,EAAM2yB,UAAYA,EAClB3yB,EAAM8T,UAAU8P,QAAU,KAC1B5jB,EAAMoZ,cACN,OAAOpZ,EAKX7sB,OAAOssB,eAAew+D,EAAStiF,UAAW,YAAa,CACnD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACHpT,KAAK8iD,UAAUurC,gBAAgBruF,SAGvCsD,OAAOssB,eAAew+D,EAAStiF,UAAW,kBAAmB,CACzD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACHpT,KAAK8iD,UAAU5pB,MAAM0I,cAAc5hC,SAG3CsD,OAAOssB,eAAew+D,EAAStiF,UAAW,iBAAkB,CACxD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,OAAOpT,KAAK8iD,UAAU5pB,MAAMkR,iBAGpC9mC,OAAOssB,eAAew+D,EAAStiF,UAAW,WAAY,CAClD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,GAAIpT,KAAK8iD,UAAW,CAChB9iD,KAAK8iD,UAAUwrC,gBAAgBtuF,MAEnCkwB,EAAOpkB,UAAUikB,SAAS5mB,KAAKnJ,SAMvCsD,OAAOssB,eAAew+D,EAAStiF,UAAW,OAAQ,CAC9C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU6tB,GACbjhC,KAAKokC,OAAO,UAAW,MACvB,GAAIpkC,KAAK8iD,UAAW,CAChB9iD,KAAK8iD,UAAUyrC,aAAavuF,KAAMihC,OAO9C39B,OAAOssB,eAAew+D,EAAStiF,UAAW,OAAQ,CAC9C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU6tB,GACbjhC,KAAKokC,OAAO,UAAW,OACvB,GAAIpkC,KAAK8iD,UAAW,CAChB9iD,KAAK8iD,UAAU0rC,aAAaxuF,KAAMihC,OAI9C39B,OAAOssB,eAAew+D,EAAStiF,UAAW,WAAY,CAClD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,OAAQpT,KAAKsT,IAAI,cAGzB,OAAO86E,EAjIC,CAkIVtnD,IAKF,IAAI2nD,GAA2B,SAAUv+D,GACrC1F,GAAUikE,EAAWv+D,GACrB,SAASu+D,IACL,IAAIt+D,EAAQD,IAAW,MAAQA,EAAOnkB,MAAM/L,KAAMgM,YAAchM,KAChEsD,OAAOssB,eAAeO,EAAO,QAAS,CAClCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,IAAI46E,KAEf1qF,OAAOssB,eAAeO,EAAO,aAAc,CACvCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,KAEX9P,OAAOssB,eAAeO,EAAO,iBAAkB,CAC3Cza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO+c,EAAMu+D,aAEjBprF,OAAOssB,eAAeO,EAAO,cAAe,CACxCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,KAEX9P,OAAOssB,eAAeO,EAAO,SAAU,CACnCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,CAAC,QAEZ9P,OAAOssB,eAAeO,EAAO,eAAgB,CACzCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAeO,EAAO,gBAAiB,CAC1Cza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAeO,EAAO,UAAW,CACpCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAeO,EAAO,WAAY,CACrCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAeO,EAAO,eAAgB,CACzCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,QAEX9P,OAAOssB,eAAeO,EAAO,eAAgB,CACzCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,QAEX9P,OAAOssB,eAAeO,EAAO,eAAgB,CACzCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,QAKX9P,OAAOssB,eAAeO,EAAO,SAAU,CACnCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,QAEX,OAAO+c,EAEX7sB,OAAOssB,eAAe6+D,EAAU3iF,UAAW,OAAQ,CAI/CwH,IAAK,WACD,OAAOtT,KAAK2uF,OAOhBp7E,IAAK,SAAUtO,GACXA,EAAK2pF,eACL5uF,KAAK2uF,MAAME,eACX7uF,KAAK2uF,MAAQ1pF,GAEjByQ,WAAY,MACZC,aAAc,OAElBrS,OAAOssB,eAAe6+D,EAAU3iF,UAAW,WAAY,CACnD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH8c,EAAOpkB,UAAUikB,SAAS5mB,KAAKnJ,MAC/BA,KAAK2uF,MAAME,kBAGnBvrF,OAAOssB,eAAe6+D,EAAU3iF,UAAW,eAAgB,CACvD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,eAGX9P,OAAOssB,eAAe6+D,EAAU3iF,UAAW,YAAa,CACpD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAI+c,EAAQnwB,KACZkwB,EAAOpkB,UAAUw9B,UAAUngC,KAAKnJ,MAChCA,KAAK2uF,MAAMC,eACX5uF,KAAK8uF,gBACL9uF,KAAKqwB,WAAW7qB,KAAKxF,KAAKiF,KAAK8tB,OAAOR,OAAM,SAAUsC,GAClD,IAAIk6D,EAAY5+D,EAAM6+D,eACtB7+D,EAAMk+D,kBACNl+D,EAAM8+D,kBACN9+D,EAAM++D,aAAe,KACrB,GAAIr6D,EAAO/yB,OAAS,QAAS,CACzBsuB,GAAY2+D,GAAW,SAAUn+C,GAC7BA,EAASv8B,aAEb06E,EAAU/qF,OAAS,EACnBmsB,EAAMg/D,oBAEL,GAAIt6D,EAAO/yB,OAAS,OAAQ,CAC7B,IAAI8uC,EAAW,IAAIw9C,GAASj+D,EAAO0E,EAAO3e,SAAUia,EAAMi/D,cAAcv6D,EAAO3e,WAC/E64E,EAAUvpF,KAAKorC,GACfzgB,EAAMk/D,gBAAgBz+C,QAErB,GAAI/b,EAAO/yB,OAAS,WAAY,CACjC,IAAIwtF,EAAaP,EAAUl6D,EAAOtmB,OAClC,IAAIghF,EAAep/D,EAAMi/D,cAAcv6D,EAAO3e,UAC9CmuB,GAAakrD,GAAc1iF,SAAQ,SAAUmH,GACzCs7E,EAAW1qD,QAAQ,CACf5wB,IAAKA,EACLwY,GAAI+iE,EAAav7E,GACjBitB,SAAU9Q,EAAM7c,IAAI,wBAAyB,GAC7CyuB,OAAQ5R,EAAM7c,IAAI,4BAG1Bg8E,EAAWz+C,YAAchc,EAAO3e,cAE/B,GAAI2e,EAAO/yB,OAAS,cAAe,CACpC,IAAI8uC,EAAW,IAAIw9C,GAASj+D,EAAO0E,EAAO3e,SAAUia,EAAMi/D,cAAcv6D,EAAO3e,WAC/E64E,EAAU/mF,OAAO6sB,EAAOtmB,MAAO,EAAGqiC,GAClCzgB,EAAMk/D,gBAAgBz+C,QAErB,GAAI/b,EAAO/yB,OAAS,cAAe,CACpC,IAAI8uC,EAAWm+C,EAAUl6D,EAAOtmB,OAChCqiC,EAASv8B,UACT06E,EAAU/mF,OAAO6sB,EAAOtmB,MAAO,QAE9B,GAAIsmB,EAAO/yB,OAAS,YAAa,CAClC,IAAI8uC,EAAWm+C,EAAUl6D,EAAO5B,UAChC87D,EAAU/mF,OAAO6sB,EAAO5B,SAAU,GAClC87D,EAAU/mF,OAAO6sB,EAAO3B,SAAU,EAAG0d,OAEpC,CACD,MAAM,IAAInsC,MAAM,6BAEpB0rB,EAAMq/D,0BAIlBlsF,OAAOssB,eAAe6+D,EAAU3iF,UAAW,gBAAiB,CACxD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAI+c,EAAQnwB,KACZ,GAAIA,KAAKyvF,YAAa,CAClBzvF,KAAK0vF,aAAe,GACpB1vF,KAAK2vF,cAAgB,GACrBv/D,GAAYpwB,KAAKyvF,aAAa,SAAUz7E,GACpC,IAAI28B,EAAQxgB,EAAM7c,IAAKU,EAAM,SAC7B,GAAI28B,EAAO,CACPxgB,EAAMu/D,aAAalqF,KAAKwO,GACxBmc,EAAMw/D,cAAc37E,GAAO,CAAE47E,SAAU57E,EAAM,QAAS67E,WAAY77E,EAAM,eAIpF,GAAIhU,KAAKkF,OAAQ,CACblF,KAAK8vF,QAAU,GACf9vF,KAAK+vF,SAAW,GAChB3/D,GAAYpwB,KAAKkF,QAAQ,SAAU8O,GAC/B,IAAI28B,EAAQxgB,EAAM7c,IAAKU,EAAM,SAC7B,GAAI28B,EAAO,CACPxgB,EAAM2/D,QAAQtqF,KAAKwO,GACnBmc,EAAM4/D,SAAS/7E,GAAOA,EAAM,gBAMhD1Q,OAAOssB,eAAe6+D,EAAU3iF,UAAW,YAAa,CAMpDwH,IAAK,WACD,OAAOtT,KAAK0uF,YAEhBh5E,WAAY,MACZC,aAAc,OAElBrS,OAAOssB,eAAe6+D,EAAU3iF,UAAW,kBAAmB,CAC1D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU69B,OAErB3tC,OAAOssB,eAAe6+D,EAAU3iF,UAAW,gBAAiB,CACxD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUnO,GACb,IAAIkrB,EAAQnwB,KAEZ,IAAImuB,EAAS,GACb,GAAInuB,KAAK0vF,aAAc,CACnBt/D,GAAYpwB,KAAK0vF,cAAc,SAAU17E,GACrC,IAAI28B,EAAQxgB,EAAM7c,IAAK6c,EAAMw/D,cAAc37E,GAAa,UACxDma,EAAOna,GAAO/O,EAAK0rC,GACnBxiB,EAAOgC,EAAMw/D,cAAc37E,GAAK67E,YAAc1hE,EAAOna,MAG7D,GAAIhU,KAAK8vF,QAAS,CACd1/D,GAAYpwB,KAAK8vF,SAAS,SAAU97E,GAChC,IAAI28B,EAAQxgB,EAAM7c,IAAK6c,EAAM4/D,SAAS/7E,IACtCma,EAAOna,GAAO/O,EAAK0rC,MAG3B,OAAOxiB,KAMf7qB,OAAOssB,eAAe6+D,EAAU3iF,UAAW,eAAgB,CACvD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUnO,GACb,IAAI2rC,EAAW,IAAIw9C,GAASpuF,KAAMkY,UAAWjT,GAC7CjF,KAAKqvF,gBAAgBz+C,GACrB,OAAOA,KAMfttC,OAAOssB,eAAe6+D,EAAU3iF,UAAW,eAAgB,CACvD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUnO,GACb,IAAI2rC,EAAW5wC,KAAKgwF,aAAa/qF,GACjCjF,KAAKgvF,eAAexpF,KAAKorC,GACzB,OAAOA,KAMfttC,OAAOssB,eAAe6+D,EAAU3iF,UAAW,kBAAmB,CAC1D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU69B,OAUrB3tC,OAAOssB,eAAe6+D,EAAU3iF,UAAW,eAAgB,CACvD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUw9B,EAAUzP,GACvB,OAAOxW,GAAU3qB,UAAW,OAAQ,GAAG,WACnC,OAAOyrB,GAAYzrB,MAAM,SAAU+Q,GAC/B6/B,EAASr9B,IAAI,UAAW,MACxB,MAAO,CAAC,YAYxBjQ,OAAOssB,eAAe6+D,EAAU3iF,UAAW,eAAgB,CACvD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUw9B,EAAUzP,GACvB,OAAOxW,GAAU3qB,UAAW,OAAQ,GAAG,WACnC,OAAOyrB,GAAYzrB,MAAM,SAAU+Q,GAC/B6/B,EAASr9B,IAAI,UAAW,OACxB,MAAO,CAAC,YAKxBjQ,OAAOssB,eAAe6+D,EAAU3iF,UAAW,cAAe,CACtD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH8c,EAAOpkB,UAAUwrC,YAAYnuC,KAAKnJ,MAClCA,KAAKiwF,aAAe,SAG5B3sF,OAAOssB,eAAe6+D,EAAU3iF,UAAW,mBAAoB,CAC3D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,eAGX9P,OAAOssB,eAAe6+D,EAAU3iF,UAAW,gBAAiB,CACxD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH8c,EAAOpkB,UAAUuxC,cAAcl0C,KAAKnJ,MACpC,GAAIA,KAAKkvF,aAAc,CACnB,IAAIptF,EAAO,gBACX,GAAI9B,KAAK+yB,OAAOC,UAAUlxB,GAAO,CAC7B9B,KAAK+yB,OAAOd,SAASnwB,EAAM,CAAEA,KAAMA,EAAM6J,OAAQ3L,OAErDA,KAAKkvF,aAAe,MAExBlvF,KAAKkwF,OAAS,QAQtB5sF,OAAOssB,eAAe6+D,EAAU3iF,UAAW,kBAAmB,CAC1D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU69B,GACbjxC,KAAKy1B,YACLz1B,KAAKiwF,aAAe,QAG5B3sF,OAAOssB,eAAe6+D,EAAU3iF,UAAW,kBAAmB,CAC1D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACHpT,KAAKmwF,aAAe,SAM5B7sF,OAAOssB,eAAe6+D,EAAU3iF,UAAW,gBAAiB,CACxD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACHpT,KAAKm0C,WAAa,KAClBn0C,KAAKy1B,eAGbnyB,OAAOssB,eAAe6+D,EAAW,YAAa,CAC1C/4E,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,cAEX9P,OAAOssB,eAAe6+D,EAAW,aAAc,CAC3C/4E,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO2wC,GAAUla,WAAW//B,OAAO,CAAC2kF,EAAU3kD,cAElD,OAAO2kD,EA1ZE,CA2ZX1qC,IC3hBK,SAASqsC,GAAM38E,GAClB,OAAO,IAAIyX,SAAQ,SAAUD,EAAS0b,GAClCl5B,WAAWwd,EAASxX,MCH5B,IAAI6tD,GAAwB,SAAUpxC,GAClC1F,GAAU82C,EAAQpxC,GAClB,SAASoxC,IACL,IAAInxC,EAAQD,IAAW,MAAQA,EAAOnkB,MAAM/L,KAAMgM,YAAchM,KAChEsD,OAAOssB,eAAeO,EAAO,wBAAyB,CAClDza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,QAEX9P,OAAOssB,eAAeO,EAAO,iCAAkC,CAC3Dza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,QAEX9P,OAAOssB,eAAeO,EAAO,iBAAkB,CAC3Cza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,QAEX9P,OAAOssB,eAAeO,EAAO,OAAQ,CACjCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAeO,EAAO,OAAQ,CACjCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAKhB9P,OAAOssB,eAAeO,EAAO,QAAS,CAClCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAOhB9P,OAAOssB,eAAeO,EAAO,UAAW,CACpCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,IAAIuf,KAOfrvB,OAAOssB,eAAeO,EAAO,mBAAoB,CAC7Cza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO2wC,GAAUjT,IAAI3gB,EAAM+I,MAAO,CAAE3V,MAAOqS,GAAMiiB,OAAQjiB,GAAM5b,SAAU,eAE7E,OAAOmW,EAEX7sB,OAAOssB,eAAe0xC,EAAOx1D,UAAW,YAAa,CACjD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAI+c,EAAQnwB,KACZA,KAAKyvF,YAAYjqF,KAAK,SACtB0qB,EAAOpkB,UAAUw9B,UAAUngC,KAAKnJ,MAChCA,KAAK2nC,WAAW,aAAc,IAC9B3nC,KAAKqwB,WAAW7qB,KAAKxF,KAAKqwF,QAAQt9D,OAAOR,OAAM,SAAUsC,GACrD,GAAIA,EAAO/yB,OAAS,QAAS,CACzBquB,EAAMmgE,eAAengE,EAAM4+D,gBAE1B,GAAIl6D,EAAO/yB,OAAS,OAAQ,CAC7BquB,EAAMmgE,eAAengE,EAAM4+D,gBAE1B,GAAIl6D,EAAO/yB,OAAS,WAAY,CACjCquB,EAAMmgE,eAAengE,EAAM4+D,gBAE1B,GAAIl6D,EAAO/yB,OAAS,cAAe,CACpCquB,EAAMmgE,eAAengE,EAAM4+D,gBAE1B,GAAIl6D,EAAO/yB,OAAS,cAAe,CACpCquB,EAAMmgE,eAAengE,EAAM4+D,gBAE1B,GAAIl6D,EAAO/yB,OAAS,YAAa,CAClCquB,EAAMmgE,eAAengE,EAAM4+D,eAE1B,CACD,MAAM,IAAItqF,MAAM,mCAKhCnB,OAAOssB,eAAe0xC,EAAOx1D,UAAW,WAAY,CAChD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACHpT,KAAKuwF,iBAAiBl8E,UACtB6b,EAAOpkB,UAAUikB,SAAS5mB,KAAKnJ,SAGvCsD,OAAOssB,eAAe0xC,EAAOx1D,UAAW,aAAc,CAClD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAIsf,EAAM1yB,KAAK+uF,UAAU/qF,OACzB,OAAOsH,KAAKC,IAAIvL,KAAK6oC,WAAW,aAAc,GAAInW,MAG1DpvB,OAAOssB,eAAe0xC,EAAOx1D,UAAW,WAAY,CAChD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAIsf,EAAM1yB,KAAK+uF,UAAU/qF,OACzB,OAAOsH,KAAKC,IAAIvL,KAAK6oC,WAAW,WAAYnW,GAAMA,MAG1DpvB,OAAOssB,eAAe0xC,EAAOx1D,UAAW,iBAAkB,CACtD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU27E,GACb3+D,GAAY2+D,GAAW,SAAUn+C,GAC7B,IAAIy/C,EAAUz/C,EAASy/C,QACvB,GAAIA,EAAS,CACTjgE,GAAYigE,GAAS,SAAUG,GAC3BA,EAAOn8E,aAEXu8B,EAASy/C,QAAUn4E,cAG3BlY,KAAKquF,qBASb/qF,OAAOssB,eAAe0xC,EAAOx1D,UAAW,kBAAmB,CACvD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUlR,GACb,OAAO2pC,GAAY7rC,KAAK+uF,WAAW,SAAUn+C,GACzC,OAAOA,EAASt9B,IAAI,OAASpR,QAIzCoB,OAAOssB,eAAe0xC,EAAOx1D,UAAW,eAAgB,CACpD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUw9B,GACb,IAAIzgB,EAAQnwB,KACZ,GAAIA,KAAKywF,kBAAkB7/C,GAAW,CAClCA,EAASy/C,QAAU,GACnBrwF,KAAKqwF,QAAQppF,MAAK,SAAUypF,GACxBvgE,EAAMwgE,YAAY//C,EAAU8/C,UAK5CptF,OAAOssB,eAAe0xC,EAAOx1D,UAAW,oBAAqB,CACzD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU69B,GACb,OAAO,QAGf3tC,OAAOssB,eAAe0xC,EAAOx1D,UAAW,cAAe,CACnD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUw9B,EAAU8/C,EAAgBniF,GACvC,IAAIiiF,EAASE,EAAe1wF,KAAKk5B,MAAOl5B,KAAM4wC,GAC9C,GAAI4/C,EAAQ,CACR,IAAI/hD,EAAS+hD,EAAOl9E,IAAI,UACxB,GAAIm7B,EAAQ,CACRA,EAAO8C,aAAaX,GACpBnC,EAAOrK,OAAO,WAAY,YAC1BpkC,KAAKuwF,iBAAiBn5C,SAAS5xC,KAAKipC,GAExC+hD,EAAO7W,OAASprE,EAChBiiF,EAAOI,OAAS5wF,KAChB4wC,EAASy/C,QAAQ7qF,KAAKgrF,GAE1B,OAAOA,KAGfltF,OAAOssB,eAAe0xC,EAAOx1D,UAAW,cAAe,CACnD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH8c,EAAOpkB,UAAUwrC,YAAYnuC,KAAKnJ,MAClCA,KAAK6wF,sBAAwB,MAC7B7wF,KAAK8wF,+BAAiC,SAG9CxtF,OAAOssB,eAAe0xC,EAAOx1D,UAAW,mBAAoB,CACxD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAI+c,EAAQnwB,KACZkwB,EAAOpkB,UAAU09E,iBAAiBrgF,KAAKnJ,MACvC,IAAI4mE,EAAa5mE,KAAK4mE,aACtB,IAAImqB,EAAW/wF,KAAK+wF,WACpB,GAAI/wF,KAAKitC,QAAQ,aAAc,CAC3BjtC,KAAKiwF,aAAe,KAExB,GAAIjwF,KAAK8zC,eAAe,mBAAoB,CACxC,IAAIk9C,EAAkBhxF,KAAK6oC,WAAW,mBACtC,GAAImoD,EAAiB,CACjBhxF,KAAKqwB,WAAW7qB,KAAKwrF,EAAgB3iD,UAAU,cAAc,WACzDle,EAAMk+D,uBAIlB,IAAI4C,EAAsBjxF,KAAKsT,IAAI,uBACnC,GAAI29E,EAAqB,CACrB,GAAIjxF,KAAKiwF,eAAiBjwF,KAAKkxF,eAAgB,CAC3C,IAAKlxF,KAAK6wF,sBAAuB,CAC7B7wF,KAAKmxF,qBAAqB,EAAGnxF,KAAK+uF,UAAU/qF,QAC5ChE,KAAK6wF,sBAAwB,MAGrC,IAAK7wF,KAAKoxF,MAAQxqB,GAAc5mE,KAAKqxF,MAAQN,KAAc/wF,KAAK8wF,+BAAgC,CAC5F,GAAIlqB,IAAe,GAAKmqB,IAAa/wF,KAAK+uF,UAAU/qF,QAAUhE,KAAK6wF,2BAG9D,CACD7wF,KAAKmxF,qBAAqBvqB,EAAYmqB,GAE1C/wF,KAAK8wF,+BAAiC,MAG9C,GAAI9wF,KAAKitC,QAAQ,WAAY,CACzB,IAAImF,EAAUpyC,KAAKsT,IAAI,WACvB,GAAI8+B,EAAS,CACTA,EAAQ8F,KAAK,GACb9F,EAAQ7+B,IAAI,gBAAiBvT,OAGrC,GAAIA,KAAKitC,QAAQ,SAAWjtC,KAAKitC,QAAQ,UAAW,CAChD,IAAIqkD,OAAuB,EAC3B,IAAIC,EAAiBvxF,KAAKsT,IAAI,kBAC9B,GAAIi+E,EAAgB,CAChBD,EAAkBC,EAAej+E,IAAI,mBACrC,GAAIg+E,EAAiB,CACjB,GAAItxF,KAAK85C,YAAa,CAClB,GAAI95C,KAAKitC,QAAQ,UAAW,CACxB,IAAIgf,EAASjsD,KAAKsT,IAAI,UACtBg+E,EAAgB/9E,IAAI,SAAU04C,GAElC,GAAIjsD,KAAKitC,QAAQ,QAAS,CACtB,IAAIoO,EAAOr7C,KAAKsT,IAAI,QACpBg+E,EAAgB/9E,IAAI,OAAQ8nC,MAK5Cr7C,KAAKwxF,mBAAmBt5E,WAE5B,GAAIlY,KAAKqwF,QAAQrsF,OAAS,EAAG,CACzB,IAAIytF,EAAezxF,KAAK4mE,aACxB,IAAI8qB,EAAa1xF,KAAK+wF,WACtB,GAAIW,EAAa1xF,KAAK+uF,UAAU/qF,OAAQ,CACpC0tF,IAEJ,IAAK,IAAI1wF,EAAIywF,EAAczwF,EAAI0wF,EAAY1wF,IAAK,CAC5C,IAAI4vC,EAAW5wC,KAAK+uF,UAAU/tF,GAC9B,IAAK4vC,EAASy/C,QAAS,CACnBrwF,KAAK2xF,aAAa/gD,SAMtCttC,OAAOssB,eAAe0xC,EAAOx1D,UAAW,uBAAwB,CAC5D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUwzD,EAAYmqB,GACzB,IAAI5gE,EAAQnwB,KACZ,IAAIkF,EAASlF,KAAK0vF,aAClB,IAAKxqF,EAAQ,CACT,MAAM,IAAIT,MAAM,2CAEpB,IAAIgO,EAAM,GACV,IAAIm/E,EAAS,GACb,IAAI1vE,EAAQ,GACZ,IAAI2vE,EAAM,GACV,IAAIC,EAAO,GACX,IAAIvnF,EAAO,GACX,IAAIwnF,EAAQ,GACZ,IAAIC,EAAU,GACd,IAAI7/C,EAAW,GACf/hB,GAAYlrB,GAAQ,SAAU8O,GAC1BvB,EAAIuB,GAAO,EACX49E,EAAO59E,GAAO,EACdkO,EAAMlO,GAAO,KAEjBoc,GAAYlrB,GAAQ,SAAU8O,GAC1B,IAAI6gB,EAAS7gB,EAAM,SACnB,IAAIi+E,EAAgBj+E,EAAM,gBAC1B,IAAIk+E,EAAiBl+E,EAAM,iBAC3B,IAAIm+E,EAAwBn+E,EAAM,wBAClC,IAAIo+E,EAAkBp+E,EAAM,kBAC5B,IAAIq+E,EAAyBr+E,EAAM,yBACnC,IAAIs+E,EAAU,SACd,GAAIt+E,GAAO,UAAYA,GAAO,cAAgBA,GAAO,aAAeA,GAAO,aAAc,CACrFs+E,EAAU,SAEd,IAAItB,EAAkB7gE,EAAM0Y,WAAW,mBACvC,IAAK,IAAI7nC,EAAI4lE,EAAY5lE,EAAI+vF,EAAU/vF,IAAK,CACxC,IAAI4vC,EAAWzgB,EAAM4+D,UAAU/tF,GAC/B,IAAIoS,EAAQw9B,EAASt9B,IAAIU,GACzB,GAAIZ,GAAS,KAAM,CACf8O,EAAMlO,KACNvB,EAAIuB,IAAQZ,EACZw+E,EAAO59E,IAAQ1I,KAAK8B,IAAIgG,GACxB4+E,EAAQh+E,GAAOvB,EAAIuB,GAAOkO,EAAMlO,GAChC,GAAI69E,EAAI79E,GAAOZ,GAASy+E,EAAI79E,IAAQ,KAAM,CACtC69E,EAAI79E,GAAOZ,EAEf,GAAI0+E,EAAK99E,GAAOZ,GAAS0+E,EAAK99E,IAAQ,KAAM,CACxC89E,EAAK99E,GAAOZ,EAEhB2+E,EAAM/9E,GAAOZ,EACb,GAAI7I,EAAKyJ,IAAQ,KAAM,CACnBzJ,EAAKyJ,GAAOZ,EACZ++B,EAASn+B,GAAOZ,EAChB,GAAI49E,EAAiB,CACjBzmF,EAAK+nF,GAAWtB,EAAgBuB,SAASD,IAGjD,GAAI1rB,IAAe,EAAG,CAClBh2B,EAASxM,OAAM,EAAWhxB,EAAQ7I,EAAK+nF,IACvC1hD,EAASxM,OAAM,GAAmBhxB,EAAQ7I,EAAK+nF,IAAY/nF,EAAK+nF,GAAW,KAE/E1hD,EAASxM,OAAM,EAAmBhxB,EAAQ++B,EAASmgD,IACnD1hD,EAASxM,OAAM,GAA2BhxB,EAAQ++B,EAASmgD,IAAYngD,EAASmgD,GAAW,KAC3F1hD,EAASxM,OAAM,EAAoBhxB,EAAQ7I,EAAK+nF,IAChD1hD,EAASxM,OAAM,GAA4BhxB,EAAQ7I,EAAK+nF,IAAY/nF,EAAK+nF,GAAW,KACpFngD,EAASn+B,GAAOZ,OAI5Bgd,GAAYlrB,GAAQ,SAAU8O,GAC1Bmc,EAAMwX,WAAY3zB,EAAM,mBAAqBg+E,EAAQh+E,IACrDmc,EAAMwX,WAAY3zB,EAAM,iBAAmBkO,EAAMlO,IACjDmc,EAAMwX,WAAY3zB,EAAM,eAAiBvB,EAAIuB,IAC7Cmc,EAAMwX,WAAY3zB,EAAM,uBAAyB49E,EAAO59E,IACxDmc,EAAMwX,WAAY3zB,EAAM,eAAiB69E,EAAI79E,IAC7Cmc,EAAMwX,WAAY3zB,EAAM,gBAAkB89E,EAAK99E,IAC/Cmc,EAAMwX,WAAY3zB,EAAM,gBAAkBzJ,EAAKyJ,IAC/Cmc,EAAMwX,WAAY3zB,EAAM,iBAAmB+9E,EAAM/9E,OAErD,GAAI4yD,IAAe,GAAKmqB,IAAa/wF,KAAK+uF,UAAU/qF,OAAQ,CACxDosB,GAAYlrB,GAAQ,SAAU8O,GAC1Bmc,EAAMwX,WAAY3zB,EAAM,UAAYg+E,EAAQh+E,IAC5Cmc,EAAMwX,WAAY3zB,EAAM,QAAUkO,EAAMlO,IACxCmc,EAAMwX,WAAY3zB,EAAM,MAAQvB,EAAIuB,IACpCmc,EAAMwX,WAAY3zB,EAAM,cAAgB49E,EAAO59E,IAC/Cmc,EAAMwX,WAAY3zB,EAAM,MAAQ69E,EAAI79E,IACpCmc,EAAMwX,WAAY3zB,EAAM,OAAS89E,EAAK99E,IACtCmc,EAAMwX,WAAY3zB,EAAM,OAASzJ,EAAKyJ,IACtCmc,EAAMwX,WAAY3zB,EAAM,QAAU+9E,EAAM/9E,WAKxD1Q,OAAOssB,eAAe0xC,EAAOx1D,UAAW,kBAAmB,CACvD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAI+c,EAAQnwB,KACZkwB,EAAOpkB,UAAUg+C,gBAAgB3gD,KAAKnJ,MACtCA,KAAKoxF,KAAOpxF,KAAK4mE,aACjB5mE,KAAKqxF,KAAOrxF,KAAK+wF,WACjB,GAAI/wF,KAAKitC,QAAQ,WAAY,CACzBjtC,KAAKuwF,iBAAiBh9E,IAAI,UAAWvT,KAAKsT,IAAI,YAGlD,IAAIo5B,EAAQ1sC,KAAKsT,IAAI,aACrB,GAAItT,KAAKiwF,cAAgBvjD,GAASA,EAAM1oC,OAAS,EAAG,CAChDosB,GAAYsc,GAAO,SAAUE,GACzB,IAAI4lD,EAAW5lD,EAAK4lD,UAAYriE,EAAM0Y,WAAY+D,EAAK6lD,UAAY,QAAW,EAC9E,IAAIz6B,EAAWprB,EAAKorB,UAAY7nC,EAAM0Y,WAAY+D,EAAK6lD,UAAY,SAAY,EAC/EriE,GAAYwc,EAAKjhC,OAAOuiC,WAAW,SAAUviC,GACzC,IAAIyH,EAAQzH,EAAOilC,SAASt9B,IAAIs5B,EAAK6lD,WACrC,IAAK5gE,GAAeze,GAAQ,CACxB,GAAIw5B,EAAK8lD,QAAS,CACd/mF,EAAO4H,IAAIq5B,EAAK54B,IAAK44B,EAAK8lD,SAE9B,OAEJ,IAAI/8D,EACJ,GAAIiX,EAAK+lD,YAAa,CAClBh9D,GAAWrqB,KAAK0P,IAAI5H,GAAS9H,KAAKsnF,OAAStnF,KAAK0P,IAAIw3E,GAAYlnF,KAAKsnF,SAAYtnF,KAAK0P,IAAIg9C,GAAY1sD,KAAKsnF,OAAStnF,KAAK0P,IAAIw3E,GAAYlnF,KAAKsnF,YAE7I,CACDj9D,GAAWviB,EAAQo/E,IAAax6B,EAAWw6B,GAE/C,GAAI3gE,GAAeze,MAAYye,GAAe8D,IAAYrqB,KAAK8B,IAAIuoB,IAAYvI,UAAW,CACtFuI,EAAU,GAGd,IAAIk9D,EACJ,GAAIhhE,GAAe+a,EAAKrhC,KAAM,CAC1BsnF,EAAgBjmD,EAAKrhC,KAAOqhC,EAAK7oB,IAAM6oB,EAAKrhC,KAAOoqB,OAElD,GAAIiX,EAAKrhC,eAAewzB,GAAO,CAChC8zD,EAAgB9zD,GAAM8B,YAAYlL,EAASiX,EAAKrhC,IAAKqhC,EAAK7oB,UAEzD,GAAI6oB,EAAKrhC,eAAemqB,GAAS,CAClCm9D,EAAgBlyD,GAAmBhL,EAASiX,EAAKrhC,IAAKqhC,EAAK7oB,KAE/D,GAAI6oB,EAAKkmD,eAAgB,CACrBlmD,EAAKkmD,eAAe3pF,KAAKgnB,EAAOxkB,EAAQ6mF,EAAUx6B,EAAU5kD,OAE3D,CACDzH,EAAO4H,IAAIq5B,EAAK54B,IAAK6+E,UAKrC,GAAI7yF,KAAKqwF,QAAQrsF,OAAS,EAAG,CACzB,IAAIke,EAAQliB,KAAK+uF,UAAU/qF,OAC3B,IAAI4iE,EAAa5mE,KAAK4mE,aACtB,IAAImqB,EAAW/wF,KAAK+wF,WACpB,GAAIA,EAAW7uE,EAAO,CAClB6uE,IAEJ,GAAInqB,EAAa,EAAG,CAChBA,IAEJ,IAAK,IAAI5lE,EAAI,EAAGA,EAAI4lE,EAAY5lE,IAAK,CACjChB,KAAK+yF,aAAa/yF,KAAK+uF,UAAU/tF,IAErC,IAAK,IAAIA,EAAI4lE,EAAY5lE,EAAI+vF,EAAU/vF,IAAK,CACxChB,KAAKgzF,iBAAiBhzF,KAAK+uF,UAAU/tF,IAEzC,IAAK,IAAIA,EAAI+vF,EAAU/vF,EAAIkhB,EAAOlhB,IAAK,CACnChB,KAAK+yF,aAAa/yF,KAAK+uF,UAAU/tF,SAKjDsC,OAAOssB,eAAe0xC,EAAOx1D,UAAW,mBAAoB,CACxD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUw9B,GACb,IAAIzgB,EAAQnwB,KACZ,GAAI4wC,EAASy/C,QAAS,CAClBjgE,GAAYwgB,EAASy/C,SAAS,SAAUG,GACpCrgE,EAAM8iE,gBAAgBzC,GACtB,IAAI/hD,EAAS+hD,EAAOl9E,IAAI,UACxB,GAAIk9E,EAAOl9E,IAAI,WAAY,CACvB,GAAIm7B,EAAQ,CACRA,EAAO5I,cAAc,QACrB4I,EAAOykD,gBAEX,GAAIzkD,aAAkBsV,GAAW,CAC7BtV,EAAOsY,cAAa,SAAU/xB,GAC1BA,EAAM6Q,cAAc,QACpB7Q,EAAMk+D,gBACN,GAAIl+D,aAAiBw0B,GAAO,CACxBx0B,EAAMjlB,KAAK+nC,qBAK3B,GAAIrJ,aAAkB+a,IAAS/a,EAAOn7B,IAAI,gBAAiB,CACvDm7B,EAAO1+B,KAAK+nC,wBAMhCx0C,OAAOssB,eAAe0xC,EAAOx1D,UAAW,eAAgB,CACpD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUw9B,GACb,GAAIA,EAASy/C,QAAS,CAClBjgE,GAAYwgB,EAASy/C,SAAS,SAAUG,GACpC,IAAI/hD,EAAS+hD,EAAOl9E,IAAI,UACxB,GAAIm7B,EAAQ,CACRA,EAAO9G,WAAW,UAAW,eAMjDrkC,OAAOssB,eAAe0xC,EAAOx1D,UAAW,kBAAmB,CACvD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU+/E,OAGrB7vF,OAAOssB,eAAe0xC,EAAOx1D,UAAW,yBAA0B,CAC9D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUggF,GACbA,EAAM7C,iBAAiBn5C,SAASyD,UAAU76C,KAAKuwF,qBAGvDjtF,OAAOssB,eAAe0xC,EAAOx1D,UAAW,0BAA2B,CAC/D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAIm9E,EAAmBvwF,KAAKuwF,iBAC5B,GAAIA,EAAiBjhD,OAAQ,CACzBihD,EAAiBjhD,OAAO8H,SAASC,YAAYk5C,OAOzDjtF,OAAOssB,eAAe0xC,EAAOx1D,UAAW,kBAAmB,CACvD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUw9B,GAEb,IAAIy/C,EAAUz/C,EAASy/C,QACvB,GAAIA,EAAS,CACTjgE,GAAYigE,GAAS,SAAUG,GAC3BA,EAAOn8E,iBAKvB/Q,OAAOssB,eAAe0xC,EAAOx1D,UAAW,sBAAuB,CAC3D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,MAAO,MAUf9P,OAAOssB,eAAe0xC,EAAOx1D,UAAW,eAAgB,CACpD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUw9B,EAAU3P,GACvB,OAAOtW,GAAU3qB,UAAW,OAAQ,GAAG,WACnC,IAAIqzF,EAAUhD,EACd,OAAO5kE,GAAYzrB,MAAM,SAAU+Q,GAC/B,OAAQA,EAAG2a,OACP,KAAK,EACD2nE,EAAW,CAACnjE,EAAOpkB,UAAUyiF,aAAaplF,KAAKnJ,KAAM4wC,EAAU3P,IAC/DovD,EAAUz/C,EAASy/C,QACnB,GAAIA,EAAS,CACTjgE,GAAYigE,GAAS,SAAUG,GAC3B6C,EAAS7tF,KAAKgrF,EAAOl9E,IAAI,UAAU0kC,KAAK/W,OAGhD,MAAO,CAAC,EAAa/V,QAAQuV,IAAI4yD,IACrC,KAAK,EACDtiF,EAAG4a,OACH,MAAO,CAAC,aAahCroB,OAAOssB,eAAe0xC,EAAOx1D,UAAW,eAAgB,CACpD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUw9B,EAAU3P,GACvB,OAAOtW,GAAU3qB,UAAW,OAAQ,GAAG,WACnC,IAAIqzF,EAAUhD,EACd,OAAO5kE,GAAYzrB,MAAM,SAAU+Q,GAC/B,OAAQA,EAAG2a,OACP,KAAK,EACD2nE,EAAW,CAACnjE,EAAOpkB,UAAU0iF,aAAarlF,KAAKnJ,KAAM4wC,EAAU3P,IAC/DovD,EAAUz/C,EAASy/C,QACnB,GAAIA,EAAS,CACTjgE,GAAYigE,GAAS,SAAUG,GAC3B6C,EAAS7tF,KAAKgrF,EAAOl9E,IAAI,UAAU4kC,KAAKjX,OAGhD,MAAO,CAAC,EAAa/V,QAAQuV,IAAI4yD,IACrC,KAAK,EACDtiF,EAAG4a,OACH,MAAO,CAAC,aAMhCroB,OAAOssB,eAAe0xC,EAAOx1D,UAAW,qBAAsB,CAC1D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU4kC,EAAM/W,GACnB,OAAOtW,GAAU3qB,UAAW,OAAQ,GAAG,WACnC,IAAIszF,EAAcC,EAClB,IAAIpjE,EAAQnwB,KACZ,OAAOyrB,GAAYzrB,MAAM,SAAU+Q,GAC/B,OAAQA,EAAG2a,OACP,KAAK,EACD,IAAK1rB,KAAKsT,IAAI,0BAA2B,MAAO,CAAC,EAAa,GAC9D,IAAKue,GAAeoP,GAAW,CAC3BA,EAAWjhC,KAAKsT,IAAI,wBAAyB,GAEjD,KAAM2tB,EAAW,GAAI,MAAO,CAAC,EAAa,GAC1CqyD,EAAetzF,KAAK4mE,aACpB2sB,EAAavzF,KAAK+wF,WAClB,MAAO,CAAC,EAAa7lE,QAAQuV,IAAIkkC,GAAW3kE,KAAK+uF,WAAW,SAAUn+C,EAAU5vC,GAAK,OAAO2pB,GAAUwF,OAAY,OAAQ,GAAG,WACrH,IAAIqjE,EAAcpmD,EAClB,OAAO3hB,GAAYzrB,MAAM,SAAU+Q,GAC/B,OAAQA,EAAG2a,OACP,KAAK,EACD8nE,EAAevyD,GAAY,EAC3B,GAAIjgC,EAAIsyF,EAAe,IAAMtyF,EAAIuyF,EAAa,GAAI,CAC9CC,EAAe,EAEnBpmD,EAAQptC,KAAKsT,IAAI,iBAAkB,GAAKkgF,GAAgBD,EAAaD,GACrE,MAAO,CAAC,EAAaG,GAAYrmD,GAASpsC,EAAIsyF,KAClD,KAAK,EACDviF,EAAG4a,OACH,IAAKqsB,EAAM,MAAO,CAAC,EAAa,GAChC,MAAO,CAAC,EAAah4C,KAAKuuF,aAAa39C,EAAU4iD,IACrD,KAAK,EACDziF,EAAG4a,OACH,MAAO,CAAC,EAAa,GACzB,KAAK,EAAG,MAAO,CAAC,EAAa3rB,KAAKwuF,aAAa59C,EAAU4iD,IACzD,KAAK,EACDziF,EAAG4a,OACH5a,EAAG2a,MAAQ,EACf,KAAK,EAAG,MAAO,CAAC,eAIpC,KAAK,EACD3a,EAAG4a,OACH,MAAO,CAAC,EAAa,GACzB,KAAK,EAAG,MAAO,CAAC,EAAaT,QAAQuV,IAAIkkC,GAAW3kE,KAAK+uF,WAAW,SAAUn+C,GACtE,GAAIoH,EAAM,CACN,OAAO7nB,EAAMo+D,aAAa39C,EAAU,OAEnC,CACD,OAAOzgB,EAAMq+D,aAAa59C,EAAU,SAGhD,KAAK,EACD7/B,EAAG4a,OACH5a,EAAG2a,MAAQ,EACf,KAAK,EAAG,MAAO,CAAC,aASpCpoB,OAAOssB,eAAe0xC,EAAOx1D,UAAW,oBAAqB,CACzD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUw9B,GACb,IAAI2gD,EAAiB3gD,EAASt9B,IAAI,kBAClC,GAAIi+E,EAAgB,CAChB,IAAImC,EAAanC,EAAej+E,IAAI,cACpC,GAAIogF,EAAY,CACZ,IAAI3jF,EAAO2jF,EAAW3jF,KACtB,IAAIiC,EAAM,GACV0hF,EAAWniD,aAAaX,GACxB5+B,EAAMhS,KAAKsT,IAAI,kBAAmBvD,EAAKuD,IAAI,OAAQ,KACnDogF,EAAWngF,IAAI,OAAQvB,GACvBjC,EAAK+nC,gBAET,IAAIpsB,EAAQ6lE,EAAej+E,IAAI,SAC/B,GAAIoY,EAAO,CACP,IAAI3b,EAAO2b,EAAM3b,KACjB,IAAIiC,EAAM,GACV0Z,EAAM6lB,aAAaX,GACnB5+B,EAAMhS,KAAKsT,IAAI,kBAAmBvD,EAAKuD,IAAI,OAAQ,KACnDoY,EAAMnY,IAAI,OAAQvB,GAClBjC,EAAK+nC,qBAQrBx0C,OAAOssB,eAAe0xC,EAAOx1D,UAAW,qBAAsB,CAC1D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU69B,OAGrB3tC,OAAOssB,eAAe0xC,EAAOx1D,UAAW,UAAW,CAC/C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH8c,EAAOpkB,UAAU4tC,QAAQvwC,KAAKnJ,MAC9B,IAAIoyC,EAAUpyC,KAAKu3C,aACnB,GAAInF,EAAS,CACTA,EAAQ8F,WAOpB50C,OAAOssB,eAAe0xC,EAAOx1D,UAAW,gBAAiB,CACrD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU69B,OAKrB3tC,OAAOssB,eAAe0xC,EAAOx1D,UAAW,kBAAmB,CACvD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU69B,OAKrB3tC,OAAOssB,eAAe0xC,EAAOx1D,UAAW,WAAY,CAChD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUY,GACb,IAAI48B,EAAW5wC,KAAK+uF,UAAU/uF,KAAK4mE,cACnC,GAAIh2B,EAAU,CACV,OAAOA,EAASt9B,IAAIU,GAExB,OAAO,KAGf1Q,OAAOssB,eAAe0xC,EAAQ,YAAa,CACvC5rD,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WAEX9P,OAAOssB,eAAe0xC,EAAQ,aAAc,CACxC5rD,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAOq7E,GAAU5kD,WAAW//B,OAAO,CAACw3D,EAAOx3B,cAE/C,OAAOw3B,EAvxBD,CAwxBRmtB,IC/xBF,IAAIkF,GAA0B,SAAUzjE,GACpC1F,GAAUmpE,EAAUzjE,GACpB,SAASyjE,IACL,OAAOzjE,IAAW,MAAQA,EAAOnkB,MAAM/L,KAAMgM,YAAchM,KAG/DsD,OAAOssB,eAAe+jE,EAAS7nF,UAAW,YAAa,CACnD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WAEH8c,EAAOpkB,UAAUmvC,qBAAqB9xC,KAAKnJ,MAC3CA,KAAK+pC,OAAO,UAAY,SAGhCzmC,OAAOssB,eAAe+jE,EAAS7nF,UAAW,iBAAkB,CACxD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,GAAIpT,KAAKitC,QAAQ,UAAW,CACxBjtC,KAAK0U,YAOjBpR,OAAOssB,eAAe+jE,EAAS7nF,UAAW,iBAAkB,CACxD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACHpT,KAAK2nC,WAAW,cAAe3nC,KAAK6oC,WAAW,cAAe,GAAK,GACnE,IAAI+qD,EAAO5zF,KAAK6oC,WAAW,eAC3B,IAAI69B,EAAS1mE,KAAKsT,IAAI,SAAU,CAACtT,KAAKsT,IAAI,YAAayrB,GAAMY,QAAQ,aACrE,IAAK3/B,KAAK6oC,WAAW,aAAc,CAC/B7oC,KAAK2nC,WAAW,YAAa++B,EAAO1iE,QAGxC,IAAI0uB,EAAM1yB,KAAK6oC,WAAW,aAE1B,IAAIzZ,EAAQ,EACZ,IAAIm3C,EAAcvmE,KAAKsT,IAAI,eAC3B,IAAIqzD,EAAQ3mE,KAAKsT,IAAI,SACrB,IAAK,IAAItS,EAAIouB,EAAOpuB,EAAI0xB,EAAK1xB,IAAK,CAC9B,GAAI2lE,EAAO,CACPD,EAAOlhE,KAAKkhE,EAAO1lE,QAElB,CACD,IAAIm9B,EAAMuoC,EAAO1lE,GAAG++B,QACpB,IAAIl/B,EAAIs9B,EAAIt9B,GAAK0lE,EAAYC,KAAO,GAAKotB,EACzC,MAAO/yF,EAAI,EACPA,GAAK,EACT,IAAIZ,EAAIk+B,EAAIl+B,GAAKsmE,EAAYroC,YAAc,GAAK01D,EAEhD,GAAI3zF,EAAI,EACJA,EAAI,EACR,GAAIA,EAAI,EACJA,EAAI,EACR,IAAI8C,EAAIo7B,EAAIp7B,GAAKwjE,EAAYE,WAAa,GAAKmtB,EAE/C,MAAO7wF,EAAI,EACPA,GAAK,EACT2jE,EAAOlhE,KAAKu5B,GAAMe,QAAQj/B,EAAGZ,EAAG8C,SAahDO,OAAOssB,eAAe+jE,EAAS7nF,UAAW,WAAY,CAClD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU7E,GACb,IAAIm4D,EAAS1mE,KAAKsT,IAAI,SAAU,IAChC,IAAI4qB,EAAal+B,KAAKsT,IAAI,cAC1B,GAAI/E,GAASm4D,EAAO1iE,OAAQ,CACxBhE,KAAK6zF,iBACL,OAAO7zF,KAAK8zF,SAASvlF,GAEzB,OAAO2vB,GAAc,KAAOa,GAAMd,SAASyoC,EAAOn4D,GAAQ2vB,GAAcwoC,EAAOn4D,MAQvFjL,OAAOssB,eAAe+jE,EAAS7nF,UAAW,OAAQ,CAC9C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAI2gF,EAAc/zF,KAAK6oC,WAAW,cAAe7oC,KAAKsT,IAAI,aAAc,IACxEtT,KAAK2nC,WAAW,cAAeosD,EAAc/zF,KAAKsT,IAAI,OAAQ,IAC9D,OAAOtT,KAAK8zF,SAASC,MAO7BzwF,OAAOssB,eAAe+jE,EAAS7nF,UAAW,QAAS,CAC/C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACHpT,KAAK2nC,WAAW,cAAe3nC,KAAKsT,IAAI,aAAc,IACtDtT,KAAK2nC,WAAW,cAAe,MAGvCrkC,OAAOssB,eAAe+jE,EAAU,YAAa,CACzCj+E,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,aAEX9P,OAAOssB,eAAe+jE,EAAU,aAAc,CAC1Cj+E,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO21B,GAAOc,WAAW//B,OAAO,CAAC6pF,EAAS7pD,cAE9C,OAAO6pD,EApIC,CAqIV5qD,ICpIF,IAAIirD,GAAuC,SAAU9jE,GACjD1F,GAAUwpE,EAAuB9jE,GACjC,SAAS8jE,IACL,OAAO9jE,IAAW,MAAQA,EAAOnkB,MAAM/L,KAAMgM,YAAchM,KAE/DsD,OAAOssB,eAAeokE,EAAsBloF,UAAW,oBAAqB,CACxE4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH8c,EAAOpkB,UAAU+4D,kBAAkB17D,KAAKnJ,MACxC,IAAImlE,EAAKnlE,KAAKk5B,MAAMstB,gBACpB,IAAIytC,EAAaj0F,KAAKk5B,MAAM+6D,WAC5B,IAAI1yF,EAAIvB,KAAK4sC,KAAK5tB,KAAKhf,MAMvBuB,EAAE,aAAa4yB,OAAO,CAClB+/D,gBAAiB,aACjBC,gBAAiB,4BACjB5wE,MAAOqS,GACPiiB,OAAQjiB,GACR8wC,OAAQitB,GAAS7iD,IAAI9wC,KAAKk5B,MAAO,CAAE92B,KAAM,IACzCgyF,UAAW,EACXC,aAAc,EACdC,iBAAkB,KAClBC,YAAa,KACb9mC,gBAAiBoZ,GAAUliC,MAE/BpjC,EAAE,iBAAiB4yB,OAAO,CACtBo1C,UAAW,WACXrC,mBAAoB,KACpBltD,SAAU,WACVq8B,WAAY,MACZ7B,gBAAiB,UACjBpB,YAAa,sBAEjB7xC,EAAE,gBAAiB,CAAC,SAAS4yB,OAAO,CAChCqgB,gBAAiB,YAErB,CACI,IAAI5H,EAAOrrC,EAAE,QAAS,CAAC,YAAa,SACpCqrC,EAAKzY,OAAO,CACR2d,QAASjc,GACTmc,QAASnc,GACT7b,SAAU,WACVqrC,cAAe,EACf1F,WAAY,EACZS,aAAc,EACdlB,YAAa,EACbnvC,KAAM,aACNm4D,aAAc,KACd1gB,kBAAmB,MACnBI,SAAU,KAEdsd,GAASt4B,EAAM,OAAQu4B,EAAI,mBAE/B,CACI,IAAIv4B,EAAOrrC,EAAE,iBACbqrC,EAAKzY,OAAO,CACRkiB,WAAY,MACZr8B,SAAU,WACV0kC,YAAa,EACbqqB,cAAe,EACfyrB,SAAU,GACVC,SAAU,MAEdvvB,GAASt4B,EAAM,SAAUu4B,EAAI,QAEjC5jE,EAAE,SAAU,CAAC,kBAAmB,UAAU4yB,OAAO,CAC7Cna,SAAU,WACVshC,YAAa,EACbytB,cAAe,EACflmC,OAAQ,GACRokC,SAAU,IAEd1lE,EAAE,SAAU,CAAC,kBAAmB,QAAS,UAAU4yB,OAAO,CACtDna,SAAU,WACVy/B,QAAS,EACT6B,YAAa,EACbuB,gBAAiB,EACjBksB,cAAe,EACflmC,OAAQ,GACRpjB,MAAO,IACPyY,YAAa,QAEjB32B,EAAE,SAAU,CAAC,kBAAmB,QAAS,UAAU2T,OAAOtG,OAAO,WAAY,CAAE6qC,QAAS,EAAGh6B,MAAO,IAAKo9B,gBAAiB,IACxHt7C,EAAE,SAAU,CAAC,kBAAmB,QAAS,UAAU2T,OAAOtG,OAAO,gBAAiB,CAAE6Q,MAAO,IAAKg6B,QAAS,EAAGoD,gBAAiB,IAC7Ht7C,EAAE,SAAU,CAAC,kBAAmB,QAAS,UAAU2T,OAAOtG,OAAO,QAAS,CAAE6Q,MAAO,KAAMo9B,gBAAiB,IAC1Gt7C,EAAE,SAAU,CAAC,kBAAmB,QAAS,UAAU2T,OAAOtG,OAAO,SAAU,CAAE6qC,QAAS,EAAGoD,gBAAiB,IAM1Gt7C,EAAE,iBAAiB4yB,OAAO,CACtB+qB,YAAa,EACb95B,OAAQ6uE,IAEZ,CACI,IAAIrnD,EAAOrrC,EAAE,QAAS,CAAC,eACvBqrC,EAAKzY,OAAO,CACRisB,aAAc,EACdlB,YAAa,EACb1K,gBAAiB,UACjB0zB,aAAc,KACdn4D,KAAM,gBAEVm1D,GAASt4B,EAAM,OAAQu4B,EAAI,iBAE/B,CACI,IAAIv4B,EAAOrrC,EAAE,QAAS,CAAC,eAAe2T,OAAOtG,OAAO,QAAS,IAC7Ds2D,GAASt4B,EAAM,OAAQu4B,EAAI,sBAE/B,CACI,IAAIv4B,EAAOrrC,EAAE,QAAS,CAAC,eAAe2T,OAAOtG,OAAO,OAAQ,CAAE61B,uBAAwB,IACtFygC,GAASt4B,EAAM,OAAQu4B,EAAI,qBAE/B,CACI,IAAIv4B,EAAOrrC,EAAE,QAAS,CAAC,aAAc,SACrCqrC,EAAKzY,OAAO,CACR+zC,aAAc,KACdn4D,KAAM,aACN4xC,WAAY,OACZnN,gBAAiB,YAErB0wB,GAASt4B,EAAM,OAAQu4B,EAAI,iBAE/B,CACI,IAAIv4B,EAAOrrC,EAAE,mBAAoB,CAAC,aAAc,QAAS,eACzDqrC,EAAKzY,OAAO,CACRmnB,YAAa,IAEjB4pB,GAASt4B,EAAM,OAAQu4B,EAAI,cAO/B5jE,EAAE,aAAa4yB,OAAO,CAClBigE,UAAW,EACXM,QAAS,EACTL,aAAc,IAElB9yF,EAAE,gBAAiB,CAAC,cAAc4yB,OAAO,CACrC+yC,mBAAoB,QAExB3lE,EAAE,gBAAiB,CAAC,cAAc2T,OAAOtG,OAAO,SAAU,CACtD6qC,QAAS,EACT1F,QAAS,OAEb,CACI,IAAInH,EAAOrrC,EAAE,QAAS,CAAC,YAAa,SACpCqrC,EAAKzY,OAAO,CACRvmB,EAAGioB,GACHlyB,EAAGkyB,GACHmc,QAASnc,GACTic,QAASjc,GACTwvB,cAAe,EACf1F,WAAY,EACZT,YAAa,EACbkB,aAAc,EACd4J,SAAU,GACVke,aAAc,KACdn4D,KAAM,aACNy3C,kBAAmB,MACnBI,SAAU,KAEdsd,GAASt4B,EAAM,OAAQu4B,EAAI,mBAE/B5jE,EAAE,QAAS,CAAC,aAAc,YAAa,SAAS4yB,OAAO,CACnD61B,SAAU,IAEd,CACI,IAAIpd,EAAOrrC,EAAE,mBAAoB,CAAC,YAAa,OAAQ,UACvDqrC,EAAKzY,OAAO,CACR40C,cAAe,EACfrqB,YAAa,EACbspB,eAAgB,EAChBC,eAAgB,EAChBH,eAAgB,EAChBC,eAAgB,IAEpB7C,GAASt4B,EAAM,SAAUu4B,EAAI,cAEjC5jE,EAAE,mBAAoB,CAAC,YAAa,OAAQ,QAAS,SAAS4yB,OAAO,CACjEmnB,YAAa,MAOjB/5C,EAAE,YAAY4yB,OAAO,CACjBmgE,iBAAkB,OAEtB/yF,EAAE,gBAAiB,CAAC,aAAa4yB,OAAO,CACpC+yC,mBAAoB,QAExB3lE,EAAE,gBAAiB,CAAC,aAAa2T,OAAOtG,OAAO,SAAU,CACrD6qC,QAAS,EACT1F,QAAS,QAEb,CACI,IAAInH,EAAOrrC,EAAE,QAAS,CAAC,WAAY,OAAQ,UAC3CqrC,EAAKzY,OAAO,CACR40C,cAAe,EACfrqB,YAAa,EACbiqB,aAAc,IAElBzD,GAASt4B,EAAM,SAAUu4B,EAAI,cAEjC5jE,EAAE,QAAS,CAAC,WAAY,OAAQ,QAAS,SAAS4yB,OAAO,CACrDmnB,YAAa,MAEjB,CACI,IAAI1O,EAAOrrC,EAAE,cAAe,CAAC,WAAY,SACzCqrC,EAAKzY,OAAO,CACRvmB,EAAG,EACHjK,EAAG,EACH2kE,SAAU,SACVjjB,cAAe,EACf1F,WAAY,EACZT,YAAa,EACbkB,aAAc,EACdtO,QAASjc,GACTqyC,aAAc,KACdn4D,KAAM,aACNy3C,kBAAmB,MACnBI,SAAU,GACV4gB,WAAY3yC,GACZm0B,SAAU,IAEdkb,GAASt4B,EAAM,OAAQu4B,EAAI,mBAO/B5jE,EAAE,iBAAiB4yB,OAAO,CACtBwgE,UAAWh/D,GAAQ,GACnBi/D,UAAWj/D,GAAQ,GACnBk/D,cAAe,IACfC,eAAgB,GAChBC,kBAAmB,GACnBC,cAAe,GACfC,iBAAkB,GAClBC,YAAa,GACbZ,iBAAkB,MAClBI,QAAStnE,SACTgnE,UAAW,EACXC,aAAc,EACdc,SAAU,IAOd5zF,EAAE,QAAQ4yB,OAAO,CACbs0C,YAAa,WACbvpB,YAAa,GACbkB,aAAc,GACdT,WAAY,GACZ0F,cAAe,GACfivC,iBAAkB,MAClBI,QAAStnE,SACTgnE,UAAW,EACXC,aAAc,EACdc,SAAU,IAOd5zF,EAAE,QAAQ4yB,OAAO,CACb+qB,YAAa,GACbS,WAAY,GACZ0F,cAAe,GACfjF,aAAc,GACdg1C,YAAa,IAEjB,CACI,IAAIxoD,EAAOrrC,EAAE,QAAS,CAAC,OAAQ,SAC/BqrC,EAAKzY,OAAO,CACR6d,QAASnc,GACTic,QAASjc,GACTwvB,cAAe,EACf1F,WAAY,EACZT,YAAa,EACbkB,aAAc,EACd8nB,aAAc,KACdn4D,KAAM,aACNy3C,kBAAmB,MACnBI,SAAU,KAEdsd,GAASt4B,EAAM,OAAQu4B,EAAI,mBAE/B,CACI,IAAIv4B,EAAOrrC,EAAE,SAAU,CAAC,OAAQ,OAAQ,UACxCqrC,EAAKzY,OAAO,CACR40C,cAAe,GACfztB,YAAa,GACboD,YAAa,IAEjBwmB,GAASt4B,EAAM,SAAUu4B,EAAI,cAEjC5jE,EAAE,uBAAuB4yB,OAAO,CAC5BpY,UAAW,OAEfxa,EAAE,uBAAuB2T,OAAOtG,OAAO,SAAU,CAAE6Q,MAAO,EAAGg6B,QAAS,EAAG1F,QAAS,QAMlFxyC,EAAE,WAAW4yB,OAAO,CAChBugE,QAAS,EACTW,gBAAiB,aAErB,CACI,IAAIzoD,EAAOrrC,EAAE,QAAS,CAAC,UAAW,SAClCqrC,EAAKzY,OAAO,CACRvmB,EAAGioB,GACHlyB,EAAGkyB,GACHmc,QAASnc,GACTic,QAASjc,GACTwvB,cAAe,EACf1F,WAAY,EACZT,YAAa,EACbkB,aAAc,EACd8nB,aAAc,KACdn4D,KAAM,aACNy3C,kBAAmB,MACnBI,SAAU,KAEdsd,GAASt4B,EAAM,OAAQu4B,EAAI,mBAE/B5jE,EAAE,gBAAiB,CAAC,UAAW,SAAS4yB,OAAO,CAC3C8yC,SAAUtxC,GAAQ,IAClB0gB,WAAY,MACZr8B,SAAU,aAEd,CACI,IAAI4yB,EAAOrrC,EAAE,mBAAoB,CAAC,UAAW,OAAQ,UACrDqrC,EAAKzY,OAAO,CACR40C,cAAe,EACfrqB,YAAa,EACbspB,eAAgB,EAChBC,eAAgB,EAChBH,eAAgB,EAChBC,eAAgB,EAChBzsB,YAAa,IAEjB4pB,GAASt4B,EAAM,SAAUu4B,EAAI,kBAIzC,OAAO6uB,EA3Wc,CA4WvBpvB,ICvWF,IAAI0wB,GAA+B,SAAUplE,GACzC1F,GAAU8qE,EAAeplE,GACzB,SAASolE,IACL,IAAInlE,EAAQD,IAAW,MAAQA,EAAOnkB,MAAM/L,KAAMgM,YAAchM,KAQhEsD,OAAOssB,eAAeO,EAAO,SAAU,CACnCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,IAAImhB,GAAa0Z,GAAS6C,IAAI,KAAK,WAAc,OAAO0Y,GAAM+rC,KAAKplE,EAAM+I,MAAO,CACnF+S,UAAWmf,GAAiBj7B,EAAMqlE,OAAOlxE,SAAShR,IAAI,YAAa,IAAK,CAAC,UACzEmxC,WAAY8oC,GAAiBz8C,IAAI3gB,EAAM+I,MAAO,CAC1C+S,UAAW,CAAC,iBAEjB,CAAC9b,EAAMqlE,OAAOlxE,gBAErBhhB,OAAOssB,eAAeO,EAAO,YAAa,CACtCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB,OAAO+c,EAKX7sB,OAAOssB,eAAe0lE,EAAcxpF,UAAW,YAAa,CACxD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUw9B,GACb,IAAIzgB,EAAQnwB,KACZ,IAAI0rB,EAAQ1rB,KAAKw1F,OAAOhhE,OACxB9I,EAAM6lB,aAAaX,GACnBllB,EAAMxW,OAAOtG,OAAO,QAAS,IAC7B8c,EAAMxW,OAAOtG,OAAO,OAAQ,IAC5B8c,EAAMqH,OAAO5vB,GAAG,SAAS,WACrB,IAAIytF,EAASzgE,EAAM7c,IAAI,UACvB,GAAIs9E,EAAQ,CACRA,EAAO6E,eAAe7kD,OAG9B5wC,KAAKw1F,OAAOhwF,KAAKkmB,GACjB,OAAOA,KAGfpoB,OAAOssB,eAAe0lE,EAAcxpF,UAAW,YAAa,CACxD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACHpT,KAAKssC,eAAe9mC,KAAKwuF,GAAsBljD,IAAI9wC,KAAKk5B,QACxDl5B,KAAKikC,UAAUgI,UAAYmf,GAAiBprD,KAAKikC,UAAUgI,UAAW,CAAC,eACvE/b,EAAOpkB,UAAUw9B,UAAUngC,KAAKnJ,SAGxCsD,OAAOssB,eAAe0lE,EAAcxpF,UAAW,WAAY,CACvD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAI+c,EAAQnwB,KACZkwB,EAAOpkB,UAAUinC,SAAS5pC,KAAKnJ,MAC/B,GAAIA,KAAKitC,QAAQ,UAAW,CACxB,IAAI2jD,EAAS5wF,KAAKsT,IAAI,UACtB,IAAI6+B,EAAWnyC,KAAKioC,cAAc2oD,OAClC,GAAIA,GAAUz+C,EAAU,CACpBnyC,KAAKywB,UAAYmgE,EAAO79D,OAAO5vB,GAAG,oBAAoB,SAAU4uB,GAC5D5B,EAAMulE,gBAAgB3jE,EAAM6e,kBAG/B,GAAIuB,EAAU,CACf,GAAInyC,KAAKywB,UAAW,CAChBzwB,KAAKywB,UAAUpc,WAGvBrU,KAAK01F,gBAAgB9E,EAAOt9E,IAAI,yBAI5ChQ,OAAOssB,eAAe0lE,EAAcxpF,UAAW,kBAAmB,CAC9D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUw9B,GACb5wC,KAAKuT,IAAI,YAAavT,KAAK63C,UAC3B73C,KAAKo3C,SAAS9iC,QACdtU,KAAKw1F,OAAOlhF,QACZ,GAAIs8B,EAAU,CACV,IAAIS,EAAWT,EACf,MAAOS,EAAU,CACb,IAAI3lB,EAAQ1rB,KAAK21F,UAAUtkD,GAC3B,GAAIA,GAAYT,EAAU,CACtBllB,EAAMkqE,OAAO,QAEjB51F,KAAKo3C,SAASyD,UAAUnvB,EAAO,GAC/B2lB,EAAWA,EAAS/9B,IAAI,eAKxChQ,OAAOssB,eAAe0lE,EAAe,YAAa,CAC9C5/E,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,kBAEX9P,OAAOssB,eAAe0lE,EAAe,aAAc,CAC/C5/E,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO2wC,GAAUla,WAAW//B,OAAO,CAACwrF,EAAcxrD,cAEtD,OAAOwrD,EAxHM,CAyHfvxC,IClIF,IAAI8xC,GAA+B,SAAU3lE,GACzC1F,GAAUqrE,EAAe3lE,GACzB,SAAS2lE,IACL,IAAI1lE,EAAQD,IAAW,MAAQA,EAAOnkB,MAAM/L,KAAMgM,YAAchM,KAIhEsD,OAAOssB,eAAeO,EAAO,SAAU,CACnCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAeO,EAAO,iBAAkB,CAC3Cza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB,OAAO+c,EAEX7sB,OAAOssB,eAAeimE,EAAc/pF,UAAW,YAAa,CACxD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAI+c,EAAQnwB,KACZkwB,EAAOpkB,UAAUw9B,UAAUngC,KAAKnJ,MAChCA,KAAKkV,OAAOtG,OAAO,WAAY,IAC/B5O,KAAKkV,OAAOtG,OAAO,QAAS,IAC5B5O,KAAKkV,OAAOtG,OAAO,gBAAiB,IACpC5O,KAAKmD,GAAG,YAAY,WAChB,IAAIytC,EAAWzgB,EAAMygB,SACrB,IAAKA,EAASt9B,IAAI,YAAa,CAC3B6c,EAAM5c,IAAI,WAAY,MACtB,OAEJ,IAAI+yD,EAAWn2C,EAAM7c,IAAI,YACzB,IAAIs9E,EAASzgE,EAAMygE,OACnB,GAAIhgD,GAAYggD,EAAQ,CACpB,GAAIhgD,EAASt9B,IAAI,aAAegzD,EAAU,CACtC,GAAIA,EAAU,CACVsqB,EAAOkF,gBAAgBllD,OAEtB,CACDggD,EAAOmF,eAAenlD,EAAUggD,EAAOt9E,IAAI,YAAa,GAAI,YAOpFhQ,OAAOssB,eAAeimE,EAAc/pF,UAAW,WAAY,CACvD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,IAAI+c,EAAQnwB,KACZkwB,EAAOpkB,UAAUinC,SAAS5pC,KAAKnJ,MAC/B,GAAIA,KAAKitC,QAAQ,aAAc,CAC3B,IAAIs8B,EAAYvpE,KAAKsT,IAAI,aACzB,GAAIi2D,GAAa,WAAY,CACzBvpE,KAAKg2F,eAAiBh2F,KAAK+yB,OAAO5vB,GAAG,SAAS,WAC1C,IAAKgtB,EAAMyjB,YAAa,CACpB,IAAIg9C,EAASzgE,EAAMygE,OACnB,GAAIA,EAAQ,CACRA,EAAO6E,eAAetlE,EAAMygB,mBAKvC,CACD,GAAI5wC,KAAKg2F,eAAgB,CACrBh2F,KAAKg2F,eAAe3hF,gBAMxC/Q,OAAOssB,eAAeimE,EAAe,YAAa,CAC9CngF,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,kBAEX9P,OAAOssB,eAAeimE,EAAe,aAAc,CAC/CngF,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO2wC,GAAUla,WAAW//B,OAAO,CAAC+rF,EAAc/rD,cAEtD,OAAO+rD,EA3FM,CA4Ff9xC,ICjGF,SAAS7hC,GAAM+zE,GACb,IAAIxjF,EAAM,EACN2kC,EAAW6+C,EAAK7+C,SAChBp2C,EAAIo2C,GAAYA,EAASpzC,OAC7B,IAAKhD,EAAGyR,EAAM,OACT,QAASzR,GAAK,EAAGyR,GAAO2kC,EAASp2C,GAAGoS,MACzC6iF,EAAK7iF,MAAQX,EAGA,SAAAyjF,KACb,OAAOl2F,KAAKm2F,UAAUj0E,ICVT,SAAAk0E,GAAStgF,EAAUugF,GAChC,IAAI9nF,GAAS,EACb,IAAK,MAAM0nF,KAAQj2F,KAAM,CACvB8V,EAAS3M,KAAKktF,EAAMJ,IAAQ1nF,EAAOvO,MAErC,OAAOA,KCLM,SAAAs2F,GAASxgF,EAAUugF,GAChC,IAAIJ,EAAOj2F,KAAMu2F,EAAQ,CAACN,GAAO7+C,EAAUp2C,EAAGuN,GAAS,EACvD,MAAO0nF,EAAOM,EAAMnqE,MAAO,CACzBtW,EAAS3M,KAAKktF,EAAMJ,IAAQ1nF,EAAOvO,MACnC,GAAIo3C,EAAW6+C,EAAK7+C,SAAU,CAC5B,IAAKp2C,EAAIo2C,EAASpzC,OAAS,EAAGhD,GAAK,IAAKA,EAAG,CACzCu1F,EAAM/wF,KAAK4xC,EAASp2C,MAI1B,OAAOhB,KCVM,SAAAw2F,GAAS1gF,EAAUugF,GAChC,IAAIJ,EAAOj2F,KAAMu2F,EAAQ,CAACN,GAAO5qE,EAAO,GAAI+rB,EAAUp2C,EAAGX,EAAGkO,GAAS,EACrE,MAAO0nF,EAAOM,EAAMnqE,MAAO,CACzBf,EAAK7lB,KAAKywF,GACV,GAAI7+C,EAAW6+C,EAAK7+C,SAAU,CAC5B,IAAKp2C,EAAI,EAAGX,EAAI+2C,EAASpzC,OAAQhD,EAAIX,IAAKW,EAAG,CAC3Cu1F,EAAM/wF,KAAK4xC,EAASp2C,MAI1B,MAAOi1F,EAAO5qE,EAAKe,MAAO,CACxBtW,EAAS3M,KAAKktF,EAAMJ,IAAQ1nF,EAAOvO,MAErC,OAAOA,KCbM,SAAAy2F,GAAS3gF,EAAUugF,GAChC,IAAI9nF,GAAS,EACb,IAAK,MAAM0nF,KAAQj2F,KAAM,CACvB,GAAI8V,EAAS3M,KAAKktF,EAAMJ,IAAQ1nF,EAAOvO,MAAO,CAC5C,OAAOi2F,ICJE,SAAAS,GAAStjF,GACtB,OAAOpT,KAAKm2F,WAAU,SAASF,GAC7B,IAAIxjF,GAAOW,EAAM6iF,EAAKhxF,OAAS,EAC3BmyC,EAAW6+C,EAAK7+C,SAChBp2C,EAAIo2C,GAAYA,EAASpzC,OAC7B,QAAShD,GAAK,EAAGyR,GAAO2kC,EAASp2C,GAAGoS,MACpC6iF,EAAK7iF,MAAQX,KCNF,SAAAkkF,GAASrxD,GACtB,OAAOtlC,KAAK42F,YAAW,SAASX,GAC9B,GAAIA,EAAK7+C,SAAU,CACjB6+C,EAAK7+C,SAASrhB,KAAKuP,OCHV,SAAAuxD,GAASxnE,GACtB,IAAID,EAAQpvB,KACR82F,EAAWC,GAAoB3nE,EAAOC,GACtCknE,EAAQ,CAACnnE,GACb,MAAOA,IAAU0nE,EAAU,CACzB1nE,EAAQA,EAAMkgB,OACdinD,EAAM/wF,KAAK4pB,GAEb,IAAIziB,EAAI4pF,EAAMvyF,OACd,MAAOqrB,IAAQynE,EAAU,CACvBP,EAAMvuF,OAAO2E,EAAG,EAAG0iB,GACnBA,EAAMA,EAAIigB,OAEZ,OAAOinD,EAGT,SAASQ,GAAoBn2F,EAAGE,GAC9B,GAAIF,IAAME,EAAG,OAAOF,EACpB,IAAIo2F,EAASp2F,EAAEq2F,YACXC,EAASp2F,EAAEm2F,YACX1zF,EAAI,KACR3C,EAAIo2F,EAAO5qE,MACXtrB,EAAIo2F,EAAO9qE,MACX,MAAOxrB,IAAME,EAAG,CACdyC,EAAI3C,EACJA,EAAIo2F,EAAO5qE,MACXtrB,EAAIo2F,EAAO9qE,MAEb,OAAO7oB,EC5BM,SAAA4zF,KACb,IAAIlB,EAAOj2F,KAAMu2F,EAAQ,CAACN,GAC1B,MAAOA,EAAOA,EAAK3mD,OAAQ,CACzBinD,EAAM/wF,KAAKywF,GAEb,OAAOM,ECLM,SAAAa,KACb,OAAOlzF,MAAMuR,KAAKzV,MCDL,SAAAq3F,KACb,IAAIC,EAAS,GACbt3F,KAAK42F,YAAW,SAASX,GACvB,IAAKA,EAAK7+C,SAAU,CAClBkgD,EAAO9xF,KAAKywF,OAGhB,OAAOqB,ECPM,SAAAC,KACb,IAAIv/D,EAAOh4B,KAAMw3F,EAAQ,GACzBx/D,EAAK/wB,MAAK,SAASgvF,GACjB,GAAIA,IAASj+D,EAAM,CACjBw/D,EAAMhyF,KAAK,CAAC8sB,OAAQ2jE,EAAK3mD,OAAQ3jC,OAAQsqF,QAG7C,OAAOuB,ECPM,SAAAC,KACb,IAAIxB,EAAOj2F,KAAM6c,EAASwO,EAAO,CAAC4qE,GAAO7+C,EAAUp2C,EAAGX,EACtD,EAAG,CACDwc,EAAUwO,EAAK8kC,UAAW9kC,EAAO,GACjC,MAAO4qE,EAAOp5E,EAAQuP,MAAO,OACrB6pE,EACN,GAAI7+C,EAAW6+C,EAAK7+C,SAAU,CAC5B,IAAKp2C,EAAI,EAAGX,EAAI+2C,EAASpzC,OAAQhD,EAAIX,IAAKW,EAAG,CAC3CqqB,EAAK7lB,KAAK4xC,EAASp2C,aAIlBqqB,EAAKrnB,QCED,SAAS0zF,GAAUzyF,EAAMmyC,GACtC,GAAInyC,aAAgBmP,IAAK,CACvBnP,EAAO,CAACiT,UAAWjT,GACnB,GAAImyC,IAAal/B,UAAWk/B,EAAWugD,QAClC,GAAIvgD,IAAal/B,UAAW,CACjCk/B,EAAWwgD,GAGb,IAAI5/D,EAAO,IAAI6/D,GAAK5yF,GAChBgxF,EACAM,EAAQ,CAACv+D,GACThD,EACA8iE,EACA92F,EACAX,EAEJ,MAAO41F,EAAOM,EAAMnqE,MAAO,CACzB,IAAK0rE,EAAS1gD,EAAS6+C,EAAKhxF,SAAW5E,GAAKy3F,EAAS5zF,MAAMuR,KAAKqiF,IAAS9zF,QAAS,CAChFiyF,EAAK7+C,SAAW0gD,EAChB,IAAK92F,EAAIX,EAAI,EAAGW,GAAK,IAAKA,EAAG,CAC3Bu1F,EAAM/wF,KAAKwvB,EAAQ8iE,EAAO92F,GAAK,IAAI62F,GAAKC,EAAO92F,KAC/Cg0B,EAAMsa,OAAS2mD,EACfjhE,EAAMmhB,MAAQ8/C,EAAK9/C,MAAQ,IAKjC,OAAOne,EAAK4+D,WAAWmB,IAGzB,SAASC,KACP,OAAON,GAAU13F,MAAM42F,WAAWqB,IAGpC,SAASL,GAAeryF,GACtB,OAAOA,EAAE6xC,SAGX,SAASugD,GAAYpyF,GACnB,OAAOrB,MAAMC,QAAQoB,GAAKA,EAAE,GAAK,KAGnC,SAAS0yF,GAAShC,GAChB,GAAIA,EAAKhxF,KAAKmO,QAAU8E,UAAW+9E,EAAK7iF,MAAQ6iF,EAAKhxF,KAAKmO,MAC1D6iF,EAAKhxF,KAAOgxF,EAAKhxF,KAAKA,KAGjB,SAAS8yF,GAAc9B,GAC5B,IAAIp+C,EAAS,EACb,GAAGo+C,EAAKp+C,OAASA,SACTo+C,EAAOA,EAAK3mD,SAAY2mD,EAAKp+C,SAAWA,GAG3C,SAASggD,GAAK5yF,GACnBjF,KAAKiF,KAAOA,EACZjF,KAAKm2C,MACLn2C,KAAK63C,OAAS,EACd73C,KAAKsvC,OAAS,KAGhBuoD,GAAK/rF,UAAY4rF,GAAU5rF,UAAY,CACrCrG,YAAaoyF,GACb31E,MAAOg0E,GACPjvF,KAAMmvF,GACND,UAAWK,GACXI,WAAYN,GACZtnE,KAAMynE,GACNhkF,IAAKikF,GACL3gE,KAAM4gE,GACNjtE,KAAMmtE,GACNI,UAAWE,GACXe,YAAad,GACbE,OAAQD,GACRG,MAAOD,GACP7oE,KAAMspE,GACNlpF,CAACmd,OAAOC,UAAWurE,ICrFd,SAASU,GAASj4F,GACvB,UAAWA,IAAM,WAAY,MAAM,IAAIuE,MACvC,OAAOvE,ECNF,SAASk4F,KACd,OAAO,EAGM,SAAAC,GAASzqF,GACtB,OAAO,WACL,OAAOA,GCNI,SAAA0qF,GAASrC,GACtBA,EAAKsC,GAAKjtF,KAAKoyB,MAAMu4D,EAAKsC,IAC1BtC,EAAKuC,GAAKltF,KAAKoyB,MAAMu4D,EAAKuC,IAC1BvC,EAAKpqB,GAAKvgE,KAAKoyB,MAAMu4D,EAAKpqB,IAC1BoqB,EAAKnqB,GAAKxgE,KAAKoyB,MAAMu4D,EAAKnqB,ICJb,SAAA2sB,GAASnpD,EAAQipD,EAAIC,EAAI3sB,EAAIC,GAC1C,IAAIyqB,EAAQjnD,EAAO8H,SACf6+C,EACAj1F,GAAK,EACLX,EAAIk2F,EAAMvyF,OACV2I,EAAI2iC,EAAOl8B,QAAUy4D,EAAK0sB,GAAMjpD,EAAOl8B,MAE3C,QAASpS,EAAIX,EAAG,CACd41F,EAAOM,EAAMv1F,GAAIi1F,EAAKuC,GAAKA,EAAIvC,EAAKnqB,GAAKA,EACzCmqB,EAAKsC,GAAKA,EAAItC,EAAKpqB,GAAK0sB,GAAMtC,EAAK7iF,MAAQzG,GCThC,SAAA+rF,GAASppD,EAAQipD,EAAIC,EAAI3sB,EAAIC,GAC1C,IAAIyqB,EAAQjnD,EAAO8H,SACf6+C,EACAj1F,GAAK,EACLX,EAAIk2F,EAAMvyF,OACV2I,EAAI2iC,EAAOl8B,QAAU04D,EAAK0sB,GAAMlpD,EAAOl8B,MAE3C,QAASpS,EAAIX,EAAG,CACd41F,EAAOM,EAAMv1F,GAAIi1F,EAAKsC,GAAKA,EAAItC,EAAKpqB,GAAKA,EACzCoqB,EAAKuC,GAAKA,EAAIvC,EAAKnqB,GAAK0sB,GAAMvC,EAAK7iF,MAAQzG,GCNxC,IAAIgsF,IAAO,EAAIrtF,KAAK+hE,KAAK,IAAM,EAE/B,SAASurB,GAActqB,EAAOh/B,EAAQipD,EAAIC,EAAI3sB,EAAIC,GACvD,IAAI+sB,EAAO,GACPtC,EAAQjnD,EAAO8H,SACfnqC,EACA6rF,EACAC,EAAK,EACLC,EAAK,EACL34F,EAAIk2F,EAAMvyF,OACVo0C,EAAIC,EACJjlC,EAAQk8B,EAAOl8B,MACf6lF,EACAzG,EACAx6B,EACAkhC,EACAC,EACAj6D,EACAk6D,EAEJ,MAAOL,EAAK14F,EAAG,CACb+3C,EAAKyzB,EAAK0sB,EAAIlgD,EAAKyzB,EAAK0sB,EAGxB,GAAGS,EAAW1C,EAAMyC,KAAM5lF,aAAe6lF,GAAYD,EAAK34F,GAC1DmyF,EAAWx6B,EAAWihC,EACtB/5D,EAAQ5zB,KAAKyY,IAAIs0B,EAAKD,EAAIA,EAAKC,IAAOjlC,EAAQk7D,GAC9C8qB,EAAOH,EAAWA,EAAW/5D,EAC7Bi6D,EAAW7tF,KAAKyY,IAAIi0C,EAAWohC,EAAMA,EAAO5G,GAG5C,KAAOwG,EAAK34F,IAAK24F,EAAI,CACnBC,GAAYH,EAAYvC,EAAMyC,GAAI5lF,MAClC,GAAI0lF,EAAYtG,EAAUA,EAAWsG,EACrC,GAAIA,EAAY9gC,EAAUA,EAAW8gC,EACrCM,EAAOH,EAAWA,EAAW/5D,EAC7Bg6D,EAAW5tF,KAAKyY,IAAIi0C,EAAWohC,EAAMA,EAAO5G,GAC5C,GAAI0G,EAAWC,EAAU,CAAEF,GAAYH,EAAW,MAClDK,EAAWD,EAIbL,EAAKrzF,KAAKyH,EAAM,CAACmG,MAAO6lF,EAAUI,KAAMjhD,EAAKC,EAAIjB,SAAUm/C,EAAM3wF,MAAMmzF,EAAIC,KAC3E,GAAI/rF,EAAIosF,KAAMZ,GAAYxrF,EAAKsrF,EAAIC,EAAI3sB,EAAIz4D,EAAQolF,GAAMngD,EAAK4gD,EAAW7lF,EAAQ04D,QAC5E4sB,GAAazrF,EAAKsrF,EAAIC,EAAIplF,EAAQmlF,GAAMngD,EAAK6gD,EAAW7lF,EAAQy4D,EAAIC,GACzE14D,GAAS6lF,EAAUF,EAAKC,EAG1B,OAAOH,EAGT,MAAAS,GAAe,SAAUC,EAAOjrB,GAE9B,SAASgrB,EAAShqD,EAAQipD,EAAIC,EAAI3sB,EAAIC,GACpC8sB,GAActqB,EAAOh/B,EAAQipD,EAAIC,EAAI3sB,EAAIC,GAG3CwtB,EAAShrB,MAAQ,SAAS1gE,GACxB,OAAO2rF,GAAQ3rF,GAAKA,GAAK,EAAIA,EAAI,IAGnC,OAAO0rF,EAVM,CAWZX,IC5DY,SAAApqF,KACb,IAAIirF,EAAOF,GACP57D,EAAQ,MACR0a,EAAK,EACLC,EAAK,EACLohD,EAAe,CAAC,GAChBC,EAAetB,GACfz4C,EAAay4C,GACbh4C,EAAeg4C,GACf/yC,EAAgB+yC,GAChBl5C,EAAck5C,GAElB,SAASuB,EAAQ3hE,GACfA,EAAKugE,GACLvgE,EAAKwgE,GAAK,EACVxgE,EAAK6zC,GAAKzzB,EACVpgB,EAAK8zC,GAAKzzB,EACVrgB,EAAK4+D,WAAWgD,GAChBH,EAAe,CAAC,GAChB,GAAI/7D,EAAO1F,EAAK4+D,WAAW0B,IAC3B,OAAOtgE,EAGT,SAAS4hE,EAAa3D,GACpB,IAAIjzF,EAAIy2F,EAAaxD,EAAK9/C,OACtBoiD,EAAKtC,EAAKsC,GAAKv1F,EACfw1F,EAAKvC,EAAKuC,GAAKx1F,EACf6oE,EAAKoqB,EAAKpqB,GAAK7oE,EACf8oE,EAAKmqB,EAAKnqB,GAAK9oE,EACnB,GAAI6oE,EAAK0sB,EAAIA,EAAK1sB,GAAM0sB,EAAK1sB,GAAM,EACnC,GAAIC,EAAK0sB,EAAIA,EAAK1sB,GAAM0sB,EAAK1sB,GAAM,EACnCmqB,EAAKsC,GAAKA,EACVtC,EAAKuC,GAAKA,EACVvC,EAAKpqB,GAAKA,EACVoqB,EAAKnqB,GAAKA,EACV,GAAImqB,EAAK7+C,SAAU,CACjBp0C,EAAIy2F,EAAaxD,EAAK9/C,MAAQ,GAAKujD,EAAazD,GAAQ,EACxDsC,GAAMr5C,EAAY+2C,GAAQjzF,EAC1Bw1F,GAAM74C,EAAWs2C,GAAQjzF,EACzB6oE,GAAMzrB,EAAa61C,GAAQjzF,EAC3B8oE,GAAMzmB,EAAc4wC,GAAQjzF,EAC5B,GAAI6oE,EAAK0sB,EAAIA,EAAK1sB,GAAM0sB,EAAK1sB,GAAM,EACnC,GAAIC,EAAK0sB,EAAIA,EAAK1sB,GAAM0sB,EAAK1sB,GAAM,EACnC0tB,EAAKvD,EAAMsC,EAAIC,EAAI3sB,EAAIC,IAI3B6tB,EAAQj8D,MAAQ,SAAS9vB,GACvB,OAAO5B,UAAUhI,QAAU05B,IAAU9vB,EAAG+rF,GAAWj8D,GAGrDi8D,EAAQnuF,KAAO,SAASoC,GACtB,OAAO5B,UAAUhI,QAAUo0C,GAAMxqC,EAAE,GAAIyqC,GAAMzqC,EAAE,GAAI+rF,GAAW,CAACvhD,EAAIC,IAGrEshD,EAAQH,KAAO,SAAS5rF,GACtB,OAAO5B,UAAUhI,QAAUw1F,EAAOrB,GAASvqF,GAAI+rF,GAAWH,GAG5DG,EAAQE,QAAU,SAASjsF,GACzB,OAAO5B,UAAUhI,OAAS21F,EAAQD,aAAa9rF,GAAGksF,aAAalsF,GAAK+rF,EAAQD,gBAG9EC,EAAQD,aAAe,SAAS9rF,GAC9B,OAAO5B,UAAUhI,QAAU01F,SAAsB9rF,IAAM,WAAaA,EAAIyqF,IAAUzqF,GAAI+rF,GAAWD,GAGnGC,EAAQG,aAAe,SAASlsF,GAC9B,OAAO5B,UAAUhI,OAAS21F,EAAQh6C,WAAW/xC,GAAGwyC,aAAaxyC,GAAGy3C,cAAcz3C,GAAGsxC,YAAYtxC,GAAK+rF,EAAQh6C,cAG5Gg6C,EAAQh6C,WAAa,SAAS/xC,GAC5B,OAAO5B,UAAUhI,QAAU27C,SAAoB/xC,IAAM,WAAaA,EAAIyqF,IAAUzqF,GAAI+rF,GAAWh6C,GAGjGg6C,EAAQv5C,aAAe,SAASxyC,GAC9B,OAAO5B,UAAUhI,QAAUo8C,SAAsBxyC,IAAM,WAAaA,EAAIyqF,IAAUzqF,GAAI+rF,GAAWv5C,GAGnGu5C,EAAQt0C,cAAgB,SAASz3C,GAC/B,OAAO5B,UAAUhI,QAAUqhD,SAAuBz3C,IAAM,WAAaA,EAAIyqF,IAAUzqF,GAAI+rF,GAAWt0C,GAGpGs0C,EAAQz6C,YAAc,SAAStxC,GAC7B,OAAO5B,UAAUhI,QAAUk7C,SAAqBtxC,IAAM,WAAaA,EAAIyqF,IAAUzqF,GAAI+rF,GAAWz6C,GAGlG,OAAOy6C,EC5FM,SAAAr8E,GAASgyB,EAAQipD,EAAIC,EAAI3sB,EAAIC,GAC1C,IAAIyqB,EAAQjnD,EAAO8H,SACfp2C,EAAGX,EAAIk2F,EAAMvyF,OACbyO,EAAKsnF,EAAO,IAAI71F,MAAM7D,EAAI,GAE9B,IAAK05F,EAAK,GAAKtnF,EAAMzR,EAAI,EAAGA,EAAIX,IAAKW,EAAG,CACtC+4F,EAAK/4F,EAAI,GAAKyR,GAAO8jF,EAAMv1F,GAAGoS,MAGhC4mF,EAAU,EAAG35F,EAAGivC,EAAOl8B,MAAOmlF,EAAIC,EAAI3sB,EAAIC,GAE1C,SAASkuB,EAAUh5F,EAAG6D,EAAGuO,EAAOmlF,EAAIC,EAAI3sB,EAAIC,GAC1C,GAAI9qE,GAAK6D,EAAI,EAAG,CACd,IAAIoxF,EAAOM,EAAMv1F,GACjBi1F,EAAKsC,GAAKA,EAAItC,EAAKuC,GAAKA,EACxBvC,EAAKpqB,GAAKA,EAAIoqB,EAAKnqB,GAAKA,EACxB,OAGF,IAAImuB,EAAcF,EAAK/4F,GACnBk5F,EAAe9mF,EAAQ,EAAK6mF,EAC5BttF,EAAI3L,EAAI,EACRm5F,EAAKt1F,EAAI,EAEb,MAAO8H,EAAIwtF,EAAI,CACb,IAAIC,EAAMztF,EAAIwtF,IAAO,EACrB,GAAIJ,EAAKK,GAAOF,EAAavtF,EAAIytF,EAAM,OAClCD,EAAKC,EAGZ,GAAKF,EAAcH,EAAKptF,EAAI,GAAOotF,EAAKptF,GAAKutF,GAAgBl5F,EAAI,EAAI2L,IAAKA,EAE1E,IAAI0tF,EAAYN,EAAKptF,GAAKstF,EACtBK,EAAalnF,EAAQinF,EAEzB,GAAKxuB,EAAK0sB,EAAOzsB,EAAK0sB,EAAK,CACzB,IAAI+B,EAAKnnF,GAASmlF,EAAK+B,EAAazuB,EAAKwuB,GAAajnF,EAAQy4D,EAC9DmuB,EAAUh5F,EAAG2L,EAAG0tF,EAAW9B,EAAIC,EAAI+B,EAAIzuB,GACvCkuB,EAAUrtF,EAAG9H,EAAGy1F,EAAYC,EAAI/B,EAAI3sB,EAAIC,OACnC,CACL,IAAI0uB,EAAKpnF,GAASolF,EAAK8B,EAAaxuB,EAAKuuB,GAAajnF,EAAQ04D,EAC9DkuB,EAAUh5F,EAAG2L,EAAG0tF,EAAW9B,EAAIC,EAAI3sB,EAAI2uB,GACvCR,EAAUrtF,EAAG9H,EAAGy1F,EAAY/B,EAAIiC,EAAI3uB,EAAIC,KCvC/B,SAAA2uB,GAASnrD,EAAQipD,EAAIC,EAAI3sB,EAAIC,IACzCx8B,EAAO6G,MAAQ,EAAIvwC,GAAQyzF,IAAM/pD,EAAQipD,EAAIC,EAAI3sB,EAAIC,GCexD,IAAI4uB,GAA2B,SAAUxqE,GACrC1F,GAAUkwE,EAAWxqE,GACrB,SAASwqE,IACL,IAAIvqE,EAAQD,IAAW,MAAQA,EAAOnkB,MAAM/L,KAAMgM,YAAchM,KAMhEsD,OAAOssB,eAAeO,EAAO,iBAAkB,CAC3Cza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO+c,EAAMinB,SAAS5xC,KAAKu+C,GAAUjT,IAAI3gB,EAAM+I,MAAO,CAAEmd,WAAY,WAExE/yC,OAAOssB,eAAeO,EAAO,YAAa,CACtCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAeO,EAAO,YAAa,CACtCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB9P,OAAOssB,eAAeO,EAAO,SAAU,CACnCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,IAEX9P,OAAOssB,eAAeO,EAAO,OAAQ,CACjCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,cAOX9P,OAAOssB,eAAeO,EAAO,QAAS,CAClCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,IAAImhB,GAAa0Z,GAAS6C,IAAI,KAAK,WAAc,OAAO+kD,GAAc/kD,IAAI3gB,EAAM+I,MAAO,CAC1F+S,UAAWmf,GAAiBj7B,EAAMomE,MAAMjyE,SAAShR,IAAI,YAAa,IAAK,CAAC6c,EAAMwqE,KAAM,YAAa,UAClGxqE,EAAMomE,MAAMjyE,eAOnBhhB,OAAOssB,eAAeO,EAAO,SAAU,CACnCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,IAAImhB,GAAa0Z,GAAS6C,IAAI,KAAK,WAAc,OAAO0Y,GAAM1Y,IAAI3gB,EAAM+I,MAAO,CAClF+S,UAAWmf,GAAiBj7B,EAAMqlE,OAAOlxE,SAAShR,IAAI,YAAa,IAAK,CAAC6c,EAAMwqE,QAChFxqE,EAAMqlE,OAAOlxE,eAEpBhhB,OAAOssB,eAAeO,EAAO,oBAAqB,CAC9Cza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,WAAY,IAEhB,OAAO+c,EAKX7sB,OAAOssB,eAAe8qE,EAAU5uF,UAAW,WAAY,CACnD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUw9B,GACb,IAAIgqD,EAAYhqD,EAASt9B,IAAI,aAC7B,IAAI2iF,EAAOj2F,KAAKu2F,MAAM/hE,OACtByhE,EAAKrF,OAAS5wF,KACdi2F,EAAK1kD,aAAaX,GAClB5wC,KAAKu2F,MAAM/wF,KAAKywF,GAChBrlD,EAASxM,OAAO,OAAQ6xD,GACxB,IAAIvqE,EAAQ1rB,KAAKw1F,OAAOhhE,OACxB9I,EAAM6lB,aAAaX,GACnBA,EAASxM,OAAO,QAAS1Y,GACzB1rB,KAAKw1F,OAAOhwF,KAAKkmB,GACjB,IAAKkvE,GAAaA,EAAU52F,QAAU,EAAG,CACrCiyF,EAAKL,OAAO,QAEhB,IAAIz/C,EAAQvF,EAASt9B,IAAI,SACzB2iF,EAAKL,OAAO,QAAUz/C,GACtBn2C,KAAK66F,eAAezjD,SAAS5xC,KAAKywF,GAClCA,EAAK7+C,SAAS5xC,KAAKkmB,GACnB,OAAOuqE,KAGf3yF,OAAOssB,eAAe8qE,EAAU5uF,UAAW,YAAa,CACpD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACHpT,KAAKssC,eAAe9mC,KAAKwuF,GAAsBljD,IAAI9wC,KAAKk5B,QACxDl5B,KAAKkF,OAAOM,KAAK,WAAY,YAAa,WAAY,QACtDxF,KAAKo3C,SAAS5xC,KAAKxF,KAAKuwF,kBACxBrgE,EAAOpkB,UAAUw9B,UAAUngC,KAAKnJ,SAGxCsD,OAAOssB,eAAe8qE,EAAU5uF,UAAW,mBAAoB,CAC3D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH8c,EAAOpkB,UAAU09E,iBAAiBrgF,KAAKnJ,MACvC,GAAIA,KAAKiwF,aAAc,CACnBjwF,KAAK86F,UAAY,GACjB,IAAIC,EAAQ/6F,KAAK+uF,UAAU,GAC3B,GAAIgM,EAAO,CACP/6F,KAAKg7F,mBAAmBh7F,KAAK86F,UAAWC,GACxC/6F,KAAK25E,OAAS,EACd35E,KAAKi7F,UAAYC,GAAsBl7F,KAAK86F,WAC5C,GAAI96F,KAAKi7F,UAAW,CAChBj7F,KAAKi7F,UAAUxoF,KAAI,SAAUlN,GACzB,OAAOA,EAAE6N,SAEb,IAAI2iB,EAAO/1B,KAAKsT,IAAI,QACpB,GAAIyiB,GAAQ,aAAc,CACtB/1B,KAAKi7F,UAAUllE,MAAK,SAAUn1B,EAAGE,GAAK,OAAOA,EAAEsS,MAAQxS,EAAEwS,cAExD,GAAI2iB,GAAQ,YAAa,CAC1B/1B,KAAKi7F,UAAUllE,MAAK,SAAUn1B,EAAGE,GAAK,OAAOF,EAAEwS,MAAQtS,EAAEsS,SAE7DpT,KAAK0qC,cAAc,WAAYtd,UAC/BptB,KAAK0qC,cAAc,aAActd,UACjCptB,KAAK0qC,cAAc,WAAY,GAC/B1qC,KAAKm7F,cAAcn7F,KAAKi7F,aAIpC,GAAIj7F,KAAKiwF,cAAgBjwF,KAAKm0C,WAAY,CACtCn0C,KAAKo7F,iBAET,GAAIp7F,KAAKm0C,WAAY,CACjBn0C,KAAKq7F,gBAAgBr7F,KAAKsT,IAAI,oBAAqBtT,KAAKs7F,kBAAmB,WAIvFh4F,OAAOssB,eAAe8qE,EAAU5uF,UAAW,WAAY,CACnD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH8c,EAAOpkB,UAAUinC,SAAS5pC,KAAKnJ,MAC/B,GAAIA,KAAKitC,QAAQ,oBAAqB,CAClCjtC,KAAKq7F,gBAAgBr7F,KAAKsT,IAAI,yBAI1ChQ,OAAOssB,eAAe8qE,EAAU5uF,UAAW,iBAAkB,CACzD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,GAAIpT,KAAKi7F,UAAW,CAChBj7F,KAAKu7F,aAAav7F,KAAKi7F,eAInC33F,OAAOssB,eAAe8qE,EAAU5uF,UAAW,eAAgB,CACvD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUooF,GACb,IAAIrrE,EAAQnwB,KACZ,IAAI4wC,EAAW4qD,EAAcv2F,KAAK2rC,SAClC,GAAIA,EAAU,CACV5wC,KAAKy7F,YAAY7qD,GACjB,GAAI5wC,KAAKqwF,QAAQrsF,OAAS,IAAM4sC,EAASy/C,QAAS,CAC9CrwF,KAAK2xF,aAAa/gD,GAEtB,IAAI8qD,EAAoBF,EAAcpkD,SACtC,GAAIskD,EAAmB,CACnBtrE,GAAYsrE,GAAmB,SAAUC,GACrCxrE,EAAMorE,aAAaI,WAMvCr4F,OAAOssB,eAAe8qE,EAAU5uF,UAAW,cAAe,CACtD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU69B,OAGrB3tC,OAAOssB,eAAe8qE,EAAU5uF,UAAW,mBAAoB,CAC3D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU27E,EAAW7sF,GACxB,IAAIiuB,EAAQnwB,KACZ,IAAI47F,EACJxrE,GAAY2+D,GAAW,SAAUn+C,GAC7B,GAAIA,EAASt9B,IAAI,OAASpR,EAAI,CAC1B05F,EAAKhrD,EAET,IAAIwG,EAAWxG,EAASt9B,IAAI,YAC5B,GAAI8jC,EAAU,CACV,IAAIykD,EAAgB1rE,EAAM2rE,iBAAiB1kD,EAAUl1C,GACrD,GAAI25F,EAAe,CACfD,EAAKC,OAIjB,OAAOD,KAGft4F,OAAOssB,eAAe8qE,EAAU5uF,UAAW,iBAAkB,CACzD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU27E,GACb,IAAI5+D,EAAQnwB,KACZowB,GAAY2+D,GAAW,SAAUn+C,GAC7B,IAAIy/C,EAAUz/C,EAASy/C,QACvB,GAAIA,EAAS,CACTjgE,GAAYigE,GAAS,SAAUG,GAC3BA,EAAOn8E,aAEXu8B,EAASy/C,QAAUn4E,UAEvB,IAAIk/B,EAAWxG,EAASt9B,IAAI,YAC5B,GAAI8jC,EAAU,CACVjnB,EAAMmgE,eAAel5C,OAG7Bp3C,KAAKo7F,oBAGb93F,OAAOssB,eAAe8qE,EAAU5uF,UAAW,eAAgB,CACvD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH8c,EAAOpkB,UAAUqjF,aAAahmF,KAAKnJ,MACnC,IAAI0mE,EAAS1mE,KAAKsT,IAAI,UACtB,GAAIozD,EAAQ,CACRA,EAAOhyD,YAInBpR,OAAOssB,eAAe8qE,EAAU5uF,UAAW,kBAAmB,CAC1D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUw9B,GACb,IAAIzgB,EAAQnwB,KACZkwB,EAAOpkB,UAAUujF,gBAAgBlmF,KAAKnJ,KAAM4wC,GAC5C,IAAIgqD,EAAYhqD,EAASt9B,IAAI,aAC7B,IAAIozD,EAAS1mE,KAAKsT,IAAI,UACtB,IAAI6hF,EAAWn1F,KAAKsT,IAAI,WAAY,GACpC,IAAKs9B,EAASt9B,IAAI,UAAW,CACzBs9B,EAASxM,OAAO,QAAS,GACzB,GAAIsiC,GAAUyuB,GAAY,GAAKvkD,EAASt9B,IAAI,SAAW,KAAM,CACzDs9B,EAASxM,OAAO,OAAQsiC,EAAOr7C,SAGvC,IAAI8qB,EAAQvF,EAASt9B,IAAI,SACzB,IAAI+gF,EAAer0F,KAAKsT,IAAI,eAAgB,GAC5CtT,KAAK+7F,SAASnrD,GACd5wC,KAAKg8F,iBAAiBprD,GACtB,GAAIgqD,EAAW,CACX,IAAIqB,EAAa,GACjBrrD,EAASxM,OAAO,WAAY63D,GAC5B7rE,GAAYwqE,GAAW,SAAU5lE,GAC7B,IAAI6mE,EAAgB,IAAIzN,GAASj+D,EAAO6E,EAAO7E,EAAMi/D,cAAcp6D,IACnEinE,EAAWz2F,KAAKq2F,GAChBA,EAAcz3D,OAAO,SAAUwM,GAC/BirD,EAAcz3D,OAAO,QAAS+R,EAAQ,GACtC,GAAIhmB,EAAM4+D,UAAU/qF,QAAU,GAAKmyC,GAAS,EAAG,CAC3C,GAAIuwB,GAAUm1B,EAAcvoF,IAAI,SAAW,KAAM,CAC7CuoF,EAAcz3D,OAAO,OAAQsiC,EAAOr7C,aAGvC,CACDwwE,EAAcz3D,OAAO,OAAQwM,EAASt9B,IAAI,SAE9C6c,EAAMk/D,gBAAgBwM,MAG9B,IAAIzkD,EAAWxG,EAASt9B,IAAI,YAC5B,IAAK8jC,GAAYA,EAASpzC,QAAU,EAAG,CACnC,IAAIiyF,EAAOrlD,EAASt9B,IAAI,QACxB2iF,EAAK9hE,OAAO,CAAEo1C,UAAWrxD,YAE7B,GAAI04B,EAASt9B,IAAI,aAAe,KAAM,CAClC,GAAI6iC,GAASg/C,EAAWd,EAAc,CAClCr0F,KAAK81F,gBAAgBllD,EAAU,QAK/CttC,OAAOssB,eAAe8qE,EAAU5uF,UAAW,mBAAoB,CAC3D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU69B,OAGrB3tC,OAAOssB,eAAe8qE,EAAU5uF,UAAW,gBAAiB,CACxD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU8oF,GACb,IAAI/rE,EAAQnwB,KACZ,IAAI4wC,EAAWsrD,EAAgBj3F,KAAK2rC,SACpC,GAAIsrD,EAAgB/lD,MAAQn2C,KAAK6oC,WAAW,YAAa,CACrD7oC,KAAK0qC,cAAc,WAAYwxD,EAAgB/lD,OAEnD,GAAIvF,EAAU,CACVA,EAASxM,OAAO,kBAAmB83D,GACnCA,EAAgB3tF,MAAQvO,KAAK25E,OAC7B35E,KAAK25E,SACL/oC,EAASt9B,IAAI,QAAQC,IAAI,WAAYq9B,EAASt9B,IAAI,aAClD,IAAI6oF,EAAYD,EAAgBj3F,KAAKmO,MACrC,IAAIA,EAAQ8oF,EAAgB9oF,MAC5B,GAAI+oF,GAAa,KAAM,CACnB/oF,EAAQ+oF,EACRD,EAAgB,SAAW9oF,EAE/B,GAAIye,GAAeze,GAAQ,CACvBw9B,EAASxM,OAAO,MAAOhxB,GACvBw9B,EAASxM,OAAO,oBAAqBhxB,EAAQpT,KAAK+uF,UAAU,GAAGz7E,IAAI,OAAS,KAC5E,IAAI8oF,EAAe,IACnB,IAAI/qD,EAAWT,EAASt9B,IAAI,UAC5B,GAAI+9B,EAAU,CACV+qD,EAAehpF,EAAQi+B,EAAS/9B,IAAI,OAAS,IAEjDs9B,EAASt9B,IAAI,SAASvD,KAAK+nC,gBAC3BlH,EAASxM,OAAO,eAAgBg4D,GAChC,GAAIp8F,KAAK6oC,WAAW,YAAcz1B,EAAO,CACrCpT,KAAK0qC,cAAc,WAAYt3B,GAEnC,GAAIpT,KAAK6oC,WAAW,aAAez1B,EAAO,CACtCpT,KAAK0qC,cAAc,YAAat3B,IAGxCpT,KAAKq8F,kBAAkBzrD,GAE3B,IAAI8qD,EAAoBQ,EAAgB9kD,SACxC,GAAIskD,EAAmB,CACnBtrE,GAAYsrE,GAAmB,SAAUY,GACrCnsE,EAAMgrE,cAAcmB,UAKpCh5F,OAAOssB,eAAe8qE,EAAU5uF,UAAW,qBAAsB,CAC7D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUnO,EAAM2rC,GACnB,IAAIzgB,EAAQnwB,KACZiF,EAAK2rC,SAAWA,EAChB,IAAIwG,EAAWxG,EAASt9B,IAAI,YAC5B,GAAI8jC,EAAU,CACV,IAAImlD,EAAsB,GAC1Bt3F,EAAKmyC,SAAWmlD,EAChBnsE,GAAYgnB,GAAU,SAAUykD,GAC5B,IAAIjB,EAAY,GAChB2B,EAAoB/2F,KAAKo1F,GACzBzqE,EAAM6qE,mBAAmBJ,EAAWiB,MAExC,IAAIzoF,EAAQw9B,EAASt9B,IAAI,gBACzB,GAAIue,GAAeze,GAAQ,CACvBnO,EAAKmO,MAAQA,OAGhB,CACD,IAAIA,EAAQw9B,EAASt9B,IAAI,gBACzB,GAAIue,GAAeze,GAAQ,CACvBnO,EAAKmO,MAAQA,OAQ7B9P,OAAOssB,eAAe8qE,EAAU5uF,UAAW,kBAAmB,CAC1D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUw9B,GACb,IAAIzgB,EAAQnwB,KACZkwB,EAAOpkB,UAAUwiF,gBAAgBnlF,KAAKnJ,KAAM4wC,GAC5C,IAAIqlD,EAAOrlD,EAASt9B,IAAI,QACxB,GAAI2iF,EAAM,CACNj2F,KAAKu2F,MAAMl/C,YAAY4+C,GACvBA,EAAK5hF,UAET,IAAIqX,EAAQklB,EAASt9B,IAAI,SACzB,GAAIoY,EAAO,CACP1rB,KAAKw1F,OAAOn+C,YAAY3rB,GACxBA,EAAMrX,UAEV,IAAI+iC,EAAWxG,EAASt9B,IAAI,YAC5B,GAAI8jC,EAAU,CACVhnB,GAAYgnB,GAAU,SAAUpiB,GAC5B7E,EAAMm+D,gBAAgBt5D,UAYtC1xB,OAAOssB,eAAe8qE,EAAU5uF,UAAW,eAAgB,CACvD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUw9B,EAAU3P,GACvB,OAAOtW,GAAU3qB,UAAW,OAAQ,GAAG,WACnC,IAAIqzF,EAAUmJ,EAAa/3D,EAAwBC,EAAsB3C,EAAQqV,EAAU6+C,EAC3F,IAAI9lE,EAAQnwB,KACZ,OAAOyrB,GAAYzrB,MAAM,SAAU+Q,GAC/B,OAAQA,EAAG2a,OACP,KAAK,EACD2nE,EAAW,CAACnjE,EAAOpkB,UAAU0iF,aAAarlF,KAAKnJ,KAAM4wC,EAAU3P,IAC/Du7D,EAAcx8F,KAAKkV,OAAOtG,OAAO,SAAU,IAC3C,IAAKijB,GAAeoP,GAAW,CAC3BwD,EAAyB,yBACzBxD,EAAWu7D,EAAYlpF,IAAImxB,EAAwBzkC,KAAKsT,IAAImxB,EAAwB,IAExFC,EAAuB,uBACvB3C,EAASy6D,EAAYlpF,IAAIoxB,EAAsB1kC,KAAKsT,IAAIoxB,IACxD0S,EAAWxG,EAASt9B,IAAI,YACxB,KAAM8jC,GAAYA,EAASpzC,QAAU,IAAM6tB,GAAe+e,EAASt9B,IAAI,UAAW,CAC9E+/E,EAAS7tF,KAAKorC,EAAShM,QAAQ,CAAE5wB,IAAK,eAAgBwY,GAAI,EAAGyU,SAAUA,EAAUc,OAAQA,IAAUvB,eAEvGy1D,EAAOrlD,EAASt9B,IAAI,QACpB2iF,EAAK/9C,OACL+9C,EAAKxiD,cACL,GAAI2D,EAAU,CACVhnB,GAAYgnB,GAAU,SAAUykD,GAC5BxI,EAAS7tF,KAAK2qB,EAAMq+D,aAAaqN,OAGzC,MAAO,CAAC,EAAa3wE,QAAQuV,IAAI4yD,IACrC,KAAK,EACDtiF,EAAG4a,OACH,MAAO,CAAC,aAahCroB,OAAOssB,eAAe8qE,EAAU5uF,UAAW,eAAgB,CACvD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUw9B,EAAU3P,GACvB,OAAOtW,GAAU3qB,UAAW,OAAQ,GAAG,WACnC,IAAIqzF,EAAUtxD,EAAQqV,EAAU6+C,EAChC,IAAI9lE,EAAQnwB,KACZ,OAAOyrB,GAAYzrB,MAAM,SAAU+Q,GAC/B,OAAQA,EAAG2a,OACP,KAAK,EACD2nE,EAAW,CAACnjE,EAAOpkB,UAAUyiF,aAAaplF,KAAKnJ,KAAM4wC,EAAU3P,IAC/D,IAAKpP,GAAeoP,GAAW,CAC3BA,EAAWjhC,KAAKsT,IAAI,yBAA0B,GAElDyuB,EAAS/hC,KAAKsT,IAAI,wBAClB8jC,EAAWxG,EAASt9B,IAAI,YACxB,KAAM8jC,GAAYA,EAASpzC,QAAU,IAAM6tB,GAAe+e,EAASt9B,IAAI,UAAW,CAC9E+/E,EAAS7tF,KAAKorC,EAAShM,QAAQ,CAAE5wB,IAAK,eAAgBwY,GAAIokB,EAASt9B,IAAI,SAAU2tB,SAAUA,EAAUc,OAAQA,IAAUvB,eAE3Hy1D,EAAOrlD,EAASt9B,IAAI,QACpB2iF,EAAKj+C,OACL,GAAIZ,EAAU,CACVhnB,GAAYgnB,GAAU,SAAUykD,GAC5BxI,EAAS7tF,KAAK2qB,EAAMo+D,aAAasN,OAGzC,MAAO,CAAC,EAAa3wE,QAAQuV,IAAI4yD,IACrC,KAAK,EACDtiF,EAAG4a,OACH,MAAO,CAAC,aAYhCroB,OAAOssB,eAAe8qE,EAAU5uF,UAAW,iBAAkB,CACzD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUw9B,EAAU6rD,EAAUtmD,EAAOlV,GACxC,IAAI9Q,EAAQnwB,KACZ,GAAIm2C,GAAS,KAAM,CACfA,EAAQ,EAEZ,GAAIsmD,GAAY,KAAM,CAClBA,EAAW,EAEf7rD,EAASr9B,IAAI,WAAY,OACzBq9B,EAASt9B,IAAI,QAAQC,IAAI,WAAY,OACrC,IAAKq9B,EAASiC,WAAY,CACtBjC,EAASt9B,IAAI,QAAQ0kC,KAAK/W,GAE9B,GAAIkV,GAAS,EAAG,CACZ,IAAIu+C,EAAU10F,KAAKsT,IAAI,UAAW8Z,UAClC,IAAI6mB,EAAWrD,EACf,IAAI1uB,EAAQ,EACZ,MAAO+xB,IAAa/7B,UAAW,CAC3B,GAAIgK,EAAQwyE,EAAS,CACjBzgD,EAAS3gC,IAAI,QAAQ4kC,OAEzBjE,EAAWA,EAAS3gC,IAAI,UACxB4O,KAGR,IAAIk1B,EAAWxG,EAASt9B,IAAI,YAC5B,GAAI8jC,EAAU,CACV,GAAIjB,EAAQsmD,EAAW,EAAG,CACtBrsE,GAAYgnB,GAAU,SAAUpiB,GAC5B7E,EAAM4lE,eAAe/gE,EAAOynE,EAAUtmD,EAAQ,EAAGlV,UAGpD,CACD7Q,GAAYgnB,GAAU,SAAUpiB,GAC5B,IAAKA,EAAM6d,WAAY,CACnB7d,EAAM1hB,IAAI,QAAQ0kC,KAAK/W,GACvBjM,EAAM1hB,IAAI,QAAQ4B,OAAOgwB,aAAa,YACtClQ,EAAMzhB,IAAI,WAAY,MACtB4c,EAAM2lE,gBAAgB9gE,YAa9C1xB,OAAOssB,eAAe8qE,EAAU5uF,UAAW,kBAAmB,CAC1D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUw9B,EAAU3P,GACvB,IAAI9Q,EAAQnwB,KACZ4wC,EAASr9B,IAAI,WAAY,MACzB,IAAI6jC,EAAWxG,EAASt9B,IAAI,YAC5B,GAAI8jC,EAAU,CACVhnB,GAAYgnB,GAAU,SAAUpiB,GAC5B7E,EAAM2lE,gBAAgB9gE,EAAOiM,GAC7BjM,EAAM1hB,IAAI,QAAQ4kC,KAAKjX,UAKvC39B,OAAOssB,eAAe8qE,EAAU5uF,UAAW,kBAAmB,CAC1D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUw9B,EAAUwjD,EAAWsI,GAClC,GAAI9rD,EAAU,CACV,IAAK8rD,EAAc,CACf,IAAI56F,EAAO,mBACX9B,KAAK+yB,OAAOd,SAASnwB,EAAM,CAAEA,KAAMA,EAAM6J,OAAQ3L,KAAM4wC,SAAUA,IAErE,IAAI6rD,EAAWz8F,KAAK6oC,WAAW,WAAY,GAC3C,IAAIssD,EAAWn1F,KAAKsT,IAAI,WAAY,GACpC,GAAI8gF,GAAa,KAAM,CACnBA,EAAY9oF,KAAKC,IAAIvL,KAAKsT,IAAI,YAAa,GAAImpF,EAAW7rD,EAASt9B,IAAI,UAE3E,IAAKtT,KAAKkwF,OAAQ,CACdkE,EAAY9oF,KAAKC,IAAIvL,KAAKsT,IAAI,eAAgB,GAAImpF,EAAWtH,GAEjEn1F,KAAKs7F,kBAAoBlH,EACzB,IAAIoH,EAAgB5qD,EAASt9B,IAAI,mBACjC,IAAIqpF,EAAenB,EAAcrlD,MACjC,GAAIwmD,EAAevI,EAAYqI,EAAU,CACrCrI,EAAYqI,EAAWE,EAE3B,GAAIA,EAAexH,EAAU,CACzBf,GAAae,EAAWwH,EACxBA,EAAexH,EAEnB,IAAI/9C,EAAWxG,EAASt9B,IAAI,YAC5B,GAAI8jC,GAAYA,EAASpzC,OAAS,EAAG,CACjC,GAAIowF,EAAY,EAAG,CACfp0F,KAAK+1F,eAAenlD,EAAUwjD,OAE7B,CACDxjD,EAASt9B,IAAI,QAAQ0kC,OACrB5nB,GAAYgnB,GAAU,SAAUpiB,GAC5BA,EAAM1hB,IAAI,QAAQ4kC,UAG1B,GAAIsjD,EAAcrlD,MAAQg/C,EAAU,CAChCvkD,EAASt9B,IAAI,QAAQ4kC,KAAK,GAE9B,GAAIl4C,KAAKsT,IAAI,oBAAqB,CAC9BtT,KAAK48F,cAAchsD,QAGtB,CACD5wC,KAAK+1F,eAAe/1F,KAAK+uF,UAAU,GAAIqF,EAAW,GAEtDp0F,KAAK68F,MAAMjsD,OAIvBttC,OAAOssB,eAAe8qE,EAAU5uF,UAAW,QAAS,CAChD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAU69B,OAGrB3tC,OAAOssB,eAAe8qE,EAAU5uF,UAAW,gBAAiB,CACxD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUw9B,GACb,IAAIzgB,EAAQnwB,KACZ,IAAIsvC,EAASsB,EAASt9B,IAAI,UAC1B,GAAIg8B,EAAQ,CACR,IAAI8H,EAAW9H,EAAOh8B,IAAI,YAC1B,GAAI8jC,EAAU,CACVhnB,GAAYgnB,GAAU,SAAUpiB,GAC5B,GAAIA,GAAS4b,EAAU,CACnBzgB,EAAM2lE,gBAAgB9gE,YAY9C1xB,OAAOssB,eAAe8qE,EAAU5uF,UAAW,iBAAkB,CACzD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUw9B,GACb,IAAItB,EAASsB,EAASt9B,IAAI,UAC1B,IAAImpF,EAAWz8F,KAAK6oC,WAAW,WAAY,GAC3C,GAAI7oC,KAAKsT,IAAI,qBAAuBs9B,EAAU,CAC1C,GAAItB,EAAQ,CACRtvC,KAAKuT,IAAI,mBAAoB+7B,OAE5B,CACD,IAAI6G,EAAQ7qC,KAAKC,IAAIvL,KAAKsT,IAAI,YAAa,GAAImpF,EAAW7rD,EAASt9B,IAAI,UACvE,GAAItT,KAAKs7F,mBAAqBnlD,EAAO,CACjCA,EAAQ7qC,KAAKC,IAAIvL,KAAKsT,IAAI,eAAgB,GAAImpF,EAAWz8F,KAAKsT,IAAI,WAAY,IAElFtT,KAAKq7F,gBAAgBzqD,EAAUuF,QAGlC,CACDn2C,KAAKuT,IAAI,mBAAoBq9B,OAIzCttC,OAAOssB,eAAe8qE,EAAU5uF,UAAW,cAAe,CACtD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUw9B,EAAU8/C,EAAgBniF,GACvC,IAAI4hB,EAAQnwB,KACZ,IAAIwwF,EAAStgE,EAAOpkB,UAAU6kF,YAAYxnF,KAAKnJ,KAAM4wC,EAAU8/C,EAAgBniF,GAC/E,GAAIiiF,EAAQ,CACR,IAAI/hD,EAAS+hD,EAAOl9E,IAAI,UACxB,IAAI2iF,EAAOrlD,EAASt9B,IAAI,QACxB,GAAIm7B,EAAQ,CACRwnD,EAAK7+C,SAAS5xC,KAAKipC,GACnBwnD,EAAK9yF,GAAG,SAAS,WACbgtB,EAAM8iE,gBAAgBzC,MAE1ByF,EAAK9yF,GAAG,UAAU,WACdgtB,EAAM8iE,gBAAgBzC,OAIlC,OAAOA,KAGfltF,OAAOssB,eAAe8qE,EAAU5uF,UAAW,kBAAmB,CAC1D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUo9E,GACb,IAAI/hD,EAAS+hD,EAAOl9E,IAAI,UACxB,GAAIm7B,EAAQ,CACR,IAAImC,EAAWnC,EAAOmC,SACtB,IAAIo4B,EAAYwnB,EAAOl9E,IAAI,YAAa,IACxC,IAAI21D,EAAYunB,EAAOl9E,IAAI,YAAa,IACxC,IAAI2iF,EAAOrlD,EAASt9B,IAAI,QACxBm7B,EAAOl7B,IAAI,IAAK0iF,EAAK1yE,QAAUylD,GAC/Bv6B,EAAOl7B,IAAI,IAAK0iF,EAAKp+C,SAAWoxB,OAU5C3lE,OAAOssB,eAAe8qE,EAAU5uF,UAAW,gBAAiB,CACxD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUw9B,GACb,IAAIqlD,EAAOrlD,EAASt9B,IAAI,QACxB,GAAI2iF,IAASA,EAAKpjD,WAAY,CAC1BojD,EAAKlqC,YAUjBzoD,OAAOssB,eAAe8qE,EAAU5uF,UAAW,kBAAmB,CAC1D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUw9B,GACb,IAAIqlD,EAAOrlD,EAASt9B,IAAI,QACxB,GAAI2iF,EAAM,CACNA,EAAKjqC,cAIjB1oD,OAAOssB,eAAe8qE,EAAW,YAAa,CAC1ChlF,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,cAEX9P,OAAOssB,eAAe8qE,EAAW,aAAc,CAC3ChlF,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAOkuD,GAAOz3B,WAAW//B,OAAO,CAAC4wF,EAAU5wD,cAE/C,OAAO4wD,EA3wBE,CA4wBXp5B,IChxBF,IAAIw7B,GAAyB,SAAU5sE,GACnC1F,GAAUsyE,EAAS5sE,GACnB,SAAS4sE,IACL,IAAI3sE,EAAQD,IAAW,MAAQA,EAAOnkB,MAAM/L,KAAMgM,YAAchM,KAChEsD,OAAOssB,eAAeO,EAAO,OAAQ,CACjCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,YAEX9P,OAAOssB,eAAeO,EAAO,oBAAqB,CAC9Cza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO66B,GAAS6C,IAAI,MAExBxtC,OAAOssB,eAAeO,EAAO,iBAAkB,CAC3Cza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO2pF,KAAsBvD,KAAKwD,MAOtC15F,OAAOssB,eAAeO,EAAO,aAAc,CACvCza,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,IAAImhB,GAAa0Z,GAAS6C,IAAI,KAAK,WAAc,OAAOy8C,GAAiBgI,KAAKplE,EAAM+I,MAAO,CAC9F+S,UAAWmf,GAAiBj7B,EAAM8sE,WAAW34E,SAAShR,IAAI,YAAa,IAAK,CAAC6c,EAAMwqE,KAAM,WAC1F,CAACxqE,EAAM8sE,WAAW34E,gBAEzB,OAAO6L,EAEX7sB,OAAOssB,eAAektE,EAAQhxF,UAAW,YAAa,CAClD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH8c,EAAOpkB,UAAUw9B,UAAUngC,KAAKnJ,MAChCA,KAAK2nC,WAAW,SAAU,GAC1B3nC,KAAK2nC,WAAW,SAAU,MAGlCrkC,OAAOssB,eAAektE,EAAQhxF,UAAW,mBAAoB,CACzD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH8c,EAAOpkB,UAAU09E,iBAAiBrgF,KAAKnJ,MACvC,GAAIA,KAAKitC,QAAQ,mBAAoB,CACjC,IAAIiwD,OAAiB,EACrB,OAAQl9F,KAAKsT,IAAI,oBACb,IAAK,WACD4pF,EAAYF,GACZ,MACJ,IAAK,SACDE,EAAYC,GACZ,MACJ,IAAK,QACDD,EAAYE,GACZ,MACJ,IAAK,OACDF,EAAYG,GACZ,MACJ,IAAK,YACDH,EAAYI,GACZ,MAER,GAAIJ,EAAW,CACXl9F,KAAKu9F,eAAiBR,KAAsBvD,KAAK0D,GAErD,GAAIl9F,KAAKi7F,UAAW,CAChBj7F,KAAKu7F,aAAav7F,KAAKi7F,YAG/B,GAAIj7F,KAAKitC,QAAQ,qBAAuBjtC,KAAKitC,QAAQ,oBAAsBjtC,KAAKitC,QAAQ,mBAAqBjtC,KAAKitC,QAAQ,sBAAwBjtC,KAAKitC,QAAQ,qBAAuBjtC,KAAKitC,QAAQ,oBAAqB,CACpN,GAAIjtC,KAAKi7F,UAAW,CAChBj7F,KAAKu7F,aAAav7F,KAAKi7F,YAG/B,GAAIj7F,KAAK8zC,eAAe,WAAa9zC,KAAK8zC,eAAe,UAAW,CAChE,GAAI9zC,KAAKi7F,UAAW,CAChBj7F,KAAKw9F,kBAAkBx9F,KAAKi7F,gBAK5C33F,OAAOssB,eAAektE,EAAQhxF,UAAW,iBAAkB,CACvD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH,GAAIpT,KAAKi7F,UAAW,CAChB,IAAIwC,EAAgBz9F,KAAKu9F,eACzBE,EAAcjyF,KAAK,CAACxL,KAAKy4C,aAAcz4C,KAAK24C,gBAC5C,IAAIuG,EAAcl/C,KAAKsT,IAAI,mBAC3B,IAAI8sC,EAAepgD,KAAKsT,IAAI,oBAC5B,IAAIqsC,EAAa3/C,KAAKsT,IAAI,kBAC1B,IAAI+xC,EAAgBrlD,KAAKsT,IAAI,qBAC7B,IAAIomF,EAAe15F,KAAKsT,IAAI,oBAC5B,IAAIwmF,EAAe95F,KAAKsT,IAAI,oBAC5B,GAAIue,GAAeqtB,GAAc,CAC7Bu+C,EAAcv+C,YAAYA,GAE9B,GAAIrtB,GAAeuuB,GAAe,CAC9Bq9C,EAAcr9C,aAAaA,GAE/B,GAAIvuB,GAAe8tB,GAAa,CAC5B89C,EAAc99C,WAAWA,GAE7B,GAAI9tB,GAAewzB,GAAgB,CAC/Bo4C,EAAcp4C,cAAcA,GAEhC,GAAIxzB,GAAe6nE,GAAe,CAC9B+D,EAAc/D,aAAaA,GAE/B,GAAI7nE,GAAeioE,GAAe,CAC9B2D,EAAc3D,aAAaA,GAE/B2D,EAAcz9F,KAAKi7F,WACnBj7F,KAAKu7F,aAAav7F,KAAKi7F,eAInC33F,OAAOssB,eAAektE,EAAQhxF,UAAW,cAAe,CACpD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUw9B,GACb1gB,EAAOpkB,UAAU2vF,YAAYtyF,KAAKnJ,KAAM4wC,GACxC,IAAIqlD,EAAOrlD,EAASt9B,IAAI,QACxB,IAAIoqF,EAAY9sD,EAASt9B,IAAI,aAC7B,IAAIkoF,EAAgB5qD,EAASt9B,IAAI,mBACjC,IAAIqqF,EAAS39F,KAAK6oC,WAAW,SAAU,GACvC,IAAI+0D,EAAS59F,KAAK6oC,WAAW,SAAU,GACvC,IAAI0vD,EAAKiD,EAAcjD,GAAKoF,EAC5B,IAAI9xB,EAAK2vB,EAAc3vB,GAAK8xB,EAC5B,IAAInF,EAAKgD,EAAchD,GAAKoF,EAC5B,IAAI9xB,EAAK0vB,EAAc1vB,GAAK8xB,EAC5B,IAAI90F,EAAI+iE,EAAK0sB,EACb,IAAI13F,EAAIirE,EAAK0sB,EACb,IAAIv3D,EAAWjhC,KAAKsT,IAAI,oBAAqB,GAC7C,IAAIyuB,EAAS/hC,KAAKsT,IAAI,mBACtB2iF,EAAKrxD,QAAQ,CAAE5wB,IAAK,IAAKwY,GAAI+rE,EAAIt3D,SAAUA,EAAUc,OAAQA,IAC7Dk0D,EAAKrxD,QAAQ,CAAE5wB,IAAK,IAAKwY,GAAIgsE,EAAIv3D,SAAUA,EAAUc,OAAQA,IAC7Dk0D,EAAKrxD,QAAQ,CAAE5wB,IAAK,QAASwY,GAAI1jB,EAAGm4B,SAAUA,EAAUc,OAAQA,IAChEk0D,EAAKrxD,QAAQ,CAAE5wB,IAAK,SAAUwY,GAAI3rB,EAAGogC,SAAUA,EAAUc,OAAQA,IACjE,GAAI27D,EAAW,CACX,IAAIriD,EAAOzK,EAASt9B,IAAI,QACxBoqF,EAAU94D,QAAQ,CAAE5wB,IAAK,QAASwY,GAAI1jB,EAAGm4B,SAAUA,EAAUc,OAAQA,IACrE27D,EAAU94D,QAAQ,CAAE5wB,IAAK,SAAUwY,GAAI3rB,EAAGogC,SAAUA,EAAUc,OAAQA,IACtE27D,EAAU/vC,YAAY,OAAQtS,GAC9BqiD,EAAU/vC,YAAY,SAAUtS,OAI5C/3C,OAAOssB,eAAektE,EAAQhxF,UAAW,oBAAqB,CAC1D4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUooF,GACb,IAAIrrE,EAAQnwB,KACZ,IAAI4wC,EAAW4qD,EAAcv2F,KAAK2rC,SAClC,GAAIA,EAAU,CACV,IAAIqlD,EAAOrlD,EAASt9B,IAAI,QACxB,IAAIoqF,EAAY9sD,EAASt9B,IAAI,aAC7B,IAAIqqF,EAAS39F,KAAK6oC,WAAW,SAAU,GACvC,IAAI+0D,EAAS59F,KAAK6oC,WAAW,SAAU,GACvC,IAAI0vD,EAAKiD,EAAcjD,GAAKoF,EAC5B,IAAI9xB,EAAK2vB,EAAc3vB,GAAK8xB,EAC5B,IAAInF,EAAKgD,EAAchD,GAAKoF,EAC5B,IAAI9xB,EAAK0vB,EAAc1vB,GAAK8xB,EAC5B,IAAI90F,EAAI+iE,EAAK0sB,EACb,IAAI13F,EAAIirE,EAAK0sB,EACbvC,EAAK9hE,OAAO,CAAEvmB,EAAG2qF,EAAI50F,EAAG60F,EAAIj1E,MAAOza,EAAG+uC,OAAQh3C,IAC9C68F,EAAUvpE,OAAO,CAAE5Q,MAAOza,EAAG+uC,OAAQh3C,IACrC,IAAI66F,EAAoBF,EAAcpkD,SACtC,GAAIskD,EAAmB,CACnBtrE,GAAYsrE,GAAmB,SAAUC,GACrCxrE,EAAMqtE,kBAAkB7B,WAS5Cr4F,OAAOssB,eAAektE,EAAQhxF,UAAW,WAAY,CACjD4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUw9B,GACb,IAAIqlD,EAAO/lE,EAAOpkB,UAAUiwF,SAAS5yF,KAAKnJ,KAAM4wC,GAChD,IAAI8sD,EAAYzH,EAAK7+C,SAASyD,UAAU76C,KAAKi9F,WAAWzoE,OAAQ,GAChEyhE,EAAKtuD,WAAW,gBAAiB+1D,GACjC9sD,EAASxM,OAAO,YAAas5D,GAC7B,IAAIhyE,EAAQklB,EAASt9B,IAAI,SACzBoqF,EAAUv6F,GAAG,SAAS,WAClBuoB,EAAMic,WAAW,WAAY+1D,EAAUn6E,YAE3Cm6E,EAAUv6F,GAAG,UAAU,WACnBuoB,EAAMic,WAAW,YAAa+1D,EAAU7lD,aAE5C,OAAOo+C,KAGf3yF,OAAOssB,eAAektE,EAAQhxF,UAAW,QAAS,CAC9C4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,SAAUw9B,GACb,IAAI4qD,EAAgB5qD,EAASt9B,IAAI,mBACjC,IAAIuqF,EAAmB79F,KAAKsT,IAAI,mBAAoB,GACpD,IAAIilF,EAAKiD,EAAcjD,GAAKsF,EAC5B,IAAIhyB,EAAK2vB,EAAc3vB,GAAKgyB,EAC5B,IAAIrF,EAAKgD,EAAchD,GAAKqF,EAC5B,IAAI/xB,EAAK0vB,EAAc1vB,GAAK+xB,EAC5B,IAAIF,GAAU39F,KAAKy4C,aAAeolD,EAAmB,IAAMhyB,EAAK0sB,GAChE,IAAIqF,GAAU59F,KAAK24C,cAAgBklD,EAAmB,IAAM/xB,EAAK0sB,GACjE,IAAIz2D,EAAS/hC,KAAKsT,IAAI,mBACtB,IAAI2tB,EAAWjhC,KAAKsT,IAAI,oBAAqB,GAC7CtT,KAAK89F,eAAe,CAAE9pF,IAAK,SAAUwY,GAAImxE,EAAQ18D,SAAUA,EAAUc,OAAQA,IAC7E/hC,KAAK89F,eAAe,CAAE9pF,IAAK,SAAUwY,GAAIoxE,EAAQ38D,SAAUA,EAAUc,OAAQA,IAC7E/hC,KAAK66F,eAAej2D,QAAQ,CAAE5wB,IAAK,IAAKwY,GAAIqxE,EAAmBtF,EAAKoF,EAAQ18D,SAAUA,EAAUc,OAAQA,IACxG/hC,KAAK66F,eAAej2D,QAAQ,CAAE5wB,IAAK,IAAKwY,GAAIqxE,EAAmBrF,EAAKoF,EAAQ38D,SAAUA,EAAUc,OAAQA,OAGhHz+B,OAAOssB,eAAektE,EAAS,YAAa,CACxCpnF,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,YAEX9P,OAAOssB,eAAektE,EAAS,aAAc,CACzCpnF,WAAY,KACZC,aAAc,KACdka,SAAU,KACVzc,MAAOsnF,GAAU7wD,WAAW//B,OAAO,CAACgzF,EAAQhzD,cAEhD,OAAOgzD,EApPA,CAqPTpC,IC/PF,IAAIqD,GAA+B,SAAU7tE,GACzC1F,GAAUuzE,EAAe7tE,GACzB,SAAS6tE,IACL,OAAO7tE,IAAW,MAAQA,EAAOnkB,MAAM/L,KAAMgM,YAAchM,KAE/DsD,OAAOssB,eAAemuE,EAAcjyF,UAAW,oBAAqB,CAChE4J,WAAY,MACZC,aAAc,KACdka,SAAU,KACVzc,MAAO,WACH8c,EAAOpkB,UAAU+4D,kBAAkB17D,KAAKnJ,MACxCA,KAAK4sC,KAAK,aAAazY,OAAO,CAC1B2yC,sBAAuB,MAE3B9mE,KAAK4sC,KAAK,aAAar5B,IAAI,oBAAqB,KAChDvT,KAAK4sC,KAAK,aAAar5B,IAAI,oBAAqB,KAChDvT,KAAK4sC,KAAK,WAAWr5B,IAAI,oBAAqB,KAC9CvT,KAAK4sC,KAAK,YAAYr5B,IAAI,oBAAqB,KAC/CvT,KAAK4sC,KAAK,YAAYr5B,IAAI,gBAAiB,KAC3CvT,KAAK4sC,KAAK,UAAUzY,OAAO,CACvBsQ,uBAAwB,MAE5BzkC,KAAK4sC,KAAK,UAAU13B,OAAOtG,OAAO,UAAW,CAAE61B,uBAAwB,MACvEzkC,KAAK4sC,KAAK,UAAW,CAAC,SAASzY,OAAO,CAClCq5B,kBAAmB,MAEvBxtD,KAAK4sC,KAAK,aAAar5B,IAAI,oBAAqB,QAGxD,OAAOwqF,EA7BM,CA8Bfn5B,ICnCF,MAAMo5B,GAA4B,2DCWrBC,GAAsB,MALnCnvF,YAAAqP,aAOUne,KAAA0Q,WAA2B,GAGnC1Q,KAAAg4B,KAAO,KAEPlpB,mBACE9O,KAAKk+F,sBAEPpvF,sBACE9O,KAAKm+F,gBAEPrvF,sBAEE9O,KAAKg4B,KAAOomE,GAASttD,IAAK9wC,KAAKq+F,SAC/Br+F,KAAKg4B,KAAKwwD,UAAU,CAClB8V,GAAmBxtD,IAAI9wC,KAAKg4B,QAE9Bh4B,KAAKm+F,gBAECrvF,gBACN,IAAI9O,KAAKg4B,KAAM,CACb,OAEF,IAAItD,EAAY10B,KAAKg4B,KAAKtD,UAAU0iB,SAAS5xC,KAC3C+4F,GAAcztD,IAAI9wC,KAAKg4B,KAAM,CAC3BzU,MAAOi7E,GAAY,KACnB3mD,OAAQ2mD,GAAY,KACpBp5E,OAAQplB,KAAKg4B,KAAKstC,kBAGtB,IAAIsrB,EAASl8D,EAAU0iB,SAAS5xC,KAC9Bi5F,GAAqB3tD,IAAI9wC,KAAKg4B,KAAM,CAClCo8D,UAAW,EACXM,QAAS,EACTL,aAAc,EACdqK,WAAY,SACZC,cAAe,OACfC,eAAgB,cAMpB,MAAM35F,EAAOjF,KAAK6+F,qBAAqB7+F,KAAK0Q,YAM5CkgF,EAAO3rF,KAAKkvB,OAAOlvB,GACnB2rF,EAAOr9E,IAAI,mBAAoBq9E,EAAO7B,UAAU,IAGhD6B,EAAO4E,OAAOlxE,SAAS6P,OAAO,CAC5BpkB,KAAM,8BACNs4D,SAAU,KAIZ3zC,EAAU0iB,SAASgZ,QACjB0uC,GAA2BhuD,IAAI9wC,KAAKg4B,KAAM,CACxC44D,OAAQA,KAMd9hF,qBAAqB4B,GACnB,MAAMnN,EAAImN,EAAWvB,QAAO,CAACs7D,EAAK95D,aAChC,MAAML,EAAWK,EAAUL,SAASnB,QAAO,CAAC4vF,EAAM3tF,KAChD2tF,EAAKv5F,KAAIlC,OAAAoO,OAAApO,OAAAoO,OAAA,GACJN,GAAM,CACTsB,OAAQpD,OAAO8B,EAAOsB,WAExB,OAAOqsF,IACN,IAEHt0B,EAAIjlE,KAAIlC,OAAAoO,OAAApO,OAAAoO,OAAA,GACHf,GAAS,CACZ5I,KAAM,GAAG4I,EAAU5I,WAASiW,GAAAjN,EAAAJ,EAAUH,WAAO,MAAAO,SAAA,OAAA,EAAAA,EAAEG,MAAM,MAAE,MAAA8M,SAAA,OAAA,EAAAA,EAAEjW,OAAQ,aACjEuI,SAAAA,KAEF,OAAOm6D,IACN,IACH,MAAO,CAAC,CACN1iE,KAAM,aACNuI,SAAU/M,IAIduL,SAGE,OACEjO,EAACge,EAAI,KACHhe,EAAA,wBAAA,CAAuB4e,MAAM,KAC7B5e,EAAA,OAAA,CAAMue,KAAK,SAAO,eAGlBve,EAAA,MAAA,CAAKue,KAAK,UAAQ,wBAClBve,EAAA,MAAA,CAAKue,KAAK,WACVve,EAAA,MAAA,CAAKqB,GAAG,QAAQghB,IAAKb,GAAMriB,KAAKq+F,QAAUh8E","sourcesContent":["/* @license\nPapa Parse\nv5.3.2\nhttps://github.com/mholt/PapaParse\nLicense: MIT\n*/\n!function(e,t){\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof module&&\"undefined\"!=typeof exports?module.exports=t():e.Papa=t()}(this,function s(){\"use strict\";var f=\"undefined\"!=typeof self?self:\"undefined\"!=typeof window?window:void 0!==f?f:{};var n=!f.document&&!!f.postMessage,o=n&&/blob:/i.test((f.location||{}).protocol),a={},h=0,b={parse:function(e,t){var i=(t=t||{}).dynamicTyping||!1;M(i)&&(t.dynamicTypingFunction=i,i={});if(t.dynamicTyping=i,t.transform=!!M(t.transform)&&t.transform,t.worker&&b.WORKERS_SUPPORTED){var r=function(){if(!b.WORKERS_SUPPORTED)return!1;var e=(i=f.URL||f.webkitURL||null,r=s.toString(),b.BLOB_URL||(b.BLOB_URL=i.createObjectURL(new Blob([\"(\",r,\")();\"],{type:\"text/javascript\"})))),t=new f.Worker(e);var i,r;return t.onmessage=_,t.id=h++,a[t.id]=t}();return r.userStep=t.step,r.userChunk=t.chunk,r.userComplete=t.complete,r.userError=t.error,t.step=M(t.step),t.chunk=M(t.chunk),t.complete=M(t.complete),t.error=M(t.error),delete t.worker,void r.postMessage({input:e,config:t,workerId:r.id})}var n=null;b.NODE_STREAM_INPUT,\"string\"==typeof e?n=t.download?new l(t):new p(t):!0===e.readable&&M(e.read)&&M(e.on)?n=new g(t):(f.File&&e instanceof File||e instanceof Object)&&(n=new c(t));return n.stream(e)},unparse:function(e,t){var n=!1,_=!0,m=\",\",y=\"\\r\\n\",s='\"',a=s+s,i=!1,r=null,o=!1;!function(){if(\"object\"!=typeof t)return;\"string\"!=typeof t.delimiter||b.BAD_DELIMITERS.filter(function(e){return-1!==t.delimiter.indexOf(e)}).length||(m=t.delimiter);(\"boolean\"==typeof t.quotes||\"function\"==typeof t.quotes||Array.isArray(t.quotes))&&(n=t.quotes);\"boolean\"!=typeof t.skipEmptyLines&&\"string\"!=typeof t.skipEmptyLines||(i=t.skipEmptyLines);\"string\"==typeof t.newline&&(y=t.newline);\"string\"==typeof t.quoteChar&&(s=t.quoteChar);\"boolean\"==typeof t.header&&(_=t.header);if(Array.isArray(t.columns)){if(0===t.columns.length)throw new Error(\"Option columns is empty\");r=t.columns}void 0!==t.escapeChar&&(a=t.escapeChar+s);(\"boolean\"==typeof t.escapeFormulae||t.escapeFormulae instanceof RegExp)&&(o=t.escapeFormulae instanceof RegExp?t.escapeFormulae:/^[=+\\-@\\t\\r].*$/)}();var h=new RegExp(j(s),\"g\");\"string\"==typeof e&&(e=JSON.parse(e));if(Array.isArray(e)){if(!e.length||Array.isArray(e[0]))return u(null,e,i);if(\"object\"==typeof e[0])return u(r||Object.keys(e[0]),e,i)}else if(\"object\"==typeof e)return\"string\"==typeof e.data&&(e.data=JSON.parse(e.data)),Array.isArray(e.data)&&(e.fields||(e.fields=e.meta&&e.meta.fields||r),e.fields||(e.fields=Array.isArray(e.data[0])?e.fields:\"object\"==typeof e.data[0]?Object.keys(e.data[0]):[]),Array.isArray(e.data[0])||\"object\"==typeof e.data[0]||(e.data=[e.data])),u(e.fields||[],e.data||[],i);throw new Error(\"Unable to serialize unrecognized input\");function u(e,t,i){var r=\"\";\"string\"==typeof e&&(e=JSON.parse(e)),\"string\"==typeof t&&(t=JSON.parse(t));var n=Array.isArray(e)&&0<e.length,s=!Array.isArray(t[0]);if(n&&_){for(var a=0;a<e.length;a++)0<a&&(r+=m),r+=v(e[a],a);0<t.length&&(r+=y)}for(var o=0;o<t.length;o++){var h=n?e.length:t[o].length,u=!1,f=n?0===Object.keys(t[o]).length:0===t[o].length;if(i&&!n&&(u=\"greedy\"===i?\"\"===t[o].join(\"\").trim():1===t[o].length&&0===t[o][0].length),\"greedy\"===i&&n){for(var d=[],l=0;l<h;l++){var c=s?e[l]:l;d.push(t[o][c])}u=\"\"===d.join(\"\").trim()}if(!u){for(var p=0;p<h;p++){0<p&&!f&&(r+=m);var g=n&&s?e[p]:p;r+=v(t[o][g],p)}o<t.length-1&&(!i||0<h&&!f)&&(r+=y)}}return r}function v(e,t){if(null==e)return\"\";if(e.constructor===Date)return JSON.stringify(e).slice(1,25);var i=!1;o&&\"string\"==typeof e&&o.test(e)&&(e=\"'\"+e,i=!0);var r=e.toString().replace(h,a);return(i=i||!0===n||\"function\"==typeof n&&n(e,t)||Array.isArray(n)&&n[t]||function(e,t){for(var i=0;i<t.length;i++)if(-1<e.indexOf(t[i]))return!0;return!1}(r,b.BAD_DELIMITERS)||-1<r.indexOf(m)||\" \"===r.charAt(0)||\" \"===r.charAt(r.length-1))?s+r+s:r}}};if(b.RECORD_SEP=String.fromCharCode(30),b.UNIT_SEP=String.fromCharCode(31),b.BYTE_ORDER_MARK=\"\\ufeff\",b.BAD_DELIMITERS=[\"\\r\",\"\\n\",'\"',b.BYTE_ORDER_MARK],b.WORKERS_SUPPORTED=!n&&!!f.Worker,b.NODE_STREAM_INPUT=1,b.LocalChunkSize=10485760,b.RemoteChunkSize=5242880,b.DefaultDelimiter=\",\",b.Parser=E,b.ParserHandle=i,b.NetworkStreamer=l,b.FileStreamer=c,b.StringStreamer=p,b.ReadableStreamStreamer=g,f.jQuery){var d=f.jQuery;d.fn.parse=function(o){var i=o.config||{},h=[];return this.each(function(e){if(!(\"INPUT\"===d(this).prop(\"tagName\").toUpperCase()&&\"file\"===d(this).attr(\"type\").toLowerCase()&&f.FileReader)||!this.files||0===this.files.length)return!0;for(var t=0;t<this.files.length;t++)h.push({file:this.files[t],inputElem:this,instanceConfig:d.extend({},i)})}),e(),this;function e(){if(0!==h.length){var e,t,i,r,n=h[0];if(M(o.before)){var s=o.before(n.file,n.inputElem);if(\"object\"==typeof s){if(\"abort\"===s.action)return e=\"AbortError\",t=n.file,i=n.inputElem,r=s.reason,void(M(o.error)&&o.error({name:e},t,i,r));if(\"skip\"===s.action)return void u();\"object\"==typeof s.config&&(n.instanceConfig=d.extend(n.instanceConfig,s.config))}else if(\"skip\"===s)return void u()}var a=n.instanceConfig.complete;n.instanceConfig.complete=function(e){M(a)&&a(e,n.file,n.inputElem),u()},b.parse(n.file,n.instanceConfig)}else M(o.complete)&&o.complete()}function u(){h.splice(0,1),e()}}}function u(e){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine=\"\",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(e){var t=w(e);t.chunkSize=parseInt(t.chunkSize),e.step||e.chunk||(t.chunkSize=null);this._handle=new i(t),(this._handle.streamer=this)._config=t}.call(this,e),this.parseChunk=function(e,t){if(this.isFirstChunk&&M(this._config.beforeFirstChunk)){var i=this._config.beforeFirstChunk(e);void 0!==i&&(e=i)}this.isFirstChunk=!1,this._halted=!1;var r=this._partialLine+e;this._partialLine=\"\";var n=this._handle.parse(r,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var s=n.meta.cursor;this._finished||(this._partialLine=r.substring(s-this._baseIndex),this._baseIndex=s),n&&n.data&&(this._rowCount+=n.data.length);var a=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(o)f.postMessage({results:n,workerId:b.WORKER_ID,finished:a});else if(M(this._config.chunk)&&!t){if(this._config.chunk(n,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);n=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(n.data),this._completeResults.errors=this._completeResults.errors.concat(n.errors),this._completeResults.meta=n.meta),this._completed||!a||!M(this._config.complete)||n&&n.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),a||n&&n.meta.paused||this._nextChunk(),n}this._halted=!0},this._sendError=function(e){M(this._config.error)?this._config.error(e):o&&this._config.error&&f.postMessage({workerId:b.WORKER_ID,error:e,finished:!1})}}function l(e){var r;(e=e||{}).chunkSize||(e.chunkSize=b.RemoteChunkSize),u.call(this,e),this._nextChunk=n?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(e){this._input=e,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(r=new XMLHttpRequest,this._config.withCredentials&&(r.withCredentials=this._config.withCredentials),n||(r.onload=v(this._chunkLoaded,this),r.onerror=v(this._chunkError,this)),r.open(this._config.downloadRequestBody?\"POST\":\"GET\",this._input,!n),this._config.downloadRequestHeaders){var e=this._config.downloadRequestHeaders;for(var t in e)r.setRequestHeader(t,e[t])}if(this._config.chunkSize){var i=this._start+this._config.chunkSize-1;r.setRequestHeader(\"Range\",\"bytes=\"+this._start+\"-\"+i)}try{r.send(this._config.downloadRequestBody)}catch(e){this._chunkError(e.message)}n&&0===r.status&&this._chunkError()}},this._chunkLoaded=function(){4===r.readyState&&(r.status<200||400<=r.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:r.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(e){var t=e.getResponseHeader(\"Content-Range\");if(null===t)return-1;return parseInt(t.substring(t.lastIndexOf(\"/\")+1))}(r),this.parseChunk(r.responseText)))},this._chunkError=function(e){var t=r.statusText||e;this._sendError(new Error(t))}}function c(e){var r,n;(e=e||{}).chunkSize||(e.chunkSize=b.LocalChunkSize),u.call(this,e);var s=\"undefined\"!=typeof FileReader;this.stream=function(e){this._input=e,n=e.slice||e.webkitSlice||e.mozSlice,s?((r=new FileReader).onload=v(this._chunkLoaded,this),r.onerror=v(this._chunkError,this)):r=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var e=this._input;if(this._config.chunkSize){var t=Math.min(this._start+this._config.chunkSize,this._input.size);e=n.call(e,this._start,t)}var i=r.readAsText(e,this._config.encoding);s||this._chunkLoaded({target:{result:i}})},this._chunkLoaded=function(e){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(e.target.result)},this._chunkError=function(){this._sendError(r.error)}}function p(e){var i;u.call(this,e=e||{}),this.stream=function(e){return i=e,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var e,t=this._config.chunkSize;return t?(e=i.substring(0,t),i=i.substring(t)):(e=i,i=\"\"),this._finished=!i,this.parseChunk(e)}}}function g(e){u.call(this,e=e||{});var t=[],i=!0,r=!1;this.pause=function(){u.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){u.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(e){this._input=e,this._input.on(\"data\",this._streamData),this._input.on(\"end\",this._streamEnd),this._input.on(\"error\",this._streamError)},this._checkIsFinished=function(){r&&1===t.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),t.length?this.parseChunk(t.shift()):i=!0},this._streamData=v(function(e){try{t.push(\"string\"==typeof e?e:e.toString(this._config.encoding)),i&&(i=!1,this._checkIsFinished(),this.parseChunk(t.shift()))}catch(e){this._streamError(e)}},this),this._streamError=v(function(e){this._streamCleanUp(),this._sendError(e)},this),this._streamEnd=v(function(){this._streamCleanUp(),r=!0,this._streamData(\"\")},this),this._streamCleanUp=v(function(){this._input.removeListener(\"data\",this._streamData),this._input.removeListener(\"end\",this._streamEnd),this._input.removeListener(\"error\",this._streamError)},this)}function i(m){var a,o,h,r=Math.pow(2,53),n=-r,s=/^\\s*-?(\\d+\\.?|\\.\\d+|\\d+\\.\\d+)([eE][-+]?\\d+)?\\s*$/,u=/^(\\d{4}-[01]\\d-[0-3]\\dT[0-2]\\d:[0-5]\\d:[0-5]\\d\\.\\d+([+-][0-2]\\d:[0-5]\\d|Z))|(\\d{4}-[01]\\d-[0-3]\\dT[0-2]\\d:[0-5]\\d:[0-5]\\d([+-][0-2]\\d:[0-5]\\d|Z))|(\\d{4}-[01]\\d-[0-3]\\dT[0-2]\\d:[0-5]\\d([+-][0-2]\\d:[0-5]\\d|Z))$/,t=this,i=0,f=0,d=!1,e=!1,l=[],c={data:[],errors:[],meta:{}};if(M(m.step)){var p=m.step;m.step=function(e){if(c=e,_())g();else{if(g(),0===c.data.length)return;i+=e.data.length,m.preview&&i>m.preview?o.abort():(c.data=c.data[0],p(c,t))}}}function y(e){return\"greedy\"===m.skipEmptyLines?\"\"===e.join(\"\").trim():1===e.length&&0===e[0].length}function g(){return c&&h&&(k(\"Delimiter\",\"UndetectableDelimiter\",\"Unable to auto-detect delimiting character; defaulted to '\"+b.DefaultDelimiter+\"'\"),h=!1),m.skipEmptyLines&&(c.data=c.data.filter(function(e){return!y(e)})),_()&&function(){if(!c)return;function e(e,t){M(m.transformHeader)&&(e=m.transformHeader(e,t)),l.push(e)}if(Array.isArray(c.data[0])){for(var t=0;_()&&t<c.data.length;t++)c.data[t].forEach(e);c.data.splice(0,1)}else c.data.forEach(e)}(),function(){if(!c||!m.header&&!m.dynamicTyping&&!m.transform)return c;function e(e,t){var i,r=m.header?{}:[];for(i=0;i<e.length;i++){var n=i,s=e[i];m.header&&(n=i>=l.length?\"__parsed_extra\":l[i]),m.transform&&(s=m.transform(s,n)),s=v(n,s),\"__parsed_extra\"===n?(r[n]=r[n]||[],r[n].push(s)):r[n]=s}return m.header&&(i>l.length?k(\"FieldMismatch\",\"TooManyFields\",\"Too many fields: expected \"+l.length+\" fields but parsed \"+i,f+t):i<l.length&&k(\"FieldMismatch\",\"TooFewFields\",\"Too few fields: expected \"+l.length+\" fields but parsed \"+i,f+t)),r}var t=1;!c.data.length||Array.isArray(c.data[0])?(c.data=c.data.map(e),t=c.data.length):c.data=e(c.data,0);m.header&&c.meta&&(c.meta.fields=l);return f+=t,c}()}function _(){return m.header&&0===l.length}function v(e,t){return i=e,m.dynamicTypingFunction&&void 0===m.dynamicTyping[i]&&(m.dynamicTyping[i]=m.dynamicTypingFunction(i)),!0===(m.dynamicTyping[i]||m.dynamicTyping)?\"true\"===t||\"TRUE\"===t||\"false\"!==t&&\"FALSE\"!==t&&(function(e){if(s.test(e)){var t=parseFloat(e);if(n<t&&t<r)return!0}return!1}(t)?parseFloat(t):u.test(t)?new Date(t):\"\"===t?null:t):t;var i}function k(e,t,i,r){var n={type:e,code:t,message:i};void 0!==r&&(n.row=r),c.errors.push(n)}this.parse=function(e,t,i){var r=m.quoteChar||'\"';if(m.newline||(m.newline=function(e,t){e=e.substring(0,1048576);var i=new RegExp(j(t)+\"([^]*?)\"+j(t),\"gm\"),r=(e=e.replace(i,\"\")).split(\"\\r\"),n=e.split(\"\\n\"),s=1<n.length&&n[0].length<r[0].length;if(1===r.length||s)return\"\\n\";for(var a=0,o=0;o<r.length;o++)\"\\n\"===r[o][0]&&a++;return a>=r.length/2?\"\\r\\n\":\"\\r\"}(e,r)),h=!1,m.delimiter)M(m.delimiter)&&(m.delimiter=m.delimiter(e),c.meta.delimiter=m.delimiter);else{var n=function(e,t,i,r,n){var s,a,o,h;n=n||[\",\",\"\\t\",\"|\",\";\",b.RECORD_SEP,b.UNIT_SEP];for(var u=0;u<n.length;u++){var f=n[u],d=0,l=0,c=0;o=void 0;for(var p=new E({comments:r,delimiter:f,newline:t,preview:10}).parse(e),g=0;g<p.data.length;g++)if(i&&y(p.data[g]))c++;else{var _=p.data[g].length;l+=_,void 0!==o?0<_&&(d+=Math.abs(_-o),o=_):o=_}0<p.data.length&&(l/=p.data.length-c),(void 0===a||d<=a)&&(void 0===h||h<l)&&1.99<l&&(a=d,s=f,h=l)}return{successful:!!(m.delimiter=s),bestDelimiter:s}}(e,m.newline,m.skipEmptyLines,m.comments,m.delimitersToGuess);n.successful?m.delimiter=n.bestDelimiter:(h=!0,m.delimiter=b.DefaultDelimiter),c.meta.delimiter=m.delimiter}var s=w(m);return m.preview&&m.header&&s.preview++,a=e,o=new E(s),c=o.parse(a,t,i),g(),d?{meta:{paused:!0}}:c||{meta:{paused:!1}}},this.paused=function(){return d},this.pause=function(){d=!0,o.abort(),a=M(m.chunk)?\"\":a.substring(o.getCharIndex())},this.resume=function(){t.streamer._halted?(d=!1,t.streamer.parseChunk(a,!0)):setTimeout(t.resume,3)},this.aborted=function(){return e},this.abort=function(){e=!0,o.abort(),c.meta.aborted=!0,M(m.complete)&&m.complete(c),a=\"\"}}function j(e){return e.replace(/[.*+?^${}()|[\\]\\\\]/g,\"\\\\$&\")}function E(e){var S,O=(e=e||{}).delimiter,x=e.newline,I=e.comments,T=e.step,D=e.preview,A=e.fastMode,L=S=void 0===e.quoteChar||null===e.quoteChar?'\"':e.quoteChar;if(void 0!==e.escapeChar&&(L=e.escapeChar),(\"string\"!=typeof O||-1<b.BAD_DELIMITERS.indexOf(O))&&(O=\",\"),I===O)throw new Error(\"Comment character same as delimiter\");!0===I?I=\"#\":(\"string\"!=typeof I||-1<b.BAD_DELIMITERS.indexOf(I))&&(I=!1),\"\\n\"!==x&&\"\\r\"!==x&&\"\\r\\n\"!==x&&(x=\"\\n\");var F=0,z=!1;this.parse=function(r,t,i){if(\"string\"!=typeof r)throw new Error(\"Input must be a string\");var n=r.length,e=O.length,s=x.length,a=I.length,o=M(T),h=[],u=[],f=[],d=F=0;if(!r)return C();if(A||!1!==A&&-1===r.indexOf(S)){for(var l=r.split(x),c=0;c<l.length;c++){if(f=l[c],F+=f.length,c!==l.length-1)F+=x.length;else if(i)return C();if(!I||f.substring(0,a)!==I){if(o){if(h=[],k(f.split(O)),R(),z)return C()}else k(f.split(O));if(D&&D<=c)return h=h.slice(0,D),C(!0)}}return C()}for(var p=r.indexOf(O,F),g=r.indexOf(x,F),_=new RegExp(j(L)+j(S),\"g\"),m=r.indexOf(S,F);;)if(r[F]!==S)if(I&&0===f.length&&r.substring(F,F+a)===I){if(-1===g)return C();F=g+s,g=r.indexOf(x,F),p=r.indexOf(O,F)}else if(-1!==p&&(p<g||-1===g))f.push(r.substring(F,p)),F=p+e,p=r.indexOf(O,F);else{if(-1===g)break;if(f.push(r.substring(F,g)),w(g+s),o&&(R(),z))return C();if(D&&h.length>=D)return C(!0)}else for(m=F,F++;;){if(-1===(m=r.indexOf(S,m+1)))return i||u.push({type:\"Quotes\",code:\"MissingQuotes\",message:\"Quoted field unterminated\",row:h.length,index:F}),E();if(m===n-1)return E(r.substring(F,m).replace(_,S));if(S!==L||r[m+1]!==L){if(S===L||0===m||r[m-1]!==L){-1!==p&&p<m+1&&(p=r.indexOf(O,m+1)),-1!==g&&g<m+1&&(g=r.indexOf(x,m+1));var y=b(-1===g?p:Math.min(p,g));if(r.substr(m+1+y,e)===O){f.push(r.substring(F,m).replace(_,S)),r[F=m+1+y+e]!==S&&(m=r.indexOf(S,F)),p=r.indexOf(O,F),g=r.indexOf(x,F);break}var v=b(g);if(r.substring(m+1+v,m+1+v+s)===x){if(f.push(r.substring(F,m).replace(_,S)),w(m+1+v+s),p=r.indexOf(O,F),m=r.indexOf(S,F),o&&(R(),z))return C();if(D&&h.length>=D)return C(!0);break}u.push({type:\"Quotes\",code:\"InvalidQuotes\",message:\"Trailing quote on quoted field is malformed\",row:h.length,index:F}),m++}}else m++}return E();function k(e){h.push(e),d=F}function b(e){var t=0;if(-1!==e){var i=r.substring(m+1,e);i&&\"\"===i.trim()&&(t=i.length)}return t}function E(e){return i||(void 0===e&&(e=r.substring(F)),f.push(e),F=n,k(f),o&&R()),C()}function w(e){F=e,k(f),f=[],g=r.indexOf(x,F)}function C(e){return{data:h,errors:u,meta:{delimiter:O,linebreak:x,aborted:z,truncated:!!e,cursor:d+(t||0)}}}function R(){T(C()),h=[],u=[]}},this.abort=function(){z=!0},this.getCharIndex=function(){return F}}function _(e){var t=e.data,i=a[t.workerId],r=!1;if(t.error)i.userError(t.error,t.file);else if(t.results&&t.results.data){var n={abort:function(){r=!0,m(t.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:y,resume:y};if(M(i.userStep)){for(var s=0;s<t.results.data.length&&(i.userStep({data:t.results.data[s],errors:t.results.errors,meta:t.results.meta},n),!r);s++);delete t.results}else M(i.userChunk)&&(i.userChunk(t.results,n,t.file),delete t.results)}t.finished&&!r&&m(t.workerId,t.results)}function m(e,t){var i=a[e];M(i.userComplete)&&i.userComplete(t),i.terminate(),delete a[e]}function y(){throw new Error(\"Not implemented.\")}function w(e){if(\"object\"!=typeof e||null===e)return e;var t=Array.isArray(e)?[]:{};for(var i in e)t[i]=w(e[i]);return t}function v(e,t){return function(){e.apply(t,arguments)}}function M(e){return\"function\"==typeof e}return o&&(f.onmessage=function(e){var t=e.data;void 0===b.WORKER_ID&&t&&(b.WORKER_ID=t.workerId);if(\"string\"==typeof t.input)f.postMessage({workerId:b.WORKER_ID,results:b.parse(t.input,t.config),finished:!0});else if(f.File&&t.input instanceof File||t.input instanceof Object){var i=b.parse(t.input,t.config);i&&f.postMessage({workerId:b.WORKER_ID,results:i,finished:!0})}}),(l.prototype=Object.create(u.prototype)).constructor=l,(c.prototype=Object.create(u.prototype)).constructor=c,(p.prototype=Object.create(p.prototype)).constructor=p,(g.prototype=Object.create(u.prototype)).constructor=g,b});","const a=a=>{a=1831565813+(a|=0)|0;let e=Math.imul(a^a>>>15,1|a);return e=e+Math.imul(e^e>>>7,61|e)^e,((e^e>>>14)>>>0)/4294967296};class e{constructor(a){this.dictionaries=void 0,this.length=void 0,this.separator=void 0,this.style=void 0,this.seed=void 0;const{length:e,separator:i,dictionaries:n,style:l,seed:r}=a;this.dictionaries=n,this.separator=i,this.length=e,this.style=l,this.seed=r}generate(){if(!this.dictionaries)throw new Error('Cannot find any dictionary. Please provide at least one, or leave the \"dictionary\" field empty in the config object');if(this.length<=0)throw new Error(\"Invalid length provided\");if(this.length>this.dictionaries.length)throw new Error(`The length cannot be bigger than the number of dictionaries.\\nLength provided: ${this.length}. Number of dictionaries provided: ${this.dictionaries.length}`);let e=this.seed;return this.dictionaries.slice(0,this.length).reduce((i,n)=>{let l;e?(l=(e=>{if(\"string\"==typeof e){const i=e.split(\"\").map(a=>a.charCodeAt(0)).reduce((a,e)=>a+e,1),n=Math.floor(Number(i));return a(n)}return a(e)})(e),e=4294967296*l):l=Math.random();let r=n[Math.floor(l*n.length)]||\"\";if(\"lowerCase\"===this.style)r=r.toLowerCase();else if(\"capital\"===this.style){const[a,...e]=r.split(\"\");r=a.toUpperCase()+e.join(\"\")}else\"upperCase\"===this.style&&(r=r.toUpperCase());return i?`${i}${this.separator}${r}`:`${r}`},\"\")}}const i={separator:\"_\",dictionaries:[]},n=a=>{const n=[...a&&a.dictionaries||i.dictionaries],l={...i,...a,length:a&&a.length||n.length,dictionaries:n};if(!a||!a.dictionaries||!a.dictionaries.length)throw new Error('A \"dictionaries\" array must be provided. This is a breaking change introduced starting from Unique Name Generator v4. Read more about the breaking change here: https://github.com/andreasonny83/unique-names-generator#migration-guide');return new e(l).generate()};var l=[\"able\",\"above\",\"absent\",\"absolute\",\"abstract\",\"abundant\",\"academic\",\"acceptable\",\"accepted\",\"accessible\",\"accurate\",\"accused\",\"active\",\"actual\",\"acute\",\"added\",\"additional\",\"adequate\",\"adjacent\",\"administrative\",\"adorable\",\"advanced\",\"adverse\",\"advisory\",\"aesthetic\",\"afraid\",\"aggregate\",\"aggressive\",\"agreeable\",\"agreed\",\"agricultural\",\"alert\",\"alive\",\"alleged\",\"allied\",\"alone\",\"alright\",\"alternative\",\"amateur\",\"amazing\",\"ambitious\",\"amused\",\"ancient\",\"angry\",\"annoyed\",\"annual\",\"anonymous\",\"anxious\",\"appalling\",\"apparent\",\"applicable\",\"appropriate\",\"arbitrary\",\"architectural\",\"armed\",\"arrogant\",\"artificial\",\"artistic\",\"ashamed\",\"asleep\",\"assistant\",\"associated\",\"atomic\",\"attractive\",\"automatic\",\"autonomous\",\"available\",\"average\",\"awake\",\"aware\",\"awful\",\"awkward\",\"back\",\"bad\",\"balanced\",\"bare\",\"basic\",\"beautiful\",\"beneficial\",\"better\",\"bewildered\",\"big\",\"binding\",\"biological\",\"bitter\",\"bizarre\",\"blank\",\"blind\",\"blonde\",\"bloody\",\"blushing\",\"boiling\",\"bold\",\"bored\",\"boring\",\"bottom\",\"brainy\",\"brave\",\"breakable\",\"breezy\",\"brief\",\"bright\",\"brilliant\",\"broad\",\"broken\",\"bumpy\",\"burning\",\"busy\",\"calm\",\"capable\",\"capitalist\",\"careful\",\"casual\",\"causal\",\"cautious\",\"central\",\"certain\",\"changing\",\"characteristic\",\"charming\",\"cheap\",\"cheerful\",\"chemical\",\"chief\",\"chilly\",\"chosen\",\"christian\",\"chronic\",\"chubby\",\"circular\",\"civic\",\"civil\",\"civilian\",\"classic\",\"classical\",\"clean\",\"clear\",\"clever\",\"clinical\",\"close\",\"closed\",\"cloudy\",\"clumsy\",\"coastal\",\"cognitive\",\"coherent\",\"cold\",\"collective\",\"colonial\",\"colorful\",\"colossal\",\"coloured\",\"colourful\",\"combative\",\"combined\",\"comfortable\",\"coming\",\"commercial\",\"common\",\"communist\",\"compact\",\"comparable\",\"comparative\",\"compatible\",\"competent\",\"competitive\",\"complete\",\"complex\",\"complicated\",\"comprehensive\",\"compulsory\",\"conceptual\",\"concerned\",\"concrete\",\"condemned\",\"confident\",\"confidential\",\"confused\",\"conscious\",\"conservation\",\"conservative\",\"considerable\",\"consistent\",\"constant\",\"constitutional\",\"contemporary\",\"content\",\"continental\",\"continued\",\"continuing\",\"continuous\",\"controlled\",\"controversial\",\"convenient\",\"conventional\",\"convinced\",\"convincing\",\"cooing\",\"cool\",\"cooperative\",\"corporate\",\"correct\",\"corresponding\",\"costly\",\"courageous\",\"crazy\",\"creative\",\"creepy\",\"criminal\",\"critical\",\"crooked\",\"crowded\",\"crucial\",\"crude\",\"cruel\",\"cuddly\",\"cultural\",\"curious\",\"curly\",\"current\",\"curved\",\"cute\",\"daily\",\"damaged\",\"damp\",\"dangerous\",\"dark\",\"dead\",\"deaf\",\"deafening\",\"dear\",\"decent\",\"decisive\",\"deep\",\"defeated\",\"defensive\",\"defiant\",\"definite\",\"deliberate\",\"delicate\",\"delicious\",\"delighted\",\"delightful\",\"democratic\",\"dependent\",\"depressed\",\"desirable\",\"desperate\",\"detailed\",\"determined\",\"developed\",\"developing\",\"devoted\",\"different\",\"difficult\",\"digital\",\"diplomatic\",\"direct\",\"dirty\",\"disabled\",\"disappointed\",\"disastrous\",\"disciplinary\",\"disgusted\",\"distant\",\"distinct\",\"distinctive\",\"distinguished\",\"disturbed\",\"disturbing\",\"diverse\",\"divine\",\"dizzy\",\"domestic\",\"dominant\",\"double\",\"doubtful\",\"drab\",\"dramatic\",\"dreadful\",\"driving\",\"drunk\",\"dry\",\"dual\",\"due\",\"dull\",\"dusty\",\"dutch\",\"dying\",\"dynamic\",\"eager\",\"early\",\"eastern\",\"easy\",\"economic\",\"educational\",\"eerie\",\"effective\",\"efficient\",\"elaborate\",\"elated\",\"elderly\",\"eldest\",\"electoral\",\"electric\",\"electrical\",\"electronic\",\"elegant\",\"eligible\",\"embarrassed\",\"embarrassing\",\"emotional\",\"empirical\",\"empty\",\"enchanting\",\"encouraging\",\"endless\",\"energetic\",\"enormous\",\"enthusiastic\",\"entire\",\"entitled\",\"envious\",\"environmental\",\"equal\",\"equivalent\",\"essential\",\"established\",\"estimated\",\"ethical\",\"ethnic\",\"eventual\",\"everyday\",\"evident\",\"evil\",\"evolutionary\",\"exact\",\"excellent\",\"exceptional\",\"excess\",\"excessive\",\"excited\",\"exciting\",\"exclusive\",\"existing\",\"exotic\",\"expected\",\"expensive\",\"experienced\",\"experimental\",\"explicit\",\"extended\",\"extensive\",\"external\",\"extra\",\"extraordinary\",\"extreme\",\"exuberant\",\"faint\",\"fair\",\"faithful\",\"familiar\",\"famous\",\"fancy\",\"fantastic\",\"far\",\"fascinating\",\"fashionable\",\"fast\",\"fat\",\"fatal\",\"favourable\",\"favourite\",\"federal\",\"fellow\",\"female\",\"feminist\",\"few\",\"fierce\",\"filthy\",\"final\",\"financial\",\"fine\",\"firm\",\"fiscal\",\"fit\",\"fixed\",\"flaky\",\"flat\",\"flexible\",\"fluffy\",\"fluttering\",\"flying\",\"following\",\"fond\",\"foolish\",\"foreign\",\"formal\",\"formidable\",\"forthcoming\",\"fortunate\",\"forward\",\"fragile\",\"frail\",\"frantic\",\"free\",\"frequent\",\"fresh\",\"friendly\",\"frightened\",\"front\",\"frozen\",\"full\",\"fun\",\"functional\",\"fundamental\",\"funny\",\"furious\",\"future\",\"fuzzy\",\"gastric\",\"gay\",\"general\",\"generous\",\"genetic\",\"gentle\",\"genuine\",\"geographical\",\"giant\",\"gigantic\",\"given\",\"glad\",\"glamorous\",\"gleaming\",\"global\",\"glorious\",\"golden\",\"good\",\"gorgeous\",\"gothic\",\"governing\",\"graceful\",\"gradual\",\"grand\",\"grateful\",\"greasy\",\"great\",\"grieving\",\"grim\",\"gross\",\"grotesque\",\"growing\",\"grubby\",\"grumpy\",\"guilty\",\"handicapped\",\"handsome\",\"happy\",\"hard\",\"harsh\",\"head\",\"healthy\",\"heavy\",\"helpful\",\"helpless\",\"hidden\",\"high\",\"hilarious\",\"hissing\",\"historic\",\"historical\",\"hollow\",\"holy\",\"homeless\",\"homely\",\"hon\",\"honest\",\"horizontal\",\"horrible\",\"hostile\",\"hot\",\"huge\",\"human\",\"hungry\",\"hurt\",\"hushed\",\"husky\",\"icy\",\"ideal\",\"identical\",\"ideological\",\"ill\",\"illegal\",\"imaginative\",\"immediate\",\"immense\",\"imperial\",\"implicit\",\"important\",\"impossible\",\"impressed\",\"impressive\",\"improved\",\"inadequate\",\"inappropriate\",\"inc\",\"inclined\",\"increased\",\"increasing\",\"incredible\",\"independent\",\"indirect\",\"individual\",\"industrial\",\"inevitable\",\"influential\",\"informal\",\"inherent\",\"initial\",\"injured\",\"inland\",\"inner\",\"innocent\",\"innovative\",\"inquisitive\",\"instant\",\"institutional\",\"insufficient\",\"intact\",\"integral\",\"integrated\",\"intellectual\",\"intelligent\",\"intense\",\"intensive\",\"interested\",\"interesting\",\"interim\",\"interior\",\"intermediate\",\"internal\",\"international\",\"intimate\",\"invisible\",\"involved\",\"irrelevant\",\"isolated\",\"itchy\",\"jealous\",\"jittery\",\"joint\",\"jolly\",\"joyous\",\"judicial\",\"juicy\",\"junior\",\"just\",\"keen\",\"key\",\"kind\",\"known\",\"labour\",\"large\",\"late\",\"latin\",\"lazy\",\"leading\",\"left\",\"legal\",\"legislative\",\"legitimate\",\"lengthy\",\"lesser\",\"level\",\"lexical\",\"liable\",\"liberal\",\"light\",\"like\",\"likely\",\"limited\",\"linear\",\"linguistic\",\"liquid\",\"literary\",\"little\",\"live\",\"lively\",\"living\",\"local\",\"logical\",\"lonely\",\"long\",\"loose\",\"lost\",\"loud\",\"lovely\",\"low\",\"loyal\",\"ltd\",\"lucky\",\"mad\",\"magic\",\"magnetic\",\"magnificent\",\"main\",\"major\",\"male\",\"mammoth\",\"managerial\",\"managing\",\"manual\",\"many\",\"marginal\",\"marine\",\"marked\",\"married\",\"marvellous\",\"marxist\",\"mass\",\"massive\",\"mathematical\",\"mature\",\"maximum\",\"mean\",\"meaningful\",\"mechanical\",\"medical\",\"medieval\",\"melodic\",\"melted\",\"mental\",\"mere\",\"metropolitan\",\"mid\",\"middle\",\"mighty\",\"mild\",\"military\",\"miniature\",\"minimal\",\"minimum\",\"ministerial\",\"minor\",\"miserable\",\"misleading\",\"missing\",\"misty\",\"mixed\",\"moaning\",\"mobile\",\"moderate\",\"modern\",\"modest\",\"molecular\",\"monetary\",\"monthly\",\"moral\",\"motionless\",\"muddy\",\"multiple\",\"mushy\",\"musical\",\"mute\",\"mutual\",\"mysterious\",\"naked\",\"narrow\",\"nasty\",\"national\",\"native\",\"natural\",\"naughty\",\"naval\",\"near\",\"nearby\",\"neat\",\"necessary\",\"negative\",\"neighbouring\",\"nervous\",\"net\",\"neutral\",\"new\",\"nice\",\"noble\",\"noisy\",\"normal\",\"northern\",\"nosy\",\"notable\",\"novel\",\"nuclear\",\"numerous\",\"nursing\",\"nutritious\",\"nutty\",\"obedient\",\"objective\",\"obliged\",\"obnoxious\",\"obvious\",\"occasional\",\"occupational\",\"odd\",\"official\",\"ok\",\"okay\",\"old\",\"olympic\",\"only\",\"open\",\"operational\",\"opposite\",\"optimistic\",\"oral\",\"ordinary\",\"organic\",\"organisational\",\"original\",\"orthodox\",\"other\",\"outdoor\",\"outer\",\"outrageous\",\"outside\",\"outstanding\",\"overall\",\"overseas\",\"overwhelming\",\"painful\",\"pale\",\"panicky\",\"parallel\",\"parental\",\"parliamentary\",\"partial\",\"particular\",\"passing\",\"passive\",\"past\",\"patient\",\"payable\",\"peaceful\",\"peculiar\",\"perfect\",\"permanent\",\"persistent\",\"personal\",\"petite\",\"philosophical\",\"physical\",\"plain\",\"planned\",\"plastic\",\"pleasant\",\"pleased\",\"poised\",\"polite\",\"political\",\"poor\",\"popular\",\"positive\",\"possible\",\"potential\",\"powerful\",\"practical\",\"precious\",\"precise\",\"preferred\",\"pregnant\",\"preliminary\",\"premier\",\"prepared\",\"present\",\"presidential\",\"pretty\",\"previous\",\"prickly\",\"primary\",\"prime\",\"primitive\",\"principal\",\"printed\",\"prior\",\"private\",\"probable\",\"productive\",\"professional\",\"profitable\",\"profound\",\"progressive\",\"prominent\",\"promising\",\"proper\",\"proposed\",\"prospective\",\"protective\",\"protestant\",\"proud\",\"provincial\",\"psychiatric\",\"psychological\",\"public\",\"puny\",\"pure\",\"purring\",\"puzzled\",\"quaint\",\"qualified\",\"quarrelsome\",\"querulous\",\"quick\",\"quickest\",\"quiet\",\"quintessential\",\"quixotic\",\"racial\",\"radical\",\"rainy\",\"random\",\"rapid\",\"rare\",\"raspy\",\"rational\",\"ratty\",\"raw\",\"ready\",\"real\",\"realistic\",\"rear\",\"reasonable\",\"recent\",\"reduced\",\"redundant\",\"regional\",\"registered\",\"regular\",\"regulatory\",\"related\",\"relative\",\"relaxed\",\"relevant\",\"reliable\",\"relieved\",\"religious\",\"reluctant\",\"remaining\",\"remarkable\",\"remote\",\"renewed\",\"representative\",\"repulsive\",\"required\",\"resident\",\"residential\",\"resonant\",\"respectable\",\"respective\",\"responsible\",\"resulting\",\"retail\",\"retired\",\"revolutionary\",\"rich\",\"ridiculous\",\"right\",\"rigid\",\"ripe\",\"rising\",\"rival\",\"roasted\",\"robust\",\"rolling\",\"romantic\",\"rotten\",\"rough\",\"round\",\"royal\",\"rubber\",\"rude\",\"ruling\",\"running\",\"rural\",\"sacred\",\"sad\",\"safe\",\"salty\",\"satisfactory\",\"satisfied\",\"scared\",\"scary\",\"scattered\",\"scientific\",\"scornful\",\"scrawny\",\"screeching\",\"secondary\",\"secret\",\"secure\",\"select\",\"selected\",\"selective\",\"selfish\",\"semantic\",\"senior\",\"sensible\",\"sensitive\",\"separate\",\"serious\",\"severe\",\"sexual\",\"shaggy\",\"shaky\",\"shallow\",\"shared\",\"sharp\",\"sheer\",\"shiny\",\"shivering\",\"shocked\",\"short\",\"shrill\",\"shy\",\"sick\",\"significant\",\"silent\",\"silky\",\"silly\",\"similar\",\"simple\",\"single\",\"skilled\",\"skinny\",\"sleepy\",\"slight\",\"slim\",\"slimy\",\"slippery\",\"slow\",\"small\",\"smart\",\"smiling\",\"smoggy\",\"smooth\",\"social\",\"socialist\",\"soft\",\"solar\",\"sole\",\"solid\",\"sophisticated\",\"sore\",\"sorry\",\"sound\",\"sour\",\"southern\",\"soviet\",\"spare\",\"sparkling\",\"spatial\",\"special\",\"specific\",\"specified\",\"spectacular\",\"spicy\",\"spiritual\",\"splendid\",\"spontaneous\",\"sporting\",\"spotless\",\"spotty\",\"square\",\"squealing\",\"stable\",\"stale\",\"standard\",\"static\",\"statistical\",\"statutory\",\"steady\",\"steep\",\"sticky\",\"stiff\",\"still\",\"stingy\",\"stormy\",\"straight\",\"straightforward\",\"strange\",\"strategic\",\"strict\",\"striking\",\"striped\",\"strong\",\"structural\",\"stuck\",\"stupid\",\"subjective\",\"subsequent\",\"substantial\",\"subtle\",\"successful\",\"successive\",\"sudden\",\"sufficient\",\"suitable\",\"sunny\",\"super\",\"superb\",\"superior\",\"supporting\",\"supposed\",\"supreme\",\"sure\",\"surprised\",\"surprising\",\"surrounding\",\"surviving\",\"suspicious\",\"sweet\",\"swift\",\"symbolic\",\"sympathetic\",\"systematic\",\"tall\",\"tame\",\"tart\",\"tasteless\",\"tasty\",\"technical\",\"technological\",\"teenage\",\"temporary\",\"tender\",\"tense\",\"terrible\",\"territorial\",\"testy\",\"then\",\"theoretical\",\"thick\",\"thin\",\"thirsty\",\"thorough\",\"thoughtful\",\"thoughtless\",\"thundering\",\"tight\",\"tiny\",\"tired\",\"top\",\"tory\",\"total\",\"tough\",\"toxic\",\"traditional\",\"tragic\",\"tremendous\",\"tricky\",\"tropical\",\"troubled\",\"typical\",\"ugliest\",\"ugly\",\"ultimate\",\"unable\",\"unacceptable\",\"unaware\",\"uncertain\",\"unchanged\",\"uncomfortable\",\"unconscious\",\"underground\",\"underlying\",\"unemployed\",\"uneven\",\"unexpected\",\"unfair\",\"unfortunate\",\"unhappy\",\"uniform\",\"uninterested\",\"unique\",\"united\",\"universal\",\"unknown\",\"unlikely\",\"unnecessary\",\"unpleasant\",\"unsightly\",\"unusual\",\"unwilling\",\"upper\",\"upset\",\"uptight\",\"urban\",\"urgent\",\"used\",\"useful\",\"useless\",\"usual\",\"vague\",\"valid\",\"valuable\",\"variable\",\"varied\",\"various\",\"varying\",\"vast\",\"verbal\",\"vertical\",\"very\",\"vicarious\",\"vicious\",\"victorious\",\"violent\",\"visible\",\"visiting\",\"visual\",\"vital\",\"vitreous\",\"vivacious\",\"vivid\",\"vocal\",\"vocational\",\"voiceless\",\"voluminous\",\"voluntary\",\"vulnerable\",\"wandering\",\"warm\",\"wasteful\",\"watery\",\"weak\",\"wealthy\",\"weary\",\"wee\",\"weekly\",\"weird\",\"welcome\",\"well\",\"western\",\"wet\",\"whispering\",\"whole\",\"wicked\",\"wide\",\"widespread\",\"wild\",\"wilful\",\"willing\",\"willowy\",\"wily\",\"wise\",\"wispy\",\"wittering\",\"witty\",\"wonderful\",\"wooden\",\"working\",\"worldwide\",\"worried\",\"worrying\",\"worthwhile\",\"worthy\",\"written\",\"wrong\",\"xenacious\",\"xenial\",\"xenogeneic\",\"xenophobic\",\"xeric\",\"xerothermic\",\"yabbering\",\"yammering\",\"yappiest\",\"yappy\",\"yawning\",\"yearling\",\"yearning\",\"yeasty\",\"yelling\",\"yelping\",\"yielding\",\"yodelling\",\"young\",\"youngest\",\"youthful\",\"ytterbic\",\"yucky\",\"yummy\",\"zany\",\"zealous\",\"zeroth\",\"zestful\",\"zesty\",\"zippy\",\"zonal\",\"zoophagous\",\"zygomorphic\",\"zygotic\"],r=[\"aardvark\",\"aardwolf\",\"albatross\",\"alligator\",\"alpaca\",\"amphibian\",\"anaconda\",\"angelfish\",\"anglerfish\",\"ant\",\"anteater\",\"antelope\",\"antlion\",\"ape\",\"aphid\",\"armadillo\",\"asp\",\"baboon\",\"badger\",\"bandicoot\",\"barnacle\",\"barracuda\",\"basilisk\",\"bass\",\"bat\",\"bear\",\"beaver\",\"bedbug\",\"bee\",\"beetle\",\"bird\",\"bison\",\"blackbird\",\"boa\",\"boar\",\"bobcat\",\"bobolink\",\"bonobo\",\"booby\",\"bovid\",\"bug\",\"butterfly\",\"buzzard\",\"camel\",\"canid\",\"canidae\",\"capybara\",\"cardinal\",\"caribou\",\"carp\",\"cat\",\"caterpillar\",\"catfish\",\"catshark\",\"cattle\",\"centipede\",\"cephalopod\",\"chameleon\",\"cheetah\",\"chickadee\",\"chicken\",\"chimpanzee\",\"chinchilla\",\"chipmunk\",\"cicada\",\"clam\",\"clownfish\",\"cobra\",\"cockroach\",\"cod\",\"condor\",\"constrictor\",\"coral\",\"cougar\",\"cow\",\"coyote\",\"crab\",\"crane\",\"crawdad\",\"crayfish\",\"cricket\",\"crocodile\",\"crow\",\"cuckoo\",\"damselfly\",\"deer\",\"dingo\",\"dinosaur\",\"dog\",\"dolphin\",\"donkey\",\"dormouse\",\"dove\",\"dragon\",\"dragonfly\",\"duck\",\"eagle\",\"earthworm\",\"earwig\",\"echidna\",\"eel\",\"egret\",\"elephant\",\"elk\",\"emu\",\"ermine\",\"falcon\",\"felidae\",\"ferret\",\"finch\",\"firefly\",\"fish\",\"flamingo\",\"flea\",\"fly\",\"flyingfish\",\"fowl\",\"fox\",\"frog\",\"galliform\",\"gamefowl\",\"gayal\",\"gazelle\",\"gecko\",\"gerbil\",\"gibbon\",\"giraffe\",\"goat\",\"goldfish\",\"goose\",\"gopher\",\"gorilla\",\"grasshopper\",\"grouse\",\"guan\",\"guanaco\",\"guineafowl\",\"gull\",\"guppy\",\"haddock\",\"halibut\",\"hamster\",\"hare\",\"harrier\",\"hawk\",\"hedgehog\",\"heron\",\"herring\",\"hippopotamus\",\"hookworm\",\"hornet\",\"horse\",\"hoverfly\",\"hummingbird\",\"hyena\",\"iguana\",\"impala\",\"jackal\",\"jaguar\",\"jay\",\"jellyfish\",\"junglefowl\",\"kangaroo\",\"kingfisher\",\"kite\",\"kiwi\",\"koala\",\"koi\",\"krill\",\"ladybug\",\"lamprey\",\"landfowl\",\"lark\",\"leech\",\"lemming\",\"lemur\",\"leopard\",\"leopon\",\"limpet\",\"lion\",\"lizard\",\"llama\",\"lobster\",\"locust\",\"loon\",\"louse\",\"lungfish\",\"lynx\",\"macaw\",\"mackerel\",\"magpie\",\"mammal\",\"manatee\",\"mandrill\",\"marlin\",\"marmoset\",\"marmot\",\"marsupial\",\"marten\",\"mastodon\",\"meadowlark\",\"meerkat\",\"mink\",\"minnow\",\"mite\",\"mockingbird\",\"mole\",\"mollusk\",\"mongoose\",\"monkey\",\"moose\",\"mosquito\",\"moth\",\"mouse\",\"mule\",\"muskox\",\"narwhal\",\"newt\",\"nightingale\",\"ocelot\",\"octopus\",\"opossum\",\"orangutan\",\"orca\",\"ostrich\",\"otter\",\"owl\",\"ox\",\"panda\",\"panther\",\"parakeet\",\"parrot\",\"parrotfish\",\"partridge\",\"peacock\",\"peafowl\",\"pelican\",\"penguin\",\"perch\",\"pheasant\",\"pig\",\"pigeon\",\"pike\",\"pinniped\",\"piranha\",\"planarian\",\"platypus\",\"pony\",\"porcupine\",\"porpoise\",\"possum\",\"prawn\",\"primate\",\"ptarmigan\",\"puffin\",\"puma\",\"python\",\"quail\",\"quelea\",\"quokka\",\"rabbit\",\"raccoon\",\"rat\",\"rattlesnake\",\"raven\",\"reindeer\",\"reptile\",\"rhinoceros\",\"roadrunner\",\"rodent\",\"rook\",\"rooster\",\"roundworm\",\"sailfish\",\"salamander\",\"salmon\",\"sawfish\",\"scallop\",\"scorpion\",\"seahorse\",\"shark\",\"sheep\",\"shrew\",\"shrimp\",\"silkworm\",\"silverfish\",\"skink\",\"skunk\",\"sloth\",\"slug\",\"smelt\",\"snail\",\"snake\",\"snipe\",\"sole\",\"sparrow\",\"spider\",\"spoonbill\",\"squid\",\"squirrel\",\"starfish\",\"stingray\",\"stoat\",\"stork\",\"sturgeon\",\"swallow\",\"swan\",\"swift\",\"swordfish\",\"swordtail\",\"tahr\",\"takin\",\"tapir\",\"tarantula\",\"tarsier\",\"termite\",\"tern\",\"thrush\",\"tick\",\"tiger\",\"tiglon\",\"toad\",\"tortoise\",\"toucan\",\"trout\",\"tuna\",\"turkey\",\"turtle\",\"tyrannosaurus\",\"unicorn\",\"urial\",\"vicuna\",\"viper\",\"vole\",\"vulture\",\"wallaby\",\"walrus\",\"warbler\",\"wasp\",\"weasel\",\"whale\",\"whippet\",\"whitefish\",\"wildcat\",\"wildebeest\",\"wildfowl\",\"wolf\",\"wolverine\",\"wombat\",\"woodpecker\",\"worm\",\"wren\",\"xerinae\",\"yak\",\"zebra\"],t=[\"amaranth\",\"amber\",\"amethyst\",\"apricot\",\"aqua\",\"aquamarine\",\"azure\",\"beige\",\"black\",\"blue\",\"blush\",\"bronze\",\"brown\",\"chocolate\",\"coffee\",\"copper\",\"coral\",\"crimson\",\"cyan\",\"emerald\",\"fuchsia\",\"gold\",\"gray\",\"green\",\"harlequin\",\"indigo\",\"ivory\",\"jade\",\"lavender\",\"lime\",\"magenta\",\"maroon\",\"moccasin\",\"olive\",\"orange\",\"peach\",\"pink\",\"plum\",\"purple\",\"red\",\"rose\",\"salmon\",\"sapphire\",\"scarlet\",\"silver\",\"tan\",\"teal\",\"tomato\",\"turquoise\",\"violet\",\"white\",\"yellow\"],o=[\"Afghanistan\",\"Åland Islands\",\"Albania\",\"Algeria\",\"American Samoa\",\"Andorra\",\"Angola\",\"Anguilla\",\"Antarctica\",\"Antigua & Barbuda\",\"Argentina\",\"Armenia\",\"Aruba\",\"Ascension Island\",\"Australia\",\"Austria\",\"Azerbaijan\",\"Bahamas\",\"Bahrain\",\"Bangladesh\",\"Barbados\",\"Belarus\",\"Belgium\",\"Belize\",\"Benin\",\"Bermuda\",\"Bhutan\",\"Bolivia\",\"Bosnia & Herzegovina\",\"Botswana\",\"Brazil\",\"British Indian Ocean Territory\",\"British Virgin Islands\",\"Brunei\",\"Bulgaria\",\"Burkina Faso\",\"Burundi\",\"Cambodia\",\"Cameroon\",\"Canada\",\"Canary Islands\",\"Cape Verde\",\"Caribbean Netherlands\",\"Cayman Islands\",\"Central African Republic\",\"Ceuta & Melilla\",\"Chad\",\"Chile\",\"China\",\"Christmas Island\",\"Cocos Islands\",\"Colombia\",\"Comoros\",\"Congo\",\"Cook Islands\",\"Costa Rica\",\"Côte d'Ivoire\",\"Croatia\",\"Cuba\",\"Curaçao\",\"Cyprus\",\"Czechia\",\"Denmark\",\"Diego Garcia\",\"Djibouti\",\"Dominica\",\"Dominican Republic\",\"Ecuador\",\"Egypt\",\"El Salvador\",\"Equatorial Guinea\",\"Eritrea\",\"Estonia\",\"Ethiopia\",\"Eurozone\",\"Falkland Islands\",\"Faroe Islands\",\"Fiji\",\"Finland\",\"France\",\"French Guiana\",\"French Polynesia\",\"French Southern Territories\",\"Gabon\",\"Gambia\",\"Georgia\",\"Germany\",\"Ghana\",\"Gibraltar\",\"Greece\",\"Greenland\",\"Grenada\",\"Guadeloupe\",\"Guam\",\"Guatemala\",\"Guernsey\",\"Guinea\",\"Guinea-Bissau\",\"Guyana\",\"Haiti\",\"Honduras\",\"Hong Kong SAR China\",\"Hungary\",\"Iceland\",\"India\",\"Indonesia\",\"Iran\",\"Iraq\",\"Ireland\",\"Isle of Man\",\"Israel\",\"Italy\",\"Jamaica\",\"Japan\",\"Jersey\",\"Jordan\",\"Kazakhstan\",\"Kenya\",\"Kiribati\",\"Kosovo\",\"Kuwait\",\"Kyrgyzstan\",\"Laos\",\"Latvia\",\"Lebanon\",\"Lesotho\",\"Liberia\",\"Libya\",\"Liechtenstein\",\"Lithuania\",\"Luxembourg\",\"Macau SAR China\",\"Macedonia\",\"Madagascar\",\"Malawi\",\"Malaysia\",\"Maldives\",\"Mali\",\"Malta\",\"Marshall Islands\",\"Martinique\",\"Mauritania\",\"Mauritius\",\"Mayotte\",\"Mexico\",\"Micronesia\",\"Moldova\",\"Monaco\",\"Mongolia\",\"Montenegro\",\"Montserrat\",\"Morocco\",\"Mozambique\",\"Myanmar\",\"Namibia\",\"Nauru\",\"Nepal\",\"Netherlands\",\"New Caledonia\",\"New Zealand\",\"Nicaragua\",\"Niger\",\"Nigeria\",\"Niue\",\"Norfolk Island\",\"North Korea\",\"Northern Mariana Islands\",\"Norway\",\"Oman\",\"Pakistan\",\"Palau\",\"Palestinian Territories\",\"Panama\",\"Papua New Guinea\",\"Paraguay\",\"Peru\",\"Philippines\",\"Pitcairn Islands\",\"Poland\",\"Portugal\",\"Puerto Rico\",\"Qatar\",\"Réunion\",\"Romania\",\"Russia\",\"Rwanda\",\"Samoa\",\"San Marino\",\"São Tomé & Príncipe\",\"Saudi Arabia\",\"Senegal\",\"Serbia\",\"Seychelles\",\"Sierra Leone\",\"Singapore\",\"Sint Maarten\",\"Slovakia\",\"Slovenia\",\"Solomon Islands\",\"Somalia\",\"South Africa\",\"South Georgia & South Sandwich Islands\",\"South Korea\",\"South Sudan\",\"Spain\",\"Sri Lanka\",\"St. Barthélemy\",\"St. Helena\",\"St. Kitts & Nevis\",\"St. Lucia\",\"St. Martin\",\"St. Pierre & Miquelon\",\"St. Vincent & Grenadines\",\"Sudan\",\"Suriname\",\"Svalbard & Jan Mayen\",\"Swaziland\",\"Sweden\",\"Switzerland\",\"Syria\",\"Taiwan\",\"Tajikistan\",\"Tanzania\",\"Thailand\",\"Timor-Leste\",\"Togo\",\"Tokelau\",\"Tonga\",\"Trinidad & Tobago\",\"Tristan da Cunha\",\"Tunisia\",\"Turkey\",\"Turkmenistan\",\"Turks & Caicos Islands\",\"Tuvalu\",\"U.S. Outlying Islands\",\"U.S. Virgin Islands\",\"Uganda\",\"Ukraine\",\"United Arab Emirates\",\"United Kingdom\",\"United Nations\",\"United States\",\"Uruguay\",\"Uzbekistan\",\"Vanuatu\",\"Vatican City\",\"Venezuela\",\"Vietnam\",\"Wallis & Futuna\",\"Western Sahara\",\"Yemen\",\"Zambia\",\"Zimbabwe\"],s=[\"Akan\",\"Amharic\",\"Arabic\",\"Assamese\",\"Awadhi\",\"Azerbaijani\",\"Balochi\",\"Belarusian\",\"Bengali\",\"Bhojpuri\",\"Burmese\",\"Cebuano\",\"Chewa\",\"Chhattisgarhi\",\"Chittagonian\",\"Czech\",\"Deccan\",\"Dhundhari\",\"Dutch\",\"English\",\"French\",\"Fula\",\"Gan\",\"German\",\"Greek\",\"Gujarati\",\"Hakka\",\"Haryanvi\",\"Hausa\",\"Hiligaynon\",\"Hindi\",\"Hmong\",\"Hungarian\",\"Igbo\",\"Ilocano\",\"Italian\",\"Japanese\",\"Javanese\",\"Jin\",\"Kannada\",\"Kazakh\",\"Khmer\",\"Kinyarwanda\",\"Kirundi\",\"Konkani\",\"Korean\",\"Kurdish\",\"Madurese\",\"Magahi\",\"Maithili\",\"Malagasy\",\"Malay\",\"Malayalam\",\"Mandarin\",\"Marathi\",\"Marwari\",\"Min\",\"Mossi\",\"Nepali\",\"Odia\",\"Oromo\",\"Pashto\",\"Persian\",\"Polish\",\"Portuguese\",\"Punjabi\",\"Quechua\",\"Romanian\",\"Russian\",\"Saraiki\",\"Shona\",\"Sindhi\",\"Sinhala\",\"Somali\",\"Spanish\",\"Sundanese\",\"Swedish\",\"Sylheti\",\"Tagalog\",\"Tamil\",\"Telugu\",\"Thai\",\"Turkish\",\"Turkmen\",\"Ukrainian\",\"Urdu\",\"Uyghur\",\"Uzbek\",\"Vietnamese\",\"Wu\",\"Xhosa\",\"Xiang\",\"Yoruba\",\"Yue\",\"Zhuang\",\"Zulu\"],d=[\"Aaren\",\"Aarika\",\"Abagael\",\"Abagail\",\"Abbe\",\"Abbey\",\"Abbi\",\"Abbie\",\"Abby\",\"Abbye\",\"Abigael\",\"Abigail\",\"Abigale\",\"Abra\",\"Ada\",\"Adah\",\"Adaline\",\"Adan\",\"Adara\",\"Adda\",\"Addi\",\"Addia\",\"Addie\",\"Addy\",\"Adel\",\"Adela\",\"Adelaida\",\"Adelaide\",\"Adele\",\"Adelheid\",\"Adelice\",\"Adelina\",\"Adelind\",\"Adeline\",\"Adella\",\"Adelle\",\"Adena\",\"Adey\",\"Adi\",\"Adiana\",\"Adina\",\"Adora\",\"Adore\",\"Adoree\",\"Adorne\",\"Adrea\",\"Adria\",\"Adriaens\",\"Adrian\",\"Adriana\",\"Adriane\",\"Adrianna\",\"Adrianne\",\"Adriena\",\"Adrienne\",\"Aeriel\",\"Aeriela\",\"Aeriell\",\"Afton\",\"Ag\",\"Agace\",\"Agata\",\"Agatha\",\"Agathe\",\"Aggi\",\"Aggie\",\"Aggy\",\"Agna\",\"Agnella\",\"Agnes\",\"Agnese\",\"Agnesse\",\"Agneta\",\"Agnola\",\"Agretha\",\"Aida\",\"Aidan\",\"Aigneis\",\"Aila\",\"Aile\",\"Ailee\",\"Aileen\",\"Ailene\",\"Ailey\",\"Aili\",\"Ailina\",\"Ailis\",\"Ailsun\",\"Ailyn\",\"Aime\",\"Aimee\",\"Aimil\",\"Aindrea\",\"Ainslee\",\"Ainsley\",\"Ainslie\",\"Ajay\",\"Alaine\",\"Alameda\",\"Alana\",\"Alanah\",\"Alane\",\"Alanna\",\"Alayne\",\"Alberta\",\"Albertina\",\"Albertine\",\"Albina\",\"Alecia\",\"Aleda\",\"Aleece\",\"Aleen\",\"Alejandra\",\"Alejandrina\",\"Alena\",\"Alene\",\"Alessandra\",\"Aleta\",\"Alethea\",\"Alex\",\"Alexa\",\"Alexandra\",\"Alexandrina\",\"Alexi\",\"Alexia\",\"Alexina\",\"Alexine\",\"Alexis\",\"Alfi\",\"Alfie\",\"Alfreda\",\"Alfy\",\"Ali\",\"Alia\",\"Alica\",\"Alice\",\"Alicea\",\"Alicia\",\"Alida\",\"Alidia\",\"Alie\",\"Alika\",\"Alikee\",\"Alina\",\"Aline\",\"Alis\",\"Alisa\",\"Alisha\",\"Alison\",\"Alissa\",\"Alisun\",\"Alix\",\"Aliza\",\"Alla\",\"Alleen\",\"Allegra\",\"Allene\",\"Alli\",\"Allianora\",\"Allie\",\"Allina\",\"Allis\",\"Allison\",\"Allissa\",\"Allix\",\"Allsun\",\"Allx\",\"Ally\",\"Allyce\",\"Allyn\",\"Allys\",\"Allyson\",\"Alma\",\"Almeda\",\"Almeria\",\"Almeta\",\"Almira\",\"Almire\",\"Aloise\",\"Aloisia\",\"Aloysia\",\"Alta\",\"Althea\",\"Alvera\",\"Alverta\",\"Alvina\",\"Alvinia\",\"Alvira\",\"Alyce\",\"Alyda\",\"Alys\",\"Alysa\",\"Alyse\",\"Alysia\",\"Alyson\",\"Alyss\",\"Alyssa\",\"Amabel\",\"Amabelle\",\"Amalea\",\"Amalee\",\"Amaleta\",\"Amalia\",\"Amalie\",\"Amalita\",\"Amalle\",\"Amanda\",\"Amandi\",\"Amandie\",\"Amandy\",\"Amara\",\"Amargo\",\"Amata\",\"Amber\",\"Amberly\",\"Ambur\",\"Ame\",\"Amelia\",\"Amelie\",\"Amelina\",\"Ameline\",\"Amelita\",\"Ami\",\"Amie\",\"Amii\",\"Amil\",\"Amitie\",\"Amity\",\"Ammamaria\",\"Amy\",\"Amye\",\"Ana\",\"Anabal\",\"Anabel\",\"Anabella\",\"Anabelle\",\"Analiese\",\"Analise\",\"Anallese\",\"Anallise\",\"Anastasia\",\"Anastasie\",\"Anastassia\",\"Anatola\",\"Andee\",\"Andeee\",\"Anderea\",\"Andi\",\"Andie\",\"Andra\",\"Andrea\",\"Andreana\",\"Andree\",\"Andrei\",\"Andria\",\"Andriana\",\"Andriette\",\"Andromache\",\"Andy\",\"Anestassia\",\"Anet\",\"Anett\",\"Anetta\",\"Anette\",\"Ange\",\"Angel\",\"Angela\",\"Angele\",\"Angelia\",\"Angelica\",\"Angelika\",\"Angelina\",\"Angeline\",\"Angelique\",\"Angelita\",\"Angelle\",\"Angie\",\"Angil\",\"Angy\",\"Ania\",\"Anica\",\"Anissa\",\"Anita\",\"Anitra\",\"Anjanette\",\"Anjela\",\"Ann\",\"Ann-marie\",\"Anna\",\"Anna-diana\",\"Anna-diane\",\"Anna-maria\",\"Annabal\",\"Annabel\",\"Annabela\",\"Annabell\",\"Annabella\",\"Annabelle\",\"Annadiana\",\"Annadiane\",\"Annalee\",\"Annaliese\",\"Annalise\",\"Annamaria\",\"Annamarie\",\"Anne\",\"Anne-corinne\",\"Anne-marie\",\"Annecorinne\",\"Anneliese\",\"Annelise\",\"Annemarie\",\"Annetta\",\"Annette\",\"Anni\",\"Annice\",\"Annie\",\"Annis\",\"Annissa\",\"Annmaria\",\"Annmarie\",\"Annnora\",\"Annora\",\"Anny\",\"Anselma\",\"Ansley\",\"Anstice\",\"Anthe\",\"Anthea\",\"Anthia\",\"Anthiathia\",\"Antoinette\",\"Antonella\",\"Antonetta\",\"Antonia\",\"Antonie\",\"Antonietta\",\"Antonina\",\"Anya\",\"Appolonia\",\"April\",\"Aprilette\",\"Ara\",\"Arabel\",\"Arabela\",\"Arabele\",\"Arabella\",\"Arabelle\",\"Arda\",\"Ardath\",\"Ardeen\",\"Ardelia\",\"Ardelis\",\"Ardella\",\"Ardelle\",\"Arden\",\"Ardene\",\"Ardenia\",\"Ardine\",\"Ardis\",\"Ardisj\",\"Ardith\",\"Ardra\",\"Ardyce\",\"Ardys\",\"Ardyth\",\"Aretha\",\"Ariadne\",\"Ariana\",\"Aridatha\",\"Ariel\",\"Ariela\",\"Ariella\",\"Arielle\",\"Arlana\",\"Arlee\",\"Arleen\",\"Arlen\",\"Arlena\",\"Arlene\",\"Arleta\",\"Arlette\",\"Arleyne\",\"Arlie\",\"Arliene\",\"Arlina\",\"Arlinda\",\"Arline\",\"Arluene\",\"Arly\",\"Arlyn\",\"Arlyne\",\"Aryn\",\"Ashely\",\"Ashia\",\"Ashien\",\"Ashil\",\"Ashla\",\"Ashlan\",\"Ashlee\",\"Ashleigh\",\"Ashlen\",\"Ashley\",\"Ashli\",\"Ashlie\",\"Ashly\",\"Asia\",\"Astra\",\"Astrid\",\"Astrix\",\"Atalanta\",\"Athena\",\"Athene\",\"Atlanta\",\"Atlante\",\"Auberta\",\"Aubine\",\"Aubree\",\"Aubrette\",\"Aubrey\",\"Aubrie\",\"Aubry\",\"Audi\",\"Audie\",\"Audra\",\"Audre\",\"Audrey\",\"Audrie\",\"Audry\",\"Audrye\",\"Audy\",\"Augusta\",\"Auguste\",\"Augustina\",\"Augustine\",\"Aundrea\",\"Aura\",\"Aurea\",\"Aurel\",\"Aurelea\",\"Aurelia\",\"Aurelie\",\"Auria\",\"Aurie\",\"Aurilia\",\"Aurlie\",\"Auroora\",\"Aurora\",\"Aurore\",\"Austin\",\"Austina\",\"Austine\",\"Ava\",\"Aveline\",\"Averil\",\"Averyl\",\"Avie\",\"Avis\",\"Aviva\",\"Avivah\",\"Avril\",\"Avrit\",\"Ayn\",\"Bab\",\"Babara\",\"Babb\",\"Babbette\",\"Babbie\",\"Babette\",\"Babita\",\"Babs\",\"Bambi\",\"Bambie\",\"Bamby\",\"Barb\",\"Barbabra\",\"Barbara\",\"Barbara-anne\",\"Barbaraanne\",\"Barbe\",\"Barbee\",\"Barbette\",\"Barbey\",\"Barbi\",\"Barbie\",\"Barbra\",\"Barby\",\"Bari\",\"Barrie\",\"Barry\",\"Basia\",\"Bathsheba\",\"Batsheva\",\"Bea\",\"Beatrice\",\"Beatrisa\",\"Beatrix\",\"Beatriz\",\"Bebe\",\"Becca\",\"Becka\",\"Becki\",\"Beckie\",\"Becky\",\"Bee\",\"Beilul\",\"Beitris\",\"Bekki\",\"Bel\",\"Belia\",\"Belicia\",\"Belinda\",\"Belita\",\"Bell\",\"Bella\",\"Bellanca\",\"Belle\",\"Bellina\",\"Belva\",\"Belvia\",\"Bendite\",\"Benedetta\",\"Benedicta\",\"Benedikta\",\"Benetta\",\"Benita\",\"Benni\",\"Bennie\",\"Benny\",\"Benoite\",\"Berenice\",\"Beret\",\"Berget\",\"Berna\",\"Bernadene\",\"Bernadette\",\"Bernadina\",\"Bernadine\",\"Bernardina\",\"Bernardine\",\"Bernelle\",\"Bernete\",\"Bernetta\",\"Bernette\",\"Berni\",\"Bernice\",\"Bernie\",\"Bernita\",\"Berny\",\"Berri\",\"Berrie\",\"Berry\",\"Bert\",\"Berta\",\"Berte\",\"Bertha\",\"Berthe\",\"Berti\",\"Bertie\",\"Bertina\",\"Bertine\",\"Berty\",\"Beryl\",\"Beryle\",\"Bess\",\"Bessie\",\"Bessy\",\"Beth\",\"Bethanne\",\"Bethany\",\"Bethena\",\"Bethina\",\"Betsey\",\"Betsy\",\"Betta\",\"Bette\",\"Bette-ann\",\"Betteann\",\"Betteanne\",\"Betti\",\"Bettina\",\"Bettine\",\"Betty\",\"Bettye\",\"Beulah\",\"Bev\",\"Beverie\",\"Beverlee\",\"Beverley\",\"Beverlie\",\"Beverly\",\"Bevvy\",\"Bianca\",\"Bianka\",\"Bibbie\",\"Bibby\",\"Bibbye\",\"Bibi\",\"Biddie\",\"Biddy\",\"Bidget\",\"Bili\",\"Bill\",\"Billi\",\"Billie\",\"Billy\",\"Billye\",\"Binni\",\"Binnie\",\"Binny\",\"Bird\",\"Birdie\",\"Birgit\",\"Birgitta\",\"Blair\",\"Blaire\",\"Blake\",\"Blakelee\",\"Blakeley\",\"Blanca\",\"Blanch\",\"Blancha\",\"Blanche\",\"Blinni\",\"Blinnie\",\"Blinny\",\"Bliss\",\"Blisse\",\"Blithe\",\"Blondell\",\"Blondelle\",\"Blondie\",\"Blondy\",\"Blythe\",\"Bobbe\",\"Bobbee\",\"Bobbette\",\"Bobbi\",\"Bobbie\",\"Bobby\",\"Bobbye\",\"Bobette\",\"Bobina\",\"Bobine\",\"Bobinette\",\"Bonita\",\"Bonnee\",\"Bonni\",\"Bonnibelle\",\"Bonnie\",\"Bonny\",\"Brana\",\"Brandais\",\"Brande\",\"Brandea\",\"Brandi\",\"Brandice\",\"Brandie\",\"Brandise\",\"Brandy\",\"Breanne\",\"Brear\",\"Bree\",\"Breena\",\"Bren\",\"Brena\",\"Brenda\",\"Brenn\",\"Brenna\",\"Brett\",\"Bria\",\"Briana\",\"Brianna\",\"Brianne\",\"Bride\",\"Bridget\",\"Bridgette\",\"Bridie\",\"Brier\",\"Brietta\",\"Brigid\",\"Brigida\",\"Brigit\",\"Brigitta\",\"Brigitte\",\"Brina\",\"Briney\",\"Brinn\",\"Brinna\",\"Briny\",\"Brit\",\"Brita\",\"Britney\",\"Britni\",\"Britt\",\"Britta\",\"Brittan\",\"Brittaney\",\"Brittani\",\"Brittany\",\"Britte\",\"Britteny\",\"Brittne\",\"Brittney\",\"Brittni\",\"Brook\",\"Brooke\",\"Brooks\",\"Brunhilda\",\"Brunhilde\",\"Bryana\",\"Bryn\",\"Bryna\",\"Brynn\",\"Brynna\",\"Brynne\",\"Buffy\",\"Bunni\",\"Bunnie\",\"Bunny\",\"Cacilia\",\"Cacilie\",\"Cahra\",\"Cairistiona\",\"Caitlin\",\"Caitrin\",\"Cal\",\"Calida\",\"Calla\",\"Calley\",\"Calli\",\"Callida\",\"Callie\",\"Cally\",\"Calypso\",\"Cam\",\"Camala\",\"Camel\",\"Camella\",\"Camellia\",\"Cami\",\"Camila\",\"Camile\",\"Camilla\",\"Camille\",\"Cammi\",\"Cammie\",\"Cammy\",\"Candace\",\"Candi\",\"Candice\",\"Candida\",\"Candide\",\"Candie\",\"Candis\",\"Candra\",\"Candy\",\"Caprice\",\"Cara\",\"Caralie\",\"Caren\",\"Carena\",\"Caresa\",\"Caressa\",\"Caresse\",\"Carey\",\"Cari\",\"Caria\",\"Carie\",\"Caril\",\"Carilyn\",\"Carin\",\"Carina\",\"Carine\",\"Cariotta\",\"Carissa\",\"Carita\",\"Caritta\",\"Carla\",\"Carlee\",\"Carleen\",\"Carlen\",\"Carlene\",\"Carley\",\"Carlie\",\"Carlin\",\"Carlina\",\"Carline\",\"Carlita\",\"Carlota\",\"Carlotta\",\"Carly\",\"Carlye\",\"Carlyn\",\"Carlynn\",\"Carlynne\",\"Carma\",\"Carmel\",\"Carmela\",\"Carmelia\",\"Carmelina\",\"Carmelita\",\"Carmella\",\"Carmelle\",\"Carmen\",\"Carmencita\",\"Carmina\",\"Carmine\",\"Carmita\",\"Carmon\",\"Caro\",\"Carol\",\"Carol-jean\",\"Carola\",\"Carolan\",\"Carolann\",\"Carole\",\"Carolee\",\"Carolin\",\"Carolina\",\"Caroline\",\"Caroljean\",\"Carolyn\",\"Carolyne\",\"Carolynn\",\"Caron\",\"Carree\",\"Carri\",\"Carrie\",\"Carrissa\",\"Carroll\",\"Carry\",\"Cary\",\"Caryl\",\"Caryn\",\"Casandra\",\"Casey\",\"Casi\",\"Casie\",\"Cass\",\"Cassandra\",\"Cassandre\",\"Cassandry\",\"Cassaundra\",\"Cassey\",\"Cassi\",\"Cassie\",\"Cassondra\",\"Cassy\",\"Catarina\",\"Cate\",\"Caterina\",\"Catha\",\"Catharina\",\"Catharine\",\"Cathe\",\"Cathee\",\"Catherin\",\"Catherina\",\"Catherine\",\"Cathi\",\"Cathie\",\"Cathleen\",\"Cathlene\",\"Cathrin\",\"Cathrine\",\"Cathryn\",\"Cathy\",\"Cathyleen\",\"Cati\",\"Catie\",\"Catina\",\"Catlaina\",\"Catlee\",\"Catlin\",\"Catrina\",\"Catriona\",\"Caty\",\"Caye\",\"Cayla\",\"Cecelia\",\"Cecil\",\"Cecile\",\"Ceciley\",\"Cecilia\",\"Cecilla\",\"Cecily\",\"Ceil\",\"Cele\",\"Celene\",\"Celesta\",\"Celeste\",\"Celestia\",\"Celestina\",\"Celestine\",\"Celestyn\",\"Celestyna\",\"Celia\",\"Celie\",\"Celina\",\"Celinda\",\"Celine\",\"Celinka\",\"Celisse\",\"Celka\",\"Celle\",\"Cesya\",\"Chad\",\"Chanda\",\"Chandal\",\"Chandra\",\"Channa\",\"Chantal\",\"Chantalle\",\"Charil\",\"Charin\",\"Charis\",\"Charissa\",\"Charisse\",\"Charita\",\"Charity\",\"Charla\",\"Charlean\",\"Charleen\",\"Charlena\",\"Charlene\",\"Charline\",\"Charlot\",\"Charlotta\",\"Charlotte\",\"Charmain\",\"Charmaine\",\"Charmane\",\"Charmian\",\"Charmine\",\"Charmion\",\"Charo\",\"Charyl\",\"Chastity\",\"Chelsae\",\"Chelsea\",\"Chelsey\",\"Chelsie\",\"Chelsy\",\"Cher\",\"Chere\",\"Cherey\",\"Cheri\",\"Cherianne\",\"Cherice\",\"Cherida\",\"Cherie\",\"Cherilyn\",\"Cherilynn\",\"Cherin\",\"Cherise\",\"Cherish\",\"Cherlyn\",\"Cherri\",\"Cherrita\",\"Cherry\",\"Chery\",\"Cherye\",\"Cheryl\",\"Cheslie\",\"Chiarra\",\"Chickie\",\"Chicky\",\"Chiquia\",\"Chiquita\",\"Chlo\",\"Chloe\",\"Chloette\",\"Chloris\",\"Chris\",\"Chrissie\",\"Chrissy\",\"Christa\",\"Christabel\",\"Christabella\",\"Christal\",\"Christalle\",\"Christan\",\"Christean\",\"Christel\",\"Christen\",\"Christi\",\"Christian\",\"Christiana\",\"Christiane\",\"Christie\",\"Christin\",\"Christina\",\"Christine\",\"Christy\",\"Christye\",\"Christyna\",\"Chrysa\",\"Chrysler\",\"Chrystal\",\"Chryste\",\"Chrystel\",\"Cicely\",\"Cicily\",\"Ciel\",\"Cilka\",\"Cinda\",\"Cindee\",\"Cindelyn\",\"Cinderella\",\"Cindi\",\"Cindie\",\"Cindra\",\"Cindy\",\"Cinnamon\",\"Cissiee\",\"Cissy\",\"Clair\",\"Claire\",\"Clara\",\"Clarabelle\",\"Clare\",\"Claresta\",\"Clareta\",\"Claretta\",\"Clarette\",\"Clarey\",\"Clari\",\"Claribel\",\"Clarice\",\"Clarie\",\"Clarinda\",\"Clarine\",\"Clarissa\",\"Clarisse\",\"Clarita\",\"Clary\",\"Claude\",\"Claudelle\",\"Claudetta\",\"Claudette\",\"Claudia\",\"Claudie\",\"Claudina\",\"Claudine\",\"Clea\",\"Clem\",\"Clemence\",\"Clementia\",\"Clementina\",\"Clementine\",\"Clemmie\",\"Clemmy\",\"Cleo\",\"Cleopatra\",\"Clerissa\",\"Clio\",\"Clo\",\"Cloe\",\"Cloris\",\"Clotilda\",\"Clovis\",\"Codee\",\"Codi\",\"Codie\",\"Cody\",\"Coleen\",\"Colene\",\"Coletta\",\"Colette\",\"Colleen\",\"Collen\",\"Collete\",\"Collette\",\"Collie\",\"Colline\",\"Colly\",\"Con\",\"Concettina\",\"Conchita\",\"Concordia\",\"Conni\",\"Connie\",\"Conny\",\"Consolata\",\"Constance\",\"Constancia\",\"Constancy\",\"Constanta\",\"Constantia\",\"Constantina\",\"Constantine\",\"Consuela\",\"Consuelo\",\"Cookie\",\"Cora\",\"Corabel\",\"Corabella\",\"Corabelle\",\"Coral\",\"Coralie\",\"Coraline\",\"Coralyn\",\"Cordelia\",\"Cordelie\",\"Cordey\",\"Cordi\",\"Cordie\",\"Cordula\",\"Cordy\",\"Coreen\",\"Corella\",\"Corenda\",\"Corene\",\"Coretta\",\"Corette\",\"Corey\",\"Cori\",\"Corie\",\"Corilla\",\"Corina\",\"Corine\",\"Corinna\",\"Corinne\",\"Coriss\",\"Corissa\",\"Corliss\",\"Corly\",\"Cornela\",\"Cornelia\",\"Cornelle\",\"Cornie\",\"Corny\",\"Correna\",\"Correy\",\"Corri\",\"Corrianne\",\"Corrie\",\"Corrina\",\"Corrine\",\"Corrinne\",\"Corry\",\"Cortney\",\"Cory\",\"Cosetta\",\"Cosette\",\"Costanza\",\"Courtenay\",\"Courtnay\",\"Courtney\",\"Crin\",\"Cris\",\"Crissie\",\"Crissy\",\"Crista\",\"Cristabel\",\"Cristal\",\"Cristen\",\"Cristi\",\"Cristie\",\"Cristin\",\"Cristina\",\"Cristine\",\"Cristionna\",\"Cristy\",\"Crysta\",\"Crystal\",\"Crystie\",\"Cthrine\",\"Cyb\",\"Cybil\",\"Cybill\",\"Cymbre\",\"Cynde\",\"Cyndi\",\"Cyndia\",\"Cyndie\",\"Cyndy\",\"Cynthea\",\"Cynthia\",\"Cynthie\",\"Cynthy\",\"Dacey\",\"Dacia\",\"Dacie\",\"Dacy\",\"Dael\",\"Daffi\",\"Daffie\",\"Daffy\",\"Dagmar\",\"Dahlia\",\"Daile\",\"Daisey\",\"Daisi\",\"Daisie\",\"Daisy\",\"Dale\",\"Dalenna\",\"Dalia\",\"Dalila\",\"Dallas\",\"Daloris\",\"Damara\",\"Damaris\",\"Damita\",\"Dana\",\"Danell\",\"Danella\",\"Danette\",\"Dani\",\"Dania\",\"Danica\",\"Danice\",\"Daniela\",\"Daniele\",\"Daniella\",\"Danielle\",\"Danika\",\"Danila\",\"Danit\",\"Danita\",\"Danna\",\"Danni\",\"Dannie\",\"Danny\",\"Dannye\",\"Danya\",\"Danyelle\",\"Danyette\",\"Daphene\",\"Daphna\",\"Daphne\",\"Dara\",\"Darb\",\"Darbie\",\"Darby\",\"Darcee\",\"Darcey\",\"Darci\",\"Darcie\",\"Darcy\",\"Darda\",\"Dareen\",\"Darell\",\"Darelle\",\"Dari\",\"Daria\",\"Darice\",\"Darla\",\"Darleen\",\"Darlene\",\"Darline\",\"Darlleen\",\"Daron\",\"Darrelle\",\"Darryl\",\"Darsey\",\"Darsie\",\"Darya\",\"Daryl\",\"Daryn\",\"Dasha\",\"Dasi\",\"Dasie\",\"Dasya\",\"Datha\",\"Daune\",\"Daveen\",\"Daveta\",\"Davida\",\"Davina\",\"Davine\",\"Davita\",\"Dawn\",\"Dawna\",\"Dayle\",\"Dayna\",\"Ddene\",\"De\",\"Deana\",\"Deane\",\"Deanna\",\"Deanne\",\"Deb\",\"Debbi\",\"Debbie\",\"Debby\",\"Debee\",\"Debera\",\"Debi\",\"Debor\",\"Debora\",\"Deborah\",\"Debra\",\"Dede\",\"Dedie\",\"Dedra\",\"Dee\",\"Deeann\",\"Deeanne\",\"Deedee\",\"Deena\",\"Deerdre\",\"Deeyn\",\"Dehlia\",\"Deidre\",\"Deina\",\"Deirdre\",\"Del\",\"Dela\",\"Delcina\",\"Delcine\",\"Delia\",\"Delila\",\"Delilah\",\"Delinda\",\"Dell\",\"Della\",\"Delly\",\"Delora\",\"Delores\",\"Deloria\",\"Deloris\",\"Delphine\",\"Delphinia\",\"Demeter\",\"Demetra\",\"Demetria\",\"Demetris\",\"Dena\",\"Deni\",\"Denice\",\"Denise\",\"Denna\",\"Denni\",\"Dennie\",\"Denny\",\"Deny\",\"Denys\",\"Denyse\",\"Deonne\",\"Desdemona\",\"Desirae\",\"Desiree\",\"Desiri\",\"Deva\",\"Devan\",\"Devi\",\"Devin\",\"Devina\",\"Devinne\",\"Devon\",\"Devondra\",\"Devonna\",\"Devonne\",\"Devora\",\"Di\",\"Diahann\",\"Dian\",\"Diana\",\"Diandra\",\"Diane\",\"Diane-marie\",\"Dianemarie\",\"Diann\",\"Dianna\",\"Dianne\",\"Diannne\",\"Didi\",\"Dido\",\"Diena\",\"Dierdre\",\"Dina\",\"Dinah\",\"Dinnie\",\"Dinny\",\"Dion\",\"Dione\",\"Dionis\",\"Dionne\",\"Dita\",\"Dix\",\"Dixie\",\"Dniren\",\"Dode\",\"Dodi\",\"Dodie\",\"Dody\",\"Doe\",\"Doll\",\"Dolley\",\"Dolli\",\"Dollie\",\"Dolly\",\"Dolores\",\"Dolorita\",\"Doloritas\",\"Domeniga\",\"Dominga\",\"Domini\",\"Dominica\",\"Dominique\",\"Dona\",\"Donella\",\"Donelle\",\"Donetta\",\"Donia\",\"Donica\",\"Donielle\",\"Donna\",\"Donnamarie\",\"Donni\",\"Donnie\",\"Donny\",\"Dora\",\"Doralia\",\"Doralin\",\"Doralyn\",\"Doralynn\",\"Doralynne\",\"Dore\",\"Doreen\",\"Dorelia\",\"Dorella\",\"Dorelle\",\"Dorena\",\"Dorene\",\"Doretta\",\"Dorette\",\"Dorey\",\"Dori\",\"Doria\",\"Dorian\",\"Dorice\",\"Dorie\",\"Dorine\",\"Doris\",\"Dorisa\",\"Dorise\",\"Dorita\",\"Doro\",\"Dorolice\",\"Dorolisa\",\"Dorotea\",\"Doroteya\",\"Dorothea\",\"Dorothee\",\"Dorothy\",\"Dorree\",\"Dorri\",\"Dorrie\",\"Dorris\",\"Dorry\",\"Dorthea\",\"Dorthy\",\"Dory\",\"Dosi\",\"Dot\",\"Doti\",\"Dotti\",\"Dottie\",\"Dotty\",\"Dre\",\"Dreddy\",\"Dredi\",\"Drona\",\"Dru\",\"Druci\",\"Drucie\",\"Drucill\",\"Drucy\",\"Drusi\",\"Drusie\",\"Drusilla\",\"Drusy\",\"Dulce\",\"Dulcea\",\"Dulci\",\"Dulcia\",\"Dulciana\",\"Dulcie\",\"Dulcine\",\"Dulcinea\",\"Dulcy\",\"Dulsea\",\"Dusty\",\"Dyan\",\"Dyana\",\"Dyane\",\"Dyann\",\"Dyanna\",\"Dyanne\",\"Dyna\",\"Dynah\",\"Eachelle\",\"Eada\",\"Eadie\",\"Eadith\",\"Ealasaid\",\"Eartha\",\"Easter\",\"Eba\",\"Ebba\",\"Ebonee\",\"Ebony\",\"Eda\",\"Eddi\",\"Eddie\",\"Eddy\",\"Ede\",\"Edee\",\"Edeline\",\"Eden\",\"Edi\",\"Edie\",\"Edin\",\"Edita\",\"Edith\",\"Editha\",\"Edithe\",\"Ediva\",\"Edna\",\"Edwina\",\"Edy\",\"Edyth\",\"Edythe\",\"Effie\",\"Eileen\",\"Eilis\",\"Eimile\",\"Eirena\",\"Ekaterina\",\"Elaina\",\"Elaine\",\"Elana\",\"Elane\",\"Elayne\",\"Elberta\",\"Elbertina\",\"Elbertine\",\"Eleanor\",\"Eleanora\",\"Eleanore\",\"Electra\",\"Eleen\",\"Elena\",\"Elene\",\"Eleni\",\"Elenore\",\"Eleonora\",\"Eleonore\",\"Elfie\",\"Elfreda\",\"Elfrida\",\"Elfrieda\",\"Elga\",\"Elianora\",\"Elianore\",\"Elicia\",\"Elie\",\"Elinor\",\"Elinore\",\"Elisa\",\"Elisabet\",\"Elisabeth\",\"Elisabetta\",\"Elise\",\"Elisha\",\"Elissa\",\"Elita\",\"Eliza\",\"Elizabet\",\"Elizabeth\",\"Elka\",\"Elke\",\"Ella\",\"Elladine\",\"Elle\",\"Ellen\",\"Ellene\",\"Ellette\",\"Elli\",\"Ellie\",\"Ellissa\",\"Elly\",\"Ellyn\",\"Ellynn\",\"Elmira\",\"Elna\",\"Elnora\",\"Elnore\",\"Eloisa\",\"Eloise\",\"Elonore\",\"Elora\",\"Elsa\",\"Elsbeth\",\"Else\",\"Elset\",\"Elsey\",\"Elsi\",\"Elsie\",\"Elsinore\",\"Elspeth\",\"Elsy\",\"Elva\",\"Elvera\",\"Elvina\",\"Elvira\",\"Elwira\",\"Elyn\",\"Elyse\",\"Elysee\",\"Elysha\",\"Elysia\",\"Elyssa\",\"Em\",\"Ema\",\"Emalee\",\"Emalia\",\"Emelda\",\"Emelia\",\"Emelina\",\"Emeline\",\"Emelita\",\"Emelyne\",\"Emera\",\"Emilee\",\"Emili\",\"Emilia\",\"Emilie\",\"Emiline\",\"Emily\",\"Emlyn\",\"Emlynn\",\"Emlynne\",\"Emma\",\"Emmalee\",\"Emmaline\",\"Emmalyn\",\"Emmalynn\",\"Emmalynne\",\"Emmeline\",\"Emmey\",\"Emmi\",\"Emmie\",\"Emmy\",\"Emmye\",\"Emogene\",\"Emyle\",\"Emylee\",\"Engracia\",\"Enid\",\"Enrica\",\"Enrichetta\",\"Enrika\",\"Enriqueta\",\"Eolanda\",\"Eolande\",\"Eran\",\"Erda\",\"Erena\",\"Erica\",\"Ericha\",\"Ericka\",\"Erika\",\"Erin\",\"Erina\",\"Erinn\",\"Erinna\",\"Erma\",\"Ermengarde\",\"Ermentrude\",\"Ermina\",\"Erminia\",\"Erminie\",\"Erna\",\"Ernaline\",\"Ernesta\",\"Ernestine\",\"Ertha\",\"Eryn\",\"Esma\",\"Esmaria\",\"Esme\",\"Esmeralda\",\"Essa\",\"Essie\",\"Essy\",\"Esta\",\"Estel\",\"Estele\",\"Estell\",\"Estella\",\"Estelle\",\"Ester\",\"Esther\",\"Estrella\",\"Estrellita\",\"Ethel\",\"Ethelda\",\"Ethelin\",\"Ethelind\",\"Etheline\",\"Ethelyn\",\"Ethyl\",\"Etta\",\"Etti\",\"Ettie\",\"Etty\",\"Eudora\",\"Eugenia\",\"Eugenie\",\"Eugine\",\"Eula\",\"Eulalie\",\"Eunice\",\"Euphemia\",\"Eustacia\",\"Eva\",\"Evaleen\",\"Evangelia\",\"Evangelin\",\"Evangelina\",\"Evangeline\",\"Evania\",\"Evanne\",\"Eve\",\"Eveleen\",\"Evelina\",\"Eveline\",\"Evelyn\",\"Evey\",\"Evie\",\"Evita\",\"Evonne\",\"Evvie\",\"Evvy\",\"Evy\",\"Eyde\",\"Eydie\",\"Ezmeralda\",\"Fae\",\"Faina\",\"Faith\",\"Fallon\",\"Fan\",\"Fanchette\",\"Fanchon\",\"Fancie\",\"Fancy\",\"Fanechka\",\"Fania\",\"Fanni\",\"Fannie\",\"Fanny\",\"Fanya\",\"Fara\",\"Farah\",\"Farand\",\"Farica\",\"Farra\",\"Farrah\",\"Farrand\",\"Faun\",\"Faunie\",\"Faustina\",\"Faustine\",\"Fawn\",\"Fawne\",\"Fawnia\",\"Fay\",\"Faydra\",\"Faye\",\"Fayette\",\"Fayina\",\"Fayre\",\"Fayth\",\"Faythe\",\"Federica\",\"Fedora\",\"Felecia\",\"Felicdad\",\"Felice\",\"Felicia\",\"Felicity\",\"Felicle\",\"Felipa\",\"Felisha\",\"Felita\",\"Feliza\",\"Fenelia\",\"Feodora\",\"Ferdinanda\",\"Ferdinande\",\"Fern\",\"Fernanda\",\"Fernande\",\"Fernandina\",\"Ferne\",\"Fey\",\"Fiann\",\"Fianna\",\"Fidela\",\"Fidelia\",\"Fidelity\",\"Fifi\",\"Fifine\",\"Filia\",\"Filide\",\"Filippa\",\"Fina\",\"Fiona\",\"Fionna\",\"Fionnula\",\"Fiorenze\",\"Fleur\",\"Fleurette\",\"Flo\",\"Flor\",\"Flora\",\"Florance\",\"Flore\",\"Florella\",\"Florence\",\"Florencia\",\"Florentia\",\"Florenza\",\"Florette\",\"Flori\",\"Floria\",\"Florida\",\"Florie\",\"Florina\",\"Florinda\",\"Floris\",\"Florri\",\"Florrie\",\"Florry\",\"Flory\",\"Flossi\",\"Flossie\",\"Flossy\",\"Flss\",\"Fran\",\"Francene\",\"Frances\",\"Francesca\",\"Francine\",\"Francisca\",\"Franciska\",\"Francoise\",\"Francyne\",\"Frank\",\"Frankie\",\"Franky\",\"Franni\",\"Frannie\",\"Franny\",\"Frayda\",\"Fred\",\"Freda\",\"Freddi\",\"Freddie\",\"Freddy\",\"Fredelia\",\"Frederica\",\"Fredericka\",\"Frederique\",\"Fredi\",\"Fredia\",\"Fredra\",\"Fredrika\",\"Freida\",\"Frieda\",\"Friederike\",\"Fulvia\",\"Gabbey\",\"Gabbi\",\"Gabbie\",\"Gabey\",\"Gabi\",\"Gabie\",\"Gabriel\",\"Gabriela\",\"Gabriell\",\"Gabriella\",\"Gabrielle\",\"Gabriellia\",\"Gabrila\",\"Gaby\",\"Gae\",\"Gael\",\"Gail\",\"Gale\",\"Galina\",\"Garland\",\"Garnet\",\"Garnette\",\"Gates\",\"Gavra\",\"Gavrielle\",\"Gay\",\"Gaye\",\"Gayel\",\"Gayla\",\"Gayle\",\"Gayleen\",\"Gaylene\",\"Gaynor\",\"Gelya\",\"Gena\",\"Gene\",\"Geneva\",\"Genevieve\",\"Genevra\",\"Genia\",\"Genna\",\"Genni\",\"Gennie\",\"Gennifer\",\"Genny\",\"Genovera\",\"Genvieve\",\"George\",\"Georgeanna\",\"Georgeanne\",\"Georgena\",\"Georgeta\",\"Georgetta\",\"Georgette\",\"Georgia\",\"Georgiana\",\"Georgianna\",\"Georgianne\",\"Georgie\",\"Georgina\",\"Georgine\",\"Geralda\",\"Geraldine\",\"Gerda\",\"Gerhardine\",\"Geri\",\"Gerianna\",\"Gerianne\",\"Gerladina\",\"Germain\",\"Germaine\",\"Germana\",\"Gerri\",\"Gerrie\",\"Gerrilee\",\"Gerry\",\"Gert\",\"Gerta\",\"Gerti\",\"Gertie\",\"Gertrud\",\"Gertruda\",\"Gertrude\",\"Gertrudis\",\"Gerty\",\"Giacinta\",\"Giana\",\"Gianina\",\"Gianna\",\"Gigi\",\"Gilberta\",\"Gilberte\",\"Gilbertina\",\"Gilbertine\",\"Gilda\",\"Gilemette\",\"Gill\",\"Gillan\",\"Gilli\",\"Gillian\",\"Gillie\",\"Gilligan\",\"Gilly\",\"Gina\",\"Ginelle\",\"Ginevra\",\"Ginger\",\"Ginni\",\"Ginnie\",\"Ginnifer\",\"Ginny\",\"Giorgia\",\"Giovanna\",\"Gipsy\",\"Giralda\",\"Gisela\",\"Gisele\",\"Gisella\",\"Giselle\",\"Giuditta\",\"Giulia\",\"Giulietta\",\"Giustina\",\"Gizela\",\"Glad\",\"Gladi\",\"Gladys\",\"Gleda\",\"Glen\",\"Glenda\",\"Glenine\",\"Glenn\",\"Glenna\",\"Glennie\",\"Glennis\",\"Glori\",\"Gloria\",\"Gloriana\",\"Gloriane\",\"Glory\",\"Glyn\",\"Glynda\",\"Glynis\",\"Glynnis\",\"Gnni\",\"Godiva\",\"Golda\",\"Goldarina\",\"Goldi\",\"Goldia\",\"Goldie\",\"Goldina\",\"Goldy\",\"Grace\",\"Gracia\",\"Gracie\",\"Grata\",\"Gratia\",\"Gratiana\",\"Gray\",\"Grayce\",\"Grazia\",\"Greer\",\"Greta\",\"Gretal\",\"Gretchen\",\"Grete\",\"Gretel\",\"Grethel\",\"Gretna\",\"Gretta\",\"Grier\",\"Griselda\",\"Grissel\",\"Guendolen\",\"Guenevere\",\"Guenna\",\"Guglielma\",\"Gui\",\"Guillema\",\"Guillemette\",\"Guinevere\",\"Guinna\",\"Gunilla\",\"Gus\",\"Gusella\",\"Gussi\",\"Gussie\",\"Gussy\",\"Gusta\",\"Gusti\",\"Gustie\",\"Gusty\",\"Gwen\",\"Gwendolen\",\"Gwendolin\",\"Gwendolyn\",\"Gweneth\",\"Gwenette\",\"Gwenneth\",\"Gwenni\",\"Gwennie\",\"Gwenny\",\"Gwenora\",\"Gwenore\",\"Gwyn\",\"Gwyneth\",\"Gwynne\",\"Gypsy\",\"Hadria\",\"Hailee\",\"Haily\",\"Haleigh\",\"Halette\",\"Haley\",\"Hali\",\"Halie\",\"Halimeda\",\"Halley\",\"Halli\",\"Hallie\",\"Hally\",\"Hana\",\"Hanna\",\"Hannah\",\"Hanni\",\"Hannie\",\"Hannis\",\"Hanny\",\"Happy\",\"Harlene\",\"Harley\",\"Harli\",\"Harlie\",\"Harmonia\",\"Harmonie\",\"Harmony\",\"Harri\",\"Harrie\",\"Harriet\",\"Harriett\",\"Harrietta\",\"Harriette\",\"Harriot\",\"Harriott\",\"Hatti\",\"Hattie\",\"Hatty\",\"Hayley\",\"Hazel\",\"Heath\",\"Heather\",\"Heda\",\"Hedda\",\"Heddi\",\"Heddie\",\"Hedi\",\"Hedvig\",\"Hedvige\",\"Hedwig\",\"Hedwiga\",\"Hedy\",\"Heida\",\"Heidi\",\"Heidie\",\"Helaina\",\"Helaine\",\"Helen\",\"Helen-elizabeth\",\"Helena\",\"Helene\",\"Helenka\",\"Helga\",\"Helge\",\"Helli\",\"Heloise\",\"Helsa\",\"Helyn\",\"Hendrika\",\"Henka\",\"Henrie\",\"Henrieta\",\"Henrietta\",\"Henriette\",\"Henryetta\",\"Hephzibah\",\"Hermia\",\"Hermina\",\"Hermine\",\"Herminia\",\"Hermione\",\"Herta\",\"Hertha\",\"Hester\",\"Hesther\",\"Hestia\",\"Hetti\",\"Hettie\",\"Hetty\",\"Hilary\",\"Hilda\",\"Hildagard\",\"Hildagarde\",\"Hilde\",\"Hildegaard\",\"Hildegarde\",\"Hildy\",\"Hillary\",\"Hilliary\",\"Hinda\",\"Holli\",\"Hollie\",\"Holly\",\"Holly-anne\",\"Hollyanne\",\"Honey\",\"Honor\",\"Honoria\",\"Hope\",\"Horatia\",\"Hortense\",\"Hortensia\",\"Hulda\",\"Hyacinth\",\"Hyacintha\",\"Hyacinthe\",\"Hyacinthia\",\"Hyacinthie\",\"Hynda\",\"Ianthe\",\"Ibbie\",\"Ibby\",\"Ida\",\"Idalia\",\"Idalina\",\"Idaline\",\"Idell\",\"Idelle\",\"Idette\",\"Ileana\",\"Ileane\",\"Ilene\",\"Ilise\",\"Ilka\",\"Illa\",\"Ilsa\",\"Ilse\",\"Ilysa\",\"Ilyse\",\"Ilyssa\",\"Imelda\",\"Imogen\",\"Imogene\",\"Imojean\",\"Ina\",\"Indira\",\"Ines\",\"Inesita\",\"Inessa\",\"Inez\",\"Inga\",\"Ingaberg\",\"Ingaborg\",\"Inge\",\"Ingeberg\",\"Ingeborg\",\"Inger\",\"Ingrid\",\"Ingunna\",\"Inna\",\"Iolande\",\"Iolanthe\",\"Iona\",\"Iormina\",\"Ira\",\"Irena\",\"Irene\",\"Irina\",\"Iris\",\"Irita\",\"Irma\",\"Isa\",\"Isabel\",\"Isabelita\",\"Isabella\",\"Isabelle\",\"Isadora\",\"Isahella\",\"Iseabal\",\"Isidora\",\"Isis\",\"Isobel\",\"Issi\",\"Issie\",\"Issy\",\"Ivett\",\"Ivette\",\"Ivie\",\"Ivonne\",\"Ivory\",\"Ivy\",\"Izabel\",\"Jacenta\",\"Jacinda\",\"Jacinta\",\"Jacintha\",\"Jacinthe\",\"Jackelyn\",\"Jacki\",\"Jackie\",\"Jacklin\",\"Jacklyn\",\"Jackquelin\",\"Jackqueline\",\"Jacky\",\"Jaclin\",\"Jaclyn\",\"Jacquelin\",\"Jacqueline\",\"Jacquelyn\",\"Jacquelynn\",\"Jacquenetta\",\"Jacquenette\",\"Jacquetta\",\"Jacquette\",\"Jacqui\",\"Jacquie\",\"Jacynth\",\"Jada\",\"Jade\",\"Jaime\",\"Jaimie\",\"Jaine\",\"Jami\",\"Jamie\",\"Jamima\",\"Jammie\",\"Jan\",\"Jana\",\"Janaya\",\"Janaye\",\"Jandy\",\"Jane\",\"Janean\",\"Janeczka\",\"Janeen\",\"Janel\",\"Janela\",\"Janella\",\"Janelle\",\"Janene\",\"Janenna\",\"Janessa\",\"Janet\",\"Janeta\",\"Janetta\",\"Janette\",\"Janeva\",\"Janey\",\"Jania\",\"Janice\",\"Janie\",\"Janifer\",\"Janina\",\"Janine\",\"Janis\",\"Janith\",\"Janka\",\"Janna\",\"Jannel\",\"Jannelle\",\"Janot\",\"Jany\",\"Jaquelin\",\"Jaquelyn\",\"Jaquenetta\",\"Jaquenette\",\"Jaquith\",\"Jasmin\",\"Jasmina\",\"Jasmine\",\"Jayme\",\"Jaymee\",\"Jayne\",\"Jaynell\",\"Jazmin\",\"Jean\",\"Jeana\",\"Jeane\",\"Jeanelle\",\"Jeanette\",\"Jeanie\",\"Jeanine\",\"Jeanna\",\"Jeanne\",\"Jeannette\",\"Jeannie\",\"Jeannine\",\"Jehanna\",\"Jelene\",\"Jemie\",\"Jemima\",\"Jemimah\",\"Jemmie\",\"Jemmy\",\"Jen\",\"Jena\",\"Jenda\",\"Jenelle\",\"Jeni\",\"Jenica\",\"Jeniece\",\"Jenifer\",\"Jeniffer\",\"Jenilee\",\"Jenine\",\"Jenn\",\"Jenna\",\"Jennee\",\"Jennette\",\"Jenni\",\"Jennica\",\"Jennie\",\"Jennifer\",\"Jennilee\",\"Jennine\",\"Jenny\",\"Jeralee\",\"Jere\",\"Jeri\",\"Jermaine\",\"Jerrie\",\"Jerrilee\",\"Jerrilyn\",\"Jerrine\",\"Jerry\",\"Jerrylee\",\"Jess\",\"Jessa\",\"Jessalin\",\"Jessalyn\",\"Jessamine\",\"Jessamyn\",\"Jesse\",\"Jesselyn\",\"Jessi\",\"Jessica\",\"Jessie\",\"Jessika\",\"Jessy\",\"Jewel\",\"Jewell\",\"Jewelle\",\"Jill\",\"Jillana\",\"Jillane\",\"Jillayne\",\"Jilleen\",\"Jillene\",\"Jilli\",\"Jillian\",\"Jillie\",\"Jilly\",\"Jinny\",\"Jo\",\"Jo-ann\",\"Jo-anne\",\"Joan\",\"Joana\",\"Joane\",\"Joanie\",\"Joann\",\"Joanna\",\"Joanne\",\"Joannes\",\"Jobey\",\"Jobi\",\"Jobie\",\"Jobina\",\"Joby\",\"Jobye\",\"Jobyna\",\"Jocelin\",\"Joceline\",\"Jocelyn\",\"Jocelyne\",\"Jodee\",\"Jodi\",\"Jodie\",\"Jody\",\"Joeann\",\"Joela\",\"Joelie\",\"Joell\",\"Joella\",\"Joelle\",\"Joellen\",\"Joelly\",\"Joellyn\",\"Joelynn\",\"Joete\",\"Joey\",\"Johanna\",\"Johannah\",\"Johna\",\"Johnath\",\"Johnette\",\"Johnna\",\"Joice\",\"Jojo\",\"Jolee\",\"Joleen\",\"Jolene\",\"Joletta\",\"Joli\",\"Jolie\",\"Joline\",\"Joly\",\"Jolyn\",\"Jolynn\",\"Jonell\",\"Joni\",\"Jonie\",\"Jonis\",\"Jordain\",\"Jordan\",\"Jordana\",\"Jordanna\",\"Jorey\",\"Jori\",\"Jorie\",\"Jorrie\",\"Jorry\",\"Joscelin\",\"Josee\",\"Josefa\",\"Josefina\",\"Josepha\",\"Josephina\",\"Josephine\",\"Josey\",\"Josi\",\"Josie\",\"Josselyn\",\"Josy\",\"Jourdan\",\"Joy\",\"Joya\",\"Joyan\",\"Joyann\",\"Joyce\",\"Joycelin\",\"Joye\",\"Jsandye\",\"Juana\",\"Juanita\",\"Judi\",\"Judie\",\"Judith\",\"Juditha\",\"Judy\",\"Judye\",\"Juieta\",\"Julee\",\"Juli\",\"Julia\",\"Juliana\",\"Juliane\",\"Juliann\",\"Julianna\",\"Julianne\",\"Julie\",\"Julienne\",\"Juliet\",\"Julieta\",\"Julietta\",\"Juliette\",\"Julina\",\"Juline\",\"Julissa\",\"Julita\",\"June\",\"Junette\",\"Junia\",\"Junie\",\"Junina\",\"Justina\",\"Justine\",\"Justinn\",\"Jyoti\",\"Kacey\",\"Kacie\",\"Kacy\",\"Kaela\",\"Kai\",\"Kaia\",\"Kaila\",\"Kaile\",\"Kailey\",\"Kaitlin\",\"Kaitlyn\",\"Kaitlynn\",\"Kaja\",\"Kakalina\",\"Kala\",\"Kaleena\",\"Kali\",\"Kalie\",\"Kalila\",\"Kalina\",\"Kalinda\",\"Kalindi\",\"Kalli\",\"Kally\",\"Kameko\",\"Kamila\",\"Kamilah\",\"Kamillah\",\"Kandace\",\"Kandy\",\"Kania\",\"Kanya\",\"Kara\",\"Kara-lynn\",\"Karalee\",\"Karalynn\",\"Kare\",\"Karee\",\"Karel\",\"Karen\",\"Karena\",\"Kari\",\"Karia\",\"Karie\",\"Karil\",\"Karilynn\",\"Karin\",\"Karina\",\"Karine\",\"Kariotta\",\"Karisa\",\"Karissa\",\"Karita\",\"Karla\",\"Karlee\",\"Karleen\",\"Karlen\",\"Karlene\",\"Karlie\",\"Karlotta\",\"Karlotte\",\"Karly\",\"Karlyn\",\"Karmen\",\"Karna\",\"Karol\",\"Karola\",\"Karole\",\"Karolina\",\"Karoline\",\"Karoly\",\"Karon\",\"Karrah\",\"Karrie\",\"Karry\",\"Kary\",\"Karyl\",\"Karylin\",\"Karyn\",\"Kasey\",\"Kass\",\"Kassandra\",\"Kassey\",\"Kassi\",\"Kassia\",\"Kassie\",\"Kat\",\"Kata\",\"Katalin\",\"Kate\",\"Katee\",\"Katerina\",\"Katerine\",\"Katey\",\"Kath\",\"Katha\",\"Katharina\",\"Katharine\",\"Katharyn\",\"Kathe\",\"Katherina\",\"Katherine\",\"Katheryn\",\"Kathi\",\"Kathie\",\"Kathleen\",\"Kathlin\",\"Kathrine\",\"Kathryn\",\"Kathryne\",\"Kathy\",\"Kathye\",\"Kati\",\"Katie\",\"Katina\",\"Katine\",\"Katinka\",\"Katleen\",\"Katlin\",\"Katrina\",\"Katrine\",\"Katrinka\",\"Katti\",\"Kattie\",\"Katuscha\",\"Katusha\",\"Katy\",\"Katya\",\"Kay\",\"Kaycee\",\"Kaye\",\"Kayla\",\"Kayle\",\"Kaylee\",\"Kayley\",\"Kaylil\",\"Kaylyn\",\"Keeley\",\"Keelia\",\"Keely\",\"Kelcey\",\"Kelci\",\"Kelcie\",\"Kelcy\",\"Kelila\",\"Kellen\",\"Kelley\",\"Kelli\",\"Kellia\",\"Kellie\",\"Kellina\",\"Kellsie\",\"Kelly\",\"Kellyann\",\"Kelsey\",\"Kelsi\",\"Kelsy\",\"Kendra\",\"Kendre\",\"Kenna\",\"Keri\",\"Keriann\",\"Kerianne\",\"Kerri\",\"Kerrie\",\"Kerrill\",\"Kerrin\",\"Kerry\",\"Kerstin\",\"Kesley\",\"Keslie\",\"Kessia\",\"Kessiah\",\"Ketti\",\"Kettie\",\"Ketty\",\"Kevina\",\"Kevyn\",\"Ki\",\"Kiah\",\"Kial\",\"Kiele\",\"Kiersten\",\"Kikelia\",\"Kiley\",\"Kim\",\"Kimberlee\",\"Kimberley\",\"Kimberli\",\"Kimberly\",\"Kimberlyn\",\"Kimbra\",\"Kimmi\",\"Kimmie\",\"Kimmy\",\"Kinna\",\"Kip\",\"Kipp\",\"Kippie\",\"Kippy\",\"Kira\",\"Kirbee\",\"Kirbie\",\"Kirby\",\"Kiri\",\"Kirsten\",\"Kirsteni\",\"Kirsti\",\"Kirstin\",\"Kirstyn\",\"Kissee\",\"Kissiah\",\"Kissie\",\"Kit\",\"Kitti\",\"Kittie\",\"Kitty\",\"Kizzee\",\"Kizzie\",\"Klara\",\"Klarika\",\"Klarrisa\",\"Konstance\",\"Konstanze\",\"Koo\",\"Kora\",\"Koral\",\"Koralle\",\"Kordula\",\"Kore\",\"Korella\",\"Koren\",\"Koressa\",\"Kori\",\"Korie\",\"Korney\",\"Korrie\",\"Korry\",\"Kris\",\"Krissie\",\"Krissy\",\"Krista\",\"Kristal\",\"Kristan\",\"Kriste\",\"Kristel\",\"Kristen\",\"Kristi\",\"Kristien\",\"Kristin\",\"Kristina\",\"Kristine\",\"Kristy\",\"Kristyn\",\"Krysta\",\"Krystal\",\"Krystalle\",\"Krystle\",\"Krystyna\",\"Kyla\",\"Kyle\",\"Kylen\",\"Kylie\",\"Kylila\",\"Kylynn\",\"Kym\",\"Kynthia\",\"Kyrstin\",\"Lacee\",\"Lacey\",\"Lacie\",\"Lacy\",\"Ladonna\",\"Laetitia\",\"Laina\",\"Lainey\",\"Lana\",\"Lanae\",\"Lane\",\"Lanette\",\"Laney\",\"Lani\",\"Lanie\",\"Lanita\",\"Lanna\",\"Lanni\",\"Lanny\",\"Lara\",\"Laraine\",\"Lari\",\"Larina\",\"Larine\",\"Larisa\",\"Larissa\",\"Lark\",\"Laryssa\",\"Latashia\",\"Latia\",\"Latisha\",\"Latrena\",\"Latrina\",\"Laura\",\"Lauraine\",\"Laural\",\"Lauralee\",\"Laure\",\"Lauree\",\"Laureen\",\"Laurel\",\"Laurella\",\"Lauren\",\"Laurena\",\"Laurene\",\"Lauretta\",\"Laurette\",\"Lauri\",\"Laurianne\",\"Laurice\",\"Laurie\",\"Lauryn\",\"Lavena\",\"Laverna\",\"Laverne\",\"Lavina\",\"Lavinia\",\"Lavinie\",\"Layla\",\"Layne\",\"Layney\",\"Lea\",\"Leah\",\"Leandra\",\"Leann\",\"Leanna\",\"Leanor\",\"Leanora\",\"Lebbie\",\"Leda\",\"Lee\",\"Leeann\",\"Leeanne\",\"Leela\",\"Leelah\",\"Leena\",\"Leesa\",\"Leese\",\"Legra\",\"Leia\",\"Leigh\",\"Leigha\",\"Leila\",\"Leilah\",\"Leisha\",\"Lela\",\"Lelah\",\"Leland\",\"Lelia\",\"Lena\",\"Lenee\",\"Lenette\",\"Lenka\",\"Lenna\",\"Lenora\",\"Lenore\",\"Leodora\",\"Leoine\",\"Leola\",\"Leoline\",\"Leona\",\"Leonanie\",\"Leone\",\"Leonelle\",\"Leonie\",\"Leonora\",\"Leonore\",\"Leontine\",\"Leontyne\",\"Leora\",\"Leshia\",\"Lesley\",\"Lesli\",\"Leslie\",\"Lesly\",\"Lesya\",\"Leta\",\"Lethia\",\"Leticia\",\"Letisha\",\"Letitia\",\"Letizia\",\"Letta\",\"Letti\",\"Lettie\",\"Letty\",\"Lexi\",\"Lexie\",\"Lexine\",\"Lexis\",\"Lexy\",\"Leyla\",\"Lezlie\",\"Lia\",\"Lian\",\"Liana\",\"Liane\",\"Lianna\",\"Lianne\",\"Lib\",\"Libbey\",\"Libbi\",\"Libbie\",\"Libby\",\"Licha\",\"Lida\",\"Lidia\",\"Liesa\",\"Lil\",\"Lila\",\"Lilah\",\"Lilas\",\"Lilia\",\"Lilian\",\"Liliane\",\"Lilias\",\"Lilith\",\"Lilla\",\"Lilli\",\"Lillian\",\"Lillis\",\"Lilllie\",\"Lilly\",\"Lily\",\"Lilyan\",\"Lin\",\"Lina\",\"Lind\",\"Linda\",\"Lindi\",\"Lindie\",\"Lindsay\",\"Lindsey\",\"Lindsy\",\"Lindy\",\"Linea\",\"Linell\",\"Linet\",\"Linette\",\"Linn\",\"Linnea\",\"Linnell\",\"Linnet\",\"Linnie\",\"Linzy\",\"Lira\",\"Lisa\",\"Lisabeth\",\"Lisbeth\",\"Lise\",\"Lisetta\",\"Lisette\",\"Lisha\",\"Lishe\",\"Lissa\",\"Lissi\",\"Lissie\",\"Lissy\",\"Lita\",\"Liuka\",\"Liv\",\"Liva\",\"Livia\",\"Livvie\",\"Livvy\",\"Livvyy\",\"Livy\",\"Liz\",\"Liza\",\"Lizabeth\",\"Lizbeth\",\"Lizette\",\"Lizzie\",\"Lizzy\",\"Loella\",\"Lois\",\"Loise\",\"Lola\",\"Loleta\",\"Lolita\",\"Lolly\",\"Lona\",\"Lonee\",\"Loni\",\"Lonna\",\"Lonni\",\"Lonnie\",\"Lora\",\"Lorain\",\"Loraine\",\"Loralee\",\"Loralie\",\"Loralyn\",\"Loree\",\"Loreen\",\"Lorelei\",\"Lorelle\",\"Loren\",\"Lorena\",\"Lorene\",\"Lorenza\",\"Loretta\",\"Lorette\",\"Lori\",\"Loria\",\"Lorianna\",\"Lorianne\",\"Lorie\",\"Lorilee\",\"Lorilyn\",\"Lorinda\",\"Lorine\",\"Lorita\",\"Lorna\",\"Lorne\",\"Lorraine\",\"Lorrayne\",\"Lorri\",\"Lorrie\",\"Lorrin\",\"Lorry\",\"Lory\",\"Lotta\",\"Lotte\",\"Lotti\",\"Lottie\",\"Lotty\",\"Lou\",\"Louella\",\"Louisa\",\"Louise\",\"Louisette\",\"Loutitia\",\"Lu\",\"Luce\",\"Luci\",\"Lucia\",\"Luciana\",\"Lucie\",\"Lucienne\",\"Lucila\",\"Lucilia\",\"Lucille\",\"Lucina\",\"Lucinda\",\"Lucine\",\"Lucita\",\"Lucky\",\"Lucretia\",\"Lucy\",\"Ludovika\",\"Luella\",\"Luelle\",\"Luisa\",\"Luise\",\"Lula\",\"Lulita\",\"Lulu\",\"Lura\",\"Lurette\",\"Lurleen\",\"Lurlene\",\"Lurline\",\"Lusa\",\"Luz\",\"Lyda\",\"Lydia\",\"Lydie\",\"Lyn\",\"Lynda\",\"Lynde\",\"Lyndel\",\"Lyndell\",\"Lyndsay\",\"Lyndsey\",\"Lyndsie\",\"Lyndy\",\"Lynea\",\"Lynelle\",\"Lynett\",\"Lynette\",\"Lynn\",\"Lynna\",\"Lynne\",\"Lynnea\",\"Lynnell\",\"Lynnelle\",\"Lynnet\",\"Lynnett\",\"Lynnette\",\"Lynsey\",\"Lyssa\",\"Mab\",\"Mabel\",\"Mabelle\",\"Mable\",\"Mada\",\"Madalena\",\"Madalyn\",\"Maddalena\",\"Maddi\",\"Maddie\",\"Maddy\",\"Madel\",\"Madelaine\",\"Madeleine\",\"Madelena\",\"Madelene\",\"Madelin\",\"Madelina\",\"Madeline\",\"Madella\",\"Madelle\",\"Madelon\",\"Madelyn\",\"Madge\",\"Madlen\",\"Madlin\",\"Madonna\",\"Mady\",\"Mae\",\"Maegan\",\"Mag\",\"Magda\",\"Magdaia\",\"Magdalen\",\"Magdalena\",\"Magdalene\",\"Maggee\",\"Maggi\",\"Maggie\",\"Maggy\",\"Mahala\",\"Mahalia\",\"Maia\",\"Maible\",\"Maiga\",\"Maighdiln\",\"Mair\",\"Maire\",\"Maisey\",\"Maisie\",\"Maitilde\",\"Mala\",\"Malanie\",\"Malena\",\"Malia\",\"Malina\",\"Malinda\",\"Malinde\",\"Malissa\",\"Malissia\",\"Mallissa\",\"Mallorie\",\"Mallory\",\"Malorie\",\"Malory\",\"Malva\",\"Malvina\",\"Malynda\",\"Mame\",\"Mamie\",\"Manda\",\"Mandi\",\"Mandie\",\"Mandy\",\"Manon\",\"Manya\",\"Mara\",\"Marabel\",\"Marcela\",\"Marcelia\",\"Marcella\",\"Marcelle\",\"Marcellina\",\"Marcelline\",\"Marchelle\",\"Marci\",\"Marcia\",\"Marcie\",\"Marcile\",\"Marcille\",\"Marcy\",\"Mareah\",\"Maren\",\"Marena\",\"Maressa\",\"Marga\",\"Margalit\",\"Margalo\",\"Margaret\",\"Margareta\",\"Margarete\",\"Margaretha\",\"Margarethe\",\"Margaretta\",\"Margarette\",\"Margarita\",\"Margaux\",\"Marge\",\"Margeaux\",\"Margery\",\"Marget\",\"Margette\",\"Margi\",\"Margie\",\"Margit\",\"Margo\",\"Margot\",\"Margret\",\"Marguerite\",\"Margy\",\"Mari\",\"Maria\",\"Mariam\",\"Marian\",\"Mariana\",\"Mariann\",\"Marianna\",\"Marianne\",\"Maribel\",\"Maribelle\",\"Maribeth\",\"Marice\",\"Maridel\",\"Marie\",\"Marie-ann\",\"Marie-jeanne\",\"Marieann\",\"Mariejeanne\",\"Mariel\",\"Mariele\",\"Marielle\",\"Mariellen\",\"Marietta\",\"Mariette\",\"Marigold\",\"Marijo\",\"Marika\",\"Marilee\",\"Marilin\",\"Marillin\",\"Marilyn\",\"Marin\",\"Marina\",\"Marinna\",\"Marion\",\"Mariquilla\",\"Maris\",\"Marisa\",\"Mariska\",\"Marissa\",\"Marita\",\"Maritsa\",\"Mariya\",\"Marj\",\"Marja\",\"Marje\",\"Marji\",\"Marjie\",\"Marjorie\",\"Marjory\",\"Marjy\",\"Marketa\",\"Marla\",\"Marlane\",\"Marleah\",\"Marlee\",\"Marleen\",\"Marlena\",\"Marlene\",\"Marley\",\"Marlie\",\"Marline\",\"Marlo\",\"Marlyn\",\"Marna\",\"Marne\",\"Marney\",\"Marni\",\"Marnia\",\"Marnie\",\"Marquita\",\"Marrilee\",\"Marris\",\"Marrissa\",\"Marsha\",\"Marsiella\",\"Marta\",\"Martelle\",\"Martguerita\",\"Martha\",\"Marthe\",\"Marthena\",\"Marti\",\"Martica\",\"Martie\",\"Martina\",\"Martita\",\"Marty\",\"Martynne\",\"Mary\",\"Marya\",\"Maryann\",\"Maryanna\",\"Maryanne\",\"Marybelle\",\"Marybeth\",\"Maryellen\",\"Maryjane\",\"Maryjo\",\"Maryl\",\"Marylee\",\"Marylin\",\"Marylinda\",\"Marylou\",\"Marylynne\",\"Maryrose\",\"Marys\",\"Marysa\",\"Masha\",\"Matelda\",\"Mathilda\",\"Mathilde\",\"Matilda\",\"Matilde\",\"Matti\",\"Mattie\",\"Matty\",\"Maud\",\"Maude\",\"Maudie\",\"Maura\",\"Maure\",\"Maureen\",\"Maureene\",\"Maurene\",\"Maurine\",\"Maurise\",\"Maurita\",\"Maurizia\",\"Mavis\",\"Mavra\",\"Max\",\"Maxi\",\"Maxie\",\"Maxine\",\"Maxy\",\"May\",\"Maybelle\",\"Maye\",\"Mead\",\"Meade\",\"Meagan\",\"Meaghan\",\"Meara\",\"Mechelle\",\"Meg\",\"Megan\",\"Megen\",\"Meggi\",\"Meggie\",\"Meggy\",\"Meghan\",\"Meghann\",\"Mehetabel\",\"Mei\",\"Mel\",\"Mela\",\"Melamie\",\"Melania\",\"Melanie\",\"Melantha\",\"Melany\",\"Melba\",\"Melesa\",\"Melessa\",\"Melicent\",\"Melina\",\"Melinda\",\"Melinde\",\"Melisa\",\"Melisande\",\"Melisandra\",\"Melisenda\",\"Melisent\",\"Melissa\",\"Melisse\",\"Melita\",\"Melitta\",\"Mella\",\"Melli\",\"Mellicent\",\"Mellie\",\"Mellisa\",\"Mellisent\",\"Melloney\",\"Melly\",\"Melodee\",\"Melodie\",\"Melody\",\"Melonie\",\"Melony\",\"Melosa\",\"Melva\",\"Mercedes\",\"Merci\",\"Mercie\",\"Mercy\",\"Meredith\",\"Meredithe\",\"Meridel\",\"Meridith\",\"Meriel\",\"Merilee\",\"Merilyn\",\"Meris\",\"Merissa\",\"Merl\",\"Merla\",\"Merle\",\"Merlina\",\"Merline\",\"Merna\",\"Merola\",\"Merralee\",\"Merridie\",\"Merrie\",\"Merrielle\",\"Merrile\",\"Merrilee\",\"Merrili\",\"Merrill\",\"Merrily\",\"Merry\",\"Mersey\",\"Meryl\",\"Meta\",\"Mia\",\"Micaela\",\"Michaela\",\"Michaelina\",\"Michaeline\",\"Michaella\",\"Michal\",\"Michel\",\"Michele\",\"Michelina\",\"Micheline\",\"Michell\",\"Michelle\",\"Micki\",\"Mickie\",\"Micky\",\"Midge\",\"Mignon\",\"Mignonne\",\"Miguela\",\"Miguelita\",\"Mikaela\",\"Mil\",\"Mildred\",\"Mildrid\",\"Milena\",\"Milicent\",\"Milissent\",\"Milka\",\"Milli\",\"Millicent\",\"Millie\",\"Millisent\",\"Milly\",\"Milzie\",\"Mimi\",\"Min\",\"Mina\",\"Minda\",\"Mindy\",\"Minerva\",\"Minetta\",\"Minette\",\"Minna\",\"Minnaminnie\",\"Minne\",\"Minni\",\"Minnie\",\"Minnnie\",\"Minny\",\"Minta\",\"Miquela\",\"Mira\",\"Mirabel\",\"Mirabella\",\"Mirabelle\",\"Miran\",\"Miranda\",\"Mireielle\",\"Mireille\",\"Mirella\",\"Mirelle\",\"Miriam\",\"Mirilla\",\"Mirna\",\"Misha\",\"Missie\",\"Missy\",\"Misti\",\"Misty\",\"Mitzi\",\"Modesta\",\"Modestia\",\"Modestine\",\"Modesty\",\"Moina\",\"Moira\",\"Moll\",\"Mollee\",\"Molli\",\"Mollie\",\"Molly\",\"Mommy\",\"Mona\",\"Monah\",\"Monica\",\"Monika\",\"Monique\",\"Mora\",\"Moreen\",\"Morena\",\"Morgan\",\"Morgana\",\"Morganica\",\"Morganne\",\"Morgen\",\"Moria\",\"Morissa\",\"Morna\",\"Moselle\",\"Moyna\",\"Moyra\",\"Mozelle\",\"Muffin\",\"Mufi\",\"Mufinella\",\"Muire\",\"Mureil\",\"Murial\",\"Muriel\",\"Murielle\",\"Myra\",\"Myrah\",\"Myranda\",\"Myriam\",\"Myrilla\",\"Myrle\",\"Myrlene\",\"Myrna\",\"Myrta\",\"Myrtia\",\"Myrtice\",\"Myrtie\",\"Myrtle\",\"Nada\",\"Nadean\",\"Nadeen\",\"Nadia\",\"Nadine\",\"Nadiya\",\"Nady\",\"Nadya\",\"Nalani\",\"Nan\",\"Nana\",\"Nananne\",\"Nance\",\"Nancee\",\"Nancey\",\"Nanci\",\"Nancie\",\"Nancy\",\"Nanete\",\"Nanette\",\"Nani\",\"Nanice\",\"Nanine\",\"Nannette\",\"Nanni\",\"Nannie\",\"Nanny\",\"Nanon\",\"Naoma\",\"Naomi\",\"Nara\",\"Nari\",\"Nariko\",\"Nat\",\"Nata\",\"Natala\",\"Natalee\",\"Natalie\",\"Natalina\",\"Nataline\",\"Natalya\",\"Natasha\",\"Natassia\",\"Nathalia\",\"Nathalie\",\"Natividad\",\"Natka\",\"Natty\",\"Neala\",\"Neda\",\"Nedda\",\"Nedi\",\"Neely\",\"Neila\",\"Neile\",\"Neilla\",\"Neille\",\"Nelia\",\"Nelie\",\"Nell\",\"Nelle\",\"Nelli\",\"Nellie\",\"Nelly\",\"Nerissa\",\"Nerita\",\"Nert\",\"Nerta\",\"Nerte\",\"Nerti\",\"Nertie\",\"Nerty\",\"Nessa\",\"Nessi\",\"Nessie\",\"Nessy\",\"Nesta\",\"Netta\",\"Netti\",\"Nettie\",\"Nettle\",\"Netty\",\"Nevsa\",\"Neysa\",\"Nichol\",\"Nichole\",\"Nicholle\",\"Nicki\",\"Nickie\",\"Nicky\",\"Nicol\",\"Nicola\",\"Nicole\",\"Nicolea\",\"Nicolette\",\"Nicoli\",\"Nicolina\",\"Nicoline\",\"Nicolle\",\"Nikaniki\",\"Nike\",\"Niki\",\"Nikki\",\"Nikkie\",\"Nikoletta\",\"Nikolia\",\"Nina\",\"Ninetta\",\"Ninette\",\"Ninnetta\",\"Ninnette\",\"Ninon\",\"Nissa\",\"Nisse\",\"Nissie\",\"Nissy\",\"Nita\",\"Nixie\",\"Noami\",\"Noel\",\"Noelani\",\"Noell\",\"Noella\",\"Noelle\",\"Noellyn\",\"Noelyn\",\"Noemi\",\"Nola\",\"Nolana\",\"Nolie\",\"Nollie\",\"Nomi\",\"Nona\",\"Nonah\",\"Noni\",\"Nonie\",\"Nonna\",\"Nonnah\",\"Nora\",\"Norah\",\"Norean\",\"Noreen\",\"Norene\",\"Norina\",\"Norine\",\"Norma\",\"Norri\",\"Norrie\",\"Norry\",\"Novelia\",\"Nydia\",\"Nyssa\",\"Octavia\",\"Odele\",\"Odelia\",\"Odelinda\",\"Odella\",\"Odelle\",\"Odessa\",\"Odetta\",\"Odette\",\"Odilia\",\"Odille\",\"Ofelia\",\"Ofella\",\"Ofilia\",\"Ola\",\"Olenka\",\"Olga\",\"Olia\",\"Olimpia\",\"Olive\",\"Olivette\",\"Olivia\",\"Olivie\",\"Oliy\",\"Ollie\",\"Olly\",\"Olva\",\"Olwen\",\"Olympe\",\"Olympia\",\"Olympie\",\"Ondrea\",\"Oneida\",\"Onida\",\"Oona\",\"Opal\",\"Opalina\",\"Opaline\",\"Ophelia\",\"Ophelie\",\"Ora\",\"Oralee\",\"Oralia\",\"Oralie\",\"Oralla\",\"Oralle\",\"Orel\",\"Orelee\",\"Orelia\",\"Orelie\",\"Orella\",\"Orelle\",\"Oriana\",\"Orly\",\"Orsa\",\"Orsola\",\"Ortensia\",\"Otha\",\"Othelia\",\"Othella\",\"Othilia\",\"Othilie\",\"Ottilie\",\"Page\",\"Paige\",\"Paloma\",\"Pam\",\"Pamela\",\"Pamelina\",\"Pamella\",\"Pammi\",\"Pammie\",\"Pammy\",\"Pandora\",\"Pansie\",\"Pansy\",\"Paola\",\"Paolina\",\"Papagena\",\"Pat\",\"Patience\",\"Patrica\",\"Patrice\",\"Patricia\",\"Patrizia\",\"Patsy\",\"Patti\",\"Pattie\",\"Patty\",\"Paula\",\"Paule\",\"Pauletta\",\"Paulette\",\"Pauli\",\"Paulie\",\"Paulina\",\"Pauline\",\"Paulita\",\"Pauly\",\"Pavia\",\"Pavla\",\"Pearl\",\"Pearla\",\"Pearle\",\"Pearline\",\"Peg\",\"Pegeen\",\"Peggi\",\"Peggie\",\"Peggy\",\"Pen\",\"Penelopa\",\"Penelope\",\"Penni\",\"Pennie\",\"Penny\",\"Pepi\",\"Pepita\",\"Peri\",\"Peria\",\"Perl\",\"Perla\",\"Perle\",\"Perri\",\"Perrine\",\"Perry\",\"Persis\",\"Pet\",\"Peta\",\"Petra\",\"Petrina\",\"Petronella\",\"Petronia\",\"Petronilla\",\"Petronille\",\"Petunia\",\"Phaedra\",\"Phaidra\",\"Phebe\",\"Phedra\",\"Phelia\",\"Phil\",\"Philipa\",\"Philippa\",\"Philippe\",\"Philippine\",\"Philis\",\"Phillida\",\"Phillie\",\"Phillis\",\"Philly\",\"Philomena\",\"Phoebe\",\"Phylis\",\"Phyllida\",\"Phyllis\",\"Phyllys\",\"Phylys\",\"Pia\",\"Pier\",\"Pierette\",\"Pierrette\",\"Pietra\",\"Piper\",\"Pippa\",\"Pippy\",\"Polly\",\"Pollyanna\",\"Pooh\",\"Poppy\",\"Portia\",\"Pris\",\"Prisca\",\"Priscella\",\"Priscilla\",\"Prissie\",\"Pru\",\"Prudence\",\"Prudi\",\"Prudy\",\"Prue\",\"Queenie\",\"Quentin\",\"Querida\",\"Quinn\",\"Quinta\",\"Quintana\",\"Quintilla\",\"Quintina\",\"Rachael\",\"Rachel\",\"Rachele\",\"Rachelle\",\"Rae\",\"Raeann\",\"Raf\",\"Rafa\",\"Rafaela\",\"Rafaelia\",\"Rafaelita\",\"Rahal\",\"Rahel\",\"Raina\",\"Raine\",\"Rakel\",\"Ralina\",\"Ramona\",\"Ramonda\",\"Rana\",\"Randa\",\"Randee\",\"Randene\",\"Randi\",\"Randie\",\"Randy\",\"Ranee\",\"Rani\",\"Rania\",\"Ranice\",\"Ranique\",\"Ranna\",\"Raphaela\",\"Raquel\",\"Raquela\",\"Rasia\",\"Rasla\",\"Raven\",\"Ray\",\"Raychel\",\"Raye\",\"Rayna\",\"Raynell\",\"Rayshell\",\"Rea\",\"Reba\",\"Rebbecca\",\"Rebe\",\"Rebeca\",\"Rebecca\",\"Rebecka\",\"Rebeka\",\"Rebekah\",\"Rebekkah\",\"Ree\",\"Reeba\",\"Reena\",\"Reeta\",\"Reeva\",\"Regan\",\"Reggi\",\"Reggie\",\"Regina\",\"Regine\",\"Reiko\",\"Reina\",\"Reine\",\"Remy\",\"Rena\",\"Renae\",\"Renata\",\"Renate\",\"Rene\",\"Renee\",\"Renell\",\"Renelle\",\"Renie\",\"Rennie\",\"Reta\",\"Retha\",\"Revkah\",\"Rey\",\"Reyna\",\"Rhea\",\"Rheba\",\"Rheta\",\"Rhetta\",\"Rhiamon\",\"Rhianna\",\"Rhianon\",\"Rhoda\",\"Rhodia\",\"Rhodie\",\"Rhody\",\"Rhona\",\"Rhonda\",\"Riane\",\"Riannon\",\"Rianon\",\"Rica\",\"Ricca\",\"Rici\",\"Ricki\",\"Rickie\",\"Ricky\",\"Riki\",\"Rikki\",\"Rina\",\"Risa\",\"Rita\",\"Riva\",\"Rivalee\",\"Rivi\",\"Rivkah\",\"Rivy\",\"Roana\",\"Roanna\",\"Roanne\",\"Robbi\",\"Robbie\",\"Robbin\",\"Robby\",\"Robbyn\",\"Robena\",\"Robenia\",\"Roberta\",\"Robin\",\"Robina\",\"Robinet\",\"Robinett\",\"Robinetta\",\"Robinette\",\"Robinia\",\"Roby\",\"Robyn\",\"Roch\",\"Rochell\",\"Rochella\",\"Rochelle\",\"Rochette\",\"Roda\",\"Rodi\",\"Rodie\",\"Rodina\",\"Rois\",\"Romola\",\"Romona\",\"Romonda\",\"Romy\",\"Rona\",\"Ronalda\",\"Ronda\",\"Ronica\",\"Ronna\",\"Ronni\",\"Ronnica\",\"Ronnie\",\"Ronny\",\"Roobbie\",\"Rora\",\"Rori\",\"Rorie\",\"Rory\",\"Ros\",\"Rosa\",\"Rosabel\",\"Rosabella\",\"Rosabelle\",\"Rosaleen\",\"Rosalia\",\"Rosalie\",\"Rosalind\",\"Rosalinda\",\"Rosalinde\",\"Rosaline\",\"Rosalyn\",\"Rosalynd\",\"Rosamond\",\"Rosamund\",\"Rosana\",\"Rosanna\",\"Rosanne\",\"Rose\",\"Roseann\",\"Roseanna\",\"Roseanne\",\"Roselia\",\"Roselin\",\"Roseline\",\"Rosella\",\"Roselle\",\"Rosemaria\",\"Rosemarie\",\"Rosemary\",\"Rosemonde\",\"Rosene\",\"Rosetta\",\"Rosette\",\"Roshelle\",\"Rosie\",\"Rosina\",\"Rosita\",\"Roslyn\",\"Rosmunda\",\"Rosy\",\"Row\",\"Rowe\",\"Rowena\",\"Roxana\",\"Roxane\",\"Roxanna\",\"Roxanne\",\"Roxi\",\"Roxie\",\"Roxine\",\"Roxy\",\"Roz\",\"Rozalie\",\"Rozalin\",\"Rozamond\",\"Rozanna\",\"Rozanne\",\"Roze\",\"Rozele\",\"Rozella\",\"Rozelle\",\"Rozina\",\"Rubetta\",\"Rubi\",\"Rubia\",\"Rubie\",\"Rubina\",\"Ruby\",\"Ruperta\",\"Ruth\",\"Ruthann\",\"Ruthanne\",\"Ruthe\",\"Ruthi\",\"Ruthie\",\"Ruthy\",\"Ryann\",\"Rycca\",\"Saba\",\"Sabina\",\"Sabine\",\"Sabra\",\"Sabrina\",\"Sacha\",\"Sada\",\"Sadella\",\"Sadie\",\"Sadye\",\"Saidee\",\"Sal\",\"Salaidh\",\"Sallee\",\"Salli\",\"Sallie\",\"Sally\",\"Sallyann\",\"Sallyanne\",\"Saloma\",\"Salome\",\"Salomi\",\"Sam\",\"Samantha\",\"Samara\",\"Samaria\",\"Sammy\",\"Sande\",\"Sandi\",\"Sandie\",\"Sandra\",\"Sandy\",\"Sandye\",\"Sapphira\",\"Sapphire\",\"Sara\",\"Sara-ann\",\"Saraann\",\"Sarah\",\"Sarajane\",\"Saree\",\"Sarena\",\"Sarene\",\"Sarette\",\"Sari\",\"Sarina\",\"Sarine\",\"Sarita\",\"Sascha\",\"Sasha\",\"Sashenka\",\"Saudra\",\"Saundra\",\"Savina\",\"Sayre\",\"Scarlet\",\"Scarlett\",\"Sean\",\"Seana\",\"Seka\",\"Sela\",\"Selena\",\"Selene\",\"Selestina\",\"Selia\",\"Selie\",\"Selina\",\"Selinda\",\"Seline\",\"Sella\",\"Selle\",\"Selma\",\"Sena\",\"Sephira\",\"Serena\",\"Serene\",\"Shae\",\"Shaina\",\"Shaine\",\"Shalna\",\"Shalne\",\"Shana\",\"Shanda\",\"Shandee\",\"Shandeigh\",\"Shandie\",\"Shandra\",\"Shandy\",\"Shane\",\"Shani\",\"Shanie\",\"Shanna\",\"Shannah\",\"Shannen\",\"Shannon\",\"Shanon\",\"Shanta\",\"Shantee\",\"Shara\",\"Sharai\",\"Shari\",\"Sharia\",\"Sharity\",\"Sharl\",\"Sharla\",\"Sharleen\",\"Sharlene\",\"Sharline\",\"Sharon\",\"Sharona\",\"Sharron\",\"Sharyl\",\"Shaun\",\"Shauna\",\"Shawn\",\"Shawna\",\"Shawnee\",\"Shay\",\"Shayla\",\"Shaylah\",\"Shaylyn\",\"Shaylynn\",\"Shayna\",\"Shayne\",\"Shea\",\"Sheba\",\"Sheela\",\"Sheelagh\",\"Sheelah\",\"Sheena\",\"Sheeree\",\"Sheila\",\"Sheila-kathryn\",\"Sheilah\",\"Shel\",\"Shela\",\"Shelagh\",\"Shelba\",\"Shelbi\",\"Shelby\",\"Shelia\",\"Shell\",\"Shelley\",\"Shelli\",\"Shellie\",\"Shelly\",\"Shena\",\"Sher\",\"Sheree\",\"Sheri\",\"Sherie\",\"Sherill\",\"Sherilyn\",\"Sherline\",\"Sherri\",\"Sherrie\",\"Sherry\",\"Sherye\",\"Sheryl\",\"Shina\",\"Shir\",\"Shirl\",\"Shirlee\",\"Shirleen\",\"Shirlene\",\"Shirley\",\"Shirline\",\"Shoshana\",\"Shoshanna\",\"Siana\",\"Sianna\",\"Sib\",\"Sibbie\",\"Sibby\",\"Sibeal\",\"Sibel\",\"Sibella\",\"Sibelle\",\"Sibilla\",\"Sibley\",\"Sibyl\",\"Sibylla\",\"Sibylle\",\"Sidoney\",\"Sidonia\",\"Sidonnie\",\"Sigrid\",\"Sile\",\"Sileas\",\"Silva\",\"Silvana\",\"Silvia\",\"Silvie\",\"Simona\",\"Simone\",\"Simonette\",\"Simonne\",\"Sindee\",\"Siobhan\",\"Sioux\",\"Siouxie\",\"Sisely\",\"Sisile\",\"Sissie\",\"Sissy\",\"Siusan\",\"Sofia\",\"Sofie\",\"Sondra\",\"Sonia\",\"Sonja\",\"Sonni\",\"Sonnie\",\"Sonnnie\",\"Sonny\",\"Sonya\",\"Sophey\",\"Sophi\",\"Sophia\",\"Sophie\",\"Sophronia\",\"Sorcha\",\"Sosanna\",\"Stace\",\"Stacee\",\"Stacey\",\"Staci\",\"Stacia\",\"Stacie\",\"Stacy\",\"Stafani\",\"Star\",\"Starla\",\"Starlene\",\"Starlin\",\"Starr\",\"Stefa\",\"Stefania\",\"Stefanie\",\"Steffane\",\"Steffi\",\"Steffie\",\"Stella\",\"Stepha\",\"Stephana\",\"Stephani\",\"Stephanie\",\"Stephannie\",\"Stephenie\",\"Stephi\",\"Stephie\",\"Stephine\",\"Stesha\",\"Stevana\",\"Stevena\",\"Stoddard\",\"Storm\",\"Stormi\",\"Stormie\",\"Stormy\",\"Sue\",\"Suellen\",\"Sukey\",\"Suki\",\"Sula\",\"Sunny\",\"Sunshine\",\"Susan\",\"Susana\",\"Susanetta\",\"Susann\",\"Susanna\",\"Susannah\",\"Susanne\",\"Susette\",\"Susi\",\"Susie\",\"Susy\",\"Suzann\",\"Suzanna\",\"Suzanne\",\"Suzette\",\"Suzi\",\"Suzie\",\"Suzy\",\"Sybil\",\"Sybila\",\"Sybilla\",\"Sybille\",\"Sybyl\",\"Sydel\",\"Sydelle\",\"Sydney\",\"Sylvia\",\"Tabatha\",\"Tabbatha\",\"Tabbi\",\"Tabbie\",\"Tabbitha\",\"Tabby\",\"Tabina\",\"Tabitha\",\"Taffy\",\"Talia\",\"Tallia\",\"Tallie\",\"Tallou\",\"Tallulah\",\"Tally\",\"Talya\",\"Talyah\",\"Tamar\",\"Tamara\",\"Tamarah\",\"Tamarra\",\"Tamera\",\"Tami\",\"Tamiko\",\"Tamma\",\"Tammara\",\"Tammi\",\"Tammie\",\"Tammy\",\"Tamqrah\",\"Tamra\",\"Tana\",\"Tandi\",\"Tandie\",\"Tandy\",\"Tanhya\",\"Tani\",\"Tania\",\"Tanitansy\",\"Tansy\",\"Tanya\",\"Tara\",\"Tarah\",\"Tarra\",\"Tarrah\",\"Taryn\",\"Tasha\",\"Tasia\",\"Tate\",\"Tatiana\",\"Tatiania\",\"Tatum\",\"Tawnya\",\"Tawsha\",\"Ted\",\"Tedda\",\"Teddi\",\"Teddie\",\"Teddy\",\"Tedi\",\"Tedra\",\"Teena\",\"Teirtza\",\"Teodora\",\"Tera\",\"Teresa\",\"Terese\",\"Teresina\",\"Teresita\",\"Teressa\",\"Teri\",\"Teriann\",\"Terra\",\"Terri\",\"Terrie\",\"Terrijo\",\"Terry\",\"Terrye\",\"Tersina\",\"Terza\",\"Tess\",\"Tessa\",\"Tessi\",\"Tessie\",\"Tessy\",\"Thalia\",\"Thea\",\"Theadora\",\"Theda\",\"Thekla\",\"Thelma\",\"Theo\",\"Theodora\",\"Theodosia\",\"Theresa\",\"Therese\",\"Theresina\",\"Theresita\",\"Theressa\",\"Therine\",\"Thia\",\"Thomasa\",\"Thomasin\",\"Thomasina\",\"Thomasine\",\"Tiena\",\"Tierney\",\"Tiertza\",\"Tiff\",\"Tiffani\",\"Tiffanie\",\"Tiffany\",\"Tiffi\",\"Tiffie\",\"Tiffy\",\"Tilda\",\"Tildi\",\"Tildie\",\"Tildy\",\"Tillie\",\"Tilly\",\"Tim\",\"Timi\",\"Timmi\",\"Timmie\",\"Timmy\",\"Timothea\",\"Tina\",\"Tine\",\"Tiphani\",\"Tiphanie\",\"Tiphany\",\"Tish\",\"Tisha\",\"Tobe\",\"Tobey\",\"Tobi\",\"Toby\",\"Tobye\",\"Toinette\",\"Toma\",\"Tomasina\",\"Tomasine\",\"Tomi\",\"Tommi\",\"Tommie\",\"Tommy\",\"Toni\",\"Tonia\",\"Tonie\",\"Tony\",\"Tonya\",\"Tonye\",\"Tootsie\",\"Torey\",\"Tori\",\"Torie\",\"Torrie\",\"Tory\",\"Tova\",\"Tove\",\"Tracee\",\"Tracey\",\"Traci\",\"Tracie\",\"Tracy\",\"Trenna\",\"Tresa\",\"Trescha\",\"Tressa\",\"Tricia\",\"Trina\",\"Trish\",\"Trisha\",\"Trista\",\"Trix\",\"Trixi\",\"Trixie\",\"Trixy\",\"Truda\",\"Trude\",\"Trudey\",\"Trudi\",\"Trudie\",\"Trudy\",\"Trula\",\"Tuesday\",\"Twila\",\"Twyla\",\"Tybi\",\"Tybie\",\"Tyne\",\"Ula\",\"Ulla\",\"Ulrica\",\"Ulrika\",\"Ulrikaumeko\",\"Ulrike\",\"Umeko\",\"Una\",\"Ursa\",\"Ursala\",\"Ursola\",\"Ursula\",\"Ursulina\",\"Ursuline\",\"Uta\",\"Val\",\"Valaree\",\"Valaria\",\"Vale\",\"Valeda\",\"Valencia\",\"Valene\",\"Valenka\",\"Valentia\",\"Valentina\",\"Valentine\",\"Valera\",\"Valeria\",\"Valerie\",\"Valery\",\"Valerye\",\"Valida\",\"Valina\",\"Valli\",\"Vallie\",\"Vally\",\"Valma\",\"Valry\",\"Van\",\"Vanda\",\"Vanessa\",\"Vania\",\"Vanna\",\"Vanni\",\"Vannie\",\"Vanny\",\"Vanya\",\"Veda\",\"Velma\",\"Velvet\",\"Venita\",\"Venus\",\"Vera\",\"Veradis\",\"Vere\",\"Verena\",\"Verene\",\"Veriee\",\"Verile\",\"Verina\",\"Verine\",\"Verla\",\"Verna\",\"Vernice\",\"Veronica\",\"Veronika\",\"Veronike\",\"Veronique\",\"Vevay\",\"Vi\",\"Vicki\",\"Vickie\",\"Vicky\",\"Victoria\",\"Vida\",\"Viki\",\"Vikki\",\"Vikky\",\"Vilhelmina\",\"Vilma\",\"Vin\",\"Vina\",\"Vinita\",\"Vinni\",\"Vinnie\",\"Vinny\",\"Viola\",\"Violante\",\"Viole\",\"Violet\",\"Violetta\",\"Violette\",\"Virgie\",\"Virgina\",\"Virginia\",\"Virginie\",\"Vita\",\"Vitia\",\"Vitoria\",\"Vittoria\",\"Viv\",\"Viva\",\"Vivi\",\"Vivia\",\"Vivian\",\"Viviana\",\"Vivianna\",\"Vivianne\",\"Vivie\",\"Vivien\",\"Viviene\",\"Vivienne\",\"Viviyan\",\"Vivyan\",\"Vivyanne\",\"Vonni\",\"Vonnie\",\"Vonny\",\"Vyky\",\"Wallie\",\"Wallis\",\"Walliw\",\"Wally\",\"Waly\",\"Wanda\",\"Wandie\",\"Wandis\",\"Waneta\",\"Wanids\",\"Wenda\",\"Wendeline\",\"Wendi\",\"Wendie\",\"Wendy\",\"Wendye\",\"Wenona\",\"Wenonah\",\"Whitney\",\"Wileen\",\"Wilhelmina\",\"Wilhelmine\",\"Wilie\",\"Willa\",\"Willabella\",\"Willamina\",\"Willetta\",\"Willette\",\"Willi\",\"Willie\",\"Willow\",\"Willy\",\"Willyt\",\"Wilma\",\"Wilmette\",\"Wilona\",\"Wilone\",\"Wilow\",\"Windy\",\"Wini\",\"Winifred\",\"Winna\",\"Winnah\",\"Winne\",\"Winni\",\"Winnie\",\"Winnifred\",\"Winny\",\"Winona\",\"Winonah\",\"Wren\",\"Wrennie\",\"Wylma\",\"Wynn\",\"Wynne\",\"Wynnie\",\"Wynny\",\"Xaviera\",\"Xena\",\"Xenia\",\"Xylia\",\"Xylina\",\"Yalonda\",\"Yasmeen\",\"Yasmin\",\"Yelena\",\"Yetta\",\"Yettie\",\"Yetty\",\"Yevette\",\"Ynes\",\"Ynez\",\"Yoko\",\"Yolanda\",\"Yolande\",\"Yolane\",\"Yolanthe\",\"Yoshi\",\"Yoshiko\",\"Yovonnda\",\"Ysabel\",\"Yvette\",\"Yvonne\",\"Zabrina\",\"Zahara\",\"Zandra\",\"Zaneta\",\"Zara\",\"Zarah\",\"Zaria\",\"Zarla\",\"Zea\",\"Zelda\",\"Zelma\",\"Zena\",\"Zenia\",\"Zia\",\"Zilvia\",\"Zita\",\"Zitella\",\"Zoe\",\"Zola\",\"Zonda\",\"Zondra\",\"Zonnya\",\"Zora\",\"Zorah\",\"Zorana\",\"Zorina\",\"Zorine\",\"Zsazsa\",\"Zulema\",\"Zuzana\"],y=[\"Ackbar\",\"Adi Gallia\",\"Anakin Skywalker\",\"Arvel Crynyd\",\"Ayla Secura\",\"Bail Prestor Organa\",\"Barriss Offee\",\"Ben Quadinaros\",\"Beru Whitesun lars\",\"Bib Fortuna\",\"Biggs Darklighter\",\"Boba Fett\",\"Bossk\",\"C-3PO\",\"Chewbacca\",\"Cliegg Lars\",\"Cordé\",\"Darth Maul\",\"Darth Vader\",\"Dexter Jettster\",\"Dooku\",\"Dormé\",\"Dud Bolt\",\"Eeth Koth\",\"Finis Valorum\",\"Gasgano\",\"Greedo\",\"Gregar Typho\",\"Grievous\",\"Han Solo\",\"IG-88\",\"Jabba Desilijic Tiure\",\"Jango Fett\",\"Jar Jar Binks\",\"Jek Tono Porkins\",\"Jocasta Nu\",\"Ki-Adi-Mundi\",\"Kit Fisto\",\"Lama Su\",\"Lando Calrissian\",\"Leia Organa\",\"Lobot\",\"Luke Skywalker\",\"Luminara Unduli\",\"Mace Windu\",\"Mas Amedda\",\"Mon Mothma\",\"Nien Nunb\",\"Nute Gunray\",\"Obi-Wan Kenobi\",\"Owen Lars\",\"Padmé Amidala\",\"Palpatine\",\"Plo Koon\",\"Poggle the Lesser\",\"Quarsh Panaka\",\"Qui-Gon Jinn\",\"R2-D2\",\"R4-P17\",\"R5-D4\",\"Ratts Tyerel\",\"Raymus Antilles\",\"Ric Olié\",\"Roos Tarpals\",\"Rugor Nass\",\"Saesee Tiin\",\"San Hill\",\"Sebulba\",\"Shaak Ti\",\"Shmi Skywalker\",\"Sly Moore\",\"Tarfful\",\"Taun We\",\"Tion Medon\",\"Wat Tambor\",\"Watto\",\"Wedge Antilles\",\"Wicket Systri Warrick\",\"Wilhuff Tarkin\",\"Yarael Poof\",\"Yoda\",\"Zam Wesell\"];class h{static generate(a={}){let e=a.min||1,i=a.max||999;if(a.length){const n=Math.pow(10,a.length);return e=n/10,i=n-1,[`${Math.floor(Math.random()*(i-e))+e}`]}return[`${Math.floor(Math.random()*(i-e))+e}`]}}export{h as NumberDictionary,l as adjectives,r as animals,t as colors,o as countries,s as languages,d as names,y as starWars,n as uniqueNamesGenerator};\n//# sourceMappingURL=index.m.js.map\n","import * as Papa from 'papaparse';\nimport { IAgency, ICommittee, IMember } from './types';\n\n// https://github.com/andreasonny83/unique-names-generator\nimport { uniqueNamesGenerator, animals } from 'unique-names-generator';\n\nasync function loadFile(filename:string, parser) {\n\n  if(filename === null) {\n    return [];\n  }\n  const parseConfig = {\n    header: true\n  }\n\n  const file = await fetch(filename);\n  const text = await file.text();\n  try {\n    const parseFile = Papa.parse(text, parseConfig);\n    const parseData = parseFile.data;\n\n    const data = parser(parseData);\n    return data;  \n  } catch (error) {\n    console.error(\"Error parsing file: \", {filename, error})\n    console.error(\"test\", text)\n  }\n\n}\n\n// Placeholder transformer - may need future transformers\nfunction simpleParse(data) {\n  return data;\n}\nexport async function loadAgencies(filename:string) {\n  const agencies = loadFile(filename, simpleParse)\n  return agencies;\n}\n// When Loading Committees, we have member names and agency codes. We need to join to objects\nexport async function loadCommittees(filename:string, members:Array<IMember>, agencies: Array<IAgency>):Promise<Array<ICommittee>> {\n  let committeesData = await loadFile(filename, simpleParse)\n\n  // Build a complete committee\n  const committees = committeesData.map((row) => {\n    const committee:ICommittee = {\n      id: row.id,\n      name: row.name,\n      description: row.description,\n      link: row.link,\n      members: {},\n      editable: row.permanent?.toLowerCase() === \"false\"\n    }\n\n    const loadedMembers = row.members.split(\",\")\n    committee.members.chair = members.filter(m => m.name === row.chair)\n    committee.members.members = members.filter(m => {\n      return loadedMembers.includes(m.name);\n    });\n\n    committee.agencies = agencies.filter((agency) => {\n      return agency.committee === committee.name;\n    });\n\n    // Old Code when table had agencies in committees\n    // const loadedAgencies = row.agencies.split(\",\")\n    // committee.agencies = agencies.filter(a => {\n    //   return loadedAgencies.includes(a.name)\n    // })\n    \n    return committee;\n  })\n\n  return committees; \n}\n\nexport async function loadBlank(defaultCommittees:Array<ICommittee>):Promise<Array<ICommittee>> {\n  const permanentCommittees = defaultCommittees.reduce((array, committee) => {\n    // deep copy, but override agencies - this ensures there is a new object for render state\n    const newCommittee = {...committee, ...{agencies: []}};\n    return [...array, newCommittee];\n  }, [])\n  const startingCommittees = [...permanentCommittees, createCommittee(), createCommittee()];\n\n  return startingCommittees;\n}\nexport async function loadMembers(filename:string):Promise<Array<IMember>> {\n  const members:Array<IMember> = await loadFile(filename, simpleParse)\n  return members;   \n}\n\n// TODO: move to utils\nfunction toTitleCase(str) {\n  return str.replace(\n    /\\w\\S*/g,\n    function(txt) {\n      return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();\n    }\n  );\n}\n\nexport function createCommittee(values = {}): ICommittee {\n  const defaultCommittee:ICommittee = {\n    id: String(Math.floor(Math.random() * 1000)),\n    name: toTitleCase(generateName() + \" Committee\"),\n    members: {chair: [], members:[]},\n    editable: true,\n    agencies: []\n  };\n  const committee = {\n    ...values,\n    ...defaultCommittee\n  }\n  return committee;\n}\n\nexport function generateName() {\n  const randomName: string = uniqueNamesGenerator({\n    dictionaries: [ animals ], \n    separator: ' ',\n    style: 'capital',\n    length: 1\n  });\n  return randomName;\n}\n\nexport function calculateBudget(agencies: Array<IAgency>) {\n    const budgetSum = agencies?.reduce((sum, agency) => {\n    // debugger;\n      return sum += Number(agency.budget);\n    }, 0);\n\n    // if budgetSum is null then set to $0\n    // Round to Millions\n    const budgetString = !!budgetSum ? new Intl.NumberFormat('en-US', \n      { \n        style: 'currency', \n        currency: 'USD',\n        maximumFractionDigits: 0,\n        maximumSignificantDigits: 3\n      }).format(budgetSum / 1_000_000) : \"$0\";\n    return budgetString;\n  }\n","import { getRenderingRef, forceUpdate } from '@stencil/core';\n\nconst appendToMap = (map, propName, value) => {\n    const items = map.get(propName);\n    if (!items) {\n        map.set(propName, [value]);\n    }\n    else if (!items.includes(value)) {\n        items.push(value);\n    }\n};\nconst debounce = (fn, ms) => {\n    let timeoutId;\n    return (...args) => {\n        if (timeoutId) {\n            clearTimeout(timeoutId);\n        }\n        timeoutId = setTimeout(() => {\n            timeoutId = 0;\n            fn(...args);\n        }, ms);\n    };\n};\n\n/**\n * Check if a possible element isConnected.\n * The property might not be there, so we check for it.\n *\n * We want it to return true if isConnected is not a property,\n * otherwise we would remove these elements and would not update.\n *\n * Better leak in Edge than to be useless.\n */\nconst isConnected = (maybeElement) => !('isConnected' in maybeElement) || maybeElement.isConnected;\nconst cleanupElements = debounce((map) => {\n    for (let key of map.keys()) {\n        map.set(key, map.get(key).filter(isConnected));\n    }\n}, 2000);\nconst stencilSubscription = () => {\n    if (typeof getRenderingRef !== 'function') {\n        // If we are not in a stencil project, we do nothing.\n        // This function is not really exported by @stencil/core.\n        return {};\n    }\n    const elmsToUpdate = new Map();\n    return {\n        dispose: () => elmsToUpdate.clear(),\n        get: (propName) => {\n            const elm = getRenderingRef();\n            if (elm) {\n                appendToMap(elmsToUpdate, propName, elm);\n            }\n        },\n        set: (propName) => {\n            const elements = elmsToUpdate.get(propName);\n            if (elements) {\n                elmsToUpdate.set(propName, elements.filter(forceUpdate));\n            }\n            cleanupElements(elmsToUpdate);\n        },\n        reset: () => {\n            elmsToUpdate.forEach((elms) => elms.forEach(forceUpdate));\n            cleanupElements(elmsToUpdate);\n        },\n    };\n};\n\nconst unwrap = (val) => (typeof val === 'function' ? val() : val);\nconst createObservableMap = (defaultState, shouldUpdate = (a, b) => a !== b) => {\n    const unwrappedState = unwrap(defaultState);\n    let states = new Map(Object.entries(unwrappedState !== null && unwrappedState !== void 0 ? unwrappedState : {}));\n    const handlers = {\n        dispose: [],\n        get: [],\n        set: [],\n        reset: [],\n    };\n    const reset = () => {\n        var _a;\n        // When resetting the state, the default state may be a function - unwrap it to invoke it.\n        // otherwise, the state won't be properly reset\n        states = new Map(Object.entries((_a = unwrap(defaultState)) !== null && _a !== void 0 ? _a : {}));\n        handlers.reset.forEach((cb) => cb());\n    };\n    const dispose = () => {\n        // Call first dispose as resetting the state would\n        // cause less updates ;)\n        handlers.dispose.forEach((cb) => cb());\n        reset();\n    };\n    const get = (propName) => {\n        handlers.get.forEach((cb) => cb(propName));\n        return states.get(propName);\n    };\n    const set = (propName, value) => {\n        const oldValue = states.get(propName);\n        if (shouldUpdate(value, oldValue, propName)) {\n            states.set(propName, value);\n            handlers.set.forEach((cb) => cb(propName, value, oldValue));\n        }\n    };\n    const state = (typeof Proxy === 'undefined'\n        ? {}\n        : new Proxy(unwrappedState, {\n            get(_, propName) {\n                return get(propName);\n            },\n            ownKeys(_) {\n                return Array.from(states.keys());\n            },\n            getOwnPropertyDescriptor() {\n                return {\n                    enumerable: true,\n                    configurable: true,\n                };\n            },\n            has(_, propName) {\n                return states.has(propName);\n            },\n            set(_, propName, value) {\n                set(propName, value);\n                return true;\n            },\n        }));\n    const on = (eventName, callback) => {\n        handlers[eventName].push(callback);\n        return () => {\n            removeFromArray(handlers[eventName], callback);\n        };\n    };\n    const onChange = (propName, cb) => {\n        const unSet = on('set', (key, newValue) => {\n            if (key === propName) {\n                cb(newValue);\n            }\n        });\n        // We need to unwrap the defaultState because it might be a function.\n        // Otherwise we might not be sending the right reset value.\n        const unReset = on('reset', () => cb(unwrap(defaultState)[propName]));\n        return () => {\n            unSet();\n            unReset();\n        };\n    };\n    const use = (...subscriptions) => {\n        const unsubs = subscriptions.reduce((unsubs, subscription) => {\n            if (subscription.set) {\n                unsubs.push(on('set', subscription.set));\n            }\n            if (subscription.get) {\n                unsubs.push(on('get', subscription.get));\n            }\n            if (subscription.reset) {\n                unsubs.push(on('reset', subscription.reset));\n            }\n            if (subscription.dispose) {\n                unsubs.push(on('dispose', subscription.dispose));\n            }\n            return unsubs;\n        }, []);\n        return () => unsubs.forEach((unsub) => unsub());\n    };\n    const forceUpdate = (key) => {\n        const oldValue = states.get(key);\n        handlers.set.forEach((cb) => cb(key, oldValue, oldValue));\n    };\n    return {\n        state,\n        get,\n        set,\n        on,\n        onChange,\n        use,\n        dispose,\n        reset,\n        forceUpdate,\n    };\n};\nconst removeFromArray = (array, item) => {\n    const index = array.indexOf(item);\n    if (index >= 0) {\n        array[index] = array[array.length - 1];\n        array.length--;\n    }\n};\n\nconst createStore = (defaultState, shouldUpdate) => {\n    const map = createObservableMap(defaultState, shouldUpdate);\n    map.use(stencilSubscription());\n    return map;\n};\n\nexport { createObservableMap, createStore };\n","// Copyright (c) 2013 Pieroxy <pieroxy@pieroxy.net>\n// This work is free. You can redistribute it and/or modify it\n// under the terms of the WTFPL, Version 2\n// For more information see LICENSE.txt or http://www.wtfpl.net/\n//\n// For more information, the home page:\n// http://pieroxy.net/blog/pages/lz-string/testing.html\n//\n// LZ-based compression algorithm, version 1.4.4\nvar LZString = (function() {\n\n// private property\nvar f = String.fromCharCode;\nvar keyStrBase64 = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";\nvar keyStrUriSafe = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$\";\nvar baseReverseDic = {};\n\nfunction getBaseValue(alphabet, character) {\n  if (!baseReverseDic[alphabet]) {\n    baseReverseDic[alphabet] = {};\n    for (var i=0 ; i<alphabet.length ; i++) {\n      baseReverseDic[alphabet][alphabet.charAt(i)] = i;\n    }\n  }\n  return baseReverseDic[alphabet][character];\n}\n\nvar LZString = {\n  compressToBase64 : function (input) {\n    if (input == null) return \"\";\n    var res = LZString._compress(input, 6, function(a){return keyStrBase64.charAt(a);});\n    switch (res.length % 4) { // To produce valid Base64\n    default: // When could this happen ?\n    case 0 : return res;\n    case 1 : return res+\"===\";\n    case 2 : return res+\"==\";\n    case 3 : return res+\"=\";\n    }\n  },\n\n  decompressFromBase64 : function (input) {\n    if (input == null) return \"\";\n    if (input == \"\") return null;\n    return LZString._decompress(input.length, 32, function(index) { return getBaseValue(keyStrBase64, input.charAt(index)); });\n  },\n\n  compressToUTF16 : function (input) {\n    if (input == null) return \"\";\n    return LZString._compress(input, 15, function(a){return f(a+32);}) + \" \";\n  },\n\n  decompressFromUTF16: function (compressed) {\n    if (compressed == null) return \"\";\n    if (compressed == \"\") return null;\n    return LZString._decompress(compressed.length, 16384, function(index) { return compressed.charCodeAt(index) - 32; });\n  },\n\n  //compress into uint8array (UCS-2 big endian format)\n  compressToUint8Array: function (uncompressed) {\n    var compressed = LZString.compress(uncompressed);\n    var buf=new Uint8Array(compressed.length*2); // 2 bytes per character\n\n    for (var i=0, TotalLen=compressed.length; i<TotalLen; i++) {\n      var current_value = compressed.charCodeAt(i);\n      buf[i*2] = current_value >>> 8;\n      buf[i*2+1] = current_value % 256;\n    }\n    return buf;\n  },\n\n  //decompress from uint8array (UCS-2 big endian format)\n  decompressFromUint8Array:function (compressed) {\n    if (compressed===null || compressed===undefined){\n        return LZString.decompress(compressed);\n    } else {\n        var buf=new Array(compressed.length/2); // 2 bytes per character\n        for (var i=0, TotalLen=buf.length; i<TotalLen; i++) {\n          buf[i]=compressed[i*2]*256+compressed[i*2+1];\n        }\n\n        var result = [];\n        buf.forEach(function (c) {\n          result.push(f(c));\n        });\n        return LZString.decompress(result.join(''));\n\n    }\n\n  },\n\n\n  //compress into a string that is already URI encoded\n  compressToEncodedURIComponent: function (input) {\n    if (input == null) return \"\";\n    return LZString._compress(input, 6, function(a){return keyStrUriSafe.charAt(a);});\n  },\n\n  //decompress from an output of compressToEncodedURIComponent\n  decompressFromEncodedURIComponent:function (input) {\n    if (input == null) return \"\";\n    if (input == \"\") return null;\n    input = input.replace(/ /g, \"+\");\n    return LZString._decompress(input.length, 32, function(index) { return getBaseValue(keyStrUriSafe, input.charAt(index)); });\n  },\n\n  compress: function (uncompressed) {\n    return LZString._compress(uncompressed, 16, function(a){return f(a);});\n  },\n  _compress: function (uncompressed, bitsPerChar, getCharFromInt) {\n    if (uncompressed == null) return \"\";\n    var i, value,\n        context_dictionary= {},\n        context_dictionaryToCreate= {},\n        context_c=\"\",\n        context_wc=\"\",\n        context_w=\"\",\n        context_enlargeIn= 2, // Compensate for the first entry which should not count\n        context_dictSize= 3,\n        context_numBits= 2,\n        context_data=[],\n        context_data_val=0,\n        context_data_position=0,\n        ii;\n\n    for (ii = 0; ii < uncompressed.length; ii += 1) {\n      context_c = uncompressed.charAt(ii);\n      if (!Object.prototype.hasOwnProperty.call(context_dictionary,context_c)) {\n        context_dictionary[context_c] = context_dictSize++;\n        context_dictionaryToCreate[context_c] = true;\n      }\n\n      context_wc = context_w + context_c;\n      if (Object.prototype.hasOwnProperty.call(context_dictionary,context_wc)) {\n        context_w = context_wc;\n      } else {\n        if (Object.prototype.hasOwnProperty.call(context_dictionaryToCreate,context_w)) {\n          if (context_w.charCodeAt(0)<256) {\n            for (i=0 ; i<context_numBits ; i++) {\n              context_data_val = (context_data_val << 1);\n              if (context_data_position == bitsPerChar-1) {\n                context_data_position = 0;\n                context_data.push(getCharFromInt(context_data_val));\n                context_data_val = 0;\n              } else {\n                context_data_position++;\n              }\n            }\n            value = context_w.charCodeAt(0);\n            for (i=0 ; i<8 ; i++) {\n              context_data_val = (context_data_val << 1) | (value&1);\n              if (context_data_position == bitsPerChar-1) {\n                context_data_position = 0;\n                context_data.push(getCharFromInt(context_data_val));\n                context_data_val = 0;\n              } else {\n                context_data_position++;\n              }\n              value = value >> 1;\n            }\n          } else {\n            value = 1;\n            for (i=0 ; i<context_numBits ; i++) {\n              context_data_val = (context_data_val << 1) | value;\n              if (context_data_position ==bitsPerChar-1) {\n                context_data_position = 0;\n                context_data.push(getCharFromInt(context_data_val));\n                context_data_val = 0;\n              } else {\n                context_data_position++;\n              }\n              value = 0;\n            }\n            value = context_w.charCodeAt(0);\n            for (i=0 ; i<16 ; i++) {\n              context_data_val = (context_data_val << 1) | (value&1);\n              if (context_data_position == bitsPerChar-1) {\n                context_data_position = 0;\n                context_data.push(getCharFromInt(context_data_val));\n                context_data_val = 0;\n              } else {\n                context_data_position++;\n              }\n              value = value >> 1;\n            }\n          }\n          context_enlargeIn--;\n          if (context_enlargeIn == 0) {\n            context_enlargeIn = Math.pow(2, context_numBits);\n            context_numBits++;\n          }\n          delete context_dictionaryToCreate[context_w];\n        } else {\n          value = context_dictionary[context_w];\n          for (i=0 ; i<context_numBits ; i++) {\n            context_data_val = (context_data_val << 1) | (value&1);\n            if (context_data_position == bitsPerChar-1) {\n              context_data_position = 0;\n              context_data.push(getCharFromInt(context_data_val));\n              context_data_val = 0;\n            } else {\n              context_data_position++;\n            }\n            value = value >> 1;\n          }\n\n\n        }\n        context_enlargeIn--;\n        if (context_enlargeIn == 0) {\n          context_enlargeIn = Math.pow(2, context_numBits);\n          context_numBits++;\n        }\n        // Add wc to the dictionary.\n        context_dictionary[context_wc] = context_dictSize++;\n        context_w = String(context_c);\n      }\n    }\n\n    // Output the code for w.\n    if (context_w !== \"\") {\n      if (Object.prototype.hasOwnProperty.call(context_dictionaryToCreate,context_w)) {\n        if (context_w.charCodeAt(0)<256) {\n          for (i=0 ; i<context_numBits ; i++) {\n            context_data_val = (context_data_val << 1);\n            if (context_data_position == bitsPerChar-1) {\n              context_data_position = 0;\n              context_data.push(getCharFromInt(context_data_val));\n              context_data_val = 0;\n            } else {\n              context_data_position++;\n            }\n          }\n          value = context_w.charCodeAt(0);\n          for (i=0 ; i<8 ; i++) {\n            context_data_val = (context_data_val << 1) | (value&1);\n            if (context_data_position == bitsPerChar-1) {\n              context_data_position = 0;\n              context_data.push(getCharFromInt(context_data_val));\n              context_data_val = 0;\n            } else {\n              context_data_position++;\n            }\n            value = value >> 1;\n          }\n        } else {\n          value = 1;\n          for (i=0 ; i<context_numBits ; i++) {\n            context_data_val = (context_data_val << 1) | value;\n            if (context_data_position == bitsPerChar-1) {\n              context_data_position = 0;\n              context_data.push(getCharFromInt(context_data_val));\n              context_data_val = 0;\n            } else {\n              context_data_position++;\n            }\n            value = 0;\n          }\n          value = context_w.charCodeAt(0);\n          for (i=0 ; i<16 ; i++) {\n            context_data_val = (context_data_val << 1) | (value&1);\n            if (context_data_position == bitsPerChar-1) {\n              context_data_position = 0;\n              context_data.push(getCharFromInt(context_data_val));\n              context_data_val = 0;\n            } else {\n              context_data_position++;\n            }\n            value = value >> 1;\n          }\n        }\n        context_enlargeIn--;\n        if (context_enlargeIn == 0) {\n          context_enlargeIn = Math.pow(2, context_numBits);\n          context_numBits++;\n        }\n        delete context_dictionaryToCreate[context_w];\n      } else {\n        value = context_dictionary[context_w];\n        for (i=0 ; i<context_numBits ; i++) {\n          context_data_val = (context_data_val << 1) | (value&1);\n          if (context_data_position == bitsPerChar-1) {\n            context_data_position = 0;\n            context_data.push(getCharFromInt(context_data_val));\n            context_data_val = 0;\n          } else {\n            context_data_position++;\n          }\n          value = value >> 1;\n        }\n\n\n      }\n      context_enlargeIn--;\n      if (context_enlargeIn == 0) {\n        context_enlargeIn = Math.pow(2, context_numBits);\n        context_numBits++;\n      }\n    }\n\n    // Mark the end of the stream\n    value = 2;\n    for (i=0 ; i<context_numBits ; i++) {\n      context_data_val = (context_data_val << 1) | (value&1);\n      if (context_data_position == bitsPerChar-1) {\n        context_data_position = 0;\n        context_data.push(getCharFromInt(context_data_val));\n        context_data_val = 0;\n      } else {\n        context_data_position++;\n      }\n      value = value >> 1;\n    }\n\n    // Flush the last char\n    while (true) {\n      context_data_val = (context_data_val << 1);\n      if (context_data_position == bitsPerChar-1) {\n        context_data.push(getCharFromInt(context_data_val));\n        break;\n      }\n      else context_data_position++;\n    }\n    return context_data.join('');\n  },\n\n  decompress: function (compressed) {\n    if (compressed == null) return \"\";\n    if (compressed == \"\") return null;\n    return LZString._decompress(compressed.length, 32768, function(index) { return compressed.charCodeAt(index); });\n  },\n\n  _decompress: function (length, resetValue, getNextValue) {\n    var dictionary = [],\n        next,\n        enlargeIn = 4,\n        dictSize = 4,\n        numBits = 3,\n        entry = \"\",\n        result = [],\n        i,\n        w,\n        bits, resb, maxpower, power,\n        c,\n        data = {val:getNextValue(0), position:resetValue, index:1};\n\n    for (i = 0; i < 3; i += 1) {\n      dictionary[i] = i;\n    }\n\n    bits = 0;\n    maxpower = Math.pow(2,2);\n    power=1;\n    while (power!=maxpower) {\n      resb = data.val & data.position;\n      data.position >>= 1;\n      if (data.position == 0) {\n        data.position = resetValue;\n        data.val = getNextValue(data.index++);\n      }\n      bits |= (resb>0 ? 1 : 0) * power;\n      power <<= 1;\n    }\n\n    switch (next = bits) {\n      case 0:\n          bits = 0;\n          maxpower = Math.pow(2,8);\n          power=1;\n          while (power!=maxpower) {\n            resb = data.val & data.position;\n            data.position >>= 1;\n            if (data.position == 0) {\n              data.position = resetValue;\n              data.val = getNextValue(data.index++);\n            }\n            bits |= (resb>0 ? 1 : 0) * power;\n            power <<= 1;\n          }\n        c = f(bits);\n        break;\n      case 1:\n          bits = 0;\n          maxpower = Math.pow(2,16);\n          power=1;\n          while (power!=maxpower) {\n            resb = data.val & data.position;\n            data.position >>= 1;\n            if (data.position == 0) {\n              data.position = resetValue;\n              data.val = getNextValue(data.index++);\n            }\n            bits |= (resb>0 ? 1 : 0) * power;\n            power <<= 1;\n          }\n        c = f(bits);\n        break;\n      case 2:\n        return \"\";\n    }\n    dictionary[3] = c;\n    w = c;\n    result.push(c);\n    while (true) {\n      if (data.index > length) {\n        return \"\";\n      }\n\n      bits = 0;\n      maxpower = Math.pow(2,numBits);\n      power=1;\n      while (power!=maxpower) {\n        resb = data.val & data.position;\n        data.position >>= 1;\n        if (data.position == 0) {\n          data.position = resetValue;\n          data.val = getNextValue(data.index++);\n        }\n        bits |= (resb>0 ? 1 : 0) * power;\n        power <<= 1;\n      }\n\n      switch (c = bits) {\n        case 0:\n          bits = 0;\n          maxpower = Math.pow(2,8);\n          power=1;\n          while (power!=maxpower) {\n            resb = data.val & data.position;\n            data.position >>= 1;\n            if (data.position == 0) {\n              data.position = resetValue;\n              data.val = getNextValue(data.index++);\n            }\n            bits |= (resb>0 ? 1 : 0) * power;\n            power <<= 1;\n          }\n\n          dictionary[dictSize++] = f(bits);\n          c = dictSize-1;\n          enlargeIn--;\n          break;\n        case 1:\n          bits = 0;\n          maxpower = Math.pow(2,16);\n          power=1;\n          while (power!=maxpower) {\n            resb = data.val & data.position;\n            data.position >>= 1;\n            if (data.position == 0) {\n              data.position = resetValue;\n              data.val = getNextValue(data.index++);\n            }\n            bits |= (resb>0 ? 1 : 0) * power;\n            power <<= 1;\n          }\n          dictionary[dictSize++] = f(bits);\n          c = dictSize-1;\n          enlargeIn--;\n          break;\n        case 2:\n          return result.join('');\n      }\n\n      if (enlargeIn == 0) {\n        enlargeIn = Math.pow(2, numBits);\n        numBits++;\n      }\n\n      if (dictionary[c]) {\n        entry = dictionary[c];\n      } else {\n        if (c === dictSize) {\n          entry = w + w.charAt(0);\n        } else {\n          return null;\n        }\n      }\n      result.push(entry);\n\n      // Add w+entry[0] to the dictionary.\n      dictionary[dictSize++] = w + entry.charAt(0);\n      enlargeIn--;\n\n      w = entry;\n\n      if (enlargeIn == 0) {\n        enlargeIn = Math.pow(2, numBits);\n        numBits++;\n      }\n\n    }\n  }\n};\n  return LZString;\n})();\n\nif (typeof define === 'function' && define.amd) {\n  define(function () { return LZString; });\n} else if( typeof module !== 'undefined' && module != null ) {\n  module.exports = LZString\n}\n","import LZString from \"lz-string\";\nimport state from \"./state\";\nimport { IAgency, ICommittee, ICouncil, IMember } from \"./types\";\n\nconst councilAPI = \"https://9hd7czxsbb.execute-api.us-east-1.amazonaws.com/dev\";\n// const councilAPI = \"http://localhost:3000/dev\";\nconst LEGACY_SERIALIZATION_LENGTH = 40;\n\n// Create a Council with Committees\nexport async function saveCouncil(\n        council: ICouncil\n    ) \n{\n    // store a string\n    const committeesString = serializeCommittees(council.committees);\n\n    // Create or Update\n    let url:string = `${councilAPI}/councils`;\n    let method = 'POST';\n    if(!!council.id) {\n        url += `/${council.id}`;\n        method = 'PUT';\n    }\n    const respJson = await fetch(url, {\n        method,\n        headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json'\n        },\n        body: JSON.stringify( {\n            ...council,\n            committees: committeesString // override to a string\n        } )\n    });\n    // TODO: add error handling if response is error\n    const councilData = await respJson.json();\n\n    // If save was successful, we have an ID\n    if(!!councilData.id) {\n        state.council = councilData;\n    }\n    \n    console.log(\"saveCouncil\", { councilData });\n\n    return councilData;\n}\n\n// Get a Council with Committees\nexport async function getCouncil(\n        id: string, \n        members:Array<IMember>, \n        agencies:Array<IAgency>, \n        committees:Array<ICommittee>\n    ): Promise<ICouncil> \n{\n    let council:ICouncil;\n\n    // TODO: remove Old serialization\n    if(id.length > LEGACY_SERIALIZATION_LENGTH) {\n        const committeesState = LZString.decompressFromEncodedURIComponent( id );\n    \n        council = {\n            id: null,\n            name: \"Custom Council\",\n            committees: deserializeCommittees(committeesState, members, agencies, committees)\n        }\n    } else {\n        const respJson = await fetch(`${councilAPI}/councils/${id}`, {\n            method: 'GET',\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json'\n            },\n        });\n        const councilData = await respJson.json();\n\n        // Committees is stored as a string, then merge in rest of response\n        council = {\n            ...councilData,\n            committees: deserializeCommittees( String(councilData.committees), members, agencies, committees )\n        }\n    }\n    \n    console.log(\"getCouncil\", { council });\n\n    return council;\n}\n\n\nconst SERIALIZATION_SEPARATOR = ',';\n\n// Creates a minimum-viable Committee string (id, name) that can be used to recreate full object\nexport function serializeCommittees(\n        committees:Array<ICommittee>\n    ): string \n{\n  const object = committees.reduce((array, committee) => {\n    const members = {\n      chair: committee.members.chair.map(c => c.name).join(SERIALIZATION_SEPARATOR),\n      members: committee.members.members.map(c => c.name).join(SERIALIZATION_SEPARATOR)\n    }\n\n    const agencies = committee.agencies.map(a => a.code).join(SERIALIZATION_SEPARATOR)\n\n    array.push(\n      {\n        ...committee,\n        members: members,\n        agencies: agencies\n      }\n    )\n\n    return array;\n  }, [])\n\n  return JSON.stringify(object);\n}\n\nexport function deserializeCommittees(\n        serialization:string, \n        members:Array<IMember>, \n        agencies:Array<IAgency>, \n        _committees:Array<ICommittee>\n    ): Array<ICommittee> \n{\n  const object = JSON.parse(serialization);\n\n  const loadedCommittees = object.reduce((array, c) => {\n    const chairsArray = c.members.chair.split(SERIALIZATION_SEPARATOR);\n    const membersArray = c.members.members.split(SERIALIZATION_SEPARATOR);\n    const agenciesArray = c.agencies.split(SERIALIZATION_SEPARATOR);\n\n    const loadedMembers = {\n      chair: members.filter(m => chairsArray.includes(m.name) ),\n      members: members.filter(m => membersArray.includes(m.name) )\n    }\n    const loadedAgencies =  agencies.filter(a => agenciesArray.includes(a.code) )\n\n    // TODO: consider removing - we can just store full info now.\n    // const loadedCommittee = committees.find(a => a.id === c.id)\n\n    const committee = {\n      ...c,\n      members: loadedMembers,\n      agencies: loadedAgencies,\n      //  if there was a Committee from the CSV add additional metadata\n    //   description: loadedCommittee?.description,\n    //   link: loadedCommittee?.link,\n    };\n\n    \n\n    array.push(committee);\n    return array;\n  }, []);\n  \n\n  return loadedCommittees;\n}","export interface IMember {\n  name:string\n  role?:string\n  elected?: number\n  termstart?: number\n  termend?: number\n  affiliation?: string\n  link?:string\n  photo:string\n}\n\nexport interface ICouncil {\n  id?:string\n  name?:string\n  description?:string\n  committees: ICommittee[]\n}\n\nexport interface ICommittee {\n  id:string\n  name?:string\n  description?:string\n  agencies?:Array<IAgency>\n  link?:string\n  members?: ICommitteeMembers\n  editable?: boolean\n}\nexport interface ICommitteeMembers {\n  chair?: Array<IMember>\n  members?: Array<IMember>\n}\nexport interface IAgency {\n  code:string\n  name:string\n  acronym:string\n  description:string\n  cluster:string\n  budget:string\n  link:string\n  group:string\n  committee?:string // ref which committee manages this agency\n  type:string\n}\n\nexport enum CouncilTemplate {\n  current = 'current',\n  blank = 'blank',\n  saved = 'saved',\n}\n\nexport enum CardAction {\n  add = 'add',\n  remove = 'remove',\n  none = 'none'\n}","import { createStore } from \"@stencil/store\";\nimport LZString from \"lz-string\";\nimport { getCouncil, saveCouncil, serializeCommittees } from \"./council\";\nimport { CouncilTemplate, IAgency, ICommittee, IMember } from \"./types\";\n\nconst { state, onChange } = createStore({\n  council: null,\n  committees: [], // current committees\n  action: \"\", // which entites are being dragged: agency, member\n  agencies: [], // agencies available to be places\n  draggable: null,\n  saved: false, // current save state\n  editable: false // is this just a view or can it be edited?\n});\n\nonChange('saved', value => {\n  state.saved = value;\n});\n\nonChange('council', value => {\n  state.council = value;\n  state.saved = false;\n});\n\nonChange('committees', value => {\n  state.committees = value;\n  state.saved = false;\n});\n\nonChange('action', value => {\n  state.action = value;\n});\n\nonChange('agencies', value => {\n  state.agencies = value;\n  state.saved = false\n});\n\nonChange('draggable', value => {\n  state.draggable = value;\n});\n\nexport function resetState() {\n  history.pushState(\"\", document.title, window.location.pathname);\n}\n\nexport default state;\n\nconst committeesStateParameter = \"council\";\nconst templateStateParameter = \"template\";\nconst editStateParameter = \"secret\";\n\nexport function getTemplateParam():string {\n  var url = window?.location?.search;\n  \n  let searchParams = new URLSearchParams(url);\n\n  // console.debug(\"getFilterBookmark\", {url, value: searchParams.get(filterName), searchParams})\n\n  if(searchParams.has(templateStateParameter)) {\n    return searchParams.get(templateStateParameter);\n  } else if(searchParams.has(committeesStateParameter)) {\n    return CouncilTemplate.saved;\n  } else {\n    return CouncilTemplate.current;\n  }\n  \n}\nexport function getTemplate(\n    defaultTemplate: string\n  ):CouncilTemplate \n{\n  const templateParam:string = getTemplateParam();\n\n  if(!!templateParam) {\n    return CouncilTemplate[templateParam];\n  } else {\n    return CouncilTemplate[defaultTemplate];\n  }\n  \n}\n\nexport async function getVersion(\n    members:Array<IMember>, \n    agencies:Array<IAgency>, \n    committees:Array<ICommittee>\n  ): Promise<Array<ICommittee>> \n{\n  var url = window?.location?.search;\n\n  let searchParams = new URLSearchParams(url);\n\n  // console.debug(\"getFilterBookmark\", {url, value: searchParams.get(filterName), searchParams})\n  \n  if(searchParams.has(committeesStateParameter)) \n  {\n    const committeesString = searchParams.get(committeesStateParameter);\n\n    // TODO: finish this function\n    const council = await getCouncil(committeesString, members, agencies, committees);\n    state.council = council;\n    state.committees = council.committees;\n  }\n  return state.committees;\n\n  // window.location.search = searchParams;\n}\n\nexport async function setVersion(\n    committees: Array<ICommittee>, \n    store:string = \"db\"\n  ): Promise<{}> \n{\n  //@ts-ignore\n  const url = new URL(window.location);\n\n  let councilSave = null;\n\n  if(store === \"url\") {\n    // TODO: DEPRECATED - remove this when verify save to DB is working\n    // Store to URL\n    const committeeString = serializeCommittees(committees);\n    // const binary = btoa(string);\n    const binary = LZString.compressToEncodedURIComponent( committeeString );\n    url.searchParams.set(committeesStateParameter, binary);\n  } else {\n    // Get Secret that write protects this council\n    const secret = url.searchParams.get(editStateParameter);\n\n    // TODO: Refactor to use Council interface throughout\n    let council = {\n      ...state.council,\n      secret: !!secret ? secret : undefined,\n      committees: committees\n    }\n    \n    councilSave = await saveCouncil( council );\n    const savedId = councilSave.id;\n    state.saved = true;\n    url.searchParams.set(committeesStateParameter, savedId);\n  }\n  \n  let editUrl = null;\n\n  // Update the Url with the unique secret\n  if(councilSave && councilSave.secret) {\n    url.searchParams.set(editStateParameter, councilSave.secret);\n    editUrl = url.href;\n    window.history.pushState({}, '', editUrl);    \n  }\n  \n  // We want a clean share URL\n  url.searchParams.delete(editStateParameter);\n  const shareUrl = url;\n\n  return {share: shareUrl, edit: editUrl};\n}\n\n// Checks of the current council is editable\n// Either has parameter for editing, or is a new council\nexport async function checkEditable():Promise<boolean> {\n  var url = window?.location?.search;\n  \n  let searchParams = new URLSearchParams(url);\n\n  if(searchParams.has(editStateParameter)\n    || !state.council\n    || !state.council?.id\n  ) {\n    state.editable = true;\n  }\n  return state.editable;\n}",":host {\n  display: block;\n  border: thin solid #bbb;\n  border-radius: 5px;\n  padding: 2px;\n}\ndc-council-card {\n  height: 90px;  \n}\n:host(:hover) {\n  cursor: pointer;\n  box-shadow: rgba(0, 0, 0, 0.24) 0px 3px 8px;\n}\n:host(.ghost) {\n  background: #0f9535;\n  opacity: 0.5;\n}\n:host(.selected) {\n  border: 1px solid #0f9535;\n  box-shadow: rgba(0, 0, 0, 0.25) 0px 54px 55px, rgba(0, 0, 0, 0.12) 0px -12px 30px, rgba(0, 0, 0, 0.12) 0px 4px 6px, rgba(0, 0, 0, 0.17) 0px 12px 13px, rgba(0, 0, 0, 0.09) 0px -3px 5px;  \n}\n/* #cluster, #link {\n  display: none;\n} */\n#type, #budget {\n  font-size: 0.8rem;\n  font-weight: 300;\n}\n#type::after {\n  content: '–';\n}\n#name {\n  font-weight: 600;\n  font-size: 0.9rem;\n  clear:right;\n}\n:host(.minor.display-major) {\n  display: none;\n}\n:host(.minor) {\n  border: thin green dashed;\n}\n","import { Component, Host, h, Prop, Event, EventEmitter } from '@stencil/core';\nimport { calculateBudget } from '../../utils/data';\nimport state from '../../utils/state';\nimport { CardAction, IAgency } from '../../utils/types';\n\n@Component({\n  tag: 'dc-council-agency-card',\n  styleUrl: 'dc-council-agency-card.css',\n  shadow: true,\n})\nexport class DcCouncilAgencyCard {\n\n  @Prop() agency;\n  // Should this member be removable (show action)\n  @Prop() action:CardAction = null;\n\n  @Event() agencyRemove: EventEmitter<IAgency>;\n\n  dragEnd(_ev) {\n    state.action = \"\";\n  }\n  dragStart(ev) {\n    state.action = \"agency\";\n\n    // Change the source element's background color\n    // to show that drag has started\n    ev.currentTarget.classList.add(\"dragging\");\n    // Clear the drag data cache (for all formats/types)\n    ev.dataTransfer.clearData();\n    // Set the drag's format and data.\n    // Use the event target's id for the data\n    ev.dataTransfer.setData(\"text/plain\", JSON.stringify(this.agency));\n    ev.dataTransfer.effectAllowed = \"move\";\n\n  }\n\n  render() {\n    return (\n      <Host\n        draggable={String(state.editable)}\n        onDragStart={this.dragStart.bind(this)}      \n        onDragEnd={this.dragEnd.bind(this)}\n        class={this.agency.type}\n      >\n          <slot></slot>\n          <dc-council-card>\n            <span slot=\"action\">\n              {this.renderAction(this.action)}\n            </span>          \n            <span slot=\"title\" class=\"title\">\n               <span id=\"name\">{this.agency?.name}</span>\n            </span>\n\n            <div slot=\"details\" class=\"details\">\n              <span id=\"type\">{this.agency.type}</span>\n              <span id=\"budget\">{calculateBudget([this.agency])}m budget</span>\n              <span>{this.renderInfoPanel(this.agency)}</span>\n            </div>\n            \n          </dc-council-card>\n      </Host>\n    );\n  }\n\n  private renderAction(action:CardAction) {\n    if(action === CardAction.remove) {\n      return <calcite-icon icon=\"x\" scale=\"m\" aria-hidden=\"true\"\n        onClick={(_evt) => this.agencyRemove.emit(this.agency)}\n      ></calcite-icon>;\n    }\n  }\n\n  private renderInfoPanel(agency: IAgency) {\n    if(agency.description?.length > 0) {\n      return <dc-council-info-panel>\n        <span slot=\"title\"><calcite-icon icon=\"information\" scale=\"m\"></calcite-icon></span>\n        <div slot=\"header\">About {agency.name}</div>\n        <p slot=\"content\">\n          {this.agency.description}\n          <br/>\n          {!!this.agency.link ?\n            <a href={this.agency.link} target=\"_new\">Agency Website</a>\n            : null\n          }\n        </p>\n      </dc-council-info-panel>;\n    } else {\n      return;\n    }\n  }\n}\n\n",":host {\n  display: block;\n  min-height: 75px;\n  border-top: 2px double var(--calcite-ui-brand);\n  padding-left: 2px;  \n}\n:host(.action-member) div  {\n  opacity: 0.2;\n}\n:host(.action-agency) div {\n  border: 1px dashed green;\n  background-color: lightgreen;\n}\n#agencies {\n  display: grid;\n  grid-template-rows: repeat(auto-fill,minmax(80px,1fr));\n  grid-auto-flow: rows;\n  grid-auto-rows: minmax(80px,1fr);\n  grid-row-gap: 5px;\n}\n#title {\n  margin: 0;\n  font-size: 1.1rem;\n  font-weight: 600;\n}\n\n/* TODO: Remove need to style a hidden sortable class */\n:host(.dropzone) div:empty {\n  overflow-x: auto;\n  background: repeating-linear-gradient(\n    45deg,\n    lightgreen,\n    lightgreen 10px,\n    rgb(191, 244, 191) 10px,\n    rgb(191, 244, 191) 20px\n  )  \n}\n\n\n:host(.dropzone):empty {\n  min-height: 100px;\n}\n\n:host(.dropzone) div:empty::after {\n  content: 'Add Agencies here';\n  margin-top: 40px;\n  text-align: center;\n  color: black;\n}\n","import { Component, Host, h, Listen, Prop, Event, EventEmitter, Method } from '@stencil/core';\nimport state from '../../utils/state';\nimport { CardAction, IAgency } from '../../utils/types';\n\n@Component({\n  tag: 'dc-council-agency-list',\n  styleUrl: 'dc-council-agency-list.css',\n  shadow: true,\n})\nexport class DcCouncilAgencyList {\n  \n  @Prop({ mutable:true, reflect: true }) agencies = [];\n  @Prop() display:string = 'major';\n\n  @Prop() editable:boolean = true;\n\n  @Event() agenciesChanged: EventEmitter<any>;\n\n  @Method()\n  public async addAgency(newAgencies: Array<IAgency>) {\n    // Don't add duplicate members\n    const existingAgencies = this.agencies.map(m => m.name);\n    newAgencies = newAgencies.filter(agency => {\n      return !existingAgencies.includes(agency.name);\n    })\n\n    this.agencies = [...this.agencies, ...newAgencies]\n    this.agenciesChanged.emit( newAgencies );\n  }\n\n  @Listen('agencyRemove')\n  onAgencyRemove(evt) {\n    // add this agency to the global availability\n    state.agencies = [...state.agencies, evt.detail];\n    // Now remove it from this commmittee\n    this.removeAgency(evt.detail);\n  }\n\n  @Method()\n  public async removeAgency(removedAgency:IAgency) {\n    this.agencies = this.agencies.filter((agency) => {\n      return agency.name !== removedAgency.name;\n    })\n    // notify cards for updating summary stats\n    this.agenciesChanged.emit( );\n\n  }\n  @Listen('addedElement')\n  addedElement(evt) {\n    console.log(`drop: effectAllowed = ${evt.dataTransfer.effectAllowed}`);\n\n    evt.preventDefault();\n    // debugger\n    var data = evt.dataTransfer.getData(\"text\");\n    const newAgency = JSON.parse(data);\n    this.addAgency([ newAgency ]);\n\n\n    // Storing so we can remove later\n    state.draggable = newAgency;\n  }\n\n  allowDrop(evt) {\n    if(state.action === \"agency\") {\n      evt.preventDefault();\n    }\n  }\n  dragEnd(evt) {\n    evt.preventDefault();\n    if(!!state.draggable) {\n      // remove the dragged element\n      evt.target.removeAgency(state.draggable);//removeChild(evt.target);\n    }\n\n    state.draggable = null;\n\n  }\n\n  render() {\n    return (\n      <Host\n          class={`dropzone spots-available action-${state.action} display-${this.display}`}\n          onDrop={this.addedElement.bind(this)}\n          onDragOver={this.allowDrop.bind(this)}\n          onDragEnd={this.dragEnd.bind(this)}\n      >\n        <span id=\"title\">\n          <slot></slot>\n        </span>\n\n        <div id=\"agencies\">\n        {this.agencies.map((agency) => {\n          return (\n            <dc-council-agency-card \n              agency={agency}\n              action={this.editable ? CardAction.remove : null}\n              class={`display-${this.display}`}\n            ></dc-council-agency-card>\n          )\n        })}\n        </div>\n      </Host>\n    );\n  }\n}\n",":host {\n  display: block;\n  background: white;\n  position: relative;\n  display: grid;\n  grid-template-columns: fit-content(70px) auto;\n  grid-template-areas: \n    \"thumbnail title\"\n    \"thumbnail details\";  \n}\n\n#action {\n  display: none;\n}\n:host(:hover) #action  {\n  display: block;\n  color: red;\n}\n\n#action {\n  position: absolute;\n  right: 0;\n  top: 40px;\n  z-index: 500;\n}\n#thumbnail {\n  grid-area: thumbnail;\n  max-width: 70px;\n  /* \n  height: 100%;\n  border-radius: 50%;\n  vertical-align: middle;\n  margin-right: 5px; */\n}\n#title {\n  grid-area: title;\n  padding: 5px 0 0 5px;\n  min-height: 50px;\n}\n#details {\n  grid-area: details;\n  padding: 5px 0 0 5px;\n}","import { Component, Host, h, Prop } from '@stencil/core';\nimport state from '../../utils/state';\n\n@Component({\n  tag: 'dc-council-card',\n  styleUrl: 'dc-council-card.css',\n  shadow: true,\n  assetsDirs: ['assets'],\n})\nexport class DcCouncilCard {\n\n  @Prop() thumbnail:string = null;\n\n  render() {\n    return (\n      <Host class=\"card\">\n        {state.editable ? this.renderAction() : null}\n        \n        <img id=\"thumbnail\" src={this.thumbnail}></img>\n        <span id=\"title\"><slot name=\"title\"></slot></span>\n        <span id=\"details\"><slot name=\"details\"></slot></span>\n      </Host>\n    );\n  }\n\n\n  private renderAction() {\n    return <span id=\"action\">\n      <slot name=\"action\">\n        <calcite-icon icon=\"x\" scale=\"m\" aria-hidden=\"true\"></calcite-icon>\n      </slot>\n    </span>;\n  }\n}\n",":host {\n  display: block;\n  border: thin solid #DDD;\n  box-shadow: rgba(0, 0, 0, 0.15) 1.95px 1.95px 2.6px;\n  border-radius: 5px;\n  background-color: #eee;\n}\ndc-council-card {\n  background-color: #eee;\n}\n:host(.ghost) {\n  box-shadow: rgba(0, 0, 0, 0.25) 0px 54px 55px, rgba(0, 0, 0, 0.12) 0px -12px 30px, rgba(0, 0, 0, 0.12) 0px 4px 6px, rgba(0, 0, 0, 0.17) 0px 12px 13px, rgba(0, 0, 0, 0.09) 0px -3px 5px;  \n}\n#title {\n  font-size: 1.1rem;\n  font-weight: 700;\n  min-height: 100px;\n}\nul {\n  list-style-type: none;\n  padding: 0;\n  margin: 0;\n}\n\n#titleEdit {\n  display: none;\n}\n:host() #titleEdit {\n  display: none;\n}\n:host() #titleView {\n  display: block;\n}\n:host(.editing) #titleEdit {\n  display: block;\n}\n:host(.editing) #titleView {\n  display: none;\n}\n\n#deleteButton {\n  background-color: white;\n}\n\ndc-council-agency-list {\n  margin-top: 10px;\n  padding-top: 5px;\n}\n/* When an agency can be added here */\n:host(.action-agency) {\n  border: 1px dashed green;\n  background-color: lightgreen;  \n}\n:host(.action-agency):hover {\n  border: 1px solid red;\n}","import { Component, Host, h, Listen, Prop, Event, EventEmitter, Element, Method, State } from '@stencil/core';\nimport { calculateBudget } from '../../utils/data';\nimport state from '../../utils/state';\nimport { IAgency, ICommittee } from '../../utils/types';\n\n@Component({\n  tag: 'dc-council-committee-card',\n  styleUrl: 'dc-council-committee-card.css',\n  scoped: true,\n})\nexport class DcCouncilCommitteeCard {\n  @Element() el: HTMLElement;\n  \n  titleInputEl:HTMLInputElement;\n\n  @Prop({ mutable: true, reflect: true }) committee: ICommittee;\n\n  /**\n   * Determines if Members list is editable\n   * used mostly for \"Committee of the Whole\"\n   */\n  @Prop({ mutable:true, reflect: true }) editable: boolean = true;\n\n  private membersEl:HTMLDcCouncilCommitteeMemberListElement;\n  private agenciesEl:HTMLDcCouncilAgencyListElement;\n  \n  @Event() removeCommittee: EventEmitter<any>;\n  @Event() committeeUpdated: EventEmitter<ICommittee>;\n\n  // State for updating stats when sub-properties change (member + agency counts)\n  @State() stats: {};\n  // Is the title being edited?\n  @State() editing: boolean = false;\n  @State() agencies: IAgency[] = [];\n\n  componentWillRender() {  \n    this.editable = this.committee.editable;\n    this.updateStats(this.committee);\n    this.agencies = this.committee.agencies;\n  }\n\n  @Listen('membersChanged')\n  async membersChanged(_evt) {\n    this.committee.members = await this.membersEl.getMembers();\n    this.updateStats(this.committee);\n    this.committeeUpdated.emit( this.committee );\n  }\n  @Listen('agenciesChanged')\n  async agenciesChanged(_evt) {\n    this.committee.agencies = this.agenciesEl.agencies;\n    this.updateStats(this.committee);\n    this.committeeUpdated.emit( this.committee );\n  } \n\n  @Method()\n  public async deleteCommittee() {\n    // make all agencies available to the game\n    state.agencies = [...state.agencies, ...this.committee.agencies]\n    this.removeCommittee.emit(this.committee);\n  }\n\n  updateStats(committee) {\n    this.stats = this.renderStats(committee);\n  }\n  renderStats(committee) {\n    return (\n      <ul id=\"stats\">\n        <li>{calculateBudget(committee.agencies)}m budget</li>\n        <li>{this.countAgencies()} agencies</li>\n        <li>{this.countMembers()} members</li>\n      </ul>\n    )\n  }\n\n  private countAgencies() {\n    return this.committee.agencies?.length;\n  }\n\n  private countMembers() {\n    let count = this.committee.members?.members?.length + this.committee.members?.chair?.length;\n    return !!count ? count : 0;\n  }\n\n  editMode() {\n    if(!this.editing && this.committee.editable) {\n      this.editing = true;\n      this.el.classList.add(\"editing\");\n    }\n  }\n\n  @Listen('calciteInlineEditableEditConfirm')\n  titleChanged(_evt) {\n    \n    this.committee.name = this.titleInputEl.value;\n    this.el.classList.remove(\"editing\");\n    this.editing = false;\n\n    // Council needs to be resaved;\n    state.saved = false;\n  }\n\n  @Listen('addedElement')\n  addedElement(evt) {\n    if(state.action === \"agency\") {\n        console.log(`drop: effectAllowed = ${evt.dataTransfer.effectAllowed}`);\n\n      evt.preventDefault();\n      // debugger\n      var data = evt.dataTransfer.getData(\"text\");\n      const newAgency = JSON.parse(data);\n      this.agenciesEl.addAgency([ newAgency ]);\n      \n      // Storing so we can remove later\n      state.draggable = newAgency;\n    }\n  }\n\n  allowDrop(evt) {\n    if(state.action === \"agency\") {\n      evt.preventDefault();\n    }\n  }\n  dragEnd(evt) {\n    evt.preventDefault();\n    if(!!state.draggable) {\n      // remove the dragged element\n      evt.target.removeAgency(state.draggable);//removeChild(evt.target);\n    }\n\n    state.draggable = null;\n\n  }\n\n  render() {\n    let classes = [`action-${state.action}`];\n    if(this.editable) {\n      classes.push('editable')\n    }\n\n    return (\n      <Host\n        onDrop={this.addedElement.bind(this)}\n        onDragOver={this.allowDrop.bind(this)}\n        onDragEnd={this.dragEnd.bind(this)}      \n        class={classes.join(' ')}\n      >\n        <slot></slot>\n        <dc-council-card>\n          <span slot=\"action\">\n            {state.editable ? this.renderDelete() : null}\n          </span>\n          <span slot=\"title\" id=\"title\">\n            <span id=\"titleView\"\n              onClick={this.editMode.bind(this)}\n            >{this.committee?.name}</span>\n            {/* <calcite-icon icon=\"group\" scale=\"m\" aria-hidden=\"true\"></calcite-icon> */}\n            <calcite-inline-editable\n              id=\"titleEdit\"\n              scale=\"l\"\n              intl-cancel-editing=\"Cancelar\"\n              intl-enable-editing=\"Haga clic para editar\"\n              intl-confirm-changes=\"Guardar\"\n              controls={true}\n              // editing-enabled=\"true\"\n            >\n              <calcite-input-text\n                scale=\"l\"\n                status=\"idle\"\n                alignment=\"start\"\n                prefix-text=\"\"\n                suffix-text=\"\"\n                value={this.committee?.name}\n                placeholder=\"Committee Name\"\n                ref={el => this.titleInputEl = el}\n              ></calcite-input-text>\n          </calcite-inline-editable>\n        </span>\n        <span slot=\"details\">\n          {this.stats}\n          {this.renderInfoPanel(this.committee)}\n        <dc-council-committee-member-list\n          members={this.committee.members}\n          editable={this.editable}\n          ref={el => (this.membersEl = el as HTMLDcCouncilCommitteeMemberListElement)}\n        ></dc-council-committee-member-list>\n\n        \n        {this.renderAgencyList(this.agencies)}\n        </span>\n        {/* <ul class=\"details subtitle\">\n          {Object.keys(this.committee).map(key => {\n            return <li>{key}: {this.committee[key]}</li>\n          })}\n          <li><a href={this.committee.link} target=\"_new\">Website</a></li>\n        </ul> */}\n\n        </dc-council-card>\n      </Host>\n    );\n  }\n\n  private renderAgencyList(agencies: IAgency[] = []) {\n    return <dc-council-agency-list\n      agencies={agencies}\n      display='all'\n      ref={el => (this.agenciesEl = el as HTMLDcCouncilAgencyListElement)}\n    >\n      Agencies\n    </dc-council-agency-list>;\n  }\n  private renderInfoPanel(committee: ICommittee) {\n    if(committee.description?.length > 0) {\n      return <dc-council-info-panel>\n        <span slot=\"title\">About</span>\n        <div slot=\"header\">About {committee.name}</div>\n        <p slot=\"content\">\n          {committee.description}\n        </p>\n      </dc-council-info-panel>;\n    } else {\n      return;\n    }\n    \n  }  \n  private renderDelete() {\n    if(this.editable) {\n      return ( <calcite-button\n          id=\"deleteButton\"\n          scale=\"s\"\n          appearance=\"transparent\"\n          color=\"red\"\n          icon-start=\"x\"\n          alignment=\"center\"\n          type=\"button\"\n          width=\"auto\"\n          onClick={this.deleteCommittee.bind(this)}\n        >Delete Committee</calcite-button>)\n    } else {\n      return(\n       <calcite-button\n          id=\"deleteButton\"\n          scale=\"s\"\n          appearance=\"transparent\"\n          color=\"blue\"\n          icon-start=\"circle-disallowed\"\n          alignment=\"center\"\n          type=\"button\"\n          width=\"auto\">Permament Committee</calcite-button>\n      )\n    }\n  }\n}\n",":host {\n  display: block;\n}\n\n.head {\n  /* display: flex;\n  flex-direction: column; */\n  /* align-items: left; */\n  clear: both;\n  margin: 30px 0 10px 10px;\n}\n#title {\n  margin: 0;\n  font-size: 1.3rem;\n  font-weight: 600;\n}\n#newCommitteeButton {\n  display: inline;\n}\n.container {\n  display: grid;\n  grid-template-rows: 1fr;\n  grid-template-columns: repeat(auto-fill,minmax(250px,1fr));\n  grid-auto-flow: column;\n  grid-auto-columns: minmax(250px,1fr);\n  overflow-x: auto;\n  grid-gap: 12px;\n  padding-left: 10px;\n}\n\n.committee-card {\n  border-right: 1px solid #bbb;\n  padding-right: 10px;\n}","import { Component, Host, h, Prop, Listen } from '@stencil/core';\nimport { createCommittee } from '../../utils/data';\nimport state from '../../utils/state';\nimport { ICommittee } from '../../utils/types';\n\n@Component({\n  tag: 'dc-council-committee-list',\n  styleUrl: 'dc-council-committee-list.css',\n  shadow: true,\n})\nexport class DcCouncilCommitteeList {\n\n  @Prop({ mutable: true, reflect: true }) committees:Array<ICommittee> = [];\n  \n  @Listen('addCommittee')\n  addCommittee(_evt) {\n    const newCommittee = createCommittee();\n\n    this.committees = [...this.committees, newCommittee];\n\n    state.committees = [...this.committees];\n\n  }\n\n  // TODO: Replace Agencies to available\n  @Listen('removeCommittee')\n  removeCommittee(evt) {\n    this.committees = this.committees.filter(c => {\n      return c.id !== evt.detail.id\n    })\n\n    // New copies\n    state.committees = [...this.committees];\n  }\n\n  @Listen('committeeUpdated')\n  committeeUpdated(_evt) {\n    state.committees = [...this.committees];\n    state.saved = false;\n  }\n\n  render() {\n    return (\n      <Host>\n        <div class=\"head\">\n          <span id=\"title\"><slot></slot></span>\n        </div>\n        <div id=\"committees\" class=\"container\">\n          {this.committees.map((committee) => {\n            return (\n              <dc-council-committee-card \n                class=\"committee-card\"\n                id={`committee-${committee.id}`}\n                committee={committee}\n              ></dc-council-committee-card>\n            )\n          })}\n          {state.editable ? this.renderNewCommittee() : null}\n        </div> \n      </Host>\n    );\n  }\n\n\n  private renderNewCommittee() {\n    return <dc-council-committee-placeholder\n      id=\"newCommitteeButton\"\n    ></dc-council-committee-placeholder>;\n  }\n}\n",":host {\n  display: block;\n}\n\ndc-council-member-list {\n  margin: 15px 0; \n}","import { Component, Host, h, Method, Prop } from '@stencil/core';\nimport { ICommitteeMembers } from '../../utils/types';\n\n@Component({\n  tag: 'dc-council-committee-member-list',\n  styleUrl: 'dc-council-committee-member-list.css',\n  shadow: true,\n})\nexport class DcCouncilCommitteeMemberList {\n  private chairEl:HTMLDcCouncilMemberListElement;\n  private membersEl:HTMLDcCouncilMemberListElement;\n\n  @Prop({ mutable:true, reflect: true}) members: ICommitteeMembers;\n\n  /**\n   * Determines if Members list is editable\n   * used mostly for \"Committee of the Whole\"\n   */  \n  @Prop() editable:boolean = true;\n\n  @Method()\n  public async getMembers():Promise<ICommitteeMembers> {\n    return {\n      chair: this.chairEl.members,\n      members: this.membersEl.members\n    };\n  }\n\n  render() {\n    return (\n      <Host>\n        <slot></slot>\n        \n        <dc-council-member-list\n          id=\"chair\"\n          max={1}\n          position=\"chair\"\n          editable={this.editable}\n          members={this.members?.chair}\n          ref={el => (this.chairEl = el as HTMLDcCouncilMemberListElement)}\n        >\n         Chair\n        </dc-council-member-list>\n        \n        <dc-council-member-list\n          id=\"members\"\n          position=\"members\"\n          editable={this.editable}\n          members={this.members?.members}\n          ref={el => (this.membersEl = el as HTMLDcCouncilMemberListElement)}\n        >\n          Members\n        </dc-council-member-list>\n      </Host>\n    );\n  }\n}\n",":host {\n  display: block;\n  border: thin dashed green;\n  width: 270px;\n  height: 600px;\n  text-align: center;\n  padding-top: 40px;\n}\n","import { Component, Event, Host, h, Prop, EventEmitter } from '@stencil/core';\n\n@Component({\n  tag: 'dc-council-committee-placeholder',\n  styleUrl: 'dc-council-committee-placeholder.css',\n  scoped: true,\n})\nexport class DcCouncilCommitteePlaceholder {\n\n  @Prop() committee;\n\n  @Event() addCommittee: EventEmitter;\n\n  buttonClicked() {\n    this.addCommittee.emit();\n  }\n\n  render() {\n    return (\n      <Host>\n        <slot></slot>\n        <calcite-button\n          alignment=\"start\"\n          appearance=\"solid\"\n          color=\"blue\"\n          icon-start=\"plus\"\n          scale=\"m\"\n          onClick={this.buttonClicked.bind(this)}\n        >\n          Add Committee\n        </calcite-button>\n      </Host>\n    );\n  }\n\n}\n",":host {\n  display: block;\n  margin: 0;\n  padding: 0;\n  --calcite-ui-brand: #0f9535;\n  --calcite-ui-text-3: #9db2a3;\n  /* https://esri.github.io/calcite-components/?path=/story/theming-custom-theme--interactive */\n}\n#gameboard {\n  display: grid;\n  grid-template-columns: auto auto;\n  grid-template-areas: \n    \"header header\"\n    \"pieces committees\"\n    \"pieces committees\"\n    \"footer footer\";\n}\n#header {\n  grid-area: header;\n  background-color: white;\n  padding: 0 10px;\n  font-size: 1.3em;\n  display: flex;\n}\n\n/* Editing council title */\n#titleEdit {\n  display: none;\n}\n:host() #titleEdit {\n  display: none;\n}\n:host() #titleView {\n  display: block;\n}\n:host(.editing) #titleEdit {\n  display: block;\n}\n:host(.editing) #titleView {\n  display: none;\n}\n\n\ndc-council-info-panel {\n  margin: 1.5rem 0 0 1rem;\n}\n#start {\n  font-size: 0.8em;\n  font-style: italic;\n}\n#reset {\n  margin: 20px 0 0 20px;\n  margin-left: auto;\n}\n\n#board {\n  grid-area: committees;\n  overflow: scroll;\n  height: 100vh;\n\n  /* keep sidebar-tab within space */\n  position: relative;\n\n  /* border-left: thin solid #CCC;\n  padding-left: 10px; */\n  /* max-height: 600px; */\n}\n\n#boardHeader {\n  display: flex;\n  align-items: stretch;\n}\n#boardHeader .control {\n  /* margin: 0 10px 0 auto; */\n  margin-left: 20px;\n}\n\n.sidebar-hidden #board {\n  width: 100vw;\n  \n}\n\ndc-council-member-list {\n  grid-area: members;\n}\ndc-council-agency-list {\n  grid-area: agencies;\n  height: 100vw;\n}\n\n\n.display-members dc-council-agency-list {\n  display: none;\n}\n.display-agencies dc-council-member-list {\n  display: none;\n}\n\n#sidebar {\n  transition: all 0.25s;\n  margin-left: 0;\n  position: relative;\n  z-index: 100;\n  width: 300px;\n  height: 100vh;\n  padding-right: 10px;\n  /* margin-right: 10px; */\n  box-shadow: rgba(0, 0, 0, 0.07) 0px 1px 2px, rgba(0, 0, 0, 0.07) 0px 2px 4px, rgba(0, 0, 0, 0.07) 0px 4px 8px, rgba(0, 0, 0, 0.07) 0px 8px 16px, rgba(0, 0, 0, 0.07) 0px 16px 32px, rgba(0, 0, 0, 0.07) 0px 32px 64px;  \n}\n.sidebar-hidden #sidebar {\n  /* display: none; */\n  margin-left: -299px;\n}\n#sidebar-tab {\n  font-size: 0.6rem;\n  font-weight: 300;\n  margin-right: 200px;\n  display: block;\n  position: absolute;\n  top: 0;\n  left: 310px;\n  width: 25px;\n  height: 25px;\n  cursor: pointer;\n  z-index: 101;\n  /* box-shadow: rgba(0, 0, 0, 0.07) 0px 1px 2px, rgba(0, 0, 0, 0.07) 0px 2px 4px, rgba(0, 0, 0, 0.07) 0px 4px 8px, rgba(0, 0, 0, 0.07) 0px 8px 16px, rgba(0, 0, 0, 0.07) 0px 16px 32px, rgba(0, 0, 0, 0.07) 0px 32px 64px;   */\n  box-shadow: rgba(0, 0, 0, 0.15) 1.95px 1.95px 2.6px;\n}\n\n#pieces {\n  position: relative;\n  overflow: auto;\n  height: 100%;\n}\n\n#selector {\n  margin-top: 10px;\n  margin-bottom: 20px;\n}\n","import { Component, Host, h, State, Prop, Listen, Element } from '@stencil/core';\nimport { loadAgencies, loadBlank, loadCommittees, loadMembers } from '../../utils/data';\nimport state, { checkEditable, getTemplate, getTemplateParam, getVersion, resetState } from '../../utils/state';\nimport { CouncilTemplate, ICommittee, IMember } from '../../utils/types';\n\n@Component({\n  tag: 'dc-council-game',\n  styleUrl: 'dc-council-game.css',\n  scoped: true,\n})\nexport class DcCouncilGame {\n  @Element() el: HTMLElement;\n  \n  @Prop({ mutable: true, reflect: true }) template: CouncilTemplate = CouncilTemplate.current;\n\n  /**\n   * URL to Agency spreadsheet\n   */\n  @Prop() agencyFilename: string = \"assets/2022/agencies.csv\";\n  @Prop() minoragencyFilename: string = \"assets/2022/minoragencies.csv\";\n  @Prop() committeeFilename: string = \"assets/2022/committees.csv\";\n  @Prop() memberFilename: string = \"assets/2022/members.csv\";\n\n  @Prop({ mutable: true, reflect: true }) selectedPieces: string = \"agencies\";\n\n  /**\n   * restart - showing template\n   */\n  @Prop({ mutable: true, reflect: true }) restart: boolean = false; \n\n  @State() agencies = [];\n  @Prop({mutable: true, reflect: true}) committees: Array<ICommittee> = [];\n  @State() members: Array<IMember> = [];\n  \n  // Show/hide sidebar\n  @State() sidebar: boolean = true;\n\n  // Show major or minor agencies\n  @State() minorAgencyDisplay:boolean = false;\n\n  titleInputEl:HTMLInputElement;\n\n  private agencyDisplayEl;\n\n  async componentWillLoad() {\n\n    this.template = getTemplate(this.template);\n\n    this.members = await loadMembers(this.memberFilename);\n    const agencies = await loadAgencies(this.agencyFilename);\n    const minoragencies = await loadAgencies(this.minoragencyFilename);\n    this.agencies = [...agencies, ...minoragencies];\n\n    // what agencies are available\n    state.agencies = this.agencies;\n\n\n    this.committees = await this.loadTemplate(this.template);\n\n    // TODO: Move this to a more central state management\n    state.council = {\n      ...state.council,\n      committees: this.committees\n    }\n    // TODO: clean up this logic for how to determine this is the initial view\n    if(!getTemplateParam() || !state.council) {\n      this.restart = true;\n    }\n\n  }\n  async componentWillRender() {\n    checkEditable();\n  }\n\n  @State() editing: boolean = false;\n  editMode() {\n    if(!this.editing) {\n      this.editing = true;\n      this.el.classList.add(\"editing\");\n    }\n  }\n  @Listen('calciteInlineEditableEditConfirm')\n  titleChanged(_evt) {\n    \n    state.council.title = this.titleInputEl.value;\n    this.el.classList.remove(\"editing\");\n    this.editing = false;\n\n    // Council needs to be resaved;\n    state.saved = false;\n  }\n\n\n  availableAgencies(committees: Array<ICommittee>) {\n    const usedAgencies = committees.map(committee => committee.agencies?.map(agency => agency.name)).flat()\n\n    const availableAgencies = this.agencies.filter(agency => {\n      return !usedAgencies.includes(agency.name);\n    })\n    return availableAgencies;\n  }\n\n  async loadTemplate(template: CouncilTemplate = CouncilTemplate.saved): Promise<Array<ICommittee>> {\n    let committees: Array<ICommittee> = [];\n\n    switch (template) {\n      case CouncilTemplate.current: {\n        committees = await loadCommittees(this.committeeFilename, this.members, this.agencies);\n        break;\n      }\n      case CouncilTemplate.saved: {\n        committees = await getVersion(this.members, this.agencies, this.committees);\n        break;\n      }\n      default: { \n        // blank, but with placeholder committees\n        let permanentCommittees = this.committees.filter(c => !c.editable);\n        committees = await loadBlank(permanentCommittees);\n      }\n    }\n\n    state.agencies = this.availableAgencies(committees);\n    state.committees = committees;\n\n    return committees;\n  }\n\n  @Listen('templateSelected')\n  async templateSelected(evt) {\n    resetState();\n    const committees = await this.loadTemplate(evt.detail);\n    this.committees = [...committees];\n    state.council = {committees: this.committees};\n  }\n\n  @Listen('calciteRadioGroupChange')\n  async selectorChanged(evt) {\n    this.selectedPieces = evt.detail;\n  }\n\n  renderSelector() {\n    return (\n      <calcite-radio-group\n        layout=\"horizontal\"\n        appearance=\"solid\"\n        scale=\"l\"\n        width=\"full\"\n      >\n        <calcite-radio-group-item value=\"agencies\" checked=\"\">\n          Agencies\n        </calcite-radio-group-item>\n        <calcite-radio-group-item value=\"members\" >\n          Members\n        </calcite-radio-group-item>\n      </calcite-radio-group>\n    );\n\n  }\n\n  render() {\n\n    return (\n      <Host>\n        <div id=\"gameboard\" class={`display-${this.selectedPieces} sidebar-${this.sidebar ? 'visible' : 'hidden'}`}>\n          <div id=\"header\">\n            <slot name=\"header\"></slot>\n            {this.renderInfoPanel()}\n            {/* {this.renderPreviewPanel()} */}\n            \n\n            {this.renderTemplatePicker()}\n          </div>\n          {state.editable ? this.renderSidebar() : null}\n          {this.renderBoard(this.committees)}\n          {this.renderFooter()}\n        </div>\n      </Host>\n    );\n  }\n\n\n  private renderTemplatePicker() {\n    return <dc-council-template\n      open={this.restart}\n      class=\"control\"\n      id=\"reset\">\n      <span id=\"start\" slot=\"title\">Create your own</span>\n    </dc-council-template>;\n  }\n\n  private renderFooter() {\n    return <div id=\"footer\">\n      <slot name=\"footer\"></slot>\n    </div>;\n  }\n\n  private renderBoard(_committees: ICommittee[]) {\n    return <div id=\"board\">\n      <dc-council-committee-list\n        committees={this.committees}\n      >\n        <span id=\"boardHeader\">\n        {this.renderEditableTitle()}\n          \n          <dc-council-share class=\"control\" scale=\"l\">\n            Share\n          </dc-council-share>\n          <dc-council-visualization\n            committees={state.committees}\n          >\n            <span slot=\"title\">Budget Visualization</span>\n          </dc-council-visualization>\n          <span id=\"previewSelection\">\n            {state.draggable}\n          </span>\n        </span>\n      </dc-council-committee-list>\n\n    </div>;\n  }\n\n  private renderEditableTitle() {\n    // debugger;\n    return <span slot=\"title\" id=\"title\">\n      <span id=\"titleView\"\n        onClick={this.editMode.bind(this)}\n      >{!!state.council?.title ? state.council.title : \"Your Council (Click to Change Title)\"}</span>\n      {/* <calcite-icon icon=\"group\" scale=\"m\" aria-hidden=\"true\"></calcite-icon> */}\n      <calcite-inline-editable\n        id=\"titleEdit\"\n        scale=\"l\"\n        intl-cancel-editing=\"Cancelar\"\n        intl-enable-editing=\"Haga clic para editar\"\n        intl-confirm-changes=\"Guardar\"\n        controls={true}\n      >\n        <calcite-input-text\n          scale=\"l\"\n          status=\"idle\"\n          alignment=\"start\"\n          prefix-text=\"\"\n          suffix-text=\"\"\n          value={state.council?.title}\n          placeholder=\"Council Name\"\n          ref={el => this.titleInputEl = el}\n        ></calcite-input-text>\n      </calcite-inline-editable>\n    </span>;\n  }\n\n  @Listen('calciteCheckboxChange') \n  async agencyDisplayChange(evt) {\n    console.log('agencyDisplayChange', {evt, value: this.agencyDisplayEl.checked});\n    this.minorAgencyDisplay = this.agencyDisplayEl.checked;\n\n  }\n  private renderSidebar() {\n    return <div id=\"sidebar\"\n      class={{\n        hidden: this.sidebar\n      }}\n    >\n      <div id=\"selector\">{this.renderSelector()}</div>\n      <div id=\"pieces\">\n        <dc-council-member-list\n          members={this.members}\n        >\n        </dc-council-member-list>\n        <dc-council-agency-list\n          display={this.minorAgencyDisplay ? 'all' : 'major'}\n          agencies={state.agencies}\n          class=\"pieces\"\n          editable={false}\n        >\n        <calcite-label layout=\"inline\">\n          <calcite-checkbox ref={el => this.agencyDisplayEl = el} checked={this.minorAgencyDisplay} scale=\"m\"></calcite-checkbox>\n          Show minor agencies\n        </calcite-label>\n        </dc-council-agency-list>\n      </div>\n      <span id=\"sidebar-tab\" onClick={() => this.sidebar = this.sidebar ? false : true}>\n        <calcite-icon icon={this.sidebar ? 'chevronLeft' : 'chevronRight'} scale=\"m\"></calcite-icon>\n      </span>\n\n    </div>;\n  }\n\n  private renderInfoPanel() {\n    return <dc-council-info-panel>\n      <span slot=\"title\">How to use this tool</span>\n      <div slot=\"header\">How to Use this tool</div>\n      <p slot=\"content\">\n        <ol>\n          <li>Create/rename any desired committees.</li>\n          <li>Drag and drop a Councilmember into the chair position, and then others into the committee member positions.</li>\n          <li>Drag and drop the agencies this committee should have oversight of.</li>\n          <li>When you're ready, click \"Save\" and you will be given the option to share your version on social media or via a link!</li>\n        </ol>\n      </p>\n    </dc-council-info-panel>;\n  }\n  // private renderPreviewPanel() {\n  //   return <dc-council-info-panel scale=\"m\">\n  //     <span slot=\"title\">Preview</span>\n  //     <div slot=\"header\">Preview Council</div>\n  //     <p slot=\"content\">\n  //       <dc-council-preview\n  //         committees={state.committees}>\n          \n  //       </dc-council-preview>\n  //     </p>\n  //   </dc-council-info-panel>;\n  // }  \n}\n",":host {\n  display: inline;\n}\n#header {\n  font-size: larger;\n}","import { Component, Host, h, Method, Listen, Prop } from '@stencil/core';\n\n@Component({\n  tag: 'dc-council-info-panel',\n  styleUrl: 'dc-council-info-panel.css',\n  shadow: true,\n})\nexport class DcCouncilInfoPanel {\n  @Prop({ mutable: true, reflect: true }) open: boolean = false;\n  @Prop() scale:string = \"m\";\n\n  @Method()\n  public async showModal() {\n    this.open = true;\n  }\n  @Method()\n  public async hideModal() {\n    this.open = false;\n  }\n\n  @Listen('calciteModalClose')\n  saveChoice() {\n    this.hideModal();\n  }  \n\n  render() {\n    return (\n      <Host>\n        <calcite-button\n          appearance=\"transparent\"\n          scale=\"m\"\n           onClick={this.showModal.bind(this)}\n        >\n          <slot name=\"title\"></slot>\n        </calcite-button>\n        {this.renderModal()}\n      </Host>\n    );\n  }\n  private renderModal() {\n    return <calcite-modal\n      color=\"\"\n      open={this.open}\n      background-color=\"white\"\n      scale={this.scale}\n      width={this.scale}\n      intl-close=\"Close\"\n      // ref={(el: HTMLCalciteModalElement) => this.modalEl = el} \n      aria-labelledby=\"modal-share\"\n    >\n      <h3 id=\"header\" slot=\"header\">\n        <slot name=\"header\">Start your Fantasy Council</slot>\n      </h3>\n      <div id=\"content\" slot=\"content\">\n        <slot name=\"content\"></slot>\n      </div>\n      <calcite-button\n        slot=\"primary\"\n        width=\"full\"\n        onClick={this.hideModal.bind(this)}\n      >\n        Done\n      </calcite-button>\n    </calcite-modal>;\n  }\n\n}\n",":host {\n  display: block;\n  height: 70px;\n  border: thin solid #BBB;\n}\ncalcite-card {\n  height: 98px;\n}\n:host(:hover) {\n  /* border: 1px solid #0f9535; */\n  box-shadow: rgba(0, 0, 0, 0.24) 0px 3px 8px;\n}\n.title {\n  font-size: 1rem;\n  font-weight: 500;\n}\n#name {\n  font-weight: 700;\n  font-size: 1rem;\n  clear:right;\n}\n\n#term {\n  margin-left: 3px;\n  font-size: 0.8rem;\n  font-weight: 300;\n}\n\n/* TODO: consolidate this styling across components */\n:host(.dragging) {\n  background: #0f9535;\n  opacity: 0.5;\n}\n","import { Component, Host, h, Prop, getAssetPath, EventEmitter, Event } from '@stencil/core';\nimport \"@esri/calcite-components/dist/calcite/calcite.css\";\nimport state from '../../utils/state';\nimport { CardAction } from '../../utils/types';\n\n@Component({\n  tag: 'dc-council-member-card',\n  styleUrl: 'dc-council-member-card.css',\n  shadow: true,\n  assetsDirs: ['assets'],\n})\nexport class DcCouncilMemberCard {\n\n  @Prop() member;\n\n  /**\n   * Determines if Members list is editable\n   * used mostly for \"Committee of the Whole\"\n   */  \n  @Prop() editable:boolean = true;\n\n  /** \n   * Should this member be removable (show action)\n   */\n  @Prop() action:CardAction = null;\n  @Event() memberRemove: EventEmitter<any>;\n\n  dragEnd(_ev) {\n    state.action = \"\";\n    // ev.currentTarget.classList.remove(\"dragging\");\n\n  }\n  dragStart(ev) {\n    state.action = \"member\";\n\n    // Change the source element's background color\n    // to show that drag has started\n    // TODO: how to remove the style on the element left behind\n    // ev.currentTarget.classList.add(\"dragging\");\n\n    // Clear the drag data cache (for all formats/types)\n    ev.dataTransfer.clearData();\n    // Set the drag's format and data.\n    // Use the event target's id for the data\n    ev.dataTransfer.setData(\"text/plain\", JSON.stringify(this.member));\n\n  }\n  render() {\n    const imageSrc = getAssetPath(`../assets/2022/photos/${this.member.photo}`);\n\n    return (\n      <Host\n        draggable={String(this.editable) && String(state.editable)}\n        onDragStart={this.dragStart.bind(this)}\n        onDragEnd={this.dragEnd.bind(this)}\n      >\n        <slot></slot>\n        <dc-council-card\n          thumbnail={this.member.photo ? imageSrc : null}\n        >\n          <span slot=\"action\">\n            {this.renderAction(this.action)}\n          </span>\n          <span slot=\"title\" class=\"title\">\n            \n            <span id=\"name\">{this.member?.name}</span><br/>\n            <span id=\"role\">{this.member?.role}</span> \n          </span>\n\n          <div slot=\"subtitle\" id=\"details\">\n          </div>            \n            \n        </dc-council-card>\n      </Host>\n    );\n  }\n\n  private renderAction(action:CardAction) {\n    if(this.editable && action === CardAction.remove) {\n      return <calcite-icon icon=\"x\" scale=\"m\" aria-hidden=\"true\"\n        onClick={(_evt) => this.memberRemove.emit(this.member)}\n      ></calcite-icon>;\n    }\n  }\n}",":host {\n  display: block;\n  cursor: pointer;\n  min-height: 75px;\n  border-left: 2px solid var(--calcite-ui-brand);\n  padding-left: 2px;  \n}\n:host(.action-agency) div  {\n  opacity: 0.2;\n}\n:host(.action-member.editable) div  {\n  border: 1px dashed green;\n  background-color: lightgreen;\n}\n\n#title {\n  margin: 0;\n  font-size: 1.1rem;\n  font-weight: 600;\n}\n\n#members {\n  display: grid;\n  grid-template-rows: repeat(auto-fill,minmax(60px,1fr));\n  grid-auto-flow: rows;\n  grid-auto-rows: minmax(60px,1fr);\n  grid-row-gap: 5px;\n}\n\n:host(.dropzone) div:empty {\n  overflow-x: auto;\n  background: repeating-linear-gradient(\n    45deg,\n    lightgreen,\n    lightgreen 10px,\n    rgb(191, 244, 191) 10px,\n    rgb(191, 244, 191) 20px\n  )\n}\n\n/* :host(.spots-available) {\n  padding-bottom: 10px;\n}\n:host(.spots-available)::after {\n  content: \"More members allowed...\";\n  font-weight: 200;\n  font-size: 0.7rem;\n} */\n\n:host(.dropzone):empty {\n  min-height: 100px;\n}\n:host(.dropzone) div:empty::after {\n  content: 'Add Member here';\n  margin: 25px 0;\n  text-align: center;\n  color: black;\n}","import { Component, Host, h, Prop, Listen, Element, Event, EventEmitter } from '@stencil/core';\nimport state from '../../utils/state';\nimport { CardAction, IMember } from '../../utils/types';\n@Component({\n  tag: 'dc-council-member-list',\n  styleUrl: 'dc-council-member-list.css',\n  shadow: true,\n})\nexport class DcCouncilMemberList {\n  @Element() el: HTMLElement;\n\n  @Event() membersChanged: EventEmitter<any>;\n\n  /**\n   * Maximum number of members allowed. Null or -1 means unlimited\n   */\n  @Prop() max:number = null;\n\n  /**\n   * Array of people in this list\n   */\n  @Prop({ mutable:true, reflect: true }) members:Array<IMember> = [];\n  \n  /**\n  * Name of position for this to show\n   */\n  @Prop() position:string;\n\n  /**\n   * Determines if Members list is editable\n   * used mostly for \"Committee of the Whole\"\n   */  \n  @Prop() editable:boolean = true;\n\n  // @Watch('members')\n  addMembers(newMembers:Array<IMember>, _oldMembers:Array<IMember> = []) {\n    // Don't add duplicate members\n    const existingMembers = this.members.map(m => m.name);\n    newMembers = newMembers.filter(member => {\n      return !existingMembers.includes(member.name);\n    })\n\n    // Limit size by max\n    const newSize:number = this.members.length + newMembers.length;\n    if(!!this.max && newSize > this.max) {\n      // newMembers = newMembers.slice(0,this.max)\n      \n      const removeMembers = newSize - this.max;\n      this.members = [\n        ...this.members.slice(removeMembers,this.members.length), \n        ...newMembers\n      ];\n    } else {\n      this.members = [...this.members, ...newMembers];\n    }\n  \n    // Event up for other components\n    this.membersChanged.emit(this.members);\n  }\n\n  @Listen('addedElement')\n  addedElement(evt) {\n    evt.preventDefault();\n    var data = evt.dataTransfer.getData(\"text\");\n    \n    const newMember = JSON.parse(data);\n    this.addMembers([newMember]);\n  }\n\n  @Listen('memberRemove')\n  removeMember(evt) {\n    this.members = this.members.filter((member) => {\n      return member.name !== evt.detail.name;\n    })\n\n    this.membersChanged.emit(this.members);\n\n  }\n\n  // TODO - prevent allow agency onto members\n  allowDrop(evt) {\n    // evt.target.classList.add('drag-over');\n    // debugger;\n    // const possibleElement = JSON.parse(data);\n    if(this.editable && state.action === \"member\") {\n      evt.preventDefault();\n    }\n  }\n\n  render() {\n    const classes = this.getClasses();\n    return (\n      <Host\n        class={classes.join(' ')}\n        onDrop={this.addedElement.bind(this)}\n        onDragOver={this.allowDrop.bind(this)}\n      >\n          <span id=\"title\">\n            <slot></slot>\n          </span>\n          <div id=\"members\">\n          {this.members.map((member) => {\n            return (\n              <dc-council-member-card \n                member={member}\n                editable={this.editable}\n                action={!!this.position ? CardAction.remove : null}\n              ></dc-council-member-card>\n            )\n          })}\n          </div>\n      </Host>\n    );\n  }\n\n\n  private getClasses() {\n    const classes = ['dropzone', `action-${state.action}`];\n    if (this.editable) {\n      classes.push('editable');\n    }\n    // Adds prompts for adding more members\n    if (this.members.length < this.max) {\n      classes.push('spots-available');\n    }\n    return classes;\n  }\n}\n",":host {\n  display: block;\n}\n#committees {\n  display: flex;\n  flex-wrap: wrap;\n}\n.committee {\n  width: 15vw;\n  margin-bottom: 2em;\n}\n.member {\n  text-align: center;\n  align-items: center;\n  display: flex;\n  flex-direction: column;\n}\n.photo {\n  border-radius: 50px;\n  width: 100px;\n}\n.budget {\n  font-size: 0.9em;\n  font-weight: 200;\n}","import { Component, Host, h, Prop, getAssetPath } from '@stencil/core';\nimport { calculateBudget } from '../../utils/data';\nimport { ICommittee, IMember } from '../../utils/types';\n\n@Component({\n  tag: 'dc-council-preview',\n  styleUrl: 'dc-council-preview.css',\n  shadow: true,\n  assetsDirs: ['assets'],\n})\nexport class DcCouncilPreview {\n\n  @Prop({ mutable: true, reflect: true }) committees:ICommittee[] = []\n\n  render() {\n    return (\n      <Host>\n        <slot></slot>\n        <div id=\"committees\">\n        {this.committees.map((committee) => {\n          return this.renderPreviewCommittee(committee);\n        })}\n        </div>\n      </Host>\n    );\n  }\n  renderPreviewCommittee(committee:ICommittee) {\n\n    let chair = committee.members.chair[0];\n    if(!chair) {\n      chair = {\n        // need double \"No No\" because we slice off first name\n        name: \"No No chair selected\",\n        photo: \"person.png\"\n      }\n    }\n    // debugger;\n\n    return <div class=\"committee\">\n      {!!chair ? this.renderMember(chair, committee) : null}\n      <span class=\"budget\">{calculateBudget(committee.agencies)}m budget</span>\n    </div>\n  }\n  renderMember(person: IMember, committee: ICommittee) {\n    const imageSrc = getAssetPath(`../assets/2022/photos/${person?.photo}`);\n    // Drop first name\n    const name = person?.name.split(' ').slice(1).join(' ')\n    return(\n      <div class=\"member\">\n        {name}\n        <img class=\"photo\" src={imageSrc} />\n        {committee.name}\n      </div>\n    )\n  }\n\n}\n",":host {\n  display: block;\n\n}\n\n.shareButton {\n  width: 200px;\n  /* float: left; */\n  padding-left: 20px;\n}\n\ninput {\n  block-size: 2rem;\n  padding-inline: 0.75rem;\n  font-size: var(--calcite-font-size--1);\n  line-height: 1rem;  \n  flex:1\n}\n.shareurl calcite-button {\n  order: 2;\n}\n#shareButtons {\n  display: flex;\n}\n.shareurl {\n  display: flex;\n  flex-direction: row;\n  padding: 5px;\n}\n\n#editInfo {\n  border-top: 1px solid #AAA;\n  font-weight: 400;\n}\n\n#preview {\n  border: 1px solid #AAA;\n  padding: 1rem;\n  font-weight: 400;\n  text-align: center;\n}\ndc-council-preview {\n  margin-top: 2rem;\n}\n#previewTitle {\n  font-weight: 600;\n}\n#previewTitle::after {\n  content: '–';\n  margin: 0 1rem;\n}","import { Component, Host, h, Prop, Listen, Method, State } from '@stencil/core';\nimport state, { setVersion } from '../../utils/state';\nimport { ICommittee } from '../../utils/types';\n\n@Component({\n  tag: 'dc-council-share',\n  styleUrl: 'dc-council-share.css',\n  shadow: true,\n})\nexport class DcCouncilShare {\n  // modalEl: HTMLCalciteModalElement; \n  inputShareUrlEl: HTMLInputElement;\n  inputEditUrlEl: HTMLInputElement;\n\n  @Prop({ mutable: true, reflect: true }) open: boolean = false\n  @Prop({ mutable: true, reflect: true }) editUrl: string = \"\";\n  @Prop({ mutable: true, reflect: true }) shareUrl: string = \"\";\n  @Prop() scale:string = \"m\";\n\n  // If the component is currently saving\n  @State() saving: boolean = false\n\n  componentWillLoad() {\n    this.shareUrl = window.location.href;\n  }\n\n  @Method()\n  public async showModal() {\n    this.open = true;\n  }\n  @Method()\n  public async hideModal() {\n    this.open = false;\n  }\n  @Listen('calciteModalClose')\n  close() {\n    this.open = false;\n  }\n\n  @Method()\n  public async saveCouncil() {\n    this.saving = true;\n    const urls = await setVersion(state.committees);\n\n    this.shareUrl = urls['share'];\n    this.editUrl = urls['edit'];\n\n    this.saving = false;\n  }\n\n  \n  renderFacebook(url: string = \"\") {\n    return (\n      <div class=\"shareButton\">\n      <calcite-button\n        color=\"blue\"\n        appearance=\"primary\"\n        icon=\"chevron-left\"\n        width=\"full\"\n        target=\"_new\"\n        href={`https://www.facebook.com/sharer/sharer.php?u=${url}`}\n      >\n        Share on Facebook\n      </calcite-button>\n      </div>\n    )\n  }\n  renderTwitter(url: string = \"\") {\n    return (\n      <div class=\"shareButton\">\n      <calcite-button\n        color=\"blue\"\n        appearance=\"primary\"\n        icon=\"chevron-left\"\n        width=\"full\"\n        target=\"_new\"\n        href={`https://twitter.com/intent/tweet?text=${url}`}\n      >\n        Share on Twitter\n      </calcite-button>\n      </div>\n    )\n  }  \n\n  renderCopy(refEl: HTMLInputElement, inputUrl:string = \"\", primary: boolean = true) {\n    return (\n      <div>\n      <span class=\"shareurl\">\n      <input\n        type=\"text\" \n        class=\"code\" \n        ref={(el: HTMLInputElement) => refEl = el} \n        value={inputUrl}\n        readonly>\n      </input>\n      \n      <calcite-button\n          slot=\"action\"\n          alignment=\"center\"\n          appearance={primary ? \"solid\" : \"outline\"}\n          color=\"blue\"\n          scale=\"m\"\n          type=\"button\"\n          width=\"auto\"\n          onClick={(_ev: Event) => this.copyText(refEl)}\n        >\n          Copy URL\n      </calcite-button>\n      </span>\n      </div>\n    )\n  }\n  copyText(refEl) {\n    /* Select the text field */\n    refEl.select();\n    refEl.setSelectionRange(0, 99999); /*For mobile devices*/\n\n    /* Copy the text inside the text field */\n    document.execCommand(\"copy\");\n  }\n\n  render() {\n    return (\n      <Host>\n        {this.renderButtons(!state.editable || (state.editable && state.saved))}\n        <calcite-modal\n          color=\"\"\n          open={this.open}\n          background-color=\"white\"\n          scale={this.scale}\n          width={this.scale}\n          intl-close=\"Close\"\n          // ref={(el: HTMLCalciteModalElement) => this.modalEl = el} \n          aria-labelledby=\"modal-share\"\n        >\n          <h3 slot=\"header\">Share your Fantasy Council</h3>\n          <div slot=\"content\">\n            <div id=\"shareInfo\">\n              <p>\n                Thank you for crafting your proposal for DC Council Committees! \n                Now share your lineup on social media and invite friends to make their own.<br/>\n              </p>\n              {this.renderPreview(state.committees)}\n              <p>\n                {this.renderCopy(this.inputShareUrlEl, this.shareUrl, true)}\n              </p>\n              <p id=\"shareButtons\">\n                {this.renderTwitter(this.shareUrl)}\n                {this.renderFacebook(this.shareUrl)}\n              </p>\n            </div>\n            {state.editable ? this.renderEditInfo() : null}\n          </div>\n          <calcite-button\n            slot=\"primary\"\n            width=\"full\"\n            onClick={this.hideModal.bind(this)}\n          >\n            Done\n          </calcite-button>\n        </calcite-modal>\n      </Host>\n    );\n  }\n\n\n  private renderPreview(committees: ICommittee[]) {\n    return <div id=\"preview\">\n      <span id=\"previewTitle\">{state.council?.title}</span>\n      <span id=\"titleSuffix\">A Fantasy DC Council Committee Chair Lineup</span>\n      <dc-council-preview\n        committees={committees}>\n      </dc-council-preview>\n    </div>;\n  }\n\n  private renderEditInfo() {\n    return <div id=\"editInfo\">\n      <p>\n        If you want to edit this committee later, you can bookmark your current browser or copy and save the URL below.\n      </p>\n      <p>\n        {this.renderCopy(this.inputEditUrlEl, this.editUrl, false)}\n      </p>\n    </div>;\n  }\n\n  private renderButtons(savedState:boolean) {\n\n    const shareButton = <calcite-button\n      alignment=\"start\"\n      appearance=\"outline\"\n      color=\"blue\"\n      icon-start=\"share\"\n      scale=\"m\"\n      onClick={this.showModal.bind(this)}\n    >\n      <slot>Share</slot>\n    </calcite-button>;\n\n    const saveButton = <calcite-button\n      alignment=\"start\"\n      appearance={savedState ? \"outline\" : \"solid\"}\n      color=\"blue\"\n      icon-start=\"save\"\n      scale=\"m\"\n      loading={this.saving}\n      onClick={this.saveCouncil.bind(this)}\n    >\n      Save\n    </calcite-button>;\n\n    return savedState ? shareButton : saveButton;\n  }\n}\n",":host {\n  display: block;\n  text-align: center;\n  --calcite-ui-text-3: black;\n}\n#choices {\n  display: inline-block;\n  margin: 0 auto;\n  --calcite-font-size--1: 1.2rem;\n  --calcite-font-size--2: 0.9rem;\n}\n.choiceButtons calcite-button {\n  margin-left: 20px;\n}","import { Component, Host, h, Prop, Method, Listen, Event, EventEmitter } from '@stencil/core';\n\n@Component({\n  tag: 'dc-council-template',\n  styleUrl: 'dc-council-template.css',\n  shadow: true,\n})\nexport class DcCouncilTemplate {\n\n  @Prop({ mutable: true, reflect: true }) template: string = \"current\";\n  @Prop({ mutable: true, reflect: true }) open: boolean = false;\n  @Event() templateSelected: EventEmitter<string>;\n\n  @Method()\n  public async showModal() {\n    this.open = true;\n  }\n  @Method()\n  public async hideModal() {\n    this.open = false;\n  }\n\n  @Listen('calciteModalClose')\n  saveChoice() {\n    this.templateSelected.emit(this.template);\n    this.hideModal();\n  }\n  // @Listen('calciteTileSelectChange')\n  changeChoice(evt) {\n    // TODO: figure out why calciteTileSelectChange doesn't have a target value\n    const choice = evt.path[0].value;\n    this.template = choice;\n  }\n\n  // TODO: added until calciteTileSelectChange includes target value\n  templateBlank() {\n    this.template = 'blank';\n  }\n  templateCurrent() {\n    this.template = 'current';\n  }\n  chooseTemplate(template: string) {\n    this.templateSelected.emit(template);\n  }\n  \n  // Reference to tile select\n  tileSelectEl: HTMLInputElement;\n\n  renderChoice() {\n    return (\n      <calcite-tile-select-group \n        ref={el => (this.tileSelectEl = el as HTMLInputElement)}\n          layout=\"horizontal\" \n          dir=\"ltr\">\n        <calcite-tile-select\n          checked={true}\n          description=\"Start with the current council committee and Agency Assignments\"\n          heading=\"Current Council\"\n          icon=\"organization\"\n          name=\"light\"\n          input-alignment=\"start\"\n          width=\"auto\"\n          type=\"radio\"\n          value=\"current\"\n          onClick={_ev => this.templateCurrent.bind(this)}\n        >\n          <calcite-radio-button\n            checked={true}\n            id=\"currentrb\"\n            value=\"currentrb\"\n            name=\"light\"\n            scale=\"m\"\n          ></calcite-radio-button>\n        </calcite-tile-select>\n        <calcite-tile-select\n          description=\"Start from scratch and create your Committees from the ground up.\"\n          heading=\"Blank\"\n          icon=\"add-in-new\"\n          name=\"light\"\n          input-alignment=\"start\"\n          width=\"auto\"\n          type=\"radio\"\n          value=\"blank\"\n          onClick={this.templateBlank.bind(this)}\n        >\n          <calcite-radio-button\n            id=\"blankrb\"\n            name=\"light\"\n            scale=\"m\"\n          ></calcite-radio-button>\n        </calcite-tile-select>\n      </calcite-tile-select-group>\n    )\n  }\n\n  render() {\n    return (\n      <Host>\n        <slot name=\"title\"></slot>\n        {this.renderChoiceButtons()}\n        {this.renderModal()}\n      </Host>\n    );\n  }\n\n  // Shows modal\n  // private renderShowModalButton() {\n  //   return <calcite-button\n  //     alignment=\"start\"\n  //     appearance=\"outline\"\n  //     color=\"red\"\n  //     icon-start=\"reset\"\n  //     scale=\"m\"\n  //     onClick={this.showModal.bind(this)}\n  //   >\n  //     <slot></slot>\n  //   </calcite-button>;\n  // }\n\n  // Separate, direct buttons\n  private renderChoiceButtons() {\n    return( \n      <span class=\"choiceButtons\">\n      <calcite-button\n        alignment=\"start\"\n        appearance=\"outline\"\n        color=\"blue\"\n        icon-start=\"organization\"\n        scale=\"m\"\n          onClick={(_ev) => {this.chooseTemplate('current')}}\n      >\n        Reset to current Committees\n      </calcite-button>\n      <calcite-button\n        alignment=\"start\"\n        appearance=\"outline\"\n        color=\"red\"\n        icon-start=\"reset\"\n        scale=\"m\"\n          onClick={(_ev) => {this.chooseTemplate('blank')}}\n      >\n        Clear all Committees\n      </calcite-button>\n      </span>\n    )\n  }\n\n  \n  private renderModal() {\n    return <calcite-modal\n      color=\"\"\n      open={this.open}\n      background-color=\"white\"\n      scale=\"m\"\n      width=\"m\"\n      intl-close=\"Close\"\n      // ref={(el: HTMLCalciteModalElement) => this.modalEl = el} \n      aria-labelledby=\"modal-share\"\n    >\n      <h3 slot=\"header\">Start your Fantasy Council</h3>\n      <div slot=\"content\">\n        <p>\n          You can now create your own DC Fantasy Council. Create Committees, assign Chairs + Members, then give them oversight of Millions (or Billions) of dollars in Agency direction!\n        </p>\n        <p id=\"choices\">\n          {this.renderChoice()}\n        </p>\n      </div>\n      <calcite-button\n        slot=\"primary\"\n        width=\"full\"\n        onClick={this.saveChoice.bind(this)}\n      >\n        Done\n      </calcite-button>\n    </calcite-modal>;\n  }\n}\n","/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n        desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n\r\nexport function __classPrivateFieldIn(state, receiver) {\r\n    if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\r\n    return typeof state === \"function\" ? receiver === state : state.has(receiver);\r\n}\r\n","/**\r\n * A collection of utility functions for various type checks and conversion\r\n * @hidden\r\n */\r\n/**\r\n * ============================================================================\r\n * TYPE CHECK\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Returns `true` if value is not a number (NaN).\r\n *\r\n * @param value Input value\r\n * @return Is NaN?\r\n */\r\nexport function isNaN(value) {\r\n    return Number(value) !== value;\r\n}\r\n/**\r\n * Returns a type of the value.\r\n *\r\n * @param value  Input value\r\n * @return Type of the value\r\n * @ignore\r\n */\r\nexport function getType(value) {\r\n    return ({}).toString.call(value);\r\n}\r\n/**\r\n * ============================================================================\r\n * QUICK CONVERSION\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Converts any value into a `number`.\r\n *\r\n * @param value  Source value\r\n * @return Number representation of value\r\n */\r\nexport function toNumber(value) {\r\n    if (value != null && !isNumber(value)) {\r\n        var converted = Number(value);\r\n        if (isNaN(converted) && isString(value) && value != \"\") {\r\n            return toNumber(value.replace(/[^0-9.\\-]+/g, ''));\r\n        }\r\n        return converted;\r\n    }\r\n    return value;\r\n}\r\n/**\r\n * Converts anything to Date object.\r\n *\r\n * @param value  A value of any type\r\n * @return Date object representing a value\r\n */\r\nexport function toDate(value) {\r\n    if (isDate(value)) {\r\n        // TODO maybe don't create a new Date ?\r\n        return new Date(value);\r\n    }\r\n    else if (isNumber(value)) {\r\n        return new Date(value);\r\n    }\r\n    else {\r\n        // Try converting to number (assuming timestamp)\r\n        var num = Number(value);\r\n        if (!isNumber(num)) {\r\n            return new Date(value);\r\n        }\r\n        else {\r\n            return new Date(num);\r\n        }\r\n    }\r\n}\r\n/**\r\n * Converts numeric value into string. Deals with large or small numbers that\r\n * would otherwise use exponents.\r\n *\r\n * @param value  Numeric value\r\n * @return Numeric value as string\r\n */\r\nexport function numberToString(value) {\r\n    // TODO handle Infinity and -Infinity\r\n    if (isNaN(value)) {\r\n        return \"NaN\";\r\n    }\r\n    if (value === Infinity) {\r\n        return \"Infinity\";\r\n    }\r\n    if (value === -Infinity) {\r\n        return \"-Infinity\";\r\n    }\r\n    // Negative 0\r\n    if ((value === 0) && (1 / value === -Infinity)) {\r\n        return \"-0\";\r\n    }\r\n    // Preserve negative and deal with absoute values\r\n    var negative = value < 0;\r\n    value = Math.abs(value);\r\n    // TODO test this\r\n    var parsed = /^([0-9]+)(?:\\.([0-9]+))?(?:e[\\+\\-]([0-9]+))?$/.exec(\"\" + value);\r\n    var digits = parsed[1];\r\n    var decimals = parsed[2] || \"\";\r\n    var res;\r\n    // Leave the nummber as it is if it does not use exponents\r\n    if (parsed[3] === undefined) {\r\n        res = (decimals === \"\" ? digits : digits + \".\" + decimals);\r\n    }\r\n    else {\r\n        var exponent = +parsed[3];\r\n        // Deal with decimals\r\n        if (value < 1) {\r\n            var zeros = exponent - 1;\r\n            res = \"0.\" + repeat(\"0\", zeros) + digits + decimals;\r\n            // Deal with integers\r\n        }\r\n        else {\r\n            var zeros = exponent - decimals.length;\r\n            if (zeros === 0) {\r\n                res = digits + decimals;\r\n            }\r\n            else if (zeros < 0) {\r\n                res = digits + decimals.slice(0, zeros) + \".\" + decimals.slice(zeros);\r\n            }\r\n            else {\r\n                res = digits + decimals + repeat(\"0\", zeros);\r\n            }\r\n        }\r\n    }\r\n    return negative ? \"-\" + res : res;\r\n}\r\n/**\r\n * Repeats a `string` number of times as set in `amount`.\r\n *\r\n * @ignore Exclude from docs\r\n * @todo Make this faster\r\n * @param string  Source string\r\n * @param amount  Number of times to repeat string\r\n * @return New string\r\n */\r\nexport function repeat(string, amount) {\r\n    return new Array(amount + 1).join(string);\r\n}\r\n/**\r\n * ============================================================================\r\n * TYPE CHECK\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Checks if parameter is `Date`.\r\n *\r\n * @param value  Input value\r\n * @return Is Date?\r\n */\r\nexport function isDate(value) {\r\n    return getType(value) === \"[object Date]\";\r\n}\r\n/**\r\n * Checks if parameter is `string`.\r\n *\r\n * @param value  Input value\r\n * @return Is string?\r\n */\r\nexport function isString(value) {\r\n    return typeof value === \"string\";\r\n}\r\n/**\r\n * Checks if parameter is `number`.\r\n *\r\n * @param value  Input value\r\n * @return Is number?\r\n */\r\nexport function isNumber(value) {\r\n    return typeof value === \"number\" && Number(value) == value;\r\n}\r\n/**\r\n * Checks if parameter is `object`.\r\n *\r\n * @param value  Input value\r\n * @return Is object?\r\n */\r\nexport function isObject(value) {\r\n    return typeof value === \"object\" && value !== null;\r\n}\r\n/**\r\n * Checks if parameter is `Array`.\r\n *\r\n * @param value  Input value\r\n * @return Is Array?\r\n */\r\nexport function isArray(value) {\r\n    return Array.isArray(value);\r\n}\r\n/**\r\n * ============================================================================\r\n * STATIC CONSTANTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * @ignore Exclude from docs\r\n */\r\nexport var PLACEHOLDER = \"__§§§__\";\r\n/**\r\n * @ignore Exclude from docs\r\n */\r\nexport var PLACEHOLDER2 = \"__§§§§__\";\r\n//# sourceMappingURL=Type.js.map","import * as $type from \"./Type\";\r\n/**\r\n * ============================================================================\r\n * UTILITY FUNCTIONS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Searches `array` for `value`.\r\n *\r\n * Returns -1 if not found.\r\n *\r\n * @param array  Source array\r\n * @param value  Value to search\r\n * @returns Index\r\n */\r\nexport function indexOf(array, value) {\r\n    var length = array.length;\r\n    for (var i = 0; i < length; ++i) {\r\n        // TODO handle NaN\r\n        if (array[i] === value) {\r\n            return i;\r\n        }\r\n    }\r\n    return -1;\r\n}\r\n/**\r\n * Calls `test` for each element in `array`.\r\n *\r\n * If `test` returns `true` then it immediately returns `true`.\r\n *\r\n * If `test` returns `false` for all of the elements in `array` then it returns `false`.\r\n *\r\n * @param array  Source array\r\n * @param test   Function which is called on each element\r\n * @returns Whether `test` returned true or not\r\n */\r\nexport function any(array, test) {\r\n    var length = array.length;\r\n    for (var i = 0; i < length; ++i) {\r\n        if (test(array[i])) {\r\n            return true;\r\n        }\r\n    }\r\n    return false;\r\n}\r\n/**\r\n * Calls `fn` function for every member of array and returns a new array out\r\n * of all outputs.\r\n *\r\n * @param array  Source array\r\n * @param fn     Callback function\r\n * @returns New array\r\n */\r\nexport function map(array, fn) {\r\n    var length = array.length;\r\n    var output = new Array(length);\r\n    for (var i = 0; i < length; ++i) {\r\n        output[i] = fn(array[i], i);\r\n    }\r\n    return output;\r\n}\r\n/**\r\n * Iterates through all items in array and calls `fn` function for each of\r\n * them.\r\n *\r\n * @param array  Source array\r\n * @param fn     Callback function\r\n */\r\nexport function each(array, fn) {\r\n    var length = array.length;\r\n    for (var i = 0; i < length; ++i) {\r\n        fn(array[i], i);\r\n    }\r\n}\r\n/**\r\n * Iterates through all items in array in reverse order and calls `fn` function for each of\r\n * them.\r\n *\r\n * @param array  Source array\r\n * @param fn     Callback function\r\n */\r\nexport function eachReverse(array, fn) {\r\n    var i = array.length;\r\n    while (i > 0) {\r\n        --i;\r\n        fn(array[i], i);\r\n    }\r\n}\r\n/**\r\n * Iterates through all items in array and calls `fn` function for each of\r\n * them.\r\n *\r\n * If `fn` call evaluates to `false`, further iteration is cancelled.\r\n *\r\n * @param array  Source array\r\n * @param fn     Callback function\r\n */\r\nexport function eachContinue(array, fn) {\r\n    var length = array.length;\r\n    for (var i = 0; i < length; ++i) {\r\n        if (!fn(array[i], i)) {\r\n            break;\r\n        }\r\n    }\r\n}\r\n/**\r\n * Shifts an item at `index` towards beginning of the array.\r\n *\r\n * @param array  Source array\r\n * @param index  Target element index\r\n */\r\nexport function shiftLeft(array, index) {\r\n    var length = array.length;\r\n    for (var i = index; i < length; ++i) {\r\n        array[i - index] = array[i];\r\n    }\r\n    array.length = length - index;\r\n}\r\n/**\r\n * Returns the last item of the array.\r\n *\r\n * @param array  Source array\r\n * @returns Last item\r\n */\r\nexport function last(array) {\r\n    var length = array.length;\r\n    return length ? array[length - 1] : undefined;\r\n}\r\n/**\r\n * Returns the first item of the array.\r\n *\r\n * @param array  Source array\r\n * @returns Last item\r\n */\r\nexport function first(array) {\r\n    return array[0];\r\n}\r\n/**\r\n * Inserts `element` into `array` at `index`.\r\n *\r\n * Caps `index` to be between `0` and `array.length`\r\n *\r\n * @param array    Source array\r\n * @param element  Item to insert\r\n * @param array    Index to insert item at\r\n */\r\nexport function insert(array, element, index) {\r\n    //if (array) {\r\n    index = Math.max(0, Math.min(index, array.length));\r\n    array.splice(index, 0, element);\r\n    //}\r\n}\r\n/**\r\n * Removes all copies of `element` from `array` (if they exist) and then\r\n * inserts `element` at `index`.\r\n *\r\n * @param array    Source array\r\n * @param element  Item\r\n * @param array    Index to move item to\r\n */\r\nexport function setIndex(array, element, index) {\r\n    remove(array, element);\r\n    insert(array, element, index);\r\n}\r\n/**\r\n * Pushes all of the elements from `input` into `array`.\r\n *\r\n * @param array  Output array\r\n * @param input  Input array\r\n */\r\nexport function pushAll(array, input) {\r\n    var length = input.length;\r\n    for (var i = 0; i < length; ++i) {\r\n        array.push(input[i]);\r\n    }\r\n}\r\n/**\r\n * Removes `element` from `array`.\r\n *\r\n * If there are multiple copies of `element`, they are all removed.\r\n *\r\n * @param array    Source array\r\n * @param element  Item to remove\r\n */\r\nexport function remove(array, element) {\r\n    var found = false;\r\n    var index = 0;\r\n    for (;;) {\r\n        index = array.indexOf(element, index);\r\n        if (index === -1) {\r\n            return found;\r\n        }\r\n        else {\r\n            found = true;\r\n            array.splice(index, 1);\r\n        }\r\n    }\r\n}\r\nexport function removeFirst(array, element) {\r\n    var index = array.indexOf(element);\r\n    if (index !== -1) {\r\n        array.splice(index, 1);\r\n        return true;\r\n    }\r\n    else {\r\n        return false;\r\n    }\r\n}\r\n/**\r\n * Adds an `element` to `array`.\r\n *\r\n * If array already contains and item like this, it is removed before adding\r\n * it again.\r\n *\r\n * Optionally `toIndex` can be specified to add element at specific index.\r\n *\r\n * @param array    Source array\r\n * @param element  Item to add\r\n * @param array    Index to move item to\r\n */\r\nexport function move(array, element, toIndex) {\r\n    // @todo this implementation must be the same as the List.moveValue method\r\n    // @todo don't do anything if the desired index is the same as the current index\r\n    var index = indexOf(array, element);\r\n    // @todo remove all old values rather than only the first ?\r\n    if (index !== -1) {\r\n        removeIndex(array, index);\r\n    }\r\n    if (toIndex == null) {\r\n        array.push(element);\r\n    }\r\n    else {\r\n        insertIndex(array, toIndex, element);\r\n    }\r\n}\r\n/**\r\n * Inserts `element` into `array` at `index`.\r\n *\r\n * If `index` is not provided, it will insert `element` at the end of `array`.\r\n *\r\n * @param array    Source array\r\n * @param element  Item to add\r\n * @param array    Index to add item at\r\n */\r\nexport function add(array, element, index) {\r\n    // Append to the end if index is not set\r\n    if (!$type.isNumber(index)) {\r\n        array.push(element);\r\n    }\r\n    // Add to the beginning of array if index is 0\r\n    else if (index === 0) {\r\n        array.unshift(element);\r\n    }\r\n    // Add to indicated place if index is set\r\n    else {\r\n        array.splice(index, 0, element);\r\n    }\r\n}\r\n/**\r\n * Pushes `element` into `array` if it doesn't already exist.\r\n *\r\n * @param array    Source array\r\n * @param element  Item to add\r\n */\r\nexport function pushOne(array, element) {\r\n    if (array.indexOf(element) === -1) {\r\n        array.push(element);\r\n    }\r\n}\r\n/**\r\n * Removes `element` from `array` (if it exists) and then inserts `element` at\r\n * `index`.\r\n *\r\n * If `index` is not provided, it will insert `element` at the end of `array`.\r\n *\r\n * @param array    Source array\r\n * @param element  Item to remove\r\n * @param array    Index to move item to\r\n */\r\nexport function replace(array, element, index) {\r\n    // check if exists\r\n    var ind = array.indexOf(element);\r\n    // remove if exists\r\n    if (ind !== -1) {\r\n        array.splice(ind, 1);\r\n    }\r\n    // add to end if index is not set\r\n    if (!$type.isNumber(index)) {\r\n        array.push(element);\r\n    }\r\n    // add to indicated place if index is set\r\n    else {\r\n        array.splice(index, 0, element);\r\n    }\r\n}\r\n/**\r\n * Wraps `input` in an array, if it isn't already an array.\r\n *\r\n * @param input  Source value\r\n * @return An array\r\n */\r\nexport function toArray(input) {\r\n    if (Array.isArray(input)) {\r\n        return input;\r\n    }\r\n    else {\r\n        return [input];\r\n    }\r\n}\r\n/**\r\n * Returns `true` if `element` exists in `array`.\r\n *\r\n * @param array    Source array\r\n * @param element  Item to search for\r\n * @returns Item in array?\r\n */\r\nexport function has(array, element) {\r\n    return indexOf(array, element) !== -1;\r\n}\r\n/**\r\n * Returns a shallow copy of `array`.\r\n *\r\n * @param array  Source array\r\n * @returns Copy of the array\r\n */\r\nexport function copy(array) {\r\n    var length = array.length;\r\n    // It's faster to create the array with a pre-defined length\r\n    var output = new Array(length);\r\n    for (var i = 0; i < length; ++i) {\r\n        // Because the array has a pre-defined length, we have to assign rather than push\r\n        // This is also faster than pushing\r\n        output[i] = array[i];\r\n    }\r\n    return output;\r\n}\r\n/**\r\n * Returns a copy of `array` which contains all the elements between `start`\r\n * and `end`. (including `start` and excluding `end`)\r\n *\r\n * If `end` is not provided, it defaults to `array.length`.\r\n *\r\n * @param array  Source array\r\n * @param start  Start index\r\n * @param end    End index\r\n * @returns Part of the array\r\n */\r\nexport function slice(array, start, end) {\r\n    if (end === void 0) { end = array.length; }\r\n    var output = new Array(end - start);\r\n    for (var i = start; i < end; ++i) {\r\n        output[i - start] = array[i];\r\n    }\r\n    return output;\r\n}\r\n/**\r\n * Inserts a value into array at specific index.\r\n *\r\n * @param array  Source array\r\n * @param index  Index\r\n * @param value  Value to insert\r\n */\r\nexport function insertIndex(array, index, value) {\r\n    array.splice(index, 0, value);\r\n}\r\n/**\r\n * Removes a value from array at specific index.\r\n *\r\n * @param array  Source array\r\n * @param index  Index\r\n */\r\nexport function removeIndex(array, index) {\r\n    array.splice(index, 1);\r\n}\r\n/**\r\n * Searches the array using custom function and returns index of the item if\r\n * found.\r\n *\r\n * Will call `matches` function on all items of the array. If return value\r\n * evaluates to `true`, index is returned.\r\n *\r\n * Otherwise returns -1.\r\n *\r\n * @param array    Source array\r\n * @param matches  Search function\r\n * @returns Index of the item if found\r\n */\r\nexport function findIndex(array, matches) {\r\n    var length = array.length;\r\n    for (var i = 0; i < length; ++i) {\r\n        if (matches(array[i], i)) {\r\n            return i;\r\n        }\r\n    }\r\n    return -1;\r\n}\r\n/**\r\n * This is the same as `findIndex` except it searches from right to left.\r\n *\r\n * @param array    Source array\r\n * @param matches  Search function\r\n * @returns Index of the item if found\r\n */\r\nexport function findIndexReverse(array, matches) {\r\n    var i = array.length;\r\n    while (i > 0) {\r\n        --i;\r\n        if (matches(array[i], i)) {\r\n            return i;\r\n        }\r\n    }\r\n    return -1;\r\n}\r\n/**\r\n * Searches the array using custom function and returns item if found.\r\n *\r\n * Will call `matches` function on all items of the array. If return value\r\n * evaluates to `true`, index is returned.\r\n *\r\n * Otherwise returns `undefined`.\r\n *\r\n * @param array    Source array\r\n * @param matches  Search function\r\n * @returns Item if found\r\n */\r\nexport function find(array, matches) {\r\n    var index = findIndex(array, matches);\r\n    if (index !== -1) {\r\n        return array[index];\r\n    }\r\n}\r\n/**\r\n * This is the same as `find` except it searches from right to left.\r\n *\r\n * @param array    Source array\r\n * @param matches  Search function\r\n * @returns Item if found\r\n */\r\nexport function findReverse(array, matches) {\r\n    var index = findIndexReverse(array, matches);\r\n    if (index !== -1) {\r\n        return array[index];\r\n    }\r\n}\r\n/**\r\n * Searches the array using custom function and returns item if found.\r\n *\r\n * Will call `matches` function on all items of the array. If value\r\n * is not `undefined`, it returns it.\r\n *\r\n * Otherwise returns `undefined`.\r\n *\r\n * @param array    Source array\r\n * @param matches  Search function\r\n * @returns Item if found\r\n */\r\nexport function findMap(array, matches) {\r\n    var length = array.length;\r\n    for (var i = 0; i < length; ++i) {\r\n        var value = matches(array[i], i);\r\n        if (value !== undefined) {\r\n            return value;\r\n        }\r\n    }\r\n}\r\n/**\r\n * Iterates through all items in array and calls `fn` function for each of\r\n * them.\r\n *\r\n * @param array  Source array\r\n * @param fn     Callback function\r\n */\r\nexport function shuffle(array) {\r\n    // https://stackoverflow.com/a/2450976/449477\r\n    var currentIndex = array.length, temporaryValue, randomIndex;\r\n    // While there remain elements to shuffle...\r\n    while (0 !== currentIndex) {\r\n        // Pick a remaining element...\r\n        randomIndex = Math.floor(Math.random() * currentIndex);\r\n        currentIndex -= 1;\r\n        // And swap it with the current element.\r\n        temporaryValue = array[currentIndex];\r\n        array[currentIndex] = array[randomIndex];\r\n        array[randomIndex] = temporaryValue;\r\n    }\r\n}\r\n/**\r\n * Orders an array using specific `ordering` function and returns right-most index of\r\n * the `value`.\r\n *\r\n * @ignore Exclude from docs\r\n * @param array     Source array\r\n * @param ordering  An ordering function\r\n * @returns Result of the search\r\n */\r\nexport function getSortedIndex(array, ordering) {\r\n    var start = 0;\r\n    var end = array.length;\r\n    var found = false;\r\n    while (start < end) {\r\n        // TODO is this faster/slower than using Math.floor ?\r\n        var pivot = (start + end) >> 1;\r\n        var order = ordering(array[pivot]);\r\n        // less\r\n        if (order < 0) {\r\n            start = pivot + 1;\r\n            // equal\r\n        }\r\n        else if (order === 0) {\r\n            found = true;\r\n            start = pivot + 1;\r\n            // more\r\n        }\r\n        else {\r\n            end = pivot;\r\n        }\r\n    }\r\n    return {\r\n        found: found,\r\n        index: (found ? start - 1 : start)\r\n    };\r\n}\r\n/**\r\n * Orders an array using specific `ordering` function and returns left-most index of\r\n * the `value`.\r\n *\r\n * @ignore Exclude from docs\r\n * @param array     Source array\r\n * @param ordering  An ordering function\r\n * @returns Result of the search\r\n */\r\nexport function getFirstSortedIndex(array, ordering) {\r\n    var start = 0;\r\n    var end = array.length;\r\n    var found = false;\r\n    while (start < end) {\r\n        // TODO is this faster/slower than using Math.floor ?\r\n        var pivot = (start + end) >> 1;\r\n        var order = ordering(array[pivot]);\r\n        // less\r\n        if (order < 0) {\r\n            start = pivot + 1;\r\n            // equal\r\n        }\r\n        else if (order === 0) {\r\n            found = true;\r\n            end = pivot;\r\n            // more\r\n        }\r\n        else {\r\n            end = pivot;\r\n        }\r\n    }\r\n    return {\r\n        found: found,\r\n        index: start\r\n    };\r\n}\r\nexport function keepIf(array, keep) {\r\n    var i = array.length;\r\n    while (i > 0) {\r\n        --i;\r\n        if (!keep(array[i])) {\r\n            array.splice(i, 1);\r\n        }\r\n    }\r\n}\r\n//# sourceMappingURL=Array.js.map","import { __extends } from \"tslib\";\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport * as $array from \"./Array\";\r\n/**\r\n * A base class for disposable objects.\r\n *\r\n * @ignore Exclude from docs\r\n */\r\nvar DisposerClass = /** @class */ (function () {\r\n    /**\r\n     * Constructor.\r\n     */\r\n    function DisposerClass() {\r\n        /**\r\n         * Is object disposed?\r\n         */\r\n        Object.defineProperty(this, \"_disposed\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        this._disposed = false;\r\n    }\r\n    /**\r\n     * Checks if object is disposed.\r\n     *\r\n     * @return Disposed?\r\n     */\r\n    Object.defineProperty(DisposerClass.prototype, \"isDisposed\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            return this._disposed;\r\n        }\r\n    });\r\n    /**\r\n     * Disposes the object.\r\n     */\r\n    Object.defineProperty(DisposerClass.prototype, \"dispose\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            if (!this._disposed) {\r\n                this._disposed = true;\r\n                this._dispose();\r\n            }\r\n        }\r\n    });\r\n    return DisposerClass;\r\n}());\r\nexport { DisposerClass };\r\n/**\r\n * A class for creating an IDisposer.\r\n *\r\n * @ignore Exclude from docs\r\n */\r\nvar Disposer = /** @class */ (function () {\r\n    /**\r\n     * Constructor.\r\n     *\r\n     * @param dispose  Function that disposes object\r\n     */\r\n    function Disposer(dispose) {\r\n        /**\r\n         * Is object disposed?\r\n         */\r\n        Object.defineProperty(this, \"_disposed\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        /**\r\n         * Method that disposes the object.\r\n         */\r\n        Object.defineProperty(this, \"_dispose\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        this._disposed = false;\r\n        this._dispose = dispose;\r\n    }\r\n    /**\r\n     * Checks if object is disposed.\r\n     *\r\n     * @return Disposed?\r\n     */\r\n    Object.defineProperty(Disposer.prototype, \"isDisposed\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            return this._disposed;\r\n        }\r\n    });\r\n    /**\r\n     * Disposes the object.\r\n     */\r\n    Object.defineProperty(Disposer.prototype, \"dispose\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            if (!this._disposed) {\r\n                this._disposed = true;\r\n                this._dispose();\r\n            }\r\n        }\r\n    });\r\n    return Disposer;\r\n}());\r\nexport { Disposer };\r\n/**\r\n * This can be extended by other classes to add a `_disposers` property.\r\n *\r\n * @ignore Exclude from docs\r\n */\r\nvar ArrayDisposer = /** @class */ (function (_super) {\r\n    __extends(ArrayDisposer, _super);\r\n    function ArrayDisposer() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        Object.defineProperty(_this, \"_disposers\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        return _this;\r\n    }\r\n    Object.defineProperty(ArrayDisposer.prototype, \"_dispose\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            $array.each(this._disposers, function (x) {\r\n                x.dispose();\r\n            });\r\n        }\r\n    });\r\n    return ArrayDisposer;\r\n}(DisposerClass));\r\nexport { ArrayDisposer };\r\n/**\r\n * A collection of related disposers that can be disposed in one go.\r\n *\r\n * @ignore Exclude from docs\r\n */\r\nvar MultiDisposer = /** @class */ (function (_super) {\r\n    __extends(MultiDisposer, _super);\r\n    function MultiDisposer(disposers) {\r\n        var _this = _super.call(this) || this;\r\n        Object.defineProperty(_this, \"_disposers\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        _this._disposers = disposers;\r\n        return _this;\r\n    }\r\n    Object.defineProperty(MultiDisposer.prototype, \"_dispose\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            $array.each(this._disposers, function (x) {\r\n                x.dispose();\r\n            });\r\n        }\r\n    });\r\n    return MultiDisposer;\r\n}(DisposerClass));\r\nexport { MultiDisposer };\r\n/**\r\n * A special kind of Disposer that has attached value set.\r\n *\r\n * If a new value is set using `set()` method, the old disposer value is\r\n * disposed.\r\n *\r\n * @ignore Exclude from docs\r\n * @todo Description\r\n */\r\nvar MutableValueDisposer = /** @class */ (function (_super) {\r\n    __extends(MutableValueDisposer, _super);\r\n    function MutableValueDisposer() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        /**\r\n         * Current disposer.\r\n         */\r\n        Object.defineProperty(_this, \"_disposer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        /**\r\n         * Current value.\r\n         */\r\n        Object.defineProperty(_this, \"_value\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        return _this;\r\n    }\r\n    Object.defineProperty(MutableValueDisposer.prototype, \"_dispose\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            if (this._disposer != null) {\r\n                this._disposer.dispose();\r\n                this._disposer = undefined;\r\n            }\r\n        }\r\n    });\r\n    /**\r\n     * Returns current value.\r\n     *\r\n     * @return Value\r\n     */\r\n    Object.defineProperty(MutableValueDisposer.prototype, \"get\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            return this._value;\r\n        }\r\n    });\r\n    /**\r\n     * Sets value and disposes previous disposer if it was set.\r\n     *\r\n     * @param value     New value\r\n     * @param disposer  Disposer\r\n     */\r\n    Object.defineProperty(MutableValueDisposer.prototype, \"set\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (value, disposer) {\r\n            if (this._disposer != null) {\r\n                this._disposer.dispose();\r\n            }\r\n            this._disposer = disposer;\r\n            this._value = value;\r\n        }\r\n    });\r\n    /**\r\n     * Resets the disposer value.\r\n     */\r\n    Object.defineProperty(MutableValueDisposer.prototype, \"reset\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            this.set(undefined, undefined);\r\n        }\r\n    });\r\n    return MutableValueDisposer;\r\n}(DisposerClass));\r\nexport { MutableValueDisposer };\r\n/**\r\n * @ignore Exclude from docs\r\n * @todo Description\r\n */\r\nvar CounterDisposer = /** @class */ (function (_super) {\r\n    __extends(CounterDisposer, _super);\r\n    function CounterDisposer() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        /**\r\n         * [_counter description]\r\n         *\r\n         * @todo Description\r\n         */\r\n        Object.defineProperty(_this, \"_counter\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        return _this;\r\n    }\r\n    /**\r\n     * [increment description]\r\n     *\r\n     * @todo Description\r\n     */\r\n    Object.defineProperty(CounterDisposer.prototype, \"increment\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            var _this = this;\r\n            // TODO throw an error if it is disposed\r\n            ++this._counter;\r\n            // TODO make this more efficient\r\n            return new Disposer(function () {\r\n                --_this._counter;\r\n                if (_this._counter === 0) {\r\n                    _this.dispose();\r\n                }\r\n            });\r\n        }\r\n    });\r\n    return CounterDisposer;\r\n}(Disposer));\r\nexport { CounterDisposer };\r\n//# sourceMappingURL=Disposer.js.map","/**\r\n * Event Dispatcher module is used for registering listeners and dispatching\r\n * events across amCharts system.\r\n */\r\nimport { __extends } from \"tslib\";\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { Disposer, MultiDisposer } from \"./Disposer\";\r\nimport * as $array from \"./Array\";\r\nimport * as $type from \"./Type\";\r\n/**\r\n * Universal Event Dispatcher.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/events/} for more info\r\n */\r\nvar EventDispatcher = /** @class */ (function () {\r\n    /**\r\n     * Constructor\r\n     */\r\n    function EventDispatcher() {\r\n        Object.defineProperty(this, \"_listeners\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_killed\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_disabled\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_iterating\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_enabled\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_disposed\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        this._listeners = [];\r\n        this._killed = [];\r\n        this._disabled = {};\r\n        this._iterating = 0;\r\n        this._enabled = true;\r\n        this._disposed = false;\r\n    }\r\n    /**\r\n     * Returns if this object has been already disposed.\r\n     *\r\n     * @return Disposed?\r\n     */\r\n    Object.defineProperty(EventDispatcher.prototype, \"isDisposed\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            return this._disposed;\r\n        }\r\n    });\r\n    /**\r\n     * Dispose (destroy) this object.\r\n     */\r\n    Object.defineProperty(EventDispatcher.prototype, \"dispose\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            if (!this._disposed) {\r\n                this._disposed = true;\r\n                var a = this._listeners;\r\n                this._iterating = 1;\r\n                this._listeners = null;\r\n                this._disabled = null;\r\n                try {\r\n                    $array.each(a, function (x) {\r\n                        x.disposer.dispose();\r\n                    });\r\n                }\r\n                finally {\r\n                    this._killed = null;\r\n                    this._iterating = null;\r\n                }\r\n            }\r\n        }\r\n    });\r\n    /**\r\n     * Checks if this particular event dispatcher has any listeners set.\r\n     *\r\n     * @return Has listeners?\r\n     */\r\n    Object.defineProperty(EventDispatcher.prototype, \"hasListeners\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            return this._listeners.length !== 0;\r\n        }\r\n    });\r\n    /**\r\n     * Checks if this particular event dispatcher has any particular listeners set.\r\n     *\r\n     * @return Has particular event listeners?\r\n     */\r\n    Object.defineProperty(EventDispatcher.prototype, \"hasListenersByType\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (type) {\r\n            return $array.any(this._listeners, function (x) { return (x.type === null || x.type === type) && !x.killed; });\r\n        }\r\n    });\r\n    /**\r\n     * Enable dispatching of events if they were previously disabled by\r\n     * `disable()`.\r\n     */\r\n    Object.defineProperty(EventDispatcher.prototype, \"enable\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            this._enabled = true;\r\n        }\r\n    });\r\n    /**\r\n     * Disable dispatching of events until re-enabled by `enable()`.\r\n     */\r\n    Object.defineProperty(EventDispatcher.prototype, \"disable\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            this._enabled = false;\r\n        }\r\n    });\r\n    /**\r\n     * Enable dispatching particular event, if it was disabled before by\r\n     * `disableType()`.\r\n     *\r\n     * @param type Event type\r\n     */\r\n    Object.defineProperty(EventDispatcher.prototype, \"enableType\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (type) {\r\n            delete this._disabled[type];\r\n        }\r\n    });\r\n    /**\r\n     * Disable dispatching of events for a certain event type.\r\n     *\r\n     * Optionally, can set how many dispatches to skip before automatically\r\n     * re-enabling the dispatching.\r\n     *\r\n     * @param type    Event type\r\n     * @param amount  Number of event dispatches to skip\r\n     */\r\n    Object.defineProperty(EventDispatcher.prototype, \"disableType\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (type, amount) {\r\n            if (amount === void 0) { amount = Infinity; }\r\n            this._disabled[type] = amount;\r\n        }\r\n    });\r\n    /**\r\n     * Removes listener from dispatcher.\r\n     *\r\n     * Will throw an exception if such listener does not exists.\r\n     *\r\n     * @param listener Listener to remove\r\n     */\r\n    Object.defineProperty(EventDispatcher.prototype, \"_removeListener\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (listener) {\r\n            if (this._iterating === 0) {\r\n                var index = this._listeners.indexOf(listener);\r\n                if (index === -1) {\r\n                    throw new Error(\"Invalid state: could not remove listener\");\r\n                }\r\n                this._listeners.splice(index, 1);\r\n            }\r\n            else {\r\n                this._killed.push(listener);\r\n            }\r\n        }\r\n    });\r\n    /**\r\n     * Removes existing listener by certain parameters.\r\n     *\r\n     * @param once         Listener's once setting\r\n     * @param type         Listener's type\r\n     * @param callback     Callback function\r\n     * @param context      Callback context\r\n     */\r\n    Object.defineProperty(EventDispatcher.prototype, \"_removeExistingListener\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (once, type, callback, context) {\r\n            if (this._disposed) {\r\n                throw new Error(\"EventDispatcher is disposed\");\r\n            }\r\n            this._eachListener(function (info) {\r\n                if (info.once === once && // TODO is this correct ?\r\n                    info.type === type &&\r\n                    (callback === undefined || info.callback === callback) &&\r\n                    info.context === context) {\r\n                    info.disposer.dispose();\r\n                }\r\n            });\r\n        }\r\n    });\r\n    /**\r\n     * Checks if dispatching for particular event type is enabled.\r\n     *\r\n     * @param type  Event type\r\n     * @return Enabled?\r\n     */\r\n    Object.defineProperty(EventDispatcher.prototype, \"isEnabled\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (type) {\r\n            if (this._disposed) {\r\n                throw new Error(\"EventDispatcher is disposed\");\r\n            }\r\n            // TODO is this check correct ?\r\n            return this._enabled && this._listeners.length > 0 && this.hasListenersByType(type) && this._disabled[type] === undefined;\r\n        }\r\n    });\r\n    /**\r\n     * Removes all listeners of a particular event type\r\n     *\r\n     * @param type  Listener's type\r\n     */\r\n    Object.defineProperty(EventDispatcher.prototype, \"removeType\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (type) {\r\n            if (this._disposed) {\r\n                throw new Error(\"EventDispatcher is disposed\");\r\n            }\r\n            this._eachListener(function (info) {\r\n                if (info.type === type) {\r\n                    info.disposer.dispose();\r\n                }\r\n            });\r\n        }\r\n    });\r\n    /**\r\n     * Checks if there's already a listener with specific parameters.\r\n     *\r\n     * @param type      Listener's type\r\n     * @param callback  Callback function\r\n     * @param context   Callback context\r\n     * @return Has listener?\r\n     */\r\n    Object.defineProperty(EventDispatcher.prototype, \"has\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (type, callback, context) {\r\n            var index = $array.findIndex(this._listeners, function (info) {\r\n                return info.once !== true && // Ignoring \"once\" listeners\r\n                    info.type === type &&\r\n                    (callback === undefined || info.callback === callback) &&\r\n                    info.context === context;\r\n            });\r\n            return index !== -1;\r\n        }\r\n    });\r\n    /**\r\n     * Checks whether event of the particular type should be dispatched.\r\n     *\r\n     * @param type  Event type\r\n     * @return Dispatch?\r\n     */\r\n    Object.defineProperty(EventDispatcher.prototype, \"_shouldDispatch\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (type) {\r\n            if (this._disposed) {\r\n                throw new Error(\"EventDispatcher is disposed\");\r\n            }\r\n            var count = this._disabled[type];\r\n            if (!$type.isNumber(count)) {\r\n                return this._enabled;\r\n            }\r\n            else {\r\n                if (count <= 1) {\r\n                    delete this._disabled[type];\r\n                }\r\n                else {\r\n                    --this._disabled[type];\r\n                }\r\n                return false;\r\n            }\r\n        }\r\n    });\r\n    /**\r\n     * [_eachListener description]\r\n     *\r\n     * All of this extra code is needed when a listener is removed while iterating\r\n     *\r\n     * @todo Description\r\n     * @param fn [description]\r\n     */\r\n    Object.defineProperty(EventDispatcher.prototype, \"_eachListener\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (fn) {\r\n            var _this = this;\r\n            ++this._iterating;\r\n            try {\r\n                $array.each(this._listeners, fn);\r\n            }\r\n            finally {\r\n                --this._iterating;\r\n                // TODO should this be inside or outside the finally ?\r\n                if (this._iterating === 0 && this._killed.length !== 0) {\r\n                    // Remove killed listeners\r\n                    $array.each(this._killed, function (killed) {\r\n                        _this._removeListener(killed);\r\n                    });\r\n                    this._killed.length = 0;\r\n                }\r\n            }\r\n        }\r\n    });\r\n    /**\r\n     * Dispatches an event immediately without waiting for next cycle.\r\n     *\r\n     * @param type   Event type\r\n     * @param event  Event object\r\n     * @todo automatically add in type and target properties if they are missing\r\n     */\r\n    Object.defineProperty(EventDispatcher.prototype, \"dispatch\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (type, event) {\r\n            if (this._shouldDispatch(type)) {\r\n                // TODO check if it's faster to use an object of listeners rather than a single big array\r\n                // TODO if the function throws, maybe it should keep going ?\r\n                this._eachListener(function (listener) {\r\n                    if (!listener.killed && (listener.type === null || listener.type === type)) {\r\n                        listener.dispatch(type, event);\r\n                    }\r\n                });\r\n            }\r\n        }\r\n    });\r\n    /**\r\n     * Shelves the event to be dispatched within next update cycle.\r\n     *\r\n     * @param type   Event type\r\n     * @param event  Event object\r\n     * @todo automatically add in type and target properties if they are missing\r\n     */\r\n    /*public dispatchLater<Key extends keyof T>(type: Key, event: T[Key]): void {\r\n        if (this._shouldDispatch(type)) {\r\n            this._eachListener((listener) => {\r\n                // TODO check if it's faster to use an object of listeners rather than a single big array\r\n                if (!listener.killed && (listener.type === null || listener.type === type)) {\r\n                    // TODO if the function throws, maybe it should keep going ?\r\n                    // TODO dispatch during the update cycle, rather than using whenIdle\r\n                    $async.whenIdle(() => {\r\n                        if (!listener.killed) {\r\n                            listener.dispatch(type, event);\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n        }\r\n    }*/\r\n    /**\r\n     * Creates, catalogs and returns an [[EventListener]].\r\n     *\r\n     * Event listener can be disposed.\r\n     *\r\n     * @param once         Listener's once setting\r\n     * @param type         Listener's type\r\n     * @param callback     Callback function\r\n     * @param context      Callback context\r\n     * @param shouldClone  Whether the listener should be copied when the EventDispatcher is copied\r\n     * @param dispatch\r\n     * @returns An event listener\r\n     */\r\n    Object.defineProperty(EventDispatcher.prototype, \"_on\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (once, type, callback, context, shouldClone, dispatch) {\r\n            var _this = this;\r\n            if (this._disposed) {\r\n                throw new Error(\"EventDispatcher is disposed\");\r\n            }\r\n            this._removeExistingListener(once, type, callback, context);\r\n            var info = {\r\n                type: type,\r\n                callback: callback,\r\n                context: context,\r\n                shouldClone: shouldClone,\r\n                dispatch: dispatch,\r\n                killed: false,\r\n                once: once,\r\n                disposer: new Disposer(function () {\r\n                    info.killed = true;\r\n                    _this._removeListener(info);\r\n                })\r\n            };\r\n            this._listeners.push(info);\r\n            return info;\r\n        }\r\n    });\r\n    /**\r\n     * Creates an event listener to be invoked on **any** event.\r\n     *\r\n     * @param callback     Callback function\r\n     * @param context      Callback context\r\n     * @param shouldClone  Whether the listener should be copied when the EventDispatcher is copied\r\n     * @returns A disposable event listener\r\n     */\r\n    Object.defineProperty(EventDispatcher.prototype, \"onAll\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (callback, context, shouldClone) {\r\n            if (shouldClone === void 0) { shouldClone = true; }\r\n            return this._on(false, null, callback, context, shouldClone, function (_type, event) { return callback.call(context, event); }).disposer;\r\n        }\r\n    });\r\n    /**\r\n     * Creates an event listener to be invoked on a specific event type.\r\n     *\r\n     * ```TypeScript\r\n     * button.events.once(\"click\", (ev) => {\r\n     *   console.log(\"Button clicked\");\r\n     * }, this);\r\n     * ```\r\n     * ```JavaScript\r\n     * button.events.once(\"click\", (ev) => {\r\n     *   console.log(\"Button clicked\");\r\n     * }, this);\r\n     * ```\r\n     *\r\n     * The above will invoke our custom event handler whenever series we put\r\n     * event on is hidden.\r\n     *\r\n     * @param type         Listener's type\r\n     * @param callback     Callback function\r\n     * @param context      Callback context\r\n     * @param shouldClone  Whether the listener should be copied when the EventDispatcher is copied\r\n     * @returns A disposable event listener\r\n     */\r\n    Object.defineProperty(EventDispatcher.prototype, \"on\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (type, callback, context, shouldClone) {\r\n            if (shouldClone === void 0) { shouldClone = true; }\r\n            return this._on(false, type, callback, context, shouldClone, function (_type, event) { return callback.call(context, event); }).disposer;\r\n        }\r\n    });\r\n    /**\r\n     * Creates an event listener to be invoked on a specific event type once.\r\n     *\r\n     * Once the event listener is invoked, it is automatically disposed.\r\n     *\r\n     * ```TypeScript\r\n     * button.events.once(\"click\", (ev) => {\r\n     *   console.log(\"Button clicked\");\r\n     * }, this);\r\n     * ```\r\n     * ```JavaScript\r\n     * button.events.once(\"click\", (ev) => {\r\n     *   console.log(\"Button clicked\");\r\n     * }, this);\r\n     * ```\r\n     *\r\n     * The above will invoke our custom event handler the first time series we\r\n     * put event on is hidden.\r\n     *\r\n     * @param type         Listener's type\r\n     * @param callback     Callback function\r\n     * @param context      Callback context\r\n     * @param shouldClone  Whether the listener should be copied when the EventDispatcher is copied\r\n     * @returns A disposable event listener\r\n     */\r\n    Object.defineProperty(EventDispatcher.prototype, \"once\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (type, callback, context, shouldClone) {\r\n            if (shouldClone === void 0) { shouldClone = true; }\r\n            var x = this._on(true, type, callback, context, shouldClone, function (_type, event) {\r\n                x.disposer.dispose();\r\n                callback.call(context, event);\r\n            });\r\n            // TODO maybe this should return a different Disposer ?\r\n            return x.disposer;\r\n        }\r\n    });\r\n    /**\r\n     * Removes the event listener with specific parameters.\r\n     *\r\n     * @param type         Listener's type\r\n     * @param callback     Callback function\r\n     * @param context      Callback context\r\n     */\r\n    Object.defineProperty(EventDispatcher.prototype, \"off\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (type, callback, context) {\r\n            this._removeExistingListener(false, type, callback, context);\r\n        }\r\n    });\r\n    /**\r\n     * Copies all dispatcher parameters, including listeners, from another event\r\n     * dispatcher.\r\n     *\r\n     * @param source Source event dispatcher\r\n     * @ignore\r\n     */\r\n    Object.defineProperty(EventDispatcher.prototype, \"copyFrom\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (source) {\r\n            var _this = this;\r\n            if (this._disposed) {\r\n                throw new Error(\"EventDispatcher is disposed\");\r\n            }\r\n            if (source === this) {\r\n                throw new Error(\"Cannot copyFrom the same TargetedEventDispatcher\");\r\n            }\r\n            var disposers = [];\r\n            $array.each(source._listeners, function (x) {\r\n                // TODO is this correct ?\r\n                if (!x.killed && x.shouldClone) {\r\n                    if (x.type === null) {\r\n                        disposers.push(_this.onAll(x.callback, x.context));\r\n                    }\r\n                    else if (x.once) {\r\n                        disposers.push(_this.once(x.type, x.callback, x.context));\r\n                    }\r\n                    else {\r\n                        disposers.push(_this.on(x.type, x.callback, x.context));\r\n                    }\r\n                }\r\n            });\r\n            return new MultiDisposer(disposers);\r\n        }\r\n    });\r\n    return EventDispatcher;\r\n}());\r\nexport { EventDispatcher };\r\n/**\r\n * A version of the [[EventDispatcher]] that dispatches events for a specific\r\n * target object.\r\n *\r\n * @ignore\r\n */\r\nvar TargetedEventDispatcher = /** @class */ (function (_super) {\r\n    __extends(TargetedEventDispatcher, _super);\r\n    /**\r\n     * Constructor\r\n     *\r\n     * @param target Event dispatcher target\r\n     */\r\n    function TargetedEventDispatcher(target) {\r\n        var _this = _super.call(this) || this;\r\n        /**\r\n         * A target object which is originating events using this dispatcher.\r\n         */\r\n        Object.defineProperty(_this, \"target\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        _this.target = target;\r\n        return _this;\r\n    }\r\n    /**\r\n     * Copies all dispatcher parameters, including listeners, from another event\r\n     * dispatcher.\r\n     *\r\n     * @param source Source event dispatcher\r\n     * @ignore\r\n     */\r\n    Object.defineProperty(TargetedEventDispatcher.prototype, \"copyFrom\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (source) {\r\n            var _this = this;\r\n            if (this._disposed) {\r\n                throw new Error(\"EventDispatcher is disposed\");\r\n            }\r\n            if (source === this) {\r\n                throw new Error(\"Cannot copyFrom the same TargetedEventDispatcher\");\r\n            }\r\n            var disposers = [];\r\n            $array.each(source._listeners, function (x) {\r\n                // TODO very hacky\r\n                if (x.context === source.target) {\r\n                    return;\r\n                }\r\n                // TODO is this correct ?\r\n                if (!x.killed && x.shouldClone) {\r\n                    if (x.type === null) {\r\n                        disposers.push(_this.onAll(x.callback, x.context));\r\n                    }\r\n                    else if (x.once) {\r\n                        disposers.push(_this.once(x.type, x.callback, x.context));\r\n                    }\r\n                    else {\r\n                        disposers.push(_this.on(x.type, x.callback, x.context));\r\n                    }\r\n                }\r\n            });\r\n            return new MultiDisposer(disposers);\r\n        }\r\n    });\r\n    return TargetedEventDispatcher;\r\n}(EventDispatcher));\r\nexport { TargetedEventDispatcher };\r\n//# sourceMappingURL=EventDispatcher.js.map","import { __extends, __generator } from \"tslib\";\r\nimport { EventDispatcher } from \"./EventDispatcher\";\r\nimport * as $array from \"./Array\";\r\n/**\r\n * Checks if specific index fits into length.\r\n *\r\n * @param index  Index\r\n * @param len    Length\r\n * @ignore\r\n */\r\nfunction checkBounds(index, len) {\r\n    if (!(index >= 0 && index < len)) {\r\n        throw new Error(\"Index out of bounds: \" + index);\r\n    }\r\n}\r\n/**\r\n * A List class is used to hold a number of indexed items of the same type.\r\n */\r\nvar List = /** @class */ (function () {\r\n    /**\r\n     * Constructor\r\n     *\r\n     * @param initial  Inital list of values to add to list\r\n     */\r\n    function List(initial) {\r\n        if (initial === void 0) { initial = []; }\r\n        /**\r\n         * List values.\r\n         */\r\n        Object.defineProperty(this, \"_values\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"events\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: new EventDispatcher()\r\n        });\r\n        this._values = initial;\r\n    }\r\n    Object.defineProperty(List.prototype, \"values\", {\r\n        /**\r\n         * An array of values in the list.\r\n         *\r\n         * Do not use this property to add values. Rather use dedicated methods, like\r\n         * `push()`, `removeIndex()`, etc.\r\n         *\r\n         * @readonly\r\n         * @return List values\r\n         */\r\n        get: function () {\r\n            return this._values;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Checks if list contains specific item reference.\r\n     *\r\n     * @param item  Item to search for\r\n     * @return `true` if found, `false` if not found\r\n     */\r\n    Object.defineProperty(List.prototype, \"contains\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (value) {\r\n            return this._values.indexOf(value) !== -1;\r\n        }\r\n    });\r\n    /**\r\n     * Removes specific item from the list.\r\n     *\r\n     * @param item An item to remove\r\n     */\r\n    Object.defineProperty(List.prototype, \"removeValue\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (value) {\r\n            var i = 0;\r\n            var length = this._values.length;\r\n            while (i < length) {\r\n                // TODO handle NaN\r\n                if (this._values[i] === value) {\r\n                    this.removeIndex(i);\r\n                    --length;\r\n                }\r\n                else {\r\n                    ++i;\r\n                }\r\n            }\r\n        }\r\n    });\r\n    /**\r\n     * Searches the list for specific item and returns its index.\r\n     *\r\n     * @param item  An item to search for\r\n     * @return Index or -1 if not found\r\n     */\r\n    Object.defineProperty(List.prototype, \"indexOf\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (value) {\r\n            return $array.indexOf(this._values, value);\r\n        }\r\n    });\r\n    Object.defineProperty(List.prototype, \"length\", {\r\n        /**\r\n         * Number of items in list.\r\n         *\r\n         * @readonly\r\n         * @return Number of items\r\n         */\r\n        get: function () {\r\n            return this._values.length;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Checks if there's a value at specific index.\r\n     *\r\n     * @param index  Index\r\n     * @return Value exists?\r\n     */\r\n    Object.defineProperty(List.prototype, \"hasIndex\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (index) {\r\n            return index >= 0 && index < this._values.length;\r\n        }\r\n    });\r\n    /**\r\n     * Returns an item at specified index.\r\n     *\r\n     * @param index  Index\r\n     * @return List item\r\n     */\r\n    Object.defineProperty(List.prototype, \"getIndex\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (index) {\r\n            return this._values[index];\r\n        }\r\n    });\r\n    Object.defineProperty(List.prototype, \"_onPush\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (newValue) {\r\n            if (this.events.isEnabled(\"push\")) {\r\n                this.events.dispatch(\"push\", {\r\n                    type: \"push\",\r\n                    target: this,\r\n                    newValue: newValue\r\n                });\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(List.prototype, \"_onInsertIndex\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (index, newValue) {\r\n            if (this.events.isEnabled(\"insertIndex\")) {\r\n                this.events.dispatch(\"insertIndex\", {\r\n                    type: \"insertIndex\",\r\n                    target: this,\r\n                    index: index,\r\n                    newValue: newValue\r\n                });\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(List.prototype, \"_onSetIndex\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (index, oldValue, newValue) {\r\n            if (this.events.isEnabled(\"setIndex\")) {\r\n                this.events.dispatch(\"setIndex\", {\r\n                    type: \"setIndex\",\r\n                    target: this,\r\n                    index: index,\r\n                    oldValue: oldValue,\r\n                    newValue: newValue\r\n                });\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(List.prototype, \"_onRemoveIndex\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (index, oldValue) {\r\n            if (this.events.isEnabled(\"removeIndex\")) {\r\n                this.events.dispatch(\"removeIndex\", {\r\n                    type: \"removeIndex\",\r\n                    target: this,\r\n                    index: index,\r\n                    oldValue: oldValue\r\n                });\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(List.prototype, \"_onMoveIndex\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (oldIndex, newIndex, value) {\r\n            if (this.events.isEnabled(\"moveIndex\")) {\r\n                this.events.dispatch(\"moveIndex\", {\r\n                    type: \"moveIndex\",\r\n                    target: this,\r\n                    oldIndex: oldIndex,\r\n                    newIndex: newIndex,\r\n                    value: value,\r\n                });\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(List.prototype, \"_onClear\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (oldValues) {\r\n            if (this.events.isEnabled(\"clear\")) {\r\n                this.events.dispatch(\"clear\", {\r\n                    type: \"clear\",\r\n                    target: this,\r\n                    oldValues: oldValues\r\n                });\r\n            }\r\n        }\r\n    });\r\n    /**\r\n     * Sets value at specific index.\r\n     *\r\n     * If there's already a value at the index, it is overwritten.\r\n     *\r\n     * @param index  Index\r\n     * @param value  New value\r\n     * @return New value\r\n     */\r\n    Object.defineProperty(List.prototype, \"setIndex\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (index, value) {\r\n            checkBounds(index, this._values.length);\r\n            var oldValue = this._values[index];\r\n            // Do nothing if the old value and the new value are the same\r\n            if (oldValue !== value) {\r\n                this._values[index] = value;\r\n                this._onSetIndex(index, oldValue, value);\r\n            }\r\n            return oldValue;\r\n        }\r\n    });\r\n    /**\r\n     * Adds an item to the list at a specific index, which pushes all the other\r\n     * items further down the list.\r\n     *\r\n     * @param index Index\r\n     * @param item  An item to add\r\n     */\r\n    Object.defineProperty(List.prototype, \"insertIndex\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (index, value) {\r\n            checkBounds(index, this._values.length + 1);\r\n            $array.insertIndex(this._values, index, value);\r\n            this._onInsertIndex(index, value);\r\n            return value;\r\n        }\r\n    });\r\n    /**\r\n     * Swaps indexes of two items in the list.\r\n     *\r\n     * @param a  Item 1\r\n     * @param b  Item 2\r\n     */\r\n    Object.defineProperty(List.prototype, \"swap\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (a, b) {\r\n            var len = this._values.length;\r\n            checkBounds(a, len);\r\n            checkBounds(b, len);\r\n            if (a !== b) {\r\n                var value_a = this._values[a];\r\n                var value_b = this._values[b];\r\n                this._values[a] = value_b;\r\n                this._onSetIndex(a, value_a, value_b);\r\n                this._values[b] = value_a;\r\n                this._onSetIndex(b, value_b, value_a);\r\n            }\r\n        }\r\n    });\r\n    /**\r\n     * Removes a value at specific index.\r\n     *\r\n     * @param index  Index of value to remove\r\n     * @return Removed value\r\n     */\r\n    Object.defineProperty(List.prototype, \"removeIndex\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (index) {\r\n            checkBounds(index, this._values.length);\r\n            var oldValue = this._values[index];\r\n            $array.removeIndex(this._values, index);\r\n            this._onRemoveIndex(index, oldValue);\r\n            return oldValue;\r\n        }\r\n    });\r\n    /**\r\n     * Moves an item to a specific index within the list.\r\n     *\r\n     * If the index is not specified it will move the item to the end of the\r\n     * list.\r\n     *\r\n     * @param value  Item to move\r\n     * @param index  Index to place item at\r\n     */\r\n    Object.defineProperty(List.prototype, \"moveValue\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (value, toIndex) {\r\n            // TODO don't do anything if the desired index is the same as the current index\r\n            var index = this.indexOf(value);\r\n            // TODO remove all old values rather than only the first ?\r\n            if (index !== -1) {\r\n                $array.removeIndex(this._values, index);\r\n                if (toIndex == null) {\r\n                    var toIndex_1 = this._values.length;\r\n                    this._values.push(value);\r\n                    this._onMoveIndex(index, toIndex_1, value);\r\n                }\r\n                else {\r\n                    $array.insertIndex(this._values, toIndex, value);\r\n                    this._onMoveIndex(index, toIndex, value);\r\n                }\r\n            }\r\n            else if (toIndex == null) {\r\n                this._values.push(value);\r\n                this._onPush(value);\r\n            }\r\n            else {\r\n                $array.insertIndex(this._values, toIndex, value);\r\n                this._onInsertIndex(toIndex, value);\r\n            }\r\n            return value;\r\n        }\r\n    });\r\n    /**\r\n     * Adds an item to the end of the list.\r\n     *\r\n     * @param item  An item to add\r\n     */\r\n    Object.defineProperty(List.prototype, \"push\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (value) {\r\n            this._values.push(value);\r\n            this._onPush(value);\r\n            return value;\r\n        }\r\n    });\r\n    /**\r\n     * Adds an item as a first item in the list.\r\n     *\r\n     * @param item  An item to add\r\n     */\r\n    Object.defineProperty(List.prototype, \"unshift\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (value) {\r\n            this.insertIndex(0, value);\r\n            return value;\r\n        }\r\n    });\r\n    /**\r\n     * Adds multiple items to the list.\r\n     *\r\n     * @param items  An Array of items to add\r\n     */\r\n    Object.defineProperty(List.prototype, \"pushAll\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (values) {\r\n            var _this = this;\r\n            $array.each(values, function (value) {\r\n                _this.push(value);\r\n            });\r\n        }\r\n    });\r\n    /**\r\n     * Copies and adds items from abother list.\r\n     *\r\n     * @param source  A list top copy items from\r\n     */\r\n    Object.defineProperty(List.prototype, \"copyFrom\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (source) {\r\n            this.pushAll(source._values);\r\n        }\r\n    });\r\n    /**\r\n     * Returns the last item from the list, and removes it.\r\n     *\r\n     * @return Item\r\n     */\r\n    Object.defineProperty(List.prototype, \"pop\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            var index = this._values.length - 1;\r\n            return index < 0 ? undefined : this.removeIndex(this._values.length - 1);\r\n        }\r\n    });\r\n    /**\r\n     * Returns the first item from the list, and removes it.\r\n     *\r\n     * @return Item\r\n     */\r\n    Object.defineProperty(List.prototype, \"shift\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            return this._values.length ? this.removeIndex(0) : undefined;\r\n        }\r\n    });\r\n    /**\r\n     * Sets multiple items to the list.\r\n     *\r\n     * All current items are removed.\r\n     *\r\n     * @param newArray  New items\r\n     */\r\n    Object.defineProperty(List.prototype, \"setAll\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (newArray) {\r\n            var _this = this;\r\n            var old = this._values;\r\n            this._values = [];\r\n            this._onClear(old);\r\n            $array.each(newArray, function (value) {\r\n                _this._values.push(value);\r\n                _this._onPush(value);\r\n            });\r\n        }\r\n    });\r\n    /**\r\n     * Removes all items from the list.\r\n     */\r\n    Object.defineProperty(List.prototype, \"clear\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            this.setAll([]);\r\n        }\r\n    });\r\n    /**\r\n     * Returns an ES6 iterator for the list.\r\n     */\r\n    Object.defineProperty(List.prototype, Symbol.iterator, {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            var length, i;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        length = this._values.length;\r\n                        i = 0;\r\n                        _a.label = 1;\r\n                    case 1:\r\n                        if (!(i < length)) return [3 /*break*/, 4];\r\n                        return [4 /*yield*/, this._values[i]];\r\n                    case 2:\r\n                        _a.sent();\r\n                        _a.label = 3;\r\n                    case 3:\r\n                        ++i;\r\n                        return [3 /*break*/, 1];\r\n                    case 4: return [2 /*return*/];\r\n                }\r\n            });\r\n        }\r\n    });\r\n    /**\r\n     * Calls `f` for each element in the list.\r\n     *\r\n     * `f` should have at least one parameter defined which will get a current\r\n     * item, with optional second argument - index.\r\n     */\r\n    Object.defineProperty(List.prototype, \"each\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (f) {\r\n            $array.each(this._values, f);\r\n        }\r\n    });\r\n    /**\r\n     * Calls `f` for each element in the list, from right to left.\r\n     *\r\n     * `f` should have at least one parameter defined which will get a current\r\n     * item, with optional second argument - index.\r\n     */\r\n    Object.defineProperty(List.prototype, \"eachReverse\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (f) {\r\n            $array.eachReverse(this._values, f);\r\n        }\r\n    });\r\n    return List;\r\n}());\r\nexport { List };\r\n/**\r\n * A version of a [[List]] where the elements are disposed automatically when\r\n * removed from the list, unless `autoDispose` is set to `false`.\r\n */\r\nvar ListAutoDispose = /** @class */ (function (_super) {\r\n    __extends(ListAutoDispose, _super);\r\n    function ListAutoDispose() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        /**\r\n         * Automatically disposes elements that are removed from the list.\r\n         *\r\n         * @default true\r\n         */\r\n        Object.defineProperty(_this, \"autoDispose\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: true\r\n        });\r\n        Object.defineProperty(_this, \"_disposed\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        return _this;\r\n    }\r\n    Object.defineProperty(ListAutoDispose.prototype, \"_onSetIndex\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (index, oldValue, newValue) {\r\n            if (this.autoDispose) {\r\n                oldValue.dispose();\r\n            }\r\n            _super.prototype._onSetIndex.call(this, index, oldValue, newValue);\r\n        }\r\n    });\r\n    Object.defineProperty(ListAutoDispose.prototype, \"_onRemoveIndex\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (index, oldValue) {\r\n            if (this.autoDispose) {\r\n                oldValue.dispose();\r\n            }\r\n            _super.prototype._onRemoveIndex.call(this, index, oldValue);\r\n        }\r\n    });\r\n    Object.defineProperty(ListAutoDispose.prototype, \"_onClear\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (oldValues) {\r\n            if (this.autoDispose) {\r\n                $array.each(oldValues, function (x) {\r\n                    x.dispose();\r\n                });\r\n            }\r\n            _super.prototype._onClear.call(this, oldValues);\r\n        }\r\n    });\r\n    Object.defineProperty(ListAutoDispose.prototype, \"isDisposed\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            return this._disposed;\r\n        }\r\n    });\r\n    Object.defineProperty(ListAutoDispose.prototype, \"dispose\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            if (!this._disposed) {\r\n                this._disposed = true;\r\n                if (this.autoDispose) {\r\n                    $array.each(this._values, function (x) {\r\n                        x.dispose();\r\n                    });\r\n                }\r\n            }\r\n        }\r\n    });\r\n    return ListAutoDispose;\r\n}(List));\r\nexport { ListAutoDispose };\r\n/**\r\n * A version of a [[List]] that is able to create new elements as well as\r\n * apply additional settings to newly created items.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/settings/list-templates/} for more info\r\n */\r\nvar ListTemplate = /** @class */ (function (_super) {\r\n    __extends(ListTemplate, _super);\r\n    function ListTemplate(template, make) {\r\n        var _this = _super.call(this) || this;\r\n        Object.defineProperty(_this, \"template\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(_this, \"make\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        _this.template = template;\r\n        _this.make = make;\r\n        return _this;\r\n    }\r\n    return ListTemplate;\r\n}(ListAutoDispose));\r\nexport { ListTemplate };\r\n//# sourceMappingURL=List.js.map","import { __extends } from \"tslib\";\r\nimport { List } from \"./List\";\r\nimport * as $array from \"./Array\";\r\n/**\r\n * A version of [[List]] to hold children of the [[Container]].\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/common-elements/containers/} for more info\r\n */\r\nvar Children = /** @class */ (function (_super) {\r\n    __extends(Children, _super);\r\n    function Children(container) {\r\n        var _this = _super.call(this) || this;\r\n        Object.defineProperty(_this, \"_disposed\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(_this, \"_container\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(_this, \"_events\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        _this._container = container;\r\n        _this._events = _this.events.onAll(function (change) {\r\n            if (change.type === \"clear\") {\r\n                $array.each(change.oldValues, function (x) {\r\n                    _this._onRemoved(x);\r\n                });\r\n            }\r\n            else if (change.type === \"push\") {\r\n                _this._onInserted(change.newValue);\r\n            }\r\n            else if (change.type === \"setIndex\") {\r\n                _this._onRemoved(change.oldValue);\r\n                _this._onInserted(change.newValue, change.index);\r\n            }\r\n            else if (change.type === \"insertIndex\") {\r\n                _this._onInserted(change.newValue, change.index);\r\n            }\r\n            else if (change.type === \"removeIndex\") {\r\n                _this._onRemoved(change.oldValue);\r\n            }\r\n            else if (change.type === \"moveIndex\") {\r\n                _this._onRemoved(change.value);\r\n                _this._onInserted(change.value, change.newIndex);\r\n            }\r\n            else {\r\n                throw new Error(\"Unknown IListEvent type\");\r\n            }\r\n        });\r\n        return _this;\r\n    }\r\n    Object.defineProperty(Children.prototype, \"_onInserted\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (child, index) {\r\n            child._setParent(this._container, true);\r\n            var childrenDisplay = this._container._childrenDisplay;\r\n            if (index === undefined) {\r\n                childrenDisplay.addChild(child._display);\r\n            }\r\n            else {\r\n                childrenDisplay.addChildAt(child._display, index);\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Children.prototype, \"_onRemoved\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (child) {\r\n            this._container._childrenDisplay.removeChild(child._display);\r\n            this._container.markDirtyBounds();\r\n            this._container.markDirty();\r\n        }\r\n    });\r\n    /**\r\n     * Returns `true` if obejct is disposed.\r\n     */\r\n    Object.defineProperty(Children.prototype, \"isDisposed\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            return this._disposed;\r\n        }\r\n    });\r\n    /**\r\n     * Permanently dispose this object.\r\n     */\r\n    Object.defineProperty(Children.prototype, \"dispose\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            if (!this._disposed) {\r\n                this._disposed = true;\r\n                this._events.dispose();\r\n                $array.each(this.values, function (child) {\r\n                    child.dispose();\r\n                });\r\n            }\r\n        }\r\n    });\r\n    return Children;\r\n}(List));\r\nexport { Children };\r\n//# sourceMappingURL=Children.js.map","/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Represents a relative value (percent).\r\n *\r\n * The Percent object, can be instantiated using two ways:\r\n *\r\n * * Via `new Percent(X)`.\r\n * * Via `am5.percent(X)`.\r\n *\r\n * You can also use shortcut functions for `0%`, `50%`, and `100%`:\r\n * * `am5.p0`\r\n * * `am5.p50`\r\n * * `am5.p1000`\r\n */\r\nvar Percent = /** @class */ (function () {\r\n    /**\r\n     * Constructor.\r\n     *\r\n     * @param percent  Percent value\r\n     */\r\n    function Percent(percent) {\r\n        /**\r\n         * Value in percent.\r\n         */\r\n        Object.defineProperty(this, \"_value\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        this._value = percent;\r\n    }\r\n    Object.defineProperty(Percent.prototype, \"value\", {\r\n        /**\r\n         * Relative value.\r\n         *\r\n         * E.g. 100% is 1, 50% is 0.5, etc.\r\n         *\r\n         * This is useful to apply transformations to other values. E.g.:\r\n         *\r\n         * ```TypeScript\r\n         * let value = 256;\r\n         * let percent = new am5.p50;\r\n         * console.log(value * percent.value); // outputs 128\r\n         * ```\r\n         * ```JavaScript\r\n         * var value = 256;\r\n         * var percent = new am5.p50;\r\n         * console.log(value * percent.value); // outputs 128\r\n         * ```\r\n         *\r\n         * Alternatively, you can use `am5.percent()` helper function:\r\n         *\r\n         * ```TypeScript\r\n         * let value = 256;\r\n         * let percent = am5.p50;\r\n         * console.log(value * percent.value); // outputs 128\r\n         * ```\r\n         * ```JavaScript\r\n         * var value = 256;\r\n         * var percent = am5.p50;\r\n         * console.log(value * percent.value); // outputs 128\r\n         * ```\r\n         *\r\n         * @readonly\r\n         * @return Relative value\r\n         */\r\n        get: function () {\r\n            return this._value / 100;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Percent.prototype, \"percent\", {\r\n        /**\r\n         * Value in percent.\r\n         *\r\n         * @return Percent\r\n         */\r\n        get: function () {\r\n            return this._value;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Percent.prototype, \"toString\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            return \"\" + this._value + \"%\";\r\n        }\r\n    });\r\n    Object.defineProperty(Percent.prototype, \"interpolate\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (min, max) {\r\n            return min + (this.value * (max - min));\r\n        }\r\n    });\r\n    Object.defineProperty(Percent, \"normalize\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (percent, min, max) {\r\n            if (percent instanceof Percent) {\r\n                return percent;\r\n            }\r\n            else {\r\n                if (min === max) {\r\n                    return new Percent(0);\r\n                }\r\n                else {\r\n                    return new Percent(Math.min(Math.max((percent - min) * (1 / (max - min)), 0), 1) * 100);\r\n                }\r\n            }\r\n        }\r\n    });\r\n    return Percent;\r\n}());\r\nexport { Percent };\r\n/**\r\n * Converts numeric percent value to a proper [[Percent]] object.\r\n *\r\n * ```TypeScript\r\n * pieSeries.set(\"radius\", am5.percent(80));\r\n * ```\r\n * ```JavaScript\r\n * pieSeries.set(\"radius\", am5.percent(80));\r\n * ```\r\n *\r\n * @param value  Percent\r\n * @return Percent object\r\n */\r\nexport function percent(value) {\r\n    return new Percent(value);\r\n}\r\n/**\r\n * A shortcut function to `am5.percent(0)`.\r\n */\r\nexport var p0 = percent(0);\r\n/**\r\n * A shortcut function to `am5.percent(100)`.\r\n */\r\nexport var p100 = percent(100);\r\n/**\r\n * A shortcut function to `am5.percent(50)`.\r\n */\r\nexport var p50 = percent(50);\r\n/**\r\n * Checks if value is a [[Percent]] object.\r\n *\r\n * @ignore Exclude from docs\r\n * @param value  Input value\r\n * @return Is percent?\r\n */\r\nexport function isPercent(value) {\r\n    return value instanceof Percent;\r\n}\r\n//# sourceMappingURL=Percent.js.map","import * as $array from \"./Array\";\r\nexport function keys(object) {\r\n    return Object.keys(object);\r\n}\r\n/**\r\n * Returns an array of object's property names ordered using specific ordering\r\n * function.\r\n *\r\n * @param object  Source object\r\n * @param order   Ordering function\r\n * @returns Object property names\r\n */\r\nexport function keysOrdered(object, order) {\r\n    return keys(object).sort(order);\r\n}\r\nexport function copy(object) {\r\n    return Object.assign({}, object);\r\n}\r\nexport function each(object, f) {\r\n    keys(object).forEach(function (key) {\r\n        f(key, object[key]);\r\n    });\r\n}\r\n/**\r\n * Iterates through all properties of the object calling `fn` for each of them.\r\n *\r\n * If return value of the function evaluates to `false` further iteration is\r\n * cancelled.\r\n *\r\n * @param object  Source object\r\n * @param fn      Callback function\r\n */\r\nexport function eachContinue(object, fn) {\r\n    for (var key in object) {\r\n        if (hasKey(object, key)) {\r\n            if (!fn(key, object[key])) {\r\n                break;\r\n            }\r\n        }\r\n    }\r\n}\r\n/**\r\n * Orders object properties using custom `ord` function and iterates through\r\n * them calling `fn` for each of them.\r\n *\r\n * @param object  Source object\r\n * @param fn      Callback function\r\n * @param order   Ordering function\r\n */\r\nexport function eachOrdered(object, fn, ord) {\r\n    $array.each(keysOrdered(object, ord), function (key) {\r\n        fn(key, object[key]);\r\n    });\r\n}\r\n/**\r\n * Checks if `object` has a specific `key`.\r\n *\r\n * @param object  Source object\r\n * @param key     Property name\r\n * @returns Has key?\r\n */\r\nexport function hasKey(object, key) {\r\n    return {}.hasOwnProperty.call(object, key);\r\n}\r\n/**\r\n * Copies all properties of one object to the other, omitting undefined, but only if property in target object doesn't have a value set.\r\n *\r\n * @param fromObject  Source object\r\n * @param toObject    Target object\r\n * @return Updated target object\r\n * @todo Maybe consolidate with utils.copy?\r\n */\r\nexport function softCopyProperties(source, target) {\r\n    each(source, function (key, value) {\r\n        // only if value is set\r\n        //if ($type.hasValue(value) && !($type.hasValue((<any>target)[key]))) {\r\n        if (value != null && target[key] == null) {\r\n            target[key] = value;\r\n        }\r\n    });\r\n    return target;\r\n}\r\n//# sourceMappingURL=Object.js.map","import { __extends, __read, __spreadArray } from \"tslib\";\r\nimport * as $type from \"./Type\";\r\nimport * as $array from \"./Array\";\r\nimport * as $object from \"./Object\";\r\nimport { Disposer, DisposerClass } from \"./Disposer\";\r\n/**\r\n * ============================================================================\r\n * DOM FUNCTIONS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Execute a function when DOM is ready.\r\n *\r\n * @since 5.0.2\r\n * @param  f  Callback\r\n */\r\nexport function ready(f) {\r\n    if (document.readyState !== \"loading\") {\r\n        f();\r\n    }\r\n    else {\r\n        var listener_1 = function () {\r\n            if (document.readyState !== \"loading\") {\r\n                document.removeEventListener(\"readystatechange\", listener_1);\r\n                f();\r\n            }\r\n        };\r\n        document.addEventListener(\"readystatechange\", listener_1);\r\n    }\r\n}\r\n/**\r\n * Removes a DOM element.\r\n * @param  el  Target element\r\n */\r\nexport function removeElement(el) {\r\n    if (el.parentNode) {\r\n        el.parentNode.removeChild(el);\r\n    }\r\n}\r\n/**\r\n * Function that adds a disposable event listener directly to a DOM element.\r\n *\r\n * @ignore Exclude from docs\r\n * @param dom       A DOM element to add event to\r\n * @param type      Event type\r\n * @param listener  Event listener\r\n * @returns Disposable event\r\n */\r\nexport function addEventListener(dom, type, listener, options) {\r\n    //@todo proper type check for options: EventListenerOptions | boolean (TS for some reason gives error on passive parameter)\r\n    //console.log(type, dom);\r\n    dom.addEventListener(type, listener, options || false);\r\n    return new Disposer(function () {\r\n        dom.removeEventListener(type, listener, options || false);\r\n    });\r\n}\r\n/**\r\n * Function that adds an event listener which is triggered when the browser's zoom changes.\r\n *\r\n * @param listener  Event listener\r\n * @returns Disposable event\r\n */\r\nexport function onZoom(listener) {\r\n    // TODO use matchMedia instead ?\r\n    return addEventListener(window, \"resize\", function (_ev) {\r\n        listener();\r\n    });\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport function supports(cap) {\r\n    switch (cap) {\r\n        case \"touchevents\":\r\n            //return \"ontouchstart\" in document.documentElement;\r\n            return window.hasOwnProperty(\"TouchEvent\");\r\n        case \"pointerevents\":\r\n            return window.hasOwnProperty(\"PointerEvent\");\r\n        case \"mouseevents\":\r\n            return window.hasOwnProperty(\"MouseEvent\");\r\n        case \"wheelevents\":\r\n            return window.hasOwnProperty(\"WheelEvent\");\r\n        case \"keyboardevents\":\r\n            return window.hasOwnProperty(\"KeyboardEvent\");\r\n    }\r\n    return false;\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport function getPointerId(event) {\r\n    var id = event.pointerId || 0;\r\n    //console.log(event);\r\n    return id;\r\n}\r\n/**\r\n * Removes focus from any element by shifting focus to body.\r\n *\r\n * @ignore\r\n */\r\nexport function blur() {\r\n    if (document.activeElement && document.activeElement != document.body) {\r\n        if (document.activeElement.blur) {\r\n            document.activeElement.blur();\r\n        }\r\n        else {\r\n            var input = document.createElement(\"button\");\r\n            input.style.position = \"fixed\";\r\n            input.style.top = \"0px\";\r\n            input.style.left = \"-10000px\";\r\n            document.body.appendChild(input);\r\n            input.focus();\r\n            input.blur();\r\n            document.body.removeChild(input);\r\n        }\r\n    }\r\n}\r\n/**\r\n * Focuses element.\r\n *\r\n * @ignore\r\n */\r\nexport function focus(el) {\r\n    if (el) {\r\n        el.focus();\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport function getRendererEvent(key) {\r\n    if (supports(\"pointerevents\")) {\r\n        return key;\r\n    }\r\n    else if (supports(\"touchevents\")) {\r\n        switch (key) {\r\n            case \"pointerover\": return \"touchstart\";\r\n            case \"pointerout\": return \"touchend\";\r\n            case \"pointerdown\": return \"touchstart\";\r\n            case \"pointermove\": return \"touchmove\";\r\n            case \"pointerup\": return \"touchend\";\r\n            case \"click\": return \"click\";\r\n            case \"dblclick\": return \"dblclick\";\r\n        }\r\n    }\r\n    else if (supports(\"mouseevents\")) {\r\n        switch (key) {\r\n            case \"pointerover\": return \"mouseover\";\r\n            case \"pointerout\": return \"mouseout\";\r\n            case \"pointerdown\": return \"mousedown\";\r\n            case \"pointermove\": return \"mousemove\";\r\n            case \"pointerup\": return \"mouseup\";\r\n            case \"click\": return \"click\";\r\n            case \"dblclick\": return \"dblclick\";\r\n        }\r\n    }\r\n    return key;\r\n}\r\n/**\r\n * Determines if pointer event originated from a touch pointer or mouse.\r\n *\r\n * @param ev  Original event\r\n * @return Touch pointer?\r\n */\r\nexport function isTouchEvent(ev) {\r\n    if (typeof Touch !== \"undefined\" && ev instanceof Touch) {\r\n        return true;\r\n    }\r\n    else if (typeof PointerEvent !== \"undefined\" && ev instanceof PointerEvent && ev.pointerType != null) {\r\n        switch (ev.pointerType) {\r\n            case \"touch\":\r\n            case \"pen\":\r\n            case 2:\r\n                return true;\r\n            case \"mouse\":\r\n            case 4:\r\n                return false;\r\n            default:\r\n                return !(ev instanceof MouseEvent);\r\n        }\r\n    }\r\n    else if (ev.type != null) {\r\n        if (ev.type.match(/^mouse/)) {\r\n            return false;\r\n        }\r\n    }\r\n    return true;\r\n}\r\n/**\r\n * Sets style property on DOM element.\r\n *\r\n * @ignore Exclude from docs\r\n */\r\nexport function setStyle(dom, property, value) {\r\n    dom.style[property] = value;\r\n}\r\nexport function getStyle(dom, property) {\r\n    return dom.style[property];\r\n}\r\n/**\r\n * Checks of element `a` contains element `b`.\r\n *\r\n * @param a  Aleged ascendant\r\n * @param b  Aleged descendant\r\n * @return Contains?\r\n */\r\nexport function contains(a, b) {\r\n    var cursor = b;\r\n    while (true) {\r\n        if (a === cursor) {\r\n            return true;\r\n        }\r\n        else if (cursor.parentNode === null) {\r\n            // TODO better ShadowRoot detection\r\n            if (cursor.host == null) {\r\n                return false;\r\n            }\r\n            else {\r\n                cursor = cursor.host;\r\n            }\r\n        }\r\n        else {\r\n            cursor = cursor.parentNode;\r\n        }\r\n    }\r\n}\r\n/**\r\n * Returns `true` if pointer event originated on an element within Root.\r\n *\r\n * @since 5.2.8\r\n * @param  event   Event\r\n * @param  target  Target element\r\n */\r\nexport function isLocalEvent(event, target) {\r\n    return event.target && contains(target.root.dom, event.target);\r\n}\r\n/**\r\n * Disables or enables interactivity of a DOM element.\r\n *\r\n * @param  target       Target element\r\n * @param  interactive  Interactive?\r\n */\r\nexport function setInteractive(target, interactive) {\r\n    if (interactive) {\r\n        target.style.pointerEvents = \"auto\";\r\n    }\r\n    else {\r\n        target.style.pointerEvents = \"none\";\r\n    }\r\n}\r\n/**\r\n * Returns the shadow root of the element or null\r\n *\r\n * @param a  Node\r\n * @return Root\r\n */\r\nexport function getShadowRoot(a) {\r\n    var cursor = a;\r\n    while (true) {\r\n        if (cursor.parentNode === null) {\r\n            // TODO better ShadowRoot detection\r\n            if (cursor.host != null) {\r\n                return cursor;\r\n            }\r\n            else {\r\n                return null;\r\n            }\r\n        }\r\n        else {\r\n            cursor = cursor.parentNode;\r\n        }\r\n    }\r\n}\r\n/**\r\n * [rootStylesheet description]\r\n *\r\n * @ignore Exclude from docs\r\n * @todo Description\r\n */\r\nvar rootStylesheet;\r\n/**\r\n * @ignore Exclude from docs\r\n */\r\nfunction createStylesheet(element, text, nonce) {\r\n    if (nonce === void 0) { nonce = \"\"; }\r\n    // TODO use createElementNS ?\r\n    var e = document.createElement(\"style\");\r\n    e.type = \"text/css\";\r\n    if (nonce != \"\") {\r\n        e.setAttribute(\"nonce\", nonce);\r\n    }\r\n    e.textContent = text;\r\n    if (element === null) {\r\n        document.head.appendChild(e);\r\n    }\r\n    else {\r\n        element.appendChild(e);\r\n    }\r\n    return e;\r\n}\r\n/**\r\n * [getStylesheet description]\r\n *\r\n * @ignore Exclude from docs\r\n * @todo Description\r\n * @return [description]\r\n */\r\nfunction getStylesheet(element, nonce) {\r\n    if (nonce === void 0) { nonce = \"\"; }\r\n    if (element === null) {\r\n        if (rootStylesheet == null) {\r\n            // TODO use createElementNS ?\r\n            var e = document.createElement(\"style\");\r\n            e.type = \"text/css\";\r\n            if (nonce != \"\") {\r\n                e.setAttribute(\"nonce\", nonce);\r\n            }\r\n            document.head.appendChild(e);\r\n            rootStylesheet = e.sheet;\r\n        }\r\n        return rootStylesheet;\r\n    }\r\n    else {\r\n        // TODO use createElementNS ?\r\n        var e = document.createElement(\"style\");\r\n        e.type = \"text/css\";\r\n        if (nonce != \"\") {\r\n            e.setAttribute(\"nonce\", nonce);\r\n        }\r\n        element.appendChild(e);\r\n        return e.sheet;\r\n    }\r\n}\r\n/**\r\n * [makeStylesheet description]\r\n *\r\n * @ignore Exclude from docs\r\n * @todo Description\r\n * @param selector  [description]\r\n * @return [description]\r\n */\r\nfunction appendStylesheet(root, selector) {\r\n    var index = root.cssRules.length;\r\n    root.insertRule(selector + \"{}\", index);\r\n    return root.cssRules[index];\r\n}\r\n/**\r\n * Defines a class for a CSS rule.\r\n *\r\n * Can be used to dynamically add CSS to the document.\r\n */\r\nvar StyleRule = /** @class */ (function (_super) {\r\n    __extends(StyleRule, _super);\r\n    /**\r\n     * Constructor.\r\n     *\r\n     * @param selector  CSS selector\r\n     * @param styles    An object of style attribute - value pairs\r\n     */\r\n    function StyleRule(element, selector, styles, nonce) {\r\n        if (nonce === void 0) { nonce = \"\"; }\r\n        var _this = _super.call(this) || this;\r\n        Object.defineProperty(_this, \"_root\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        /**\r\n         * CSS rule.\r\n         */\r\n        Object.defineProperty(_this, \"_rule\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        _this._root = getStylesheet(element, nonce);\r\n        try {\r\n            _this._rule = appendStylesheet(_this._root, selector);\r\n            $object.each(styles, function (key, value) {\r\n                _this.setStyle(key, value);\r\n            });\r\n        }\r\n        catch (err) {\r\n            // Create an empty rule on failed selectors\r\n            _this._rule = new CSSStyleRule();\r\n        }\r\n        return _this;\r\n    }\r\n    Object.defineProperty(StyleRule.prototype, \"selector\", {\r\n        /**\r\n         * @return CSS selector\r\n         */\r\n        get: function () {\r\n            return this._rule.selectorText;\r\n        },\r\n        /**\r\n         * A CSS selector text.\r\n         *\r\n         * E.g.: `.myClass p`\r\n         *\r\n         * @param selector  CSS selector\r\n         */\r\n        set: function (selector) {\r\n            this._rule.selectorText = selector;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    // TODO test this\r\n    Object.defineProperty(StyleRule.prototype, \"_dispose\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            // TODO a bit hacky\r\n            var index = $array.indexOf(this._root.cssRules, this._rule);\r\n            if (index === -1) {\r\n                throw new Error(\"Could not dispose StyleRule\");\r\n            }\r\n            else {\r\n                // TODO if it's empty remove it from the DOM ?\r\n                this._root.deleteRule(index);\r\n            }\r\n        }\r\n    });\r\n    /**\r\n     * Sets the same style properties with browser-specific prefixes.\r\n     *\r\n     * @param name   Attribute name\r\n     * @param value  Attribute value\r\n     */\r\n    Object.defineProperty(StyleRule.prototype, \"_setVendorPrefixName\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (name, value) {\r\n            var style = this._rule.style;\r\n            style.setProperty(\"-webkit-\" + name, value, \"\");\r\n            style.setProperty(\"-moz-\" + name, value, \"\");\r\n            style.setProperty(\"-ms-\" + name, value, \"\");\r\n            style.setProperty(\"-o-\" + name, value, \"\");\r\n            style.setProperty(name, value, \"\");\r\n        }\r\n    });\r\n    /**\r\n     * Sets a value for specific style attribute.\r\n     *\r\n     * @param name   Attribute\r\n     * @param value  Value\r\n     */\r\n    Object.defineProperty(StyleRule.prototype, \"setStyle\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (name, value) {\r\n            if (name === \"transition\") {\r\n                this._setVendorPrefixName(name, value);\r\n            }\r\n            else {\r\n                this._rule.style.setProperty(name, value, \"\");\r\n            }\r\n        }\r\n    });\r\n    return StyleRule;\r\n}(DisposerClass));\r\nexport { StyleRule };\r\n/**\r\n * Defines a class for an entire CSS style sheet.\r\n *\r\n * Can be used to dynamically add CSS to the document.\r\n */\r\nvar StyleSheet = /** @class */ (function (_super) {\r\n    __extends(StyleSheet, _super);\r\n    /**\r\n     * Constructor.\r\n     *\r\n     * @param text  CSS stylesheet\r\n     */\r\n    function StyleSheet(element, text, nonce) {\r\n        if (nonce === void 0) { nonce = \"\"; }\r\n        var _this = _super.call(this) || this;\r\n        Object.defineProperty(_this, \"_element\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        _this._element = createStylesheet(element, text, nonce);\r\n        return _this;\r\n    }\r\n    Object.defineProperty(StyleSheet.prototype, \"_dispose\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            if (this._element.parentNode) {\r\n                this._element.parentNode.removeChild(this._element);\r\n            }\r\n        }\r\n    });\r\n    return StyleSheet;\r\n}(DisposerClass));\r\nexport { StyleSheet };\r\n/**\r\n * Adds a class name to an HTML or SVG element.\r\n *\r\n * @ignore Exclude from docs\r\n * @param element    Element\r\n * @param className  Class name to add\r\n */\r\nexport function addClass(element, className) {\r\n    if (!element) {\r\n        return;\r\n    }\r\n    if (element.classList) {\r\n        var classes = className.split(\" \");\r\n        $array.each(classes, function (name) {\r\n            element.classList.add(name);\r\n        });\r\n    }\r\n    else {\r\n        var currentClassName = element.getAttribute(\"class\");\r\n        if (currentClassName) {\r\n            element.setAttribute(\"class\", currentClassName.split(\" \").filter(function (item) {\r\n                return item !== className;\r\n            }).join(\" \") + \" \" + className);\r\n        }\r\n        else {\r\n            element.setAttribute(\"class\", className);\r\n        }\r\n    }\r\n}\r\n/**\r\n * Removes a class name from an HTML or SVG element.\r\n *\r\n * @ignore Exclude from docs\r\n * @param element    Element\r\n * @param className  Class name to add\r\n */\r\nexport function removeClass(element, className) {\r\n    if (!element) {\r\n        return;\r\n    }\r\n    if (element.classList) {\r\n        element.classList.remove(className);\r\n    }\r\n    else {\r\n        var currentClassName = element.getAttribute(\"class\");\r\n        if (currentClassName) {\r\n            element.setAttribute(\"class\", currentClassName.split(\" \").filter(function (item) {\r\n                return item !== className;\r\n            }).join(\" \"));\r\n        }\r\n    }\r\n}\r\n// /**\r\n//  * Applies a set of styles to an element. Stores the original styles so they\r\n//  * can be restored later.\r\n//  *\r\n//  * @ignore\r\n//  * @param io      Element\r\n//   */\r\n// export function prepElementForDrag(dom: HTMLElement): void {\r\n// \t// @todo: save current values\r\n// \t// Define possible props\r\n// \tlet props = [\r\n// \t\t\"touchAction\", \"webkitTouchAction\", \"MozTouchAction\", \"MSTouchAction\", \"msTouchAction\", \"oTouchAction\",\r\n// \t\t\"userSelect\", \"webkitUserSelect\", \"MozUserSelect\", \"MSUserSelect\", \"msUserSelect\", \"oUserSelect\",\r\n// \t\t\"touchSelect\", \"webkitTouchSelect\", \"MozTouchSelect\", \"MSTouchSelect\", \"msTouchSelect\", \"oTouchSelect\",\r\n// \t\t\"touchCallout\", \"webkitTouchCallout\", \"MozTouchCallout\", \"MSTouchCallout\", \"msTouchCallout\", \"oTouchCallout\",\r\n// \t\t\"contentZooming\", \"webkitContentZooming\", \"MozContentZooming\", \"MSContentZooming\", \"msContentZooming\", \"oContentZooming\",\r\n// \t\t\"userDrag\", \"webkitUserDrag\", \"MozUserDrag\", \"MSUserDrag\", \"msUserDrag\", \"oUserDrag\"\r\n// \t];\r\n// \tfor (let i = 0; i < props.length; i++) {\r\n// \t\tif (props[i] in dom.style) {\r\n// \t\t\tsetStyle(dom, props[i], \"none\");\r\n// \t\t}\r\n// \t}\r\n// \t// Remove iOS-specific selection;\r\n// \tsetStyle(dom, \"tapHighlightColor\", \"rgba(0, 0, 0, 0)\");\r\n// }\r\n// /**\r\n//  * Restores replaced styles\r\n//  *\r\n//  * @ignore\r\n//  * @param  io  Element\r\n//  */\r\n// export function unprepElementForDrag(dom: HTMLElement): void {\r\n// \t// Define possible props\r\n// \tlet props = [\r\n// \t\t\"touchAction\", \"webkitTouchAction\", \"MozTouchAction\", \"MSTouchAction\", \"msTouchAction\", \"oTouchAction\",\r\n// \t\t\"userSelect\", \"webkitUserSelect\", \"MozUserSelect\", \"MSUserSelect\", \"msUserSelect\", \"oUserSelect\",\r\n// \t\t\"touchSelect\", \"webkitTouchSelect\", \"MozTouchSelect\", \"MSTouchSelect\", \"msTouchSelect\", \"oTouchSelect\",\r\n// \t\t\"touchCallout\", \"webkitTouchCallout\", \"MozTouchCallout\", \"MSTouchCallout\", \"msTouchCallout\", \"oTouchCallout\",\r\n// \t\t\"contentZooming\", \"webkitContentZooming\", \"MozContentZooming\", \"MSContentZooming\", \"msContentZooming\", \"oContentZooming\",\r\n// \t\t\"userDrag\", \"webkitUserDrag\", \"MozUserDrag\", \"MSUserDrag\", \"msUserDrag\", \"oUserDrag\"\r\n// \t];\r\n// \tfor (let i = 0; i < props.length; i++) {\r\n// \t\tif (props[i] in dom.style) {\r\n// \t\t\tsetStyle(dom, props[i], \"\");\r\n// \t\t}\r\n// \t}\r\n// \t// Remove iOS-specific selection;\r\n// \tsetStyle(dom, \"tapHighlightColor\", \"\");\r\n// }\r\nexport function iOS() {\r\n    return /apple/i.test(navigator.vendor) && \"ontouchend\" in document;\r\n}\r\nexport function getSafeResolution() {\r\n    return iOS() ? 1 : undefined;\r\n}\r\nexport function relativeToValue(percent, full) {\r\n    if ($type.isNumber(percent)) {\r\n        return percent;\r\n    }\r\n    else if (percent != null && $type.isNumber(percent.value) && $type.isNumber(full)) {\r\n        return full * percent.value;\r\n    }\r\n    else {\r\n        return 0;\r\n    }\r\n}\r\n/**\r\n * Returns number of decimals\r\n *\r\n * @ignore Exclude from docs\r\n * @param number  Input number\r\n * @return Number of decimals\r\n */\r\nexport function decimalPlaces(number) {\r\n    var match = ('' + number).match(/(?:\\.(\\d+))?(?:[eE]([+-]?\\d+))?$/);\r\n    if (!match) {\r\n        return 0;\r\n    }\r\n    return Math.max(0, (match[1] ? match[1].length : 0) - (match[2] ? +match[2] : 0));\r\n}\r\n/**\r\n * ============================================================================\r\n * STRING FORMATTING FUNCTIONS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Pads a string with additional characters to certain length.\r\n *\r\n * @param value  A numeric value\r\n * @param len    Result string length in characters\r\n * @param char   A character to use for padding\r\n * @return Padded value as string\r\n */\r\nexport function padString(value, len, char) {\r\n    if (len === void 0) { len = 0; }\r\n    if (char === void 0) { char = \"0\"; }\r\n    if (typeof value !== \"string\") {\r\n        value = value.toString();\r\n    }\r\n    return len > value.length ? Array(len - value.length + 1).join(char) + value : value;\r\n}\r\nexport function trimLeft(text) {\r\n    return text.replace(/^[\\s]*/, \"\");\r\n}\r\nexport function trimRight(text) {\r\n    return text.replace(/[\\s]*$/, \"\");\r\n}\r\nexport function trim(text) {\r\n    return trimLeft(trimRight(text));\r\n}\r\n/**\r\n * Tries to determine format type.\r\n *\r\n * @ignore Exclude from docs\r\n * @param format  Format string\r\n * @return Format type (\"string\" | \"number\" | \"date\" | \"duration\")\r\n */\r\nexport function getFormat(format) {\r\n    // Undefined?\r\n    if (typeof format === \"undefined\") {\r\n        return \"string\";\r\n    }\r\n    // Cleanup and lowercase format\r\n    format = format.toLowerCase().replace(/^\\[[^\\]]*\\]/, \"\");\r\n    // Remove style tags\r\n    format = format.replace(/\\[[^\\]]+\\]/, \"\");\r\n    // Trim\r\n    format = format.trim();\r\n    // Check for any explicit format hints (i.e. /Date)\r\n    var hints = format.match(/\\/(date|number|duration)$/);\r\n    if (hints) {\r\n        return hints[1];\r\n    }\r\n    // Check for explicit hints\r\n    if (format === \"number\") {\r\n        return \"number\";\r\n    }\r\n    if (format === \"date\") {\r\n        return \"date\";\r\n    }\r\n    if (format === \"duration\") {\r\n        return \"duration\";\r\n    }\r\n    // Detect number formatting symbols\r\n    if (format.match(/[#0]/)) {\r\n        return \"number\";\r\n    }\r\n    // Detect date formatting symbols\r\n    if (format.match(/[ymwdhnsqaxkzgtei]/)) {\r\n        return \"date\";\r\n    }\r\n    // Nothing? Let's display as string\r\n    return \"string\";\r\n}\r\n/**\r\n * Cleans up format:\r\n * * Strips out formatter hints\r\n *\r\n * @ignore Exclude from docs\r\n * @param format  Format\r\n * @return Cleaned format\r\n */\r\nexport function cleanFormat(format) {\r\n    return format.replace(/\\/(date|number|duration)$/i, \"\");\r\n}\r\n/**\r\n * Strips all tags from the string.\r\n *\r\n * @param text  Source string\r\n * @return String without tags\r\n */\r\nexport function stripTags(text) {\r\n    return text ? text.replace(/<[^>]*>/g, \"\") : text;\r\n}\r\n/**\r\n * Removes new lines and tags from a string.\r\n *\r\n * @param text  String to conver\r\n * @return Converted string\r\n */\r\nexport function plainText(text) {\r\n    return text ? stripTags((\"\" + text).replace(/[\\n\\r]+/g, \". \")) : text;\r\n}\r\n/**\r\n * Escapes string so it can safely be used in a Regex.\r\n *\r\n * @param value  Unsescaped string\r\n * @return Escaped string\r\n */\r\nexport function escapeForRgex(value) {\r\n    return value.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g, '\\\\$&');\r\n}\r\n/**\r\n * ============================================================================\r\n * DATE-RELATED FUNCTIONS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * Returns a year day.\r\n *\r\n * @param date  Date\r\n * @param utc   Assume UTC dates?\r\n * @return Year day\r\n * @todo Account for UTC\r\n */\r\nexport function getYearDay(date, utc) {\r\n    if (utc === void 0) { utc = false; }\r\n    // TODO: utc needed?\r\n    utc;\r\n    var start = new Date(date.getFullYear(), 0, 0);\r\n    var diff = (date.getTime() - start.getTime()) + ((start.getTimezoneOffset() - date.getTimezoneOffset()) * 60 * 1000);\r\n    var oneDay = 1000 * 60 * 60 * 24;\r\n    return Math.floor(diff / oneDay);\r\n}\r\n/**\r\n * Returns week number for a given date.\r\n *\r\n * @param date  Date\r\n * @param utc   Assume UTC dates?\r\n * @return Week number\r\n * @todo Account for UTC\r\n */\r\nexport function getWeek(date, _utc) {\r\n    if (_utc === void 0) { _utc = false; }\r\n    var d = new Date(Date.UTC(date.getFullYear(), date.getMonth(), date.getDate()));\r\n    var day = d.getUTCDay() || 7;\r\n    d.setUTCDate(d.getUTCDate() + 4 - day);\r\n    var firstDay = new Date(Date.UTC(d.getUTCFullYear(), 0, 1));\r\n    return Math.ceil((((d.getTime() - firstDay.getTime()) / 86400000) + 1) / 7);\r\n}\r\n/**\r\n * Returns a week number in the month.\r\n *\r\n * @param date  Source Date\r\n * @param utc   Assume UTC dates?\r\n * @return Week number in month\r\n */\r\nexport function getMonthWeek(date, utc) {\r\n    if (utc === void 0) { utc = false; }\r\n    var firstWeek = getWeek(new Date(date.getFullYear(), date.getMonth(), 1), utc);\r\n    var currentWeek = getWeek(date, utc);\r\n    if (currentWeek == 1) {\r\n        currentWeek = 53;\r\n    }\r\n    return currentWeek - firstWeek + 1;\r\n}\r\n/**\r\n * Returns a year day out of the given week number.\r\n *\r\n * @param week     Week\r\n * @param year     Year\r\n * @param weekday  Weekday\r\n * @param utc      Assume UTC dates\r\n * @return Day in a year\r\n */\r\nexport function getDayFromWeek(week, year, weekday, utc) {\r\n    if (weekday === void 0) { weekday = 1; }\r\n    if (utc === void 0) { utc = false; }\r\n    var date = new Date(year, 0, 4, 0, 0, 0, 0);\r\n    if (utc) {\r\n        date.setUTCFullYear(year);\r\n    }\r\n    var day = week * 7 + weekday - ((date.getDay() || 7) + 3);\r\n    return day;\r\n}\r\n/**\r\n * Returns 12-hour representation out of the 24-hour hours.\r\n *\r\n * @param hours  24-hour number\r\n * @return 12-hour number\r\n */\r\nexport function get12Hours(hours, base) {\r\n    if (hours > 12) {\r\n        hours -= 12;\r\n    }\r\n    else if (hours === 0) {\r\n        hours = 12;\r\n    }\r\n    return base != null ? hours + (base - 1) : hours;\r\n}\r\n/**\r\n * Returns a string name of the time zone.\r\n *\r\n * @param date     Date object\r\n * @param long     Should return long (\"Pacific Standard Time\") or short abbreviation (\"PST\")\r\n * @param savings  Include information if it's in daylight savings mode\r\n * @param utc      Assume UTC dates\r\n * @return Time zone name\r\n */\r\nexport function getTimeZone(date, long, savings, utc) {\r\n    if (long === void 0) { long = false; }\r\n    if (savings === void 0) { savings = false; }\r\n    if (utc === void 0) { utc = false; }\r\n    if (utc) {\r\n        return long ? \"Coordinated Universal Time\" : \"UTC\";\r\n    }\r\n    var wotz = date.toLocaleString(\"UTC\");\r\n    var wtz = date.toLocaleString(\"UTC\", { timeZoneName: long ? \"long\" : \"short\" }).substr(wotz.length);\r\n    //wtz = wtz.replace(/[+-]+[0-9]+$/, \"\");\r\n    if (savings === false) {\r\n        wtz = wtz.replace(/ (standard|daylight|summer|winter) /i, \" \");\r\n    }\r\n    return wtz;\r\n}\r\nexport function getTimezoneOffset(timezone) {\r\n    var date = new Date(Date.UTC(2012, 0, 1, 0, 0, 0, 0));\r\n    var utcDate = new Date(date.toLocaleString('en-US', { timeZone: 'UTC' }));\r\n    var tzDate = new Date(date.toLocaleString('en-US', { timeZone: timezone }));\r\n    return (tzDate.getTime() - utcDate.getTime()) / 6e4 * -1;\r\n}\r\nexport function capitalizeFirst(text) {\r\n    return text.charAt(0).toUpperCase() + text.slice(1);\r\n}\r\n/**\r\n * The functions below are taken and adapted from Garry Tan's blog post:\r\n * http://axonflux.com/handy-rgb-to-hsl-and-rgb-to-hsv-color-model-c\r\n *\r\n * The further attributions go mjijackson.com, which now seems to be defunct.\r\n */\r\n/**\r\n * Converts an HSL color value to RGB. Conversion formula\r\n * adapted from http://en.wikipedia.org/wiki/HSL_color_space.\r\n * Assumes h, s, and l are contained in the set [0, 1] and\r\n * returns r, g, and b in the set [0, 255].\r\n *\r\n * Function adapted from:\r\n * http://axonflux.com/handy-rgb-to-hsl-and-rgb-to-hsv-color-model-c\r\n *\r\n * @ignore Exclude from docs\r\n * @param h       The hue\r\n * @param s       The saturation\r\n * @param l       The lightness\r\n * @return The RGB representation\r\n */\r\nexport function hslToRgb(color) {\r\n    var r, g, b;\r\n    var h = color.h;\r\n    var s = color.s;\r\n    var l = color.l;\r\n    if (s == 0) {\r\n        r = g = b = l; // achromatic\r\n    }\r\n    else {\r\n        var hue2rgb = function hue2rgb(p, q, t) {\r\n            if (t < 0) {\r\n                t += 1;\r\n            }\r\n            if (t > 1) {\r\n                t -= 1;\r\n            }\r\n            if (t < 1 / 6) {\r\n                return p + (q - p) * 6 * t;\r\n            }\r\n            if (t < 1 / 2) {\r\n                return q;\r\n            }\r\n            if (t < 2 / 3) {\r\n                return p + (q - p) * (2 / 3 - t) * 6;\r\n            }\r\n            return p;\r\n        };\r\n        var q = l < 0.5 ? l * (1 + s) : l + s - l * s;\r\n        var p = 2 * l - q;\r\n        r = hue2rgb(p, q, h + 1 / 3);\r\n        g = hue2rgb(p, q, h);\r\n        b = hue2rgb(p, q, h - 1 / 3);\r\n    }\r\n    return {\r\n        r: Math.round(r * 255),\r\n        g: Math.round(g * 255),\r\n        b: Math.round(b * 255)\r\n    };\r\n}\r\n/**\r\n * Converts an RGB color value to HSL. Conversion formula\r\n * adapted from http://en.wikipedia.org/wiki/HSL_color_space.\r\n * Assumes r, g, and b are contained in the set [0, 255] and\r\n * returns h, s, and l in the set [0, 1].\r\n *\r\n * Function adapted from:\r\n * http://axonflux.com/handy-rgb-to-hsl-and-rgb-to-hsv-color-model-c\r\n *\r\n * @ignore Exclude from docs\r\n * @param r       The red color value\r\n * @param g       The green color value\r\n * @param b       The blue color value\r\n * @return The HSL representation\r\n */\r\nexport function rgbToHsl(color) {\r\n    var r = color.r / 255;\r\n    var g = color.g / 255;\r\n    var b = color.b / 255;\r\n    var max = Math.max(r, g, b);\r\n    var min = Math.min(r, g, b);\r\n    var h = 0;\r\n    var s = 0;\r\n    var l = (max + min) / 2;\r\n    if (max === min) {\r\n        h = s = 0; // achromatic\r\n    }\r\n    else {\r\n        var d = max - min;\r\n        s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\r\n        switch (max) {\r\n            case r:\r\n                h = (g - b) / d + (g < b ? 6 : 0);\r\n                break;\r\n            case g:\r\n                h = (b - r) / d + 2;\r\n                break;\r\n            case b:\r\n                h = (r - g) / d + 4;\r\n                break;\r\n        }\r\n        h /= 6;\r\n    }\r\n    return {\r\n        h: h,\r\n        s: s,\r\n        l: l\r\n    };\r\n}\r\n/**\r\n * Returns a color that is `percent` brighter than the reference color.\r\n *\r\n * @ignore Exclude from docs\r\n * @param color    Reference color\r\n * @param percent  Brightness percent\r\n * @return Hex code of the new color\r\n */\r\nexport function lighten(rgb, percent) {\r\n    if (rgb) {\r\n        return {\r\n            r: Math.max(0, Math.min(255, rgb.r + getLightnessStep(rgb.r, percent))),\r\n            g: Math.max(0, Math.min(255, rgb.g + getLightnessStep(rgb.g, percent))),\r\n            b: Math.max(0, Math.min(255, rgb.b + getLightnessStep(rgb.b, percent))),\r\n            a: rgb.a\r\n        };\r\n    }\r\n    else {\r\n        // TODO is this correct ?\r\n        return rgb;\r\n    }\r\n}\r\n;\r\n/**\r\n * Gets lightness step.\r\n *\r\n * @ignore Exclude from docs\r\n * @param value    Value\r\n * @param percent  Percent\r\n * @return Step\r\n */\r\nexport function getLightnessStep(value, percent) {\r\n    var base = percent > 0 ? 255 - value : value;\r\n    return Math.round(base * percent);\r\n}\r\n/**\r\n * Returns a color that is `percent` brighter than the source `color`.\r\n *\r\n * @ignore Exclude from docs\r\n * @param color    Source color\r\n * @param percent  Brightness percent\r\n * @return New color\r\n */\r\nexport function brighten(rgb, percent) {\r\n    if (rgb) {\r\n        var base = Math.min(Math.max(rgb.r, rgb.g, rgb.b), 230);\r\n        //let base = Math.max(rgb.r, rgb.g, rgb.b);\r\n        var step = getLightnessStep(base, percent);\r\n        return {\r\n            r: Math.max(0, Math.min(255, Math.round(rgb.r + step))),\r\n            g: Math.max(0, Math.min(255, Math.round(rgb.g + step))),\r\n            b: Math.max(0, Math.min(255, Math.round(rgb.b + step))),\r\n            a: rgb.a\r\n        };\r\n    }\r\n    else {\r\n        // TODO is this correct ?\r\n        return rgb;\r\n    }\r\n}\r\n;\r\n/**\r\n * Returns brightness step.\r\n *\r\n * @ignore Exclude from docs\r\n * @param value    Value\r\n * @param percent  Percent\r\n * @return Step\r\n */\r\nexport function getBrightnessStep(_value, percent) {\r\n    var base = 255; //percent > 0 ? 255 - value : value;\r\n    return Math.round(base * percent);\r\n}\r\n/**\r\n * Returns `true` if color is \"light\". Useful indetermining which contrasting\r\n * color to use for elements over this color. E.g.: you would want to use\r\n * black text over light background, and vice versa.\r\n *\r\n * @ignore Exclude from docs\r\n * @param color  Source color\r\n * @return Light?\r\n */\r\nexport function isLight(color) {\r\n    return ((color.r * 299) + (color.g * 587) + (color.b * 114)) / 1000 >= 128;\r\n}\r\n/**\r\n * Returns a new [[iRGB]] object based on `rgb` parameter with specific\r\n * saturation applied.\r\n *\r\n * `saturation` can be in the range of 0 (fully desaturated) to 1 (fully\r\n * saturated).\r\n *\r\n * @ignore Exclude from docs\r\n * @param color       Base color\r\n * @param saturation  Saturation (0-1)\r\n * @return New color\r\n */\r\nexport function saturate(rgb, saturation) {\r\n    if (rgb === undefined || saturation == 1) {\r\n        return rgb;\r\n    }\r\n    var hsl = rgbToHsl(rgb);\r\n    hsl.s = saturation;\r\n    return hslToRgb(hsl);\r\n}\r\nexport function alternativeColor(color, lightAlternative, darkAlternative) {\r\n    if (lightAlternative === void 0) { lightAlternative = { r: 255, g: 255, b: 255 }; }\r\n    if (darkAlternative === void 0) { darkAlternative = { r: 255, g: 255, b: 255 }; }\r\n    var light = lightAlternative;\r\n    var dark = darkAlternative;\r\n    if (isLight(darkAlternative)) {\r\n        light = darkAlternative;\r\n        dark = lightAlternative;\r\n    }\r\n    return isLight(color) ? dark : light;\r\n}\r\n/**\r\n * @ignore\r\n * @deprecated\r\n */\r\n// export function unshiftThemeClass(settings: any, themeClass: string) {\r\n// \tlet themeClasses = settings.themeClasses;\r\n// \tif (!themeClasses) {\r\n// \t\tthemeClasses = [];\r\n// \t}\r\n// \tthemeClasses.unshift(themeClass);\r\n// \tsettings.themeClasses = themeClasses;\r\n// }\r\n/**\r\n * @ignore\r\n * @deprecated\r\n */\r\n// export function pushThemeClass(settings: any, themeClass: string) {\r\n// \tlet themeClasses = settings.themeClasses;\r\n// \tif (!themeClasses) {\r\n// \t\tthemeClasses = [];\r\n// \t}\r\n// \tthemeClasses.push(themeClass);\r\n// \tsettings.themeClasses = themeClasses;\r\n// }\r\n/**\r\n * @ignore\r\n */\r\nexport function mergeTags(tags1, tags2) {\r\n    if (!tags1) {\r\n        tags1 = [];\r\n    }\r\n    return __spreadArray(__spreadArray([], __read(tags1), false), __read(tags2), false).filter(function (value, index, self) {\r\n        return self.indexOf(value) === index;\r\n    });\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport function sameBounds(a, b) {\r\n    if (!b) {\r\n        return false;\r\n    }\r\n    if (a.left != b.left) {\r\n        return false;\r\n    }\r\n    if (a.right != b.right) {\r\n        return false;\r\n    }\r\n    if (a.top != b.top) {\r\n        return false;\r\n    }\r\n    if (a.bottom != b.bottom) {\r\n        return false;\r\n    }\r\n    return true;\r\n}\r\n//# sourceMappingURL=Utils.js.map","import { range } from \"./Animation\";\r\nimport * as $utils from \"./Utils\";\r\nimport * as $type from \"./Type\";\r\n/**\r\n * @ignore\r\n */\r\nfunction string2hex(string) {\r\n    //string = cssColorNames[string.toLowerCase()] || string;\r\n    if (string[0] === \"#\") {\r\n        string = string.substr(1);\r\n    }\r\n    if (string.length == 3) {\r\n        string = string[0].repeat(2) + string[1].repeat(2) + string[2].repeat(2);\r\n    }\r\n    return parseInt(string, 16);\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport function rgba2hex(color) {\r\n    color = color.replace(/[ ]/g, \"\");\r\n    // Init\r\n    var matches = color.match(/^rgb\\(([0-9]*),([0-9]*),([0-9]*)\\)/i);\r\n    // Try rgb() format\r\n    if (matches) {\r\n        matches.push(\"1\");\r\n    }\r\n    else {\r\n        matches = color.match(/^rgba\\(([0-9]*),([0-9]*),([0-9]*),([.0-9]*)\\)/i);\r\n        if (!matches) {\r\n            return 0x000000;\r\n        }\r\n    }\r\n    var hex = \"\";\r\n    for (var i = 1; i <= 3; i++) {\r\n        var val = parseInt(matches[i]).toString(16);\r\n        if (val.length == 1) {\r\n            val = \"0\" + val;\r\n        }\r\n        hex += val;\r\n    }\r\n    return string2hex(hex);\r\n}\r\n/**\r\n * Returns a new [[Color]] object base on input.\r\n *\r\n * Accepts parameters in CSS hex or rgb/rtba strings, or hex numbers.\r\n *\r\n * * `\"#f00\"`\r\n * * `\"#ff0000\"`\r\n * * `\"rgb(255, 0, 0)\"`\r\n * * `\"rgba(255, 0, 0, 1)\"`\r\n * * `0xff0000`\r\n *\r\n * @param   input  Input color\r\n * @return         Color\r\n */\r\nexport function color(input) {\r\n    return Color.fromAny(input);\r\n}\r\n/**\r\n * Wherever color needs to be specified in amCharts 5, `Color` object needs to\r\n * be used.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/colors-gradients-and-patterns/} for more info\r\n * @important\r\n */\r\nvar Color = /** @class */ (function () {\r\n    function Color(hex) {\r\n        Object.defineProperty(this, \"_hex\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        this._hex = hex | 0;\r\n    }\r\n    Object.defineProperty(Color.prototype, \"hex\", {\r\n        /**\r\n         * Color numeric value.\r\n         */\r\n        get: function () {\r\n            return this._hex;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Color.prototype, \"r\", {\r\n        /**\r\n         * Value of color's R channel.\r\n         * @return R value\r\n         */\r\n        get: function () {\r\n            return this._hex >>> 16;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Color.prototype, \"g\", {\r\n        /**\r\n         * Value of color's G channel.\r\n         * @return G value\r\n         */\r\n        get: function () {\r\n            return (this._hex >> 8) & 0xFF;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Color.prototype, \"b\", {\r\n        /**\r\n         * Value of color's B channel.\r\n         * @return B value\r\n         */\r\n        get: function () {\r\n            return this._hex & 0xFF;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Returns color CSS representation in form of `rgba(r, g, b, a)` string.\r\n     *\r\n     * @param   alpha  Opacity\r\n     * @return         CSS string\r\n     */\r\n    Object.defineProperty(Color.prototype, \"toCSS\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (alpha) {\r\n            if (alpha === void 0) { alpha = 1; }\r\n            return \"rgba(\" + this.r + \", \" + this.g + \", \" + this.b + \", \" + alpha + \")\";\r\n        }\r\n    });\r\n    /**\r\n     * Returns color CSS representation in form of `#rgb` string.\r\n     *\r\n     * @return         CSS string\r\n     */\r\n    Object.defineProperty(Color.prototype, \"toCSSHex\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            return \"#\" + $utils.padString(this.r.toString(16), 2) + $utils.padString(this.g.toString(16), 2) + $utils.padString(this.b.toString(16), 2);\r\n        }\r\n    });\r\n    /**\r\n     * Returns color's HSL info.\r\n     * @param   alpha Opacity\r\n     * @return        HSL info\r\n     */\r\n    Object.defineProperty(Color.prototype, \"toHSL\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (alpha) {\r\n            if (alpha === void 0) { alpha = 1; }\r\n            return $utils.rgbToHsl({\r\n                r: this.r,\r\n                g: this.g,\r\n                b: this.b,\r\n                a: alpha\r\n            });\r\n        }\r\n    });\r\n    /**\r\n     * Converts HSL values into a new [[Color]] object.\r\n     *\r\n     * @param   h H value\r\n     * @param   s S value\r\n     * @param   l L value\r\n     * @return    Color object\r\n     */\r\n    Object.defineProperty(Color, \"fromHSL\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (h, s, l) {\r\n            var rgb = $utils.hslToRgb({\r\n                h: h,\r\n                s: s,\r\n                l: l\r\n            });\r\n            return this.fromRGB(rgb.r, rgb.g, rgb.b);\r\n        }\r\n    });\r\n    Object.defineProperty(Color.prototype, \"toString\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            return this.toCSSHex();\r\n        }\r\n    });\r\n    /**\r\n     * Converts hex number into a new [[Color]] object.\r\n     *\r\n     * ```TypeScript\r\n     * Color.fromHex(0xff0000) // red\r\n     * ```\r\n     * ```JavaScript\r\n     * Color.fromHex(0xff0000) // red\r\n     * ```\r\n     *\r\n     * @param   hex  Hex color\r\n     * @return       Color\r\n     */\r\n    Object.defineProperty(Color, \"fromHex\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (hex) {\r\n            return new Color(hex);\r\n        }\r\n    });\r\n    /**\r\n     * Converts RGB values to a new [[Color]] object.\r\n     *\r\n     * @param   r  R value\r\n     * @param   g  G value\r\n     * @param   b  B value\r\n     * @return     Color\r\n     */\r\n    Object.defineProperty(Color, \"fromRGB\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (r, g, b) {\r\n            return new Color((b | 0) + (g << 8) + (r << 16));\r\n        }\r\n    });\r\n    /**\r\n     * Converts RGB string to a new [[Color]] object.\r\n     *\r\n     * ```TypeScript\r\n     * Color.fromString(\"#ff0000\") // red\r\n     * ```\r\n     * ```JavaScript\r\n     * Color.fromString(\"#ff0000\") // red\r\n     * ```\r\n     *\r\n     * @param   s  RGB string\r\n     * @return     Color\r\n     */\r\n    Object.defineProperty(Color, \"fromString\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (s) {\r\n            return new Color(string2hex(s));\r\n        }\r\n    });\r\n    /**\r\n     * Converts CSS rgba() syntax to a new [[Color]] object.\r\n     *\r\n     * ```TypeScript\r\n     * Color.fromCSS(\"rgba(255, 0, 0, 1)\") // red\r\n     * ```\r\n     * ```JavaScript\r\n     * Color.fromCSS(\"rgba(255, 0, 0, 1)\") // red\r\n     * ```\r\n     *\r\n     * @param  {string} s [description]\r\n     * @return {Color}    [description]\r\n     */\r\n    Object.defineProperty(Color, \"fromCSS\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (s) {\r\n            return new Color(rgba2hex(s));\r\n        }\r\n    });\r\n    /**\r\n     * Convert to color from virtually anything.\r\n     *\r\n     * Will throw an exception if unable to resolve the color.\r\n     *\r\n     * @param   s  Source\r\n     * @return     Color\r\n     */\r\n    Object.defineProperty(Color, \"fromAny\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (s) {\r\n            if ($type.isString(s)) {\r\n                if (s[0] == \"#\") {\r\n                    return Color.fromString(s);\r\n                }\r\n                else if (s.substr(0, 3) == \"rgb\") {\r\n                    return Color.fromCSS(s);\r\n                }\r\n            }\r\n            else if ($type.isNumber(s)) {\r\n                return Color.fromHex(s);\r\n            }\r\n            else if (s instanceof Color) {\r\n                return Color.fromHex(s.hex);\r\n            }\r\n            throw new Error(\"Unknown color syntax: \" + s);\r\n        }\r\n    });\r\n    /**\r\n     * Returns a new [[Color]] object based on either `lightAlternative` or\r\n     * `darkAlternative` depending on which one is more contrasting with\r\n     * the `color`.\r\n     *\r\n     * @param   color             Reference color\r\n     * @param   lightAlternative  Light color\r\n     * @param   darkAlternative   Dark color\r\n     * @return                    Alternative color\r\n     */\r\n    Object.defineProperty(Color, \"alternative\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (color, lightAlternative, darkAlternative) {\r\n            var rgb = $utils.alternativeColor({ r: color.r, g: color.g, b: color.b }, lightAlternative ? { r: lightAlternative.r, g: lightAlternative.g, b: lightAlternative.b } : undefined, darkAlternative ? { r: darkAlternative.r, g: darkAlternative.g, b: darkAlternative.b } : undefined);\r\n            return this.fromRGB(rgb.r, rgb.g, rgb.b);\r\n        }\r\n    });\r\n    /**\r\n     * Returns an intermediate Color between two reference colors depending on\r\n     * the progress (`diff`) between the two.\r\n     *\r\n     * @param   diff  Progress\r\n     * @param   from  Source color\r\n     * @param   to    Target color\r\n     * @param   mode  Interpolation mode\r\n     * @return        Color\r\n     */\r\n    Object.defineProperty(Color, \"interpolate\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (diff, from, to, mode) {\r\n            if (mode === void 0) { mode = \"rgb\"; }\r\n            if (mode == \"hsl\") {\r\n                var fromHSL = from.toHSL();\r\n                var toHSL = to.toHSL();\r\n                return Color.fromHSL(range(diff, fromHSL.h, toHSL.h), range(diff, fromHSL.s, toHSL.s), range(diff, fromHSL.l, toHSL.l));\r\n            }\r\n            else {\r\n                return Color.fromRGB(range(diff, from.r, to.r), range(diff, from.g, to.g), range(diff, from.b, to.b));\r\n            }\r\n        }\r\n    });\r\n    /**\r\n     * Returns a new [[Color]] lightened by `percent` value.\r\n     *\r\n     * Use negative value to darken the color.\r\n     *\r\n     * @param   color    Source color\r\n     * @param   percent  Percent\r\n     * @return           New color\r\n     */\r\n    Object.defineProperty(Color, \"lighten\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (color, percent) {\r\n            var rgb = $utils.lighten({ r: color.r, g: color.g, b: color.b }, percent);\r\n            return Color.fromRGB(rgb.r, rgb.g, rgb.b);\r\n        }\r\n    });\r\n    /**\r\n     * Returns a new [[Color]] brightened by `percent` value.\r\n     *\r\n     * Use negative value to dim the color.\r\n     *\r\n     * @param   color    Source color\r\n     * @param   percent  Percent\r\n     * @return           New color\r\n     */\r\n    Object.defineProperty(Color, \"brighten\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (color, percent) {\r\n            var rgb = $utils.brighten({ r: color.r, g: color.g, b: color.b }, percent);\r\n            return Color.fromRGB(rgb.r, rgb.g, rgb.b);\r\n        }\r\n    });\r\n    /**\r\n     * Returns a new [[Color]] saturated by `percent` value.\r\n     *\r\n     * Value range is between `0` (fully desaturated), to `1` (full color).\r\n     *\r\n     * @param   color    Source color\r\n     * @param   percent  Percent\r\n     * @return           New color\r\n     */\r\n    Object.defineProperty(Color, \"saturate\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (color, percent) {\r\n            var rgb = $utils.saturate({ r: color.r, g: color.g, b: color.b }, percent);\r\n            return Color.fromRGB(rgb.r, rgb.g, rgb.b);\r\n        }\r\n    });\r\n    return Color;\r\n}());\r\nexport { Color };\r\n//# sourceMappingURL=Color.js.map","import { __awaiter, __generator } from \"tslib\";\r\nimport { Percent } from \"./Percent\";\r\nimport { Color } from \"./Color\";\r\nimport { EventDispatcher } from \"./EventDispatcher\";\r\nimport * as $object from \"./Object\";\r\n/**\r\n * @ignore\r\n */\r\nexport function waitForAnimations(animations) {\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        var promises_1;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    if (!(animations !== undefined)) return [3 /*break*/, 2];\r\n                    promises_1 = [];\r\n                    $object.each(animations, function (_, animation) {\r\n                        promises_1.push(animation.waitForStop());\r\n                    });\r\n                    return [4 /*yield*/, Promise.all(promises_1)];\r\n                case 1:\r\n                    _a.sent();\r\n                    _a.label = 2;\r\n                case 2: return [2 /*return*/];\r\n            }\r\n        });\r\n    });\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport function normalize(value, min, max) {\r\n    if (min === max) {\r\n        return 0;\r\n    }\r\n    else {\r\n        return Math.min(Math.max((value - min) * (1 / (max - min)), 0), 1);\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport function range(diff, from, to) {\r\n    return from + (diff * (to - from));\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport function defaultInterpolate(diff, from, to) {\r\n    if (diff >= 1) {\r\n        return to;\r\n    }\r\n    else {\r\n        return from;\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport function percentInterpolate(diff, from, to) {\r\n    return new Percent(range(diff, from.percent, to.percent));\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport function colorInterpolate(diff, from, to) {\r\n    return Color.interpolate(diff, from, to);\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport function getInterpolate(from, to) {\r\n    if (typeof from === \"number\" && typeof to === \"number\") {\r\n        return range;\r\n    }\r\n    if (from instanceof Percent && to instanceof Percent) {\r\n        return percentInterpolate;\r\n    }\r\n    if (from instanceof Color && to instanceof Color) {\r\n        return colorInterpolate;\r\n    }\r\n    return defaultInterpolate;\r\n}\r\n/**\r\n * @ignore\r\n */\r\nvar AnimationTime = /** @class */ (function () {\r\n    function AnimationTime(entity, duration) {\r\n        Object.defineProperty(this, \"_entity\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_duration\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_playingDuration\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: null\r\n        });\r\n        Object.defineProperty(this, \"_startingTime\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: null\r\n        });\r\n        Object.defineProperty(this, \"_current\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"_from\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"_to\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"events\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: new EventDispatcher()\r\n        });\r\n        Object.defineProperty(this, \"easing\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        this._entity = entity;\r\n        this._duration = duration;\r\n    }\r\n    Object.defineProperty(AnimationTime.prototype, \"_stopEvent\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            var type = \"stopped\";\r\n            if (this.events.isEnabled(type)) {\r\n                this.events.dispatch(type, { type: type, target: this });\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(AnimationTime.prototype, \"_runAnimation\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (currentTime) {\r\n            if (this._playingDuration !== null) {\r\n                if (this._startingTime === null) {\r\n                    this._startingTime = currentTime;\r\n                    return true;\r\n                }\r\n                else {\r\n                    var diff = (currentTime - this._startingTime) / this._playingDuration;\r\n                    if (diff >= 1) {\r\n                        this._playingDuration = null;\r\n                        this._startingTime = null;\r\n                        this._from = this._to;\r\n                        this._current = this._to;\r\n                        this._entity.markDirty();\r\n                        this._stopEvent();\r\n                        var type = \"ended\";\r\n                        if (this.events.isEnabled(type)) {\r\n                            this.events.dispatch(type, { type: type, target: this });\r\n                        }\r\n                        return false;\r\n                    }\r\n                    else {\r\n                        this._current = range(diff, this._from, this._to);\r\n                        this._entity.markDirty();\r\n                        var type = \"progress\";\r\n                        if (this.events.isEnabled(type)) {\r\n                            this.events.dispatch(type, { type: type, target: this, progress: diff });\r\n                        }\r\n                        return true;\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                return false;\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(AnimationTime.prototype, \"_play\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            this._from = this._current;\r\n            if (this._playingDuration === null) {\r\n                this._entity._root._addAnimation(this);\r\n                var type = \"started\";\r\n                if (this.events.isEnabled(type)) {\r\n                    this.events.dispatch(type, { type: type, target: this });\r\n                }\r\n            }\r\n            else {\r\n                this._startingTime = null;\r\n            }\r\n            this._playingDuration = Math.abs(this._to - this._from) * this._duration;\r\n        }\r\n    });\r\n    Object.defineProperty(AnimationTime.prototype, \"duration\", {\r\n        get: function () {\r\n            return this._duration;\r\n        },\r\n        set: function (value) {\r\n            if (this._duration !== value) {\r\n                this._duration = value;\r\n                if (value === 0) {\r\n                    this.jumpTo(this._to);\r\n                }\r\n                else if (this._current !== this._to) {\r\n                    this._play();\r\n                }\r\n            }\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AnimationTime.prototype, \"current\", {\r\n        get: function () {\r\n            if (this.easing) {\r\n                return this.easing(this._current);\r\n            }\r\n            else {\r\n                return this._current;\r\n            }\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(AnimationTime.prototype, \"stop\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            this.jumpTo(this._current);\r\n        }\r\n    });\r\n    Object.defineProperty(AnimationTime.prototype, \"jumpTo\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (value) {\r\n            if (this._current !== value) {\r\n                this._entity.markDirty();\r\n            }\r\n            if (this._playingDuration !== null) {\r\n                this._stopEvent();\r\n            }\r\n            this._playingDuration = null;\r\n            this._startingTime = null;\r\n            this._current = value;\r\n            this._from = value;\r\n            this._to = value;\r\n        }\r\n    });\r\n    Object.defineProperty(AnimationTime.prototype, \"tweenTo\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (value) {\r\n            if (this._current === value || this._duration === 0) {\r\n                this.jumpTo(value);\r\n            }\r\n            else {\r\n                if (this._to !== value) {\r\n                    this._to = value;\r\n                    this._play();\r\n                }\r\n            }\r\n        }\r\n    });\r\n    return AnimationTime;\r\n}());\r\nexport { AnimationTime };\r\n/*export class AnimationValue extends AnimationTime {\r\n    public _min: number;\r\n    public _max: number;\r\n\r\n    constructor(entity: Entity, duration: number, min: number, max: number) {\r\n        super(entity, duration);\r\n        this._min = min;\r\n        this._max = max;\r\n    }\r\n\r\n    public get min(): number {\r\n        return this._min;\r\n    }\r\n\r\n    public set min(value: number) {\r\n        if (this._min !== value) {\r\n            this._min = value;\r\n            this._entity.markDirty();\r\n        }\r\n    }\r\n\r\n    public get max(): number {\r\n        return this._max;\r\n    }\r\n\r\n    public set max(value: number) {\r\n        if (this._max !== value) {\r\n            this._max = value;\r\n            this._entity.markDirty();\r\n        }\r\n    }\r\n\r\n    public currentValue(): number {\r\n        return range(super.currentTime(), this._min, this._max);\r\n    }\r\n\r\n    public jumpToValue(value: number) {\r\n        super.jumpToTime(normalize(value, this._min, this._max));\r\n    }\r\n\r\n    public tweenToValue(value: number) {\r\n        super.tweenToTime(normalize(value, this._min, this._max));\r\n    }\r\n}\r\n*/\r\n//# sourceMappingURL=Animation.js.map","import { isNumber } from \"./Type\";\r\n/**\r\n * ============================================================================\r\n * CONSTANTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nexport var PI = Math.PI;\r\nexport var HALFPI = PI / 2;\r\nexport var RADIANS = PI / 180;\r\nexport var DEGREES = 180 / PI;\r\n/**\r\n * Rounds the numeric value to whole number or specific precision of set.\r\n *\r\n * @param value      Value\r\n * @param precision  Precision (number of decimal points)\r\n * @param floor  In case value ends with 0.5 and precision is 0, we might need to floor the value instead of ceiling it.\r\n * @return Rounded value\r\n */\r\nexport function round(value, precision, floor) {\r\n    if (!isNumber(precision) || precision <= 0) {\r\n        var rounded = Math.round(value);\r\n        if (floor) {\r\n            if (rounded - value == 0.5) {\r\n                rounded--;\r\n            }\r\n        }\r\n        return rounded;\r\n    }\r\n    else {\r\n        var d = Math.pow(10, precision);\r\n        return Math.round(value * d) / d;\r\n    }\r\n}\r\n/**\r\n * Ceils the numeric value to whole number or specific precision of set.\r\n *\r\n * @param value      Value\r\n * @param precision  Precision (number of decimal points)\r\n * @return Rounded value\r\n */\r\nexport function ceil(value, precision) {\r\n    if (!isNumber(precision) || precision <= 0) {\r\n        return Math.ceil(value);\r\n    }\r\n    else {\r\n        var d = Math.pow(10, precision);\r\n        return Math.ceil(value * d) / d;\r\n    }\r\n}\r\n/**\r\n * [getCubicControlPointA description]\r\n *\r\n * @ignore Exclude from docs\r\n * @todo Description\r\n * @param p0        [description]\r\n * @param p1        [description]\r\n * @param p2        [description]\r\n * @param p3        [description]\r\n * @param tensionX  [description]\r\n * @param tensionY  [description]\r\n * @return [description]\r\n */\r\nexport function getCubicControlPointA(p0, p1, p2, tensionX, tensionY) {\r\n    return { x: ((-p0.x + p1.x / tensionX + p2.x) * tensionX), y: ((-p0.y + p1.y / tensionY + p2.y) * tensionY) };\r\n}\r\n/**\r\n * [getCubicControlPointB description]\r\n *\r\n * @ignore Exclude from docs\r\n * @todo Description\r\n * @param p0        [description]\r\n * @param p1        [description]\r\n * @param p2        [description]\r\n * @param p3        [description]\r\n * @param tensionX  [description]\r\n * @param tensionY  [description]\r\n * @return [description]\r\n */\r\nexport function getCubicControlPointB(p1, p2, p3, tensionX, tensionY) {\r\n    return { x: ((p1.x + p2.x / tensionX - p3.x) * tensionX), y: ((p1.y + p2.y / tensionY - p3.y) * tensionY) };\r\n}\r\nexport function fitToRange(value, min, max) {\r\n    return Math.min(Math.max(value, min), max);\r\n}\r\n/**\r\n * Returns sine of an angle specified in degrees.\r\n *\r\n * @param value  Value\r\n * @return Sine\r\n */\r\nexport function sin(angle) {\r\n    return Math.sin(RADIANS * angle);\r\n}\r\n/**\r\n * Returns tan of an angle specified in degrees.\r\n *\r\n * @param value  Value\r\n * @return Sine\r\n */\r\nexport function tan(angle) {\r\n    return Math.tan(RADIANS * angle);\r\n}\r\n/**\r\n * Returns cosine of an angle specified in degrees.\r\n *\r\n * @param value  Value\r\n * @return Cosine\r\n */\r\nexport function cos(angle) {\r\n    return Math.cos(RADIANS * angle);\r\n}\r\n// 0 to 360\r\nexport function normalizeAngle(value) {\r\n    value = value % 360;\r\n    if (value < 0) {\r\n        value += 360;\r\n    }\r\n    return value;\r\n}\r\n// TODO this doesn't work properly for skewing, and it's probably broken for rotation too\r\nexport function getArcBounds(cx, cy, startAngle, endAngle, radius) {\r\n    var minX = Number.MAX_VALUE;\r\n    var minY = Number.MAX_VALUE;\r\n    var maxX = -Number.MAX_VALUE;\r\n    var maxY = -Number.MAX_VALUE;\r\n    var bpoints = [];\r\n    bpoints.push(getArcPoint(radius, startAngle));\r\n    bpoints.push(getArcPoint(radius, endAngle));\r\n    var fromAngle = Math.min(Math.floor(startAngle / 90) * 90, Math.floor(endAngle / 90) * 90);\r\n    var toAngle = Math.max(Math.ceil(startAngle / 90) * 90, Math.ceil(endAngle / 90) * 90);\r\n    for (var angle = fromAngle; angle <= toAngle; angle += 90) {\r\n        if (angle >= startAngle && angle <= endAngle) {\r\n            bpoints.push(getArcPoint(radius, angle));\r\n        }\r\n    }\r\n    for (var i = 0; i < bpoints.length; i++) {\r\n        var pt = bpoints[i];\r\n        if (pt.x < minX) {\r\n            minX = pt.x;\r\n        }\r\n        if (pt.y < minY) {\r\n            minY = pt.y;\r\n        }\r\n        if (pt.x > maxX) {\r\n            maxX = pt.x;\r\n        }\r\n        if (pt.y > maxY) {\r\n            maxY = pt.y;\r\n        }\r\n    }\r\n    return ({ left: cx + minX, top: cy + minY, right: cx + maxX, bottom: cy + maxY });\r\n}\r\n/**\r\n * Returns point on arc\r\n *\r\n * @param center point\r\n * @param radius\r\n * @param arc\r\n * @return {boolean}\r\n */\r\nexport function getArcPoint(radius, arc) {\r\n    return ({ x: radius * cos(arc), y: radius * sin(arc) });\r\n}\r\nexport function mergeBounds(bounds) {\r\n    var len = bounds.length;\r\n    if (len > 0) {\r\n        var bound = bounds[0];\r\n        var left = bound.left;\r\n        var top_1 = bound.top;\r\n        var right = bound.right;\r\n        var bottom = bound.bottom;\r\n        if (len > 1) {\r\n            for (var i = 1; i < len; i++) {\r\n                bound = bounds[i];\r\n                left = Math.min(bound.left, left);\r\n                right = Math.max(bound.right, right);\r\n                top_1 = Math.min(bound.top, top_1);\r\n                bottom = Math.max(bound.bottom, bottom);\r\n            }\r\n        }\r\n        return { left: left, right: right, top: top_1, bottom: bottom };\r\n    }\r\n    return { left: 0, right: 0, top: 0, bottom: 0 };\r\n}\r\nexport function fitAngleToRange(value, startAngle, endAngle) {\r\n    if (startAngle > endAngle) {\r\n        var temp = startAngle;\r\n        startAngle = endAngle;\r\n        endAngle = temp;\r\n    }\r\n    value = normalizeAngle(value);\r\n    var count = (startAngle - normalizeAngle(startAngle)) / 360;\r\n    if (value < startAngle) {\r\n        value += 360 * (count + 1);\r\n    }\r\n    var maxEnd = startAngle + (endAngle - startAngle) / 2 + 180;\r\n    var maxStart = startAngle + (endAngle - startAngle) / 2 - 180;\r\n    if (value > endAngle) {\r\n        if (value - 360 > startAngle) {\r\n            value -= 360;\r\n        }\r\n        else {\r\n            if (value < maxEnd) {\r\n                value = endAngle;\r\n            }\r\n            else {\r\n                value = startAngle;\r\n            }\r\n        }\r\n    }\r\n    if (value < startAngle) {\r\n        if (value > maxStart) {\r\n            value = startAngle;\r\n        }\r\n        else {\r\n            value = endAngle;\r\n        }\r\n    }\r\n    return value;\r\n}\r\nexport function inBounds(point, bounds) {\r\n    if (point.x >= bounds.left && point.y >= bounds.top && point.x <= bounds.right && point.y <= bounds.bottom) {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\nexport function getAngle(point1, point2) {\r\n    if (!point2) {\r\n        point2 = { x: point1.x * 2, y: point1.y * 2 };\r\n    }\r\n    var diffX = point2.x - point1.x;\r\n    var diffY = point2.y - point1.y;\r\n    var angle = Math.atan2(diffY, diffX) * DEGREES;\r\n    if (angle < 0) {\r\n        angle += 360;\r\n    }\r\n    return normalizeAngle(angle);\r\n}\r\n/**\r\n * [getPointOnQuadraticCurve description]\r\n *\r\n * @ignore Exclude from docs\r\n * @todo Description\r\n * @param pointA        [description]\r\n * @param pointB        [description]\r\n * @param controlPoint  [description]\r\n * @param position      [description]\r\n * @return [description]\r\n */\r\nexport function getPointOnQuadraticCurve(pointA, pointB, controlPoint, position) {\r\n    var x = (1 - position) * (1 - position) * pointA.x + 2 * (1 - position) * position * controlPoint.x + position * position * pointB.x;\r\n    var y = (1 - position) * (1 - position) * pointA.y + 2 * (1 - position) * position * controlPoint.y + position * position * pointB.y;\r\n    return { x: x, y: y };\r\n}\r\nexport function getPointOnLine(pointA, pointB, position) {\r\n    return { x: pointA.x + (pointB.x - pointA.x) * position, y: pointA.y + (pointB.y - pointA.y) * position };\r\n}\r\n/**\r\n * Returns the closest value from the array of values to the reference value.\r\n *\r\n * @param values  Array of values\r\n * @param value   Reference value\r\n * @return Closes value from the array\r\n */\r\nexport function closest(values, referenceValue) {\r\n    return values.reduce(function (prev, curr) {\r\n        return (Math.abs(curr - referenceValue) < Math.abs(prev - referenceValue) ? curr : prev);\r\n    });\r\n}\r\nexport function boundsOverlap(bounds1, bounds2) {\r\n    return !(bounds1.bottom < bounds2.top || bounds2.bottom < bounds1.top || bounds1.right < bounds2.left || bounds2.right < bounds1.left);\r\n}\r\n//# sourceMappingURL=Math.js.map","/**\r\n * A collection of easing functions\r\n *\r\n * Parts of this collection are taken from D3.js library (https://d3js.org/)\r\n */\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport * as $math from \"./Math\";\r\n/**\r\n * The functions below are from D3.js library (https://d3js.org/)\r\n *\r\n * ----------------------------------------------------------------------------\r\n * Copyright 2017 Mike Bostock\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *\r\n * 1. Redistributions of source code must retain the above copyright notice,\r\n *\tthis list of conditions and the following disclaimer.\r\n *\r\n * 2. Redistributions in binary form must reproduce the above copyright notice,\r\n *\tthis list of conditions and the following disclaimer in the documentation\r\n *\tand/or other materials provided with the distribution.\r\n *\r\n * 3. Neither the name of the copyright holder nor the names of its\r\n *\tcontributors may be used to endorse or promote products derived from this\r\n *\tsoftware without specific prior written permission.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\r\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\r\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE\r\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\r\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\r\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\r\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\r\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\r\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\r\n * POSSIBILITY OF SUCH DAMAGE.\r\n * ----------------------------------------------------------------------------\r\n * @hidden\r\n */\r\n/**\r\n */\r\nexport function linear(t) {\r\n    return t;\r\n}\r\nexport function quad(t) {\r\n    return t * t;\r\n}\r\nexport function cubic(t) {\r\n    return t * t * t;\r\n}\r\nexport function pow(t, e) {\r\n    return Math.pow(t, e);\r\n}\r\nexport function exp(t) {\r\n    return Math.pow(2, 10 * t - 10);\r\n}\r\nexport function sine(t) {\r\n    return 1 - Math.cos(t * $math.HALFPI);\r\n}\r\nexport function circle(t) {\r\n    return 1 - Math.sqrt(1 - t * t);\r\n}\r\n/**\r\n * ============================================================================\r\n * TRANSFORMERS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n */\r\nexport function yoyo(ease) {\r\n    return function (t) {\r\n        if (t < 0.5) {\r\n            return ease(t * 2.0);\r\n        }\r\n        else {\r\n            return ease((1.0 - t) * 2.0);\r\n        }\r\n    };\r\n}\r\nexport function out(ease) {\r\n    return function (t) {\r\n        return 1.0 - ease(1.0 - t);\r\n    };\r\n}\r\nexport function inOut(ease) {\r\n    return function (t) {\r\n        if (t <= 0.5) {\r\n            return ease(t * 2.0) / 2.0;\r\n        }\r\n        else {\r\n            return 1.0 - (ease((1.0 - t) * 2.0) / 2.0);\r\n        }\r\n    };\r\n}\r\n/**\r\n * ============================================================================\r\n * BOUNCE\r\n * ============================================================================\r\n * @hidden\r\n */\r\nvar b1 = 4 / 11, b2 = 6 / 11, b3 = 8 / 11, b4 = 3 / 4, b5 = 9 / 11, b6 = 10 / 11, b7 = 15 / 16, b8 = 21 / 22, b9 = 63 / 64, b0 = 1 / b1 / b1;\r\nexport function bounce(t) {\r\n    return 1 - bounceOut(1 - t);\r\n}\r\n/**\r\n * @ignore\r\n */\r\nfunction bounceOut(t) {\r\n    t = t;\r\n    if (t < b1) {\r\n        return b0 * t * t;\r\n    }\r\n    else if (t < b3) {\r\n        return b0 * (t -= b2) * t + b4;\r\n    }\r\n    else if (t < b6) {\r\n        return b0 * (t -= b5) * t + b7;\r\n    }\r\n    else {\r\n        return b0 * (t -= b8) * t + b9;\r\n    }\r\n}\r\n/**\r\n * ============================================================================\r\n * ELASTIC\r\n * ============================================================================\r\n * @hidden\r\n */\r\n/**\r\n * @ignore\r\n */\r\nvar tau = 2 * Math.PI;\r\n/**\r\n * @ignore\r\n */\r\nvar amplitude = 1;\r\n/**\r\n * @ignore\r\n */\r\nvar period = 0.3 / tau;\r\n/**\r\n * @ignore\r\n */\r\nvar s = Math.asin(1 / amplitude) * period;\r\nexport function elastic(t) {\r\n    var v = t;\r\n    return amplitude * Math.pow(2, 10 * --v) * Math.sin((s - v) / period);\r\n}\r\n//# sourceMappingURL=Ease.js.map","import * as $object from \"./Object\";\r\nimport * as $ease from \"./Ease\";\r\n/**\r\n * An object representing a collection of setting values to apply as required.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/settings/states/} for more info\r\n */\r\nvar State = /** @class */ (function () {\r\n    function State(entity, settings) {\r\n        Object.defineProperty(this, \"_entity\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_settings\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_userSettings\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        this._entity = entity;\r\n        this._settings = settings;\r\n    }\r\n    Object.defineProperty(State.prototype, \"get\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (key, fallback) {\r\n            var value = this._settings[key];\r\n            if (value !== undefined) {\r\n                return value;\r\n            }\r\n            else {\r\n                return fallback;\r\n            }\r\n        }\r\n    });\r\n    /**\r\n     * @ignore\r\n     */\r\n    Object.defineProperty(State.prototype, \"setRaw\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (key, value) {\r\n            this._settings[key] = value;\r\n        }\r\n    });\r\n    /**\r\n     * Sets a setting `value` for the specified `key` to be set when the state\r\n     * is applied.\r\n     *\r\n     * @param   key       Setting key\r\n     * @param   value     Setting value\r\n     * @return            Setting value\r\n     */\r\n    Object.defineProperty(State.prototype, \"set\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (key, value) {\r\n            this._userSettings[key] = true;\r\n            this.setRaw(key, value);\r\n        }\r\n    });\r\n    /**\r\n     * Removes a setting value for the specified `key`.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/settings/} for more info\r\n     * @param   key       Setting key\r\n     */\r\n    Object.defineProperty(State.prototype, \"remove\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (key) {\r\n            delete this._userSettings[key];\r\n            delete this._settings[key];\r\n        }\r\n    });\r\n    /**\r\n     * Sets multiple settings at once.\r\n     *\r\n     * `settings` must be an object with key: value pairs.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/settings/} for more info\r\n     * @param settings Settings\r\n     */\r\n    Object.defineProperty(State.prototype, \"setAll\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (settings) {\r\n            var _this = this;\r\n            $object.keys(settings).forEach(function (key) {\r\n                _this.set(key, settings[key]);\r\n            });\r\n        }\r\n    });\r\n    Object.defineProperty(State.prototype, \"_eachSetting\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (f) {\r\n            $object.each(this._settings, f);\r\n        }\r\n    });\r\n    /**\r\n     * Applies the state to the target element.\r\n     *\r\n     * All setting values are set immediately.\r\n     */\r\n    Object.defineProperty(State.prototype, \"apply\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            var _this = this;\r\n            var seen = {};\r\n            seen[\"stateAnimationEasing\"] = true;\r\n            seen[\"stateAnimationDuration\"] = true;\r\n            var defaultState = this._entity.states.lookup(\"default\");\r\n            this._eachSetting(function (key, value) {\r\n                if (!seen[key]) {\r\n                    seen[key] = true;\r\n                    // save values to default state\r\n                    if (_this !== defaultState) {\r\n                        if (!(key in defaultState._settings)) {\r\n                            defaultState._settings[key] = _this._entity.get(key);\r\n                        }\r\n                    }\r\n                    _this._entity.set(key, value);\r\n                }\r\n            });\r\n        }\r\n    });\r\n    /**\r\n     * Applies the state to the target element.\r\n     *\r\n     * Returns an object representing all [[Animation]] objects created for\r\n     * each setting key transition.\r\n     *\r\n     * @return           Animations\r\n     */\r\n    Object.defineProperty(State.prototype, \"applyAnimate\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (duration) {\r\n            var _this = this;\r\n            if (duration == null) {\r\n                duration = this._settings.stateAnimationDuration;\r\n            }\r\n            if (duration == null) {\r\n                duration = this.get(\"stateAnimationDuration\", this._entity.get(\"stateAnimationDuration\", 0));\r\n            }\r\n            var easing = this._settings.stateAnimationEasing;\r\n            if (easing == null) {\r\n                easing = this.get(\"stateAnimationEasing\", this._entity.get(\"stateAnimationEasing\", $ease.cubic));\r\n            }\r\n            var defaultState = this._entity.states.lookup(\"default\");\r\n            var seen = {};\r\n            seen[\"stateAnimationEasing\"] = true;\r\n            seen[\"stateAnimationDuration\"] = true;\r\n            var animations = {};\r\n            this._eachSetting(function (key, value) {\r\n                if (!seen[key]) {\r\n                    seen[key] = true;\r\n                    // save values to default state\r\n                    if (_this != defaultState) {\r\n                        if (!(key in defaultState._settings)) {\r\n                            defaultState._settings[key] = _this._entity.get(key);\r\n                        }\r\n                    }\r\n                    var animation = _this._entity.animate({\r\n                        key: key,\r\n                        to: value,\r\n                        duration: duration,\r\n                        easing: easing\r\n                    });\r\n                    if (animation) {\r\n                        animations[key] = animation;\r\n                    }\r\n                }\r\n            });\r\n            return animations;\r\n        }\r\n    });\r\n    return State;\r\n}());\r\nexport { State };\r\n/**\r\n * Collection of [[State]] objects for an element.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/settings/states/} for more info\r\n */\r\nvar States = /** @class */ (function () {\r\n    function States(entity) {\r\n        Object.defineProperty(this, \"_states\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(this, \"_entity\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        this._entity = entity;\r\n    }\r\n    /**\r\n     * Checks if a state by `name` exists. Returns it there is one.\r\n     *\r\n     * @param  name  State name\r\n     * @return       State\r\n     */\r\n    Object.defineProperty(States.prototype, \"lookup\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (name) {\r\n            return this._states[name];\r\n        }\r\n    });\r\n    /**\r\n     * Sets supplied `settings` on a state by the `name`.\r\n     *\r\n     * If such state does not yet exists, it is created.\r\n     *\r\n     * @param   name      State name\r\n     * @param   settings  Settings\r\n     * @return            New State\r\n     */\r\n    Object.defineProperty(States.prototype, \"create\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (name, settings) {\r\n            var state = this._states[name];\r\n            if (state) {\r\n                state.setAll(settings);\r\n                return state;\r\n            }\r\n            else {\r\n                var state_1 = new State(this._entity, settings);\r\n                this._states[name] = state_1;\r\n                return state_1;\r\n            }\r\n        }\r\n    });\r\n    /**\r\n     * Removes the state called `name`.\r\n     *\r\n     * @param   name      State name\r\n     */\r\n    Object.defineProperty(States.prototype, \"remove\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (name) {\r\n            delete this._states[name];\r\n        }\r\n    });\r\n    /**\r\n     * Applies a named state to the target element.\r\n     *\r\n     * @param  newState  State name\r\n     */\r\n    Object.defineProperty(States.prototype, \"apply\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (newState) {\r\n            var state = this._states[newState];\r\n            if (state) {\r\n                state.apply();\r\n            }\r\n            this._entity._applyState(newState);\r\n        }\r\n    });\r\n    /**\r\n     * Applies a named state to the element.\r\n     *\r\n     * Returns an object representing all [[Animation]] objects created for\r\n     * each setting key transition.\r\n     *\r\n     * @param   newState  State name\r\n     * @return            Animations\r\n     */\r\n    Object.defineProperty(States.prototype, \"applyAnimate\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (newState, duration) {\r\n            var animations;\r\n            var state = this._states[newState];\r\n            if (state) {\r\n                animations = state.applyAnimate(duration);\r\n            }\r\n            this._entity._applyStateAnimated(newState, duration);\r\n            return animations;\r\n        }\r\n    });\r\n    return States;\r\n}());\r\nexport { States };\r\n//# sourceMappingURL=States.js.map","/**\r\n * @ignore\r\n */\r\nvar Registry = /** @class */ (function () {\r\n    function Registry() {\r\n        /**\r\n         * Currently running version of amCharts.\r\n         */\r\n        Object.defineProperty(this, \"version\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: \"5.2.41\"\r\n        });\r\n        /**\r\n         * List of applied licenses.\r\n         * @ignore\r\n         */\r\n        Object.defineProperty(this, \"licenses\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        /**\r\n         * Entities that have their `id` setting set.\r\n         */\r\n        Object.defineProperty(this, \"entitiesById\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        /**\r\n         * All created [[Root]] elements.\r\n         */\r\n        Object.defineProperty(this, \"rootElements\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n    }\r\n    return Registry;\r\n}());\r\nexport { Registry };\r\n/**\r\n    * @ignore\r\n */\r\nexport var registry = new Registry();\r\n/**\r\n * Adds a license, e.g.:\r\n *\r\n * ```TypeScript\r\n * am5.addLicense(\"xxxxxxxx\");\r\n * ```\r\n * ```JavaScript\r\n * am5.addLicense(\"xxxxxxxx\");\r\n * ```\r\n *\r\n * Multiple licenses can be added to cover for multiple products.\r\n *\r\n * @param  license  License key\r\n */\r\nexport function addLicense(license) {\r\n    registry.licenses.push(license);\r\n}\r\n/**\r\n * Disposes all [[Root]] elements.\r\n */\r\nexport function disposeAllRootElements() {\r\n    var root;\r\n    while (root = registry.rootElements.pop()) {\r\n        root.dispose();\r\n    }\r\n}\r\n//# sourceMappingURL=Registry.js.map","/**\r\n * @ignore\r\n */\r\nexport function compare(left, right) {\r\n    if (left === right) {\r\n        return 0;\r\n    }\r\n    else if (left < right) {\r\n        return -1;\r\n    }\r\n    else {\r\n        return 1;\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport function compareArray(left, right, f) {\r\n    var leftLength = left.length;\r\n    var rightLength = right.length;\r\n    var length = Math.min(leftLength, rightLength);\r\n    for (var i = 0; i < length; ++i) {\r\n        var order = f(left[i], right[i]);\r\n        if (order !== 0) {\r\n            return order;\r\n        }\r\n    }\r\n    return compare(leftLength, rightLength);\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport function reverse(order) {\r\n    if (order < 0) {\r\n        return 1;\r\n    }\r\n    else if (order > 0) {\r\n        return -1;\r\n    }\r\n    else {\r\n        return 0;\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport function compareNumber(a, b) {\r\n    if (a === b) {\r\n        return 0;\r\n    }\r\n    else if (a < b) {\r\n        return -1;\r\n    }\r\n    else {\r\n        return 1;\r\n    }\r\n}\r\n//# sourceMappingURL=Order.js.map","import { __extends, __read, __spreadArray } from \"tslib\";\r\nimport { Disposer } from \"./Disposer\";\r\nimport { EventDispatcher } from \"./EventDispatcher\";\r\nimport { getInterpolate } from \"./Animation\";\r\nimport { States } from \"./States\";\r\nimport { registry } from \"../Registry\";\r\nimport * as $object from \"./Object\";\r\nimport * as $ease from \"./Ease\";\r\nimport * as $array from \"./Array\";\r\nimport * as $order from \"./Order\";\r\n/**\r\n * Allows to dynamically modify setting value of its target element.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/settings/adapters/} for more info\r\n */\r\nvar Adapters = /** @class */ (function () {\r\n    function Adapters(entity) {\r\n        Object.defineProperty(this, \"_entity\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_callbacks\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(this, \"_disabled\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        this._entity = entity;\r\n    }\r\n    /**\r\n     * Add a function (`callback`) that will modify value for setting `key`.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/settings/adapters/} for more info\r\n     */\r\n    Object.defineProperty(Adapters.prototype, \"add\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (key, callback) {\r\n            var _this = this;\r\n            var callbacks = this._callbacks[key];\r\n            if (callbacks === undefined) {\r\n                callbacks = this._callbacks[key] = [];\r\n            }\r\n            callbacks.push(callback);\r\n            this._entity._markDirtyKey(key);\r\n            return new Disposer(function () {\r\n                if ($array.removeFirst(callbacks, callback)) {\r\n                    _this._entity._markDirtyKey(key);\r\n                }\r\n            });\r\n        }\r\n    });\r\n    /**\r\n     * Removes all adapters for the specific key.\r\n     *\r\n     * @since 5.1.0\r\n     */\r\n    Object.defineProperty(Adapters.prototype, \"remove\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (key) {\r\n            var callbacks = this._callbacks[key];\r\n            if (callbacks !== undefined) {\r\n                delete this._callbacks[key];\r\n                if (callbacks.length !== 0) {\r\n                    this._entity._markDirtyKey(key);\r\n                }\r\n            }\r\n        }\r\n    });\r\n    /**\r\n     * Enables (previously disabled) adapters for specific key.\r\n     *\r\n     * @since 5.1.0\r\n     */\r\n    Object.defineProperty(Adapters.prototype, \"enable\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (key) {\r\n            if (this._disabled[key]) {\r\n                delete this._disabled[key];\r\n                this._entity._markDirtyKey(key);\r\n            }\r\n        }\r\n    });\r\n    /**\r\n     * Disables all adapters for specific key.\r\n     *\r\n     * @since 5.1.0\r\n     */\r\n    Object.defineProperty(Adapters.prototype, \"disable\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (key) {\r\n            if (!this._disabled[key]) {\r\n                this._disabled[key] = true;\r\n                this._entity._markDirtyKey(key);\r\n            }\r\n        }\r\n    });\r\n    /**\r\n     * @ignore\r\n     */\r\n    Object.defineProperty(Adapters.prototype, \"fold\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (key, value) {\r\n            if (!this._disabled[key]) {\r\n                var callbacks = this._callbacks[key];\r\n                if (callbacks !== undefined) {\r\n                    for (var i = 0, len = callbacks.length; i < len; ++i) {\r\n                        value = callbacks[i](value, this._entity, key);\r\n                    }\r\n                }\r\n            }\r\n            return value;\r\n        }\r\n    });\r\n    return Adapters;\r\n}());\r\nexport { Adapters };\r\n/**\r\n * Animation object.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/animations/} for more info\r\n */\r\nvar Animation = /** @class */ (function () {\r\n    function Animation(animation, from, to, duration, easing, loops, startingTime) {\r\n        Object.defineProperty(this, \"_animation\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_from\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_to\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_duration\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_easing\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_loops\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_interpolate\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_oldTime\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_time\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"_stopped\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"_playing\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: true\r\n        });\r\n        Object.defineProperty(this, \"events\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: new EventDispatcher()\r\n        });\r\n        this._animation = animation;\r\n        this._from = from;\r\n        this._to = to;\r\n        this._duration = duration;\r\n        this._easing = easing;\r\n        this._loops = loops;\r\n        this._interpolate = getInterpolate(from, to);\r\n        this._oldTime = startingTime;\r\n    }\r\n    Object.defineProperty(Animation.prototype, \"to\", {\r\n        get: function () {\r\n            return this._to;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Animation.prototype, \"from\", {\r\n        get: function () {\r\n            return this._from;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Animation.prototype, \"playing\", {\r\n        get: function () {\r\n            return this._playing;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Animation.prototype, \"stopped\", {\r\n        get: function () {\r\n            return this._stopped;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Animation.prototype, \"stop\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            if (!this._stopped) {\r\n                this._stopped = true;\r\n                this._playing = false;\r\n                if (this.events.isEnabled(\"stopped\")) {\r\n                    this.events.dispatch(\"stopped\", {\r\n                        type: \"stopped\",\r\n                        target: this,\r\n                    });\r\n                }\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Animation.prototype, \"pause\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            this._playing = false;\r\n            this._oldTime = null;\r\n        }\r\n    });\r\n    Object.defineProperty(Animation.prototype, \"play\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            if (!this._stopped && !this._playing) {\r\n                this._playing = true;\r\n                this._animation._startAnimation();\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Animation.prototype, \"percentage\", {\r\n        get: function () {\r\n            return this._time / this._duration;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Animation.prototype, \"waitForStop\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            var _this = this;\r\n            return new Promise(function (resolve, _reject) {\r\n                if (_this._stopped) {\r\n                    resolve();\r\n                }\r\n                else {\r\n                    var listener = function () {\r\n                        stopped_1.dispose();\r\n                        resolve();\r\n                    };\r\n                    var stopped_1 = _this.events.on(\"stopped\", listener);\r\n                }\r\n            });\r\n        }\r\n    });\r\n    Object.defineProperty(Animation.prototype, \"_checkEnded\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            if (this._loops > 1) {\r\n                --this._loops;\r\n                return false;\r\n            }\r\n            else {\r\n                return true;\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Animation.prototype, \"_run\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (currentTime) {\r\n            if (this._oldTime !== null) {\r\n                this._time += currentTime - this._oldTime;\r\n                if (this._time > this._duration) {\r\n                    this._time = this._duration;\r\n                }\r\n            }\r\n            this._oldTime = currentTime;\r\n        }\r\n    });\r\n    Object.defineProperty(Animation.prototype, \"_reset\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (currentTime) {\r\n            this._oldTime = currentTime;\r\n            this._time = 0;\r\n        }\r\n    });\r\n    Object.defineProperty(Animation.prototype, \"_value\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (diff) {\r\n            return this._interpolate(this._easing(diff), this._from, this._to);\r\n        }\r\n    });\r\n    return Animation;\r\n}());\r\nexport { Animation };\r\n/**\r\n * @ignore\r\n */\r\nvar counter = 0;\r\n/**\r\n * Base class for [[Entity]] objects that support Settings.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/settings/} for more info\r\n */\r\nvar Settings = /** @class */ (function () {\r\n    function Settings(settings) {\r\n        /**\r\n         * Unique ID.\r\n         */\r\n        Object.defineProperty(this, \"uid\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: ++counter\r\n        });\r\n        Object.defineProperty(this, \"_settings\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_privateSettings\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(this, \"_settingEvents\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(this, \"_privateSettingEvents\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(this, \"_prevSettings\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(this, \"_prevPrivateSettings\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(this, \"_animatingSettings\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(this, \"_animatingPrivateSettings\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(this, \"_disposed\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        // TODO move this into Entity\r\n        Object.defineProperty(this, \"_userProperties\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        this._settings = settings;\r\n    }\r\n    Object.defineProperty(Settings.prototype, \"_checkDirty\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            var _this = this;\r\n            $object.keys(this._settings).forEach(function (key) {\r\n                _this._userProperties[key] = true;\r\n                _this._markDirtyKey(key);\r\n            });\r\n        }\r\n    });\r\n    /**\r\n     * @ignore\r\n     */\r\n    Object.defineProperty(Settings.prototype, \"resetUserSettings\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            this._userProperties = {};\r\n        }\r\n    });\r\n    Object.defineProperty(Settings.prototype, \"_runAnimation\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (currentTime) {\r\n            var _this = this;\r\n            if (!this.isDisposed()) {\r\n                var playing_1 = false;\r\n                $object.each(this._animatingSettings, function (key, animation) {\r\n                    if (animation._stopped) {\r\n                        _this._stopAnimation(key);\r\n                    }\r\n                    else if (animation._playing) {\r\n                        animation._run(currentTime);\r\n                        var diff = animation.percentage;\r\n                        if (diff >= 1) {\r\n                            if (animation._checkEnded()) {\r\n                                _this.set(key, animation._value(1));\r\n                            }\r\n                            else {\r\n                                playing_1 = true;\r\n                                animation._reset(currentTime);\r\n                                _this._set(key, animation._value(1));\r\n                            }\r\n                        }\r\n                        else {\r\n                            playing_1 = true;\r\n                            _this._set(key, animation._value(diff));\r\n                        }\r\n                    }\r\n                });\r\n                $object.each(this._animatingPrivateSettings, function (key, animation) {\r\n                    if (animation._stopped) {\r\n                        _this._stopAnimationPrivate(key);\r\n                    }\r\n                    else if (animation._playing) {\r\n                        animation._run(currentTime);\r\n                        var diff = animation.percentage;\r\n                        if (diff >= 1) {\r\n                            if (animation._checkEnded()) {\r\n                                _this.setPrivate(key, animation._value(1));\r\n                            }\r\n                            else {\r\n                                playing_1 = true;\r\n                                animation._reset(currentTime);\r\n                                _this._setPrivate(key, animation._value(1));\r\n                            }\r\n                        }\r\n                        else {\r\n                            playing_1 = true;\r\n                            _this._setPrivate(key, animation._value(diff));\r\n                        }\r\n                    }\r\n                });\r\n                return playing_1;\r\n            }\r\n            else {\r\n                return false;\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Settings.prototype, \"_markDirtyKey\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (_key) {\r\n            this.markDirty();\r\n        }\r\n    });\r\n    Object.defineProperty(Settings.prototype, \"_markDirtyPrivateKey\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (_key) {\r\n            this.markDirty();\r\n        }\r\n    });\r\n    /**\r\n     * Sets a callback function to invoke when specific key of settings changes\r\n     * or is set.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/events/#Settings_value_change} for more info\r\n     * @param   key       Settings key\r\n     * @param   callback  Callback\r\n     * @return            Disposer for event\r\n     */\r\n    Object.defineProperty(Settings.prototype, \"on\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (key, callback) {\r\n            var _this = this;\r\n            var events = this._settingEvents[key];\r\n            if (events === undefined) {\r\n                events = this._settingEvents[key] = [];\r\n            }\r\n            events.push(callback);\r\n            return new Disposer(function () {\r\n                $array.removeFirst(events, callback);\r\n                if (events.length === 0) {\r\n                    delete _this._settingEvents[key];\r\n                }\r\n            });\r\n        }\r\n    });\r\n    /**\r\n     * Sets a callback function to invoke when specific key of private settings\r\n     * changes or is set.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/events/#Settings_value_change} for more info\r\n     * @ignore\r\n     * @param   key       Private settings key\r\n     * @param   callback  Callback\r\n     * @return            Disposer for event\r\n     */\r\n    Object.defineProperty(Settings.prototype, \"onPrivate\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (key, callback) {\r\n            var _this = this;\r\n            var events = this._privateSettingEvents[key];\r\n            if (events === undefined) {\r\n                events = this._privateSettingEvents[key] = [];\r\n            }\r\n            events.push(callback);\r\n            return new Disposer(function () {\r\n                $array.removeFirst(events, callback);\r\n                if (events.length === 0) {\r\n                    delete _this._privateSettingEvents[key];\r\n                }\r\n            });\r\n        }\r\n    });\r\n    /**\r\n     * @ignore\r\n     */\r\n    Object.defineProperty(Settings.prototype, \"getRaw\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (key, fallback) {\r\n            var value = this._settings[key];\r\n            if (value !== undefined) {\r\n                return value;\r\n            }\r\n            else {\r\n                return fallback;\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Settings.prototype, \"get\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (key, fallback) {\r\n            return this.getRaw(key, fallback);\r\n        }\r\n    });\r\n    Object.defineProperty(Settings.prototype, \"_sendKeyEvent\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (key, value) {\r\n            var _this = this;\r\n            var events = this._settingEvents[key];\r\n            if (events !== undefined) {\r\n                $array.each(events, function (callback) {\r\n                    callback(value, _this, key);\r\n                });\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Settings.prototype, \"_sendPrivateKeyEvent\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (key, value) {\r\n            var _this = this;\r\n            var events = this._privateSettingEvents[key];\r\n            if (events !== undefined) {\r\n                $array.each(events, function (callback) {\r\n                    callback(value, _this, key);\r\n                });\r\n            }\r\n        }\r\n    });\r\n    /**\r\n     * @ignore\r\n     */\r\n    Object.defineProperty(Settings.prototype, \"_setRaw\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (key, old, value) {\r\n            this._prevSettings[key] = old;\r\n            this._sendKeyEvent(key, value);\r\n        }\r\n    });\r\n    /**\r\n     * @ignore\r\n     */\r\n    Object.defineProperty(Settings.prototype, \"setRaw\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (key, value) {\r\n            var old = this._settings[key];\r\n            this._settings[key] = value;\r\n            if (old !== value) {\r\n                this._setRaw(key, old, value);\r\n            }\r\n        }\r\n    });\r\n    /**\r\n     * @ignore\r\n     */\r\n    Object.defineProperty(Settings.prototype, \"_set\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (key, value) {\r\n            var old = this._settings[key];\r\n            this._settings[key] = value;\r\n            if (old !== value) {\r\n                this._setRaw(key, old, value);\r\n                this._markDirtyKey(key);\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Settings.prototype, \"_stopAnimation\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (key) {\r\n            var animation = this._animatingSettings[key];\r\n            if (animation) {\r\n                delete this._animatingSettings[key];\r\n                animation.stop();\r\n            }\r\n        }\r\n    });\r\n    /**\r\n     * Sets a setting `value` for the specified `key`, and returns the same `value`.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/settings/} for more info\r\n     * @param   key       Setting key\r\n     * @param   value     Setting value\r\n     * @return            Setting value\r\n     */\r\n    Object.defineProperty(Settings.prototype, \"set\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (key, value) {\r\n            this._set(key, value);\r\n            this._stopAnimation(key);\r\n            return value;\r\n        }\r\n    });\r\n    /**\r\n     * Removes a setting value for the specified `key`;\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/settings/} for more info\r\n     * @param   key       Setting key\r\n     */\r\n    Object.defineProperty(Settings.prototype, \"remove\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (key) {\r\n            if (key in this._settings) {\r\n                this._prevSettings[key] = this._settings[key];\r\n                delete this._settings[key];\r\n                this._sendKeyEvent(key, undefined);\r\n                this._markDirtyKey(key);\r\n            }\r\n            this._stopAnimation(key);\r\n        }\r\n    });\r\n    /**\r\n     * Removes all keys;\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/settings/} for more info\r\n     */\r\n    Object.defineProperty(Settings.prototype, \"removeAll\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            var _this = this;\r\n            $array.each($object.keys(this._settings), function (key) {\r\n                _this.remove(key);\r\n            });\r\n        }\r\n    });\r\n    /**\r\n     * Returns a value of a private setting.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/settings/#Private_settings} for more info\r\n     */\r\n    Object.defineProperty(Settings.prototype, \"getPrivate\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (key, fallback) {\r\n            var value = this._privateSettings[key];\r\n            if (value !== undefined) {\r\n                return value;\r\n            }\r\n            else {\r\n                return fallback;\r\n            }\r\n        }\r\n    });\r\n    /**\r\n     * @ignore\r\n     */\r\n    Object.defineProperty(Settings.prototype, \"_setPrivateRaw\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (key, old, value) {\r\n            this._prevPrivateSettings[key] = old;\r\n            this._sendPrivateKeyEvent(key, value);\r\n        }\r\n    });\r\n    /**\r\n     * @ignore\r\n     */\r\n    Object.defineProperty(Settings.prototype, \"setPrivateRaw\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (key, value) {\r\n            var old = this._privateSettings[key];\r\n            this._privateSettings[key] = value;\r\n            if (old !== value) {\r\n                this._setPrivateRaw(key, old, value);\r\n            }\r\n        }\r\n    });\r\n    /**\r\n     * @ignore\r\n     */\r\n    Object.defineProperty(Settings.prototype, \"_setPrivate\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (key, value) {\r\n            var old = this._privateSettings[key];\r\n            this._privateSettings[key] = value;\r\n            if (old !== value) {\r\n                this._setPrivateRaw(key, old, value);\r\n                this._markDirtyPrivateKey(key);\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Settings.prototype, \"_stopAnimationPrivate\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (key) {\r\n            var animation = this._animatingPrivateSettings[key];\r\n            if (animation) {\r\n                animation.stop();\r\n                delete this._animatingPrivateSettings[key];\r\n            }\r\n        }\r\n    });\r\n    /**\r\n     * @ignore\r\n     */\r\n    Object.defineProperty(Settings.prototype, \"setPrivate\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (key, value) {\r\n            this._setPrivate(key, value);\r\n            this._stopAnimationPrivate(key);\r\n            return value;\r\n        }\r\n    });\r\n    /**\r\n     * @ignore\r\n     */\r\n    Object.defineProperty(Settings.prototype, \"removePrivate\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (key) {\r\n            if (key in this._privateSettings) {\r\n                this._prevPrivateSettings[key] = this._privateSettings[key];\r\n                delete this._privateSettings[key];\r\n                this._markDirtyPrivateKey(key);\r\n            }\r\n            this._stopAnimationPrivate(key);\r\n        }\r\n    });\r\n    /**\r\n     * Sets multiple settings at once.\r\n     *\r\n     * `settings` must be an object with key: value pairs.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/settings/} for more info\r\n     * @param settings Settings\r\n     */\r\n    Object.defineProperty(Settings.prototype, \"setAll\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (settings) {\r\n            var _this = this;\r\n            $object.each(settings, function (key, value) {\r\n                _this.set(key, value);\r\n            });\r\n        }\r\n    });\r\n    /**\r\n     * Animates setting values from current/start values to new ones.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/animations/#Animating_settings} for more info\r\n     * @param   options  Animation options\r\n     * @return           Animation object\r\n     */\r\n    Object.defineProperty(Settings.prototype, \"animate\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (options) {\r\n            var key = options.key;\r\n            var to = options.to;\r\n            var duration = options.duration || 0;\r\n            var loops = options.loops || 1;\r\n            var from = (options.from === undefined ? this.get(key) : options.from);\r\n            var easing = (options.easing === undefined ? $ease.linear : options.easing);\r\n            if (duration === 0) {\r\n                this.set(key, to);\r\n            }\r\n            else {\r\n                if (from === undefined || from === to) {\r\n                    this.set(key, to);\r\n                }\r\n                else {\r\n                    this.set(key, from);\r\n                    var animation_1 = this._animatingSettings[key] = new Animation(this, from, to, duration, easing, loops, this._animationTime());\r\n                    this._startAnimation();\r\n                    return animation_1;\r\n                }\r\n            }\r\n            var animation = new Animation(this, from, to, duration, easing, loops, null);\r\n            animation.stop();\r\n            return animation;\r\n        }\r\n    });\r\n    /**\r\n     * @ignore\r\n     */\r\n    Object.defineProperty(Settings.prototype, \"animatePrivate\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (options) {\r\n            var key = options.key;\r\n            var to = options.to;\r\n            var duration = options.duration || 0;\r\n            var loops = options.loops || 1;\r\n            var from = (options.from === undefined ? this.getPrivate(key) : options.from);\r\n            var easing = (options.easing === undefined ? $ease.linear : options.easing);\r\n            if (duration === 0) {\r\n                this.setPrivate(key, to);\r\n            }\r\n            else {\r\n                if (from === undefined || from === to) {\r\n                    this.setPrivate(key, to);\r\n                }\r\n                else {\r\n                    this.setPrivate(key, from);\r\n                    var animation_2 = this._animatingPrivateSettings[key] = new Animation(this, from, to, duration, easing, loops, this._animationTime());\r\n                    this._startAnimation();\r\n                    return animation_2;\r\n                }\r\n            }\r\n            var animation = new Animation(this, from, to, duration, easing, loops, null);\r\n            animation.stop();\r\n            return animation;\r\n        }\r\n    });\r\n    Object.defineProperty(Settings.prototype, \"_dispose\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () { }\r\n    });\r\n    /**\r\n     * Returns `true` if this element is disposed.\r\n     *\r\n     * @return Disposed\r\n     */\r\n    Object.defineProperty(Settings.prototype, \"isDisposed\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            return this._disposed;\r\n        }\r\n    });\r\n    /**\r\n     * Disposes this object.\r\n     */\r\n    Object.defineProperty(Settings.prototype, \"dispose\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            if (!this._disposed) {\r\n                this._disposed = true;\r\n                this._dispose();\r\n            }\r\n        }\r\n    });\r\n    return Settings;\r\n}());\r\nexport { Settings };\r\n/**\r\n * Base class.\r\n *\r\n * @important\r\n */\r\nvar Entity = /** @class */ (function (_super) {\r\n    __extends(Entity, _super);\r\n    /**\r\n     * IMPORTANT! Do not instantiate this class via `new Class()` syntax.\r\n     *\r\n     * Use static method `Class.new()` instead.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/getting-started/#New_element_syntax} for more info\r\n     * @ignore\r\n     */\r\n    function Entity(root, settings, isReal, templates) {\r\n        if (templates === void 0) { templates = []; }\r\n        var _this = _super.call(this, settings) || this;\r\n        Object.defineProperty(_this, \"_root\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(_this, \"_user_id\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        }); // for testing purposes\r\n        Object.defineProperty(_this, \"states\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: new States(_this)\r\n        });\r\n        Object.defineProperty(_this, \"adapters\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: new Adapters(_this)\r\n        });\r\n        Object.defineProperty(_this, \"events\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: _this._createEvents()\r\n        });\r\n        Object.defineProperty(_this, \"_userPrivateProperties\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(_this, \"_dirty\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(_this, \"_dirtyPrivate\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(_this, \"_template\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        // Templates for the themes\r\n        Object.defineProperty(_this, \"_templates\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        // Internal templates which can be overridden by the user's templates\r\n        Object.defineProperty(_this, \"_internalTemplates\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        // Default themes which can be overridden by the user's themes\r\n        Object.defineProperty(_this, \"_defaultThemes\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        // Disposers for all of the templates\r\n        Object.defineProperty(_this, \"_templateDisposers\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        Object.defineProperty(_this, \"_disposers\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        // Whether the template setup function should be run\r\n        Object.defineProperty(_this, \"_runSetup\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: true\r\n        });\r\n        Object.defineProperty(_this, \"_disposerProperties\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        if (!isReal) {\r\n            throw new Error(\"You cannot use `new Class()`, instead use `Class.new()`\");\r\n        }\r\n        _this._root = root;\r\n        _this._internalTemplates = templates;\r\n        if (settings.id) {\r\n            _this._registerId(settings.id);\r\n        }\r\n        return _this;\r\n    }\r\n    /**\r\n     * Use this method to create an instance of this class.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/getting-started/#New_element_syntax} for more info\r\n     * @param   root      Root element\r\n     * @param   settings  Settings\r\n     * @param   template  Template\r\n     * @return            Instantiated object\r\n     */\r\n    Object.defineProperty(Entity, \"new\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (root, settings, template) {\r\n            var x = (new this(root, settings, true));\r\n            x._template = template;\r\n            x._afterNew();\r\n            return x;\r\n        }\r\n    });\r\n    Object.defineProperty(Entity, \"_new\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (root, settings, templates) {\r\n            if (templates === void 0) { templates = []; }\r\n            var x = (new this(root, settings, true, templates));\r\n            x._afterNew();\r\n            return x;\r\n        }\r\n    });\r\n    Object.defineProperty(Entity.prototype, \"_afterNew\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            var _this = this;\r\n            this._checkDirty();\r\n            var shouldApply = false;\r\n            var template = this._template;\r\n            if (template) {\r\n                shouldApply = true;\r\n                template._setObjectTemplate(this);\r\n            }\r\n            $array.each(this._internalTemplates, function (template) {\r\n                shouldApply = true;\r\n                template._setObjectTemplate(_this);\r\n            });\r\n            if (shouldApply) {\r\n                this._applyTemplates(false);\r\n            }\r\n            this.states.create(\"default\", {});\r\n            this._setDefaults();\r\n        }\r\n    });\r\n    // This is the same as _afterNew, except it also applies the themes.\r\n    // This should only be used for classes which don't have a parent (because they extend from Entity and not Sprite).\r\n    Object.defineProperty(Entity.prototype, \"_afterNewApplyThemes\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            var _this = this;\r\n            this._checkDirty();\r\n            var template = this._template;\r\n            if (template) {\r\n                template._setObjectTemplate(this);\r\n            }\r\n            $array.each(this._internalTemplates, function (template) {\r\n                template._setObjectTemplate(_this);\r\n            });\r\n            this.states.create(\"default\", {});\r\n            this._setDefaults();\r\n            this._applyThemes();\r\n        }\r\n    });\r\n    Object.defineProperty(Entity.prototype, \"_createEvents\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            return new EventDispatcher();\r\n        }\r\n    });\r\n    Object.defineProperty(Entity.prototype, \"classNames\", {\r\n        /**\r\n         * @ignore\r\n         */\r\n        get: function () {\r\n            return this.constructor.classNames;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Entity.prototype, \"className\", {\r\n        /**\r\n         * @ignore\r\n         */\r\n        get: function () {\r\n            return this.constructor.className;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Entity.prototype, \"_setDefaults\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n        }\r\n    });\r\n    Object.defineProperty(Entity.prototype, \"_setDefault\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (key, value) {\r\n            if (!(key in this._settings)) {\r\n                _super.prototype.set.call(this, key, value);\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Entity.prototype, \"_setRawDefault\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (key, value) {\r\n            if (!(key in this._settings)) {\r\n                _super.prototype.setRaw.call(this, key, value);\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Entity.prototype, \"_clearDirty\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            var _this = this;\r\n            $object.keys(this._dirty).forEach(function (key) {\r\n                _this._dirty[key] = false;\r\n            });\r\n            $object.keys(this._dirtyPrivate).forEach(function (key) {\r\n                _this._dirtyPrivate[key] = false;\r\n            });\r\n        }\r\n    });\r\n    /**\r\n     * @ignore\r\n     */\r\n    Object.defineProperty(Entity.prototype, \"isDirty\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (key) {\r\n            return !!this._dirty[key];\r\n        }\r\n    });\r\n    /**\r\n     * @ignore\r\n     */\r\n    Object.defineProperty(Entity.prototype, \"isPrivateDirty\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (key) {\r\n            return !!this._dirtyPrivate[key];\r\n        }\r\n    });\r\n    Object.defineProperty(Entity.prototype, \"_markDirtyKey\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (key) {\r\n            this._dirty[key] = true;\r\n            _super.prototype._markDirtyKey.call(this, key);\r\n        }\r\n    });\r\n    Object.defineProperty(Entity.prototype, \"_markDirtyPrivateKey\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (key) {\r\n            this._dirtyPrivate[key] = true;\r\n            _super.prototype._markDirtyKey.call(this, key);\r\n        }\r\n    });\r\n    /**\r\n     * Checks if element is of certain class (or inherits one).\r\n     *\r\n     * @param   type  Class name to check\r\n     * @return {boolean} Is of class?\r\n     */\r\n    Object.defineProperty(Entity.prototype, \"isType\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (type) {\r\n            return this.classNames.indexOf(type) !== -1;\r\n        }\r\n    });\r\n    Object.defineProperty(Entity.prototype, \"_pushPropertyDisposer\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (key, disposer) {\r\n            var disposers = this._disposerProperties[key];\r\n            if (disposers === undefined) {\r\n                disposers = this._disposerProperties[key] = [];\r\n            }\r\n            disposers.push(disposer);\r\n            return disposer;\r\n        }\r\n    });\r\n    Object.defineProperty(Entity.prototype, \"_disposeProperty\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (key) {\r\n            var disposers = this._disposerProperties[key];\r\n            if (disposers !== undefined) {\r\n                $array.each(disposers, function (disposer) {\r\n                    disposer.dispose();\r\n                });\r\n                delete this._disposerProperties[key];\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Entity.prototype, \"template\", {\r\n        get: function () {\r\n            return this._template;\r\n        },\r\n        /**\r\n         * @todo needs description\r\n         * @param  value  Template\r\n         */\r\n        set: function (value) {\r\n            var template = this._template;\r\n            if (template !== value) {\r\n                this._template = value;\r\n                if (template) {\r\n                    template._removeObjectTemplate(this);\r\n                }\r\n                if (value) {\r\n                    value._setObjectTemplate(this);\r\n                }\r\n                this._applyTemplates();\r\n            }\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * @ignore\r\n     */\r\n    Object.defineProperty(Entity.prototype, \"markDirty\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            this._root._addDirtyEntity(this);\r\n        }\r\n    });\r\n    Object.defineProperty(Entity.prototype, \"_startAnimation\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            this._root._addAnimation(this);\r\n        }\r\n    });\r\n    Object.defineProperty(Entity.prototype, \"_animationTime\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            return this._root.animationTime;\r\n        }\r\n    });\r\n    Object.defineProperty(Entity.prototype, \"_applyState\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (_name) { }\r\n    });\r\n    Object.defineProperty(Entity.prototype, \"_applyStateAnimated\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (_name, _duration) { }\r\n    });\r\n    Object.defineProperty(Entity.prototype, \"get\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (key, fallback) {\r\n            var value = this.adapters.fold(key, this._settings[key]);\r\n            if (value !== undefined) {\r\n                return value;\r\n            }\r\n            else {\r\n                return fallback;\r\n            }\r\n        }\r\n    });\r\n    /**\r\n     * Sets a setting `value` for the specified `key`, and returns the same `value`.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/settings/} for more info\r\n     * @param   key       Setting key\r\n     * @param   value     Setting value\r\n     * @return            Setting value\r\n     */\r\n    Object.defineProperty(Entity.prototype, \"set\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (key, value) {\r\n            this._userProperties[key] = true;\r\n            return _super.prototype.set.call(this, key, value);\r\n        }\r\n    });\r\n    /**\r\n     * @ignore\r\n     */\r\n    Object.defineProperty(Entity.prototype, \"setRaw\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (key, value) {\r\n            this._userProperties[key] = true;\r\n            _super.prototype.setRaw.call(this, key, value);\r\n        }\r\n    });\r\n    /**\r\n     * Sets a setting `value` for the specified `key` only if the value for this key was not set previously using set method, and returns the same `value`.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/settings/} for more info\r\n     * @param   key       Setting key\r\n     * @param   value     Setting value\r\n     * @return            Setting value\r\n     */\r\n    Object.defineProperty(Entity.prototype, \"_setSoft\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (key, value) {\r\n            if (!this._userProperties[key]) {\r\n                return _super.prototype.set.call(this, key, value);\r\n            }\r\n            return value;\r\n        }\r\n    });\r\n    /**\r\n     * Removes a setting value for the specified `key`.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/settings/} for more info\r\n     * @param   key       Setting key\r\n     */\r\n    Object.defineProperty(Entity.prototype, \"remove\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (key) {\r\n            delete this._userProperties[key];\r\n            this._removeTemplateProperty(key);\r\n        }\r\n    });\r\n    /**\r\n     * @ignore\r\n     */\r\n    Object.defineProperty(Entity.prototype, \"setPrivate\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (key, value) {\r\n            this._userPrivateProperties[key] = true;\r\n            return _super.prototype.setPrivate.call(this, key, value);\r\n        }\r\n    });\r\n    /**\r\n     * @ignore\r\n     */\r\n    Object.defineProperty(Entity.prototype, \"setPrivateRaw\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (key, value) {\r\n            this._userPrivateProperties[key] = true;\r\n            _super.prototype.setPrivateRaw.call(this, key, value);\r\n        }\r\n    });\r\n    /**\r\n     * @ignore\r\n     */\r\n    Object.defineProperty(Entity.prototype, \"removePrivate\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (key) {\r\n            delete this._userPrivateProperties[key];\r\n            this._removeTemplatePrivateProperty(key);\r\n        }\r\n    });\r\n    Object.defineProperty(Entity.prototype, \"_setTemplateProperty\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (template, key, value) {\r\n            if (!this._userProperties[key]) {\r\n                var match = this._findTemplateByKey(key);\r\n                if (template === match) {\r\n                    _super.prototype.set.call(this, key, value);\r\n                }\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Entity.prototype, \"_setTemplatePrivateProperty\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (template, key, value) {\r\n            if (!this._userPrivateProperties[key]) {\r\n                var match = this._findTemplateByPrivateKey(key);\r\n                if (template === match) {\r\n                    _super.prototype.setPrivate.call(this, key, value);\r\n                }\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Entity.prototype, \"_removeTemplateProperty\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (key) {\r\n            if (!this._userProperties[key]) {\r\n                var match = this._findTemplateByKey(key);\r\n                if (match) {\r\n                    // TODO don't stop the animation if the property didn't change\r\n                    _super.prototype.set.call(this, key, match._settings[key]);\r\n                }\r\n                else {\r\n                    _super.prototype.remove.call(this, key);\r\n                }\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Entity.prototype, \"_removeTemplatePrivateProperty\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (key) {\r\n            if (!this._userPrivateProperties[key]) {\r\n                var match = this._findTemplateByPrivateKey(key);\r\n                if (match) {\r\n                    // TODO don't stop the animation if the property didn't change\r\n                    _super.prototype.setPrivate.call(this, key, match._privateSettings[key]);\r\n                }\r\n                else {\r\n                    _super.prototype.removePrivate.call(this, key);\r\n                }\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Entity.prototype, \"_walkParents\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (f) {\r\n            f(this._root._rootContainer);\r\n            f(this);\r\n        }\r\n    });\r\n    // TODO faster version of this method which is specialized to just 1 key\r\n    Object.defineProperty(Entity.prototype, \"_applyStateByKey\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (name) {\r\n            var other = this.states.create(name, {});\r\n            var seen = {};\r\n            this._eachTemplate(function (template) {\r\n                var state = template.states.lookup(name);\r\n                if (state) {\r\n                    state._apply(other, seen);\r\n                }\r\n            });\r\n            $object.each(other._settings, function (key) {\r\n                if (!seen[key] && !other._userSettings[key]) {\r\n                    other.remove(key);\r\n                }\r\n            });\r\n        }\r\n    });\r\n    Object.defineProperty(Entity.prototype, \"_applyTemplate\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (template, state) {\r\n            var _this = this;\r\n            this._templateDisposers.push(template._apply(this, state));\r\n            $object.each(template._settings, function (key, value) {\r\n                if (!state.settings[key] && !_this._userProperties[key]) {\r\n                    state.settings[key] = true;\r\n                    _super.prototype.set.call(_this, key, value);\r\n                }\r\n            });\r\n            $object.each(template._privateSettings, function (key, value) {\r\n                if (!state.privateSettings[key] && !_this._userPrivateProperties[key]) {\r\n                    state.privateSettings[key] = true;\r\n                    _super.prototype.setPrivate.call(_this, key, value);\r\n                }\r\n            });\r\n            if (this._runSetup && template.setup) {\r\n                this._runSetup = false;\r\n                template.setup(this);\r\n            }\r\n        }\r\n    });\r\n    /**\r\n     * Calls the closure with each template and returns the first template which is true\r\n     */\r\n    Object.defineProperty(Entity.prototype, \"_findStaticTemplate\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (f) {\r\n            if (this._template) {\r\n                if (f(this._template)) {\r\n                    return this._template;\r\n                }\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Entity.prototype, \"_eachTemplate\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (f) {\r\n            this._findStaticTemplate(function (template) {\r\n                f(template);\r\n                return false;\r\n            });\r\n            // _internalTemplates is sorted with most specific to the right\r\n            $array.eachReverse(this._internalTemplates, f);\r\n            // _templates is sorted with most specific to the left\r\n            $array.each(this._templates, f);\r\n        }\r\n    });\r\n    Object.defineProperty(Entity.prototype, \"_applyTemplates\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (remove) {\r\n            var _this = this;\r\n            if (remove === void 0) { remove = true; }\r\n            if (remove) {\r\n                this._disposeTemplates();\r\n            }\r\n            var state = {\r\n                settings: {},\r\n                privateSettings: {},\r\n                states: {},\r\n            };\r\n            this._eachTemplate(function (template) {\r\n                _this._applyTemplate(template, state);\r\n            });\r\n            if (remove) {\r\n                $object.each(this._settings, function (key) {\r\n                    if (!_this._userProperties[key] && !state.settings[key]) {\r\n                        _super.prototype.remove.call(_this, key);\r\n                    }\r\n                });\r\n                $object.each(this._privateSettings, function (key) {\r\n                    if (!_this._userPrivateProperties[key] && !state.privateSettings[key]) {\r\n                        _super.prototype.removePrivate.call(_this, key);\r\n                    }\r\n                });\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Entity.prototype, \"_findTemplate\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (f) {\r\n            var value = this._findStaticTemplate(f);\r\n            if (value === undefined) {\r\n                // _internalTemplates is sorted with most specific to the right\r\n                var value_1 = $array.findReverse(this._internalTemplates, f);\r\n                if (value_1 === undefined) {\r\n                    // _templates is sorted with most specific to the left\r\n                    return $array.find(this._templates, f);\r\n                }\r\n                else {\r\n                    return value_1;\r\n                }\r\n            }\r\n            else {\r\n                return value;\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Entity.prototype, \"_findTemplateByKey\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (key) {\r\n            return this._findTemplate(function (template) {\r\n                return key in template._settings;\r\n            });\r\n        }\r\n    });\r\n    Object.defineProperty(Entity.prototype, \"_findTemplateByPrivateKey\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (key) {\r\n            return this._findTemplate(function (template) {\r\n                return key in template._privateSettings;\r\n            });\r\n        }\r\n    });\r\n    Object.defineProperty(Entity.prototype, \"_disposeTemplates\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            $array.each(this._templateDisposers, function (disposer) {\r\n                disposer.dispose();\r\n            });\r\n            this._templateDisposers.length = 0;\r\n        }\r\n    });\r\n    Object.defineProperty(Entity.prototype, \"_removeTemplates\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            var _this = this;\r\n            $array.each(this._templates, function (template) {\r\n                template._removeObjectTemplate(_this);\r\n            });\r\n            this._templates.length = 0;\r\n        }\r\n    });\r\n    Object.defineProperty(Entity.prototype, \"_applyThemes\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            var _this = this;\r\n            var isConnected = false;\r\n            var defaults = [];\r\n            var themes = [];\r\n            var themeTags = new Set();\r\n            var tags = this.get(\"themeTagsSelf\");\r\n            if (tags) {\r\n                $array.each(tags, function (tag) {\r\n                    themeTags.add(tag);\r\n                });\r\n            }\r\n            this._walkParents(function (entity) {\r\n                if (entity === _this._root._rootContainer) {\r\n                    isConnected = true;\r\n                }\r\n                if (entity._defaultThemes.length > 0) {\r\n                    defaults.push(entity._defaultThemes);\r\n                }\r\n                var theme = entity.get(\"themes\");\r\n                if (theme) {\r\n                    themes.push(theme);\r\n                }\r\n                var tags = entity.get(\"themeTags\");\r\n                if (tags) {\r\n                    $array.each(tags, function (tag) {\r\n                        themeTags.add(tag);\r\n                    });\r\n                }\r\n            });\r\n            themes = defaults.concat(themes);\r\n            this._removeTemplates();\r\n            if (isConnected) {\r\n                $array.eachReverse(this.classNames, function (name) {\r\n                    var allRules = [];\r\n                    $array.each(themes, function (themes) {\r\n                        $array.each(themes, function (theme) {\r\n                            var rules = theme._lookupRules(name);\r\n                            if (rules) {\r\n                                $array.eachReverse(rules, function (rule) {\r\n                                    var matches = rule.tags.every(function (tag) {\r\n                                        return themeTags.has(tag);\r\n                                    });\r\n                                    if (matches) {\r\n                                        var result = $array.getFirstSortedIndex(allRules, function (x) {\r\n                                            var order = $order.compare(rule.tags.length, x.tags.length);\r\n                                            if (order === 0) {\r\n                                                return $order.compareArray(rule.tags, x.tags, $order.compare);\r\n                                            }\r\n                                            else {\r\n                                                return order;\r\n                                            }\r\n                                        });\r\n                                        allRules.splice(result.index, 0, rule);\r\n                                    }\r\n                                });\r\n                            }\r\n                        });\r\n                    });\r\n                    $array.each(allRules, function (rule) {\r\n                        _this._templates.push(rule.template);\r\n                        rule.template._setObjectTemplate(_this);\r\n                    });\r\n                });\r\n            }\r\n            this._applyTemplates();\r\n            if (isConnected) {\r\n                // This causes it to only run the setup function the first time that the themes are applied\r\n                this._runSetup = false;\r\n            }\r\n            return isConnected;\r\n        }\r\n    });\r\n    Object.defineProperty(Entity.prototype, \"_changed\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () { }\r\n    });\r\n    Object.defineProperty(Entity.prototype, \"_beforeChanged\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            if (this.isDirty(\"id\")) {\r\n                var id = this.get(\"id\");\r\n                if (id) {\r\n                    this._registerId(id);\r\n                }\r\n                var prevId = this._prevSettings.id;\r\n                if (prevId) {\r\n                    delete registry.entitiesById[prevId];\r\n                }\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Entity.prototype, \"_registerId\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (id) {\r\n            if (registry.entitiesById[id] && registry.entitiesById[id] !== this) {\r\n                throw new Error(\"An entity with id \\\"\" + id + \"\\\" already exists.\");\r\n            }\r\n            registry.entitiesById[id] = this;\r\n        }\r\n    });\r\n    Object.defineProperty(Entity.prototype, \"_afterChanged\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () { }\r\n    });\r\n    /**\r\n     * @ignore\r\n     */\r\n    Object.defineProperty(Entity.prototype, \"addDisposer\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (disposer) {\r\n            this._disposers.push(disposer);\r\n            return disposer;\r\n        }\r\n    });\r\n    Object.defineProperty(Entity.prototype, \"_dispose\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            var _this = this;\r\n            _super.prototype._dispose.call(this);\r\n            var template = this._template;\r\n            if (template) {\r\n                template._removeObjectTemplate(this);\r\n            }\r\n            $array.each(this._internalTemplates, function (template) {\r\n                template._removeObjectTemplate(_this);\r\n            });\r\n            this._removeTemplates();\r\n            this._disposeTemplates();\r\n            this.events.dispose();\r\n            this._disposers.forEach(function (x) {\r\n                x.dispose();\r\n            });\r\n            $object.each(this._disposerProperties, function (_, disposers) {\r\n                $array.each(disposers, function (disposer) {\r\n                    disposer.dispose();\r\n                });\r\n            });\r\n            var id = this.get(\"id\");\r\n            if (id) {\r\n                delete registry.entitiesById[id];\r\n            }\r\n        }\r\n    });\r\n    /**\r\n     * Creates and returns a \"disposable\" timeout.\r\n     *\r\n     * @param   fn     Callback\r\n     * @param   delay  Delay in milliseconds\r\n     * @return         Timeout disposer\r\n     */\r\n    Object.defineProperty(Entity.prototype, \"setTimeout\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (fn, delay) {\r\n            var _this = this;\r\n            var id = setTimeout(function () {\r\n                _this.removeDispose(disposer);\r\n                fn();\r\n            }, delay);\r\n            var disposer = new Disposer(function () {\r\n                clearTimeout(id);\r\n            });\r\n            this._disposers.push(disposer);\r\n            return disposer;\r\n        }\r\n    });\r\n    /**\r\n     * @ignore\r\n     */\r\n    Object.defineProperty(Entity.prototype, \"removeDispose\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (target) {\r\n            if (!this.isDisposed()) {\r\n                var index = $array.indexOf(this._disposers, target);\r\n                if (index > -1) {\r\n                    this._disposers.splice(index, 1);\r\n                }\r\n            }\r\n            target.dispose();\r\n        }\r\n    });\r\n    /**\r\n     * @ignore\r\n     */\r\n    Object.defineProperty(Entity.prototype, \"hasTag\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (tag) {\r\n            return $array.indexOf(this.get(\"themeTags\", []), tag) !== -1;\r\n        }\r\n    });\r\n    /**\r\n     * @ignore\r\n     */\r\n    Object.defineProperty(Entity.prototype, \"addTag\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (tag) {\r\n            if (!this.hasTag(tag)) {\r\n                var tags = this.get(\"themeTags\", []);\r\n                tags.push(tag);\r\n                this.set(\"themeTags\", tags);\r\n            }\r\n        }\r\n    });\r\n    /**\r\n     * @ignore\r\n     */\r\n    Object.defineProperty(Entity.prototype, \"removeTag\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (tag) {\r\n            if (this.hasTag(tag)) {\r\n                var tags = this.get(\"themeTags\", []);\r\n                $array.remove(tags, tag);\r\n                this.set(\"themeTags\", tags);\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Entity.prototype, \"_t\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (text, locale) {\r\n            var _a;\r\n            var rest = [];\r\n            for (var _i = 2; _i < arguments.length; _i++) {\r\n                rest[_i - 2] = arguments[_i];\r\n            }\r\n            return (_a = this._root.language).translate.apply(_a, __spreadArray([text, locale], __read(rest), false));\r\n        }\r\n    });\r\n    Object.defineProperty(Entity.prototype, \"root\", {\r\n        /**\r\n         * An instance of [[Root]] object.\r\n         *\r\n         * @readonly\r\n         * @since 5.0.6\r\n         * @return Root object\r\n         */\r\n        get: function () {\r\n            return this._root;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Entity, \"className\", {\r\n        enumerable: true,\r\n        configurable: true,\r\n        writable: true,\r\n        value: \"Entity\"\r\n    });\r\n    Object.defineProperty(Entity, \"classNames\", {\r\n        enumerable: true,\r\n        configurable: true,\r\n        writable: true,\r\n        value: [\"Entity\"]\r\n    });\r\n    return Entity;\r\n}(Settings));\r\nexport { Entity };\r\n//# sourceMappingURL=Entity.js.map","import { EventDispatcher } from \"./EventDispatcher\";\r\nimport { Disposer, MultiDisposer } from \"./Disposer\";\r\nimport * as $array from \"./Array\";\r\nimport * as $object from \"./Object\";\r\nvar TemplateState = /** @class */ (function () {\r\n    function TemplateState(name, template, settings) {\r\n        Object.defineProperty(this, \"_settings\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_name\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_template\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        this._name = name;\r\n        this._template = template;\r\n        this._settings = settings;\r\n    }\r\n    Object.defineProperty(TemplateState.prototype, \"get\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (key, fallback) {\r\n            var value = this._settings[key];\r\n            if (value !== undefined) {\r\n                return value;\r\n            }\r\n            else {\r\n                return fallback;\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(TemplateState.prototype, \"set\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (key, value) {\r\n            this._settings[key] = value;\r\n            // TODO maybe only do this if the value changed ?\r\n            this._template._stateChanged(this._name);\r\n        }\r\n    });\r\n    Object.defineProperty(TemplateState.prototype, \"remove\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (key) {\r\n            delete this._settings[key];\r\n            // TODO maybe only do this if the value changed ?\r\n            this._template._stateChanged(this._name);\r\n        }\r\n    });\r\n    Object.defineProperty(TemplateState.prototype, \"setAll\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (settings) {\r\n            var _this = this;\r\n            $object.keys(settings).forEach(function (key) {\r\n                _this._settings[key] = settings[key];\r\n            });\r\n            this._template._stateChanged(this._name);\r\n        }\r\n    });\r\n    Object.defineProperty(TemplateState.prototype, \"_apply\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (other, seen) {\r\n            $object.each(this._settings, function (key, value) {\r\n                if (!seen[key] && !other._userSettings[key]) {\r\n                    seen[key] = true;\r\n                    other.setRaw(key, value);\r\n                }\r\n            });\r\n        }\r\n    });\r\n    return TemplateState;\r\n}());\r\nexport { TemplateState };\r\nvar TemplateStates = /** @class */ (function () {\r\n    function TemplateStates(template) {\r\n        Object.defineProperty(this, \"_template\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_states\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        this._template = template;\r\n    }\r\n    Object.defineProperty(TemplateStates.prototype, \"lookup\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (name) {\r\n            return this._states[name];\r\n        }\r\n    });\r\n    Object.defineProperty(TemplateStates.prototype, \"create\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (name, settings) {\r\n            var state = this._states[name];\r\n            if (state) {\r\n                state.setAll(settings);\r\n                return state;\r\n            }\r\n            else {\r\n                var state_1 = new TemplateState(name, this._template, settings);\r\n                this._states[name] = state_1;\r\n                this._template._stateChanged(name);\r\n                return state_1;\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(TemplateStates.prototype, \"remove\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (name) {\r\n            delete this._states[name];\r\n            this._template._stateChanged(name);\r\n        }\r\n    });\r\n    Object.defineProperty(TemplateStates.prototype, \"_apply\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (entity, state) {\r\n            $object.each(this._states, function (key, value) {\r\n                var seen = state.states[key];\r\n                if (seen == null) {\r\n                    seen = state.states[key] = {};\r\n                }\r\n                var other = entity.states.create(key, {});\r\n                value._apply(other, seen);\r\n            });\r\n        }\r\n    });\r\n    return TemplateStates;\r\n}());\r\nexport { TemplateStates };\r\nvar TemplateAdapters = /** @class */ (function () {\r\n    function TemplateAdapters() {\r\n        Object.defineProperty(this, \"_callbacks\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n    }\r\n    Object.defineProperty(TemplateAdapters.prototype, \"add\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (key, callback) {\r\n            var _this = this;\r\n            var callbacks = this._callbacks[key];\r\n            if (callbacks === undefined) {\r\n                callbacks = this._callbacks[key] = [];\r\n            }\r\n            callbacks.push(callback);\r\n            return new Disposer(function () {\r\n                $array.removeFirst(callbacks, callback);\r\n                if (callbacks.length === 0) {\r\n                    delete _this._callbacks[key];\r\n                }\r\n            });\r\n        }\r\n    });\r\n    Object.defineProperty(TemplateAdapters.prototype, \"remove\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (key) {\r\n            var callbacks = this._callbacks[key];\r\n            if (callbacks !== undefined) {\r\n                delete this._callbacks[key];\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(TemplateAdapters.prototype, \"_apply\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (entity) {\r\n            var disposers = [];\r\n            $object.each(this._callbacks, function (key, callbacks) {\r\n                $array.each(callbacks, function (callback) {\r\n                    disposers.push(entity.adapters.add(key, callback));\r\n                });\r\n            });\r\n            return new MultiDisposer(disposers);\r\n        }\r\n    });\r\n    return TemplateAdapters;\r\n}());\r\nexport { TemplateAdapters };\r\n// TODO maybe extend from Properties ?\r\nvar Template = /** @class */ (function () {\r\n    function Template(settings, isReal) {\r\n        Object.defineProperty(this, \"_settings\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_privateSettings\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        // TODO code duplication with Properties\r\n        Object.defineProperty(this, \"_settingEvents\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(this, \"_privateSettingEvents\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(this, \"_entities\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        Object.defineProperty(this, \"states\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: new TemplateStates(this)\r\n        });\r\n        Object.defineProperty(this, \"adapters\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: new TemplateAdapters()\r\n        });\r\n        Object.defineProperty(this, \"events\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: new EventDispatcher()\r\n        });\r\n        Object.defineProperty(this, \"setup\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        if (!isReal) {\r\n            throw new Error(\"You cannot use `new Class()`, instead use `Class.new()`\");\r\n        }\r\n        this._settings = settings;\r\n    }\r\n    /**\r\n     * Use this method to create an instance of this class.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/getting-started/#New_element_syntax} for more info\r\n     * @param   root      Root element\r\n     * @param   settings  Settings\r\n     * @param   template  Template\r\n     * @return            Instantiated object\r\n     */\r\n    Object.defineProperty(Template, \"new\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (settings) {\r\n            return new Template(settings, true);\r\n        }\r\n    });\r\n    Object.defineProperty(Template.prototype, \"get\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (key, fallback) {\r\n            var value = this._settings[key];\r\n            if (value !== undefined) {\r\n                return value;\r\n            }\r\n            else {\r\n                return fallback;\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Template.prototype, \"setRaw\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (key, value) {\r\n            this._settings[key] = value;\r\n        }\r\n    });\r\n    Object.defineProperty(Template.prototype, \"set\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (key, value) {\r\n            var _this = this;\r\n            if (this._settings[key] !== value) {\r\n                this.setRaw(key, value);\r\n                this._entities.forEach(function (entity) {\r\n                    entity._setTemplateProperty(_this, key, value);\r\n                });\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Template.prototype, \"remove\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (key) {\r\n            if (key in this._settings) {\r\n                delete this._settings[key];\r\n                this._entities.forEach(function (entity) {\r\n                    entity._removeTemplateProperty(key);\r\n                });\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Template.prototype, \"removeAll\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            var _this = this;\r\n            $object.each(this._settings, function (key, _value) {\r\n                _this.remove(key);\r\n            });\r\n        }\r\n    });\r\n    Object.defineProperty(Template.prototype, \"getPrivate\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (key, fallback) {\r\n            var value = this._privateSettings[key];\r\n            if (value !== undefined) {\r\n                return value;\r\n            }\r\n            else {\r\n                return fallback;\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Template.prototype, \"setPrivateRaw\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (key, value) {\r\n            this._privateSettings[key] = value;\r\n            return value;\r\n        }\r\n    });\r\n    Object.defineProperty(Template.prototype, \"setPrivate\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (key, value) {\r\n            var _this = this;\r\n            if (this._privateSettings[key] !== value) {\r\n                this.setPrivateRaw(key, value);\r\n                this._entities.forEach(function (entity) {\r\n                    entity._setTemplatePrivateProperty(_this, key, value);\r\n                });\r\n            }\r\n            return value;\r\n        }\r\n    });\r\n    Object.defineProperty(Template.prototype, \"removePrivate\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (key) {\r\n            if (key in this._privateSettings) {\r\n                delete this._privateSettings[key];\r\n                this._entities.forEach(function (entity) {\r\n                    entity._removeTemplatePrivateProperty(key);\r\n                });\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Template.prototype, \"setAll\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (value) {\r\n            var _this = this;\r\n            $object.each(value, function (key, value) {\r\n                _this.set(key, value);\r\n            });\r\n        }\r\n    });\r\n    // TODO code duplication with Properties\r\n    Object.defineProperty(Template.prototype, \"on\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (key, callback) {\r\n            var _this = this;\r\n            var events = this._settingEvents[key];\r\n            if (events === undefined) {\r\n                events = this._settingEvents[key] = [];\r\n            }\r\n            events.push(callback);\r\n            return new Disposer(function () {\r\n                $array.removeFirst(events, callback);\r\n                if (events.length === 0) {\r\n                    delete _this._settingEvents[key];\r\n                }\r\n            });\r\n        }\r\n    });\r\n    // TODO code duplication with Properties\r\n    Object.defineProperty(Template.prototype, \"onPrivate\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (key, callback) {\r\n            var _this = this;\r\n            var events = this._privateSettingEvents[key];\r\n            if (events === undefined) {\r\n                events = this._privateSettingEvents[key] = [];\r\n            }\r\n            events.push(callback);\r\n            return new Disposer(function () {\r\n                $array.removeFirst(events, callback);\r\n                if (events.length === 0) {\r\n                    delete _this._privateSettingEvents[key];\r\n                }\r\n            });\r\n        }\r\n    });\r\n    Object.defineProperty(Template.prototype, \"_apply\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (entity, state) {\r\n            var disposers = [];\r\n            $object.each(this._settingEvents, function (key, events) {\r\n                $array.each(events, function (event) {\r\n                    disposers.push(entity.on(key, event));\r\n                });\r\n            });\r\n            $object.each(this._privateSettingEvents, function (key, events) {\r\n                $array.each(events, function (event) {\r\n                    disposers.push(entity.onPrivate(key, event));\r\n                });\r\n            });\r\n            this.states._apply(entity, state);\r\n            disposers.push(this.adapters._apply(entity));\r\n            disposers.push(entity.events.copyFrom(this.events));\r\n            return new MultiDisposer(disposers);\r\n        }\r\n    });\r\n    Object.defineProperty(Template.prototype, \"_setObjectTemplate\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (entity) {\r\n            this._entities.push(entity);\r\n        }\r\n    });\r\n    Object.defineProperty(Template.prototype, \"_removeObjectTemplate\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (entity) {\r\n            $array.remove(this._entities, entity);\r\n        }\r\n    });\r\n    Object.defineProperty(Template.prototype, \"_stateChanged\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (name) {\r\n            this._entities.forEach(function (entity) {\r\n                entity._applyStateByKey(name);\r\n            });\r\n        }\r\n    });\r\n    return Template;\r\n}());\r\nexport { Template };\r\n//# sourceMappingURL=Template.js.map","import { __awaiter, __extends, __generator } from \"tslib\";\r\nimport { Entity } from \"../util/Entity\";\r\nimport { Template } from \"../util/Template\";\r\nimport { Percent } from \"../util/Percent\";\r\nimport { EventDispatcher } from \"../util/EventDispatcher\";\r\nimport { MultiDisposer, CounterDisposer } from \"../util/Disposer\";\r\nimport { waitForAnimations } from \"../util/Animation\";\r\nimport * as $utils from \"../util/Utils\";\r\nimport * as $array from \"../util/Array\";\r\nimport * as $type from \"../util/Type\";\r\nimport * as $object from \"../util/Object\";\r\nimport * as $math from \"../util/Math\";\r\n//import { populateString } from \"../util/PopulateString\";\r\n/**\r\n * An [[EventDispatcher]] for [[Sprite]].\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/events/} for more info\r\n */\r\nvar SpriteEventDispatcher = /** @class */ (function (_super) {\r\n    __extends(SpriteEventDispatcher, _super);\r\n    function SpriteEventDispatcher(sprite) {\r\n        var _this = _super.call(this) || this;\r\n        Object.defineProperty(_this, \"_sprite\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(_this, \"_rendererDisposers\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(_this, \"_dispatchParents\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: true\r\n        });\r\n        _this._sprite = sprite;\r\n        return _this;\r\n    }\r\n    Object.defineProperty(SpriteEventDispatcher.prototype, \"_makePointerEvent\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (key, event) {\r\n            return {\r\n                type: key,\r\n                originalEvent: event.event,\r\n                point: event.point,\r\n                simulated: event.simulated,\r\n                native: event.native,\r\n                target: this._sprite\r\n            };\r\n        }\r\n    });\r\n    Object.defineProperty(SpriteEventDispatcher.prototype, \"_onRenderer\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (key, dispatch) {\r\n            var _this = this;\r\n            // TODO: is this OK? it'd be good not to require to set this on each individual element\r\n            this._sprite.set(\"interactive\", true);\r\n            this._sprite._display.interactive = true;\r\n            var events = this._rendererDisposers[key];\r\n            if (events === undefined) {\r\n                var disposer_1 = this._sprite._display.on(key, function (e) {\r\n                    dispatch.call(_this, e);\r\n                });\r\n                events = this._rendererDisposers[key] = new CounterDisposer(function () {\r\n                    delete _this._rendererDisposers[key];\r\n                    disposer_1.dispose();\r\n                });\r\n            }\r\n            return events.increment();\r\n        }\r\n    });\r\n    Object.defineProperty(SpriteEventDispatcher.prototype, \"_on\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (once, type, callback, context, shouldClone, dispatch) {\r\n            var info = _super.prototype._on.call(this, once, type, callback, context, shouldClone, dispatch);\r\n            var rendererEvent = SpriteEventDispatcher.RENDERER_EVENTS[type];\r\n            if (rendererEvent !== undefined) {\r\n                info.disposer = new MultiDisposer([\r\n                    info.disposer,\r\n                    this._onRenderer(type, rendererEvent),\r\n                ]);\r\n            }\r\n            return info;\r\n        }\r\n    });\r\n    /**\r\n     * Will stop any bubbling up of the event to element's parents.\r\n     *\r\n     * Should be called in an event handler, e.g.:\r\n     *\r\n     * ```TypeScript\r\n     * element.events.on(\"pointerdown\", function(ev) {\r\n     *   // Do something here and prevent from \"pointerdown\" bubbling up\r\n     *   // ...\r\n     *   ev.target.events.stopParentDispatch();\r\n     * });\r\n     * ```\r\n     * ```JavaScript\r\n     * element.events.on(\"pointerdown\", function(ev) {\r\n     *   // Do something here and prevent from \"pointerdown\" bubbling up\r\n     *   // ...\r\n     *   ev.target.events.stopParentDispatch();\r\n     * });\r\n     * ```\r\n     */\r\n    Object.defineProperty(SpriteEventDispatcher.prototype, \"stopParentDispatch\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            this._dispatchParents = false;\r\n        }\r\n    });\r\n    /**\r\n     * @ignore\r\n     */\r\n    Object.defineProperty(SpriteEventDispatcher.prototype, \"dispatchParents\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (type, event) {\r\n            var old = this._dispatchParents;\r\n            this._dispatchParents = true;\r\n            try {\r\n                this.dispatch(type, event);\r\n                if (this._dispatchParents && this._sprite.parent) {\r\n                    this._sprite.parent.events.dispatchParents(type, event);\r\n                }\r\n            }\r\n            finally {\r\n                this._dispatchParents = old;\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(SpriteEventDispatcher, \"RENDERER_EVENTS\", {\r\n        enumerable: true,\r\n        configurable: true,\r\n        writable: true,\r\n        value: {\r\n            \"click\": function (event) {\r\n                if (this.isEnabled(\"click\") && !this._sprite.isDragging() && this._sprite._hasDown() && !this._sprite._hasMoved(this._makePointerEvent(\"click\", event))) {\r\n                    this.dispatch(\"click\", this._makePointerEvent(\"click\", event));\r\n                }\r\n            },\r\n            \"rightclick\": function (event) {\r\n                if (this.isEnabled(\"rightclick\")) {\r\n                    this.dispatch(\"rightclick\", this._makePointerEvent(\"rightclick\", event));\r\n                }\r\n            },\r\n            \"middleclick\": function (event) {\r\n                if (this.isEnabled(\"middleclick\")) {\r\n                    this.dispatch(\"middleclick\", this._makePointerEvent(\"middleclick\", event));\r\n                }\r\n            },\r\n            \"dblclick\": function (event) {\r\n                this.dispatchParents(\"dblclick\", this._makePointerEvent(\"dblclick\", event));\r\n            },\r\n            \"pointerover\": function (event) {\r\n                if (this.isEnabled(\"pointerover\")) {\r\n                    this.dispatch(\"pointerover\", this._makePointerEvent(\"pointerover\", event));\r\n                }\r\n            },\r\n            \"pointerout\": function (event) {\r\n                if (this.isEnabled(\"pointerout\")) {\r\n                    this.dispatch(\"pointerout\", this._makePointerEvent(\"pointerout\", event));\r\n                }\r\n            },\r\n            \"pointerdown\": function (event) {\r\n                this.dispatchParents(\"pointerdown\", this._makePointerEvent(\"pointerdown\", event));\r\n            },\r\n            \"pointerup\": function (event) {\r\n                if (this.isEnabled(\"pointerup\")) {\r\n                    this.dispatch(\"pointerup\", this._makePointerEvent(\"pointerup\", event));\r\n                }\r\n            },\r\n            \"globalpointerup\": function (event) {\r\n                if (this.isEnabled(\"globalpointerup\")) {\r\n                    this.dispatch(\"globalpointerup\", this._makePointerEvent(\"globalpointerup\", event));\r\n                }\r\n            },\r\n            \"globalpointermove\": function (event) {\r\n                if (this.isEnabled(\"globalpointermove\")) {\r\n                    this.dispatch(\"globalpointermove\", this._makePointerEvent(\"globalpointermove\", event));\r\n                }\r\n            },\r\n            \"wheel\": function (event) {\r\n                this.dispatchParents(\"wheel\", {\r\n                    type: \"wheel\",\r\n                    target: this._sprite,\r\n                    originalEvent: event.event,\r\n                    point: event.point,\r\n                });\r\n            },\r\n        }\r\n    });\r\n    return SpriteEventDispatcher;\r\n}(EventDispatcher));\r\n/**\r\n * A base class for all visual elements.\r\n *\r\n * @important\r\n */\r\nvar Sprite = /** @class */ (function (_super) {\r\n    __extends(Sprite, _super);\r\n    function Sprite() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        Object.defineProperty(_this, \"_adjustedLocalBounds\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: { left: 0, right: 0, top: 0, bottom: 0 }\r\n        });\r\n        Object.defineProperty(_this, \"_localBounds\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: { left: 0, right: 0, top: 0, bottom: 0 }\r\n        });\r\n        Object.defineProperty(_this, \"_parent\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(_this, \"_dataItem\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(_this, \"_templateField\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(_this, \"_sizeDirty\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        // Will be true only when dragging\r\n        Object.defineProperty(_this, \"_isDragging\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        // The event when the dragging starts\r\n        Object.defineProperty(_this, \"_dragEvent\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        // The position when dragging starts\r\n        Object.defineProperty(_this, \"_dragPoint\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(_this, \"_isHidden\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(_this, \"_isShowing\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(_this, \"_isHiding\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(_this, \"_isDown\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(_this, \"_downPoint\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(_this, \"_downPoints\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(_this, \"_toggleDp\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(_this, \"_dragDp\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(_this, \"_tooltipDp\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(_this, \"_hoverDp\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(_this, \"_focusDp\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(_this, \"_tooltipMoveDp\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(_this, \"_tooltipPointerDp\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(_this, \"_statesHandled\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        return _this;\r\n    }\r\n    Object.defineProperty(Sprite.prototype, \"_afterNew\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            this.setPrivateRaw(\"visible\", true);\r\n            _super.prototype._afterNew.call(this);\r\n        }\r\n    });\r\n    Object.defineProperty(Sprite.prototype, \"_markDirtyKey\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (key) {\r\n            _super.prototype._markDirtyKey.call(this, key);\r\n            if (key == \"x\" || key == \"y\" || key == \"dx\" || key == \"dy\") {\r\n                this.markDirtyBounds();\r\n                this._addPercentagePositionChildren();\r\n                this.markDirtyPosition();\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Sprite.prototype, \"_markDirtyPrivateKey\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (key) {\r\n            _super.prototype._markDirtyPrivateKey.call(this, key);\r\n            if (key == \"x\" || key == \"y\") {\r\n                this.markDirtyPosition();\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Sprite.prototype, \"_removeTemplateField\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            if (this._templateField) {\r\n                this._templateField._removeObjectTemplate(this);\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Sprite.prototype, \"_createEvents\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            return new SpriteEventDispatcher(this);\r\n        }\r\n    });\r\n    Object.defineProperty(Sprite.prototype, \"_processTemplateField\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            var template;\r\n            var field = this.get(\"templateField\");\r\n            if (field) {\r\n                var dataItem = this.dataItem;\r\n                if (dataItem) {\r\n                    var context = dataItem.dataContext;\r\n                    if (context) {\r\n                        template = context[field];\r\n                        if (!(template instanceof Template) && template) {\r\n                            template = Template.new(template);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            if (this._templateField !== template) {\r\n                this._removeTemplateField();\r\n                this._templateField = template;\r\n                if (template) {\r\n                    template._setObjectTemplate(this);\r\n                }\r\n                this._applyTemplates();\r\n            }\r\n        }\r\n    });\r\n    // TODO change this to run before the element is added to the parent, so that way\r\n    //      it doesn't need to apply the themes twice\r\n    Object.defineProperty(Sprite.prototype, \"_setDataItem\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (dataItem) {\r\n            var oldDataItem = this._dataItem;\r\n            this._dataItem = dataItem;\r\n            this._processTemplateField();\r\n            var eventType = \"dataitemchanged\";\r\n            if (this.events.isEnabled(eventType)) {\r\n                this.events.dispatch(eventType, {\r\n                    type: eventType,\r\n                    target: this,\r\n                    oldDataItem: oldDataItem,\r\n                    newDataItem: dataItem\r\n                });\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Sprite.prototype, \"dataItem\", {\r\n        /**\r\n         * @return DataItem\r\n         */\r\n        get: function () {\r\n            if (this._dataItem) {\r\n                return this._dataItem;\r\n            }\r\n            else {\r\n                var parent_1 = this._parent;\r\n                while (parent_1) {\r\n                    if (parent_1._dataItem) {\r\n                        return parent_1._dataItem;\r\n                    }\r\n                    else {\r\n                        parent_1 = parent_1._parent;\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        /**\r\n         * A [[DataItem]] used for this element.\r\n         *\r\n         * NOTE: data item is being assigned automatically in most cases where it\r\n         * matters. Use this accessor to set data item only if you know what you're\r\n         * doing.\r\n         *\r\n         * @param  value  Data item\r\n         */\r\n        set: function (value) {\r\n            this._setDataItem(value);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Sprite.prototype, \"_addPercentageSizeChildren\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            var parent = this.parent;\r\n            if (parent) {\r\n                if (this.get(\"width\") instanceof Percent || this.get(\"height\") instanceof Percent) {\r\n                    $array.pushOne(parent._percentageSizeChildren, this);\r\n                }\r\n                else {\r\n                    $array.removeFirst(parent._percentageSizeChildren, this);\r\n                }\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Sprite.prototype, \"_addPercentagePositionChildren\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            var parent = this.parent;\r\n            if (parent) {\r\n                if (this.get(\"x\") instanceof Percent || this.get(\"y\") instanceof Percent) {\r\n                    $array.pushOne(parent._percentagePositionChildren, this);\r\n                }\r\n                else {\r\n                    $array.removeFirst(parent._percentagePositionChildren, this);\r\n                }\r\n            }\r\n        }\r\n    });\r\n    /**\r\n     * @ignore\r\n     */\r\n    Object.defineProperty(Sprite.prototype, \"markDirtyPosition\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            this._root._addDirtyPosition(this);\r\n        }\r\n    });\r\n    Object.defineProperty(Sprite.prototype, \"updatePivotPoint\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            var bounds = this._localBounds;\r\n            if (bounds) {\r\n                var centerX = this.get(\"centerX\");\r\n                if (centerX != null) {\r\n                    this._display.pivot.x = bounds.left + $utils.relativeToValue(centerX, bounds.right - bounds.left);\r\n                }\r\n                var centerY = this.get(\"centerY\");\r\n                if (centerY != null) {\r\n                    this._display.pivot.y = bounds.top + $utils.relativeToValue(centerY, bounds.bottom - bounds.top);\r\n                }\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Sprite.prototype, \"_beforeChanged\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            var _this = this;\r\n            _super.prototype._beforeChanged.call(this);\r\n            // handling states in beforeChanged, otherwise states is not applied without animated theme\r\n            this._handleStates();\r\n            if (this.isDirty(\"tooltip\")) {\r\n                var previous = this._prevSettings.tooltip;\r\n                if (previous) {\r\n                    previous.dispose();\r\n                }\r\n            }\r\n            if (this.isDirty(\"layer\") || this.isDirty(\"layerMargin\")) {\r\n                this._display.setLayer(this.get(\"layer\"), this.get(\"layerMargin\"));\r\n                this.markDirtyLayer();\r\n            }\r\n            if (this.isDirty(\"tooltipPosition\")) {\r\n                var tooltipMoveDp = this._tooltipMoveDp;\r\n                if (tooltipMoveDp) {\r\n                    tooltipMoveDp.dispose();\r\n                    this._tooltipMoveDp = undefined;\r\n                }\r\n                var tooltipPointerDp = this._tooltipPointerDp;\r\n                if (tooltipPointerDp) {\r\n                    tooltipPointerDp.dispose();\r\n                    this._tooltipPointerDp = undefined;\r\n                }\r\n                if (this.get(\"tooltipPosition\") == \"pointer\") {\r\n                    this._tooltipPointerDp = new MultiDisposer([\r\n                        this.events.on(\"pointerover\", function () {\r\n                            _this._tooltipMoveDp = _this.events.on(\"globalpointermove\", function (e) {\r\n                                _this.showTooltip(e.point);\r\n                            });\r\n                        }),\r\n                        this.events.on(\"pointerout\", function () {\r\n                            var tooltipMoveDp = _this._tooltipMoveDp;\r\n                            if (tooltipMoveDp) {\r\n                                tooltipMoveDp.dispose();\r\n                                _this._tooltipMoveDp = undefined;\r\n                            }\r\n                        })\r\n                    ]);\r\n                }\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Sprite.prototype, \"_handleStates\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            if (!this._statesHandled) {\r\n                if (this.isDirty(\"active\")) {\r\n                    if (this.get(\"active\")) {\r\n                        this.states.applyAnimate(\"active\");\r\n                        this.set(\"ariaChecked\", true);\r\n                    }\r\n                    else {\r\n                        if (!this.isHidden()) {\r\n                            this.states.applyAnimate(\"default\");\r\n                        }\r\n                        this.set(\"ariaChecked\", false);\r\n                    }\r\n                    this.markDirtyAccessibility();\r\n                }\r\n                if (this.isDirty(\"disabled\")) {\r\n                    if (this.get(\"disabled\")) {\r\n                        this.states.applyAnimate(\"disabled\");\r\n                        this.set(\"ariaChecked\", false);\r\n                    }\r\n                    else {\r\n                        if (!this.isHidden()) {\r\n                            this.states.applyAnimate(\"default\");\r\n                        }\r\n                        this.set(\"ariaChecked\", true);\r\n                    }\r\n                    this.markDirtyAccessibility();\r\n                }\r\n                this._statesHandled = true;\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Sprite.prototype, \"_changed\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            var _this = this;\r\n            _super.prototype._changed.call(this);\r\n            var display = this._display;\r\n            var events = this.events;\r\n            if (this.isDirty(\"draggable\")) {\r\n                var draggable = this.get(\"draggable\");\r\n                if (draggable) {\r\n                    this.set(\"interactive\", true);\r\n                    this._dragDp = new MultiDisposer([\r\n                        events.on(\"pointerdown\", function (ev) {\r\n                            _this.dragStart(ev);\r\n                        }),\r\n                        events.on(\"globalpointermove\", function (ev) {\r\n                            _this.dragMove(ev);\r\n                        }),\r\n                        events.on(\"globalpointerup\", function (ev) {\r\n                            _this.dragStop(ev);\r\n                        })\r\n                    ]);\r\n                }\r\n                else {\r\n                    if (this._dragDp) {\r\n                        this._dragDp.dispose();\r\n                        this._dragDp = undefined;\r\n                    }\r\n                }\r\n                display.cancelTouch = draggable ? true : false;\r\n            }\r\n            if (this.isDirty(\"tooltipText\") || this.isDirty(\"tooltipHTML\") || this.isDirty(\"showTooltipOn\")) {\r\n                var tooltipText = this.get(\"tooltipText\");\r\n                var tooltipHTML = this.get(\"tooltipHTML\");\r\n                var showTooltipOn = this.get(\"showTooltipOn\", \"hover\");\r\n                if (this._tooltipDp) {\r\n                    this._tooltipDp.dispose();\r\n                    this._tooltipDp = undefined;\r\n                }\r\n                if (tooltipText || tooltipHTML) {\r\n                    if (showTooltipOn == \"click\") {\r\n                        this._tooltipDp = new MultiDisposer([\r\n                            events.on(\"click\", function () {\r\n                                _this.setTimeout(function () { return _this.showTooltip(); }, 10);\r\n                            }),\r\n                            $utils.addEventListener(document, \"click\", function (_ev) {\r\n                                _this.hideTooltip();\r\n                            })\r\n                        ]);\r\n                    }\r\n                    else if (showTooltipOn == \"always\") {\r\n                        // nothing\r\n                    }\r\n                    else {\r\n                        this._tooltipDp = new MultiDisposer([\r\n                            events.on(\"pointerover\", function () {\r\n                                _this.showTooltip();\r\n                            }),\r\n                            events.on(\"pointerout\", function () {\r\n                                _this.hideTooltip();\r\n                            })\r\n                        ]);\r\n                    }\r\n                }\r\n            }\r\n            if (this.isDirty(\"toggleKey\")) {\r\n                var toggleKey_1 = this.get(\"toggleKey\");\r\n                if (toggleKey_1 && toggleKey_1 != \"none\") {\r\n                    this._toggleDp = events.on(\"click\", function () {\r\n                        if (!_this._isDragging) {\r\n                            _this.set(toggleKey_1, !_this.get(toggleKey_1));\r\n                        }\r\n                    });\r\n                }\r\n                else {\r\n                    if (this._toggleDp) {\r\n                        this._toggleDp.dispose();\r\n                        this._toggleDp = undefined;\r\n                    }\r\n                }\r\n            }\r\n            if (this.isDirty(\"opacity\")) {\r\n                display.alpha = Math.max(0, this.get(\"opacity\", 1));\r\n            }\r\n            if (this.isDirty(\"rotation\")) {\r\n                this.markDirtyBounds();\r\n                display.angle = this.get(\"rotation\", 0);\r\n            }\r\n            if (this.isDirty(\"scale\")) {\r\n                this.markDirtyBounds();\r\n                display.scale = this.get(\"scale\", 0);\r\n            }\r\n            if (this.isDirty(\"centerX\") || this.isDirty(\"centerY\")) {\r\n                this.markDirtyBounds();\r\n                this.updatePivotPoint();\r\n            }\r\n            if (this.isDirty(\"visible\") || this.isPrivateDirty(\"visible\") || this.isDirty(\"forceHidden\")) {\r\n                if (!this.get(\"visible\") || !this.getPrivate(\"visible\") || this.get(\"forceHidden\")) {\r\n                    display.visible = false;\r\n                    this.hideTooltip();\r\n                }\r\n                else {\r\n                    display.visible = true;\r\n                }\r\n                this.markDirtyBounds();\r\n                if (this.get(\"focusable\")) {\r\n                    this.markDirtyAccessibility();\r\n                }\r\n            }\r\n            if (this.isDirty(\"width\") || this.isDirty(\"height\")) {\r\n                this.markDirtyBounds();\r\n                this._addPercentageSizeChildren();\r\n                var parent_2 = this.parent;\r\n                if (parent_2) {\r\n                    if ((this.isDirty(\"width\") && this.get(\"width\") instanceof Percent) || (this.isDirty(\"height\") && this.get(\"height\") instanceof Percent)) {\r\n                        parent_2.markDirty();\r\n                        parent_2._prevWidth = 0;\r\n                    }\r\n                }\r\n                this._sizeDirty = true;\r\n            }\r\n            if (this.isDirty(\"maxWidth\") || this.isDirty(\"maxHeight\") || this.isPrivateDirty(\"width\") || this.isPrivateDirty(\"height\") || this.isDirty(\"minWidth\") || this.isDirty(\"minHeight\") || this.isPrivateDirty(\"maxWidth\") || this.isPrivateDirty(\"maxHeight\") || this.isPrivateDirty(\"minWidth\") || this.isPrivateDirty(\"minHeight\")) {\r\n                this.markDirtyBounds();\r\n                this._sizeDirty = true;\r\n            }\r\n            if (this._sizeDirty) {\r\n                this._updateSize();\r\n            }\r\n            if (this.isDirty(\"wheelable\")) {\r\n                var wheelable = this.get(\"wheelable\");\r\n                if (wheelable) {\r\n                    this.set(\"interactive\", true);\r\n                }\r\n                display.wheelable = wheelable ? true : false;\r\n            }\r\n            // Accessibility\r\n            if (this.isDirty(\"tabindexOrder\") || this.isDirty(\"focusableGroup\")) {\r\n                if (this.get(\"focusable\")) {\r\n                    this._root._registerTabindexOrder(this);\r\n                }\r\n                else {\r\n                    this._root._unregisterTabindexOrder(this);\r\n                }\r\n            }\r\n            if (this.isDirty(\"filter\")) {\r\n                //this.markDirtyBounds();\r\n                display.filter = this.get(\"filter\");\r\n            }\r\n            if (this.isDirty(\"cursorOverStyle\")) {\r\n                display.cursorOverStyle = this.get(\"cursorOverStyle\");\r\n            }\r\n            if (this.isDirty(\"hoverOnFocus\")) {\r\n                if (this.get(\"hoverOnFocus\")) {\r\n                    this._focusDp = new MultiDisposer([\r\n                        events.on(\"focus\", function () {\r\n                            // TODO: proper hover, not just tooltip\r\n                            _this.showTooltip();\r\n                        }),\r\n                        events.on(\"blur\", function () {\r\n                            // TODO: proper hover, not just tooltip\r\n                            _this.hideTooltip();\r\n                        })\r\n                    ]);\r\n                }\r\n                else {\r\n                    if (this._focusDp) {\r\n                        this._focusDp.dispose();\r\n                        this._focusDp = undefined;\r\n                    }\r\n                }\r\n            }\r\n            if (this.isDirty(\"focusable\")) {\r\n                if (this.get(\"focusable\")) {\r\n                    this._root._registerTabindexOrder(this);\r\n                }\r\n                else {\r\n                    this._root._unregisterTabindexOrder(this);\r\n                }\r\n                this.markDirtyAccessibility();\r\n            }\r\n            if (this.isDirty(\"role\") || this.isDirty(\"ariaLive\") || this.isDirty(\"ariaChecked\") || this.isDirty(\"ariaHidden\") || this.isDirty(\"ariaOrientation\") || this.isDirty(\"ariaValueNow\") || this.isDirty(\"ariaValueMin\") || this.isDirty(\"ariaValueMax\") || this.isDirty(\"ariaValueText\") || this.isDirty(\"ariaLabel\") || this.isDirty(\"ariaControls\")) {\r\n                // display.accessibility.ariaLabel = populateString(this, this.get(\"ariaLabel\", \"\"));\r\n                // @todo make sure ariaLabel gets populated in Root\r\n                this.markDirtyAccessibility();\r\n            }\r\n            if (this.isDirty(\"exportable\")) {\r\n                display.exportable = this.get(\"exportable\");\r\n            }\r\n            if (this.isDirty(\"interactive\")) {\r\n                var events_1 = this.events;\r\n                if (this.get(\"interactive\")) {\r\n                    this._hoverDp = new MultiDisposer([\r\n                        events_1.on(\"click\", function (ev) {\r\n                            if ($utils.isTouchEvent(ev.originalEvent)) {\r\n                                if (!_this.getPrivate(\"touchHovering\")) {\r\n                                    _this.setTimeout(function () {\r\n                                        _this._handleOver();\r\n                                        if (_this.get(\"tooltipText\") || _this.get(\"tooltipHTML\")) {\r\n                                            _this.showTooltip();\r\n                                        }\r\n                                        _this.setPrivateRaw(\"touchHovering\", true);\r\n                                        _this.events.dispatch(\"pointerover\", {\r\n                                            type: \"pointerover\",\r\n                                            target: ev.target,\r\n                                            originalEvent: ev.originalEvent,\r\n                                            point: ev.point,\r\n                                            simulated: ev.simulated\r\n                                        });\r\n                                    }, 10);\r\n                                }\r\n                            }\r\n                        }),\r\n                        events_1.on(\"globalpointerup\", function (ev) {\r\n                            if ($utils.isTouchEvent(ev.originalEvent)) {\r\n                                if (_this.getPrivate(\"touchHovering\")) {\r\n                                    _this._handleOut();\r\n                                    if (_this.get(\"tooltipText\") || _this.get(\"tooltipHTML\")) {\r\n                                        _this.hideTooltip();\r\n                                    }\r\n                                }\r\n                                _this.setPrivateRaw(\"touchHovering\", false);\r\n                                _this.events.dispatch(\"pointerout\", {\r\n                                    type: \"pointerout\",\r\n                                    target: ev.target,\r\n                                    originalEvent: ev.originalEvent,\r\n                                    point: ev.point,\r\n                                    simulated: ev.simulated\r\n                                });\r\n                            }\r\n                            if (_this._isDown) {\r\n                                _this._handleUp(ev);\r\n                            }\r\n                            //this._isDown = false;\r\n                        }),\r\n                        events_1.on(\"pointerover\", function () {\r\n                            _this._handleOver();\r\n                        }),\r\n                        events_1.on(\"pointerout\", function () {\r\n                            _this._handleOut();\r\n                        }),\r\n                        events_1.on(\"pointerdown\", function (e) {\r\n                            _this._handleDown(e);\r\n                        })\r\n                    ]);\r\n                }\r\n                else {\r\n                    this._display.interactive = false;\r\n                    if (this._hoverDp) {\r\n                        this._hoverDp.dispose();\r\n                        this._hoverDp = undefined;\r\n                    }\r\n                }\r\n            }\r\n            if (this.isDirty(\"forceInactive\")) {\r\n                this._display.inactive = this.get(\"forceInactive\", false);\r\n            }\r\n            if (this.get(\"showTooltipOn\") == \"always\" && this._display.visible) {\r\n                this.showTooltip();\r\n            }\r\n        }\r\n    });\r\n    /**\r\n     * @ignore\r\n     * @todo should this be user-accessible?\r\n     */\r\n    Object.defineProperty(Sprite.prototype, \"dragStart\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (e) {\r\n            this._dragEvent = e;\r\n            this.events.stopParentDispatch();\r\n        }\r\n    });\r\n    /**\r\n     * @ignore\r\n     * @todo should this be user-accessible?\r\n     */\r\n    Object.defineProperty(Sprite.prototype, \"dragStop\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (e) {\r\n            this._dragEvent = undefined;\r\n            this._dragPoint = undefined;\r\n            this.events.stopParentDispatch();\r\n            if (this._isDragging) {\r\n                this._isDragging = false;\r\n                var type = \"dragstop\";\r\n                if (this.events.isEnabled(type)) {\r\n                    this.events.dispatch(type, {\r\n                        type: type,\r\n                        target: this,\r\n                        originalEvent: e.originalEvent,\r\n                        point: e.point,\r\n                        simulated: e.simulated,\r\n                    });\r\n                }\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Sprite.prototype, \"_handleOver\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            if (!this.isHidden()) {\r\n                if (this.get(\"active\") && this.states.lookup(\"hoverActive\")) {\r\n                    this.states.applyAnimate(\"hoverActive\");\r\n                }\r\n                else if (this.get(\"disabled\") && this.states.lookup(\"hoverDisabled\")) {\r\n                    this.states.applyAnimate(\"hoverDisabled\");\r\n                }\r\n                else {\r\n                    this.states.applyAnimate(\"hover\");\r\n                }\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Sprite.prototype, \"_handleOut\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            if (!this.isHidden()) {\r\n                if (this.get(\"active\") && this.states.lookup(\"active\")) {\r\n                    this.states.applyAnimate(\"active\");\r\n                }\r\n                else if (this.get(\"disabled\") && this.states.lookup(\"disabled\")) {\r\n                    this.states.applyAnimate(\"disabled\");\r\n                }\r\n                else {\r\n                    if (this.states.lookup(\"hover\") || this.states.lookup(\"hoverActive\")) {\r\n                        this.states.applyAnimate(\"default\");\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Sprite.prototype, \"_handleUp\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (e) {\r\n            if (!this.isHidden()) {\r\n                if (this.get(\"active\") && this.states.lookup(\"active\")) {\r\n                    this.states.applyAnimate(\"active\");\r\n                }\r\n                else if (this.get(\"disabled\") && this.states.lookup(\"disabled\")) {\r\n                    this.states.applyAnimate(\"disabled\");\r\n                }\r\n                else if (this.states.lookup(\"down\")) {\r\n                    if (this.isHover()) {\r\n                        this.states.applyAnimate(\"hover\");\r\n                    }\r\n                    else {\r\n                        this.states.applyAnimate(\"default\");\r\n                    }\r\n                }\r\n                // @todo remove this once migrated to _downPoints\r\n                this._downPoint = undefined;\r\n                var pointerId = $utils.getPointerId(e.originalEvent);\r\n                delete this._downPoints[pointerId];\r\n                if ($object.keys(this._downPoints).length == 0) {\r\n                    this._isDown = false;\r\n                }\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Sprite.prototype, \"_hasMoved\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (e) {\r\n            // @todo remove this once migrated to _downPoints\r\n            // if (this._downPoint) {\r\n            // \tconst x = Math.abs(this._downPoint.x - e.point.x);\r\n            // \tconst y = Math.abs(this._downPoint.y - e.point.y);\r\n            // \treturn (x > 5) || (y > 5);\r\n            // }\r\n            var pointerId = $utils.getPointerId(e.originalEvent);\r\n            var downPoint = this._downPoints[pointerId];\r\n            if (downPoint) {\r\n                var x = Math.abs(downPoint.x - e.point.x);\r\n                var y = Math.abs(downPoint.y - e.point.y);\r\n                return (x > 5) || (y > 5);\r\n            }\r\n            return false;\r\n        }\r\n    });\r\n    Object.defineProperty(Sprite.prototype, \"_hasDown\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            return $object.keys(this._downPoints).length > 0;\r\n        }\r\n    });\r\n    Object.defineProperty(Sprite.prototype, \"_handleDown\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (e) {\r\n            var parent = this.parent;\r\n            if (parent && !this.get(\"draggable\")) {\r\n                parent._handleDown(e);\r\n            }\r\n            if (this.get(\"interactive\") && !this.isHidden()) {\r\n                if (this.states.lookup(\"down\")) {\r\n                    this.states.applyAnimate(\"down\");\r\n                }\r\n                this._downPoint = {\r\n                    x: e.point.x,\r\n                    y: e.point.y\r\n                };\r\n                // @todo remove this once migrated to _downPoints\r\n                this._isDown = true;\r\n                var pointerId = $utils.getPointerId(e.originalEvent);\r\n                this._downPoints[pointerId] = {\r\n                    x: e.point.x,\r\n                    y: e.point.y\r\n                };\r\n            }\r\n        }\r\n    });\r\n    /**\r\n     * @ignore\r\n     * @todo should this be user-accessible?\r\n     */\r\n    Object.defineProperty(Sprite.prototype, \"dragMove\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (e) {\r\n            var dragEvent = this._dragEvent;\r\n            if (dragEvent) {\r\n                if (dragEvent.simulated && !e.simulated) {\r\n                    return true;\r\n                }\r\n                var angle = 0;\r\n                var parent_3 = this.parent;\r\n                while (parent_3 != null) {\r\n                    angle += parent_3.get(\"rotation\", 0);\r\n                    parent_3 = parent_3.parent;\r\n                }\r\n                var x = e.point.x - dragEvent.point.x;\r\n                var y = e.point.y - dragEvent.point.y;\r\n                var events = this.events;\r\n                if (dragEvent.simulated && !this._isDragging) {\r\n                    this._isDragging = true;\r\n                    this._dragEvent = e;\r\n                    this._dragPoint = {\r\n                        x: this.x(),\r\n                        y: this.y()\r\n                    };\r\n                    var type = \"dragstart\";\r\n                    if (events.isEnabled(type)) {\r\n                        events.dispatch(type, {\r\n                            type: type,\r\n                            target: this,\r\n                            originalEvent: e.originalEvent,\r\n                            point: e.point,\r\n                            simulated: e.simulated,\r\n                        });\r\n                    }\r\n                }\r\n                if (this._isDragging) {\r\n                    var dragPoint = this._dragPoint;\r\n                    this.set(\"x\", dragPoint.x + x * $math.cos(angle) + y * $math.sin(angle));\r\n                    this.set(\"y\", dragPoint.y + y * $math.cos(angle) - x * $math.sin(angle));\r\n                    var type = \"dragged\";\r\n                    if (events.isEnabled(type)) {\r\n                        events.dispatch(type, {\r\n                            type: type,\r\n                            target: this,\r\n                            originalEvent: e.originalEvent,\r\n                            point: e.point,\r\n                            simulated: e.simulated,\r\n                        });\r\n                    }\r\n                }\r\n                else {\r\n                    if (Math.hypot(x, y) > 5) {\r\n                        this._isDragging = true;\r\n                        this._dragEvent = e;\r\n                        this._dragPoint = {\r\n                            x: this.x(),\r\n                            y: this.y()\r\n                        };\r\n                        var type = \"dragstart\";\r\n                        if (events.isEnabled(type)) {\r\n                            events.dispatch(type, {\r\n                                type: type,\r\n                                target: this,\r\n                                originalEvent: e.originalEvent,\r\n                                point: e.point,\r\n                                simulated: e.simulated\r\n                            });\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Sprite.prototype, \"_updateSize\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n        }\r\n    });\r\n    Object.defineProperty(Sprite.prototype, \"_getBounds\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            this._localBounds = this._display.getLocalBounds();\r\n        }\r\n    });\r\n    /**\r\n     * Returns depth (how deep in the hierachy of the content tree) of this\r\n     * element.\r\n     *\r\n     * @return Depth\r\n     */\r\n    Object.defineProperty(Sprite.prototype, \"depth\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            var self = this.parent;\r\n            var depth = 0;\r\n            while (true) {\r\n                if (self) {\r\n                    ++depth;\r\n                    self = self.parent;\r\n                }\r\n                else {\r\n                    return depth;\r\n                }\r\n            }\r\n        }\r\n    });\r\n    /**\r\n     * @ignore\r\n     */\r\n    Object.defineProperty(Sprite.prototype, \"markDirtySize\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            this._sizeDirty = true;\r\n            this.markDirty();\r\n        }\r\n    });\r\n    /**\r\n     * @ignore\r\n     */\r\n    Object.defineProperty(Sprite.prototype, \"markDirtyBounds\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            var display = this._display;\r\n            if (this.get(\"isMeasured\")) {\r\n                this._root._addDirtyBounds(this);\r\n                display.isMeasured = true;\r\n                display.invalidateBounds();\r\n                var parent_4 = this.parent;\r\n                if (parent_4 && this.get(\"position\") != \"absolute\") {\r\n                    if (parent_4.get(\"width\") == null || parent_4.get(\"height\") == null || parent_4.get(\"layout\")) {\r\n                        parent_4.markDirtyBounds();\r\n                    }\r\n                }\r\n                if (this.get(\"focusable\") && this.isFocus()) {\r\n                    this.markDirtyAccessibility();\r\n                }\r\n            }\r\n        }\r\n    });\r\n    /**\r\n     * @ignore\r\n     */\r\n    Object.defineProperty(Sprite.prototype, \"markDirtyAccessibility\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            //if (this._root.focused(this)) {\r\n            this._root._invalidateAccessibility(this);\r\n            //}\r\n        }\r\n    });\r\n    /**\r\n     * @ignore\r\n     */\r\n    Object.defineProperty(Sprite.prototype, \"markDirtyLayer\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            //this._display.markDirtyLayer(this.isDirty(\"opacity\") || this.isDirty(\"visible\")); https://codepen.io/team/amcharts/pen/gOWZPmP <- problems\r\n            this._display.markDirtyLayer(true);\r\n        }\r\n    });\r\n    /**\r\n     * @ignore\r\n     */\r\n    Object.defineProperty(Sprite.prototype, \"markDirty\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            _super.prototype.markDirty.call(this);\r\n            this.markDirtyLayer();\r\n        }\r\n    });\r\n    Object.defineProperty(Sprite.prototype, \"_updateBounds\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            var oldBounds = this._adjustedLocalBounds;\r\n            var newBounds;\r\n            // if display.visible == false, it still returns bounds\r\n            if (!this.get(\"visible\") || !this.getPrivate(\"visible\") || this.get(\"forceHidden\")) {\r\n                newBounds = {\r\n                    left: 0,\r\n                    right: 0,\r\n                    top: 0,\r\n                    bottom: 0\r\n                };\r\n                this._localBounds = newBounds;\r\n                this._adjustedLocalBounds = newBounds;\r\n            }\r\n            else {\r\n                this._getBounds();\r\n                this._fixMinBounds(this._localBounds);\r\n                this.updatePivotPoint();\r\n                this._adjustedLocalBounds = this._display.getAdjustedBounds(this._localBounds);\r\n                newBounds = this._adjustedLocalBounds;\r\n            }\r\n            if (!oldBounds || (oldBounds.left !== newBounds.left || oldBounds.top !== newBounds.top || oldBounds.right !== newBounds.right || oldBounds.bottom !== newBounds.bottom)) {\r\n                var eventType = \"boundschanged\";\r\n                if (this.events.isEnabled(eventType)) {\r\n                    this.events.dispatch(eventType, { type: eventType, target: this });\r\n                }\r\n                if (this.parent) {\r\n                    this.parent.markDirty();\r\n                    this.parent.markDirtyBounds();\r\n                }\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Sprite.prototype, \"_fixMinBounds\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (bounds) {\r\n            var minWidth = this.get(\"minWidth\", this.getPrivate(\"minWidth\"));\r\n            var minHeight = this.get(\"minHeight\", this.getPrivate(\"minHeight\"));\r\n            if ($type.isNumber(minWidth)) {\r\n                if (bounds.right - bounds.left < minWidth) {\r\n                    bounds.right = bounds.left + minWidth;\r\n                }\r\n            }\r\n            if ($type.isNumber(minHeight)) {\r\n                if (bounds.bottom - bounds.top < minHeight) {\r\n                    bounds.bottom = bounds.top + minHeight;\r\n                }\r\n            }\r\n            var privateWidth = this.getPrivate(\"width\");\r\n            var privateHeight = this.getPrivate(\"height\");\r\n            if ($type.isNumber(privateWidth)) {\r\n                bounds.right = bounds.left + privateWidth;\r\n            }\r\n            if ($type.isNumber(privateHeight)) {\r\n                bounds.bottom = bounds.top + privateHeight;\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Sprite.prototype, \"_removeParent\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (parent) {\r\n            if (parent) {\r\n                parent.children.removeValue(this);\r\n                $array.removeFirst(parent._percentageSizeChildren, this);\r\n                $array.removeFirst(parent._percentagePositionChildren, this);\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Sprite.prototype, \"_clearDirty\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            _super.prototype._clearDirty.call(this);\r\n            this._sizeDirty = false;\r\n            this._statesHandled = false;\r\n        }\r\n    });\r\n    /**\r\n     * Simulate hover over element.\r\n     */\r\n    Object.defineProperty(Sprite.prototype, \"hover\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            this.showTooltip();\r\n            this._handleOver();\r\n        }\r\n    });\r\n    /**\r\n     * Simulate unhover over element.\r\n     */\r\n    Object.defineProperty(Sprite.prototype, \"unhover\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            this.hideTooltip();\r\n            this._handleOut();\r\n        }\r\n    });\r\n    /**\r\n     * Shows element's [[Tooltip]].\r\n     */\r\n    Object.defineProperty(Sprite.prototype, \"showTooltip\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (point) {\r\n            var tooltip = this.getTooltip();\r\n            var tooltipText = this.get(\"tooltipText\");\r\n            var tooltipHTML = this.get(\"tooltipHTML\");\r\n            if ((tooltipText || tooltipHTML) && tooltip) {\r\n                var tooltipPosition = this.get(\"tooltipPosition\");\r\n                var tooltipTarget = this.getPrivate(\"tooltipTarget\", this);\r\n                if (tooltipPosition == \"fixed\" || !point) {\r\n                    this._display._setMatrix();\r\n                    point = this.toGlobal(tooltipTarget._getTooltipPoint());\r\n                }\r\n                tooltip.set(\"pointTo\", point);\r\n                tooltip.set(\"tooltipTarget\", tooltipTarget);\r\n                if (!tooltip.get(\"x\")) {\r\n                    tooltip.set(\"x\", point.x);\r\n                }\r\n                if (!tooltip.get(\"y\")) {\r\n                    tooltip.set(\"y\", point.y);\r\n                }\r\n                if (tooltipText) {\r\n                    tooltip.label.set(\"text\", tooltipText);\r\n                }\r\n                if (tooltipHTML) {\r\n                    tooltip.label.set(\"html\", tooltipHTML);\r\n                }\r\n                var dataItem = this.dataItem;\r\n                if (dataItem) {\r\n                    tooltip.label._setDataItem(dataItem);\r\n                }\r\n                if (this.get(\"showTooltipOn\") == \"always\" && (point.x < 0 || point.x > this._root.width() || point.y < 0 || point.y > this._root.height())) {\r\n                    this.hideTooltip();\r\n                    return;\r\n                }\r\n                tooltip.label.text.markDirtyText();\r\n                var promise = tooltip.show();\r\n                this.setPrivateRaw(\"showingTooltip\", true);\r\n                return promise;\r\n            }\r\n        }\r\n    });\r\n    /**\r\n     * Hides element's [[Tooltip]].\r\n     */\r\n    Object.defineProperty(Sprite.prototype, \"hideTooltip\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            var tooltip = this.getTooltip();\r\n            if (tooltip) {\r\n                var timeout = tooltip.get(\"keepTargetHover\") && tooltip.get(\"stateAnimationDuration\", 0) == 0 ? 400 : undefined;\r\n                var promise = tooltip.hide(timeout);\r\n                this.setPrivateRaw(\"showingTooltip\", false);\r\n                return promise;\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Sprite.prototype, \"_getTooltipPoint\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            var bounds = this._localBounds;\r\n            if (bounds) {\r\n                var x = 0;\r\n                var y = 0;\r\n                if (!this.get(\"isMeasured\")) {\r\n                    x = $utils.relativeToValue(this.get(\"tooltipX\", 0), this.width());\r\n                    y = $utils.relativeToValue(this.get(\"tooltipY\", 0), this.height());\r\n                }\r\n                else {\r\n                    x = bounds.left + $utils.relativeToValue(this.get(\"tooltipX\", 0), bounds.right - bounds.left);\r\n                    y = bounds.top + $utils.relativeToValue(this.get(\"tooltipY\", 0), bounds.bottom - bounds.top);\r\n                }\r\n                return { x: x, y: y };\r\n            }\r\n            return { x: 0, y: 0 };\r\n        }\r\n    });\r\n    /**\r\n     * Returns [[Tooltip]] used for this element.\r\n     *\r\n     * @return Tooltip\r\n     */\r\n    Object.defineProperty(Sprite.prototype, \"getTooltip\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            var tooltip = this.get(\"tooltip\");\r\n            if (!tooltip) {\r\n                var parent_5 = this.parent;\r\n                if (parent_5) {\r\n                    return parent_5.getTooltip();\r\n                }\r\n            }\r\n            else {\r\n                return tooltip;\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Sprite.prototype, \"_updatePosition\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            var parent = this.parent;\r\n            var dx = this.get(\"dx\", 0);\r\n            var dy = this.get(\"dy\", 0);\r\n            var x = this.get(\"x\");\r\n            var _x = this.getPrivate(\"x\");\r\n            var xx = 0;\r\n            var yy = 0;\r\n            var position = this.get(\"position\");\r\n            if (x instanceof Percent) {\r\n                if (parent) {\r\n                    x = parent.innerWidth() * x.value + parent.get(\"paddingLeft\", 0);\r\n                }\r\n                else {\r\n                    x = 0;\r\n                }\r\n            }\r\n            if ($type.isNumber(x)) {\r\n                xx = x + dx;\r\n            }\r\n            else {\r\n                if (_x != null) {\r\n                    xx = _x;\r\n                }\r\n                else if (parent) {\r\n                    if (position == \"relative\") {\r\n                        xx = parent.get(\"paddingLeft\", 0) + dx;\r\n                    }\r\n                }\r\n            }\r\n            var y = this.get(\"y\");\r\n            var _y = this.getPrivate(\"y\");\r\n            if (y instanceof Percent) {\r\n                if (parent) {\r\n                    y = parent.innerHeight() * y.value + parent.get(\"paddingTop\", 0);\r\n                }\r\n                else {\r\n                    y = 0;\r\n                }\r\n            }\r\n            if ($type.isNumber(y)) {\r\n                yy = y + dy;\r\n            }\r\n            else {\r\n                if (_y != null) {\r\n                    yy = _y;\r\n                }\r\n                else if (parent) {\r\n                    if (position == \"relative\") {\r\n                        yy = parent.get(\"paddingTop\", 0) + dy;\r\n                    }\r\n                }\r\n            }\r\n            var display = this._display;\r\n            if (display.x != xx || display.y != yy) {\r\n                display.invalidateBounds();\r\n                display.x = xx;\r\n                display.y = yy;\r\n                var eventType = \"positionchanged\";\r\n                if (this.events.isEnabled(eventType)) {\r\n                    this.events.dispatch(eventType, { type: eventType, target: this });\r\n                }\r\n            }\r\n            // Update tooltip position together with the Sprite\r\n            if (this.getPrivate(\"showingTooltip\")) {\r\n                this.showTooltip();\r\n            }\r\n        }\r\n    });\r\n    /**\r\n     * Returns element's actual X position in pixels.\r\n     *\r\n     * @return X (px)\r\n     */\r\n    Object.defineProperty(Sprite.prototype, \"x\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            var x = this.get(\"x\");\r\n            var _x = this.getPrivate(\"x\");\r\n            var parent = this.parent;\r\n            if (parent) {\r\n                if (x instanceof Percent) {\r\n                    return $utils.relativeToValue(x, parent.innerWidth()) + parent.get(\"paddingLeft\", 0);\r\n                }\r\n                else {\r\n                    if (!$type.isNumber(x)) {\r\n                        if (_x != null) {\r\n                            return _x;\r\n                        }\r\n                        else {\r\n                            return parent.get(\"paddingLeft\", this._display.x);\r\n                        }\r\n                    }\r\n                    else {\r\n                        return x;\r\n                    }\r\n                }\r\n            }\r\n            return this._display.x;\r\n        }\r\n    });\r\n    /**\r\n     * Returns element's actual Y position in pixels.\r\n     *\r\n     * @return Y (px)\r\n     */\r\n    Object.defineProperty(Sprite.prototype, \"y\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            var _y = this.getPrivate(\"y\");\r\n            if (_y != null) {\r\n                return _y;\r\n            }\r\n            var y = this.get(\"y\");\r\n            var parent = this.parent;\r\n            if (parent) {\r\n                if (y instanceof Percent) {\r\n                    return $utils.relativeToValue(y, parent.innerHeight()) + parent.get(\"paddingTop\", 0);\r\n                }\r\n                else {\r\n                    if (!$type.isNumber(y)) {\r\n                        if (_y != null) {\r\n                            return _y;\r\n                        }\r\n                        else {\r\n                            return parent.get(\"paddingTop\", this._display.y);\r\n                        }\r\n                    }\r\n                    else {\r\n                        return y;\r\n                    }\r\n                }\r\n            }\r\n            return this._display.y;\r\n        }\r\n    });\r\n    Object.defineProperty(Sprite.prototype, \"_dispose\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            _super.prototype._dispose.call(this);\r\n            this._display.dispose();\r\n            this._removeTemplateField();\r\n            this._removeParent(this.parent);\r\n            this._root._removeFocusElement(this);\r\n            var tooltip = this.get(\"tooltip\");\r\n            if (tooltip) {\r\n                tooltip.dispose();\r\n            }\r\n            this.markDirty();\r\n        }\r\n    });\r\n    /**\r\n     * @ignore\r\n     */\r\n    Object.defineProperty(Sprite.prototype, \"adjustedLocalBounds\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            this._fixMinBounds(this._adjustedLocalBounds);\r\n            return this._adjustedLocalBounds;\r\n        }\r\n    });\r\n    /**\r\n     * Returns local coordinates of the element's bounds.\r\n     *\r\n     * @ignore\r\n     * @return Global bounds\r\n     */\r\n    Object.defineProperty(Sprite.prototype, \"localBounds\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            return this._localBounds;\r\n        }\r\n    });\r\n    /**\r\n     * Returns adjusted local coordinates of the element's bounds.\r\n     *\r\n     * @ignore\r\n     * @return Global bounds\r\n     */\r\n    Object.defineProperty(Sprite.prototype, \"bounds\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            var bounds = this._adjustedLocalBounds;\r\n            var x = this.x();\r\n            var y = this.y();\r\n            return { left: bounds.left + x, right: bounds.right + x, top: bounds.top + y, bottom: bounds.bottom + y };\r\n        }\r\n    });\r\n    /**\r\n     * Returns global coordinates of the element's bounds.\r\n     *\r\n     * @ignore\r\n     * @return Global bounds\r\n     */\r\n    Object.defineProperty(Sprite.prototype, \"globalBounds\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            var bounds = this.localBounds();\r\n            var p0 = this.toGlobal({ x: bounds.left, y: bounds.top });\r\n            var p1 = this.toGlobal({ x: bounds.right, y: bounds.top });\r\n            var p2 = this.toGlobal({ x: bounds.right, y: bounds.bottom });\r\n            var p3 = this.toGlobal({ x: bounds.left, y: bounds.bottom });\r\n            return {\r\n                left: Math.min(p0.x, p1.x, p2.x, p3.x),\r\n                top: Math.min(p0.y, p1.y, p2.y, p3.y),\r\n                right: Math.max(p0.x, p1.x, p2.x, p3.x),\r\n                bottom: Math.max(p0.y, p1.y, p2.y, p3.y)\r\n            };\r\n        }\r\n    });\r\n    Object.defineProperty(Sprite.prototype, \"_onShow\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (_duration) {\r\n        }\r\n    });\r\n    Object.defineProperty(Sprite.prototype, \"_onHide\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (_duration) {\r\n        }\r\n    });\r\n    /**\r\n     * Plays initial reveal animation regardless if element is currently hidden\r\n     * or visible.\r\n     *\r\n     * @param   duration  Duration of the animation in milliseconds\r\n     * @param   delay     Delay showing of the element by X milliseconds\r\n     * @return            Promise\r\n     */\r\n    Object.defineProperty(Sprite.prototype, \"appear\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (duration, delay) {\r\n            return __awaiter(this, void 0, void 0, function () {\r\n                var _this = this;\r\n                return __generator(this, function (_a) {\r\n                    switch (_a.label) {\r\n                        case 0: return [4 /*yield*/, this.hide(0)];\r\n                        case 1:\r\n                            _a.sent();\r\n                            if (delay) {\r\n                                return [2 /*return*/, new Promise(function (success, _error) {\r\n                                        _this.setTimeout(function () {\r\n                                            success(_this.show(duration));\r\n                                        }, delay);\r\n                                    })];\r\n                            }\r\n                            else {\r\n                                return [2 /*return*/, this.show(duration)];\r\n                            }\r\n                            return [2 /*return*/];\r\n                    }\r\n                });\r\n            });\r\n        }\r\n    });\r\n    /**\r\n     * Shows currently hidden element and returns a `Promise` which completes\r\n     * when all showing animations are finished.\r\n     *\r\n     * ```TypeScript\r\n     * series.show().then(function(ev) {\r\n     *   console.log(\"Series is now fully visible\");\r\n     * })\r\n     * ```\r\n     * ```JavaScript\r\n     * series.show().then(function(ev) {\r\n     *   console.log(\"Series is now fully visible\");\r\n     * })\r\n     * ```\r\n     *\r\n     * @return Promise\r\n     */\r\n    Object.defineProperty(Sprite.prototype, \"show\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (duration) {\r\n            return __awaiter(this, void 0, void 0, function () {\r\n                var animations;\r\n                return __generator(this, function (_a) {\r\n                    switch (_a.label) {\r\n                        case 0:\r\n                            if (!!this._isShowing) return [3 /*break*/, 2];\r\n                            this._isHidden = false;\r\n                            this._isShowing = true;\r\n                            this._isHiding = false;\r\n                            if (this.states.lookup(\"default\").get(\"visible\")) {\r\n                                this.set(\"visible\", true);\r\n                            }\r\n                            this._onShow(duration);\r\n                            animations = this.states.applyAnimate(\"default\", duration);\r\n                            return [4 /*yield*/, waitForAnimations(animations)];\r\n                        case 1:\r\n                            _a.sent();\r\n                            this._isShowing = false;\r\n                            _a.label = 2;\r\n                        case 2: return [2 /*return*/];\r\n                    }\r\n                });\r\n            });\r\n        }\r\n    });\r\n    /**\r\n     * Hides the element and returns a `Promise` which completes when all hiding\r\n     * animations are finished.\r\n     *\r\n     * ```TypeScript\r\n     * series.hide().then(function(ev) {\r\n     *   console.log(\"Series finished hiding\");\r\n     * })\r\n     * ```\r\n     * ```JavaScript\r\n     * series.hide().then(function(ev) {\r\n     *   console.log(\"Series finished hiding\");\r\n     * })\r\n     * ```\r\n     *\r\n     * @return Promise\r\n     */\r\n    Object.defineProperty(Sprite.prototype, \"hide\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (duration) {\r\n            return __awaiter(this, void 0, void 0, function () {\r\n                var state, animations;\r\n                return __generator(this, function (_a) {\r\n                    switch (_a.label) {\r\n                        case 0:\r\n                            if (!(!this._isHiding && !this._isHidden)) return [3 /*break*/, 2];\r\n                            this._isHiding = true;\r\n                            this._isShowing = false;\r\n                            state = this.states.lookup(\"hidden\");\r\n                            if (!state) {\r\n                                state = this.states.create(\"hidden\", {\r\n                                    \"opacity\": 0,\r\n                                    \"visible\": false\r\n                                });\r\n                            }\r\n                            this._isHidden = true;\r\n                            this._onHide(duration);\r\n                            animations = this.states.applyAnimate(\"hidden\", duration);\r\n                            return [4 /*yield*/, waitForAnimations(animations)];\r\n                        case 1:\r\n                            _a.sent();\r\n                            this._isHiding = false;\r\n                            _a.label = 2;\r\n                        case 2: return [2 /*return*/];\r\n                    }\r\n                });\r\n            });\r\n        }\r\n    });\r\n    /**\r\n     * Returns `true` if this element is currently hidden.\r\n     *\r\n     * @return Is hidden?\r\n     */\r\n    Object.defineProperty(Sprite.prototype, \"isHidden\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            return this._isHidden;\r\n        }\r\n    });\r\n    /**\r\n     * Returns `true` if this element is currently animating to a default state.\r\n     *\r\n     * @return Is showing?\r\n     */\r\n    Object.defineProperty(Sprite.prototype, \"isShowing\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            return this._isShowing;\r\n        }\r\n    });\r\n    /**\r\n     * Returns `true` if this element is currently animating to a hidden state.\r\n     *\r\n     * @return Is hiding?\r\n     */\r\n    Object.defineProperty(Sprite.prototype, \"isHiding\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            return this._isHiding;\r\n        }\r\n    });\r\n    /**\r\n     * Returns `true` if this element is currently hovered by a pointer.\r\n     *\r\n     * @return Is hovered?\r\n     */\r\n    Object.defineProperty(Sprite.prototype, \"isHover\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            return this._display.hovering();\r\n        }\r\n    });\r\n    /**\r\n     * Returns `true` if this element does currently have focus.\r\n     *\r\n     * @return Is focused?\r\n     */\r\n    Object.defineProperty(Sprite.prototype, \"isFocus\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            return this._root.focused(this);\r\n        }\r\n    });\r\n    /**\r\n     * Returns `true` if this element is currently being dragged.\r\n     *\r\n     * @return Is dragged?\r\n     */\r\n    Object.defineProperty(Sprite.prototype, \"isDragging\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            return this._isDragging;\r\n        }\r\n    });\r\n    /**\r\n     * Returns `false` if if either public or private setting `visible` is set\r\n     * to `false`, or `forceHidden` is set to `true`.\r\n     *\r\n     * @return Visible?\r\n     */\r\n    Object.defineProperty(Sprite.prototype, \"isVisible\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            if (this.get(\"visible\") && this.getPrivate(\"visible\") && !this.get(\"forceHidden\")) {\r\n                return true;\r\n            }\r\n            return false;\r\n        }\r\n    });\r\n    /**\r\n     * Same as `isVisible()`, except it checks all ascendants, too.\r\n     *\r\n     * @since 5.2.7\r\n     * @return Visible?\r\n     */\r\n    Object.defineProperty(Sprite.prototype, \"isVisibleDeep\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            return this._parent ? (this._parent.isVisibleDeep() && this.isVisible()) : this.isVisible();\r\n        }\r\n    });\r\n    /**\r\n     * Returns an actual opacity of the element, taking into account all parents.\r\n     *\r\n     * @return Opacity\r\n     * @since 5.2.11\r\n     */\r\n    Object.defineProperty(Sprite.prototype, \"compositeOpacity\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            var opacity = this.get(\"opacity\", 1);\r\n            return this._parent ? (this._parent.compositeOpacity() * opacity) : opacity;\r\n        }\r\n    });\r\n    /**\r\n     * Returns width of this element in pixels.\r\n     *\r\n     * @return Width (px)\r\n     */\r\n    Object.defineProperty(Sprite.prototype, \"width\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            var width = this.get(\"width\");\r\n            var maxWidth = this.get(\"maxWidth\", this.getPrivate(\"maxWidth\"));\r\n            var minWidth = this.get(\"minWidth\", this.getPrivate(\"minWidth\"));\r\n            var privateWidth = this.getPrivate(\"width\");\r\n            var w = 0;\r\n            if ($type.isNumber(privateWidth)) {\r\n                w = privateWidth;\r\n            }\r\n            else {\r\n                if (width == null) {\r\n                    if (this._adjustedLocalBounds) {\r\n                        w = this._adjustedLocalBounds.right - this._adjustedLocalBounds.left;\r\n                    }\r\n                }\r\n                else {\r\n                    if (width instanceof Percent) {\r\n                        var parent_6 = this.parent;\r\n                        if (parent_6) {\r\n                            w = parent_6.innerWidth() * width.value;\r\n                        }\r\n                        else {\r\n                            w = this._root.width() * width.value;\r\n                        }\r\n                    }\r\n                    else if ($type.isNumber(width)) {\r\n                        w = width;\r\n                    }\r\n                }\r\n            }\r\n            if ($type.isNumber(minWidth)) {\r\n                w = Math.max(minWidth, w);\r\n            }\r\n            if ($type.isNumber(maxWidth)) {\r\n                w = Math.min(maxWidth, w);\r\n            }\r\n            return w;\r\n        }\r\n    });\r\n    /**\r\n     * Returns maximum allowed width of this element in pixels.\r\n     *\r\n     * @return Maximum width (px)\r\n     */\r\n    Object.defineProperty(Sprite.prototype, \"maxWidth\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            var maxWidth = this.get(\"maxWidth\", this.getPrivate(\"maxWidth\"));\r\n            if ($type.isNumber(maxWidth)) {\r\n                return maxWidth;\r\n            }\r\n            else {\r\n                var width = this.get(\"width\");\r\n                if ($type.isNumber(width)) {\r\n                    return width;\r\n                }\r\n            }\r\n            var parent = this.parent;\r\n            if (parent) {\r\n                return parent.innerWidth();\r\n            }\r\n            return this._root.width();\r\n        }\r\n    });\r\n    /**\r\n     * Returns maximum allowed height of this element in pixels.\r\n     *\r\n     * @return Maximum height (px)\r\n     */\r\n    Object.defineProperty(Sprite.prototype, \"maxHeight\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            var maxHeight = this.get(\"maxHeight\", this.getPrivate(\"maxHeight\"));\r\n            if ($type.isNumber(maxHeight)) {\r\n                return maxHeight;\r\n            }\r\n            else {\r\n                var height = this.get(\"height\");\r\n                if ($type.isNumber(height)) {\r\n                    return height;\r\n                }\r\n            }\r\n            var parent = this.parent;\r\n            if (parent) {\r\n                return parent.innerHeight();\r\n            }\r\n            return this._root.height();\r\n        }\r\n    });\r\n    /**\r\n     * Returns height of this element in pixels.\r\n     *\r\n     * @return Height (px)\r\n     */\r\n    Object.defineProperty(Sprite.prototype, \"height\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            var height = this.get(\"height\");\r\n            var maxHeight = this.get(\"maxHeight\", this.getPrivate(\"maxHeight\"));\r\n            var minHeight = this.get(\"minHeight\", this.getPrivate(\"minHeight\"));\r\n            var privateHeight = this.getPrivate(\"height\");\r\n            var h = 0;\r\n            if ($type.isNumber(privateHeight)) {\r\n                h = privateHeight;\r\n            }\r\n            else {\r\n                if (height == null) {\r\n                    if (this._adjustedLocalBounds) {\r\n                        h = this._adjustedLocalBounds.bottom - this._adjustedLocalBounds.top;\r\n                    }\r\n                }\r\n                else {\r\n                    if (height instanceof Percent) {\r\n                        var parent_7 = this.parent;\r\n                        if (parent_7) {\r\n                            h = parent_7.innerHeight() * height.value;\r\n                        }\r\n                        else {\r\n                            h = this._root.height() * height.value;\r\n                        }\r\n                    }\r\n                    else if ($type.isNumber(height)) {\r\n                        h = height;\r\n                    }\r\n                }\r\n            }\r\n            if ($type.isNumber(minHeight)) {\r\n                h = Math.max(minHeight, h);\r\n            }\r\n            if ($type.isNumber(maxHeight)) {\r\n                h = Math.min(maxHeight, h);\r\n            }\r\n            return h;\r\n        }\r\n    });\r\n    Object.defineProperty(Sprite.prototype, \"_findStaticTemplate\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (f) {\r\n            // templateField overrides template\r\n            if (this._templateField && f(this._templateField)) {\r\n                return this._templateField;\r\n            }\r\n            return _super.prototype._findStaticTemplate.call(this, f);\r\n        }\r\n    });\r\n    Object.defineProperty(Sprite.prototype, \"_walkParents\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (f) {\r\n            if (this._parent) {\r\n                this._walkParent(f);\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Sprite.prototype, \"_walkParent\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (f) {\r\n            if (this._parent) {\r\n                this._parent._walkParent(f);\r\n            }\r\n            f(this);\r\n        }\r\n    });\r\n    Object.defineProperty(Sprite.prototype, \"parent\", {\r\n        /**\r\n         * Parent [[Container]] of this element.\r\n         *\r\n         * @return Parent container\r\n         */\r\n        get: function () {\r\n            return this._parent;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Sprite.prototype, \"_setParent\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (parent, updateChildren) {\r\n            if (updateChildren === void 0) { updateChildren = false; }\r\n            var prevParent = this._parent;\r\n            if (parent !== prevParent) {\r\n                this.markDirtyBounds();\r\n                parent.markDirty();\r\n                this._parent = parent;\r\n                if (updateChildren) {\r\n                    this._removeParent(prevParent);\r\n                    if (parent) {\r\n                        this._addPercentageSizeChildren();\r\n                        this._addPercentagePositionChildren();\r\n                    }\r\n                }\r\n                this.markDirtyPosition();\r\n                this._applyThemes();\r\n            }\r\n        }\r\n    });\r\n    /**\r\n     * Returns an instance of [[NumberFormatter]] used in this element.\r\n     *\r\n     * If this element does not have it set, global one form [[Root]] is used.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/using-formatters/} for more info\r\n     * @return NumberFormatter instace\r\n     */\r\n    Object.defineProperty(Sprite.prototype, \"getNumberFormatter\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            return this.get(\"numberFormatter\", this._root.numberFormatter);\r\n        }\r\n    });\r\n    /**\r\n     * Returns an instance of [[DateFormatter]] used in this element.\r\n     *\r\n     * If this element does not have it set, global one form [[Root]] is used.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/using-formatters/} for more info\r\n     * @return DateFormatter instace\r\n     */\r\n    Object.defineProperty(Sprite.prototype, \"getDateFormatter\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            return this.get(\"dateFormatter\", this._root.dateFormatter);\r\n        }\r\n    });\r\n    /**\r\n     * Returns an instance of [[DurationFormatter]] used in this element.\r\n     *\r\n     * If this element does not have it set, global one form [[Root]] is used.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/using-formatters/} for more info\r\n     * @return DurationFormatter instace\r\n     */\r\n    Object.defineProperty(Sprite.prototype, \"getDurationFormatter\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            return this.get(\"durationFormatter\", this._root.durationFormatter);\r\n        }\r\n    });\r\n    /**\r\n     * Converts X/Y coordinate within this element to a global coordinate.\r\n     *\r\n     * @param  point  Local coordinate\r\n     * @return        Global coordinate\r\n     */\r\n    Object.defineProperty(Sprite.prototype, \"toGlobal\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (point) {\r\n            return this._display.toGlobal(point);\r\n        }\r\n    });\r\n    /**\r\n     * Converts global X/Y coordinate to a coordinate within this element.\r\n     *\r\n     * @param  point  Global coordinate\r\n     * @return        Local coordinate\r\n     */\r\n    Object.defineProperty(Sprite.prototype, \"toLocal\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (point) {\r\n            return this._display.toLocal(point);\r\n        }\r\n    });\r\n    Object.defineProperty(Sprite.prototype, \"_getDownPoint\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            var id = this._getDownPointId();\r\n            if (id) {\r\n                return this._downPoints[id];\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Sprite.prototype, \"_getDownPointId\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            if (this._downPoints) {\r\n                return $object.keysOrdered(this._downPoints, function (a, b) {\r\n                    if (a > b) {\r\n                        return 1;\r\n                    }\r\n                    if (a < b) {\r\n                        return -1;\r\n                    }\r\n                    return 0;\r\n                })[0];\r\n            }\r\n        }\r\n    });\r\n    /**\r\n     * Moves sprite to the end of the parent's children array.\r\n     *\r\n     * Depending on `layout` setting of the parten container, it may effect the\r\n     * positioning or overlapping order of the elements.\r\n     */\r\n    Object.defineProperty(Sprite.prototype, \"toFront\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            var parent = this.parent;\r\n            if (parent) {\r\n                parent.children.moveValue(this, parent.children.length - 1);\r\n            }\r\n        }\r\n    });\r\n    /**\r\n     * Moves sprite to the beginning of the parent's children array.\r\n     *\r\n     * Depending on `layout` setting of the parten container, it may effect the\r\n     * positioning or overlapping order of the elements.\r\n     */\r\n    Object.defineProperty(Sprite.prototype, \"toBack\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            var parent = this.parent;\r\n            if (parent) {\r\n                parent.children.moveValue(this, 0);\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Sprite, \"className\", {\r\n        enumerable: true,\r\n        configurable: true,\r\n        writable: true,\r\n        value: \"Sprite\"\r\n    });\r\n    Object.defineProperty(Sprite, \"classNames\", {\r\n        enumerable: true,\r\n        configurable: true,\r\n        writable: true,\r\n        value: Entity.classNames.concat([Sprite.className])\r\n    });\r\n    return Sprite;\r\n}(Entity));\r\nexport { Sprite };\r\n//# sourceMappingURL=Sprite.js.map","import { __extends } from \"tslib\";\r\nimport { Entity } from \"../../util/Entity\";\r\n/**\r\n * Base class for patterns.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/colors-gradients-and-patterns/patterns/} for more info\r\n */\r\nvar Pattern = /** @class */ (function (_super) {\r\n    __extends(Pattern, _super);\r\n    function Pattern() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        Object.defineProperty(_this, \"_display\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: _this._root._renderer.makeGraphics()\r\n        });\r\n        Object.defineProperty(_this, \"_backgroundDisplay\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: _this._root._renderer.makeGraphics()\r\n        });\r\n        Object.defineProperty(_this, \"_clear\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(_this, \"_pattern\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        return _this;\r\n    }\r\n    Object.defineProperty(Pattern.prototype, \"_afterNew\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            // Applying themes because pattern will not have parent\r\n            _super.prototype._afterNewApplyThemes.call(this);\r\n        }\r\n    });\r\n    Object.defineProperty(Pattern.prototype, \"pattern\", {\r\n        get: function () {\r\n            return this._pattern;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Pattern.prototype, \"_draw\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () { }\r\n    });\r\n    Object.defineProperty(Pattern.prototype, \"_beforeChanged\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            _super.prototype._beforeChanged.call(this);\r\n            if (this.isDirty(\"repetition\") || this.isDirty(\"width\") || this.isDirty(\"height\") || this.isDirty(\"rotation\") || this.isDirty(\"color\") || this.isDirty(\"strokeWidth\") || this.isDirty(\"strokeDasharray\") || this.isDirty(\"strokeDashoffset\") || this.isDirty(\"colorOpacity\") || this.isDirty(\"fill\") || this.isDirty(\"fillOpacity\")) {\r\n                this._clear = true;\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Pattern.prototype, \"_changed\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            _super.prototype._changed.call(this);\r\n            if (this._clear) {\r\n                var repetition = this.get(\"repetition\", \"\");\r\n                var width = this.get(\"width\", 100);\r\n                var height = this.get(\"height\", 100);\r\n                var fill = this.get(\"fill\");\r\n                var fillOpacity = this.get(\"fillOpacity\", 1);\r\n                this._display.clear();\r\n                this._backgroundDisplay.clear();\r\n                if (fill && (fillOpacity > 0)) {\r\n                    this._backgroundDisplay.beginFill(fill, fillOpacity);\r\n                    this._backgroundDisplay.drawRect(0, 0, width, height);\r\n                    this._backgroundDisplay.endFill();\r\n                }\r\n                this._display.angle = this.get(\"rotation\", 0);\r\n                //this._display.pivot = { x: width / 2, y: height / 2 };\r\n                this._draw();\r\n                this._pattern = this._root._renderer.createPattern(this._display, this._backgroundDisplay, repetition, width, height);\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Pattern, \"className\", {\r\n        enumerable: true,\r\n        configurable: true,\r\n        writable: true,\r\n        value: \"Pattern\"\r\n    });\r\n    Object.defineProperty(Pattern, \"classNames\", {\r\n        enumerable: true,\r\n        configurable: true,\r\n        writable: true,\r\n        value: Entity.classNames.concat([Pattern.className])\r\n    });\r\n    return Pattern;\r\n}(Entity));\r\nexport { Pattern };\r\n//# sourceMappingURL=Pattern.js.map","import { __extends } from \"tslib\";\r\nimport { Pattern } from \"./Pattern\";\r\n/**\r\n * Picture pattern.\r\n *\r\n * @since 5.2.15\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/colors-gradients-and-patterns/patterns/} for more info\r\n */\r\nvar PicturePattern = /** @class */ (function (_super) {\r\n    __extends(PicturePattern, _super);\r\n    function PicturePattern() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        Object.defineProperty(_this, \"_image\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        return _this;\r\n    }\r\n    Object.defineProperty(PicturePattern.prototype, \"_beforeChanged\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            _super.prototype._beforeChanged.call(this);\r\n            this._clear = true;\r\n            if (this.isDirty(\"src\")) {\r\n                this._load();\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(PicturePattern.prototype, \"_draw\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            _super.prototype._draw.call(this);\r\n            var image = this._image;\r\n            if (image) {\r\n                var patternWidth = this.get(\"width\", 100);\r\n                var patternHeight = this.get(\"height\", 100);\r\n                // Fit\r\n                var fit = this.get(\"fit\", \"image\");\r\n                var width = 0;\r\n                var height = 0;\r\n                if (fit == \"pattern\") {\r\n                    width = patternWidth;\r\n                    height = patternHeight;\r\n                }\r\n                else {\r\n                    width = image.width;\r\n                    height = image.height;\r\n                    if (fit == \"image\") {\r\n                        this.set(\"width\", width);\r\n                        this.set(\"height\", height);\r\n                    }\r\n                }\r\n                // Position\r\n                var centered = this.get(\"centered\", true);\r\n                var x = 0;\r\n                var y = 0;\r\n                if (centered) {\r\n                    x = patternWidth / 2 - width / 2;\r\n                    y = patternHeight / 2 - height / 2;\r\n                }\r\n                this._display.image(image, width, height, x, y);\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(PicturePattern.prototype, \"_load\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            var _this = this;\r\n            var src = this.get(\"src\");\r\n            if (src) {\r\n                var image_1 = new Image();\r\n                //image.crossOrigin = \"Anonymous\";\r\n                image_1.src = src;\r\n                image_1.decode().then(function () {\r\n                    _this._image = image_1;\r\n                    _this._draw();\r\n                    if (_this.events.isEnabled(\"loaded\")) {\r\n                        _this.events.dispatch(\"loaded\", { type: \"loaded\", target: _this });\r\n                    }\r\n                }).catch(function (_error) {\r\n                    // TODO: maybe raise error?\r\n                });\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(PicturePattern, \"className\", {\r\n        enumerable: true,\r\n        configurable: true,\r\n        writable: true,\r\n        value: \"PicturePattern\"\r\n    });\r\n    Object.defineProperty(PicturePattern, \"classNames\", {\r\n        enumerable: true,\r\n        configurable: true,\r\n        writable: true,\r\n        value: Pattern.classNames.concat([PicturePattern.className])\r\n    });\r\n    return PicturePattern;\r\n}(Pattern));\r\nexport { PicturePattern };\r\n//# sourceMappingURL=PicturePattern.js.map",";\r\n/**\r\n * From https://github.com/pixijs/pixi.js/blob/3dd0ff9a935f0bc13a09aefff9eb2872f02c51b9/packages/canvas/canvas-renderer/src/utils/mapCanvasBlendModesToPixi.ts#L13\r\n */\r\nexport var BlendMode;\r\n(function (BlendMode) {\r\n    BlendMode[\"ADD\"] = \"lighter\";\r\n    BlendMode[\"COLOR\"] = \"color\";\r\n    BlendMode[\"COLOR_BURN\"] = \"color-burn\";\r\n    BlendMode[\"COLOR_DODGE\"] = \"color-dodge\";\r\n    BlendMode[\"DARKEN\"] = \"darken\";\r\n    BlendMode[\"DIFFERENCE\"] = \"difference\";\r\n    BlendMode[\"DST_OVER\"] = \"destination-over\";\r\n    BlendMode[\"EXCLUSION\"] = \"exclusion\";\r\n    BlendMode[\"HARD_LIGHT\"] = \"hard-light\";\r\n    BlendMode[\"HUE\"] = \"hue\";\r\n    BlendMode[\"LIGHTEN\"] = \"lighten\";\r\n    BlendMode[\"LUMINOSITY\"] = \"luminosity\";\r\n    BlendMode[\"MULTIPLY\"] = \"multiply\";\r\n    BlendMode[\"NORMAL\"] = \"source-over\";\r\n    BlendMode[\"OVERLAY\"] = \"overlay\";\r\n    BlendMode[\"SATURATION\"] = \"saturation\";\r\n    BlendMode[\"SCREEN\"] = \"screen\";\r\n    BlendMode[\"SOFT_LIGHT\"] = \"soft-light\";\r\n    BlendMode[\"SRC_ATOP\"] = \"source-atop\";\r\n    BlendMode[\"XOR\"] = \"xor\";\r\n})(BlendMode || (BlendMode = {}));\r\n//# sourceMappingURL=Renderer.js.map","import { __extends } from \"tslib\";\r\nimport { PicturePattern } from \"../render/patterns/PicturePattern\";\r\nimport { Sprite } from \"./Sprite\";\r\nimport { BlendMode } from \"./backend/Renderer\";\r\nimport * as $type from \"../util/Type\";\r\nimport * as $array from \"../util/Array\";\r\nexport var visualSettings = [\"fill\", \"fillOpacity\", \"stroke\", \"strokeWidth\", \"strokeOpacity\", \"fillPattern\", \"strokePattern\", \"fillGradient\", \"strokeGradient\", \"strokeDasharray\", \"strokeDashoffset\"];\r\n/**\r\n * Base class used for drawing shapes.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/common-elements/graphics/} for more info\r\n * @important\r\n */\r\nvar Graphics = /** @class */ (function (_super) {\r\n    __extends(Graphics, _super);\r\n    function Graphics() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        Object.defineProperty(_this, \"_display\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: _this._root._renderer.makeGraphics()\r\n        });\r\n        Object.defineProperty(_this, \"_clear\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        return _this;\r\n    }\r\n    Object.defineProperty(Graphics.prototype, \"_beforeChanged\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            var _this = this;\r\n            _super.prototype._beforeChanged.call(this);\r\n            if (this.isDirty(\"draw\") || this.isDirty(\"svgPath\")) {\r\n                this.markDirtyBounds();\r\n            }\r\n            if (this.isDirty(\"fill\") || this.isDirty(\"stroke\") || this.isDirty(\"visible\") || this.isDirty(\"forceHidden\") || this.isDirty(\"scale\") || this.isDirty(\"fillGradient\") || this.isDirty(\"strokeGradient\") || this.isDirty(\"fillPattern\") || this.isDirty(\"strokePattern\") || this.isDirty(\"fillOpacity\") || this.isDirty(\"strokeOpacity\") || this.isDirty(\"strokeWidth\") || this.isDirty(\"draw\") || this.isDirty(\"blendMode\") || this.isDirty(\"strokeDasharray\") || this.isDirty(\"strokeDashoffset\") || this.isDirty(\"svgPath\") || this.isDirty(\"lineJoin\") || this.isDirty(\"shadowColor\") || this.isDirty(\"shadowBlur\") || this.isDirty(\"shadowOffsetX\") || this.isDirty(\"shadowOffsetY\")) {\r\n                this._clear = true;\r\n            }\r\n            if (this.isDirty(\"fillGradient\")) {\r\n                var gradient = this.get(\"fillGradient\");\r\n                if (gradient) {\r\n                    this._display.isMeasured = true;\r\n                    var gradientTarget = gradient.get(\"target\");\r\n                    if (gradientTarget) {\r\n                        this._disposers.push(gradientTarget.events.on(\"boundschanged\", function () {\r\n                            _this._markDirtyKey(\"fill\");\r\n                        }));\r\n                        this._disposers.push(gradientTarget.events.on(\"positionchanged\", function () {\r\n                            _this._markDirtyKey(\"fill\");\r\n                        }));\r\n                    }\r\n                }\r\n            }\r\n            if (this.isDirty(\"strokeGradient\")) {\r\n                var gradient = this.get(\"strokeGradient\");\r\n                if (gradient) {\r\n                    this._display.isMeasured = true;\r\n                    var gradientTarget = gradient.get(\"target\");\r\n                    if (gradientTarget) {\r\n                        this._disposers.push(gradientTarget.events.on(\"boundschanged\", function () {\r\n                            _this._markDirtyKey(\"stroke\");\r\n                        }));\r\n                        this._disposers.push(gradientTarget.events.on(\"positionchanged\", function () {\r\n                            _this._markDirtyKey(\"stroke\");\r\n                        }));\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Graphics.prototype, \"_changed\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            _super.prototype._changed.call(this);\r\n            if (this._clear) {\r\n                this.markDirtyBounds();\r\n                this.markDirtyLayer();\r\n                this._display.clear();\r\n                var strokeDasharray = this.get(\"strokeDasharray\");\r\n                if ($type.isNumber(strokeDasharray)) {\r\n                    if (strokeDasharray < 0.5) {\r\n                        strokeDasharray = [0];\r\n                    }\r\n                    else {\r\n                        strokeDasharray = [strokeDasharray];\r\n                    }\r\n                }\r\n                this._display.setLineDash(strokeDasharray);\r\n                var strokeDashoffset = this.get(\"strokeDashoffset\");\r\n                if (strokeDashoffset) {\r\n                    this._display.setLineDashOffset(strokeDashoffset);\r\n                }\r\n                var blendMode = this.get(\"blendMode\", BlendMode.NORMAL);\r\n                this._display.blendMode = blendMode;\r\n                var draw = this.get(\"draw\");\r\n                if (draw) {\r\n                    draw(this._display, this);\r\n                }\r\n                var svgPath = this.get(\"svgPath\");\r\n                if (svgPath != null) {\r\n                    this._display.svgPath(svgPath);\r\n                }\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Graphics.prototype, \"_afterChanged\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            var _this = this;\r\n            _super.prototype._afterChanged.call(this);\r\n            if (this._clear) {\r\n                var fill_1 = this.get(\"fill\");\r\n                var fillGradient = this.get(\"fillGradient\");\r\n                var fillPattern = this.get(\"fillPattern\");\r\n                var fillOpacity_1 = this.get(\"fillOpacity\");\r\n                var stroke_1 = this.get(\"stroke\");\r\n                var strokeGradient = this.get(\"strokeGradient\");\r\n                var strokePattern = this.get(\"strokePattern\");\r\n                var shadowColor = this.get(\"shadowColor\");\r\n                var shadowBlur = this.get(\"shadowBlur\");\r\n                var shadowOffsetX = this.get(\"shadowOffsetX\");\r\n                var shadowOffsetY = this.get(\"shadowOffsetY\");\r\n                var shadowOpacity = this.get(\"shadowOpacity\");\r\n                //const bounds = this._display.getLocalBounds();\r\n                if (shadowColor && (shadowBlur || shadowOffsetX || shadowOffsetY)) {\r\n                    this._display.shadow(shadowColor, shadowBlur, shadowOffsetX, shadowOffsetY, shadowOpacity);\r\n                }\r\n                if (fillPattern) {\r\n                    var changed = false;\r\n                    if (fill_1 && (!fillPattern.get(\"fill\") || fillPattern.get(\"fillInherited\"))) {\r\n                        fillPattern.set(\"fill\", fill_1);\r\n                        fillPattern.set(\"fillInherited\", true);\r\n                        changed = true;\r\n                    }\r\n                    if (stroke_1 && (!fillPattern.get(\"color\") || fillPattern.get(\"colorInherited\"))) {\r\n                        fillPattern.set(\"color\", stroke_1);\r\n                        fillPattern.set(\"colorInherited\", true);\r\n                        changed = true;\r\n                    }\r\n                    if (changed) {\r\n                        // @todo: is this OK?\r\n                        fillPattern._changed();\r\n                    }\r\n                    var pattern = fillPattern.pattern;\r\n                    if (pattern) {\r\n                        this._display.beginFill(pattern, fillOpacity_1);\r\n                        this._display.endFill();\r\n                        if (fillPattern instanceof PicturePattern) {\r\n                            fillPattern.events.once(\"loaded\", function () {\r\n                                _this._clear = true;\r\n                                _this.markDirty();\r\n                            });\r\n                        }\r\n                    }\r\n                }\r\n                else if (fillGradient) {\r\n                    if (fill_1) {\r\n                        var stops = fillGradient.get(\"stops\", []);\r\n                        if (stops.length) {\r\n                            $array.each(stops, function (stop) {\r\n                                if ((!stop.color || stop.colorInherited) && fill_1) {\r\n                                    stop.color = fill_1;\r\n                                    stop.colorInherited = true;\r\n                                }\r\n                                if (stop.opacity == null || stop.opacityInherited) {\r\n                                    stop.opacity = fillOpacity_1;\r\n                                    stop.opacityInherited = true;\r\n                                }\r\n                            });\r\n                        }\r\n                    }\r\n                    var gradient = fillGradient.getFill(this);\r\n                    if (gradient) {\r\n                        this._display.beginFill(gradient, fillOpacity_1);\r\n                        this._display.endFill();\r\n                    }\r\n                }\r\n                else if (fill_1) {\r\n                    this._display.beginFill(fill_1, fillOpacity_1);\r\n                    this._display.endFill();\r\n                }\r\n                if (stroke_1 || strokeGradient || strokePattern) {\r\n                    var strokeOpacity_1 = this.get(\"strokeOpacity\");\r\n                    var strokeWidth = this.get(\"strokeWidth\", 1);\r\n                    if (this.get(\"nonScalingStroke\")) {\r\n                        strokeWidth = strokeWidth / this.get(\"scale\", 1);\r\n                    }\r\n                    var lineJoin = this.get(\"lineJoin\");\r\n                    if (strokePattern) {\r\n                        var changed = false;\r\n                        if (stroke_1 && (!strokePattern.get(\"color\") || strokePattern.get(\"colorInherited\"))) {\r\n                            strokePattern.set(\"color\", stroke_1);\r\n                            strokePattern.set(\"colorInherited\", true);\r\n                            changed = true;\r\n                        }\r\n                        if (changed) {\r\n                            // @todo: is this OK?\r\n                            strokePattern._changed();\r\n                        }\r\n                        var pattern = strokePattern.pattern;\r\n                        if (pattern) {\r\n                            this._display.lineStyle(strokeWidth, pattern, strokeOpacity_1, lineJoin);\r\n                            this._display.endStroke();\r\n                            if (strokePattern instanceof PicturePattern) {\r\n                                strokePattern.events.once(\"loaded\", function () {\r\n                                    _this._clear = true;\r\n                                    _this.markDirty();\r\n                                });\r\n                            }\r\n                        }\r\n                    }\r\n                    else if (strokeGradient) {\r\n                        var stops = strokeGradient.get(\"stops\", []);\r\n                        if (stops.length) {\r\n                            $array.each(stops, function (stop) {\r\n                                if ((!stop.color || stop.colorInherited) && stroke_1) {\r\n                                    stop.color = stroke_1;\r\n                                    stop.colorInherited = true;\r\n                                }\r\n                                if (stop.opacity == null || stop.opacityInherited) {\r\n                                    stop.opacity = strokeOpacity_1;\r\n                                    stop.opacityInherited = true;\r\n                                }\r\n                            });\r\n                        }\r\n                        var gradient = strokeGradient.getFill(this);\r\n                        if (gradient) {\r\n                            this._display.lineStyle(strokeWidth, gradient, strokeOpacity_1, lineJoin);\r\n                            this._display.endStroke();\r\n                        }\r\n                    }\r\n                    else if (stroke_1) {\r\n                        this._display.lineStyle(strokeWidth, stroke_1, strokeOpacity_1, lineJoin);\r\n                        this._display.endStroke();\r\n                    }\r\n                }\r\n            }\r\n            this._clear = false;\r\n        }\r\n    });\r\n    Object.defineProperty(Graphics, \"className\", {\r\n        enumerable: true,\r\n        configurable: true,\r\n        writable: true,\r\n        value: \"Graphics\"\r\n    });\r\n    Object.defineProperty(Graphics, \"classNames\", {\r\n        enumerable: true,\r\n        configurable: true,\r\n        writable: true,\r\n        value: Sprite.classNames.concat([Graphics.className])\r\n    });\r\n    return Graphics;\r\n}(Sprite));\r\nexport { Graphics };\r\n//# sourceMappingURL=Graphics.js.map","import { __extends } from \"tslib\";\r\nimport { Graphics } from \"./Graphics\";\r\n/**\r\n * Draws a rectangle.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/common-elements/graphics/} for more info\r\n * @important\r\n */\r\nvar Rectangle = /** @class */ (function (_super) {\r\n    __extends(Rectangle, _super);\r\n    function Rectangle() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    Object.defineProperty(Rectangle.prototype, \"_beforeChanged\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            _super.prototype._beforeChanged.call(this);\r\n            if (this.isDirty(\"width\") || this.isDirty(\"height\") || this.isPrivateDirty(\"width\") || this.isPrivateDirty(\"height\")) {\r\n                this._clear = true;\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Rectangle.prototype, \"_changed\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            _super.prototype._changed.call(this);\r\n            if (this._clear && !this.get(\"draw\")) {\r\n                this._draw();\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Rectangle.prototype, \"_draw\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            this._display.drawRect(0, 0, this.width(), this.height());\r\n        }\r\n    });\r\n    Object.defineProperty(Rectangle.prototype, \"_updateSize\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            this.markDirty();\r\n            this._clear = true;\r\n        }\r\n    });\r\n    Object.defineProperty(Rectangle, \"className\", {\r\n        enumerable: true,\r\n        configurable: true,\r\n        writable: true,\r\n        value: \"Rectangle\"\r\n    });\r\n    Object.defineProperty(Rectangle, \"classNames\", {\r\n        enumerable: true,\r\n        configurable: true,\r\n        writable: true,\r\n        value: Graphics.classNames.concat([Rectangle.className])\r\n    });\r\n    return Rectangle;\r\n}(Graphics));\r\nexport { Rectangle };\r\n//# sourceMappingURL=Rectangle.js.map","import { __extends } from \"tslib\";\r\nimport { Entity } from \"../util/Entity\";\r\nexport function eachChildren(container, f) {\r\n    if (container.get(\"reverseChildren\", false)) {\r\n        container.children.eachReverse(f);\r\n    }\r\n    else {\r\n        container.children.each(f);\r\n    }\r\n}\r\n/**\r\n * Base class for [[Container]] layouts.\r\n */\r\nvar Layout = /** @class */ (function (_super) {\r\n    __extends(Layout, _super);\r\n    function Layout() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    Object.defineProperty(Layout, \"className\", {\r\n        enumerable: true,\r\n        configurable: true,\r\n        writable: true,\r\n        value: \"Layout\"\r\n    });\r\n    Object.defineProperty(Layout, \"classNames\", {\r\n        enumerable: true,\r\n        configurable: true,\r\n        writable: true,\r\n        value: Entity.classNames.concat([Layout.className])\r\n    });\r\n    return Layout;\r\n}(Entity));\r\nexport { Layout };\r\n//# sourceMappingURL=Layout.js.map","import { __extends } from \"tslib\";\r\nimport { Layout, eachChildren } from \"./Layout\";\r\nimport * as $type from \"../util/Type\";\r\nimport { Percent } from \"../util/Percent\";\r\n/**\r\n * A horizontal children layout for [[Container]].\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/common-elements/containers/#Layout} for more info\r\n */\r\nvar HorizontalLayout = /** @class */ (function (_super) {\r\n    __extends(HorizontalLayout, _super);\r\n    function HorizontalLayout() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    Object.defineProperty(HorizontalLayout.prototype, \"updateContainer\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (container) {\r\n            var paddingLeft = container.get(\"paddingLeft\", 0);\r\n            var availableWidth = container.innerWidth();\r\n            var totalPercent = 0;\r\n            eachChildren(container, function (child) {\r\n                if (child.isVisible()) {\r\n                    if (child.get(\"position\") == \"relative\") {\r\n                        var childWidth = child.get(\"width\");\r\n                        if (childWidth instanceof Percent) {\r\n                            totalPercent += childWidth.value;\r\n                            var w = availableWidth * childWidth.value;\r\n                            var minWidth = child.get(\"minWidth\", child.getPrivate(\"minWidth\", -Infinity));\r\n                            if (minWidth > w) {\r\n                                availableWidth -= minWidth;\r\n                                totalPercent -= childWidth.value;\r\n                            }\r\n                            var maxWidth = child.get(\"maxWidth\", child.getPrivate(\"maxWidth\", Infinity));\r\n                            if (w > maxWidth) {\r\n                                availableWidth -= maxWidth;\r\n                                totalPercent -= childWidth.value;\r\n                            }\r\n                        }\r\n                        else {\r\n                            if (!$type.isNumber(childWidth)) {\r\n                                childWidth = child.width();\r\n                            }\r\n                            availableWidth -= childWidth + child.get(\"marginLeft\", 0) + child.get(\"marginRight\", 0);\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n            if (availableWidth < 0) {\r\n                availableWidth = 0.01;\r\n            }\r\n            //if (availableWidth > 0) {\r\n            eachChildren(container, function (child) {\r\n                if (child.isVisible()) {\r\n                    if (child.get(\"position\") == \"relative\") {\r\n                        var childWidth = child.get(\"width\");\r\n                        if (childWidth instanceof Percent) {\r\n                            var privateWidth = availableWidth * childWidth.value / totalPercent - child.get(\"marginLeft\", 0) - child.get(\"marginRight\", 0);\r\n                            var minWidth = child.get(\"minWidth\", child.getPrivate(\"minWidth\", -Infinity));\r\n                            var maxWidth = child.get(\"maxWidth\", child.getPrivate(\"maxWidth\", Infinity));\r\n                            privateWidth = Math.min(Math.max(minWidth, privateWidth), maxWidth);\r\n                            child.setPrivate(\"width\", privateWidth);\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n            //}\r\n            var prevX = paddingLeft;\r\n            eachChildren(container, function (child) {\r\n                if (child.get(\"position\") == \"relative\") {\r\n                    if (child.isVisible()) {\r\n                        var bounds = child.adjustedLocalBounds();\r\n                        var marginLeft = child.get(\"marginLeft\", 0);\r\n                        var marginRight = child.get(\"marginRight\", 0);\r\n                        var maxWidth = child.get(\"maxWidth\");\r\n                        var left = bounds.left;\r\n                        var right = bounds.right;\r\n                        if (maxWidth) {\r\n                            if (right - left > maxWidth) {\r\n                                right = left + maxWidth;\r\n                            }\r\n                        }\r\n                        var x = prevX + marginLeft - left;\r\n                        child.setPrivate(\"x\", x);\r\n                        prevX = x + right + marginRight;\r\n                    }\r\n                    else {\r\n                        child.setPrivate(\"x\", undefined);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    });\r\n    Object.defineProperty(HorizontalLayout, \"className\", {\r\n        enumerable: true,\r\n        configurable: true,\r\n        writable: true,\r\n        value: \"HorizontalLayout\"\r\n    });\r\n    Object.defineProperty(HorizontalLayout, \"classNames\", {\r\n        enumerable: true,\r\n        configurable: true,\r\n        writable: true,\r\n        value: Layout.classNames.concat([HorizontalLayout.className])\r\n    });\r\n    return HorizontalLayout;\r\n}(Layout));\r\nexport { HorizontalLayout };\r\n//# sourceMappingURL=HorizontalLayout.js.map","import { __extends } from \"tslib\";\r\nimport { Layout, eachChildren } from \"./Layout\";\r\nimport * as $type from \"../util/Type\";\r\nimport { Percent } from \"../util/Percent\";\r\n/**\r\n * A vertical children layout for [[Container]].\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/common-elements/containers/#Layout} for more info\r\n */\r\nvar VerticalLayout = /** @class */ (function (_super) {\r\n    __extends(VerticalLayout, _super);\r\n    function VerticalLayout() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    Object.defineProperty(VerticalLayout.prototype, \"updateContainer\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (container) {\r\n            var paddingTop = container.get(\"paddingTop\", 0);\r\n            var availableHeight = container.innerHeight();\r\n            var totalPercent = 0;\r\n            eachChildren(container, function (child) {\r\n                if (child.isVisible()) {\r\n                    if (child.get(\"position\") == \"relative\") {\r\n                        var childHeight = child.get(\"height\");\r\n                        if (childHeight instanceof Percent) {\r\n                            totalPercent += childHeight.value;\r\n                            var h = availableHeight * childHeight.value;\r\n                            var minHeight = child.get(\"minHeight\", child.getPrivate(\"minHeight\", -Infinity));\r\n                            if (minHeight > h) {\r\n                                availableHeight -= minHeight;\r\n                                totalPercent -= childHeight.value;\r\n                            }\r\n                            var maxHeight = child.get(\"maxHeight\", child.getPrivate(\"maxHeight\", Infinity));\r\n                            if (h > maxHeight) {\r\n                                availableHeight -= maxHeight;\r\n                                totalPercent -= childHeight.value;\r\n                            }\r\n                        }\r\n                        else {\r\n                            if (!$type.isNumber(childHeight)) {\r\n                                childHeight = child.height();\r\n                            }\r\n                            availableHeight -= childHeight + child.get(\"marginTop\", 0) + child.get(\"marginBottom\", 0);\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n            if (availableHeight < 0) {\r\n                availableHeight = 0.01;\r\n            }\r\n            //if (availableHeight > 0) {\r\n            eachChildren(container, function (child) {\r\n                if (child.isVisible()) {\r\n                    if (child.get(\"position\") == \"relative\") {\r\n                        var childHeight = child.get(\"height\");\r\n                        if (childHeight instanceof Percent) {\r\n                            var privateHeight = availableHeight * childHeight.value / totalPercent - child.get(\"marginTop\", 0) - child.get(\"marginBottom\", 0);\r\n                            var minHeight = child.get(\"minHeight\", child.getPrivate(\"minHeight\", -Infinity));\r\n                            var maxHeight = child.get(\"maxHeight\", child.getPrivate(\"maxHeight\", Infinity));\r\n                            privateHeight = Math.min(Math.max(minHeight, privateHeight), maxHeight);\r\n                            child.setPrivate(\"height\", privateHeight);\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n            //}\r\n            var prevY = paddingTop;\r\n            eachChildren(container, function (child) {\r\n                if (child.get(\"position\") == \"relative\") {\r\n                    if (child.isVisible()) {\r\n                        var bounds = child.adjustedLocalBounds();\r\n                        var marginTop = child.get(\"marginTop\", 0);\r\n                        var top_1 = bounds.top;\r\n                        var bottom = bounds.bottom;\r\n                        var maxHeight = child.get(\"maxHeight\");\r\n                        if (maxHeight) {\r\n                            if (bottom - top_1 > maxHeight) {\r\n                                bottom = top_1 + maxHeight;\r\n                            }\r\n                        }\r\n                        var marginBottom = child.get(\"marginBottom\", 0);\r\n                        var y = prevY + marginTop - top_1;\r\n                        child.setPrivate(\"y\", y);\r\n                        prevY = y + bottom + marginBottom;\r\n                    }\r\n                    else {\r\n                        child.setPrivate(\"y\", undefined);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    });\r\n    Object.defineProperty(VerticalLayout, \"className\", {\r\n        enumerable: true,\r\n        configurable: true,\r\n        writable: true,\r\n        value: \"VerticalLayout\"\r\n    });\r\n    Object.defineProperty(VerticalLayout, \"classNames\", {\r\n        enumerable: true,\r\n        configurable: true,\r\n        writable: true,\r\n        value: Layout.classNames.concat([VerticalLayout.className])\r\n    });\r\n    return VerticalLayout;\r\n}(Layout));\r\nexport { VerticalLayout };\r\n//# sourceMappingURL=VerticalLayout.js.map","import { __extends } from \"tslib\";\r\nimport { Layout, eachChildren } from \"./Layout\";\r\nimport * as $array from \"../util/Array\";\r\nimport * as $math from \"../util/Math\";\r\n/**\r\n * A grid children layout for [[Container]].\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/common-elements/containers/#Layout} for more info\r\n */\r\nvar GridLayout = /** @class */ (function (_super) {\r\n    __extends(GridLayout, _super);\r\n    function GridLayout() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    Object.defineProperty(GridLayout.prototype, \"_afterNew\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            this._setRawDefault(\"maxColumns\", Number.MAX_VALUE);\r\n            _super.prototype._afterNew.call(this);\r\n        }\r\n    });\r\n    /**\r\n     * @ignore\r\n     */\r\n    Object.defineProperty(GridLayout.prototype, \"updateContainer\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (container) {\r\n            var paddingLeft = container.get(\"paddingLeft\", 0);\r\n            var paddingRight = container.get(\"paddingRight\", 0);\r\n            var paddingTop = container.get(\"paddingTop\", 0);\r\n            var availableWidth = container.maxWidth() - paddingLeft - paddingRight;\r\n            var minCellWidth = availableWidth;\r\n            var maxCellWidth = 1;\r\n            eachChildren(container, function (child) {\r\n                if (child.get(\"visible\") && child.getPrivate(\"visible\") && !child.get(\"forceHidden\")) {\r\n                    if (child.get(\"position\") != \"absolute\") {\r\n                        var childWidth = child.width();\r\n                        if (childWidth < minCellWidth) {\r\n                            minCellWidth = childWidth;\r\n                        }\r\n                        if (childWidth > maxCellWidth) {\r\n                            maxCellWidth = childWidth;\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n            minCellWidth = $math.fitToRange(minCellWidth, 1, availableWidth);\r\n            maxCellWidth = $math.fitToRange(maxCellWidth, 1, availableWidth);\r\n            var columnCount = 1;\r\n            if (this.get(\"fixedWidthGrid\")) {\r\n                columnCount = availableWidth / maxCellWidth;\r\n            }\r\n            else {\r\n                columnCount = availableWidth / minCellWidth;\r\n            }\r\n            columnCount = Math.max(1, Math.floor(columnCount));\r\n            columnCount = Math.min(this.get(\"maxColumns\", Number.MAX_VALUE), columnCount);\r\n            var columnWidths = this.getColumnWidths(container, columnCount, maxCellWidth, availableWidth);\r\n            var prevY = paddingTop;\r\n            var column = 0;\r\n            var maxColumnHeight = 0;\r\n            columnCount = columnWidths.length;\r\n            var prevX = paddingLeft;\r\n            eachChildren(container, function (child) {\r\n                if (child.get(\"position\") == \"relative\" && child.isVisible()) {\r\n                    var marginTop = child.get(\"marginTop\", 0);\r\n                    var marginBottom = child.get(\"marginBottom\", 0);\r\n                    var bounds = child.adjustedLocalBounds();\r\n                    var marginLeft = child.get(\"marginLeft\", 0);\r\n                    var marginRight = child.get(\"marginRight\", 0);\r\n                    var x = prevX + marginLeft - bounds.left;\r\n                    var y = prevY + marginTop - bounds.top;\r\n                    child.setPrivate(\"x\", x);\r\n                    child.setPrivate(\"y\", y);\r\n                    prevX += columnWidths[column] + marginRight;\r\n                    maxColumnHeight = Math.max(maxColumnHeight, child.height() + marginTop + marginBottom);\r\n                    column++;\r\n                    if (column >= columnCount) {\r\n                        column = 0;\r\n                        prevX = paddingLeft;\r\n                        prevY += maxColumnHeight;\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    });\r\n    /**\r\n     * @ignore\r\n     */\r\n    Object.defineProperty(GridLayout.prototype, \"getColumnWidths\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (container, columnCount, maxCellWidth, availableWidth) {\r\n            var _this = this;\r\n            var totalWidth = 0;\r\n            var columnWidths = [];\r\n            var column = 0;\r\n            eachChildren(container, function (child) {\r\n                var bounds = child.adjustedLocalBounds();\r\n                if (child.get(\"position\") != \"absolute\" && child.isVisible()) {\r\n                    if (_this.get(\"fixedWidthGrid\")) {\r\n                        columnWidths[column] = maxCellWidth;\r\n                    }\r\n                    else {\r\n                        columnWidths[column] = Math.max(columnWidths[column] | 0, bounds.right - bounds.left + child.get(\"marginLeft\", 0) + child.get(\"marginRight\", 0));\r\n                    }\r\n                    if (column < container.children.length - 1) {\r\n                        column++;\r\n                        if (column == columnCount) {\r\n                            column = 0;\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n            $array.each(columnWidths, function (w) {\r\n                totalWidth += w;\r\n            });\r\n            if (totalWidth > availableWidth) {\r\n                if (columnCount > 2) {\r\n                    columnCount -= 1;\r\n                    return this.getColumnWidths(container, columnCount, maxCellWidth, availableWidth);\r\n                }\r\n                else {\r\n                    return [availableWidth];\r\n                }\r\n            }\r\n            return columnWidths;\r\n        }\r\n    });\r\n    Object.defineProperty(GridLayout, \"className\", {\r\n        enumerable: true,\r\n        configurable: true,\r\n        writable: true,\r\n        value: \"GridLayout\"\r\n    });\r\n    Object.defineProperty(GridLayout, \"classNames\", {\r\n        enumerable: true,\r\n        configurable: true,\r\n        writable: true,\r\n        value: Layout.classNames.concat([GridLayout.className])\r\n    });\r\n    return GridLayout;\r\n}(Layout));\r\nexport { GridLayout };\r\n//# sourceMappingURL=GridLayout.js.map","import { Color } from \"./Color\";\r\nimport * as $type from \"./Type\";\r\nvar TextFormatter = /** @class */ (function () {\r\n    function TextFormatter() {\r\n    }\r\n    /**\r\n     * Replaces brackets with temporary placeholders.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param text  Input text\r\n     * @return Escaped text\r\n     */\r\n    Object.defineProperty(TextFormatter, \"escape\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (text) {\r\n            return text.\r\n                replace(/\\[\\[/g, this.prefix + \"1\").\r\n                replace(/([^\\/\\]]{1})\\]\\]/g, \"$1\" + this.prefix + \"2\").\r\n                replace(/\\]\\]/g, this.prefix + \"2\").\r\n                replace(/\\{\\{/g, this.prefix + \"3\").\r\n                replace(/\\}\\}/g, this.prefix + \"4\").\r\n                replace(/\\'\\'/g, this.prefix + \"5\");\r\n        }\r\n    });\r\n    /**\r\n     * Replaces placeholders back to brackets.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param text  Escaped text\r\n     * @return Unescaped text\r\n     */\r\n    Object.defineProperty(TextFormatter, \"unescape\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (text) {\r\n            return text.\r\n                replace(new RegExp(this.prefix + \"1\", \"g\"), \"[[\").\r\n                replace(new RegExp(this.prefix + \"2\", \"g\"), \"]]\").\r\n                replace(new RegExp(this.prefix + \"3\", \"g\"), \"{{\").\r\n                replace(new RegExp(this.prefix + \"4\", \"g\"), \"}}\").\r\n                replace(new RegExp(this.prefix + \"5\", \"g\"), \"''\");\r\n        }\r\n    });\r\n    /**\r\n     * Cleans up the text text for leftover double square brackets.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param text  Input text\r\n     * @return Cleaned up text\r\n     */\r\n    Object.defineProperty(TextFormatter, \"cleanUp\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (text) {\r\n            return text.\r\n                replace(/\\[\\[/g, \"[\").\r\n                replace(/\\]\\]/g, \"]\").\r\n                replace(/\\{\\{/g, \"{\").\r\n                replace(/\\}\\}/g, \"}\").\r\n                replace(/\\'\\'/g, \"'\");\r\n        }\r\n    });\r\n    /**\r\n     * Splits string into chunks. (style blocks, quoted blocks, regular blocks)\r\n     *\r\n     * If the second parameter `quotedBlocks` is set to `true` this method will\r\n     * also single out text blocks enclosed within single quotes that no\r\n     * formatting should be applied to, and they should be displayed as is.\r\n     *\r\n     * Default for the above is `false`, so that you can use single quote in text\r\n     * without escaping it.\r\n     *\r\n     * If enabled, single quotes can be escaped by doubling it - adding two\r\n     * single quotes, which will be replaced by a one single quote in the final\r\n     * output.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param text          Text to chunk\r\n     * @param quotedBlocks  Use quoted blocks\r\n     * @param noFormatting  Formatting blocks will be treated as regular text\r\n     * @return Array of string chunks\r\n     */\r\n    Object.defineProperty(TextFormatter, \"chunk\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (text, quotedBlocks, noFormatting) {\r\n            if (quotedBlocks === void 0) { quotedBlocks = false; }\r\n            if (noFormatting === void 0) { noFormatting = false; }\r\n            // Init result\r\n            var res = [];\r\n            // Replace double (escaped) square spaces and quotes with temporary codes\r\n            text = this.escape(text);\r\n            // Deal with style blocks\r\n            var chunks = quotedBlocks ? text.split(\"'\") : [text];\r\n            for (var i = 0; i < chunks.length; i++) {\r\n                var chunk = chunks[i];\r\n                // Empty?\r\n                if (chunk === \"\") {\r\n                    continue;\r\n                }\r\n                if ((i % 2) === 0) {\r\n                    // Text outside quotes\r\n                    // Parse for style blocks which are \"text\" chunks, the rest chunks are\r\n                    // \"value\"\r\n                    chunk = chunk.replace(/\\]\\[/g, \"]\" + $type.PLACEHOLDER + \"[\");\r\n                    chunk = chunk.replace(/\\[\\]/g, \"[ ]\");\r\n                    var chunks2 = chunk.split(/[\\[\\]]+/);\r\n                    for (var i2 = 0; i2 < chunks2.length; i2++) {\r\n                        var chunk2 = this.cleanUp(this.unescape(chunks2[i2]));\r\n                        // Placeholder?\r\n                        if (chunk2 === $type.PLACEHOLDER) {\r\n                            continue;\r\n                        }\r\n                        // Empty?\r\n                        if (chunk2 === \"\") {\r\n                            continue;\r\n                        }\r\n                        // Block or value\r\n                        if ((i2 % 2) === 0) {\r\n                            res.push({\r\n                                \"type\": \"value\",\r\n                                \"text\": chunk2\r\n                            });\r\n                        }\r\n                        else {\r\n                            res.push({\r\n                                \"type\": noFormatting ? \"value\" : \"format\",\r\n                                \"text\": \"[\" + chunk2 + \"]\"\r\n                            });\r\n                        }\r\n                    }\r\n                }\r\n                else {\r\n                    // A text within doublequotes\r\n                    // All chunks are \"text\"\r\n                    var chunks2 = chunk.split(/[\\[\\]]+/);\r\n                    for (var i2 = 0; i2 < chunks2.length; i2++) {\r\n                        var chunk2 = this.cleanUp(this.unescape(chunks2[i2]));\r\n                        // Empty?\r\n                        if (chunk2 === \"\") {\r\n                            continue;\r\n                        }\r\n                        // Block or text\r\n                        if ((i2 % 2) === 0) {\r\n                            res.push({\r\n                                \"type\": \"text\",\r\n                                \"text\": chunk2\r\n                            });\r\n                        }\r\n                        else if (this.isImage(chunk2)) {\r\n                            res.push({\r\n                                \"type\": \"image\",\r\n                                \"text\": \"[\" + chunk2 + \"]\"\r\n                            });\r\n                        }\r\n                        else {\r\n                            res.push({\r\n                                \"type\": \"format\",\r\n                                \"text\": \"[\" + chunk2 + \"]\"\r\n                            });\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            return res;\r\n        }\r\n    });\r\n    /**\r\n     * Checks if supplied format contains image information and should be\r\n     * formatted as such.\r\n     * I.e.: `[img: myImage.png]`\r\n     *\r\n     * @ignore\r\n     * @param  text  Format\r\n     * @return true if it is an image\r\n     */\r\n    Object.defineProperty(TextFormatter, \"isImage\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (text) {\r\n            return text.match(/img[ ]?:/) ? true : false;\r\n        }\r\n    });\r\n    Object.defineProperty(TextFormatter, \"getTextStyle\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (style) {\r\n            // let textStyle: string[] = [];\r\n            // let textFill: string | undefined;\r\n            var format = {};\r\n            if (style == \"\" || style == \"[ ]\") {\r\n                return {};\r\n            }\r\n            // Pre-process quoted text\r\n            var q = style.match(/('[^']*')|(\"[^\"]*\")/gi);\r\n            if (q) {\r\n                for (var i = 0; i < q.length; i++) {\r\n                    style = style.replace(q[i], q[i].replace(/['\"]*/g, \"\").replace(/[ ]+/g, \"+\"));\r\n                }\r\n            }\r\n            // Get style parts\r\n            var b = style.match(/([\\w\\-]*:[\\s]?[^;\\s\\]]*)|(\\#[\\w]{1,6})|([\\w\\-]+)|(\\/)/gi);\r\n            // Empty?\r\n            if (!b) {\r\n                return {};\r\n            }\r\n            // Check each part\r\n            for (var i = 0; i < b.length; i++) {\r\n                if (b[i].match(/^(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)$/i)) {\r\n                    format.fontWeight = b[i];\r\n                }\r\n                else if (b[i].match(/^(underline|line-through)$/i)) {\r\n                    format.textDecoration = b[i];\r\n                }\r\n                else if (b[i] == \"/\") {\r\n                    // Just closing tag\r\n                    // Do nothing\r\n                }\r\n                else if (!b[i].match(/:/)) {\r\n                    // Color\r\n                    format.fill = Color.fromString(b[i]);\r\n                }\r\n                else {\r\n                    var p = b[i].replace(\"+\", \" \").split(/:[ ]*/);\r\n                    format[p[0]] = p[1];\r\n                    //textStyle.push(b[i].replace(/^[a-zA-Z]:[ ]*/, \"\"));\r\n                    //b[i] = b[i].replace(/\\+/g, \" \");\r\n                }\r\n            }\r\n            return format;\r\n        }\r\n    });\r\n    Object.defineProperty(TextFormatter, \"prefix\", {\r\n        enumerable: true,\r\n        configurable: true,\r\n        writable: true,\r\n        value: \"__amcharts__\"\r\n    });\r\n    return TextFormatter;\r\n}());\r\nexport { TextFormatter };\r\n//# sourceMappingURL=TextFormatter.js.map","/** @ignore */ /** */\r\nimport * as $type from \"./Type\";\r\nimport * as $utils from \"./Utils\";\r\nimport { Sprite } from \"../render/Sprite\";\r\nimport { TextFormatter } from \"./TextFormatter\";\r\n/**\r\n * @ignore\r\n */\r\nexport function populateString(target, string) {\r\n    if (string != null) {\r\n        string = \"\" + string;\r\n        string = TextFormatter.escape(string);\r\n        var tags = string.match(/\\{([^}]+)\\}/g);\r\n        var i = void 0;\r\n        if (tags) {\r\n            for (i = 0; i < tags.length; i++) {\r\n                var tag = tags[i].replace(/\\{([^}]+)\\}/, \"$1\");\r\n                var value = getTagValue(target, tag, \"\");\r\n                if (value == null) {\r\n                    value = \"\";\r\n                }\r\n                string = string.split(tags[i]).join(value);\r\n            }\r\n        }\r\n        string = TextFormatter.unescape(string);\r\n    }\r\n    else {\r\n        string = \"\";\r\n    }\r\n    // TODO: apply adapter?\r\n    return string;\r\n}\r\n/**\r\n * @ignore\r\n */\r\nfunction getTagValue(target, tagName, format) {\r\n    var value;\r\n    var dataItem = target.dataItem;\r\n    // Parse parts\r\n    var parts = [];\r\n    var reg = /([^.]+)\\(([^)]*)\\)|([^.]+)/g;\r\n    ;\r\n    var matches;\r\n    while (true) {\r\n        matches = reg.exec(tagName);\r\n        if (matches === null) {\r\n            break;\r\n        }\r\n        if (matches[3]) {\r\n            // Simple property\r\n            parts.push({\r\n                prop: matches[3]\r\n            });\r\n            // Check if maybe we should force a formatter on this value\r\n            var dateFields = target.getDateFormatter().get(\"dateFields\", []);\r\n            var numericFields = target.getNumberFormatter().get(\"numericFields\", []);\r\n            var durationFields = target.getDurationFormatter().get(\"durationFields\", []);\r\n            if (dateFields.indexOf(matches[3]) !== -1) {\r\n                parts.push({\r\n                    method: \"formatDate\",\r\n                    params: []\r\n                });\r\n            }\r\n            else if (numericFields.indexOf(matches[3]) !== -1) {\r\n                parts.push({\r\n                    method: \"formatNumber\",\r\n                    params: []\r\n                });\r\n            }\r\n            else if (durationFields.indexOf(matches[3]) !== -1) {\r\n                parts.push({\r\n                    method: \"formatDuration\",\r\n                    params: []\r\n                });\r\n            }\r\n        }\r\n        else {\r\n            // Method\r\n            // Parse parameters\r\n            var params = [];\r\n            if ($utils.trim(matches[2]) != \"\") {\r\n                var reg2 = /'([^']*)'|\"([^\"]*)\"|([0-9\\-]+)/g;\r\n                var matches2 = void 0;\r\n                while (true) {\r\n                    matches2 = reg2.exec(matches[2]);\r\n                    if (matches2 === null) {\r\n                        break;\r\n                    }\r\n                    params.push(matches2[1] || matches2[2] || matches2[3]);\r\n                }\r\n            }\r\n            parts.push({\r\n                method: matches[1],\r\n                params: params\r\n            });\r\n        }\r\n    }\r\n    // Check if we can retrieve the value from data item\r\n    if (dataItem) {\r\n        // Check values\r\n        value = getTagValueFromObject(target, parts, dataItem._settings);\r\n        // Check properties\r\n        if (value == null || $type.isObject(value)) { // isObject helps to solve problem with date axis, as for example dateX will get dateX from values object and won't get to the dateX date.\r\n            value = getTagValueFromObject(target, parts, dataItem);\r\n        }\r\n        // Check data context\r\n        var dataContext = dataItem.dataContext;\r\n        if (value == null && dataContext) {\r\n            value = getTagValueFromObject(target, parts, dataContext);\r\n            // Maybe it's a literal dot-separated name of the key in dataContext?\r\n            if (value == null) {\r\n                value = getTagValueFromObject(target, [{\r\n                        prop: tagName\r\n                    }], dataContext);\r\n            }\r\n            // scond data context level sometimes exist (tree map)\r\n            if (value == null && dataContext.dataContext) {\r\n                value = getTagValueFromObject(target, parts, dataContext.dataContext);\r\n            }\r\n        }\r\n        // Check component's data item\r\n        if (value == null && dataItem.component && dataItem.component.dataItem !== dataItem) {\r\n            value = getTagValue(dataItem.component, tagName, format);\r\n        }\r\n    }\r\n    // Check sprite's properties\r\n    if (value == null) {\r\n        value = getTagValueFromObject(target, parts, target);\r\n    }\r\n    // Finally, check the parent\r\n    if (value == null && target.parent) {\r\n        value = getTagValue(target.parent, tagName, format);\r\n    }\r\n    return value;\r\n}\r\n/**\r\n * @ignore\r\n */\r\nfunction getCustomDataValue(target, prop) {\r\n    var customData = target.getPrivate(\"customData\");\r\n    if ($type.isObject(customData)) {\r\n        return customData[prop];\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport function getTagValueFromObject(target, parts, object, format) {\r\n    var current = object;\r\n    var formatApplied = false;\r\n    for (var i = 0, len = parts.length; i < len; i++) {\r\n        var part = parts[i];\r\n        if (part.prop) {\r\n            // Regular property\r\n            if (current instanceof Sprite) {\r\n                var tmp = current.get(part.prop);\r\n                if (tmp == null)\r\n                    tmp = current.getPrivate(part.prop);\r\n                if (tmp == null)\r\n                    tmp = current[part.prop];\r\n                if (tmp == null)\r\n                    tmp = getCustomDataValue(current, part.prop);\r\n                current = tmp;\r\n            }\r\n            else if (current.get) {\r\n                var tmp = current.get(part.prop);\r\n                if (tmp == null)\r\n                    tmp = current[part.prop];\r\n                current = tmp;\r\n            }\r\n            else {\r\n                current = current[part.prop];\r\n            }\r\n            if (current == null) {\r\n                // Not set, return undefined\r\n                return;\r\n            }\r\n        }\r\n        else {\r\n            // Method\r\n            switch (part.method) {\r\n                case \"formatNumber\":\r\n                    var numberValue = $type.toNumber(current);\r\n                    if (numberValue != null) {\r\n                        current = target.getNumberFormatter().format(numberValue, format || part.params[0] || undefined);\r\n                        formatApplied = true;\r\n                    }\r\n                    break;\r\n                case \"formatDate\":\r\n                    var dateValue = $type.toDate(current);\r\n                    if (!$type.isDate(dateValue) || $type.isNaN(dateValue.getTime())) {\r\n                        // Was not able to get date out of value, quitting and letting\r\n                        // calling method try another value\r\n                        return;\r\n                    }\r\n                    if (dateValue != null) {\r\n                        current = target.getDateFormatter().format(dateValue, format || part.params[0] || undefined);\r\n                        formatApplied = true;\r\n                    }\r\n                    break;\r\n                case \"formatDuration\":\r\n                    var durationValue = $type.toNumber(current);\r\n                    if (durationValue != null) {\r\n                        current = target.getDurationFormatter().format(durationValue, format || part.params[0] || undefined, part.params[1] || undefined);\r\n                        formatApplied = true;\r\n                    }\r\n                    break;\r\n                case \"urlEncode\":\r\n                case \"encodeURIComponent\":\r\n                    current = encodeURIComponent(current);\r\n                    break;\r\n                default:\r\n                    if (current[part.method]) {\r\n                        current[part.method].apply(object, part.params);\r\n                    }\r\n                    break;\r\n            }\r\n        }\r\n    }\r\n    // Apply default format if it wasn't applied explicitly\r\n    if (!formatApplied) {\r\n        var formatParts = [{\r\n                method: \"\",\r\n                params: format\r\n            }];\r\n        if (format == null) {\r\n            // Format is not set\r\n            // Determine from the type of the value\r\n            if ($type.isNumber(current)) {\r\n                formatParts[0].method = \"formatNumber\";\r\n                formatParts[0].params = \"\";\r\n            }\r\n            else if ($type.isDate(current)) {\r\n                formatParts[0].method = \"formatDate\";\r\n                formatParts[0].params = \"\";\r\n            }\r\n        }\r\n        else {\r\n            // Format set\r\n            // Try to determine formatter based on the format\r\n            var formatterType = $utils.getFormat(format);\r\n            // format\r\n            if (formatterType === \"number\") {\r\n                formatParts[0].method = \"formatNumber\";\r\n            }\r\n            else if (formatterType === \"date\") {\r\n                formatParts[0].method = \"formatDate\";\r\n            }\r\n            else if (formatterType === \"duration\") {\r\n                formatParts[0].method = \"formatDuration\";\r\n            }\r\n        }\r\n        // Apply format\r\n        if (formatParts[0].method) {\r\n            current = getTagValueFromObject(target, formatParts, current);\r\n        }\r\n    }\r\n    return current;\r\n}\r\n//# sourceMappingURL=PopulateString.js.map","import { __extends } from \"tslib\";\r\nimport { Children } from \"../util/Children\";\r\nimport { Percent } from \"../util/Percent\";\r\nimport { Sprite } from \"./Sprite\";\r\nimport { Rectangle } from \"./Rectangle\";\r\nimport { HorizontalLayout } from \"./HorizontalLayout\";\r\nimport { VerticalLayout } from \"./VerticalLayout\";\r\nimport { GridLayout } from \"./GridLayout\";\r\nimport { populateString } from \"../util/PopulateString\";\r\nimport * as $array from \"../util/Array\";\r\nimport * as $type from \"../util/Type\";\r\nimport * as $utils from \"../util/Utils\";\r\n/**\r\n * A basic element that can have child elements, maintain their layout, and\r\n * have a background.\r\n *\r\n * It can have any [[Sprite]] element as a child, from very basic shapes, to\r\n * full-fledged charts.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/common-elements/containers/} for more info\r\n * @important\r\n */\r\nvar Container = /** @class */ (function (_super) {\r\n    __extends(Container, _super);\r\n    function Container() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        Object.defineProperty(_this, \"_display\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: _this._root._renderer.makeContainer()\r\n        });\r\n        Object.defineProperty(_this, \"_childrenDisplay\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: _this._root._renderer.makeContainer()\r\n        });\r\n        /**\r\n         * List of Container's child elements.\r\n         */\r\n        Object.defineProperty(_this, \"children\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: new Children(_this)\r\n        });\r\n        Object.defineProperty(_this, \"_percentageSizeChildren\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        Object.defineProperty(_this, \"_percentagePositionChildren\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        Object.defineProperty(_this, \"_prevWidth\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(_this, \"_prevHeight\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(_this, \"_contentWidth\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(_this, \"_contentHeight\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(_this, \"_contentMask\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(_this, \"_vsbd0\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(_this, \"_vsbd1\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        return _this;\r\n    }\r\n    Object.defineProperty(Container.prototype, \"_afterNew\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            _super.prototype._afterNew.call(this);\r\n            this._display.addChild(this._childrenDisplay);\r\n        }\r\n    });\r\n    Object.defineProperty(Container.prototype, \"_dispose\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            $array.eachReverse(this.allChildren(), function (child) {\r\n                child.dispose();\r\n            });\r\n            if (this.getPrivate(\"htmlElement\")) {\r\n                this._root._removeHTMLContent(this);\r\n            }\r\n            _super.prototype._dispose.call(this);\r\n        }\r\n    });\r\n    Object.defineProperty(Container.prototype, \"_changed\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            _super.prototype._changed.call(this);\r\n            if (this.isDirty(\"interactiveChildren\")) {\r\n                this._display.interactiveChildren = this.get(\"interactiveChildren\", false);\r\n            }\r\n            if (this.isDirty(\"layout\")) {\r\n                this._prevWidth = 0;\r\n                this._prevHeight = 0;\r\n                this.markDirtyBounds();\r\n                if (this._prevSettings.layout) {\r\n                    this.children.each(function (child) {\r\n                        child.removePrivate(\"x\");\r\n                        child.removePrivate(\"y\");\r\n                    });\r\n                }\r\n            }\r\n            if (this.isDirty(\"paddingTop\") || this.isDirty(\"paddingBottom\") || this.isDirty(\"paddingLeft\") || this.isDirty(\"paddingRight\")) {\r\n                this.children.each(function (child) {\r\n                    child.markDirtyPosition();\r\n                });\r\n            }\r\n            if (this.isDirty(\"maskContent\")) {\r\n                var childrenDisplay = this._childrenDisplay;\r\n                var contentMask = this._contentMask;\r\n                if (this.get(\"maskContent\")) {\r\n                    if (!contentMask) {\r\n                        contentMask = Rectangle.new(this._root, {\r\n                            width: this.width() + .5,\r\n                            height: this.height() + .5\r\n                        });\r\n                        this._contentMask = contentMask;\r\n                        childrenDisplay.addChildAt(contentMask._display, 0);\r\n                        childrenDisplay.mask = contentMask._display;\r\n                    }\r\n                }\r\n                else {\r\n                    if (contentMask) {\r\n                        childrenDisplay.removeChild(contentMask._display);\r\n                        childrenDisplay.mask = null;\r\n                        contentMask.dispose();\r\n                        this._contentMask = undefined;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Container.prototype, \"_updateSize\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            _super.prototype._updateSize.call(this);\r\n            $array.each(this._percentageSizeChildren, function (child) {\r\n                child._updateSize();\r\n            });\r\n            $array.each(this._percentagePositionChildren, function (child) {\r\n                child.markDirtyPosition();\r\n                child._updateSize();\r\n            });\r\n            this.updateBackground();\r\n        }\r\n    });\r\n    Object.defineProperty(Container.prototype, \"updateBackground\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            var background = this.get(\"background\");\r\n            var bounds = this._localBounds;\r\n            if (bounds && !this.isHidden()) {\r\n                var x = bounds.left;\r\n                var y = bounds.top;\r\n                var w = bounds.right - x;\r\n                var h = bounds.bottom - y;\r\n                var maxWidth = this.get(\"maxWidth\");\r\n                var maxHeight = this.get(\"maxHeight\");\r\n                if (maxHeight) {\r\n                    if (h > maxHeight) {\r\n                        h = maxHeight;\r\n                    }\r\n                }\r\n                if (maxWidth) {\r\n                    if (w > maxWidth) {\r\n                        w = maxWidth;\r\n                    }\r\n                }\r\n                var width = this.width();\r\n                var height = this.height();\r\n                if (background) {\r\n                    background.setAll({ width: w, height: h, x: x, y: y });\r\n                    if (this._display.interactive) {\r\n                        background._display.interactive = true;\r\n                    }\r\n                }\r\n                var contentMask = this._contentMask;\r\n                if (contentMask) {\r\n                    contentMask.setAll({ width: width + .5, height: height + .5 });\r\n                }\r\n                var verticalScrollbar = this.get(\"verticalScrollbar\");\r\n                if (verticalScrollbar) {\r\n                    verticalScrollbar.set(\"height\", height);\r\n                    verticalScrollbar.set(\"x\", width - verticalScrollbar.width() - verticalScrollbar.get(\"marginRight\", 0));\r\n                    verticalScrollbar.set(\"end\", verticalScrollbar.get(\"start\", 0) + height / this._contentHeight);\r\n                    var bg = verticalScrollbar.get(\"background\");\r\n                    if (bg) {\r\n                        bg.setAll({ width: verticalScrollbar.width(), height: height });\r\n                    }\r\n                    var visible = true;\r\n                    if (this._contentHeight <= height) {\r\n                        visible = false;\r\n                    }\r\n                    verticalScrollbar.setPrivate(\"visible\", visible);\r\n                }\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Container.prototype, \"_applyThemes\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            if (_super.prototype._applyThemes.call(this)) {\r\n                this.eachChildren(function (child) {\r\n                    child._applyThemes();\r\n                });\r\n                return true;\r\n            }\r\n            else {\r\n                return false;\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Container.prototype, \"_applyState\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (name) {\r\n            _super.prototype._applyState.call(this, name);\r\n            if (this.get(\"setStateOnChildren\")) {\r\n                this.eachChildren(function (child) {\r\n                    child.states.apply(name);\r\n                });\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Container.prototype, \"_applyStateAnimated\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (name, duration) {\r\n            _super.prototype._applyStateAnimated.call(this, name, duration);\r\n            if (this.get(\"setStateOnChildren\")) {\r\n                this.eachChildren(function (child) {\r\n                    child.states.applyAnimate(name, duration);\r\n                });\r\n            }\r\n        }\r\n    });\r\n    /**\r\n     * Returns container's inner width (width without padding) in pixels.\r\n     *\r\n     * @return Inner width (px)\r\n     */\r\n    Object.defineProperty(Container.prototype, \"innerWidth\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            return this.width() - this.get(\"paddingRight\", 0) - this.get(\"paddingLeft\", 0);\r\n        }\r\n    });\r\n    /**\r\n     * Returns container's inner height (height without padding) in pixels.\r\n     *\r\n     * @return Inner height (px)\r\n     */\r\n    Object.defineProperty(Container.prototype, \"innerHeight\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            return this.height() - this.get(\"paddingTop\", 0) - this.get(\"paddingBottom\", 0);\r\n        }\r\n    });\r\n    Object.defineProperty(Container.prototype, \"_getBounds\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            var width = this.get(\"width\");\r\n            var height = this.get(\"height\");\r\n            var pWidth = this.getPrivate(\"width\");\r\n            var pHeight = this.getPrivate(\"height\");\r\n            var bounds = {\r\n                left: 0,\r\n                top: 0,\r\n                right: this.width(),\r\n                bottom: this.height(),\r\n            };\r\n            var layout = this.get(\"layout\");\r\n            var horizontal = false;\r\n            var vertical = false;\r\n            if (layout instanceof HorizontalLayout || layout instanceof GridLayout) {\r\n                horizontal = true;\r\n            }\r\n            if (layout instanceof VerticalLayout) {\r\n                vertical = true;\r\n            }\r\n            if ((width != null || pWidth != null) && (height != null || pHeight != null) && !this.get(\"verticalScrollbar\")) {\r\n                // void\r\n            }\r\n            else {\r\n                var m = Number.MAX_VALUE;\r\n                var l_1 = m;\r\n                var r_1 = -m;\r\n                var t_1 = m;\r\n                var b_1 = -m;\r\n                var paddingLeft = this.get(\"paddingLeft\", 0);\r\n                var paddingTop = this.get(\"paddingTop\", 0);\r\n                var paddingRight = this.get(\"paddingRight\", 0);\r\n                var paddingBottom = this.get(\"paddingBottom\", 0);\r\n                this.children.each(function (child) {\r\n                    if (child.get(\"position\") != \"absolute\" && child.get(\"isMeasured\")) {\r\n                        var childBounds = child.adjustedLocalBounds();\r\n                        var childX = child.x();\r\n                        var childY = child.y();\r\n                        var cl = childX + childBounds.left;\r\n                        var cr = childX + childBounds.right;\r\n                        var ct = childY + childBounds.top;\r\n                        var cb = childY + childBounds.bottom;\r\n                        if (horizontal) {\r\n                            cl -= child.get(\"marginLeft\", 0);\r\n                            cr += child.get(\"marginRight\", 0);\r\n                        }\r\n                        if (vertical) {\r\n                            ct -= child.get(\"marginTop\", 0);\r\n                            cb += child.get(\"marginBottom\", 0);\r\n                        }\r\n                        if (cl < l_1) {\r\n                            l_1 = cl;\r\n                        }\r\n                        if (cr > r_1) {\r\n                            r_1 = cr;\r\n                        }\r\n                        if (ct < t_1) {\r\n                            t_1 = ct;\r\n                        }\r\n                        if (cb > b_1) {\r\n                            b_1 = cb;\r\n                        }\r\n                    }\r\n                });\r\n                if (l_1 == m) {\r\n                    l_1 = 0;\r\n                }\r\n                if (r_1 == -m) {\r\n                    r_1 = 0;\r\n                }\r\n                if (t_1 == m) {\r\n                    t_1 = 0;\r\n                }\r\n                if (b_1 == -m) {\r\n                    b_1 = 0;\r\n                }\r\n                bounds.left = l_1 - paddingLeft;\r\n                bounds.top = t_1 - paddingTop;\r\n                bounds.right = r_1 + paddingRight;\r\n                bounds.bottom = b_1 + paddingBottom;\r\n            }\r\n            this._contentWidth = bounds.right - bounds.left;\r\n            this._contentHeight = bounds.bottom - bounds.top;\r\n            if ($type.isNumber(width)) {\r\n                bounds.left = 0;\r\n                bounds.right = width;\r\n            }\r\n            if ($type.isNumber(pWidth)) {\r\n                bounds.left = 0;\r\n                bounds.right = pWidth;\r\n            }\r\n            if ($type.isNumber(height)) {\r\n                bounds.top = 0;\r\n                bounds.bottom = height;\r\n            }\r\n            if ($type.isNumber(pHeight)) {\r\n                bounds.top = 0;\r\n                bounds.bottom = pHeight;\r\n            }\r\n            this._localBounds = bounds;\r\n        }\r\n    });\r\n    Object.defineProperty(Container.prototype, \"_updateBounds\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            var layout = this.get(\"layout\");\r\n            if (layout) {\r\n                layout.updateContainer(this);\r\n            }\r\n            _super.prototype._updateBounds.call(this);\r\n            this.updateBackground();\r\n        }\r\n    });\r\n    /**\r\n     * @ignore\r\n     */\r\n    Object.defineProperty(Container.prototype, \"markDirty\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            _super.prototype.markDirty.call(this);\r\n            this._root._addDirtyParent(this);\r\n        }\r\n    });\r\n    Object.defineProperty(Container.prototype, \"_prepareChildren\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            var innerWidth = this.innerWidth();\r\n            var innerHeight = this.innerHeight();\r\n            if (innerWidth != this._prevWidth || innerHeight != this._prevHeight) {\r\n                var layout = this.get(\"layout\");\r\n                var horizontal_1 = false;\r\n                var vertical_1 = false;\r\n                if (layout) {\r\n                    if (layout instanceof HorizontalLayout || layout instanceof GridLayout) {\r\n                        horizontal_1 = true;\r\n                    }\r\n                    if (layout instanceof VerticalLayout) {\r\n                        vertical_1 = true;\r\n                    }\r\n                }\r\n                $array.each(this._percentageSizeChildren, function (child) {\r\n                    if (!horizontal_1) {\r\n                        var width = child.get(\"width\");\r\n                        if (width instanceof Percent) {\r\n                            child.setPrivate(\"width\", width.value * innerWidth);\r\n                        }\r\n                    }\r\n                    if (!vertical_1) {\r\n                        var height = child.get(\"height\");\r\n                        if (height instanceof Percent) {\r\n                            child.setPrivate(\"height\", height.value * innerHeight);\r\n                        }\r\n                    }\r\n                });\r\n                $array.each(this._percentagePositionChildren, function (child) {\r\n                    child.markDirtyPosition();\r\n                    child.markDirtyBounds();\r\n                });\r\n                this._prevWidth = innerWidth;\r\n                this._prevHeight = innerHeight;\r\n                this._sizeDirty = true;\r\n                this.updateBackground();\r\n            }\r\n            this._handleStates();\r\n        }\r\n    });\r\n    Object.defineProperty(Container.prototype, \"_updateChildren\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            var _this = this;\r\n            if (this.isDirty(\"html\")) {\r\n                var html = this.get(\"html\");\r\n                if (html && html !== \"\") {\r\n                    this._root._setHTMLContent(this, populateString(this, this.get(\"html\", \"\")));\r\n                }\r\n                else {\r\n                    this._root._removeHTMLContent(this);\r\n                }\r\n                this._root._positionHTMLElement(this);\r\n            }\r\n            if (this.isDirty(\"verticalScrollbar\")) {\r\n                var verticalScrollbar_1 = this.get(\"verticalScrollbar\");\r\n                if (verticalScrollbar_1) {\r\n                    verticalScrollbar_1._setParent(this);\r\n                    verticalScrollbar_1.children.removeValue(verticalScrollbar_1.startGrip);\r\n                    verticalScrollbar_1.children.removeValue(verticalScrollbar_1.endGrip);\r\n                    this.set(\"maskContent\", true);\r\n                    this.set(\"paddingRight\", verticalScrollbar_1.width() + verticalScrollbar_1.get(\"marginRight\", 0) + verticalScrollbar_1.get(\"marginLeft\", 0));\r\n                    var background = this.get(\"background\");\r\n                    if (!background) {\r\n                        background = this.set(\"background\", Rectangle.new(this._root, {\r\n                            themeTags: [\"background\"],\r\n                            fillOpacity: 0,\r\n                            fill: this._root.interfaceColors.get(\"alternativeBackground\")\r\n                        }));\r\n                    }\r\n                    this._vsbd0 = this.events.on(\"wheel\", function (event) {\r\n                        var wheelEvent = event.originalEvent;\r\n                        // Ignore wheel event if it is happening on a non-chart element, e.g. if\r\n                        // some page element is over the chart.\r\n                        if ($utils.isLocalEvent(wheelEvent, _this)) {\r\n                            wheelEvent.preventDefault();\r\n                        }\r\n                        else {\r\n                            return;\r\n                        }\r\n                        var shiftY = wheelEvent.deltaY / 5000;\r\n                        var start = verticalScrollbar_1.get(\"start\", 0);\r\n                        var end = verticalScrollbar_1.get(\"end\", 1);\r\n                        if (start + shiftY > 0 && end + shiftY < 1) {\r\n                            verticalScrollbar_1.set(\"start\", start + shiftY);\r\n                            verticalScrollbar_1.set(\"end\", end + shiftY);\r\n                        }\r\n                    });\r\n                    this._disposers.push(this._vsbd0);\r\n                    this._vsbd1 = verticalScrollbar_1.events.on(\"rangechanged\", function () {\r\n                        var h = _this._contentHeight;\r\n                        var childrenDisplay = _this._childrenDisplay;\r\n                        var contentMask = _this._contentMask;\r\n                        childrenDisplay.y = -verticalScrollbar_1.get(\"start\") * h;\r\n                        childrenDisplay.markDirtyLayer();\r\n                        if (contentMask) {\r\n                            contentMask._display.y = -childrenDisplay.y;\r\n                            childrenDisplay.mask = contentMask._display;\r\n                        }\r\n                    });\r\n                    this._disposers.push(this._vsbd1);\r\n                    this._display.addChild(verticalScrollbar_1._display);\r\n                }\r\n                else {\r\n                    var previous = this._prevSettings.verticalScrollbar;\r\n                    if (previous) {\r\n                        this._display.removeChild(previous._display);\r\n                        if (this._vsbd0) {\r\n                            this._vsbd0.dispose();\r\n                        }\r\n                        if (this._vsbd1) {\r\n                            this._vsbd1.dispose();\r\n                        }\r\n                        var childrenDisplay = this._childrenDisplay;\r\n                        childrenDisplay.y = 0;\r\n                        this.setPrivate(\"height\", undefined);\r\n                        this.set(\"maskContent\", false);\r\n                        this.set(\"paddingRight\", undefined);\r\n                    }\r\n                }\r\n            }\r\n            if (this.isDirty(\"background\")) {\r\n                // TODO maybe this should dispose ?\r\n                var previous = this._prevSettings[\"background\"];\r\n                if (previous) {\r\n                    this._display.removeChild(previous._display);\r\n                }\r\n                var background = this.get(\"background\");\r\n                if (background instanceof Sprite) {\r\n                    background.set(\"isMeasured\", false);\r\n                    background._setParent(this);\r\n                    this._display.addChildAt(background._display, 0);\r\n                }\r\n            }\r\n            if (this.isDirty(\"mask\")) {\r\n                var mask = this.get(\"mask\");\r\n                var previous = this._prevSettings[\"mask\"];\r\n                if (previous) {\r\n                    this._display.removeChild(previous._display);\r\n                    if (previous != mask) {\r\n                        previous.dispose();\r\n                    }\r\n                }\r\n                if (mask) {\r\n                    var parent = mask.parent;\r\n                    if (parent) {\r\n                        parent.children.removeValue(mask);\r\n                    }\r\n                    mask._setParent(this);\r\n                    this._display.addChildAt(mask._display, 0);\r\n                    this._childrenDisplay.mask = mask._display;\r\n                }\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Container.prototype, \"_processTemplateField\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            _super.prototype._processTemplateField.call(this);\r\n            this.children.each(function (child) {\r\n                child._processTemplateField();\r\n            });\r\n        }\r\n    });\r\n    /**\r\n     * @ignore\r\n     */\r\n    Object.defineProperty(Container.prototype, \"walkChildren\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (f) {\r\n            this.children.each(function (child) {\r\n                if (child instanceof Container) {\r\n                    child.walkChildren(f);\r\n                }\r\n                f(child);\r\n            });\r\n        }\r\n    });\r\n    Object.defineProperty(Container.prototype, \"eachChildren\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (f) {\r\n            var background = this.get(\"background\");\r\n            if (background) {\r\n                f(background);\r\n            }\r\n            var verticalScrollbar = this.get(\"verticalScrollbar\");\r\n            if (verticalScrollbar) {\r\n                f(verticalScrollbar);\r\n            }\r\n            var mask = this.get(\"mask\");\r\n            if (mask) {\r\n                f(mask);\r\n            }\r\n            this.children.values.forEach(function (child) {\r\n                f(child);\r\n            });\r\n        }\r\n    });\r\n    Object.defineProperty(Container.prototype, \"allChildren\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            var output = [];\r\n            this.eachChildren(function (x) {\r\n                output.push(x);\r\n            });\r\n            return output;\r\n        }\r\n    });\r\n    Object.defineProperty(Container.prototype, \"_setDataItem\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (dataItem) {\r\n            var updated = (dataItem !== this._dataItem);\r\n            _super.prototype._setDataItem.call(this, dataItem);\r\n            var html = this.get(\"html\", \"\");\r\n            if (html && html !== \"\" && updated) {\r\n                this._root._setHTMLContent(this, populateString(this, html));\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Container, \"className\", {\r\n        enumerable: true,\r\n        configurable: true,\r\n        writable: true,\r\n        value: \"Container\"\r\n    });\r\n    Object.defineProperty(Container, \"classNames\", {\r\n        enumerable: true,\r\n        configurable: true,\r\n        writable: true,\r\n        value: Sprite.classNames.concat([Container.className])\r\n    });\r\n    return Container;\r\n}(Sprite));\r\nexport { Container };\r\n//# sourceMappingURL=Container.js.map","import { __extends } from \"tslib\";\r\nimport { Sprite } from \"./Sprite\";\r\nimport { populateString } from \"../util/PopulateString\";\r\nimport * as $array from \"../util/Array\";\r\n/**\r\n * @ignore Text is an internal class. Use Label instead.\r\n */\r\nvar Text = /** @class */ (function (_super) {\r\n    __extends(Text, _super);\r\n    function Text() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        Object.defineProperty(_this, \"textStyle\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: _this._root._renderer.makeTextStyle()\r\n        });\r\n        Object.defineProperty(_this, \"_display\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: _this._root._renderer.makeText(\"\", _this.textStyle)\r\n        });\r\n        Object.defineProperty(_this, \"_textStyles\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: [\r\n                \"textAlign\",\r\n                \"fontFamily\",\r\n                \"fontSize\",\r\n                \"fontStyle\",\r\n                \"fontWeight\",\r\n                \"fontStyle\",\r\n                \"fontVariant\",\r\n                \"textDecoration\",\r\n                \"shadowColor\",\r\n                \"shadowBlur\",\r\n                \"shadowOffsetX\",\r\n                \"shadowOffsetY\",\r\n                \"shadowOpacity\",\r\n                // \"leading\",\r\n                // \"letterSpacing\",\r\n                \"lineHeight\",\r\n                \"baselineRatio\",\r\n                //\"padding\",\r\n                // \"stroke\",\r\n                // \"strokeThickness\",\r\n                // \"trim\",\r\n                // \"wordWrap\",\r\n                \"direction\",\r\n                \"textBaseline\",\r\n                \"oversizedBehavior\",\r\n                \"breakWords\",\r\n                \"ellipsis\",\r\n                \"minScale\"\r\n            ]\r\n        });\r\n        Object.defineProperty(_this, \"_originalScale\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        return _this;\r\n    }\r\n    Object.defineProperty(Text.prototype, \"_updateBounds\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            if (!this.get(\"text\")) {\r\n                var newBounds = {\r\n                    left: 0,\r\n                    right: 0,\r\n                    top: 0,\r\n                    bottom: 0,\r\n                };\r\n                this._adjustedLocalBounds = newBounds;\r\n            }\r\n            else {\r\n                _super.prototype._updateBounds.call(this);\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Text.prototype, \"_changed\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            var _this = this;\r\n            _super.prototype._changed.call(this);\r\n            this._display.clear();\r\n            var textStyle = this.textStyle;\r\n            if (this.isDirty(\"opacity\")) {\r\n                var opacity = this.get(\"opacity\", 1);\r\n                this._display.alpha = opacity;\r\n            }\r\n            if (this.isDirty(\"text\") || this.isDirty(\"populateText\")) {\r\n                this._display.text = this._getText();\r\n                this.markDirtyBounds();\r\n                if (this.get(\"role\") == \"tooltip\") {\r\n                    this._root.updateTooltip(this);\r\n                }\r\n            }\r\n            if (this.isDirty(\"width\")) {\r\n                textStyle.wordWrapWidth = this.width();\r\n                this.markDirtyBounds();\r\n            }\r\n            if (this.isDirty(\"oversizedBehavior\")) {\r\n                textStyle.oversizedBehavior = this.get(\"oversizedBehavior\", \"none\");\r\n                this.markDirtyBounds();\r\n            }\r\n            if (this.isDirty(\"breakWords\")) {\r\n                textStyle.breakWords = this.get(\"breakWords\", false);\r\n                this.markDirtyBounds();\r\n            }\r\n            if (this.isDirty(\"ellipsis\")) {\r\n                textStyle.ellipsis = this.get(\"ellipsis\");\r\n                this.markDirtyBounds();\r\n            }\r\n            if (this.isDirty(\"ignoreFormatting\")) {\r\n                textStyle.ignoreFormatting = this.get(\"ignoreFormatting\", false);\r\n                this.markDirtyBounds();\r\n            }\r\n            if (this.isDirty(\"minScale\")) {\r\n                textStyle.minScale = this.get(\"minScale\", 0);\r\n                this.markDirtyBounds();\r\n            }\r\n            if (this.isDirty(\"fill\")) {\r\n                var fill = this.get(\"fill\");\r\n                if (fill) {\r\n                    textStyle.fill = fill;\r\n                }\r\n            }\r\n            if (this.isDirty(\"fillOpacity\")) {\r\n                var fillOpacity = this.get(\"fillOpacity\", 1);\r\n                if (fillOpacity) {\r\n                    textStyle.fillOpacity = fillOpacity;\r\n                }\r\n            }\r\n            if (this.isDirty(\"maxWidth\") || this.isPrivateDirty(\"maxWidth\")) {\r\n                textStyle.maxWidth = this.get(\"maxWidth\", this.getPrivate(\"maxWidth\"));\r\n                this.markDirtyBounds();\r\n            }\r\n            if (this.isDirty(\"maxHeight\") || this.isPrivateDirty(\"maxHeight\")) {\r\n                textStyle.maxHeight = this.get(\"maxHeight\", this.getPrivate(\"maxHeight\"));\r\n                this.markDirtyBounds();\r\n            }\r\n            $array.each(this._textStyles, function (styleName) {\r\n                if (_this._dirty[styleName]) {\r\n                    textStyle[styleName] = _this.get(styleName);\r\n                    _this.markDirtyBounds();\r\n                }\r\n            });\r\n            textStyle[\"fontSize\"] = this.get(\"fontSize\");\r\n            textStyle[\"fontFamily\"] = this.get(\"fontFamily\");\r\n            this._display.style = textStyle;\r\n            if (this.isDirty(\"role\") && this.get(\"role\") == \"tooltip\") {\r\n                this._root.updateTooltip(this);\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Text.prototype, \"_getText\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            var text = this.get(\"text\", \"\");\r\n            return this.get(\"populateText\") ? populateString(this, text) : text;\r\n        }\r\n    });\r\n    Object.defineProperty(Text.prototype, \"markDirtyText\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            this._display.text = this._getText();\r\n            if (this.get(\"role\") == \"tooltip\") {\r\n                this._root.updateTooltip(this);\r\n            }\r\n            this.markDirtyBounds();\r\n            this.markDirty();\r\n        }\r\n    });\r\n    Object.defineProperty(Text.prototype, \"_setDataItem\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (dataItem) {\r\n            _super.prototype._setDataItem.call(this, dataItem);\r\n            if (this.get(\"populateText\")) {\r\n                this.markDirtyText();\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Text.prototype, \"getNumberFormatter\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            if (this.parent) {\r\n                return this.parent.getNumberFormatter();\r\n            }\r\n            else {\r\n                return _super.prototype.getNumberFormatter.call(this);\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Text.prototype, \"getDateFormatter\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            if (this.parent) {\r\n                return this.parent.getDateFormatter();\r\n            }\r\n            else {\r\n                return _super.prototype.getDateFormatter.call(this);\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Text.prototype, \"getDurationFormatter\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            if (this.parent) {\r\n                return this.parent.getDurationFormatter();\r\n            }\r\n            else {\r\n                return _super.prototype.getDurationFormatter.call(this);\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Text, \"className\", {\r\n        enumerable: true,\r\n        configurable: true,\r\n        writable: true,\r\n        value: \"Text\"\r\n    });\r\n    Object.defineProperty(Text, \"classNames\", {\r\n        enumerable: true,\r\n        configurable: true,\r\n        writable: true,\r\n        value: Sprite.classNames.concat([Text.className])\r\n    });\r\n    return Text;\r\n}(Sprite));\r\nexport { Text };\r\n//# sourceMappingURL=Text.js.map","/** @ignore */ /** */\r\nimport * as $array from \"./Array\";\r\nimport * as $utils from \"./Utils\";\r\n/**\r\n * @ignore\r\n */\r\nvar Native = /** @class */ (function () {\r\n    function Native() {\r\n        var _this = this;\r\n        Object.defineProperty(this, \"_observer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_targets\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        this._observer = new ResizeObserver(function (entries) {\r\n            $array.each(entries, function (entry) {\r\n                $array.each(_this._targets, function (x) {\r\n                    if (x.target === entry.target) {\r\n                        x.callback();\r\n                    }\r\n                });\r\n            });\r\n        });\r\n    }\r\n    Object.defineProperty(Native.prototype, \"addTarget\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (target, callback) {\r\n            this._observer.observe(target, { box: \"border-box\" });\r\n            this._targets.push({ target: target, callback: callback });\r\n        }\r\n    });\r\n    Object.defineProperty(Native.prototype, \"removeTarget\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (target) {\r\n            this._observer.unobserve(target);\r\n            $array.keepIf(this._targets, function (x) {\r\n                return x.target !== target;\r\n            });\r\n        }\r\n    });\r\n    return Native;\r\n}());\r\n/**\r\n * @ignore\r\n */\r\nvar Raf = /** @class */ (function () {\r\n    function Raf() {\r\n        Object.defineProperty(this, \"_timer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: null\r\n        });\r\n        Object.defineProperty(this, \"_targets\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n    }\r\n    Object.defineProperty(Raf.prototype, \"addTarget\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (target, callback) {\r\n            var _this = this;\r\n            if (this._timer === null) {\r\n                var lastTime_1 = null;\r\n                var loop_1 = function () {\r\n                    var currentTime = Date.now();\r\n                    if (lastTime_1 === null || currentTime > (lastTime_1 + Raf.delay)) {\r\n                        lastTime_1 = currentTime;\r\n                        $array.each(_this._targets, function (x) {\r\n                            var newSize = x.target.getBoundingClientRect();\r\n                            if (newSize.width !== x.size.width || newSize.height !== x.size.height) {\r\n                                x.size = newSize;\r\n                                x.callback();\r\n                            }\r\n                        });\r\n                    }\r\n                    if (_this._targets.length === 0) {\r\n                        _this._timer = null;\r\n                    }\r\n                    else {\r\n                        _this._timer = requestAnimationFrame(loop_1);\r\n                    }\r\n                };\r\n                this._timer = requestAnimationFrame(loop_1);\r\n            }\r\n            // We start off with fake bounds so that sensor always kicks in\r\n            var size = { width: 0, height: 0, left: 0, right: 0, top: 0, bottom: 0, x: 0, y: 0 };\r\n            this._targets.push({ target: target, callback: callback, size: size });\r\n        }\r\n    });\r\n    Object.defineProperty(Raf.prototype, \"removeTarget\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (target) {\r\n            $array.keepIf(this._targets, function (x) {\r\n                return x.target !== target;\r\n            });\r\n            if (this._targets.length === 0) {\r\n                if (this._timer !== null) {\r\n                    cancelAnimationFrame(this._timer);\r\n                    this._timer = null;\r\n                }\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Raf, \"delay\", {\r\n        enumerable: true,\r\n        configurable: true,\r\n        writable: true,\r\n        value: 200\r\n    });\r\n    return Raf;\r\n}());\r\n/**\r\n * @ignore\r\n */\r\nvar observer = null;\r\n/**\r\n * @ignore\r\n */\r\nfunction makeSensor() {\r\n    if (observer === null) {\r\n        if (typeof ResizeObserver !== \"undefined\") {\r\n            observer = new Native();\r\n        }\r\n        else {\r\n            observer = new Raf();\r\n        }\r\n    }\r\n    return observer;\r\n}\r\n/**\r\n * @ignore\r\n */\r\nvar ResizeSensor = /** @class */ (function () {\r\n    function ResizeSensor(element, callback) {\r\n        Object.defineProperty(this, \"_sensor\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_element\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_listener\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_disposed\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        this._sensor = makeSensor();\r\n        this._element = element;\r\n        // This is needed because we need to know when the window is zoomed\r\n        this._listener = $utils.onZoom(callback);\r\n        this._sensor.addTarget(element, callback);\r\n    }\r\n    Object.defineProperty(ResizeSensor.prototype, \"isDisposed\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            return this._disposed;\r\n        }\r\n    });\r\n    Object.defineProperty(ResizeSensor.prototype, \"dispose\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            if (!this._disposed) {\r\n                this._disposed = true;\r\n                this._sensor.removeTarget(this._element);\r\n                this._listener.dispose();\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(ResizeSensor.prototype, \"sensor\", {\r\n        get: function () {\r\n            return this._sensor;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    return ResizeSensor;\r\n}());\r\nexport { ResizeSensor };\r\n//# sourceMappingURL=ResizeSensor.js.map","import { __extends } from \"tslib\";\r\nimport { Entity } from \"./Entity\";\r\n/**\r\n * Presets for common UI elements.\r\n */\r\nvar InterfaceColors = /** @class */ (function (_super) {\r\n    __extends(InterfaceColors, _super);\r\n    function InterfaceColors() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    Object.defineProperty(InterfaceColors, \"className\", {\r\n        enumerable: true,\r\n        configurable: true,\r\n        writable: true,\r\n        value: \"InterfaceColors\"\r\n    });\r\n    Object.defineProperty(InterfaceColors, \"classNames\", {\r\n        enumerable: true,\r\n        configurable: true,\r\n        writable: true,\r\n        value: Entity.classNames.concat([InterfaceColors.className])\r\n    });\r\n    return InterfaceColors;\r\n}(Entity));\r\nexport { InterfaceColors };\r\n//# sourceMappingURL=InterfaceColors.js.map","import { __extends } from \"tslib\";\r\nimport { Text } from \"../render/Text\";\r\nimport { p50, p100 } from \"../util/Percent\";\r\nimport { Container } from \"./Container\";\r\nimport * as $array from \"../../core/util/Array\";\r\nimport * as $type from \"../../core/util/Type\";\r\n/**\r\n * Creates a label with support for in-line styling and data bindings.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/common-elements/labels/} for more info\r\n */\r\nvar Label = /** @class */ (function (_super) {\r\n    __extends(Label, _super);\r\n    function Label() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        Object.defineProperty(_this, \"_text\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(_this, \"_textKeys\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: [\r\n                \"text\",\r\n                \"fill\",\r\n                \"fillOpacity\",\r\n                \"textAlign\",\r\n                \"fontFamily\",\r\n                \"fontSize\",\r\n                \"fontStyle\",\r\n                \"fontWeight\",\r\n                \"fontStyle\",\r\n                \"fontVariant\",\r\n                \"textDecoration\",\r\n                \"shadowColor\",\r\n                \"shadowBlur\",\r\n                \"shadowOffsetX\",\r\n                \"shadowOffsetY\",\r\n                \"shadowOpacity\",\r\n                // \"leading\",\r\n                // \"letterSpacing\",\r\n                \"lineHeight\",\r\n                \"baselineRatio\",\r\n                //\"padding\",\r\n                // \"stroke\",\r\n                // \"strokeThickness\",\r\n                // \"trim\",\r\n                // \"wordWrap\",\r\n                \"direction\",\r\n                \"textBaseline\",\r\n                \"oversizedBehavior\",\r\n                \"breakWords\",\r\n                \"ellipsis\",\r\n                \"minScale\",\r\n                \"populateText\",\r\n                \"role\",\r\n                \"ignoreFormatting\"\r\n            ]\r\n        });\r\n        return _this;\r\n    }\r\n    Object.defineProperty(Label.prototype, \"text\", {\r\n        /**\r\n         * @ignore Text is not to be used directly\r\n         */\r\n        get: function () {\r\n            return this._text;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Label.prototype, \"_afterNew\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            var _this = this;\r\n            _super.prototype._afterNew.call(this);\r\n            this._makeText();\r\n            $array.each(this._textKeys, function (property) {\r\n                var propValue = _this.get(property);\r\n                if (propValue != undefined) {\r\n                    _this._text.set(property, propValue);\r\n                }\r\n            });\r\n            if (this.get(\"html\", \"\") !== \"\") {\r\n                this._text.set(\"text\", \"\");\r\n            }\r\n            this.onPrivate(\"maxWidth\", function () {\r\n                _this._setMaxDimentions();\r\n            });\r\n            this.onPrivate(\"maxHeight\", function () {\r\n                _this._setMaxDimentions();\r\n            });\r\n        }\r\n    });\r\n    Object.defineProperty(Label.prototype, \"_makeText\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            this._text = this.children.push(Text.new(this._root, {}));\r\n        }\r\n    });\r\n    Object.defineProperty(Label.prototype, \"_updateChildren\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            var _this = this;\r\n            _super.prototype._updateChildren.call(this);\r\n            $array.each(this._textKeys, function (property) {\r\n                _this._text.set(property, _this.get(property));\r\n            });\r\n            if (this.isDirty(\"maxWidth\")) {\r\n                this._setMaxDimentions();\r\n            }\r\n            if (this.isDirty(\"maxHeight\")) {\r\n                this._setMaxDimentions();\r\n            }\r\n            if (this.isDirty(\"rotation\")) {\r\n                this._setMaxDimentions();\r\n            }\r\n            // Do not show regular text if HTML is used\r\n            if (this.get(\"html\", \"\") !== \"\") {\r\n                this._text.set(\"text\", \"\");\r\n            }\r\n            else {\r\n                this._text.set(\"text\", this.get(\"text\"));\r\n            }\r\n            if (this.isDirty(\"textAlign\") || this.isDirty(\"width\")) {\r\n                var textAlign = this.get(\"textAlign\");\r\n                var x = void 0;\r\n                if (this.get(\"width\") != null) {\r\n                    if (textAlign == \"right\") {\r\n                        x = p100;\r\n                    }\r\n                    else if (textAlign == \"center\") {\r\n                        x = p50;\r\n                    }\r\n                    else {\r\n                        x = 0;\r\n                    }\r\n                }\r\n                else {\r\n                    if (textAlign == \"left\" || textAlign == \"start\") {\r\n                        x = this.get(\"paddingLeft\");\r\n                    }\r\n                    else if (textAlign == \"right\" || textAlign == \"end\") {\r\n                        x = -this.get(\"paddingRight\");\r\n                    }\r\n                }\r\n                this.text.set(\"x\", x);\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Label.prototype, \"_setMaxDimentions\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            var rotation = this.get(\"rotation\");\r\n            var vertical = rotation == 90 || rotation == 270 || rotation == -90;\r\n            var maxWidth = this.get(\"maxWidth\", this.getPrivate(\"maxWidth\", Infinity));\r\n            if ($type.isNumber(maxWidth)) {\r\n                this.text.set(vertical ? \"maxHeight\" : \"maxWidth\", maxWidth - this.get(\"paddingLeft\", 0) - this.get(\"paddingRight\", 0));\r\n            }\r\n            else {\r\n                this.text.set(vertical ? \"maxHeight\" : \"maxWidth\", undefined);\r\n            }\r\n            var maxHeight = this.get(\"maxHeight\", this.getPrivate(\"maxHeight\", Infinity));\r\n            if ($type.isNumber(maxHeight)) {\r\n                this.text.set(vertical ? \"maxWidth\" : \"maxHeight\", maxHeight - this.get(\"paddingTop\", 0) - this.get(\"paddingBottom\", 0));\r\n            }\r\n            else {\r\n                this.text.set(vertical ? \"maxWidth\" : \"maxHeight\", undefined);\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Label.prototype, \"_setDataItem\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (dataItem) {\r\n            _super.prototype._setDataItem.call(this, dataItem);\r\n            this._markDirtyKey(\"text\");\r\n            if (this.text.get(\"populateText\")) {\r\n                this.text.markDirtyText();\r\n            }\r\n        }\r\n    });\r\n    /**\r\n     * Returns text with populated placeholders and formatting if `populateText` is\r\n     * set to `true`.\r\n     *\r\n     * @return Populated text\r\n     */\r\n    Object.defineProperty(Label.prototype, \"getText\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            return this._text._getText();\r\n        }\r\n    });\r\n    Object.defineProperty(Label, \"className\", {\r\n        enumerable: true,\r\n        configurable: true,\r\n        writable: true,\r\n        value: \"Label\"\r\n    });\r\n    Object.defineProperty(Label, \"classNames\", {\r\n        enumerable: true,\r\n        configurable: true,\r\n        writable: true,\r\n        value: Container.classNames.concat([Label.className])\r\n    });\r\n    return Label;\r\n}(Container));\r\nexport { Label };\r\n//# sourceMappingURL=Label.js.map","import { __extends } from \"tslib\";\r\nimport { Graphics } from \"./Graphics\";\r\nimport * as $math from \"../util/Math\";\r\n/**\r\n * Draws a rectangle with a pointer.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/common-elements/graphics/} for more info\r\n * @important\r\n */\r\nvar PointedRectangle = /** @class */ (function (_super) {\r\n    __extends(PointedRectangle, _super);\r\n    function PointedRectangle() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    Object.defineProperty(PointedRectangle.prototype, \"_beforeChanged\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            _super.prototype._beforeChanged.call(this);\r\n            if (this.isDirty(\"pointerBaseWidth\") || this.isDirty(\"cornerRadius\") || this.isDirty(\"pointerLength\") || this.isDirty(\"pointerX\") || this.isDirty(\"pointerY\") || this.isDirty(\"width\") || this.isDirty(\"height\")) {\r\n                this._clear = true;\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(PointedRectangle.prototype, \"_changed\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            _super.prototype._changed.call(this);\r\n            if (this._clear) {\r\n                this.markDirtyBounds();\r\n                var w = this.width();\r\n                var h = this.height();\r\n                if (w > 0 && h > 0) {\r\n                    var cr = this.get(\"cornerRadius\", 8);\r\n                    cr = $math.fitToRange(cr, 0, Math.min(w / 2, h / 2));\r\n                    var x = this.get(\"pointerX\", 0);\r\n                    var y = this.get(\"pointerY\", 0);\r\n                    var bwh = this.get(\"pointerBaseWidth\", 15) / 2;\r\n                    // corner coordinates\r\n                    // top left\r\n                    var xtl = 0;\r\n                    var ytl = 0;\r\n                    // top right\r\n                    var xtr = w;\r\n                    var ytr = 0;\r\n                    // bottom right\r\n                    var xbr = w;\r\n                    var ybr = h;\r\n                    // bottom left\r\n                    var xbl = 0;\r\n                    var ybl = h;\r\n                    // find stem base side: http://$math.stackexchange.com/questions/274712/calculate-on-which-side-of-straign-line-is-dot-located\r\n                    // d=(x−x1)(y2−y1)−(y−y1)(x2−x1)\r\n                    var d1 = (x - xtl) * (ybr - ytl) - (y - ytl) * (xbr - xtl);\r\n                    var d2 = (x - xbl) * (ytr - ybl) - (y - ybl) * (xtr - xbl);\r\n                    var display = this._display;\r\n                    // top\r\n                    display.moveTo(cr, 0);\r\n                    if (d1 > 0 && d2 > 0) {\r\n                        var stemX = Math.round($math.fitToRange(x, cr + bwh, w - bwh - cr));\r\n                        y = $math.fitToRange(y, -Infinity, 0);\r\n                        display.lineTo(stemX - bwh, 0);\r\n                        display.lineTo(x, y);\r\n                        display.lineTo(stemX + bwh, 0);\r\n                    }\r\n                    display.lineTo(w - cr, 0);\r\n                    display.arcTo(w, 0, w, cr, cr);\r\n                    // right\r\n                    if (d1 > 0 && d2 < 0) {\r\n                        var stemY = Math.round($math.fitToRange(y, cr + bwh, h - bwh - cr));\r\n                        x = $math.fitToRange(x, w, Infinity);\r\n                        display.lineTo(w, cr);\r\n                        display.lineTo(w, Math.max(stemY - bwh, cr));\r\n                        display.lineTo(x, y);\r\n                        display.lineTo(w, stemY + bwh);\r\n                    }\r\n                    display.lineTo(w, h - cr);\r\n                    display.arcTo(w, h, w - cr, h, cr);\r\n                    // bottom\r\n                    if (d1 < 0 && d2 < 0) {\r\n                        var stemX = Math.round($math.fitToRange(x, cr + bwh, w - bwh - cr));\r\n                        y = $math.fitToRange(y, h, Infinity);\r\n                        display.lineTo(w - cr, h);\r\n                        display.lineTo(stemX + bwh, h);\r\n                        display.lineTo(x, y);\r\n                        display.lineTo(stemX - bwh, h);\r\n                    }\r\n                    display.lineTo(cr, h);\r\n                    display.arcTo(0, h, 0, h - cr, cr);\r\n                    // left\r\n                    if (d1 < 0 && d2 > 0) {\r\n                        var stemY = Math.round($math.fitToRange(y, cr + bwh, h - cr - bwh));\r\n                        x = $math.fitToRange(x, -Infinity, 0);\r\n                        display.lineTo(0, h - cr);\r\n                        display.lineTo(0, stemY + bwh);\r\n                        display.lineTo(x, y);\r\n                        display.lineTo(0, Math.max(stemY - bwh, cr));\r\n                    }\r\n                    display.lineTo(0, cr);\r\n                    display.arcTo(0, 0, cr, 0, cr);\r\n                    display.closePath();\r\n                }\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(PointedRectangle, \"className\", {\r\n        enumerable: true,\r\n        configurable: true,\r\n        writable: true,\r\n        value: \"PointedRectangle\"\r\n    });\r\n    Object.defineProperty(PointedRectangle, \"classNames\", {\r\n        enumerable: true,\r\n        configurable: true,\r\n        writable: true,\r\n        value: Graphics.classNames.concat([PointedRectangle.className])\r\n    });\r\n    return PointedRectangle;\r\n}(Graphics));\r\nexport { PointedRectangle };\r\n//# sourceMappingURL=PointedRectangle.js.map","import { __extends } from \"tslib\";\r\nimport { MultiDisposer } from \"../util/Disposer\";\r\nimport { Label } from \"../render/Label\";\r\nimport { PointedRectangle } from \"../render/PointedRectangle\";\r\nimport { Container } from \"./Container\";\r\nimport { Percent } from \"../util/Percent\";\r\nimport { Color } from \"../util/Color\";\r\nimport * as $math from \"../util/Math\";\r\nimport * as $array from \"../util/Array\";\r\nimport * as $utils from \"../util/Utils\";\r\n/**\r\n * Creates a tooltip.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/common-elements/tooltips/} for more info\r\n * @important\r\n */\r\nvar Tooltip = /** @class */ (function (_super) {\r\n    __extends(Tooltip, _super);\r\n    function Tooltip(root, settings, isReal, templates) {\r\n        if (templates === void 0) { templates = []; }\r\n        var _this = _super.call(this, root, settings, isReal, templates) || this;\r\n        Object.defineProperty(_this, \"_arrangeDisposer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(_this, \"_fx\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(_this, \"_fy\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(_this, \"_label\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(_this, \"_fillDp\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(_this, \"_strokeDp\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(_this, \"_labelDp\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(_this, \"_w\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(_this, \"_h\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(_this, \"_keepHoverDp\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        return _this;\r\n    }\r\n    Object.defineProperty(Tooltip.prototype, \"_afterNew\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            var _this = this;\r\n            this._settings.themeTags = $utils.mergeTags(this._settings.themeTags, [\"tooltip\"]);\r\n            _super.prototype._afterNew.call(this);\r\n            this.set(\"background\", PointedRectangle.new(this._root, {\r\n                themeTags: [\"tooltip\", \"background\"]\r\n            }));\r\n            this._label = this.children.push(Label.new(this._root, {}));\r\n            this._disposers.push(this._label.events.on(\"boundschanged\", function () {\r\n                _this._updateBackground();\r\n            }));\r\n            this.on(\"bounds\", function () {\r\n                _this._updateBackground();\r\n            });\r\n            this._updateTextColor();\r\n            this._root.tooltipContainer.children.push(this);\r\n            this.hide(0);\r\n            this._root._tooltips.push(this);\r\n        }\r\n    });\r\n    Object.defineProperty(Tooltip.prototype, \"label\", {\r\n        /**\r\n         * A [[Label]] element for the tooltip.\r\n         *\r\n         * @readonly\r\n         * @return Label\r\n         */\r\n        get: function () {\r\n            return this._label;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Permanently disposes the tooltip.\r\n     */\r\n    Object.defineProperty(Tooltip.prototype, \"dispose\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            _super.prototype.dispose.call(this);\r\n            $array.remove(this._root._tooltips, this);\r\n        }\r\n    });\r\n    Object.defineProperty(Tooltip.prototype, \"_updateChildren\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            _super.prototype._updateChildren.call(this);\r\n            var labelText = this.get(\"labelText\");\r\n            if (labelText != null) {\r\n                this.label.set(\"text\", this.get(\"labelText\"));\r\n            }\r\n            var labelHTML = this.get(\"labelHTML\");\r\n            if (labelHTML != null) {\r\n                this.label.set(\"html\", this.get(\"labelHTML\"));\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Tooltip.prototype, \"_changed\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            var _this = this;\r\n            _super.prototype._changed.call(this);\r\n            if (this.isDirty(\"pointTo\")) {\r\n                // can't compare to previous, as sometimes pointTo is set twice (when pointer moves, so the position won't be udpated)\r\n                this._updateBackground();\r\n            }\r\n            if (this.isDirty(\"tooltipTarget\")) {\r\n                this.updateBackgroundColor();\r\n            }\r\n            if (this.isDirty(\"keepTargetHover\")) {\r\n                var keephover = this.get(\"keepTargetHover\");\r\n                if (keephover) {\r\n                    var bg = this.get(\"background\");\r\n                    this._keepHoverDp = new MultiDisposer([\r\n                        bg.events.on(\"pointerover\", function (_ev) {\r\n                            var target = _this.get(\"tooltipTarget\");\r\n                            if (target) {\r\n                                if (target.parent && target.parent.getPrivate(\"tooltipTarget\") == target) {\r\n                                    target = target.parent;\r\n                                }\r\n                                target.hover();\r\n                            }\r\n                        }),\r\n                        bg.events.on(\"pointerout\", function (_ev) {\r\n                            var target = _this.get(\"tooltipTarget\");\r\n                            if (target) {\r\n                                if (target.parent && target.parent.getPrivate(\"tooltipTarget\") == target) {\r\n                                    target = target.parent;\r\n                                }\r\n                                target.unhover();\r\n                            }\r\n                        })\r\n                    ]);\r\n                }\r\n                else {\r\n                    if (this._keepHoverDp) {\r\n                        this._keepHoverDp.dispose();\r\n                        this._keepHoverDp = undefined;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Tooltip.prototype, \"_onShow\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            _super.prototype._onShow.call(this);\r\n            this.updateBackgroundColor();\r\n        }\r\n    });\r\n    Object.defineProperty(Tooltip.prototype, \"updateBackgroundColor\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            var _this = this;\r\n            var tooltipTarget = this.get(\"tooltipTarget\");\r\n            var background = this.get(\"background\");\r\n            var fill;\r\n            var stroke;\r\n            if (tooltipTarget && background) {\r\n                fill = tooltipTarget.get(\"fill\");\r\n                stroke = tooltipTarget.get(\"stroke\");\r\n                if (fill == null) {\r\n                    fill = stroke;\r\n                }\r\n                if (this.get(\"getFillFromSprite\")) {\r\n                    if (this._fillDp) {\r\n                        this._fillDp.dispose();\r\n                    }\r\n                    if (fill != null) {\r\n                        background.set(\"fill\", fill);\r\n                    }\r\n                    this._fillDp = tooltipTarget.on(\"fill\", function (fill) {\r\n                        if (fill != null) {\r\n                            background.set(\"fill\", fill);\r\n                            _this._updateTextColor(fill);\r\n                        }\r\n                    });\r\n                }\r\n                if (this.get(\"getStrokeFromSprite\")) {\r\n                    if (this._strokeDp) {\r\n                        this._strokeDp.dispose();\r\n                    }\r\n                    if (fill != null) {\r\n                        background.set(\"stroke\", fill);\r\n                    }\r\n                    this._strokeDp = tooltipTarget.on(\"fill\", function (fill) {\r\n                        if (fill != null) {\r\n                            background.set(\"stroke\", fill);\r\n                        }\r\n                    });\r\n                }\r\n                if (this.get(\"getLabelFillFromSprite\")) {\r\n                    if (this._labelDp) {\r\n                        this._labelDp.dispose();\r\n                    }\r\n                    if (fill != null) {\r\n                        this.label.set(\"fill\", fill);\r\n                    }\r\n                    this._labelDp = tooltipTarget.on(\"fill\", function (fill) {\r\n                        if (fill != null) {\r\n                            _this.label.set(\"fill\", fill);\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n            this._updateTextColor(fill);\r\n        }\r\n    });\r\n    Object.defineProperty(Tooltip.prototype, \"_updateTextColor\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (fill) {\r\n            if (this.get(\"autoTextColor\")) {\r\n                if (fill == null) {\r\n                    fill = this.get(\"background\").get(\"fill\");\r\n                }\r\n                if (fill == null) {\r\n                    fill = this._root.interfaceColors.get(\"background\");\r\n                }\r\n                if (fill instanceof Color) {\r\n                    this.label.set(\"fill\", Color.alternative(fill, this._root.interfaceColors.get(\"alternativeText\"), this._root.interfaceColors.get(\"text\")));\r\n                }\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Tooltip.prototype, \"_setDataItem\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (dataItem) {\r\n            _super.prototype._setDataItem.call(this, dataItem);\r\n            this.label._setDataItem(dataItem);\r\n        }\r\n    });\r\n    Object.defineProperty(Tooltip.prototype, \"_updateBackground\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            _super.prototype.updateBackground.call(this);\r\n            var parent = this._root.container;\r\n            if (parent) {\r\n                var cw = 0.5;\r\n                var ch = 0.5;\r\n                var centerX = this.get(\"centerX\");\r\n                if (centerX instanceof Percent) {\r\n                    cw = centerX.value;\r\n                }\r\n                var centerY = this.get(\"centerY\");\r\n                if (centerY instanceof Percent) {\r\n                    ch = centerY.value;\r\n                }\r\n                var parentW = parent.width();\r\n                var parentH = parent.height();\r\n                var tooltipContainer = this.parent;\r\n                var xx = 0;\r\n                var yy = 0;\r\n                if (tooltipContainer) {\r\n                    xx = tooltipContainer.x();\r\n                    yy = tooltipContainer.y();\r\n                    var layerMargin = tooltipContainer.get(\"layerMargin\");\r\n                    if (layerMargin) {\r\n                        xx += layerMargin.left || 0;\r\n                        yy += layerMargin.top || 0;\r\n                        parentW += (layerMargin.left || 0) + (layerMargin.right || 0);\r\n                        parentH += (layerMargin.top || 0) + (layerMargin.bottom || 0);\r\n                    }\r\n                }\r\n                var bounds = this.get(\"bounds\", { left: -xx, top: -yy, right: parentW - xx, bottom: parentH - yy });\r\n                this._updateBounds();\r\n                var w = this.width();\r\n                var h = this.height();\r\n                // use old w and h,as when tooltip is hidden, these are 0 and unneeded animation happens\r\n                if (w === 0) {\r\n                    w = this._w;\r\n                }\r\n                if (h === 0) {\r\n                    h = this._h;\r\n                }\r\n                var pointTo = this.get(\"pointTo\", { x: parentW / 2, y: parentH / 2 });\r\n                var x = pointTo.x;\r\n                var y = pointTo.y;\r\n                var pointerOrientation = this.get(\"pointerOrientation\");\r\n                var background = this.get(\"background\");\r\n                var pointerLength = 0;\r\n                var bgStrokeSizeY = 0;\r\n                var bgStrokeSizeX = 0;\r\n                if (background instanceof PointedRectangle) {\r\n                    pointerLength = background.get(\"pointerLength\", 0);\r\n                    bgStrokeSizeY = background.get(\"strokeWidth\", 0) / 2;\r\n                    bgStrokeSizeX = bgStrokeSizeY;\r\n                }\r\n                var pointerX = 0;\r\n                var pointerY = 0;\r\n                var boundsW = bounds.right - bounds.left;\r\n                var boundsH = bounds.bottom - bounds.top;\r\n                // horizontal\r\n                if (pointerOrientation == \"horizontal\" || pointerOrientation == \"left\" || pointerOrientation == \"right\") {\r\n                    bgStrokeSizeY = 0;\r\n                    if (pointerOrientation == \"horizontal\") {\r\n                        if (x > bounds.left + boundsW / 2) {\r\n                            x -= (w * (1 - cw) + pointerLength);\r\n                            bgStrokeSizeX *= -1;\r\n                        }\r\n                        else {\r\n                            x += (w * cw + pointerLength);\r\n                        }\r\n                    }\r\n                    else if (pointerOrientation == \"left\") {\r\n                        x += (w * (1 - cw) + pointerLength);\r\n                    }\r\n                    else {\r\n                        x -= (w * cw + pointerLength);\r\n                        bgStrokeSizeX *= -1;\r\n                    }\r\n                }\r\n                // vertical pointer\r\n                else {\r\n                    bgStrokeSizeX = 0;\r\n                    if (pointerOrientation == \"vertical\") {\r\n                        if (y > bounds.top + h / 2 + pointerLength) {\r\n                            y -= (h * (1 - ch) + pointerLength);\r\n                        }\r\n                        else {\r\n                            y += (h * ch + pointerLength);\r\n                            bgStrokeSizeY *= -1;\r\n                        }\r\n                    }\r\n                    else if (pointerOrientation == \"down\") {\r\n                        y -= (h * (1 - ch) + pointerLength);\r\n                    }\r\n                    else {\r\n                        y += (h * ch + pointerLength);\r\n                        bgStrokeSizeY *= -1;\r\n                    }\r\n                }\r\n                x = $math.fitToRange(x, bounds.left + w * cw, bounds.left + boundsW - w * (1 - cw)) + bgStrokeSizeX;\r\n                y = $math.fitToRange(y, bounds.top + h * ch, bounds.top + boundsH - h * (1 - ch)) - bgStrokeSizeY;\r\n                pointerX = pointTo.x - x + w * cw + bgStrokeSizeX;\r\n                pointerY = pointTo.y - y + h * ch - bgStrokeSizeY;\r\n                this._fx = x;\r\n                this._fy = y;\r\n                var animationDuration = this.get(\"animationDuration\", 0);\r\n                if (animationDuration > 0 && this.get(\"visible\") && this.get(\"opacity\") > 0.1) {\r\n                    var animationEasing = this.get(\"animationEasing\");\r\n                    this.animate({ key: \"x\", to: x, duration: animationDuration, easing: animationEasing });\r\n                    this.animate({ key: \"y\", to: y, duration: animationDuration, easing: animationEasing });\r\n                }\r\n                else {\r\n                    this.set(\"x\", x);\r\n                    this.set(\"y\", y);\r\n                }\r\n                if (background instanceof PointedRectangle) {\r\n                    background.set(\"pointerX\", pointerX);\r\n                    background.set(\"pointerY\", pointerY);\r\n                }\r\n                if (w > 0) {\r\n                    this._w = w;\r\n                }\r\n                if (h > 0) {\r\n                    this._h = h;\r\n                }\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Tooltip, \"className\", {\r\n        enumerable: true,\r\n        configurable: true,\r\n        writable: true,\r\n        value: \"Tooltip\"\r\n    });\r\n    Object.defineProperty(Tooltip, \"classNames\", {\r\n        enumerable: true,\r\n        configurable: true,\r\n        writable: true,\r\n        value: Container.classNames.concat([Tooltip.className])\r\n    });\r\n    return Tooltip;\r\n}(Container));\r\nexport { Tooltip };\r\n//# sourceMappingURL=Tooltip.js.map","import { __extends } from \"tslib\";\r\nimport { Entity } from \"./Entity\";\r\nimport { TextFormatter } from \"./TextFormatter\";\r\nimport * as $object from \"./Object\";\r\nimport * as $utils from \"./Utils\";\r\nimport * as $type from \"./Type\";\r\n/**\r\n * Number formatter\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/formatters/formatting-numbers/} for more info\r\n * @important\r\n */\r\nvar NumberFormatter = /** @class */ (function (_super) {\r\n    __extends(NumberFormatter, _super);\r\n    function NumberFormatter() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    Object.defineProperty(NumberFormatter.prototype, \"_setDefaults\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            // Defaults\r\n            this._setDefault(\"negativeBase\", 0);\r\n            this._setDefault(\"numberFormat\", \"#,###.#####\");\r\n            this._setDefault(\"smallNumberThreshold\", 1.00);\r\n            var bns = \"_big_number_suffix_\";\r\n            var sns = \"_small_number_suffix_\";\r\n            var bs = \"_byte_suffix_\";\r\n            this._setDefault(\"bigNumberPrefixes\", [\r\n                { \"number\": 1e+3, \"suffix\": this._t(bns + \"3\") },\r\n                { \"number\": 1e+6, \"suffix\": this._t(bns + \"6\") },\r\n                { \"number\": 1e+9, \"suffix\": this._t(bns + \"9\") },\r\n                { \"number\": 1e+12, \"suffix\": this._t(bns + \"12\") },\r\n                { \"number\": 1e+15, \"suffix\": this._t(bns + \"15\") },\r\n                { \"number\": 1e+18, \"suffix\": this._t(bns + \"18\") },\r\n                { \"number\": 1e+21, \"suffix\": this._t(bns + \"21\") },\r\n                { \"number\": 1e+24, \"suffix\": this._t(bns + \"24\") }\r\n            ]);\r\n            this._setDefault(\"smallNumberPrefixes\", [\r\n                { \"number\": 1e-24, \"suffix\": this._t(sns + \"24\") },\r\n                { \"number\": 1e-21, \"suffix\": this._t(sns + \"21\") },\r\n                { \"number\": 1e-18, \"suffix\": this._t(sns + \"18\") },\r\n                { \"number\": 1e-15, \"suffix\": this._t(sns + \"15\") },\r\n                { \"number\": 1e-12, \"suffix\": this._t(sns + \"12\") },\r\n                { \"number\": 1e-9, \"suffix\": this._t(sns + \"9\") },\r\n                { \"number\": 1e-6, \"suffix\": this._t(sns + \"6\") },\r\n                { \"number\": 1e-3, \"suffix\": this._t(sns + \"3\") }\r\n            ]);\r\n            this._setDefault(\"bytePrefixes\", [\r\n                { \"number\": 1, suffix: this._t(bs + \"B\") },\r\n                { \"number\": 1024, suffix: this._t(bs + \"KB\") },\r\n                { \"number\": 1048576, suffix: this._t(bs + \"MB\") },\r\n                { \"number\": 1073741824, suffix: this._t(bs + \"GB\") },\r\n                { \"number\": 1099511627776, suffix: this._t(bs + \"TB\") },\r\n                { \"number\": 1125899906842624, suffix: this._t(bs + \"PB\") }\r\n            ]);\r\n            _super.prototype._setDefaults.call(this);\r\n        }\r\n    });\r\n    Object.defineProperty(NumberFormatter.prototype, \"_beforeChanged\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            _super.prototype._beforeChanged.call(this);\r\n        }\r\n    });\r\n    /**\r\n     * Formats the number according to specific format.\r\n     *\r\n     * @param value   Value to format\r\n     * @param format  Format to apply\r\n     * @return Formatted number\r\n     */\r\n    Object.defineProperty(NumberFormatter.prototype, \"format\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (value, format, precision) {\r\n            // no format passed in or \"Number\"\r\n            if (format == null || ($type.isString(format) && format.toLowerCase() === \"number\")) {\r\n                format = this.get(\"numberFormat\", \"\");\r\n            }\r\n            // Init return value\r\n            var formatted;\r\n            // Cast to number just in case\r\n            // TODO: maybe use better casting\r\n            var source = Number(value);\r\n            // Is it a built-in format or Intl.NumberFormatOptions\r\n            if ($type.isObject(format)) {\r\n                try {\r\n                    if (this.get(\"intlLocales\")) {\r\n                        return new Intl.NumberFormat(this.get(\"intlLocales\"), format).format(source);\r\n                    }\r\n                    else {\r\n                        return new Intl.NumberFormat(undefined, format).format(source);\r\n                    }\r\n                }\r\n                catch (e) {\r\n                    return \"Invalid\";\r\n                }\r\n            }\r\n            else {\r\n                // Clean format\r\n                format = $utils.cleanFormat(format);\r\n                // Get format info (it will also deal with parser caching)\r\n                var info = this.parseFormat(format, this._root.language);\r\n                // format and replace the number\r\n                var details = void 0;\r\n                if (source > this.get(\"negativeBase\")) {\r\n                    details = info.positive;\r\n                }\r\n                else if (source < this.get(\"negativeBase\")) {\r\n                    details = info.negative;\r\n                }\r\n                else {\r\n                    details = info.zero;\r\n                }\r\n                // Adjust precision\r\n                if (precision != null && !details.mod) {\r\n                    details = $object.copy(details);\r\n                    details.decimals.active = source == 0 ? 0 : precision;\r\n                }\r\n                // Format\r\n                formatted = details.template.split($type.PLACEHOLDER).join(this.applyFormat(source, details));\r\n            }\r\n            return formatted;\r\n        }\r\n    });\r\n    /**\r\n     * Parses supplied format into structured object which can be used to format\r\n     * the number.\r\n     *\r\n     * @param format Format string, i.e. \"#,###.00\"\r\n     * @param language Language\r\n     * @ignore\r\n     */\r\n    Object.defineProperty(NumberFormatter.prototype, \"parseFormat\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (format, language) {\r\n            // Check cache\r\n            // TODO\r\n            // let cached = this.getCache(format);\r\n            // if (cached != null) {\r\n            // \treturn cached;\r\n            // }\r\n            var _this = this;\r\n            var thousandSeparator = language.translateEmpty(\"_thousandSeparator\");\r\n            var decimalSeparator = language.translateEmpty(\"_decimalSeparator\");\r\n            // init format parse info holder\r\n            var info = {\r\n                \"positive\": {\r\n                    \"thousands\": {\r\n                        \"active\": -1,\r\n                        \"passive\": -1,\r\n                        \"interval\": -1,\r\n                        \"separator\": thousandSeparator\r\n                    },\r\n                    \"decimals\": {\r\n                        \"active\": -1,\r\n                        \"passive\": -1,\r\n                        \"separator\": decimalSeparator\r\n                    },\r\n                    \"template\": \"\",\r\n                    \"source\": \"\",\r\n                    \"parsed\": false\r\n                },\r\n                \"negative\": {\r\n                    \"thousands\": {\r\n                        \"active\": -1,\r\n                        \"passive\": -1,\r\n                        \"interval\": -1,\r\n                        \"separator\": thousandSeparator\r\n                    },\r\n                    \"decimals\": {\r\n                        \"active\": -1,\r\n                        \"passive\": -1,\r\n                        \"separator\": decimalSeparator\r\n                    },\r\n                    \"template\": \"\",\r\n                    \"source\": \"\",\r\n                    \"parsed\": false\r\n                },\r\n                \"zero\": {\r\n                    \"thousands\": {\r\n                        \"active\": -1,\r\n                        \"passive\": -1,\r\n                        \"interval\": -1,\r\n                        \"separator\": thousandSeparator\r\n                    },\r\n                    \"decimals\": {\r\n                        \"active\": -1,\r\n                        \"passive\": -1,\r\n                        \"separator\": decimalSeparator\r\n                    },\r\n                    \"template\": \"\",\r\n                    \"source\": \"\",\r\n                    \"parsed\": false\r\n                }\r\n            };\r\n            // Escape double vertical bars (that mean display one vertical bar)\r\n            format = format.replace(\"||\", $type.PLACEHOLDER2);\r\n            // Split it up and deal with different formats\r\n            var parts = format.split(\"|\");\r\n            info.positive.source = parts[0];\r\n            if (typeof parts[2] === \"undefined\") {\r\n                info.zero = info.positive;\r\n            }\r\n            else {\r\n                info.zero.source = parts[2];\r\n            }\r\n            if (typeof parts[1] === \"undefined\") {\r\n                info.negative = info.positive;\r\n            }\r\n            else {\r\n                info.negative.source = parts[1];\r\n            }\r\n            // Parse each\r\n            $object.each(info, function (_part, item) {\r\n                // Already parsed\r\n                if (item.parsed) {\r\n                    return;\r\n                }\r\n                // Check cached\r\n                // TODO\r\n                // if (typeof this.getCache(item.source) !== \"undefined\") {\r\n                // \tinfo[part] = this.getCache(item.source);\r\n                // \treturn;\r\n                // }\r\n                // Begin parsing\r\n                var partFormat = item.source;\r\n                // Just \"Number\"?\r\n                if (partFormat.toLowerCase() === \"number\") {\r\n                    partFormat = _this.get(\"numberFormat\", \"#,###.#####\");\r\n                }\r\n                // Let TextFormatter split into chunks\r\n                var chunks = TextFormatter.chunk(partFormat, true);\r\n                for (var i = 0; i < chunks.length; i++) {\r\n                    var chunk = chunks[i];\r\n                    // replace back double vertical bar\r\n                    chunk.text = chunk.text.replace($type.PLACEHOLDER2, \"|\");\r\n                    if (chunk.type === \"value\") {\r\n                        // Parse format\r\n                        // Look for codes\r\n                        var matches = chunk.text.match(/[#0.,]+[ ]?[abespABESP%!]?[abespABESP‰!]?/);\r\n                        if (matches) {\r\n                            if (matches === null || matches[0] === \"\") {\r\n                                // no codes here - assume string\r\n                                // nothing to do here\r\n                                item.template += chunk.text;\r\n                            }\r\n                            else {\r\n                                // look for the format modifiers at the end\r\n                                var mods = matches[0].match(/[abespABESP%‰!]{2}|[abespABESP%‰]{1}$/);\r\n                                if (mods) {\r\n                                    item.mod = mods[0].toLowerCase();\r\n                                    item.modSpacing = matches[0].match(/[ ]{1}[abespABESP%‰!]{1}$/) ? true : false;\r\n                                }\r\n                                // break the format up\r\n                                var a = matches[0].split(\".\");\r\n                                // Deal with thousands\r\n                                if (a[0] === \"\") {\r\n                                    // No directives for thousands\r\n                                    // Leave default settings (no formatting)\r\n                                }\r\n                                else {\r\n                                    // Counts\r\n                                    item.thousands.active = (a[0].match(/0/g) || []).length;\r\n                                    item.thousands.passive = (a[0].match(/\\#/g) || []).length + item.thousands.active;\r\n                                    // Separator interval\r\n                                    var b = a[0].split(\",\");\r\n                                    if (b.length === 1) {\r\n                                        // No thousands separators\r\n                                        // Do nothing\r\n                                    }\r\n                                    else {\r\n                                        // Use length fo the last chunk as thousands length\r\n                                        item.thousands.interval = (b.pop() || \"\").length;\r\n                                        if (item.thousands.interval === 0) {\r\n                                            item.thousands.interval = -1;\r\n                                        }\r\n                                    }\r\n                                }\r\n                                // Deal with decimals\r\n                                if (typeof (a[1]) === \"undefined\") {\r\n                                    // No directives for decimals\r\n                                    // Leave at defaults (no formatting)\r\n                                }\r\n                                else {\r\n                                    // Counts\r\n                                    item.decimals.active = (a[1].match(/0/g) || []).length;\r\n                                    item.decimals.passive = (a[1].match(/\\#/g) || []).length + item.decimals.active;\r\n                                }\r\n                                // Add special code to template\r\n                                item.template += chunk.text.split(matches[0]).join($type.PLACEHOLDER);\r\n                            }\r\n                        }\r\n                    }\r\n                    else {\r\n                        // Quoted string - take it as it is\r\n                        item.template += chunk.text;\r\n                    }\r\n                }\r\n                // Apply style formatting\r\n                //item.template = getTextFormatter().format(item.template, this.outputFormat);\r\n                // Save cache\r\n                // TODO\r\n                //this.setCache(item.source, item);\r\n                // Mark this as parsed\r\n                item.parsed = true;\r\n            });\r\n            // Save cache (the whole thing)\r\n            // TODO\r\n            //this.setCache(format, info);\r\n            return info;\r\n        }\r\n    });\r\n    /**\r\n     * Applies parsed format to a numeric value.\r\n     *\r\n     * @param value    Value\r\n     * @param details  Parsed format as returned by parseFormat()\r\n     * @return Formatted number\r\n     * @ignore\r\n     */\r\n    Object.defineProperty(NumberFormatter.prototype, \"applyFormat\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (value, details) {\r\n            // Use absolute values\r\n            var negative = value < 0;\r\n            value = Math.abs(value);\r\n            // Recalculate according to modifier\r\n            var prefix = \"\", suffix = \"\";\r\n            var mods = details.mod ? details.mod.split(\"\") : [];\r\n            if (mods.indexOf(\"b\") !== -1) {\r\n                var a_1 = this.applyPrefix(value, this.get(\"bytePrefixes\"), mods.indexOf(\"!\") !== -1);\r\n                value = a_1[0];\r\n                prefix = a_1[1];\r\n                suffix = a_1[2];\r\n                if (details.modSpacing) {\r\n                    suffix = \" \" + suffix;\r\n                }\r\n            }\r\n            else if (mods.indexOf(\"a\") !== -1) {\r\n                var a_2 = this.applyPrefix(value, value < this.get(\"smallNumberThreshold\") ? this.get(\"smallNumberPrefixes\") : this.get(\"bigNumberPrefixes\"), mods.indexOf(\"!\") !== -1);\r\n                value = a_2[0];\r\n                prefix = a_2[1];\r\n                suffix = a_2[2];\r\n                if (details.modSpacing) {\r\n                    suffix = \" \" + suffix;\r\n                }\r\n            }\r\n            else if (mods.indexOf(\"p\") !== -1) {\r\n                var ol = Math.min(value.toString().length + 2, 21);\r\n                //value *= 100;\r\n                value = parseFloat(value.toPrecision(ol));\r\n                prefix = this._root.language.translate(\"_percentPrefix\");\r\n                suffix = this._root.language.translate(\"_percentSuffix\");\r\n                if (prefix == \"\" && suffix == \"\") {\r\n                    suffix = \"%\";\r\n                }\r\n            }\r\n            else if (mods.indexOf(\"%\") !== -1) {\r\n                var ol = Math.min(value.toString().length + 2, 21);\r\n                value *= 100;\r\n                value = parseFloat(value.toPrecision(ol));\r\n                suffix = \"%\";\r\n            }\r\n            else if (mods.indexOf(\"‰\") !== -1) {\r\n                var ol = Math.min(value.toString().length + 3, 21);\r\n                value *= 1000;\r\n                value = parseFloat(value.toPrecision(ol));\r\n                suffix = \"‰\";\r\n            }\r\n            // Round to passive\r\n            if (mods.indexOf(\"e\") !== -1) {\r\n                // convert the value to exponential\r\n                var exp = void 0;\r\n                if (details.decimals.passive >= 0) {\r\n                    exp = value.toExponential(details.decimals.passive).split(\"e\");\r\n                }\r\n                else {\r\n                    exp = value.toExponential().split(\"e\");\r\n                }\r\n                value = Number(exp[0]);\r\n                suffix = \"e\" + exp[1];\r\n                if (details.modSpacing) {\r\n                    suffix = \" \" + suffix;\r\n                }\r\n            }\r\n            else if (details.decimals.passive === 0) {\r\n                value = Math.round(value);\r\n            }\r\n            else if (details.decimals.passive > 0) {\r\n                var d = Math.pow(10, details.decimals.passive);\r\n                value = Math.round(value * d) / d;\r\n            }\r\n            // Init return value\r\n            var res = \"\";\r\n            // Calc integer and decimal parts\r\n            var a = $type.numberToString(value).split(\".\");\r\n            // Format integers\r\n            var ints = a[0];\r\n            // Pad integers to active length\r\n            if (ints.length < details.thousands.active) {\r\n                ints = Array(details.thousands.active - ints.length + 1).join(\"0\") + ints;\r\n            }\r\n            // Insert thousands separators\r\n            if (details.thousands.interval > 0) {\r\n                var ip = [];\r\n                var intsr = ints.split(\"\").reverse().join(\"\");\r\n                for (var i = 0, len = ints.length; i <= len; i += details.thousands.interval) {\r\n                    var c = intsr.substr(i, details.thousands.interval).split(\"\").reverse().join(\"\");\r\n                    if (c !== \"\") {\r\n                        ip.unshift(c);\r\n                    }\r\n                }\r\n                ints = ip.join(details.thousands.separator);\r\n            }\r\n            // Add integers\r\n            res += ints;\r\n            // Add decimals\r\n            if (a.length === 1) {\r\n                a.push(\"\");\r\n            }\r\n            var decs = a[1];\r\n            // Fill zeros?\r\n            if (decs.length < details.decimals.active) {\r\n                decs += Array(details.decimals.active - decs.length + 1).join(\"0\");\r\n            }\r\n            if (decs !== \"\") {\r\n                res += details.decimals.separator + decs;\r\n            }\r\n            // Can't have empty return value\r\n            if (res === \"\") {\r\n                res = \"0\";\r\n            }\r\n            // Add minus sign back\r\n            if (value !== 0 && negative && (mods.indexOf(\"s\") === -1)) {\r\n                res = \"-\" + res;\r\n            }\r\n            // Add suffixes/prefixes\r\n            if (prefix) {\r\n                res = prefix + res;\r\n            }\r\n            if (suffix) {\r\n                res += suffix;\r\n            }\r\n            return res;\r\n        }\r\n    });\r\n    Object.defineProperty(NumberFormatter.prototype, \"applyPrefix\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (value, prefixes, force) {\r\n            if (force === void 0) { force = false; }\r\n            var newvalue = value;\r\n            var prefix = \"\";\r\n            var suffix = \"\";\r\n            var applied = false;\r\n            var k = 1;\r\n            for (var i = 0, len = prefixes.length; i < len; i++) {\r\n                if (prefixes[i].number <= value) {\r\n                    if (prefixes[i].number === 0) {\r\n                        newvalue = 0;\r\n                    }\r\n                    else {\r\n                        newvalue = value / prefixes[i].number;\r\n                        k = prefixes[i].number;\r\n                    }\r\n                    prefix = prefixes[i].prefix;\r\n                    suffix = prefixes[i].suffix;\r\n                    applied = true;\r\n                }\r\n            }\r\n            if (!applied && force && prefixes.length && value != 0) {\r\n                // Prefix was not applied. Use the first prefix.\r\n                newvalue = value / prefixes[0].number;\r\n                prefix = prefixes[0].prefix;\r\n                suffix = prefixes[0].suffix;\r\n                applied = true;\r\n            }\r\n            if (applied) {\r\n                newvalue = parseFloat(newvalue.toPrecision(Math.min(k.toString().length + Math.floor(newvalue).toString().replace(/[^0-9]*/g, \"\").length, 21)));\r\n            }\r\n            return [newvalue, prefix, suffix];\r\n        }\r\n    });\r\n    /**\r\n     * Replaces brackets with temporary placeholders.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param text  Input text\r\n     * @return Escaped text\r\n     */\r\n    Object.defineProperty(NumberFormatter.prototype, \"escape\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (text) {\r\n            return text.replace(\"||\", $type.PLACEHOLDER2);\r\n        }\r\n    });\r\n    /**\r\n     * Replaces placeholders back to brackets.\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @param text  Escaped text\r\n     * @return Unescaped text\r\n     */\r\n    Object.defineProperty(NumberFormatter.prototype, \"unescape\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (text) {\r\n            return text.replace($type.PLACEHOLDER2, \"|\");\r\n        }\r\n    });\r\n    return NumberFormatter;\r\n}(Entity));\r\nexport { NumberFormatter };\r\n//# sourceMappingURL=NumberFormatter.js.map","function parseDate(timezone, date) {\r\n    var year = 0;\r\n    var month = 0;\r\n    var day = 1;\r\n    var hour = 0;\r\n    var minute = 0;\r\n    var second = 0;\r\n    var millisecond = 0;\r\n    var weekday = 0;\r\n    timezone.formatToParts(date).forEach(function (x) {\r\n        switch (x.type) {\r\n            case \"year\":\r\n                year = +x.value;\r\n                break;\r\n            case \"month\":\r\n                month = (+x.value) - 1;\r\n                break;\r\n            case \"day\":\r\n                day = +x.value;\r\n                break;\r\n            case \"hour\":\r\n                hour = +x.value;\r\n                break;\r\n            case \"minute\":\r\n                minute = +x.value;\r\n                break;\r\n            case \"second\":\r\n                second = +x.value;\r\n                break;\r\n            case \"fractionalSecond\":\r\n                millisecond = +x.value;\r\n                break;\r\n            case \"weekday\":\r\n                switch (x.value) {\r\n                    case \"Sun\":\r\n                        weekday = 0;\r\n                        break;\r\n                    case \"Mon\":\r\n                        weekday = 1;\r\n                        break;\r\n                    case \"Tue\":\r\n                        weekday = 2;\r\n                        break;\r\n                    case \"Wed\":\r\n                        weekday = 3;\r\n                        break;\r\n                    case \"Thu\":\r\n                        weekday = 4;\r\n                        break;\r\n                    case \"Fri\":\r\n                        weekday = 5;\r\n                        break;\r\n                    case \"Sat\":\r\n                        weekday = 6;\r\n                        break;\r\n                }\r\n        }\r\n    });\r\n    if (hour === 24) {\r\n        hour = 0;\r\n    }\r\n    return { year: year, month: month, day: day, hour: hour, minute: minute, second: second, millisecond: millisecond, weekday: weekday };\r\n}\r\nfunction toUTCDate(timezone, date) {\r\n    var _a = parseDate(timezone, date), year = _a.year, month = _a.month, day = _a.day, hour = _a.hour, minute = _a.minute, second = _a.second, millisecond = _a.millisecond;\r\n    return Date.UTC(year, month, day, hour, minute, second, millisecond);\r\n}\r\nvar Timezone = /** @class */ (function () {\r\n    function Timezone(timezone, isReal) {\r\n        Object.defineProperty(this, \"_utc\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_dtf\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"name\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        if (!isReal) {\r\n            throw new Error(\"You cannot use `new Class()`, instead use `Class.new()`\");\r\n        }\r\n        this.name = timezone;\r\n        this._utc = new Intl.DateTimeFormat(\"UTC\", {\r\n            hour12: false,\r\n            timeZone: \"UTC\",\r\n            year: \"numeric\",\r\n            month: \"2-digit\",\r\n            day: \"2-digit\",\r\n            hour: \"2-digit\",\r\n            minute: \"2-digit\",\r\n            second: \"2-digit\",\r\n            weekday: \"short\",\r\n            fractionalSecondDigits: 3,\r\n        });\r\n        this._dtf = new Intl.DateTimeFormat(\"UTC\", {\r\n            hour12: false,\r\n            timeZone: timezone,\r\n            year: \"numeric\",\r\n            month: \"2-digit\",\r\n            day: \"2-digit\",\r\n            hour: \"2-digit\",\r\n            minute: \"2-digit\",\r\n            second: \"2-digit\",\r\n            weekday: \"short\",\r\n            fractionalSecondDigits: 3,\r\n        });\r\n    }\r\n    /**\r\n     * Use this method to create an instance of this class.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/getting-started/#New_element_syntax} for more info\r\n     * @param   timezone  IANA timezone\r\n     * @return            Instantiated object\r\n     */\r\n    Object.defineProperty(Timezone, \"new\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (timezone) {\r\n            return (new this(timezone, true));\r\n        }\r\n    });\r\n    Object.defineProperty(Timezone.prototype, \"convertLocal\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (date) {\r\n            var offset = this.offsetUTC(date);\r\n            var userOffset = date.getTimezoneOffset();\r\n            var output = new Date(date);\r\n            output.setUTCMinutes(output.getUTCMinutes() - (offset - userOffset));\r\n            var newUserOffset = output.getTimezoneOffset();\r\n            if (userOffset != newUserOffset) {\r\n                output.setUTCMinutes(output.getUTCMinutes() + newUserOffset - userOffset);\r\n            }\r\n            return output;\r\n        }\r\n    });\r\n    Object.defineProperty(Timezone.prototype, \"offsetUTC\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (date) {\r\n            var utc = toUTCDate(this._utc, date);\r\n            var dtf = toUTCDate(this._dtf, date);\r\n            return (utc - dtf) / 60000;\r\n        }\r\n    });\r\n    Object.defineProperty(Timezone.prototype, \"parseDate\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (date) {\r\n            return parseDate(this._dtf, date);\r\n        }\r\n    });\r\n    return Timezone;\r\n}());\r\nexport { Timezone };\r\n//# sourceMappingURL=Timezone.js.map","import { __extends } from \"tslib\";\r\nimport { Entity } from \"./Entity\";\r\nimport { TextFormatter } from \"./TextFormatter\";\r\nimport { Timezone } from \"./Timezone\";\r\nimport * as $type from \"./Type\";\r\nimport * as $utils from \"./Utils\";\r\nvar DateFormatter = /** @class */ (function (_super) {\r\n    __extends(DateFormatter, _super);\r\n    function DateFormatter() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    Object.defineProperty(DateFormatter.prototype, \"_setDefaults\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            // Defaults\r\n            this._setDefault(\"capitalize\", true);\r\n            this._setDefault(\"dateFormat\", \"yyyy-MM-dd\");\r\n            _super.prototype._setDefaults.call(this);\r\n        }\r\n    });\r\n    Object.defineProperty(DateFormatter.prototype, \"_beforeChanged\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            _super.prototype._beforeChanged.call(this);\r\n        }\r\n    });\r\n    Object.defineProperty(DateFormatter.prototype, \"format\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (source, format) {\r\n            // Locale?\r\n            // TODO\r\n            // No format passed in or it's empty\r\n            if (typeof format === \"undefined\" || format === \"\") {\r\n                format = this.get(\"dateFormat\", \"yyyy-MM-dd\");\r\n            }\r\n            // Init return value\r\n            var formatted;\r\n            // Cast?\r\n            // TODO: decide if we need to cast\r\n            var date = source;\r\n            // Is it a built-in format or Intl.DateTimeFormat\r\n            if ($type.isObject(format)) {\r\n                try {\r\n                    var locales = this.get(\"intlLocales\");\r\n                    if (locales) {\r\n                        return new Intl.DateTimeFormat(locales, format).format(date);\r\n                    }\r\n                    else {\r\n                        return new Intl.DateTimeFormat(undefined, format).format(date);\r\n                    }\r\n                }\r\n                catch (e) {\r\n                    return \"Invalid\";\r\n                }\r\n            }\r\n            // get format info (it will also deal with parser caching)\r\n            var info = this.parseFormat(format);\r\n            // Should we apply custom time zone?\r\n            var timezone = this._root.timezone;\r\n            if (timezone && !this._root.utc) {\r\n                date = timezone.convertLocal(date);\r\n            }\r\n            // Check if it's a valid date\r\n            if (!$type.isNumber(date.getTime())) {\r\n                // TODO translation\r\n                //return this._t(\"Invalid date\");\r\n                return \"Invalid date\";\r\n            }\r\n            // Apply format\r\n            formatted = this.applyFormat(date, info);\r\n            // Capitalize\r\n            if (this.get(\"capitalize\")) {\r\n                formatted = formatted.replace(/^.{1}/, formatted.substr(0, 1).toUpperCase());\r\n            }\r\n            // We're done\r\n            return formatted;\r\n        }\r\n    });\r\n    /**\r\n     * Applies format to Date.\r\n     *\r\n     * @param date      Date object\r\n     * @param info      Parsed format information\r\n     * @return Formatted date string\r\n     */\r\n    Object.defineProperty(DateFormatter.prototype, \"applyFormat\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (date, info) {\r\n            // Init return value\r\n            var res = info.template;\r\n            // Get values\r\n            var fullYear, month, weekday, day, hours, minutes, seconds, milliseconds, timestamp = date.getTime();\r\n            if (this._root.utc) {\r\n                fullYear = date.getUTCFullYear();\r\n                month = date.getUTCMonth();\r\n                weekday = date.getUTCDay();\r\n                day = date.getUTCDate();\r\n                hours = date.getUTCHours();\r\n                minutes = date.getUTCMinutes();\r\n                seconds = date.getUTCSeconds();\r\n                milliseconds = date.getUTCMilliseconds();\r\n            }\r\n            else {\r\n                fullYear = date.getFullYear();\r\n                month = date.getMonth();\r\n                weekday = date.getDay();\r\n                day = date.getDate();\r\n                hours = date.getHours();\r\n                minutes = date.getMinutes();\r\n                seconds = date.getSeconds();\r\n                milliseconds = date.getMilliseconds();\r\n            }\r\n            // Go through each part and format/replace it in template\r\n            for (var i = 0, len = info.parts.length; i < len; i++) {\r\n                var value = \"\";\r\n                switch (info.parts[i]) {\r\n                    case \"G\":\r\n                        value = this._t(fullYear < 0\r\n                            ? \"_era_bc\"\r\n                            : \"_era_ad\");\r\n                        break;\r\n                    case \"yyyy\":\r\n                        value = Math.abs(fullYear).toString();\r\n                        if (fullYear < 0) {\r\n                            value += this._t(\"_era_bc\");\r\n                        }\r\n                        break;\r\n                    case \"yyy\":\r\n                    case \"yy\":\r\n                    case \"y\":\r\n                        value = Math.abs(fullYear).toString().substr(-info.parts[i].length);\r\n                        if (fullYear < 0) {\r\n                            value += this._t(\"_era_bc\");\r\n                        }\r\n                        break;\r\n                    case \"YYYY\":\r\n                    case \"YYY\":\r\n                    case \"YY\":\r\n                    case \"Y\":\r\n                        var week = $utils.getWeek(date);\r\n                        var year = fullYear;\r\n                        if (week == 1 && (weekday > 4)) {\r\n                            year--;\r\n                        }\r\n                        if (info.parts[i] == \"YYYY\") {\r\n                            value = Math.abs(year).toString();\r\n                        }\r\n                        else {\r\n                            value = Math.abs(year).toString().substr(-info.parts[i].length);\r\n                        }\r\n                        if (year < 0) {\r\n                            value += this._t(\"_era_bc\");\r\n                        }\r\n                        break;\r\n                    case \"u\":\r\n                        // @todo\r\n                        break;\r\n                    case \"q\":\r\n                        value = \"\" + Math.ceil((date.getMonth() + 1) / 3);\r\n                        break;\r\n                    case \"MMMMM\":\r\n                        value = this._t(this._getMonth(month)).substr(0, 1);\r\n                        break;\r\n                    case \"MMMM\":\r\n                        value = this._t(this._getMonth(month));\r\n                        break;\r\n                    case \"MMM\":\r\n                        value = this._t(this._getShortMonth(month));\r\n                        break;\r\n                    case \"MM\":\r\n                        value = $utils.padString(month + 1, 2, \"0\");\r\n                        break;\r\n                    case \"M\":\r\n                        value = (month + 1).toString();\r\n                        break;\r\n                    case \"ww\":\r\n                        value = $utils.padString($utils.getWeek(date, this._root.utc), 2, \"0\");\r\n                        break;\r\n                    case \"w\":\r\n                        value = $utils.getWeek(date, this._root.utc).toString();\r\n                        break;\r\n                    case \"W\":\r\n                        value = $utils.getMonthWeek(date, this._root.utc).toString();\r\n                        break;\r\n                    case \"dd\":\r\n                        value = $utils.padString(day, 2, \"0\");\r\n                        break;\r\n                    case \"d\":\r\n                        value = day.toString();\r\n                        break;\r\n                    case \"DD\":\r\n                    case \"DDD\":\r\n                        value = $utils.padString($utils.getYearDay(date, this._root.utc).toString(), info.parts[i].length, \"0\");\r\n                        break;\r\n                    case \"D\":\r\n                        value = $utils.getYearDay(date, this._root.utc).toString();\r\n                        break;\r\n                    case \"F\":\r\n                        // @todo\r\n                        break;\r\n                    case \"g\":\r\n                        // @todo\r\n                        break;\r\n                    case \"t\":\r\n                        value = this._root.language.translateFunc(\"_dateOrd\").call(this, day);\r\n                        break;\r\n                    case \"E\":\r\n                        value = (weekday || 7).toString();\r\n                        break;\r\n                    case \"EE\":\r\n                        value = $utils.padString((weekday || 7).toString(), 2, \"0\");\r\n                        break;\r\n                    case \"EEE\":\r\n                    case \"eee\":\r\n                        value = this._t(this._getShortWeekday(weekday));\r\n                        break;\r\n                    case \"EEEE\":\r\n                    case \"eeee\":\r\n                        value = this._t(this._getWeekday(weekday));\r\n                        break;\r\n                    case \"EEEEE\":\r\n                    case \"eeeee\":\r\n                        value = this._t(this._getShortWeekday(weekday)).substr(0, 1);\r\n                        break;\r\n                    case \"e\":\r\n                    case \"ee\":\r\n                        value = (weekday - (this._root.locale.firstDayOfWeek || 1) + 1).toString();\r\n                        if (info.parts[i] == \"ee\") {\r\n                            value = $utils.padString(value, 2, \"0\");\r\n                        }\r\n                        break;\r\n                    case \"a\":\r\n                        if (hours >= 12) {\r\n                            value = this._t(\"PM\");\r\n                        }\r\n                        else {\r\n                            value = this._t(\"AM\");\r\n                        }\r\n                        break;\r\n                    case \"aa\":\r\n                        if (hours >= 12) {\r\n                            value = this._t(\"P.M.\");\r\n                        }\r\n                        else {\r\n                            value = this._t(\"A.M.\");\r\n                        }\r\n                        break;\r\n                    case \"aaa\":\r\n                        if (hours >= 12) {\r\n                            value = this._t(\"P\");\r\n                        }\r\n                        else {\r\n                            value = this._t(\"A\");\r\n                        }\r\n                        break;\r\n                    case \"h\":\r\n                        value = $utils.get12Hours(hours).toString();\r\n                        break;\r\n                    case \"hh\":\r\n                        value = $utils.padString($utils.get12Hours(hours), 2, \"0\");\r\n                        break;\r\n                    case \"H\":\r\n                        value = hours.toString();\r\n                        break;\r\n                    case \"HH\":\r\n                        value = $utils.padString(hours, 2, \"0\");\r\n                        break;\r\n                    case \"K\":\r\n                        value = $utils.get12Hours(hours, 0).toString();\r\n                        break;\r\n                    case \"KK\":\r\n                        value = $utils.padString($utils.get12Hours(hours, 0), 2, \"0\");\r\n                        break;\r\n                    case \"k\":\r\n                        value = (hours + 1).toString();\r\n                        break;\r\n                    case \"kk\":\r\n                        value = $utils.padString(hours + 1, 2, \"0\");\r\n                        break;\r\n                    case \"m\":\r\n                        value = minutes.toString();\r\n                        break;\r\n                    case \"mm\":\r\n                        value = $utils.padString(minutes, 2, \"0\");\r\n                        break;\r\n                    case \"s\":\r\n                        value = seconds.toString();\r\n                        break;\r\n                    case \"ss\":\r\n                        value = $utils.padString(seconds, 2, \"0\");\r\n                        break;\r\n                    case \"S\":\r\n                    case \"SS\":\r\n                    case \"SSS\":\r\n                        value = Math.round((milliseconds / 1000) * Math.pow(10, info.parts[i].length)).toString();\r\n                        break;\r\n                    case \"x\":\r\n                        value = timestamp.toString();\r\n                        break;\r\n                    case \"n\":\r\n                    case \"nn\":\r\n                    case \"nnn\":\r\n                        value = $utils.padString(milliseconds, info.parts[i].length, \"0\");\r\n                        break;\r\n                    case \"z\":\r\n                        value = $utils.getTimeZone(date, false, false, this._root.utc);\r\n                        break;\r\n                    case \"zz\":\r\n                        value = $utils.getTimeZone(date, true, false, this._root.utc);\r\n                        break;\r\n                    case \"zzz\":\r\n                        value = $utils.getTimeZone(date, false, true, this._root.utc);\r\n                        break;\r\n                    case \"zzzz\":\r\n                        value = $utils.getTimeZone(date, true, true, this._root.utc);\r\n                        break;\r\n                    case \"Z\":\r\n                    case \"ZZ\":\r\n                        var timezone = this._root.utc ? \"UTC\" : this._root.timezone;\r\n                        if (timezone instanceof Timezone) {\r\n                            timezone = timezone.name;\r\n                        }\r\n                        var offset = timezone ? $utils.getTimezoneOffset(timezone) : date.getTimezoneOffset();\r\n                        var tz = Math.abs(offset) / 60;\r\n                        var tzh = Math.floor(tz);\r\n                        var tzm = tz * 60 - tzh * 60;\r\n                        if (this._root.utc) {\r\n                            tzh = 0;\r\n                            tzm = 0;\r\n                        }\r\n                        if (info.parts[i] == \"Z\") {\r\n                            value = \"GMT\";\r\n                            value += offset > 0 ? \"-\" : \"+\";\r\n                            value += $utils.padString(tzh, 2) + \":\" + $utils.padString(tzm, 2);\r\n                        }\r\n                        else {\r\n                            value = offset > 0 ? \"-\" : \"+\";\r\n                            value += $utils.padString(tzh, 2) + $utils.padString(tzm, 2);\r\n                        }\r\n                        break;\r\n                    case \"i\":\r\n                        value = date.toISOString();\r\n                        break;\r\n                    case \"I\":\r\n                        value = date.toUTCString();\r\n                        break;\r\n                }\r\n                res = res.replace($type.PLACEHOLDER, value);\r\n            }\r\n            return res;\r\n        }\r\n    });\r\n    /**\r\n     * Parses format into structured infromation.\r\n     *\r\n     * @param format Format template\r\n     */\r\n    Object.defineProperty(DateFormatter.prototype, \"parseFormat\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (format) {\r\n            // Check cache\r\n            // TODO: implement caching of the parsed format\r\n            // Init format parse info holder\r\n            var info = {\r\n                \"template\": \"\",\r\n                \"parts\": []\r\n            };\r\n            // Let TextFormatter split into chunks\r\n            var chunks = TextFormatter.chunk(format, true);\r\n            for (var i = 0; i < chunks.length; i++) {\r\n                var chunk = chunks[i];\r\n                if (chunk.type === \"value\") {\r\n                    // Just \"Date\"?\r\n                    if (chunk.text.match(/^date$/i)) {\r\n                        var dateFormat = this.get(\"dateFormat\", \"yyyy-MM-dd\");\r\n                        if (!$type.isString(dateFormat)) {\r\n                            dateFormat = \"yyyy-MM-dd\";\r\n                        }\r\n                        chunk.text = dateFormat;\r\n                    }\r\n                    // Find all possible parts\r\n                    var matches = chunk.text.match(/G|yyyy|yyy|yy|y|YYYY|YYY|YY|Y|u|q|MMMMM|MMMM|MMM|MM|M|ww|w|W|dd|d|DDD|DD|D|F|g|EEEEE|EEEE|EEE|EE|E|eeeee|eeee|eee|ee|e|aaa|aa|a|hh|h|HH|H|KK|K|kk|k|mm|m|ss|s|SSS|SS|S|A|zzzz|zzz|zz|z|ZZ|Z|t|x|nnn|nn|n|i|I/g);\r\n                    // Found?\r\n                    if (matches) {\r\n                        // Populate template\r\n                        for (var x = 0; x < matches.length; x++) {\r\n                            info.parts.push(matches[x]);\r\n                            chunk.text = chunk.text.replace(matches[x], $type.PLACEHOLDER);\r\n                        }\r\n                    }\r\n                }\r\n                // Apply to template\r\n                info.template += chunk.text;\r\n            }\r\n            // Save cache\r\n            // TODO\r\n            return info;\r\n        }\r\n    });\r\n    Object.defineProperty(DateFormatter.prototype, \"_months\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            return [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\r\n        }\r\n    });\r\n    Object.defineProperty(DateFormatter.prototype, \"_getMonth\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (index) {\r\n            return this._months()[index];\r\n        }\r\n    });\r\n    Object.defineProperty(DateFormatter.prototype, \"_shortMonths\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            return [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May(short)\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"];\r\n        }\r\n    });\r\n    Object.defineProperty(DateFormatter.prototype, \"_getShortMonth\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (index) {\r\n            return this._shortMonths()[index];\r\n        }\r\n    });\r\n    Object.defineProperty(DateFormatter.prototype, \"_weekdays\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            return [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"];\r\n        }\r\n    });\r\n    Object.defineProperty(DateFormatter.prototype, \"_getWeekday\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (index) {\r\n            return this._weekdays()[index];\r\n        }\r\n    });\r\n    Object.defineProperty(DateFormatter.prototype, \"_shortWeekdays\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            return [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"];\r\n        }\r\n    });\r\n    Object.defineProperty(DateFormatter.prototype, \"_getShortWeekday\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (index) {\r\n            return this._shortWeekdays()[index];\r\n        }\r\n    });\r\n    Object.defineProperty(DateFormatter.prototype, \"parse\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (source, format) {\r\n            // Is it already a Date\r\n            if (source instanceof Date) {\r\n                return source;\r\n            }\r\n            // Is it a numeric timestamp\r\n            if ($type.isNumber(source)) {\r\n                return new Date(source);\r\n            }\r\n            // No? Let's check if it's string, and try converting to it if nec\r\n            if (!$type.isString(source)) {\r\n                source = source.toString();\r\n            }\r\n            // Init return value\r\n            var res;\r\n            // Init RegEx for parsing\r\n            var reg = \"\";\r\n            // Clean format\r\n            format = $utils.cleanFormat(format);\r\n            // Clip format to length of the source string\r\n            format = format.substr(0, source.length);\r\n            // Parse format\r\n            var info = this.parseFormat(format);\r\n            // Init parsed items holder\r\n            var parsedIndexes = {\r\n                \"year\": -1,\r\n                \"year3\": -1,\r\n                \"year2\": -1,\r\n                \"year1\": -1,\r\n                \"month\": -1,\r\n                \"monthShort\": -1,\r\n                \"monthLong\": -1,\r\n                \"weekdayShort\": -1,\r\n                \"weekdayLong\": -1,\r\n                \"day\": -1,\r\n                \"yearDay\": -1,\r\n                \"week\": -1,\r\n                \"hourBase0\": -1,\r\n                \"hour12Base0\": -1,\r\n                \"hourBase1\": -1,\r\n                \"hour12Base1\": -1,\r\n                \"minute\": -1,\r\n                \"second\": -1,\r\n                \"millisecond\": -1,\r\n                \"millisecondDigits\": -1,\r\n                \"am\": -1,\r\n                \"zone\": -1,\r\n                \"timestamp\": -1,\r\n                \"iso\": -1\r\n            };\r\n            // Init values\r\n            var resValues = {\r\n                \"year\": 1970,\r\n                \"month\": 0,\r\n                \"day\": 1,\r\n                \"hour\": 0,\r\n                \"minute\": 0,\r\n                \"second\": 0,\r\n                \"millisecond\": 0,\r\n                \"timestamp\": null,\r\n                \"offset\": 0,\r\n                \"utc\": this._root.utc\r\n            };\r\n            // Index adjuster\r\n            var indexAdjust = 0;\r\n            var index = 0;\r\n            // Iterate through all of the parts\r\n            for (var i = 0; i < info.parts.length; i++) {\r\n                // Set current match index\r\n                index = i + indexAdjust + 1;\r\n                switch (info.parts[i]) {\r\n                    case \"yyyy\":\r\n                    case \"YYYY\":\r\n                        reg += \"([0-9]{4})\";\r\n                        parsedIndexes.year = index;\r\n                        break;\r\n                    case \"yyy\":\r\n                    case \"YYY\":\r\n                        reg += \"([0-9]{3})\";\r\n                        parsedIndexes.year3 = index;\r\n                        break;\r\n                    case \"yy\":\r\n                    case \"YY\":\r\n                        reg += \"([0-9]{2})\";\r\n                        parsedIndexes.year2 = index;\r\n                        break;\r\n                    case \"y\":\r\n                    case \"Y\":\r\n                        reg += \"([0-9]{1})\";\r\n                        parsedIndexes.year1 = index;\r\n                        break;\r\n                    case \"MMMM\":\r\n                        reg += \"(\" + this.getStringList(this._months()).join(\"|\") + \")\";\r\n                        parsedIndexes.monthLong = index;\r\n                        break;\r\n                    case \"MMM\":\r\n                        reg += \"(\" + this.getStringList(this._shortMonths()).join(\"|\") + \")\";\r\n                        parsedIndexes.monthShort = index;\r\n                        break;\r\n                    case \"MM\":\r\n                    case \"M\":\r\n                        reg += \"([0-9]{2}|[0-9]{1})\";\r\n                        parsedIndexes.month = index;\r\n                        break;\r\n                    case \"ww\":\r\n                    case \"w\":\r\n                        reg += \"([0-9]{2}|[0-9]{1})\";\r\n                        parsedIndexes.week = index;\r\n                        break;\r\n                    case \"dd\":\r\n                    case \"d\":\r\n                        reg += \"([0-9]{2}|[0-9]{1})\";\r\n                        parsedIndexes.day = index;\r\n                        break;\r\n                    case \"DDD\":\r\n                    case \"DD\":\r\n                    case \"D\":\r\n                        reg += \"([0-9]{3}|[0-9]{2}|[0-9]{1})\";\r\n                        parsedIndexes.yearDay = index;\r\n                        break;\r\n                    case \"dddd\":\r\n                        reg += \"(\" + this.getStringList(this._weekdays()).join(\"|\") + \")\";\r\n                        parsedIndexes.weekdayLong = index;\r\n                        break;\r\n                    case \"ddd\":\r\n                        reg += \"(\" + this.getStringList(this._shortWeekdays()).join(\"|\") + \")\";\r\n                        parsedIndexes.weekdayShort = index;\r\n                        break;\r\n                    case \"aaa\":\r\n                    case \"aa\":\r\n                    case \"a\":\r\n                        // TODO: fix (escape regex)\r\n                        reg += \"(\" + this.getStringList([\"AM\", \"PM\", \"A\\.M\\.\", \"P\\.M\\.\", \"A\", \"P\"]).join(\"|\") + \")\";\r\n                        parsedIndexes.am = index;\r\n                        break;\r\n                    case \"hh\":\r\n                    case \"h\":\r\n                        reg += \"([0-9]{2}|[0-9]{1})\";\r\n                        parsedIndexes.hour12Base1 = index;\r\n                        break;\r\n                    case \"HH\":\r\n                    case \"H\":\r\n                        reg += \"([0-9]{2}|[0-9]{1})\";\r\n                        parsedIndexes.hourBase0 = index;\r\n                        break;\r\n                    case \"KK\":\r\n                    case \"K\":\r\n                        reg += \"([0-9]{2}|[0-9]{1})\";\r\n                        parsedIndexes.hour12Base0 = index;\r\n                        break;\r\n                    case \"kk\":\r\n                    case \"k\":\r\n                        reg += \"([0-9]{2}|[0-9]{1})\";\r\n                        parsedIndexes.hourBase1 = index;\r\n                        break;\r\n                    case \"mm\":\r\n                    case \"m\":\r\n                        reg += \"([0-9]{2}|[0-9]{1})\";\r\n                        parsedIndexes.minute = index;\r\n                        break;\r\n                    case \"ss\":\r\n                    case \"s\":\r\n                        reg += \"([0-9]{2}|[0-9]{1})\";\r\n                        parsedIndexes.second = index;\r\n                        break;\r\n                    case \"SSS\":\r\n                    case \"SS\":\r\n                    case \"S\":\r\n                        reg += \"([0-9]{3}|[0-9]{2}|[0-9]{1})\";\r\n                        parsedIndexes.millisecond = index;\r\n                        parsedIndexes.millisecondDigits = info.parts[i].length;\r\n                        break;\r\n                    case \"nnn\":\r\n                    case \"nn\":\r\n                    case \"n\":\r\n                        reg += \"([0-9]{3}|[0-9]{2}|[0-9]{1})\";\r\n                        parsedIndexes.millisecond = index;\r\n                        break;\r\n                    case \"x\":\r\n                        reg += \"([0-9]{1,})\";\r\n                        parsedIndexes.timestamp = index;\r\n                        break;\r\n                    case \"Z\":\r\n                        reg += \"GMT([-+]+[0-9]{2}:[0-9]{2})\";\r\n                        parsedIndexes.zone = index;\r\n                        break;\r\n                    case \"ZZ\":\r\n                        reg += \"([\\\\-+]+[0-9]{2}[0-9]{2})\";\r\n                        parsedIndexes.zone = index;\r\n                        break;\r\n                    case \"i\":\r\n                        reg += \"([0-9]{4})-?([0-9]{2})-?([0-9]{2})T?([0-9]{2}):?([0-9]{2}):?([0-9]{2})\\\\.?([0-9]{0,3})([zZ]|[+\\\\-][0-9]{2}:?[0-9]{2}|$)\";\r\n                        parsedIndexes.iso = index;\r\n                        indexAdjust += 7;\r\n                        break;\r\n                    case \"G\":\r\n                    case \"YYYY\":\r\n                    case \"YYY\":\r\n                    case \"YY\":\r\n                    case \"Y\":\r\n                    case \"MMMMM\":\r\n                    case \"W\":\r\n                    case \"EEEEE\":\r\n                    case \"EEEE\":\r\n                    case \"EEE\":\r\n                    case \"EE\":\r\n                    case \"E\":\r\n                    case \"eeeee\":\r\n                    case \"eeee\":\r\n                    case \"eee\":\r\n                    case \"ee\":\r\n                    case \"e\":\r\n                    case \"zzzz\":\r\n                    case \"zzz\":\r\n                    case \"zz\":\r\n                    case \"z\":\r\n                    case \"t\":\r\n                        // Ignore\r\n                        indexAdjust--;\r\n                        break;\r\n                }\r\n                reg += \"[^0-9]*\";\r\n            }\r\n            // Try matching\r\n            var regex = new RegExp(reg);\r\n            var matches = source.match(regex);\r\n            if (matches) {\r\n                // Populate the date object\r\n                // Full year\r\n                if (parsedIndexes.year > -1) {\r\n                    resValues.year = parseInt(matches[parsedIndexes.year]);\r\n                }\r\n                // 3-digit year\r\n                if (parsedIndexes.year3 > -1) {\r\n                    var val = parseInt(matches[parsedIndexes.year3]);\r\n                    val += 1000;\r\n                    resValues.year = val;\r\n                }\r\n                // 2-digit year\r\n                if (parsedIndexes.year2 > -1) {\r\n                    var val = parseInt(matches[parsedIndexes.year2]);\r\n                    if (val > 50) {\r\n                        val += 1000;\r\n                    }\r\n                    else {\r\n                        val += 2000;\r\n                    }\r\n                    resValues.year = val;\r\n                }\r\n                // 1-digit year\r\n                if (parsedIndexes.year1 > -1) {\r\n                    var val = parseInt(matches[parsedIndexes.year1]);\r\n                    val = Math.floor((new Date().getFullYear()) / 10) * 10 + val;\r\n                    resValues.year = val;\r\n                }\r\n                // Full month\r\n                if (parsedIndexes.monthLong > -1) {\r\n                    resValues.month = this.resolveMonth(matches[parsedIndexes.monthLong]);\r\n                }\r\n                // Short month\r\n                if (parsedIndexes.monthShort > -1) {\r\n                    resValues.month = this.resolveShortMonth(matches[parsedIndexes.monthShort]);\r\n                }\r\n                // Numeric month\r\n                if (parsedIndexes.month > -1) {\r\n                    resValues.month = parseInt(matches[parsedIndexes.month]) - 1;\r\n                }\r\n                // Weekday\r\n                // @todo\r\n                // Week\r\n                if ((parsedIndexes.week > -1) && (parsedIndexes.day === -1)) {\r\n                    // We parse weeks ONLY if day is not explicitly set\r\n                    // TODO: this needs work\r\n                    // (but maybe later - I can hardly imagine anyone passing their dates in weeks)\r\n                    resValues.month = 0;\r\n                    resValues.day = $utils.getDayFromWeek(parseInt(matches[parsedIndexes.week]), resValues.year, 1, this._root.utc);\r\n                }\r\n                // Day\r\n                if (parsedIndexes.day > -1) {\r\n                    resValues.day = parseInt(matches[parsedIndexes.day]);\r\n                }\r\n                // Year day\r\n                if (parsedIndexes.yearDay > -1) {\r\n                    resValues.month = 0;\r\n                    resValues.day = parseInt(matches[parsedIndexes.yearDay]);\r\n                }\r\n                // 24 Hour (0-23)\r\n                if (parsedIndexes.hourBase0 > -1) {\r\n                    resValues.hour = parseInt(matches[parsedIndexes.hourBase0]);\r\n                }\r\n                // 24 Hour (1-24)\r\n                if (parsedIndexes.hourBase1 > -1) {\r\n                    resValues.hour = parseInt(matches[parsedIndexes.hourBase1]) - 1;\r\n                }\r\n                // 12 Hour (0-11)\r\n                if (parsedIndexes.hour12Base0 > -1) {\r\n                    var val = parseInt(matches[parsedIndexes.hour12Base0]);\r\n                    if (val == 11) {\r\n                        val = 0;\r\n                    }\r\n                    if ((parsedIndexes.am > -1) && !this.isAm(matches[parsedIndexes.am])) {\r\n                        val += 12;\r\n                    }\r\n                    resValues.hour = val;\r\n                }\r\n                // 12 Hour (1-12)\r\n                if (parsedIndexes.hour12Base1 > -1) {\r\n                    var val = parseInt(matches[parsedIndexes.hour12Base1]);\r\n                    if (val == 12) {\r\n                        val = 0;\r\n                    }\r\n                    if ((parsedIndexes.am > -1) && !this.isAm(matches[parsedIndexes.am])) {\r\n                        val += 12;\r\n                    }\r\n                    resValues.hour = val;\r\n                }\r\n                // Minute\r\n                if (parsedIndexes.minute > -1) {\r\n                    resValues.minute = parseInt(matches[parsedIndexes.minute]);\r\n                }\r\n                // Second\r\n                if (parsedIndexes.second > -1) {\r\n                    resValues.second = parseInt(matches[parsedIndexes.second]);\r\n                }\r\n                // Millisecond\r\n                if (parsedIndexes.millisecond > -1) {\r\n                    var val = parseInt(matches[parsedIndexes.millisecond]);\r\n                    if (parsedIndexes.millisecondDigits == 2) {\r\n                        val *= 10;\r\n                    }\r\n                    else if (parsedIndexes.millisecondDigits == 1) {\r\n                        val *= 100;\r\n                    }\r\n                    resValues.millisecond = val;\r\n                }\r\n                // Timestamp\r\n                if (parsedIndexes.timestamp > -1) {\r\n                    resValues.timestamp = parseInt(matches[parsedIndexes.timestamp]);\r\n                    var ts = new Date(resValues.timestamp);\r\n                    resValues.year = ts.getUTCFullYear();\r\n                    resValues.month = ts.getUTCMonth();\r\n                    resValues.day = ts.getUTCDate();\r\n                    resValues.hour = ts.getUTCHours();\r\n                    resValues.minute = ts.getUTCMinutes();\r\n                    resValues.second = ts.getUTCSeconds();\r\n                    resValues.millisecond = ts.getUTCMilliseconds();\r\n                }\r\n                // Adjust time zone\r\n                if (parsedIndexes.zone > -1) {\r\n                    resValues.offset = this.resolveTimezoneOffset(new Date(resValues.year, resValues.month, resValues.day), matches[parsedIndexes.zone]);\r\n                }\r\n                // ISO\r\n                if (parsedIndexes.iso > -1) {\r\n                    resValues.year = $type.toNumber(matches[parsedIndexes.iso + 0]);\r\n                    resValues.month = $type.toNumber(matches[parsedIndexes.iso + 1]) - 1;\r\n                    resValues.day = $type.toNumber(matches[parsedIndexes.iso + 2]);\r\n                    resValues.hour = $type.toNumber(matches[parsedIndexes.iso + 3]);\r\n                    resValues.minute = $type.toNumber(matches[parsedIndexes.iso + 4]);\r\n                    resValues.second = $type.toNumber(matches[parsedIndexes.iso + 5]);\r\n                    resValues.millisecond = $type.toNumber(matches[parsedIndexes.iso + 6]);\r\n                    if (matches[parsedIndexes.iso + 7] == \"Z\" || matches[parsedIndexes.iso + 7] == \"z\") {\r\n                        resValues.utc = true;\r\n                    }\r\n                    else if (matches[parsedIndexes.iso + 7] != \"\") {\r\n                        resValues.offset = this.resolveTimezoneOffset(new Date(resValues.year, resValues.month, resValues.day), matches[parsedIndexes.iso + 7]);\r\n                    }\r\n                }\r\n                // Create Date object\r\n                if (resValues.utc) {\r\n                    res = new Date(Date.UTC(resValues.year, resValues.month, resValues.day, resValues.hour, resValues.minute, resValues.second, resValues.millisecond));\r\n                }\r\n                else {\r\n                    res = new Date(resValues.year, resValues.month, resValues.day, resValues.hour, resValues.minute + resValues.offset, resValues.second, resValues.millisecond);\r\n                }\r\n            }\r\n            else {\r\n                // Didn't match anything\r\n                // Let's try dropping it into Date constructor and hope for the best\r\n                res = new Date(source);\r\n            }\r\n            return res;\r\n        }\r\n    });\r\n    Object.defineProperty(DateFormatter.prototype, \"resolveTimezoneOffset\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (date, zone) {\r\n            var value = zone.match(/([+\\-]?)([0-9]{2}):?([0-9]{2})/);\r\n            if (value) {\r\n                var match = zone.match(/([+\\-]?)([0-9]{2}):?([0-9]{2})/);\r\n                var dir = match[1];\r\n                var hour = match[2];\r\n                var minute = match[3];\r\n                var offset = parseInt(hour) * 60 + parseInt(minute);\r\n                // Adjust offset\r\n                // Making it negative does not seem to make sense, but it's right\r\n                // because of how JavaScript calculates GMT offsets\r\n                if (dir == \"+\") {\r\n                    offset *= -1;\r\n                }\r\n                // Check the difference in offset\r\n                var originalOffset = (date || new Date()).getTimezoneOffset();\r\n                var diff = offset - originalOffset;\r\n                return diff;\r\n            }\r\n            return 0;\r\n        }\r\n    });\r\n    /**\r\n     * Resolves month name (i.e. \"December\") into a month number (11).\r\n     *\r\n     * @param value  Month name\r\n     * @return Month number\r\n     */\r\n    Object.defineProperty(DateFormatter.prototype, \"resolveMonth\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (value) {\r\n            // Let's try English first\r\n            var month = this._months().indexOf(value);\r\n            if (month > -1) {\r\n                return month;\r\n            }\r\n            // Try the translation\r\n            if (!this._root.language.isDefault()) {\r\n                month = this._root.language.translateAll(this._months()).indexOf(value);\r\n                if (month > -1) {\r\n                    return month;\r\n                }\r\n            }\r\n            return 0;\r\n        }\r\n    });\r\n    /**\r\n     * Resolves short month name (i.e. \"Dec\") into a month number.\r\n     *\r\n     * @param value  Short month name\r\n     * @return Month number\r\n     */\r\n    Object.defineProperty(DateFormatter.prototype, \"resolveShortMonth\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (value) {\r\n            // Let's try English first\r\n            var month = this._shortMonths().indexOf(value);\r\n            if (month > -1) {\r\n                return month;\r\n            }\r\n            // Maybe long month (workaround for May)\r\n            month = this._months().indexOf(value);\r\n            if (month > -1) {\r\n                return month;\r\n            }\r\n            // Try the translation\r\n            if (this._root.language && !this._root.language.isDefault()) {\r\n                month = this._root.language.translateAll(this._shortMonths()).indexOf(value);\r\n                if (month > -1) {\r\n                    return month;\r\n                }\r\n            }\r\n            return 0;\r\n        }\r\n    });\r\n    /**\r\n     * Checks if passed in string represents AM/PM notation in many of its\r\n     * versions.\r\n     *\r\n     * @param value  Source string\r\n     * @return Is it AM/PM?\r\n     */\r\n    Object.defineProperty(DateFormatter.prototype, \"isAm\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (value) {\r\n            var list = this.getStringList([\"AM\", \"A.M.\", \"A\"]);\r\n            return list.indexOf(value.toUpperCase()) > -1;\r\n        }\r\n    });\r\n    /**\r\n     * Translates list of strings.\r\n     *\r\n     * @param list  Source strings\r\n     * @return Translated strings\r\n     */\r\n    Object.defineProperty(DateFormatter.prototype, \"getStringList\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (list) {\r\n            var res = [];\r\n            for (var i = 0; i < list.length; i++) {\r\n                // translate?\r\n                if (this._root.language) {\r\n                    res.push($utils.escapeForRgex(this._t(list[i])));\r\n                }\r\n                else {\r\n                    res.push($utils.escapeForRgex(list[i]));\r\n                }\r\n            }\r\n            return res;\r\n        }\r\n    });\r\n    return DateFormatter;\r\n}(Entity));\r\nexport { DateFormatter };\r\n//# sourceMappingURL=DateFormatter.js.map","import { __extends } from \"tslib\";\r\nimport { Entity } from \"./Entity\";\r\nimport { TextFormatter } from \"./TextFormatter\";\r\nimport * as $object from \"./Object\";\r\nimport * as $utils from \"./Utils\";\r\nimport * as $type from \"./Type\";\r\n/**\r\n * A class used to format numberic values as time duration.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/formatters/formatting-durations/} for more info\r\n */\r\nvar DurationFormatter = /** @class */ (function (_super) {\r\n    __extends(DurationFormatter, _super);\r\n    function DurationFormatter() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        /**\r\n         * Collection of aliases for units.\r\n         */\r\n        Object.defineProperty(_this, \"_unitAliases\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {\r\n                \"Y\": \"y\",\r\n                \"D\": \"d\",\r\n                \"H\": \"h\",\r\n                \"K\": \"h\",\r\n                \"k\": \"h\",\r\n                \"n\": \"S\"\r\n            }\r\n        });\r\n        return _this;\r\n    }\r\n    Object.defineProperty(DurationFormatter.prototype, \"_setDefaults\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            var dmillisecond = \"_duration_millisecond\";\r\n            var dsecond = \"_duration_second\";\r\n            var dminute = \"_duration_minute\";\r\n            var dhour = \"_duration_hour\";\r\n            var dday = \"_duration_day\";\r\n            var dweek = \"_duration_week\";\r\n            var dmonth = \"_duration_month\";\r\n            var dyear = \"_duration_year\";\r\n            var asecond = \"_second\";\r\n            var aminute = \"_minute\";\r\n            var ahour = \"_hour\";\r\n            var aday = \"_day\";\r\n            var aweek = \"_week\";\r\n            var amonth = \"_week\";\r\n            var ayear = \"_year\";\r\n            // Defaults\r\n            this._setDefault(\"negativeBase\", 0);\r\n            this._setDefault(\"baseUnit\", \"second\");\r\n            this._setDefault(\"durationFormats\", {\r\n                \"millisecond\": {\r\n                    \"millisecond\": this._t(dmillisecond),\r\n                    \"second\": this._t((dmillisecond + asecond)),\r\n                    \"minute\": this._t((dmillisecond + aminute)),\r\n                    \"hour\": this._t((dmillisecond + ahour)),\r\n                    \"day\": this._t((dmillisecond + aday)),\r\n                    \"week\": this._t((dmillisecond + aweek)),\r\n                    \"month\": this._t((dmillisecond + amonth)),\r\n                    \"year\": this._t((dmillisecond + ayear))\r\n                },\r\n                \"second\": {\r\n                    \"second\": this._t((dsecond)),\r\n                    \"minute\": this._t((dsecond + aminute)),\r\n                    \"hour\": this._t((dsecond + ahour)),\r\n                    \"day\": this._t((dsecond + aday)),\r\n                    \"week\": this._t((dsecond + aweek)),\r\n                    \"month\": this._t((dsecond + amonth)),\r\n                    \"year\": this._t((dsecond + ayear))\r\n                },\r\n                \"minute\": {\r\n                    \"minute\": this._t((dminute)),\r\n                    \"hour\": this._t((dminute + ahour)),\r\n                    \"day\": this._t((dminute + aday)),\r\n                    \"week\": this._t((dminute + aweek)),\r\n                    \"month\": this._t((dminute + amonth)),\r\n                    \"year\": this._t((dminute + ayear))\r\n                },\r\n                \"hour\": {\r\n                    \"hour\": this._t((dhour)),\r\n                    \"day\": this._t((dhour + aday)),\r\n                    \"week\": this._t((dhour + aweek)),\r\n                    \"month\": this._t((dhour + amonth)),\r\n                    \"year\": this._t((dhour + ayear))\r\n                },\r\n                \"day\": {\r\n                    \"day\": this._t((dday)),\r\n                    \"week\": this._t((dday + aweek)),\r\n                    \"month\": this._t((dday + amonth)),\r\n                    \"year\": this._t((dday + ayear))\r\n                },\r\n                \"week\": {\r\n                    \"week\": this._t((dweek)),\r\n                    \"month\": this._t((dweek + amonth)),\r\n                    \"year\": this._t((dweek + ayear))\r\n                },\r\n                \"month\": {\r\n                    \"month\": this._t((dmonth)),\r\n                    \"year\": this._t((dmonth + ayear))\r\n                },\r\n                \"year\": {\r\n                    \"year\": this._t(dyear)\r\n                }\r\n            });\r\n            _super.prototype._setDefaults.call(this);\r\n        }\r\n    });\r\n    Object.defineProperty(DurationFormatter.prototype, \"_beforeChanged\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            _super.prototype._beforeChanged.call(this);\r\n        }\r\n    });\r\n    /**\r\n     * Formats the number as duration.\r\n     *\r\n     * For example `1000` (base unit seconds) would be converted to `16:40` as in\r\n     * 16 minutes and 40 seconds.\r\n     *\r\n     * @param value   Value to format\r\n     * @param format  Format to apply\r\n     * @param base    Override base unit\r\n     * @return Formatted number\r\n     */\r\n    Object.defineProperty(DurationFormatter.prototype, \"format\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (value, format, base) {\r\n            // no base unit?\r\n            var baseUnit = base || this.get(\"baseUnit\");\r\n            // no format passed in or empty\r\n            if (typeof format === \"undefined\" || format === \"\") {\r\n                if (this.get(\"durationFormat\") != null) {\r\n                    format = this.get(\"durationFormat\");\r\n                }\r\n                else {\r\n                    format = this.getFormat($type.toNumber(value), undefined, baseUnit);\r\n                }\r\n            }\r\n            // Clean format\r\n            format = $utils.cleanFormat(format);\r\n            // get format info (it will also deal with parser caching)\r\n            var info = this.parseFormat(format, baseUnit);\r\n            // cast to number just in case\r\n            // TODO: maybe use better casting\r\n            var source = Number(value);\r\n            // format and replace the number\r\n            var details;\r\n            if (source > this.get(\"negativeBase\")) {\r\n                details = info.positive;\r\n            }\r\n            else if (source < this.get(\"negativeBase\")) {\r\n                details = info.negative;\r\n            }\r\n            else {\r\n                details = info.zero;\r\n            }\r\n            // Format\r\n            var formatted = this.applyFormat(source, details);\r\n            // Apply color?\r\n            if (details.color !== \"\") {\r\n                formatted = \"[\" + details.color + \"]\" + formatted + \"[/]\";\r\n            }\r\n            return formatted;\r\n        }\r\n    });\r\n    /**\r\n     * Parses supplied format into structured object which can be used to format\r\n     * the number.\r\n     *\r\n     * @param format  Format string, i.e. \"#,###.00\"\r\n     * @param base    Override base unit\r\n     * @return Parsed information\r\n     */\r\n    Object.defineProperty(DurationFormatter.prototype, \"parseFormat\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (format, base) {\r\n            // Check cache\r\n            // TODO\r\n            // let cached = this.getCache(format);\r\n            // if (cached != null) {\r\n            // \treturn cached;\r\n            // }\r\n            var _this = this;\r\n            // no base unit?\r\n            var baseUnit = base || this.get(\"baseUnit\");\r\n            // Initialize duration parsing info\r\n            var info = {\r\n                \"positive\": {\r\n                    \"color\": \"\",\r\n                    \"template\": \"\",\r\n                    \"parts\": [],\r\n                    \"source\": \"\",\r\n                    \"baseUnit\": baseUnit,\r\n                    \"parsed\": false,\r\n                    \"absolute\": false\r\n                },\r\n                \"negative\": {\r\n                    \"color\": \"\",\r\n                    \"template\": \"\",\r\n                    \"parts\": [],\r\n                    \"source\": \"\",\r\n                    \"baseUnit\": baseUnit,\r\n                    \"parsed\": false,\r\n                    \"absolute\": false\r\n                },\r\n                \"zero\": {\r\n                    \"color\": \"\",\r\n                    \"template\": \"\",\r\n                    \"parts\": [],\r\n                    \"source\": \"\",\r\n                    \"baseUnit\": baseUnit,\r\n                    \"parsed\": false,\r\n                    \"absolute\": false\r\n                }\r\n            };\r\n            // Escape double vertical bars (that mean display one vertical bar)\r\n            format = format.replace(\"||\", $type.PLACEHOLDER2);\r\n            // Split it up and deal with different formats\r\n            var parts = format.split(\"|\");\r\n            info.positive.source = parts[0];\r\n            if (typeof parts[2] === \"undefined\") {\r\n                info.zero = info.positive;\r\n            }\r\n            else {\r\n                info.zero.source = parts[2];\r\n            }\r\n            if (typeof parts[1] === \"undefined\") {\r\n                info.negative = info.positive;\r\n            }\r\n            else {\r\n                info.negative.source = parts[1];\r\n            }\r\n            // Parse each\r\n            $object.each(info, function (_part, item) {\r\n                // Already parsed\r\n                if (item.parsed) {\r\n                    return;\r\n                }\r\n                // Check cached\r\n                // TODO\r\n                // if (typeof this.getCache(item.source) !== \"undefined\") {\r\n                // \tinfo[part] = this.getCache(item.source);\r\n                // \treturn;\r\n                // }\r\n                // Begin parsing\r\n                var partFormat = item.source;\r\n                // Check for [] directives\r\n                var dirs = [];\r\n                dirs = item.source.match(/^\\[([^\\]]*)\\]/);\r\n                if (dirs && dirs.length && dirs[0] !== \"\") {\r\n                    partFormat = item.source.substr(dirs[0].length);\r\n                    item.color = dirs[1];\r\n                }\r\n                // Let TextFormatter split into chunks\r\n                var chunks = TextFormatter.chunk(partFormat, true);\r\n                for (var i = 0; i < chunks.length; i++) {\r\n                    var chunk = chunks[i];\r\n                    // replace back double vertical bar\r\n                    chunk.text = chunk.text.replace($type.PLACEHOLDER2, \"|\");\r\n                    if (chunk.type === \"value\") {\r\n                        // Just \"Duration\"?\r\n                        // if (chunk.text.toLowerCase() === \"duration\") {\r\n                        // \tchunk.text = durationFormat;\r\n                        // }\r\n                        // Check for \"a\" (absolute) modifier\r\n                        if (chunk.text.match(/[yYMdDwhHKkmsSn]+a/)) {\r\n                            item.absolute = true;\r\n                            chunk.text = chunk.text.replace(/([yYMdDwhHKkmsSn]+)a/, \"$1\");\r\n                        }\r\n                        // Find all possible parts\r\n                        var matches = chunk.text.match(/y+|Y+|M+|d+|D+|w+|h+|H+|K+|k+|m+|s+|S+|n+/g);\r\n                        if (matches) {\r\n                            // Populate template\r\n                            for (var x = 0; x < matches.length; x++) {\r\n                                // Is it an alias?\r\n                                if (matches[x] == null) {\r\n                                    matches[x] = _this._unitAliases[matches[x]];\r\n                                }\r\n                                item.parts.push(matches[x]);\r\n                                chunk.text = chunk.text.replace(matches[x], $type.PLACEHOLDER);\r\n                            }\r\n                        }\r\n                    }\r\n                    // Apply to template\r\n                    item.template += chunk.text;\r\n                }\r\n                // Apply style formatting\r\n                //item.template = TextFormatter.format(item.template, this.outputFormat);\r\n                // Save cache\r\n                // TODO\r\n                //this.setCache(item.source, item);\r\n                // Mark this as parsed\r\n                item.parsed = true;\r\n            });\r\n            // Save cache (the whole thing)\r\n            // TODO\r\n            //this.setCache(format, info);\r\n            return info;\r\n        }\r\n    });\r\n    /**\r\n     * Applies parsed format to a numeric value.\r\n     *\r\n     * @param value    Value\r\n     * @param details  Parsed format as returned by {parseFormat}\r\n     * @return Formatted duration\r\n     */\r\n    Object.defineProperty(DurationFormatter.prototype, \"applyFormat\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (value, details) {\r\n            // Use absolute values\r\n            var negative = !details.absolute && (value < this.get(\"negativeBase\"));\r\n            value = Math.abs(value);\r\n            // Recalculate to milliseconds\r\n            var tstamp = this.toTimeStamp(value, details.baseUnit);\r\n            // Init return value\r\n            var res = details.template;\r\n            // Iterate through duration parts\r\n            for (var i = 0, len = details.parts.length; i < len; i++) {\r\n                // Gather the part\r\n                var part = details.parts[i];\r\n                var unit = this._toTimeUnit(part.substr(0, 1));\r\n                var digits = part.length;\r\n                // Calculate current unit value\r\n                var ints = Math.floor(tstamp / this._getUnitValue(unit));\r\n                res = res.replace($type.PLACEHOLDER, $utils.padString(ints, digits, \"0\"));\r\n                // Reduce timestamp\r\n                tstamp -= ints * this._getUnitValue(unit);\r\n            }\r\n            // Reapply negative sign\r\n            if (negative) {\r\n                res = \"-\" + res;\r\n            }\r\n            return res;\r\n        }\r\n    });\r\n    /**\r\n     * Converts numeric value to timestamp in milliseconds.\r\n     *\r\n     * @param value     A source value\r\n     * @param baseUnit  Base unit the source value is in: \"q\", \"s\", \"i\", \"h\", \"d\", \"w\", \"m\", \"y\"\r\n     * @return Value representation as a timestamp in milliseconds\r\n     */\r\n    Object.defineProperty(DurationFormatter.prototype, \"toTimeStamp\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (value, baseUnit) {\r\n            return value * this._getUnitValue(baseUnit);\r\n        }\r\n    });\r\n    Object.defineProperty(DurationFormatter.prototype, \"_toTimeUnit\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (code) {\r\n            switch (code) {\r\n                case \"S\":\r\n                    return \"millisecond\";\r\n                case \"s\":\r\n                    return \"second\";\r\n                case \"m\":\r\n                    return \"minute\";\r\n                case \"h\":\r\n                    return \"hour\";\r\n                case \"d\":\r\n                    return \"day\";\r\n                case \"w\":\r\n                    return \"week\";\r\n                case \"M\":\r\n                    return \"month\";\r\n                case \"y\":\r\n                    return \"year\";\r\n            }\r\n            ;\r\n        }\r\n    });\r\n    /**\r\n     * Returns appropriate default format for the value.\r\n     *\r\n     * If `maxValue` is sepcified, it will use that value to determine the time\r\n     * unit for the format.\r\n     *\r\n     * For example if your `baseUnit` is `\"second\"` and you pass in `10`, you\r\n     * will get `\"10\"`.\r\n     *\r\n     * However, you might want it to be formatted in the context of bigger scale,\r\n     * say 10 minutes (600 seconds). If you pass in `600` as `maxValue`, all\r\n     * values, including small ones will use format with minutes, e.g.:\r\n     * `00:10`, `00:50`, `12: 30`, etc.\r\n     *\r\n     * @param value     Value to format\r\n     * @param maxValue  Maximum value to be used to determine format\r\n     * @param baseUnit  Base unit of the value\r\n     * @return Format\r\n     */\r\n    Object.defineProperty(DurationFormatter.prototype, \"getFormat\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (value, maxValue, baseUnit) {\r\n            // Is format override set?\r\n            if (this.get(\"durationFormat\") != null) {\r\n                return this.get(\"durationFormat\");\r\n            }\r\n            // Get base unit\r\n            if (!baseUnit) {\r\n                baseUnit = this.get(\"baseUnit\");\r\n            }\r\n            if (maxValue != null && value != maxValue) {\r\n                value = Math.abs(value);\r\n                maxValue = Math.abs(maxValue);\r\n                var maxUnit = this.getValueUnit(Math.max(value, maxValue), baseUnit);\r\n                //let diffUnit = this.getValueUnit(Math.abs(maxValue - value), baseUnit);\r\n                //console.log(maxUnit, diffUnit);\r\n                return this.get(\"durationFormats\")[baseUnit][maxUnit];\r\n            }\r\n            else {\r\n                var unit = this.getValueUnit(value, baseUnit);\r\n                return this.get(\"durationFormats\")[baseUnit][unit];\r\n            }\r\n        }\r\n    });\r\n    /**\r\n     * Returns value's closest denominator time unit, e.g 100 seconds is\r\n     * `\"minute\"`, while 59 seconds would still be `second`.\r\n     *\r\n     * @param value     Source duration value\r\n     * @param baseUnit  Base unit\r\n     * @return Denominator\r\n     */\r\n    Object.defineProperty(DurationFormatter.prototype, \"getValueUnit\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (value, baseUnit) {\r\n            // Get base unit\r\n            if (!baseUnit) {\r\n                baseUnit = this.get(\"baseUnit\");\r\n            }\r\n            // Convert to milliseconds\r\n            var currentUnit;\r\n            var ms = this.getMilliseconds(value, baseUnit);\r\n            $object.eachContinue(this._getUnitValues(), function (key, val) {\r\n                if (key == baseUnit || currentUnit) {\r\n                    var num = ms / val;\r\n                    if (num <= 1) {\r\n                        if (!currentUnit) {\r\n                            currentUnit = key;\r\n                        }\r\n                        return false;\r\n                    }\r\n                    currentUnit = key;\r\n                }\r\n                return true;\r\n            });\r\n            return currentUnit;\r\n        }\r\n    });\r\n    /**\r\n     * Converts value to milliseconds according to `baseUnit`.\r\n     *\r\n     * @param value     Source duration value\r\n     * @param baseUnit  Base unit\r\n     * @return Value in milliseconds\r\n     */\r\n    Object.defineProperty(DurationFormatter.prototype, \"getMilliseconds\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (value, baseUnit) {\r\n            // Get base unit\r\n            if (!baseUnit) {\r\n                baseUnit = this.get(\"baseUnit\");\r\n            }\r\n            return value * this._getUnitValue(baseUnit);\r\n        }\r\n    });\r\n    Object.defineProperty(DurationFormatter.prototype, \"_getUnitValue\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (timeUnit) {\r\n            return this._getUnitValues()[timeUnit];\r\n        }\r\n    });\r\n    Object.defineProperty(DurationFormatter.prototype, \"_getUnitValues\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            return {\r\n                \"millisecond\": 1,\r\n                \"second\": 1000,\r\n                \"minute\": 60000,\r\n                \"hour\": 3600000,\r\n                \"day\": 86400000,\r\n                \"week\": 604800000,\r\n                \"month\": 2592000000,\r\n                \"year\": 31536000000,\r\n            };\r\n        }\r\n    });\r\n    return DurationFormatter;\r\n}(Entity));\r\nexport { DurationFormatter };\r\n//# sourceMappingURL=DurationFormatter.js.map","/**\r\n * amCharts 5 locale\r\n *\r\n * Locale: en\r\n * Language: International English\r\n * Author: Martynas Majeris\r\n *\r\n * Follow instructions in [on this page](https://www.amcharts.com/docs/v5/tutorials/creating-translations/) to make corrections or add new translations.\r\n *\r\n * ---\r\n * Edit but leave the header section above this line. You can remove any\r\n * subsequent comment sections.\r\n * ---\r\n *\r\n * Use this file as a template to create translations. Leave the key part in\r\n * English intact. Fill the value with a translation.\r\n *\r\n * Empty string means no translation, so default \"International English\"\r\n * will be used.\r\n *\r\n * If you need the translation to literally be an empty string, use `null`\r\n * instead.\r\n *\r\n * IMPORTANT:\r\n * When translating make good effort to keep the translation length\r\n * at least the same chartcount as the English, especially for short prompts.\r\n *\r\n * Having significantly longer prompts may distort the actual charts.\r\n *\r\n * NOTE:\r\n * Some prompts - like months or weekdays - come in two versions: full and\r\n * shortened.\r\n *\r\n * If there's no official shortened version of these in your language, and it\r\n * would not be possible to invent such short versions that don't seem weird\r\n * to native speakers of that language, fill those with the same as full\r\n * version.\r\n *\r\n * PLACEHOLDERS:\r\n * Some prompts have placeholders like \"%1\". Those will be replaced by actual\r\n * values during translation and should be retained in the translated prompts.\r\n *\r\n * Placeholder positions may be changed to better suit structure of the\r\n * sentence.\r\n *\r\n * For example \"From %1 to %2\", when actually used will replace \"%1\" with an\r\n * actual value representing range start, and \"%2\" will be replaced by end\r\n * value.\r\n *\r\n * E.g. in a Scrollbar for Value axis \"From %1 to %2\" will become\r\n * \"From 100 to 200\". You may translate \"From\" and \"to\", as well as re-arrange\r\n * the order of the prompt itself, but make sure the \"%1\" and \"%2\" remain, in\r\n * places where they will make sense.\r\n *\r\n * Save the file as language_LOCALE, i.e. `en_GB.ts`, `fr_FR.ts`, etc.\r\n */\r\nexport default {\r\n    \"firstDayOfWeek\": 1,\r\n    // Number formatting options.\r\n    // \r\n    // Please check with the local standards which separator is accepted to be\r\n    // used for separating decimals, and which for thousands.\r\n    \"_decimalSeparator\": \".\",\r\n    \"_thousandSeparator\": \",\",\r\n    // Position of the percent sign in numbers\r\n    \"_percentPrefix\": null,\r\n    \"_percentSuffix\": \"%\",\r\n    // Suffixes for numbers\r\n    // When formatting numbers, big or small numers might be reformatted to\r\n    // shorter version, by applying a suffix.\r\n    // \r\n    // For example, 1000000 might become \"1m\".\r\n    // Or 1024 might become \"1KB\" if we're formatting byte numbers.\r\n    // \r\n    // This section defines such suffixes for all such cases.\r\n    \"_big_number_suffix_3\": \"k\",\r\n    \"_big_number_suffix_6\": \"M\",\r\n    \"_big_number_suffix_9\": \"G\",\r\n    \"_big_number_suffix_12\": \"T\",\r\n    \"_big_number_suffix_15\": \"P\",\r\n    \"_big_number_suffix_18\": \"E\",\r\n    \"_big_number_suffix_21\": \"Z\",\r\n    \"_big_number_suffix_24\": \"Y\",\r\n    \"_small_number_suffix_3\": \"m\",\r\n    \"_small_number_suffix_6\": \"μ\",\r\n    \"_small_number_suffix_9\": \"n\",\r\n    \"_small_number_suffix_12\": \"p\",\r\n    \"_small_number_suffix_15\": \"f\",\r\n    \"_small_number_suffix_18\": \"a\",\r\n    \"_small_number_suffix_21\": \"z\",\r\n    \"_small_number_suffix_24\": \"y\",\r\n    \"_byte_suffix_B\": \"B\",\r\n    \"_byte_suffix_KB\": \"KB\",\r\n    \"_byte_suffix_MB\": \"MB\",\r\n    \"_byte_suffix_GB\": \"GB\",\r\n    \"_byte_suffix_TB\": \"TB\",\r\n    \"_byte_suffix_PB\": \"PB\",\r\n    // Default date formats for various periods.\r\n    // \r\n    // This should reflect official or de facto formatting universally accepted\r\n    // in the country translation is being made for\r\n    // Available format codes here:\r\n    // https://www.amcharts.com/docs/v5/concepts/formatters/formatting-dates/#Format_codes\r\n    // \r\n    // This will be used when formatting date/time for particular granularity,\r\n    // e.g. \"_date_hour\" will be shown whenever we need to show time as hours.\r\n    // \r\n    // \"date\" is used as in default date format when showing standalone dates.\r\n    \"_date\": \"yyyy-MM-dd\",\r\n    \"_date_millisecond\": \"mm:ss SSS\",\r\n    \"_date_millisecond_full\": \"HH:mm:ss SSS\",\r\n    \"_date_second\": \"HH:mm:ss\",\r\n    \"_date_second_full\": \"HH:mm:ss\",\r\n    \"_date_minute\": \"HH:mm\",\r\n    \"_date_minute_full\": \"HH:mm - MMM dd, yyyy\",\r\n    \"_date_hour\": \"HH:mm\",\r\n    \"_date_hour_full\": \"HH:mm - MMM dd, yyyy\",\r\n    \"_date_day\": \"MMM dd\",\r\n    \"_date_day_full\": \"MMM dd, yyyy\",\r\n    \"_date_week\": \"ww\",\r\n    \"_date_week_full\": \"MMM dd, yyyy\",\r\n    \"_date_month\": \"MMM\",\r\n    \"_date_month_full\": \"MMM, yyyy\",\r\n    \"_date_year\": \"yyyy\",\r\n    // Default duration formats for various base units.\r\n    // \r\n    // This will be used by DurationFormatter to format numeric values into\r\n    // duration.\r\n    // \r\n    // Notice how each duration unit comes in several versions. This is to ensure\r\n    // that each base unit is shown correctly.\r\n    // \r\n    // For example, if we have baseUnit set to \"second\", meaning our duration is\r\n    // in seconds.\r\n    // \r\n    // If we pass in `50` to formatter, it will know that we have just 50 seconds\r\n    // (less than a minute) so it will use format in `\"_duration_second\"` (\"ss\"),\r\n    // and the formatted result will be in like `\"50\"`.\r\n    // \r\n    // If we pass in `70`, which is more than a minute, the formatter will switch\r\n    // to `\"_duration_second_minute\"` (\"mm:ss\"), resulting in \"01:10\" formatted\r\n    // text.\r\n    // \r\n    // Available codes here:\r\n    // https://www.amcharts.com/docs/v4/concepts/formatters/formatting-duration/#Available_Codes\r\n    \"_duration_millisecond\": \"SSS\",\r\n    \"_duration_millisecond_second\": \"ss.SSS\",\r\n    \"_duration_millisecond_minute\": \"mm:ss SSS\",\r\n    \"_duration_millisecond_hour\": \"hh:mm:ss SSS\",\r\n    \"_duration_millisecond_day\": \"d'd' mm:ss SSS\",\r\n    \"_duration_millisecond_week\": \"d'd' mm:ss SSS\",\r\n    \"_duration_millisecond_month\": \"M'm' dd'd' mm:ss SSS\",\r\n    \"_duration_millisecond_year\": \"y'y' MM'm' dd'd' mm:ss SSS\",\r\n    \"_duration_second\": \"ss\",\r\n    \"_duration_second_minute\": \"mm:ss\",\r\n    \"_duration_second_hour\": \"hh:mm:ss\",\r\n    \"_duration_second_day\": \"d'd' hh:mm:ss\",\r\n    \"_duration_second_week\": \"d'd' hh:mm:ss\",\r\n    \"_duration_second_month\": \"M'm' dd'd' hh:mm:ss\",\r\n    \"_duration_second_year\": \"y'y' MM'm' dd'd' hh:mm:ss\",\r\n    \"_duration_minute\": \"mm\",\r\n    \"_duration_minute_hour\": \"hh:mm\",\r\n    \"_duration_minute_day\": \"d'd' hh:mm\",\r\n    \"_duration_minute_week\": \"d'd' hh:mm\",\r\n    \"_duration_minute_month\": \"M'm' dd'd' hh:mm\",\r\n    \"_duration_minute_year\": \"y'y' MM'm' dd'd' hh:mm\",\r\n    \"_duration_hour\": \"hh'h'\",\r\n    \"_duration_hour_day\": \"d'd' hh'h'\",\r\n    \"_duration_hour_week\": \"d'd' hh'h'\",\r\n    \"_duration_hour_month\": \"M'm' dd'd' hh'h'\",\r\n    \"_duration_hour_year\": \"y'y' MM'm' dd'd' hh'h'\",\r\n    \"_duration_day\": \"d'd'\",\r\n    \"_duration_day_week\": \"d'd'\",\r\n    \"_duration_day_month\": \"M'm' dd'd'\",\r\n    \"_duration_day_year\": \"y'y' MM'm' dd'd'\",\r\n    \"_duration_week\": \"w'w'\",\r\n    \"_duration_week_month\": \"w'w'\",\r\n    \"_duration_week_year\": \"w'w'\",\r\n    \"_duration_month\": \"M'm'\",\r\n    \"_duration_month_year\": \"y'y' MM'm'\",\r\n    \"_duration_year\": \"y'y'\",\r\n    // Era translations\r\n    \"_era_ad\": \"AD\",\r\n    \"_era_bc\": \"BC\",\r\n    // Day part, used in 12-hour formats, e.g. 5 P.M.\r\n    // Please note that these come in 3 variants:\r\n    // * one letter (e.g. \"A\")\r\n    // * two letters (e.g. \"AM\")\r\n    // * two letters with dots (e.g. \"A.M.\")\r\n    // \r\n    // All three need to to be translated even if they are all the same. Some\r\n    // users might use one, some the other.\r\n    \"A\": \"\",\r\n    \"P\": \"\",\r\n    \"AM\": \"\",\r\n    \"PM\": \"\",\r\n    \"A.M.\": \"\",\r\n    \"P.M.\": \"\",\r\n    // Date-related stuff.\r\n    // \r\n    // When translating months, if there's a difference, use the form which is\r\n    // best for a full date, e.g. as you would use it in \"2018 January 1\".\r\n    // \r\n    // Note that May is listed twice. This is because in English May is the same\r\n    // in both long and short forms, while in other languages it may not be the\r\n    // case. Translate \"May\" to full word, while \"May(short)\" to shortened\r\n    // version.\r\n    // \r\n    // Should month names and weekdays be capitalized or not?\r\n    // \r\n    // Rule of thumb is this: if the names should always be capitalized,\r\n    // regardless of name position within date (\"January\", \"21st January 2018\",\r\n    // etc.) use capitalized names. Otherwise enter all lowercase.\r\n    // \r\n    // The date formatter will automatically capitalize names if they are the\r\n    // first (or only) word in resulting date.\r\n    \"January\": \"\",\r\n    \"February\": \"\",\r\n    \"March\": \"\",\r\n    \"April\": \"\",\r\n    \"May\": \"\",\r\n    \"June\": \"\",\r\n    \"July\": \"\",\r\n    \"August\": \"\",\r\n    \"September\": \"\",\r\n    \"October\": \"\",\r\n    \"November\": \"\",\r\n    \"December\": \"\",\r\n    \"Jan\": \"\",\r\n    \"Feb\": \"\",\r\n    \"Mar\": \"\",\r\n    \"Apr\": \"\",\r\n    \"May(short)\": \"May\",\r\n    \"Jun\": \"\",\r\n    \"Jul\": \"\",\r\n    \"Aug\": \"\",\r\n    \"Sep\": \"\",\r\n    \"Oct\": \"\",\r\n    \"Nov\": \"\",\r\n    \"Dec\": \"\",\r\n    // Weekdays.\r\n    \"Sunday\": \"\",\r\n    \"Monday\": \"\",\r\n    \"Tuesday\": \"\",\r\n    \"Wednesday\": \"\",\r\n    \"Thursday\": \"\",\r\n    \"Friday\": \"\",\r\n    \"Saturday\": \"\",\r\n    \"Sun\": \"\",\r\n    \"Mon\": \"\",\r\n    \"Tue\": \"\",\r\n    \"Wed\": \"\",\r\n    \"Thu\": \"\",\r\n    \"Fri\": \"\",\r\n    \"Sat\": \"\",\r\n    // Date ordinal function.\r\n    // \r\n    // This is used when adding number ordinal when formatting days in dates.\r\n    // \r\n    // E.g. \"January 1st\", \"February 2nd\".\r\n    // \r\n    // The function accepts day number, and returns a string to be added to the\r\n    // day, like in default English translation, if we pass in 2, we will receive\r\n    // \"nd\" back.\r\n    \"_dateOrd\": function (day) {\r\n        var res = \"th\";\r\n        if ((day < 11) || (day > 13)) {\r\n            switch (day % 10) {\r\n                case 1:\r\n                    res = \"st\";\r\n                    break;\r\n                case 2:\r\n                    res = \"nd\";\r\n                    break;\r\n                case 3:\r\n                    res = \"rd\";\r\n                    break;\r\n            }\r\n        }\r\n        return res;\r\n    },\r\n    // Various chart controls.\r\n    // Shown as a tooltip on zoom out button.\r\n    \"Zoom Out\": \"\",\r\n    // Timeline buttons\r\n    \"Play\": \"\",\r\n    \"Stop\": \"\",\r\n    // Chart's Legend screen reader title.\r\n    \"Legend\": \"\",\r\n    // Legend's item screen reader indicator.\r\n    \"Press ENTER to toggle\": \"\",\r\n    // Shown when the chart is busy loading something.\r\n    \"Loading\": \"\",\r\n    // Shown as the first button in the breadcrumb navigation, e.g.:\r\n    // Home > First level > ...\r\n    \"Home\": \"\",\r\n    // Chart types.\r\n    // Those are used as default screen reader titles for the main chart element\r\n    // unless developer has set some more descriptive title.\r\n    \"Chart\": \"\",\r\n    \"Serial chart\": \"\",\r\n    \"X/Y chart\": \"\",\r\n    \"Pie chart\": \"\",\r\n    \"Gauge chart\": \"\",\r\n    \"Radar chart\": \"\",\r\n    \"Sankey diagram\": \"\",\r\n    \"Flow diagram\": \"\",\r\n    \"Chord diagram\": \"\",\r\n    \"TreeMap chart\": \"\",\r\n    \"Force directed tree\": \"\",\r\n    \"Sliced chart\": \"\",\r\n    // Series types.\r\n    // Used to name series by type for screen readers if they do not have their\r\n    // name set.\r\n    \"Series\": \"\",\r\n    \"Candlestick Series\": \"\",\r\n    \"OHLC Series\": \"\",\r\n    \"Column Series\": \"\",\r\n    \"Line Series\": \"\",\r\n    \"Pie Slice Series\": \"\",\r\n    \"Funnel Series\": \"\",\r\n    \"Pyramid Series\": \"\",\r\n    \"X/Y Series\": \"\",\r\n    // Map-related stuff.\r\n    \"Map\": \"\",\r\n    \"Press ENTER to zoom in\": \"\",\r\n    \"Press ENTER to zoom out\": \"\",\r\n    \"Use arrow keys to zoom in and out\": \"\",\r\n    \"Use plus and minus keys on your keyboard to zoom in and out\": \"\",\r\n    // Export-related stuff.\r\n    // These prompts are used in Export menu labels.\r\n    // \r\n    // \"Export\" is the top-level menu item.\r\n    // \r\n    // \"Image\", \"Data\", \"Print\" as second-level indicating type of export\r\n    // operation.\r\n    // \r\n    // Leave actual format untranslated, unless you absolutely know that they\r\n    // would convey more meaning in some other way.\r\n    \"Export\": \"\",\r\n    \"Image\": \"\",\r\n    \"Data\": \"\",\r\n    \"Print\": \"\",\r\n    \"Press ENTER or use arrow keys to navigate\": \"\",\r\n    \"Press ENTER to open\": \"\",\r\n    \"Press ENTER to print.\": \"\",\r\n    \"Press ENTER to export as %1.\": \"\",\r\n    \"(Press ESC to close this message)\": \"\",\r\n    \"Image Export Complete\": \"\",\r\n    \"Export operation took longer than expected. Something might have gone wrong.\": \"\",\r\n    \"Saved from\": \"\",\r\n    \"PNG\": \"\",\r\n    \"JPG\": \"\",\r\n    \"GIF\": \"\",\r\n    \"SVG\": \"\",\r\n    \"PDF\": \"\",\r\n    \"JSON\": \"\",\r\n    \"CSV\": \"\",\r\n    \"XLSX\": \"\",\r\n    \"HTML\": \"\",\r\n    // Scrollbar-related stuff.\r\n    // \r\n    // Scrollbar is a control which can zoom and pan the axes on the chart.\r\n    // \r\n    // Each scrollbar has two grips: left or right (for horizontal scrollbar) or\r\n    // upper and lower (for vertical one).\r\n    // \r\n    // Prompts change in relation to whether Scrollbar is vertical or horizontal.\r\n    // \r\n    // The final section is used to indicate the current range of selection.\r\n    \"Use TAB to select grip buttons or left and right arrows to change selection\": \"\",\r\n    \"Use left and right arrows to move selection\": \"\",\r\n    \"Use left and right arrows to move left selection\": \"\",\r\n    \"Use left and right arrows to move right selection\": \"\",\r\n    \"Use TAB select grip buttons or up and down arrows to change selection\": \"\",\r\n    \"Use up and down arrows to move selection\": \"\",\r\n    \"Use up and down arrows to move lower selection\": \"\",\r\n    \"Use up and down arrows to move upper selection\": \"\",\r\n    \"From %1 to %2\": \"\",\r\n    \"From %1\": \"\",\r\n    \"To %1\": \"\",\r\n    // Data loader-related.\r\n    \"No parser available for file: %1\": \"\",\r\n    \"Error parsing file: %1\": \"\",\r\n    \"Unable to load file: %1\": \"\",\r\n    \"Invalid date\": \"\",\r\n    // Common actions\r\n    \"Close\": \"\",\r\n    \"Minimize\": \"\"\r\n};\r\n//# sourceMappingURL=en.js.map","import { __extends, __read, __spreadArray } from \"tslib\";\r\nimport { Entity } from \"./Entity\";\r\nimport * as $array from \"./Array\";\r\nimport en from \"../../../locales/en\";\r\n;\r\nvar Language = /** @class */ (function (_super) {\r\n    __extends(Language, _super);\r\n    function Language() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    Object.defineProperty(Language.prototype, \"_setDefaults\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            this.setPrivate(\"defaultLocale\", en);\r\n            _super.prototype._setDefaults.call(this);\r\n        }\r\n    });\r\n    Object.defineProperty(Language.prototype, \"translate\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (prompt, locale) {\r\n            var rest = [];\r\n            for (var _i = 2; _i < arguments.length; _i++) {\r\n                rest[_i - 2] = arguments[_i];\r\n            }\r\n            // Get langauge\r\n            if (!locale) {\r\n                locale = this._root.locale || this.getPrivate(\"defaultLocale\");\r\n            }\r\n            // Init translation\r\n            var translation = prompt;\r\n            var value = locale[prompt];\r\n            // Try to look for the translation\r\n            if (value === null) {\r\n                translation = \"\";\r\n            }\r\n            else if (value != null) {\r\n                // It might be an empty string\r\n                if (value) {\r\n                    translation = value;\r\n                }\r\n            }\r\n            else if (locale !== this.getPrivate(\"defaultLocale\")) {\r\n                // Try to look in default language\r\n                return this.translate.apply(this, __spreadArray([prompt, this.getPrivate(\"defaultLocale\")], __read(rest), false));\r\n            }\r\n            // Replace %1, %2, etc params\r\n            if (rest.length) {\r\n                for (var len = rest.length, i = 0; i < len; ++i) {\r\n                    translation = translation.split(\"%\" + (i + 1)).join(rest[i]);\r\n                }\r\n            }\r\n            // Return the translation\r\n            return translation;\r\n        }\r\n    });\r\n    Object.defineProperty(Language.prototype, \"translateAny\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (prompt, locale) {\r\n            var rest = [];\r\n            for (var _i = 2; _i < arguments.length; _i++) {\r\n                rest[_i - 2] = arguments[_i];\r\n            }\r\n            return this.translate.apply(this, __spreadArray([prompt, locale], __read(rest), false));\r\n        }\r\n    });\r\n    Object.defineProperty(Language.prototype, \"setTranslationAny\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (prompt, translation, locale) {\r\n            var localeTarget = locale || this._root.locale;\r\n            localeTarget[prompt] = translation;\r\n        }\r\n    });\r\n    Object.defineProperty(Language.prototype, \"translateEmpty\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (prompt, locale) {\r\n            var rest = [];\r\n            for (var _i = 2; _i < arguments.length; _i++) {\r\n                rest[_i - 2] = arguments[_i];\r\n            }\r\n            var translation = this.translate.apply(this, __spreadArray([prompt, locale], __read(rest), false));\r\n            return translation == prompt ? \"\" : translation;\r\n        }\r\n    });\r\n    Object.defineProperty(Language.prototype, \"translateFunc\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (prompt, locale) {\r\n            if (this._root.locale[prompt]) {\r\n                return this._root.locale[prompt];\r\n            }\r\n            // Try to look in default language\r\n            if (locale !== this.getPrivate(\"defaultLocale\")) {\r\n                return this.translateFunc(prompt, this.getPrivate(\"defaultLocale\"));\r\n            }\r\n            // Fail - return empty function\r\n            return function () {\r\n                return \"\";\r\n            };\r\n        }\r\n    });\r\n    Object.defineProperty(Language.prototype, \"translateAll\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (list, locale) {\r\n            var _this = this;\r\n            // Translate all items in the list\r\n            if (!this.isDefault()) {\r\n                return $array.map(list, function (x) { return _this.translate(x, locale); });\r\n            }\r\n            else {\r\n                return list;\r\n            }\r\n        }\r\n    });\r\n    /**\r\n     * Returns `true` if the currently selected locale is a default locale.\r\n     *\r\n     * @return `true` if locale is default; `false` if it is not.\r\n     */\r\n    Object.defineProperty(Language.prototype, \"isDefault\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            return this.getPrivate(\"defaultLocale\") === this._root.locale;\r\n        }\r\n    });\r\n    return Language;\r\n}(Entity));\r\nexport { Language };\r\n//# sourceMappingURL=Language.js.map","import { Template } from \"./util/Template\";\r\nimport * as $order from \"./util/Order\";\r\nimport * as $array from \"./util/Array\";\r\n/**\r\n * A base class for an amCharts theme.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/themes/} for more info\r\n * @important\r\n */\r\nvar Theme = /** @class */ (function () {\r\n    function Theme(root, isReal) {\r\n        Object.defineProperty(this, \"_root\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_rules\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        this._root = root;\r\n        if (!isReal) {\r\n            throw new Error(\"You cannot use `new Class()`, instead use `Class.new()`\");\r\n        }\r\n    }\r\n    /**\r\n     * Use this method to create an instance of this class.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/getting-started/#New_element_syntax} for more info\r\n     * @param   root      Root element\r\n     * @param   settings  Settings\r\n     * @param   template  Template\r\n     * @return            Instantiated object\r\n     */\r\n    Object.defineProperty(Theme, \"new\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (root) {\r\n            var x = (new this(root, true));\r\n            x.setupDefaultRules();\r\n            return x;\r\n        }\r\n    });\r\n    Object.defineProperty(Theme.prototype, \"setupDefaultRules\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () { }\r\n    });\r\n    /**\r\n     * Looks up the rules for a specific theme class.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/themes/} for more info\r\n     * @param   themeClass Theme class\r\n     * @return             Array<IRule<A>>\r\n     */\r\n    Object.defineProperty(Theme.prototype, \"_lookupRules\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (themeClass) {\r\n            return this._rules[themeClass];\r\n        }\r\n    });\r\n    /**\r\n     * Creates a [[Template]] for specific theme class and tags.\r\n     *\r\n     * NOTE: the difference from `rule()` is that `ruleRaw()` does not do any\r\n     * type checks.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/themes/} for more info\r\n     * @param   themeClass Theme class\r\n     * @param   themeTags  Theme tags\r\n     * @return             Template\r\n     */\r\n    Object.defineProperty(Theme.prototype, \"ruleRaw\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (themeClass, themeTags) {\r\n            if (themeTags === void 0) { themeTags = []; }\r\n            var rules = this._rules[themeClass];\r\n            if (!rules) {\r\n                rules = this._rules[themeClass] = [];\r\n            }\r\n            themeTags.sort($order.compare);\r\n            var _a = $array.getSortedIndex(rules, function (x) {\r\n                var order = $order.compare(x.tags.length, themeTags.length);\r\n                if (order === 0) {\r\n                    return $order.compareArray(x.tags, themeTags, $order.compare);\r\n                }\r\n                else {\r\n                    return order;\r\n                }\r\n            }), index = _a.index, found = _a.found;\r\n            if (found) {\r\n                return rules[index].template;\r\n            }\r\n            else {\r\n                var template = Template.new({});\r\n                rules.splice(index, 0, {\r\n                    tags: themeTags,\r\n                    template: template,\r\n                });\r\n                return template;\r\n            }\r\n        }\r\n    });\r\n    /**\r\n     * Creates a [[Template]] for specific theme class and tags.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/themes/} for more info\r\n     * @param   themeClass Theme class\r\n     * @param   themeTags  Theme tags\r\n     * @return             Template\r\n     */\r\n    Object.defineProperty(Theme.prototype, \"rule\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (themeClass, themeTags) {\r\n            if (themeTags === void 0) { themeTags = []; }\r\n            return this.ruleRaw(themeClass, themeTags);\r\n        }\r\n    });\r\n    return Theme;\r\n}());\r\nexport { Theme };\r\n//# sourceMappingURL=Theme.js.map","import { __extends } from \"tslib\";\r\nimport { Theme } from \"../core/Theme\";\r\nimport { p100, p50 } from \"../core/util/Percent\";\r\nimport { Color } from \"../core/util/Color\";\r\nimport { GridLayout } from \"../core/render/GridLayout\";\r\nimport * as $ease from \"../core/util/Ease\";\r\n/**\r\n * @ignore\r\n */\r\nexport function setColor(rule, key, ic, name) {\r\n    // TODO this shouldn't use get, figure out a better way\r\n    rule.set(key, ic.get(name));\r\n    ic.on(name, function (value) {\r\n        rule.set(key, value);\r\n    });\r\n}\r\n/**\r\n * @ignore\r\n */\r\nvar DefaultTheme = /** @class */ (function (_super) {\r\n    __extends(DefaultTheme, _super);\r\n    function DefaultTheme() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    Object.defineProperty(DefaultTheme.prototype, \"setupDefaultRules\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            _super.prototype.setupDefaultRules.call(this);\r\n            var language = this._root.language;\r\n            var ic = this._root.interfaceColors;\r\n            var horizontalLayout = this._root.horizontalLayout;\r\n            var verticalLayout = this._root.verticalLayout;\r\n            var r = this.rule.bind(this);\r\n            /**\r\n             * ========================================================================\r\n             * core\r\n             * ========================================================================\r\n             */\r\n            r(\"InterfaceColors\").setAll({\r\n                stroke: Color.fromHex(0xe5e5e5),\r\n                fill: Color.fromHex(0xf3f3f3),\r\n                primaryButton: Color.fromHex(0x6794dc),\r\n                primaryButtonHover: Color.fromHex(0x6771dc),\r\n                primaryButtonDown: Color.fromHex(0x68dc76),\r\n                primaryButtonActive: Color.fromHex(0x68dc76),\r\n                primaryButtonText: Color.fromHex(0xffffff),\r\n                primaryButtonStroke: Color.fromHex(0xffffff),\r\n                secondaryButton: Color.fromHex(0xd9d9d9),\r\n                secondaryButtonHover: Color.fromHex(0xa3a3a3),\r\n                secondaryButtonDown: Color.fromHex(0x8d8d8d),\r\n                secondaryButtonActive: Color.fromHex(0xe6e6e6),\r\n                secondaryButtonText: Color.fromHex(0x000000),\r\n                secondaryButtonStroke: Color.fromHex(0xffffff),\r\n                grid: Color.fromHex(0x000000),\r\n                background: Color.fromHex(0xffffff),\r\n                alternativeBackground: Color.fromHex(0x000000),\r\n                text: Color.fromHex(0x000000),\r\n                alternativeText: Color.fromHex(0xffffff),\r\n                disabled: Color.fromHex(0xadadad),\r\n                positive: Color.fromHex(0x50b300),\r\n                negative: Color.fromHex(0xb30000)\r\n            });\r\n            {\r\n                var rule = r(\"ColorSet\");\r\n                rule.setAll({\r\n                    passOptions: {\r\n                        hue: 0.05,\r\n                        saturation: 0,\r\n                        lightness: 0\r\n                    },\r\n                    colors: [\r\n                        Color.fromHex(0x67b7dc)\r\n                    ],\r\n                    step: 1,\r\n                    //baseColor: Color.fromRGB(103, 183, 220),\r\n                    //count: 20,\r\n                    reuse: false,\r\n                    startIndex: 0\r\n                });\r\n                rule.setPrivate(\"currentStep\", 0);\r\n                rule.setPrivate(\"currentPass\", 0);\r\n            }\r\n            r(\"Entity\").setAll({\r\n                stateAnimationDuration: 0,\r\n                stateAnimationEasing: $ease.out($ease.cubic)\r\n            });\r\n            r(\"Component\").setAll({\r\n                interpolationDuration: 0,\r\n                interpolationEasing: $ease.out($ease.cubic)\r\n            });\r\n            r(\"Sprite\").setAll({\r\n                visible: true,\r\n                scale: 1,\r\n                opacity: 1,\r\n                rotation: 0,\r\n                position: \"relative\",\r\n                tooltipX: p50,\r\n                tooltipY: p50,\r\n                tooltipPosition: \"fixed\",\r\n                isMeasured: true\r\n            });\r\n            r(\"Sprite\").states.create(\"default\", { \"visible\": true, opacity: 1 });\r\n            r(\"Container\").setAll({\r\n                interactiveChildren: true,\r\n                setStateOnChildren: false\r\n            });\r\n            r(\"Graphics\").setAll({\r\n                strokeWidth: 1\r\n            });\r\n            r(\"Chart\").setAll({\r\n                width: p100,\r\n                height: p100,\r\n                interactiveChildren: false\r\n            });\r\n            /**\r\n             * ------------------------------------------------------------------------\r\n             * core: alignment\r\n             * ------------------------------------------------------------------------\r\n             */\r\n            r(\"Sprite\", [\"horizontal\", \"center\"]).setAll({\r\n                centerX: p50,\r\n                x: p50\r\n            });\r\n            r(\"Sprite\", [\"vertical\", \"center\"]).setAll({\r\n                centerY: p50,\r\n                y: p50\r\n            });\r\n            r(\"Container\", [\"horizontal\", \"layout\"]).setAll({\r\n                layout: horizontalLayout\r\n            });\r\n            r(\"Container\", [\"vertical\", \"layout\"]).setAll({\r\n                layout: verticalLayout\r\n            });\r\n            /**\r\n             * ------------------------------------------------------------------------\r\n             * core: patterns\r\n             * ------------------------------------------------------------------------\r\n             */\r\n            r(\"Pattern\").setAll({\r\n                repetition: \"repeat\",\r\n                width: 50,\r\n                height: 50,\r\n                rotation: 0,\r\n                fillOpacity: 1\r\n            });\r\n            r(\"LinePattern\").setAll({\r\n                gap: 6,\r\n                colorOpacity: 1,\r\n                width: 49,\r\n                height: 49\r\n            });\r\n            r(\"RectanglePattern\").setAll({\r\n                gap: 6,\r\n                checkered: false,\r\n                centered: true,\r\n                maxWidth: 5,\r\n                maxHeight: 5,\r\n                width: 48,\r\n                height: 48,\r\n                strokeWidth: 0\r\n            });\r\n            r(\"CirclePattern\").setAll({\r\n                gap: 5,\r\n                checkered: false,\r\n                centered: false,\r\n                radius: 3,\r\n                strokeWidth: 0,\r\n                width: 45,\r\n                height: 45\r\n            });\r\n            /**\r\n             * ------------------------------------------------------------------------\r\n             * core: gradients\r\n             * ------------------------------------------------------------------------\r\n             */\r\n            r(\"LinearGradient\").setAll({\r\n                rotation: 90\r\n            });\r\n            /**\r\n             * ------------------------------------------------------------------------\r\n             * core: Legend\r\n             * ------------------------------------------------------------------------\r\n             */\r\n            r(\"Legend\").setAll({\r\n                fillField: \"fill\",\r\n                strokeField: \"stroke\",\r\n                nameField: \"name\",\r\n                layout: GridLayout.new(this._root, {}),\r\n                layer: 30,\r\n                clickTarget: \"itemContainer\"\r\n            });\r\n            // Class: Container\r\n            r(\"Container\", [\"legend\", \"item\", \"itemcontainer\"]).setAll({\r\n                paddingLeft: 5,\r\n                paddingRight: 5,\r\n                paddingBottom: 5,\r\n                paddingTop: 5,\r\n                layout: horizontalLayout,\r\n                setStateOnChildren: true,\r\n                interactiveChildren: false,\r\n                ariaChecked: true,\r\n                focusable: true,\r\n                ariaLabel: language.translate(\"Press ENTER to toggle\"),\r\n                role: \"checkbox\"\r\n            });\r\n            {\r\n                var rule = r(\"Rectangle\", [\"legend\", \"item\", \"background\"]);\r\n                rule.setAll({\r\n                    fillOpacity: 0,\r\n                });\r\n                setColor(rule, \"fill\", ic, \"background\");\r\n            }\r\n            r(\"Container\", [\"legend\", \"marker\"]).setAll({\r\n                setStateOnChildren: true,\r\n                centerY: p50,\r\n                paddingLeft: 0,\r\n                paddingRight: 0,\r\n                paddingBottom: 0,\r\n                paddingTop: 0,\r\n                width: 18,\r\n                height: 18\r\n            });\r\n            r(\"RoundedRectangle\", [\"legend\", \"marker\", \"rectangle\"]).setAll({\r\n                width: p100,\r\n                height: p100,\r\n                cornerRadiusBL: 3,\r\n                cornerRadiusTL: 3,\r\n                cornerRadiusBR: 3,\r\n                cornerRadiusTR: 3\r\n            });\r\n            {\r\n                var rule = r(\"RoundedRectangle\", [\"legend\", \"marker\", \"rectangle\"]).states.create(\"disabled\", {});\r\n                setColor(rule, \"fill\", ic, \"disabled\");\r\n                setColor(rule, \"stroke\", ic, \"disabled\");\r\n            }\r\n            r(\"Label\", [\"legend\", \"label\"]).setAll({\r\n                centerY: p50,\r\n                marginLeft: 5,\r\n                paddingRight: 0,\r\n                paddingLeft: 0,\r\n                paddingTop: 0,\r\n                paddingBottom: 0,\r\n                populateText: true\r\n            });\r\n            {\r\n                var rule = r(\"Label\", [\"legend\", \"label\"]).states.create(\"disabled\", {});\r\n                setColor(rule, \"fill\", ic, \"disabled\");\r\n            }\r\n            r(\"Label\", [\"legend\", \"value\", \"label\"]).setAll({\r\n                centerY: p50,\r\n                marginLeft: 5,\r\n                paddingRight: 0,\r\n                paddingLeft: 0,\r\n                paddingTop: 0,\r\n                paddingBottom: 0,\r\n                width: 50,\r\n                centerX: p100,\r\n                populateText: true\r\n            });\r\n            {\r\n                var rule = r(\"Label\", [\"legend\", \"value\", \"label\"]).states.create(\"disabled\", {});\r\n                setColor(rule, \"fill\", ic, \"disabled\");\r\n            }\r\n            /**\r\n             * ------------------------------------------------------------------------\r\n             * core: HeatLegend\r\n             * ------------------------------------------------------------------------\r\n             */\r\n            r(\"HeatLegend\").setAll({\r\n                stepCount: 1\r\n            });\r\n            r(\"RoundedRectangle\", [\"heatlegend\", \"marker\"]).setAll({\r\n                cornerRadiusTR: 0,\r\n                cornerRadiusBR: 0,\r\n                cornerRadiusTL: 0,\r\n                cornerRadiusBL: 0\r\n            });\r\n            r(\"RoundedRectangle\", [\"vertical\", \"heatlegend\", \"marker\"]).setAll({\r\n                height: p100,\r\n                width: 15\r\n            });\r\n            r(\"RoundedRectangle\", [\"horizontal\", \"heatlegend\", \"marker\"]).setAll({\r\n                width: p100,\r\n                height: 15\r\n            });\r\n            r(\"HeatLegend\", [\"vertical\"]).setAll({\r\n                height: p100\r\n            });\r\n            r(\"HeatLegend\", [\"horizontal\"]).setAll({\r\n                width: p100\r\n            });\r\n            r(\"Label\", [\"heatlegend\", \"start\"]).setAll({\r\n                paddingLeft: 5,\r\n                paddingRight: 5,\r\n                paddingTop: 5,\r\n                paddingBottom: 5\r\n            });\r\n            r(\"Label\", [\"heatlegend\", \"end\"]).setAll({\r\n                paddingLeft: 5,\r\n                paddingRight: 5,\r\n                paddingTop: 5,\r\n                paddingBottom: 5\r\n            });\r\n            /**\r\n             * ------------------------------------------------------------------------\r\n             * core: Labels\r\n             * ------------------------------------------------------------------------\r\n             */\r\n            {\r\n                var rule = r(\"Label\");\r\n                rule.setAll({\r\n                    paddingTop: 8,\r\n                    paddingBottom: 8,\r\n                    paddingLeft: 10,\r\n                    paddingRight: 10,\r\n                    fontFamily: \"-apple-system, BlinkMacSystemFont, \\\"Segoe UI\\\", Roboto, Helvetica, Arial, sans-serif, \\\"Apple Color Emoji\\\", \\\"Segoe UI Emoji\\\", \\\"Segoe UI Symbol\\\"\",\r\n                    fontSize: \"1em\",\r\n                    populateText: false\r\n                });\r\n                setColor(rule, \"fill\", ic, \"text\");\r\n            }\r\n            r(\"RadialLabel\").setAll({\r\n                textType: \"regular\",\r\n                centerY: p50,\r\n                centerX: p50,\r\n                inside: false,\r\n                radius: 0,\r\n                baseRadius: p100,\r\n                orientation: \"auto\",\r\n                textAlign: \"center\"\r\n            });\r\n            /**\r\n             * ------------------------------------------------------------------------\r\n             * core: Elements and shapes\r\n             * ------------------------------------------------------------------------\r\n             */\r\n            r(\"RoundedRectangle\").setAll({\r\n                cornerRadiusTL: 8,\r\n                cornerRadiusBL: 8,\r\n                cornerRadiusTR: 8,\r\n                cornerRadiusBR: 8\r\n            });\r\n            r(\"PointedRectangle\").setAll({\r\n                pointerBaseWidth: 15,\r\n                pointerLength: 10,\r\n                cornerRadius: 8\r\n            });\r\n            r(\"Slice\").setAll({\r\n                shiftRadius: 0,\r\n                dRadius: 0,\r\n                dInnerRadius: 0\r\n            });\r\n            {\r\n                var rule = r(\"Tick\");\r\n                rule.setAll({\r\n                    strokeOpacity: .15,\r\n                    isMeasured: false,\r\n                    length: 4.5,\r\n                    position: \"absolute\"\r\n                });\r\n                setColor(rule, \"stroke\", ic, \"grid\");\r\n            }\r\n            r(\"Bullet\").setAll({\r\n                locationX: 0.5,\r\n                locationY: 0.5\r\n            });\r\n            /**\r\n             * ------------------------------------------------------------------------\r\n             * core: Tooltip\r\n             * ------------------------------------------------------------------------\r\n             */\r\n            r(\"Tooltip\").setAll({\r\n                position: \"absolute\",\r\n                getFillFromSprite: true,\r\n                getStrokeFromSprite: false,\r\n                autoTextColor: true,\r\n                paddingTop: 9,\r\n                paddingBottom: 8,\r\n                paddingLeft: 10,\r\n                paddingRight: 10,\r\n                marginBottom: 5,\r\n                pointerOrientation: \"vertical\",\r\n                centerX: p50,\r\n                centerY: p50,\r\n                animationEasing: $ease.out($ease.cubic),\r\n                exportable: false\r\n                //layer: 100\r\n            });\r\n            {\r\n                var rule = r(\"PointedRectangle\", [\"tooltip\", \"background\"]);\r\n                rule.setAll({\r\n                    strokeOpacity: 0.9,\r\n                    cornerRadius: 4,\r\n                    pointerLength: 4,\r\n                    pointerBaseWidth: 8,\r\n                    fillOpacity: 0.9,\r\n                    stroke: Color.fromHex(0xffffff)\r\n                });\r\n            }\r\n            {\r\n                var rule = r(\"Label\", [\"tooltip\"]);\r\n                rule.setAll({\r\n                    role: \"tooltip\",\r\n                    populateText: true,\r\n                    paddingRight: 0,\r\n                    paddingTop: 0,\r\n                    paddingLeft: 0,\r\n                    paddingBottom: 0\r\n                });\r\n                setColor(rule, \"fill\", ic, \"alternativeText\");\r\n            }\r\n            /**\r\n             * ------------------------------------------------------------------------\r\n             * core: Button\r\n             * ------------------------------------------------------------------------\r\n             */\r\n            r(\"Button\").setAll({\r\n                paddingTop: 8,\r\n                paddingBottom: 8,\r\n                paddingLeft: 10,\r\n                paddingRight: 10,\r\n                interactive: true,\r\n                layout: horizontalLayout,\r\n                interactiveChildren: false,\r\n                setStateOnChildren: true,\r\n                focusable: true\r\n            });\r\n            r(\"Button\").states.create(\"hover\", {});\r\n            r(\"Button\").states.create(\"down\", { stateAnimationDuration: 0 });\r\n            r(\"Button\").states.create(\"active\", {});\r\n            {\r\n                var rule = r(\"RoundedRectangle\", [\"button\", \"background\"]);\r\n                setColor(rule, \"fill\", ic, \"primaryButton\");\r\n                setColor(rule, \"stroke\", ic, \"primaryButtonStroke\");\r\n            }\r\n            {\r\n                var rule = r(\"RoundedRectangle\", [\"button\", \"background\"]).states.create(\"hover\", {});\r\n                setColor(rule, \"fill\", ic, \"primaryButtonHover\");\r\n            }\r\n            {\r\n                var rule = r(\"RoundedRectangle\", [\"button\", \"background\"]).states.create(\"down\", { stateAnimationDuration: 0 });\r\n                setColor(rule, \"fill\", ic, \"primaryButtonDown\");\r\n            }\r\n            {\r\n                var rule = r(\"RoundedRectangle\", [\"button\", \"background\"]).states.create(\"active\", {});\r\n                setColor(rule, \"fill\", ic, \"primaryButtonActive\");\r\n            }\r\n            {\r\n                var rule = r(\"Graphics\", [\"button\", \"icon\"]);\r\n                setColor(rule, \"stroke\", ic, \"primaryButtonText\");\r\n            }\r\n            {\r\n                var rule = r(\"Label\", [\"button\"]);\r\n                setColor(rule, \"fill\", ic, \"primaryButtonText\");\r\n            }\r\n            /**\r\n             * ------------------------------------------------------------------------\r\n             * charts/xy: ZoomOutButton\r\n             * ------------------------------------------------------------------------\r\n             */\r\n            r(\"Button\", [\"zoom\"]).setAll({\r\n                paddingTop: 18,\r\n                paddingBottom: 18,\r\n                paddingLeft: 12,\r\n                paddingRight: 12,\r\n                centerX: 46,\r\n                centerY: -10,\r\n                y: 0,\r\n                x: p100,\r\n                role: \"button\",\r\n                ariaLabel: language.translate(\"Zoom Out\"),\r\n                layer: 30\r\n            });\r\n            {\r\n                var rule = r(\"RoundedRectangle\", [\"background\", \"button\", \"zoom\"]);\r\n                rule.setAll({\r\n                    cornerRadiusBL: 40,\r\n                    cornerRadiusBR: 40,\r\n                    cornerRadiusTL: 40,\r\n                    cornerRadiusTR: 40\r\n                });\r\n                setColor(rule, \"fill\", ic, \"primaryButton\");\r\n            }\r\n            {\r\n                var rule = r(\"RoundedRectangle\", [\"background\", \"button\", \"zoom\"]).states.create(\"hover\", {});\r\n                setColor(rule, \"fill\", ic, \"primaryButtonHover\");\r\n            }\r\n            {\r\n                var rule = r(\"RoundedRectangle\", [\"background\", \"button\", \"zoom\"]).states.create(\"down\", { stateAnimationDuration: 0 });\r\n                setColor(rule, \"fill\", ic, \"primaryButtonDown\");\r\n            }\r\n            {\r\n                var rule = r(\"Graphics\", [\"icon\", \"button\", \"zoom\"]);\r\n                rule.setAll({\r\n                    strokeOpacity: 0.7,\r\n                    draw: function (display) {\r\n                        display.moveTo(0, 0);\r\n                        display.lineTo(12, 0);\r\n                    }\r\n                });\r\n                setColor(rule, \"stroke\", ic, \"primaryButtonText\");\r\n            }\r\n            /**\r\n             * ------------------------------------------------------------------------\r\n             * core: ResizeButton\r\n             * ------------------------------------------------------------------------\r\n             */\r\n            r(\"Button\", [\"resize\"]).setAll({\r\n                paddingTop: 9,\r\n                paddingBottom: 9,\r\n                paddingLeft: 13,\r\n                paddingRight: 13,\r\n                draggable: true,\r\n                centerX: p50,\r\n                centerY: p50,\r\n                position: \"absolute\",\r\n                role: \"slider\",\r\n                ariaValueMin: \"0\",\r\n                ariaValueMax: \"100\",\r\n                ariaLabel: language.translate(\"Use up and down arrows to move selection\")\r\n            });\r\n            {\r\n                var rule = r(\"RoundedRectangle\", [\"background\", \"resize\", \"button\"]);\r\n                rule.setAll({\r\n                    cornerRadiusBL: 40,\r\n                    cornerRadiusBR: 40,\r\n                    cornerRadiusTL: 40,\r\n                    cornerRadiusTR: 40\r\n                });\r\n                setColor(rule, \"fill\", ic, \"secondaryButton\");\r\n                setColor(rule, \"stroke\", ic, \"secondaryButtonStroke\");\r\n            }\r\n            {\r\n                var rule = r(\"RoundedRectangle\", [\"background\", \"resize\", \"button\"]).states.create(\"hover\", {});\r\n                setColor(rule, \"fill\", ic, \"secondaryButtonHover\");\r\n            }\r\n            {\r\n                var rule = r(\"RoundedRectangle\", [\"background\", \"resize\", \"button\"]).states.create(\"down\", { stateAnimationDuration: 0 });\r\n                setColor(rule, \"fill\", ic, \"secondaryButtonDown\");\r\n            }\r\n            {\r\n                var rule = r(\"Graphics\", [\"resize\", \"button\", \"icon\"]);\r\n                rule.setAll({\r\n                    strokeOpacity: 0.7,\r\n                    draw: function (display) {\r\n                        display.moveTo(0, 0);\r\n                        display.lineTo(0, 12);\r\n                        display.moveTo(4, 0);\r\n                        display.lineTo(4, 12);\r\n                    }\r\n                });\r\n                setColor(rule, \"stroke\", ic, \"secondaryButtonText\");\r\n            }\r\n            r(\"Button\", [\"resize\", \"vertical\"]).setAll({\r\n                rotation: 90,\r\n                cursorOverStyle: \"ns-resize\"\r\n            });\r\n            r(\"Button\", [\"resize\", \"horizontal\"]).setAll({\r\n                cursorOverStyle: \"ew-resize\"\r\n            });\r\n            /**\r\n             * ------------------------------------------------------------------------\r\n             * core: PlayButton\r\n             * ------------------------------------------------------------------------\r\n             */\r\n            r(\"Button\", [\"play\"]).setAll({\r\n                paddingTop: 13,\r\n                paddingBottom: 13,\r\n                paddingLeft: 14,\r\n                paddingRight: 14,\r\n                ariaLabel: language.translate(\"Play\"),\r\n                toggleKey: \"active\"\r\n            });\r\n            {\r\n                var rule = r(\"RoundedRectangle\", [\"play\", \"background\"]);\r\n                rule.setAll({\r\n                    strokeOpacity: 0.5,\r\n                    cornerRadiusBL: 100,\r\n                    cornerRadiusBR: 100,\r\n                    cornerRadiusTL: 100,\r\n                    cornerRadiusTR: 100\r\n                });\r\n                setColor(rule, \"fill\", ic, \"primaryButton\");\r\n            }\r\n            {\r\n                var rule = r(\"Graphics\", [\"play\", \"icon\"]);\r\n                rule.setAll({\r\n                    stateAnimationDuration: 0,\r\n                    dx: 1,\r\n                    draw: function (display) {\r\n                        display.moveTo(0, -5);\r\n                        display.lineTo(8, 0);\r\n                        display.lineTo(0, 5);\r\n                        display.lineTo(0, -5);\r\n                    }\r\n                });\r\n                setColor(rule, \"fill\", ic, \"primaryButtonText\");\r\n            }\r\n            r(\"Graphics\", [\"play\", \"icon\"]).states.create(\"default\", {\r\n                stateAnimationDuration: 0\r\n            });\r\n            r(\"Graphics\", [\"play\", \"icon\"]).states.create(\"active\", {\r\n                stateAnimationDuration: 0,\r\n                draw: function (display) {\r\n                    display.moveTo(-4, -5);\r\n                    display.lineTo(-1, -5);\r\n                    display.lineTo(-1, 5);\r\n                    display.lineTo(-4, 5);\r\n                    display.lineTo(-4, -5);\r\n                    display.moveTo(4, -5);\r\n                    display.lineTo(1, -5);\r\n                    display.lineTo(1, 5);\r\n                    display.lineTo(4, 5);\r\n                    display.lineTo(4, -5);\r\n                }\r\n            });\r\n            /**\r\n             * ------------------------------------------------------------------------\r\n             * core: SwitchButton\r\n             * ------------------------------------------------------------------------\r\n             */\r\n            r(\"Button\", [\"switch\"]).setAll({\r\n                paddingTop: 4,\r\n                paddingBottom: 4,\r\n                paddingLeft: 4,\r\n                paddingRight: 4,\r\n                ariaLabel: language.translate(\"Press ENTER to toggle\"),\r\n                toggleKey: \"active\",\r\n                width: 40,\r\n                height: 24,\r\n                layout: null\r\n            });\r\n            {\r\n                var rule = r(\"RoundedRectangle\", [\"switch\", \"background\"]);\r\n                rule.setAll({\r\n                    strokeOpacity: 0.5,\r\n                    cornerRadiusBL: 100,\r\n                    cornerRadiusBR: 100,\r\n                    cornerRadiusTL: 100,\r\n                    cornerRadiusTR: 100\r\n                });\r\n                setColor(rule, \"fill\", ic, \"primaryButton\");\r\n            }\r\n            {\r\n                var rule = r(\"Circle\", [\"switch\", \"icon\"]);\r\n                rule.setAll({\r\n                    radius: 8,\r\n                    centerY: 0,\r\n                    centerX: 0,\r\n                    dx: 0\r\n                });\r\n                setColor(rule, \"fill\", ic, \"primaryButtonText\");\r\n            }\r\n            r(\"Graphics\", [\"switch\", \"icon\"]).states.create(\"active\", {\r\n                dx: 16\r\n            });\r\n            /**\r\n             * ------------------------------------------------------------------------\r\n             * core: Scrollbar\r\n             * ------------------------------------------------------------------------\r\n             */\r\n            r(\"Scrollbar\").setAll({\r\n                start: 0,\r\n                end: 1,\r\n                layer: 30,\r\n                animationEasing: $ease.out($ease.cubic)\r\n            });\r\n            r(\"Scrollbar\", [\"vertical\"]).setAll({\r\n                marginRight: 13,\r\n                marginLeft: 13,\r\n                minWidth: 12,\r\n                height: p100\r\n            });\r\n            r(\"Scrollbar\", [\"horizontal\"]).setAll({\r\n                marginTop: 13,\r\n                marginBottom: 13,\r\n                minHeight: 12,\r\n                width: p100\r\n            });\r\n            this.rule(\"Button\", [\"scrollbar\"]).setAll({\r\n                exportable: false\r\n            });\r\n            {\r\n                var rule = r(\"RoundedRectangle\", [\"scrollbar\", \"main\", \"background\"]);\r\n                rule.setAll({\r\n                    cornerRadiusTL: 8,\r\n                    cornerRadiusBL: 8,\r\n                    cornerRadiusTR: 8,\r\n                    cornerRadiusBR: 8,\r\n                    fillOpacity: 0.8,\r\n                });\r\n                setColor(rule, \"fill\", ic, \"fill\");\r\n            }\r\n            {\r\n                var rule = r(\"RoundedRectangle\", [\"scrollbar\", \"thumb\"]);\r\n                rule.setAll({\r\n                    role: \"slider\",\r\n                    ariaLive: \"polite\",\r\n                    position: \"absolute\",\r\n                    draggable: true\r\n                });\r\n                setColor(rule, \"fill\", ic, \"secondaryButton\");\r\n            }\r\n            {\r\n                var rule = r(\"RoundedRectangle\", [\"scrollbar\", \"thumb\"]).states.create(\"hover\", {});\r\n                setColor(rule, \"fill\", ic, \"secondaryButtonHover\");\r\n            }\r\n            {\r\n                var rule = r(\"RoundedRectangle\", [\"scrollbar\", \"thumb\"]).states.create(\"down\", { stateAnimationDuration: 0 });\r\n                setColor(rule, \"fill\", ic, \"secondaryButtonDown\");\r\n            }\r\n            r(\"RoundedRectangle\", [\"scrollbar\", \"thumb\", \"vertical\"]).setAll({\r\n                x: p50,\r\n                width: p100,\r\n                centerX: p50,\r\n                ariaLabel: language.translate(\"Use up and down arrows to move selection\")\r\n            });\r\n            r(\"RoundedRectangle\", [\"scrollbar\", \"thumb\", \"horizontal\"]).setAll({\r\n                y: p50,\r\n                centerY: p50,\r\n                height: p100,\r\n                ariaLabel: language.translate(\"Use left and right arrows to move selection\")\r\n            });\r\n            // @todo: is this needed? used to be \"ContentScrollbar\"\r\n            // r(\"Scrollbar\", [\"content?\"]).setAll({\r\n            // \tmarginRight: 0,\r\n            // \tmarginLeft: 5,\r\n            // \tlayer: 5\r\n            // });\r\n            /**\r\n             * ========================================================================\r\n             * charts/xy\r\n             * ========================================================================\r\n             *\r\n             * This needs to be in DefaultTheme because it's the only theme that is\r\n             * automatically applied to Root, and tooltips different ancestors\r\n             * than actual charts using them.\r\n             */\r\n            {\r\n                var rule = r(\"PointedRectangle\", [\"axis\", \"tooltip\", \"background\"]);\r\n                rule.setAll({\r\n                    cornerRadius: 0\r\n                });\r\n                setColor(rule, \"fill\", ic, \"alternativeBackground\");\r\n            }\r\n            r(\"Label\", [\"axis\", \"tooltip\"]).setAll({\r\n                role: undefined\r\n            });\r\n            r(\"Label\", [\"axis\", \"tooltip\", \"y\"]).setAll({\r\n                textAlign: \"right\"\r\n            });\r\n            r(\"Label\", [\"axis\", \"tooltip\", \"y\", \"opposite\"]).setAll({\r\n                textAlign: \"left\"\r\n            });\r\n            r(\"Label\", [\"axis\", \"tooltip\", \"x\"]).setAll({\r\n                textAlign: \"center\"\r\n            });\r\n            r(\"Tooltip\", [\"categoryaxis\"]).setAll({\r\n                labelText: \"{category}\"\r\n            });\r\n            /**\r\n             * ------------------------------------------------------------------------\r\n             * Shapes\r\n             * ------------------------------------------------------------------------\r\n             */\r\n            // Class: Graphics\r\n            r(\"Star\").setAll({\r\n                spikes: 5,\r\n                innerRadius: 5,\r\n                radius: 10\r\n            });\r\n            // STOCK\r\n            r(\"Tooltip\", [\"stock\"]).setAll({\r\n                paddingTop: 6,\r\n                paddingBottom: 5,\r\n                paddingLeft: 7,\r\n                paddingRight: 7\r\n            });\r\n            r(\"PointedRectangle\", [\"tooltip\", \"stock\", \"axis\"]).setAll({\r\n                pointerLength: 0,\r\n                pointerBaseWidth: 0,\r\n                cornerRadius: 3\r\n            });\r\n            r(\"Label\", [\"tooltip\", \"stock\"]).setAll({\r\n                fontSize: \"0.8em\"\r\n            });\r\n            // resizer\r\n            r(\"SpriteResizer\").setAll({\r\n                rotationStep: 10\r\n            });\r\n            {\r\n                var rule = r(\"Container\", [\"resizer\", \"grip\"]);\r\n                rule.states.create(\"hover\", {});\r\n            }\r\n            {\r\n                var rule = r(\"RoundedRectangle\", [\"resizer\", \"grip\"]);\r\n                rule.setAll({\r\n                    strokeOpacity: 0.7,\r\n                    strokeWidth: 1,\r\n                    fillOpacity: 1,\r\n                    width: 12,\r\n                    height: 12\r\n                });\r\n                setColor(rule, \"fill\", ic, \"background\");\r\n                setColor(rule, \"stroke\", ic, \"alternativeBackground\");\r\n            }\r\n            {\r\n                var rule = r(\"RoundedRectangle\", [\"resizer\", \"grip\", \"outline\"]);\r\n                rule.setAll({\r\n                    strokeOpacity: 0,\r\n                    fillOpacity: 0,\r\n                    width: 20,\r\n                    height: 20\r\n                });\r\n                rule.states.create(\"hover\", {\r\n                    fillOpacity: 0.3\r\n                });\r\n                setColor(rule, \"fill\", ic, \"alternativeBackground\");\r\n            }\r\n            r(\"RoundedRectangle\", [\"resizer\", \"grip\", \"left\"]).setAll({\r\n                cornerRadiusBL: 0,\r\n                cornerRadiusBR: 0,\r\n                cornerRadiusTL: 0,\r\n                cornerRadiusTR: 0\r\n            });\r\n            r(\"RoundedRectangle\", [\"resizer\", \"grip\", \"right\"]).setAll({\r\n                cornerRadiusBL: 0,\r\n                cornerRadiusBR: 0,\r\n                cornerRadiusTL: 0,\r\n                cornerRadiusTR: 0\r\n            });\r\n            {\r\n                var rule = r(\"Rectangle\", [\"resizer\", \"rectangle\"]);\r\n                rule.setAll({\r\n                    strokeDasharray: [2, 2],\r\n                    strokeOpacity: 0.5,\r\n                    strokeWidth: 1\r\n                });\r\n                setColor(rule, \"stroke\", ic, \"alternativeBackground\");\r\n            }\r\n        }\r\n    });\r\n    return DefaultTheme;\r\n}(Theme));\r\nexport { DefaultTheme };\r\n//# sourceMappingURL=DefaultTheme.js.map","/**\r\n * Modified from Pixi:\r\n *\r\n * The MIT License\r\n *\r\n * Copyright (c) 2013-2017 Mathew Groves, Chad Engler\r\n *\r\n * Permission is hereby granted, free of charge, to any person obtaining a copy\r\n * of this software and associated documentation files (the \"Software\"), to deal\r\n * in the Software without restriction, including without limitation the rights\r\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n * copies of the Software, and to permit persons to whom the Software is\r\n * furnished to do so, subject to the following conditions:\r\n *\r\n * The above copyright notice and this permission notice shall be included in\r\n * all copies or substantial portions of the Software.\r\n *\r\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n * THE SOFTWARE.\r\n */\r\n/**\r\n * @ignore\r\n */\r\nvar Matrix = /** @class */ (function () {\r\n    function Matrix(a, b, c, d, tx, ty) {\r\n        if (a === void 0) { a = 1; }\r\n        if (b === void 0) { b = 0; }\r\n        if (c === void 0) { c = 0; }\r\n        if (d === void 0) { d = 1; }\r\n        if (tx === void 0) { tx = 0; }\r\n        if (ty === void 0) { ty = 0; }\r\n        Object.defineProperty(this, \"a\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"b\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"c\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"d\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"tx\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"ty\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        this.a = a;\r\n        this.b = b;\r\n        this.c = c;\r\n        this.d = d;\r\n        this.tx = tx;\r\n        this.ty = ty;\r\n    }\r\n    /**\r\n     * Sets the matrix based on all the available properties\r\n     */\r\n    Object.defineProperty(Matrix.prototype, \"setTransform\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (x, y, pivotX, pivotY, rotation, scale) {\r\n            if (scale === void 0) { scale = 1; }\r\n            this.a = Math.cos(rotation) * scale;\r\n            this.b = Math.sin(rotation) * scale;\r\n            this.c = -Math.sin(rotation) * scale;\r\n            this.d = Math.cos(rotation) * scale;\r\n            this.tx = x - ((pivotX * this.a) + (pivotY * this.c));\r\n            this.ty = y - ((pivotX * this.b) + (pivotY * this.d));\r\n        }\r\n    });\r\n    /**\r\n     * Get a new position with the current transformation applied.\r\n     * Can be used to go from a child's coordinate space to the world coordinate space. (e.g. rendering)\r\n     */\r\n    Object.defineProperty(Matrix.prototype, \"apply\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (origin) {\r\n            return {\r\n                x: (this.a * origin.x) + (this.c * origin.y) + this.tx,\r\n                y: (this.b * origin.x) + (this.d * origin.y) + this.ty\r\n            };\r\n        }\r\n    });\r\n    /**\r\n     * Get a new position with the inverse of the current transformation applied.\r\n     * Can be used to go from the world coordinate space to a child's coordinate space. (e.g. input)\r\n     */\r\n    Object.defineProperty(Matrix.prototype, \"applyInverse\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (origin) {\r\n            var id = 1 / ((this.a * this.d) + (this.c * -this.b));\r\n            return {\r\n                x: (this.d * id * origin.x) + (-this.c * id * origin.y) + (((this.ty * this.c) - (this.tx * this.d)) * id),\r\n                y: (this.a * id * origin.y) + (-this.b * id * origin.x) + (((-this.ty * this.a) + (this.tx * this.b)) * id)\r\n            };\r\n        }\r\n    });\r\n    /**\r\n     * Appends the given Matrix to this Matrix.\r\n     */\r\n    Object.defineProperty(Matrix.prototype, \"append\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (matrix) {\r\n            var a1 = this.a;\r\n            var b1 = this.b;\r\n            var c1 = this.c;\r\n            var d1 = this.d;\r\n            this.a = (matrix.a * a1) + (matrix.b * c1);\r\n            this.b = (matrix.a * b1) + (matrix.b * d1);\r\n            this.c = (matrix.c * a1) + (matrix.d * c1);\r\n            this.d = (matrix.c * b1) + (matrix.d * d1);\r\n            this.tx = (matrix.tx * a1) + (matrix.ty * c1) + this.tx;\r\n            this.ty = (matrix.tx * b1) + (matrix.ty * d1) + this.ty;\r\n        }\r\n    });\r\n    /**\r\n     * Prepends the given Matrix to this Matrix.\r\n     */\r\n    Object.defineProperty(Matrix.prototype, \"prepend\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (matrix) {\r\n            var tx1 = this.tx;\r\n            if (matrix.a !== 1 || matrix.b !== 0 || matrix.c !== 0 || matrix.d !== 1) {\r\n                var a1 = this.a;\r\n                var c1 = this.c;\r\n                this.a = (a1 * matrix.a) + (this.b * matrix.c);\r\n                this.b = (a1 * matrix.b) + (this.b * matrix.d);\r\n                this.c = (c1 * matrix.a) + (this.d * matrix.c);\r\n                this.d = (c1 * matrix.b) + (this.d * matrix.d);\r\n            }\r\n            this.tx = (tx1 * matrix.a) + (this.ty * matrix.c) + matrix.tx;\r\n            this.ty = (tx1 * matrix.b) + (this.ty * matrix.d) + matrix.ty;\r\n        }\r\n    });\r\n    /**\r\n     * Copies the other matrix's properties into this matrix\r\n     */\r\n    Object.defineProperty(Matrix.prototype, \"copyFrom\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (matrix) {\r\n            this.a = matrix.a;\r\n            this.b = matrix.b;\r\n            this.c = matrix.c;\r\n            this.d = matrix.d;\r\n            this.tx = matrix.tx;\r\n            this.ty = matrix.ty;\r\n        }\r\n    });\r\n    return Matrix;\r\n}());\r\nexport { Matrix };\r\n//# sourceMappingURL=Matrix.js.map","var _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar TAU = Math.PI * 2;\n\nvar mapToEllipse = function mapToEllipse(_ref, rx, ry, cosphi, sinphi, centerx, centery) {\n  var x = _ref.x,\n      y = _ref.y;\n\n  x *= rx;\n  y *= ry;\n\n  var xp = cosphi * x - sinphi * y;\n  var yp = sinphi * x + cosphi * y;\n\n  return {\n    x: xp + centerx,\n    y: yp + centery\n  };\n};\n\nvar approxUnitArc = function approxUnitArc(ang1, ang2) {\n  // If 90 degree circular arc, use a constant\n  // as derived from http://spencermortensen.com/articles/bezier-circle\n  var a = ang2 === 1.5707963267948966 ? 0.551915024494 : ang2 === -1.5707963267948966 ? -0.551915024494 : 4 / 3 * Math.tan(ang2 / 4);\n\n  var x1 = Math.cos(ang1);\n  var y1 = Math.sin(ang1);\n  var x2 = Math.cos(ang1 + ang2);\n  var y2 = Math.sin(ang1 + ang2);\n\n  return [{\n    x: x1 - y1 * a,\n    y: y1 + x1 * a\n  }, {\n    x: x2 + y2 * a,\n    y: y2 - x2 * a\n  }, {\n    x: x2,\n    y: y2\n  }];\n};\n\nvar vectorAngle = function vectorAngle(ux, uy, vx, vy) {\n  var sign = ux * vy - uy * vx < 0 ? -1 : 1;\n\n  var dot = ux * vx + uy * vy;\n\n  if (dot > 1) {\n    dot = 1;\n  }\n\n  if (dot < -1) {\n    dot = -1;\n  }\n\n  return sign * Math.acos(dot);\n};\n\nvar getArcCenter = function getArcCenter(px, py, cx, cy, rx, ry, largeArcFlag, sweepFlag, sinphi, cosphi, pxp, pyp) {\n  var rxsq = Math.pow(rx, 2);\n  var rysq = Math.pow(ry, 2);\n  var pxpsq = Math.pow(pxp, 2);\n  var pypsq = Math.pow(pyp, 2);\n\n  var radicant = rxsq * rysq - rxsq * pypsq - rysq * pxpsq;\n\n  if (radicant < 0) {\n    radicant = 0;\n  }\n\n  radicant /= rxsq * pypsq + rysq * pxpsq;\n  radicant = Math.sqrt(radicant) * (largeArcFlag === sweepFlag ? -1 : 1);\n\n  var centerxp = radicant * rx / ry * pyp;\n  var centeryp = radicant * -ry / rx * pxp;\n\n  var centerx = cosphi * centerxp - sinphi * centeryp + (px + cx) / 2;\n  var centery = sinphi * centerxp + cosphi * centeryp + (py + cy) / 2;\n\n  var vx1 = (pxp - centerxp) / rx;\n  var vy1 = (pyp - centeryp) / ry;\n  var vx2 = (-pxp - centerxp) / rx;\n  var vy2 = (-pyp - centeryp) / ry;\n\n  var ang1 = vectorAngle(1, 0, vx1, vy1);\n  var ang2 = vectorAngle(vx1, vy1, vx2, vy2);\n\n  if (sweepFlag === 0 && ang2 > 0) {\n    ang2 -= TAU;\n  }\n\n  if (sweepFlag === 1 && ang2 < 0) {\n    ang2 += TAU;\n  }\n\n  return [centerx, centery, ang1, ang2];\n};\n\nvar arcToBezier = function arcToBezier(_ref2) {\n  var px = _ref2.px,\n      py = _ref2.py,\n      cx = _ref2.cx,\n      cy = _ref2.cy,\n      rx = _ref2.rx,\n      ry = _ref2.ry,\n      _ref2$xAxisRotation = _ref2.xAxisRotation,\n      xAxisRotation = _ref2$xAxisRotation === undefined ? 0 : _ref2$xAxisRotation,\n      _ref2$largeArcFlag = _ref2.largeArcFlag,\n      largeArcFlag = _ref2$largeArcFlag === undefined ? 0 : _ref2$largeArcFlag,\n      _ref2$sweepFlag = _ref2.sweepFlag,\n      sweepFlag = _ref2$sweepFlag === undefined ? 0 : _ref2$sweepFlag;\n\n  var curves = [];\n\n  if (rx === 0 || ry === 0) {\n    return [];\n  }\n\n  var sinphi = Math.sin(xAxisRotation * TAU / 360);\n  var cosphi = Math.cos(xAxisRotation * TAU / 360);\n\n  var pxp = cosphi * (px - cx) / 2 + sinphi * (py - cy) / 2;\n  var pyp = -sinphi * (px - cx) / 2 + cosphi * (py - cy) / 2;\n\n  if (pxp === 0 && pyp === 0) {\n    return [];\n  }\n\n  rx = Math.abs(rx);\n  ry = Math.abs(ry);\n\n  var lambda = Math.pow(pxp, 2) / Math.pow(rx, 2) + Math.pow(pyp, 2) / Math.pow(ry, 2);\n\n  if (lambda > 1) {\n    rx *= Math.sqrt(lambda);\n    ry *= Math.sqrt(lambda);\n  }\n\n  var _getArcCenter = getArcCenter(px, py, cx, cy, rx, ry, largeArcFlag, sweepFlag, sinphi, cosphi, pxp, pyp),\n      _getArcCenter2 = _slicedToArray(_getArcCenter, 4),\n      centerx = _getArcCenter2[0],\n      centery = _getArcCenter2[1],\n      ang1 = _getArcCenter2[2],\n      ang2 = _getArcCenter2[3];\n\n  // If 'ang2' == 90.0000000001, then `ratio` will evaluate to\n  // 1.0000000001. This causes `segments` to be greater than one, which is an\n  // unecessary split, and adds extra points to the bezier curve. To alleviate\n  // this issue, we round to 1.0 when the ratio is close to 1.0.\n\n\n  var ratio = Math.abs(ang2) / (TAU / 4);\n  if (Math.abs(1.0 - ratio) < 0.0000001) {\n    ratio = 1.0;\n  }\n\n  var segments = Math.max(Math.ceil(ratio), 1);\n\n  ang2 /= segments;\n\n  for (var i = 0; i < segments; i++) {\n    curves.push(approxUnitArc(ang1, ang2));\n    ang1 += ang2;\n  }\n\n  return curves.map(function (curve) {\n    var _mapToEllipse = mapToEllipse(curve[0], rx, ry, cosphi, sinphi, centerx, centery),\n        x1 = _mapToEllipse.x,\n        y1 = _mapToEllipse.y;\n\n    var _mapToEllipse2 = mapToEllipse(curve[1], rx, ry, cosphi, sinphi, centerx, centery),\n        x2 = _mapToEllipse2.x,\n        y2 = _mapToEllipse2.y;\n\n    var _mapToEllipse3 = mapToEllipse(curve[2], rx, ry, cosphi, sinphi, centerx, centery),\n        x = _mapToEllipse3.x,\n        y = _mapToEllipse3.y;\n\n    return { x1: x1, y1: y1, x2: x2, y2: y2, x: x, y: y };\n  });\n};\n\nexport default arcToBezier;","/** @ignore */ /** */\r\nimport { __extends } from \"tslib\";\r\nimport { BlendMode } from \"./Renderer\";\r\nimport { Color } from \"../../util/Color\";\r\nimport { Matrix } from \"../../util/Matrix\";\r\nimport { Percent, percent } from \"../../util/Percent\";\r\n//import { Throttler } from \"../../util/Throttler\";\r\nimport { ArrayDisposer, Disposer, DisposerClass, CounterDisposer, MultiDisposer } from \"../../util/Disposer\";\r\nimport { TextFormatter } from \"../../util/TextFormatter\";\r\nimport * as $utils from \"../../util/Utils\";\r\nimport * as $array from \"../../util/Array\";\r\nimport * as $object from \"../../util/Object\";\r\nimport * as $type from \"../../util/Type\";\r\nimport * as $math from \"../../util/Math\";\r\nimport arcToBezier from 'svg-arc-to-cubic-bezier';\r\n/**\r\n * @ignore\r\n */\r\nfunction checkArgs(name, actual, expected) {\r\n    if (actual !== expected) {\r\n        throw new Error(\"Required \" + expected + \" arguments for \" + name + \" but got \" + actual);\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nfunction checkMinArgs(name, actual, expected) {\r\n    if (actual < expected) {\r\n        throw new Error(\"Required at least \" + expected + \" arguments for \" + name + \" but got \" + actual);\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nfunction checkEvenArgs(name, actual, expected) {\r\n    checkMinArgs(name, actual, expected);\r\n    if ((actual % expected) !== 0) {\r\n        throw new Error(\"Arguments for \" + name + \" must be in pairs of \" + expected);\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n * This splits the flag so that way 0017 will be processed as 0 0 17\r\n *\r\n * This is important for weird paths like `M17 5A1 1 0 0017 30 1 1 0 0017 5`\r\n */\r\nfunction splitArcFlags(args) {\r\n    for (var i = 0; i < args.length; i += 7) {\r\n        var index = i + 3;\r\n        var flag = args[index];\r\n        if (flag.length > 1) {\r\n            var a = /^([01])([01])(.*)$/.exec(flag);\r\n            if (a !== null) {\r\n                args.splice(index, 0, a[1]);\r\n                ++index;\r\n                args.splice(index, 0, a[2]);\r\n                ++index;\r\n                if (a[3].length > 0) {\r\n                    args[index] = a[3];\r\n                }\r\n                else {\r\n                    args.splice(index, 1);\r\n                }\r\n            }\r\n        }\r\n        ++index;\r\n        flag = args[index];\r\n        if (flag.length > 1) {\r\n            var a = /^([01])(.+)$/.exec(flag);\r\n            if (a !== null) {\r\n                args.splice(index, 0, a[1]);\r\n                ++index;\r\n                args[index] = a[2];\r\n            }\r\n        }\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nfunction assertBinary(value) {\r\n    if (value === 0 || value === 1) {\r\n        return value;\r\n    }\r\n    else {\r\n        throw new Error(\"Flag must be 0 or 1\");\r\n    }\r\n}\r\n//  1 -> 0xffffff * (2 / 2)\r\n//  2 -> 0xffffff * (1 / 2)\r\n//\r\n//  3 -> 0xffffff * (3 / 4)\r\n//  4 -> 0xffffff * (1 / 4)\r\n//\r\n//  5 -> 0xffffff * (7 / 8)\r\n//  6 -> 0xffffff * (5 / 8)\r\n//  7 -> 0xffffff * (3 / 8)\r\n//  8 -> 0xffffff * (1 / 8)\r\n//\r\n//  9 -> 0xffffff * (15 / 16)\r\n// 10 -> 0xffffff * (13 / 16)\r\n// 11 -> 0xffffff * (11 / 16)\r\n// 12 -> 0xffffff *  (9 / 16)\r\n// 13 -> 0xffffff *  (7 / 16)\r\n// 14 -> 0xffffff *  (5 / 16)\r\n// 15 -> 0xffffff *  (3 / 16)\r\n// 16 -> 0xffffff *  (1 / 16)\r\n// @todo remove this old color distribution algo if the new one pans out\r\n// function distributeIdBAK(id: number): number {\r\n// \tif (id === 1) {\r\n// \t\treturn 0x000001;\r\n// \t} else {\r\n// \t\t// Finds the closest power of 2\r\n// \t\tconst base = Math.pow(2, Math.ceil(Math.log(id) / Math.log(2)));\r\n// \t\t// Translates the id into an odd fraction index\r\n// \t\tconst index = ((base - id) * 2) + 1;\r\n// \t\t// TODO is Math.round correct ?\r\n// \t\treturn Math.round(0xffffff * (index / base));\r\n// \t}\r\n// }\r\n/**\r\n * Function by smeans:\r\n * https://lowcode.life/generating-unique-contrasting-colors-in-javascript/\r\n * @ignore\r\n */\r\nfunction distributeId(id) {\r\n    var rgb = [0, 0, 0];\r\n    for (var i = 0; i < 24; i++) {\r\n        rgb[i % 3] <<= 1;\r\n        rgb[i % 3] |= id & 0x01;\r\n        id >>= 1;\r\n    }\r\n    return (rgb[2] | 0) + (rgb[1] << 8) + (rgb[0] << 16);\r\n}\r\n/**\r\n * @ignore\r\n */\r\nfunction eachTargets(hitTarget, f) {\r\n    for (;;) {\r\n        if (hitTarget.interactive) {\r\n            if (!f(hitTarget)) {\r\n                break;\r\n            }\r\n        }\r\n        if (hitTarget._parent) {\r\n            hitTarget = hitTarget._parent;\r\n        }\r\n        else {\r\n            break;\r\n        }\r\n    }\r\n}\r\n// TODO feature detection for mouse/touch/pointer\r\n/**\r\n * @ignore\r\n */\r\nfunction onPointerEvent(element, name, f) {\r\n    return $utils.addEventListener(element, $utils.getRendererEvent(name), function (event) {\r\n        var touches = event.touches;\r\n        if (touches) {\r\n            if (touches.length == 0) {\r\n                touches = event.changedTouches;\r\n            }\r\n            f($array.copy(touches));\r\n        }\r\n        else {\r\n            f([event]);\r\n        }\r\n    });\r\n}\r\n/**\r\n * @ignore\r\n */\r\nfunction isTainted(image) {\r\n    var canvas = document.createElement(\"canvas\");\r\n    canvas.width = 1;\r\n    canvas.height = 1;\r\n    var context = canvas.getContext(\"2d\", { willReadFrequently: true });\r\n    context.drawImage(image, 0, 0, 1, 1);\r\n    try {\r\n        context.getImageData(0, 0, 1, 1);\r\n        return false;\r\n    }\r\n    catch (err) {\r\n        console.warn(\"Image \\\"\" + image.src + \"\\\" is loaded from different host and is not covered by CORS policy. For more information about the implications read here: https://www.amcharts.com/docs/v5/concepts/cors\");\r\n        return true;\r\n    }\r\n}\r\n/**\r\n * This is needed to workaround a bug in iOS which causes it to not GC canvas elements.\r\n *\r\n * @ignore\r\n */\r\nfunction clearCanvas(view) {\r\n    view.width = 0;\r\n    view.height = 0;\r\n    view.style.width = \"0px\";\r\n    view.style.height = \"0px\";\r\n}\r\n/**\r\n * @ignore\r\n */\r\nvar CanvasPivot = /** @class */ (function () {\r\n    function CanvasPivot() {\r\n        Object.defineProperty(this, \"_x\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"_y\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n    }\r\n    Object.defineProperty(CanvasPivot.prototype, \"x\", {\r\n        get: function () {\r\n            return this._x;\r\n        },\r\n        set: function (value) {\r\n            this._x = value;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(CanvasPivot.prototype, \"y\", {\r\n        get: function () {\r\n            return this._y;\r\n        },\r\n        set: function (value) {\r\n            this._y = value;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    return CanvasPivot;\r\n}());\r\nexport { CanvasPivot };\r\n/**\r\n * @ignore\r\n */\r\nvar CanvasDisplayObject = /** @class */ (function (_super) {\r\n    __extends(CanvasDisplayObject, _super);\r\n    function CanvasDisplayObject(renderer) {\r\n        var _this = _super.call(this) || this;\r\n        Object.defineProperty(_this, \"_layer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(_this, \"mask\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: null\r\n        });\r\n        Object.defineProperty(_this, \"visible\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: true\r\n        });\r\n        Object.defineProperty(_this, \"exportable\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: true\r\n        });\r\n        Object.defineProperty(_this, \"interactive\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(_this, \"inactive\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(_this, \"wheelable\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(_this, \"cancelTouch\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(_this, \"isMeasured\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(_this, \"buttonMode\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(_this, \"alpha\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 1\r\n        });\r\n        Object.defineProperty(_this, \"compoundAlpha\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 1\r\n        });\r\n        Object.defineProperty(_this, \"angle\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(_this, \"scale\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 1\r\n        });\r\n        Object.defineProperty(_this, \"x\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(_this, \"y\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(_this, \"pivot\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: new CanvasPivot()\r\n        });\r\n        Object.defineProperty(_this, \"filter\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(_this, \"cursorOverStyle\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(_this, \"_replacedCursorStyle\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(_this, \"_localMatrix\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: new Matrix()\r\n        });\r\n        Object.defineProperty(_this, \"_matrix\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: new Matrix()\r\n        });\r\n        // TODO can this be replaced with _localMatrix ?\r\n        Object.defineProperty(_this, \"_uMatrix\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: new Matrix()\r\n        });\r\n        Object.defineProperty(_this, \"_renderer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(_this, \"_parent\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(_this, \"_localBounds\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(_this, \"_bounds\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(_this, \"_colorId\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        _this._renderer = renderer;\r\n        return _this;\r\n    }\r\n    Object.defineProperty(CanvasDisplayObject.prototype, \"_dispose\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            this._renderer._removeObject(this);\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasDisplayObject.prototype, \"getCanvas\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            return this.getLayer().view;\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasDisplayObject.prototype, \"getLayer\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            var self = this;\r\n            for (;;) {\r\n                if (self._layer) {\r\n                    return self._layer;\r\n                }\r\n                else if (self._parent) {\r\n                    self = self._parent;\r\n                }\r\n                else {\r\n                    return this._renderer.defaultLayer;\r\n                }\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasDisplayObject.prototype, \"setLayer\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (order, margin) {\r\n            if (order == null) {\r\n                this._layer = undefined;\r\n            }\r\n            else {\r\n                var visible = true;\r\n                this._layer = this._renderer.getLayer(order, visible);\r\n                this._layer.visible = visible;\r\n                this._layer.margin = margin;\r\n                if (margin) {\r\n                    $utils.setInteractive(this._layer.view, false);\r\n                }\r\n                if (this._parent) {\r\n                    this._parent.registerChildLayer(this._layer);\r\n                }\r\n                this._renderer.resizeLayer(this._layer);\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasDisplayObject.prototype, \"markDirtyLayer\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            this.getLayer().dirty = true;\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasDisplayObject.prototype, \"clear\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            this.invalidateBounds();\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasDisplayObject.prototype, \"invalidateBounds\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            this._localBounds = undefined;\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasDisplayObject.prototype, \"_addBounds\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (_bounds) { }\r\n    });\r\n    Object.defineProperty(CanvasDisplayObject.prototype, \"_getColorId\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            if (this._colorId === undefined) {\r\n                this._colorId = this._renderer.paintId(this);\r\n            }\r\n            return this._colorId;\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasDisplayObject.prototype, \"_isInteractive\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            return this.inactive == false && (this.interactive || this._renderer._forceInteractive > 0);\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasDisplayObject.prototype, \"_isInteractiveMask\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            return this._isInteractive();\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasDisplayObject.prototype, \"contains\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (child) {\r\n            for (;;) {\r\n                if (child === this) {\r\n                    return true;\r\n                }\r\n                else if (child._parent) {\r\n                    child = child._parent;\r\n                }\r\n                else {\r\n                    return false;\r\n                }\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasDisplayObject.prototype, \"toGlobal\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (point) {\r\n            return this._matrix.apply(point);\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasDisplayObject.prototype, \"toLocal\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (point) {\r\n            return this._matrix.applyInverse(point);\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasDisplayObject.prototype, \"getLocalMatrix\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            this._uMatrix.setTransform(0, 0, this.pivot.x, this.pivot.y, this.angle * Math.PI / 180, this.scale);\r\n            return this._uMatrix;\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasDisplayObject.prototype, \"getLocalBounds\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            if (!this._localBounds) {\r\n                var bn = 10000000;\r\n                this._localBounds = {\r\n                    left: bn,\r\n                    top: bn,\r\n                    right: -bn,\r\n                    bottom: -bn\r\n                };\r\n                this._addBounds(this._localBounds);\r\n            }\r\n            return this._localBounds;\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasDisplayObject.prototype, \"getAdjustedBounds\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (bounds) {\r\n            this._setMatrix();\r\n            var matrix = this.getLocalMatrix();\r\n            var p0 = matrix.apply({ x: bounds.left, y: bounds.top });\r\n            var p1 = matrix.apply({ x: bounds.right, y: bounds.top });\r\n            var p2 = matrix.apply({ x: bounds.right, y: bounds.bottom });\r\n            var p3 = matrix.apply({ x: bounds.left, y: bounds.bottom });\r\n            return {\r\n                left: Math.min(p0.x, p1.x, p2.x, p3.x),\r\n                top: Math.min(p0.y, p1.y, p2.y, p3.y),\r\n                right: Math.max(p0.x, p1.x, p2.x, p3.x),\r\n                bottom: Math.max(p0.y, p1.y, p2.y, p3.y)\r\n            };\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasDisplayObject.prototype, \"on\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (key, callback, context) {\r\n            if (this.interactive) {\r\n                return this._renderer._addEvent(this, key, callback, context);\r\n            }\r\n            else {\r\n                return new Disposer(function () { });\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasDisplayObject.prototype, \"_setMatrix\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            // TODO only calculate this if it has actually changed\r\n            this._localMatrix.setTransform(this.x, this.y, this.pivot.x, this.pivot.y, \r\n            // Converts degrees to radians\r\n            this.angle * Math.PI / 180, this.scale);\r\n            this._matrix.copyFrom(this._localMatrix);\r\n            if (this._parent) {\r\n                // TODO only calculate this if it has actually changed\r\n                this._matrix.prepend(this._parent._matrix);\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasDisplayObject.prototype, \"_transform\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (context, resolution) {\r\n            var m = this._matrix;\r\n            context.setTransform(m.a * resolution, m.b * resolution, m.c * resolution, m.d * resolution, m.tx * resolution, m.ty * resolution);\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasDisplayObject.prototype, \"_transformMargin\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (context, resolution, margin) {\r\n            var m = this._matrix;\r\n            context.setTransform(m.a * resolution, m.b * resolution, m.c * resolution, m.d * resolution, (m.tx + margin.left) * resolution, (m.ty + margin.top) * resolution);\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasDisplayObject.prototype, \"_transformLayer\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (context, resolution, layer) {\r\n            if (layer.margin) {\r\n                this._transformMargin(context, layer.scale || resolution, layer.margin);\r\n            }\r\n            else {\r\n                this._transform(context, layer.scale || resolution);\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasDisplayObject.prototype, \"render\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (parentLayer) {\r\n            var _this = this;\r\n            if (this.visible && (this.exportable !== false || !this._renderer._omitTainted)) {\r\n                this._setMatrix();\r\n                var resolution_1 = this._renderer.resolution;\r\n                var layers = this._renderer.layers;\r\n                var ghostContext = this._renderer._ghostContext;\r\n                var mask_1 = this.mask;\r\n                if (mask_1) {\r\n                    mask_1._setMatrix();\r\n                }\r\n                // TODO improve this\r\n                $array.each(layers, function (layer) {\r\n                    if (layer) {\r\n                        var context = layer.context;\r\n                        context.save();\r\n                        // We must apply the mask before we transform the element\r\n                        if (mask_1) {\r\n                            mask_1._transformLayer(context, resolution_1, layer);\r\n                            mask_1._runPath(context);\r\n                            context.clip();\r\n                        }\r\n                        context.globalAlpha = _this.compoundAlpha * _this.alpha;\r\n                        _this._transformLayer(context, resolution_1, layer);\r\n                        if (_this.filter) {\r\n                            context.filter = _this.filter;\r\n                        }\r\n                    }\r\n                });\r\n                ghostContext.save();\r\n                // We must apply the mask before we transform the element\r\n                if (mask_1 && this._isInteractiveMask()) {\r\n                    mask_1._transform(ghostContext, resolution_1);\r\n                    mask_1._runPath(ghostContext);\r\n                    ghostContext.clip();\r\n                }\r\n                this._transform(ghostContext, resolution_1);\r\n                this._render(parentLayer);\r\n                ghostContext.restore();\r\n                $array.each(layers, function (layer) {\r\n                    if (layer) {\r\n                        layer.context.restore();\r\n                    }\r\n                });\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasDisplayObject.prototype, \"_render\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (parentLayer) {\r\n            if (this.exportable === false) {\r\n                var layer = this._layer || parentLayer;\r\n                layer.tainted = true;\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasDisplayObject.prototype, \"hovering\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            return this._renderer._hovering.has(this);\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasDisplayObject.prototype, \"dragging\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            var _this = this;\r\n            return this._renderer._dragging.some(function (x) { return x.value === _this; });\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasDisplayObject.prototype, \"dispose\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            this.getLayer().dirty = true;\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasDisplayObject.prototype, \"shouldCancelTouch\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            var renderer = this._renderer;\r\n            if (renderer.tapToActivate && !renderer._touchActive) {\r\n                return false;\r\n            }\r\n            if (this.cancelTouch) {\r\n                return true;\r\n            }\r\n            else if (this._parent) {\r\n                return this._parent.shouldCancelTouch();\r\n            }\r\n            return false;\r\n        }\r\n    });\r\n    return CanvasDisplayObject;\r\n}(DisposerClass));\r\nexport { CanvasDisplayObject };\r\n/**\r\n * @ignore\r\n */\r\nvar CanvasContainer = /** @class */ (function (_super) {\r\n    __extends(CanvasContainer, _super);\r\n    function CanvasContainer() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        Object.defineProperty(_this, \"interactiveChildren\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: true\r\n        });\r\n        Object.defineProperty(_this, \"_childLayers\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(_this, \"_children\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        return _this;\r\n    }\r\n    Object.defineProperty(CanvasContainer.prototype, \"_isInteractiveMask\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            return this.interactiveChildren || _super.prototype._isInteractiveMask.call(this);\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasContainer.prototype, \"addChild\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (child) {\r\n            child._parent = this;\r\n            this._children.push(child);\r\n            if (child._layer) {\r\n                this.registerChildLayer(child._layer);\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasContainer.prototype, \"addChildAt\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (child, index) {\r\n            child._parent = this;\r\n            this._children.splice(index, 0, child);\r\n            if (child._layer) {\r\n                this.registerChildLayer(child._layer);\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasContainer.prototype, \"removeChild\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (child) {\r\n            child._parent = undefined;\r\n            $array.removeFirst(this._children, child);\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasContainer.prototype, \"_render\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (parentLayer) {\r\n            var _this = this;\r\n            _super.prototype._render.call(this, parentLayer);\r\n            var renderer = this._renderer;\r\n            if (this.interactive && this.interactiveChildren) {\r\n                ++renderer._forceInteractive;\r\n            }\r\n            var layer = this._layer || parentLayer;\r\n            $array.each(this._children, function (child) {\r\n                child.compoundAlpha = _this.compoundAlpha * _this.alpha;\r\n                child.render(layer);\r\n            });\r\n            if (this.interactive && this.interactiveChildren) {\r\n                --renderer._forceInteractive;\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasContainer.prototype, \"registerChildLayer\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (layer) {\r\n            if (!this._childLayers) {\r\n                this._childLayers = [];\r\n            }\r\n            $array.pushOne(this._childLayers, layer);\r\n            if (this._parent) {\r\n                this._parent.registerChildLayer(layer);\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasContainer.prototype, \"markDirtyLayer\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (deep) {\r\n            if (deep === void 0) { deep = false; }\r\n            _super.prototype.markDirtyLayer.call(this);\r\n            if (deep && this._childLayers) {\r\n                $array.each(this._childLayers, function (layer) { return layer.dirty = true; });\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasContainer.prototype, \"dispose\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            _super.prototype.dispose.call(this);\r\n            if (this._childLayers) {\r\n                $array.each(this._childLayers, function (layer) {\r\n                    layer.dirty = true;\r\n                });\r\n            }\r\n        }\r\n    });\r\n    return CanvasContainer;\r\n}(CanvasDisplayObject));\r\nexport { CanvasContainer };\r\n/**\r\n * @ignore\r\n */\r\nfunction setPoint(bounds, point) {\r\n    bounds.left = Math.min(bounds.left, point.x);\r\n    bounds.top = Math.min(bounds.top, point.y);\r\n    bounds.right = Math.max(bounds.right, point.x);\r\n    bounds.bottom = Math.max(bounds.bottom, point.y);\r\n}\r\n/**\r\n * @ignore\r\n */\r\nvar Op = /** @class */ (function () {\r\n    function Op() {\r\n    }\r\n    Object.defineProperty(Op.prototype, \"colorize\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (_context, _forceColor) { }\r\n    });\r\n    Object.defineProperty(Op.prototype, \"path\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (_context) { }\r\n    });\r\n    Object.defineProperty(Op.prototype, \"addBounds\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (_bounds) { }\r\n    });\r\n    return Op;\r\n}());\r\n/**\r\n * @ignore\r\n */\r\nvar BeginFill = /** @class */ (function (_super) {\r\n    __extends(BeginFill, _super);\r\n    function BeginFill(color) {\r\n        var _this = _super.call(this) || this;\r\n        Object.defineProperty(_this, \"color\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: color\r\n        });\r\n        return _this;\r\n    }\r\n    Object.defineProperty(BeginFill.prototype, \"colorize\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (context, forceColor) {\r\n            if (forceColor !== undefined) {\r\n                context.fillStyle = forceColor;\r\n            }\r\n            else {\r\n                context.fillStyle = this.color;\r\n            }\r\n        }\r\n    });\r\n    return BeginFill;\r\n}(Op));\r\n/**\r\n * @ignore\r\n */\r\nvar EndFill = /** @class */ (function (_super) {\r\n    __extends(EndFill, _super);\r\n    function EndFill(clearShadow) {\r\n        var _this = _super.call(this) || this;\r\n        Object.defineProperty(_this, \"clearShadow\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: clearShadow\r\n        });\r\n        return _this;\r\n    }\r\n    Object.defineProperty(EndFill.prototype, \"colorize\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (context, _forceColor) {\r\n            context.fill();\r\n            if (this.clearShadow) {\r\n                context.shadowColor = \"\";\r\n                context.shadowBlur = 0;\r\n                context.shadowOffsetX = 0;\r\n                context.shadowOffsetY = 0;\r\n            }\r\n        }\r\n    });\r\n    return EndFill;\r\n}(Op));\r\n/**\r\n * @ignore\r\n */\r\nvar EndStroke = /** @class */ (function (_super) {\r\n    __extends(EndStroke, _super);\r\n    function EndStroke() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    Object.defineProperty(EndStroke.prototype, \"colorize\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (context, _forceColor) {\r\n            context.stroke();\r\n        }\r\n    });\r\n    return EndStroke;\r\n}(Op));\r\n/**\r\n * @ignore\r\n */\r\nvar LineStyle = /** @class */ (function (_super) {\r\n    __extends(LineStyle, _super);\r\n    function LineStyle(width, color, lineJoin) {\r\n        var _this = _super.call(this) || this;\r\n        Object.defineProperty(_this, \"width\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: width\r\n        });\r\n        Object.defineProperty(_this, \"color\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: color\r\n        });\r\n        Object.defineProperty(_this, \"lineJoin\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: lineJoin\r\n        });\r\n        return _this;\r\n    }\r\n    Object.defineProperty(LineStyle.prototype, \"colorize\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (context, forceColor) {\r\n            if (forceColor !== undefined) {\r\n                context.strokeStyle = forceColor;\r\n            }\r\n            else {\r\n                context.strokeStyle = this.color;\r\n            }\r\n            context.lineWidth = this.width;\r\n            if (this.lineJoin) {\r\n                context.lineJoin = this.lineJoin;\r\n            }\r\n        }\r\n    });\r\n    return LineStyle;\r\n}(Op));\r\n/**\r\n * @ignore\r\n */\r\nvar LineDash = /** @class */ (function (_super) {\r\n    __extends(LineDash, _super);\r\n    function LineDash(dash) {\r\n        var _this = _super.call(this) || this;\r\n        Object.defineProperty(_this, \"dash\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: dash\r\n        });\r\n        return _this;\r\n    }\r\n    Object.defineProperty(LineDash.prototype, \"colorize\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (context, _forceColor) {\r\n            context.setLineDash(this.dash);\r\n        }\r\n    });\r\n    return LineDash;\r\n}(Op));\r\n/**\r\n * @ignore\r\n */\r\nvar LineDashOffset = /** @class */ (function (_super) {\r\n    __extends(LineDashOffset, _super);\r\n    function LineDashOffset(dashOffset) {\r\n        var _this = _super.call(this) || this;\r\n        Object.defineProperty(_this, \"dashOffset\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: dashOffset\r\n        });\r\n        return _this;\r\n    }\r\n    Object.defineProperty(LineDashOffset.prototype, \"colorize\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (context, _forceColor) {\r\n            context.lineDashOffset = this.dashOffset;\r\n        }\r\n    });\r\n    return LineDashOffset;\r\n}(Op));\r\n/**\r\n * @ignore\r\n */\r\nvar DrawRect = /** @class */ (function (_super) {\r\n    __extends(DrawRect, _super);\r\n    function DrawRect(x, y, width, height) {\r\n        var _this = _super.call(this) || this;\r\n        Object.defineProperty(_this, \"x\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: x\r\n        });\r\n        Object.defineProperty(_this, \"y\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: y\r\n        });\r\n        Object.defineProperty(_this, \"width\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: width\r\n        });\r\n        Object.defineProperty(_this, \"height\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: height\r\n        });\r\n        return _this;\r\n    }\r\n    Object.defineProperty(DrawRect.prototype, \"path\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (context) {\r\n            context.rect(this.x, this.y, this.width, this.height);\r\n        }\r\n    });\r\n    Object.defineProperty(DrawRect.prototype, \"addBounds\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (bounds) {\r\n            var l = this.x;\r\n            var t = this.y;\r\n            var r = l + this.width;\r\n            var b = t + this.height;\r\n            setPoint(bounds, { x: l, y: t });\r\n            setPoint(bounds, { x: r, y: t });\r\n            setPoint(bounds, { x: l, y: b });\r\n            setPoint(bounds, { x: r, y: b });\r\n        }\r\n    });\r\n    return DrawRect;\r\n}(Op));\r\n/**\r\n * @ignore\r\n */\r\nvar DrawCircle = /** @class */ (function (_super) {\r\n    __extends(DrawCircle, _super);\r\n    function DrawCircle(x, y, radius) {\r\n        var _this = _super.call(this) || this;\r\n        Object.defineProperty(_this, \"x\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: x\r\n        });\r\n        Object.defineProperty(_this, \"y\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: y\r\n        });\r\n        Object.defineProperty(_this, \"radius\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: radius\r\n        });\r\n        return _this;\r\n    }\r\n    Object.defineProperty(DrawCircle.prototype, \"path\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (context) {\r\n            context.moveTo(this.x + this.radius, this.y);\r\n            context.arc(this.x, this.y, this.radius, 0, 2 * Math.PI);\r\n        }\r\n    });\r\n    // TODO handle skewing and rotation\r\n    Object.defineProperty(DrawCircle.prototype, \"addBounds\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (bounds) {\r\n            setPoint(bounds, { x: this.x - this.radius, y: this.y - this.radius });\r\n            setPoint(bounds, { x: this.x + this.radius, y: this.y + this.radius });\r\n        }\r\n    });\r\n    return DrawCircle;\r\n}(Op));\r\n/**\r\n * @ignore\r\n */\r\nvar DrawEllipse = /** @class */ (function (_super) {\r\n    __extends(DrawEllipse, _super);\r\n    function DrawEllipse(x, y, radiusX, radiusY) {\r\n        var _this = _super.call(this) || this;\r\n        Object.defineProperty(_this, \"x\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: x\r\n        });\r\n        Object.defineProperty(_this, \"y\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: y\r\n        });\r\n        Object.defineProperty(_this, \"radiusX\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: radiusX\r\n        });\r\n        Object.defineProperty(_this, \"radiusY\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: radiusY\r\n        });\r\n        return _this;\r\n    }\r\n    Object.defineProperty(DrawEllipse.prototype, \"path\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (context) {\r\n            context.ellipse(0, 0, this.radiusX, this.radiusY, 0, 0, Math.PI * 2);\r\n        }\r\n    });\r\n    // TODO handle skewing and rotation\r\n    Object.defineProperty(DrawEllipse.prototype, \"addBounds\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (bounds) {\r\n            setPoint(bounds, { x: this.x - this.radiusX, y: this.y - this.radiusY });\r\n            setPoint(bounds, { x: this.x + this.radiusX, y: this.y + this.radiusY });\r\n        }\r\n    });\r\n    return DrawEllipse;\r\n}(Op));\r\n/**\r\n * @ignore\r\n */\r\nvar Arc = /** @class */ (function (_super) {\r\n    __extends(Arc, _super);\r\n    function Arc(cx, cy, radius, startAngle, endAngle, anticlockwise) {\r\n        var _this = _super.call(this) || this;\r\n        Object.defineProperty(_this, \"cx\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: cx\r\n        });\r\n        Object.defineProperty(_this, \"cy\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: cy\r\n        });\r\n        Object.defineProperty(_this, \"radius\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: radius\r\n        });\r\n        Object.defineProperty(_this, \"startAngle\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: startAngle\r\n        });\r\n        Object.defineProperty(_this, \"endAngle\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: endAngle\r\n        });\r\n        Object.defineProperty(_this, \"anticlockwise\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: anticlockwise\r\n        });\r\n        return _this;\r\n    }\r\n    Object.defineProperty(Arc.prototype, \"path\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (context) {\r\n            if (this.radius > 0) {\r\n                context.arc(this.cx, this.cy, this.radius, this.startAngle, this.endAngle, this.anticlockwise);\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Arc.prototype, \"addBounds\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (bounds) {\r\n            var arcBounds = $math.getArcBounds(this.cx, this.cy, this.startAngle * $math.DEGREES, this.endAngle * $math.DEGREES, this.radius);\r\n            setPoint(bounds, { x: arcBounds.left, y: arcBounds.top });\r\n            setPoint(bounds, { x: arcBounds.right, y: arcBounds.bottom });\r\n        }\r\n    });\r\n    return Arc;\r\n}(Op));\r\n/**\r\n * @ignore\r\n */\r\nvar ArcTo = /** @class */ (function (_super) {\r\n    __extends(ArcTo, _super);\r\n    function ArcTo(x1, y1, x2, y2, radius) {\r\n        var _this = _super.call(this) || this;\r\n        Object.defineProperty(_this, \"x1\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: x1\r\n        });\r\n        Object.defineProperty(_this, \"y1\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: y1\r\n        });\r\n        Object.defineProperty(_this, \"x2\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: x2\r\n        });\r\n        Object.defineProperty(_this, \"y2\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: y2\r\n        });\r\n        Object.defineProperty(_this, \"radius\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: radius\r\n        });\r\n        return _this;\r\n    }\r\n    Object.defineProperty(ArcTo.prototype, \"path\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (context) {\r\n            if (this.radius > 0) {\r\n                context.arcTo(this.x1, this.y1, this.x2, this.y2, this.radius);\r\n            }\r\n        }\r\n    });\r\n    // TODO: add points\r\n    Object.defineProperty(ArcTo.prototype, \"addBounds\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (_bounds) {\r\n            /*\r\n            // not finished\r\n            https://math.stackexchange.com/questions/1781438/finding-the-center-of-a-circle-given-two-points-and-a-radius-algebraically\r\n    \r\n            if (prevPoint) {\r\n                let x1 = prevPoint.x;\r\n                let y1 = prevPoint.y;\r\n                let x2 = this.x2;\r\n                let y2 = this.y2;\r\n                let r = this.radius;\r\n    \r\n                let xa = (x2 - x1) / 2;\r\n                let ya = (y2 - y1) / 2;\r\n    \r\n                let x0 = x1 + xa;\r\n                let y0 = y1 + ya;\r\n    \r\n                let a = Math.hypot(xa, ya);\r\n                let b = Math.sqrt(r * r - a * a);\r\n    \r\n                let cx = x0 + b * ya / a;\r\n                let cy = y0 - b * xa / a;\r\n    \r\n                console.log(cx, cy);\r\n            }*/\r\n        }\r\n    });\r\n    return ArcTo;\r\n}(Op));\r\n/**\r\n * @ignore\r\n */\r\nvar LineTo = /** @class */ (function (_super) {\r\n    __extends(LineTo, _super);\r\n    function LineTo(x, y) {\r\n        var _this = _super.call(this) || this;\r\n        Object.defineProperty(_this, \"x\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: x\r\n        });\r\n        Object.defineProperty(_this, \"y\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: y\r\n        });\r\n        return _this;\r\n    }\r\n    Object.defineProperty(LineTo.prototype, \"path\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (context) {\r\n            context.lineTo(this.x, this.y);\r\n        }\r\n    });\r\n    Object.defineProperty(LineTo.prototype, \"addBounds\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (bounds) {\r\n            setPoint(bounds, { x: this.x, y: this.y });\r\n        }\r\n    });\r\n    return LineTo;\r\n}(Op));\r\n/**\r\n * @ignore\r\n */\r\nvar MoveTo = /** @class */ (function (_super) {\r\n    __extends(MoveTo, _super);\r\n    function MoveTo(x, y) {\r\n        var _this = _super.call(this) || this;\r\n        Object.defineProperty(_this, \"x\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: x\r\n        });\r\n        Object.defineProperty(_this, \"y\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: y\r\n        });\r\n        return _this;\r\n    }\r\n    Object.defineProperty(MoveTo.prototype, \"path\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (context) {\r\n            context.moveTo(this.x, this.y);\r\n        }\r\n    });\r\n    Object.defineProperty(MoveTo.prototype, \"addBounds\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (bounds) {\r\n            setPoint(bounds, { x: this.x, y: this.y });\r\n        }\r\n    });\r\n    return MoveTo;\r\n}(Op));\r\n/**\r\n * @ignore\r\n */\r\nvar ClosePath = /** @class */ (function (_super) {\r\n    __extends(ClosePath, _super);\r\n    function ClosePath() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    Object.defineProperty(ClosePath.prototype, \"path\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (context) {\r\n            context.closePath();\r\n        }\r\n    });\r\n    return ClosePath;\r\n}(Op));\r\n/**\r\n * @ignore\r\n */\r\nvar BezierCurveTo = /** @class */ (function (_super) {\r\n    __extends(BezierCurveTo, _super);\r\n    function BezierCurveTo(cpX, cpY, cpX2, cpY2, toX, toY) {\r\n        var _this = _super.call(this) || this;\r\n        Object.defineProperty(_this, \"cpX\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: cpX\r\n        });\r\n        Object.defineProperty(_this, \"cpY\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: cpY\r\n        });\r\n        Object.defineProperty(_this, \"cpX2\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: cpX2\r\n        });\r\n        Object.defineProperty(_this, \"cpY2\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: cpY2\r\n        });\r\n        Object.defineProperty(_this, \"toX\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: toX\r\n        });\r\n        Object.defineProperty(_this, \"toY\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: toY\r\n        });\r\n        return _this;\r\n    }\r\n    Object.defineProperty(BezierCurveTo.prototype, \"path\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (context) {\r\n            context.bezierCurveTo(this.cpX, this.cpY, this.cpX2, this.cpY2, this.toX, this.toY);\r\n        }\r\n    });\r\n    // TODO: OK?\r\n    Object.defineProperty(BezierCurveTo.prototype, \"addBounds\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (bounds) {\r\n            setPoint(bounds, { x: this.cpX, y: this.cpY });\r\n            setPoint(bounds, { x: this.cpX2, y: this.cpY2 });\r\n            setPoint(bounds, { x: this.toX, y: this.toY });\r\n        }\r\n    });\r\n    return BezierCurveTo;\r\n}(Op));\r\n/**\r\n * @ignore\r\n */\r\nvar QuadraticCurveTo = /** @class */ (function (_super) {\r\n    __extends(QuadraticCurveTo, _super);\r\n    function QuadraticCurveTo(cpX, cpY, toX, toY) {\r\n        var _this = _super.call(this) || this;\r\n        Object.defineProperty(_this, \"cpX\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: cpX\r\n        });\r\n        Object.defineProperty(_this, \"cpY\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: cpY\r\n        });\r\n        Object.defineProperty(_this, \"toX\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: toX\r\n        });\r\n        Object.defineProperty(_this, \"toY\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: toY\r\n        });\r\n        return _this;\r\n    }\r\n    Object.defineProperty(QuadraticCurveTo.prototype, \"path\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (context) {\r\n            context.quadraticCurveTo(this.cpX, this.cpY, this.toX, this.toY);\r\n        }\r\n    });\r\n    // TODO: OK?\r\n    Object.defineProperty(QuadraticCurveTo.prototype, \"addBounds\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (bounds) {\r\n            setPoint(bounds, { x: this.cpX, y: this.cpY });\r\n            setPoint(bounds, { x: this.toX, y: this.toY });\r\n        }\r\n    });\r\n    return QuadraticCurveTo;\r\n}(Op));\r\n/**\r\n * @ignore\r\n */\r\nvar Shadow = /** @class */ (function (_super) {\r\n    __extends(Shadow, _super);\r\n    function Shadow(color, blur, offsetX, offsetY, opacity) {\r\n        var _this = _super.call(this) || this;\r\n        Object.defineProperty(_this, \"color\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: color\r\n        });\r\n        Object.defineProperty(_this, \"blur\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: blur\r\n        });\r\n        Object.defineProperty(_this, \"offsetX\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: offsetX\r\n        });\r\n        Object.defineProperty(_this, \"offsetY\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: offsetY\r\n        });\r\n        Object.defineProperty(_this, \"opacity\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: opacity\r\n        });\r\n        return _this;\r\n    }\r\n    Object.defineProperty(Shadow.prototype, \"colorize\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (context, _forceColor) {\r\n            if (this.opacity) {\r\n                context.fillStyle = this.color;\r\n            }\r\n            context.shadowColor = this.color;\r\n            context.shadowBlur = this.blur;\r\n            context.shadowOffsetX = this.offsetX;\r\n            context.shadowOffsetY = this.offsetY;\r\n        }\r\n    });\r\n    return Shadow;\r\n}(Op));\r\n/**\r\n * @ignore\r\n */\r\nvar GraphicsImage = /** @class */ (function (_super) {\r\n    __extends(GraphicsImage, _super);\r\n    function GraphicsImage(image, width, height, x, y) {\r\n        var _this = _super.call(this) || this;\r\n        Object.defineProperty(_this, \"image\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: image\r\n        });\r\n        Object.defineProperty(_this, \"width\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: width\r\n        });\r\n        Object.defineProperty(_this, \"height\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: height\r\n        });\r\n        Object.defineProperty(_this, \"x\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: x\r\n        });\r\n        Object.defineProperty(_this, \"y\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: y\r\n        });\r\n        return _this;\r\n    }\r\n    Object.defineProperty(GraphicsImage.prototype, \"path\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (context) {\r\n            context.drawImage(this.image, this.x, this.y, this.width, this.height);\r\n        }\r\n    });\r\n    // TODO: OK?\r\n    Object.defineProperty(GraphicsImage.prototype, \"addBounds\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (bounds) {\r\n            setPoint(bounds, { x: this.x, y: this.y });\r\n            setPoint(bounds, { x: this.width, y: this.height });\r\n        }\r\n    });\r\n    return GraphicsImage;\r\n}(Op));\r\n/**\r\n * @ignore\r\n */\r\nvar CanvasGraphics = /** @class */ (function (_super) {\r\n    __extends(CanvasGraphics, _super);\r\n    function CanvasGraphics() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        Object.defineProperty(_this, \"_operations\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        Object.defineProperty(_this, \"blendMode\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: BlendMode.NORMAL\r\n        });\r\n        Object.defineProperty(_this, \"_hasShadows\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(_this, \"_fillAlpha\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(_this, \"_strokeAlpha\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        return _this;\r\n    }\r\n    Object.defineProperty(CanvasGraphics.prototype, \"clear\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            _super.prototype.clear.call(this);\r\n            this._operations.length = 0;\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasGraphics.prototype, \"_pushOp\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (op) {\r\n            this._operations.push(op);\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasGraphics.prototype, \"beginFill\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (color, alpha) {\r\n            if (alpha === void 0) { alpha = 1; }\r\n            this._fillAlpha = alpha;\r\n            if (color) {\r\n                if (color instanceof Color) {\r\n                    this._pushOp(new BeginFill(color.toCSS(alpha)));\r\n                }\r\n                else {\r\n                    this.isMeasured = true;\r\n                    this._pushOp(new BeginFill(color));\r\n                }\r\n            }\r\n            else {\r\n                this._pushOp(new BeginFill(\"rgba(0, 0, 0, \" + alpha + \")\"));\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasGraphics.prototype, \"endFill\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            this._pushOp(new EndFill(this._hasShadows));\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasGraphics.prototype, \"endStroke\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            this._pushOp(new EndStroke());\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasGraphics.prototype, \"lineStyle\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (width, color, alpha, lineJoin) {\r\n            if (width === void 0) { width = 0; }\r\n            if (alpha === void 0) { alpha = 1; }\r\n            this._strokeAlpha = alpha;\r\n            if (color) {\r\n                if (color instanceof Color) {\r\n                    this._pushOp(new LineStyle(width, color.toCSS(alpha), lineJoin));\r\n                }\r\n                else {\r\n                    this._pushOp(new LineStyle(width, color, lineJoin));\r\n                }\r\n            }\r\n            else {\r\n                this._pushOp(new LineStyle(width, \"rgba(0, 0, 0, \" + alpha + \")\", lineJoin));\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasGraphics.prototype, \"setLineDash\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (dash) {\r\n            this._pushOp(new LineDash(dash ? dash : []));\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasGraphics.prototype, \"setLineDashOffset\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (dashOffset) {\r\n            if (dashOffset === void 0) { dashOffset = 0; }\r\n            this._pushOp(new LineDashOffset(dashOffset));\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasGraphics.prototype, \"drawRect\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (x, y, width, height) {\r\n            this._pushOp(new DrawRect(x, y, width, height));\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasGraphics.prototype, \"drawCircle\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (x, y, radius) {\r\n            this._pushOp(new DrawCircle(x, y, radius));\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasGraphics.prototype, \"drawEllipse\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (x, y, radiusX, radiusY) {\r\n            this._pushOp(new DrawEllipse(x, y, radiusX, radiusY));\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasGraphics.prototype, \"arc\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (cx, cy, radius, startAngle, endAngle, anticlockwise) {\r\n            if (anticlockwise === void 0) { anticlockwise = false; }\r\n            this._pushOp(new Arc(cx, cy, radius, startAngle, endAngle, anticlockwise));\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasGraphics.prototype, \"arcTo\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (x1, y1, x2, y2, radius) {\r\n            this._pushOp(new ArcTo(x1, y1, x2, y2, radius));\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasGraphics.prototype, \"lineTo\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (x, y) {\r\n            this._pushOp(new LineTo(x, y));\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasGraphics.prototype, \"moveTo\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (x, y) {\r\n            this._pushOp(new MoveTo(x, y));\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasGraphics.prototype, \"bezierCurveTo\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (cpX, cpY, cpX2, cpY2, toX, toY) {\r\n            this._pushOp(new BezierCurveTo(cpX, cpY, cpX2, cpY2, toX, toY));\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasGraphics.prototype, \"quadraticCurveTo\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (cpX, cpY, toX, toY) {\r\n            this._pushOp(new QuadraticCurveTo(cpX, cpY, toX, toY));\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasGraphics.prototype, \"closePath\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            this._pushOp(new ClosePath());\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasGraphics.prototype, \"shadow\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (color, blur, offsetX, offsetY, opacity) {\r\n            if (blur === void 0) { blur = 0; }\r\n            if (offsetX === void 0) { offsetX = 0; }\r\n            if (offsetY === void 0) { offsetY = 0; }\r\n            this._hasShadows = true;\r\n            this._pushOp(new Shadow(opacity ? color.toCSS(opacity) : color.toCSS(this._fillAlpha || this._strokeAlpha), blur, offsetX, offsetY));\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasGraphics.prototype, \"image\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (image, width, height, x, y) {\r\n            this._pushOp(new GraphicsImage(image, width, height, x, y));\r\n        }\r\n    });\r\n    // https://svgwg.org/svg2-draft/paths.html#DProperty\r\n    // TODO better error checking\r\n    Object.defineProperty(CanvasGraphics.prototype, \"svgPath\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (path) {\r\n            var _this = this;\r\n            var x = 0;\r\n            var y = 0;\r\n            var cpx = null;\r\n            var cpy = null;\r\n            var qcpx = null;\r\n            var qcpy = null;\r\n            var SEGMENTS_REGEXP = /([MmZzLlHhVvCcSsQqTtAa])([^MmZzLlHhVvCcSsQqTtAa]*)/g;\r\n            var ARGS_REGEXP = /[\\u0009\\u0020\\u000A\\u000C\\u000D]*([\\+\\-]?[0-9]*\\.?[0-9]+(?:[eE][\\+\\-]?[0-9]+)?)[\\u0009\\u0020\\u000A\\u000C\\u000D]*,?/g;\r\n            var match;\r\n            while ((match = SEGMENTS_REGEXP.exec(path)) !== null) {\r\n                var name_1 = match[1];\r\n                var rest = match[2];\r\n                var args = [];\r\n                while ((match = ARGS_REGEXP.exec(rest)) !== null) {\r\n                    args.push(match[1]);\r\n                }\r\n                // Reset control point\r\n                if (name_1 !== \"S\" && name_1 !== \"s\" && name_1 !== \"C\" && name_1 !== \"c\") {\r\n                    cpx = null;\r\n                    cpy = null;\r\n                }\r\n                // Reset control point\r\n                if (name_1 !== \"Q\" && name_1 !== \"q\" && name_1 !== \"T\" && name_1 !== \"t\") {\r\n                    qcpx = null;\r\n                    qcpy = null;\r\n                }\r\n                switch (name_1) {\r\n                    case \"M\":\r\n                        checkEvenArgs(name_1, args.length, 2);\r\n                        x = +args[0];\r\n                        y = +args[1];\r\n                        this.moveTo(x, y);\r\n                        for (var i = 2; i < args.length; i += 2) {\r\n                            x = +args[i];\r\n                            y = +args[i + 1];\r\n                            this.lineTo(x, y);\r\n                        }\r\n                        break;\r\n                    case \"m\":\r\n                        checkEvenArgs(name_1, args.length, 2);\r\n                        x += +args[0];\r\n                        y += +args[1];\r\n                        this.moveTo(x, y);\r\n                        for (var i = 2; i < args.length; i += 2) {\r\n                            x += +args[i];\r\n                            y += +args[i + 1];\r\n                            this.lineTo(x, y);\r\n                        }\r\n                        break;\r\n                    case \"L\":\r\n                        checkEvenArgs(name_1, args.length, 2);\r\n                        for (var i = 0; i < args.length; i += 2) {\r\n                            x = +args[i];\r\n                            y = +args[i + 1];\r\n                            this.lineTo(x, y);\r\n                        }\r\n                        break;\r\n                    case \"l\":\r\n                        checkEvenArgs(name_1, args.length, 2);\r\n                        for (var i = 0; i < args.length; i += 2) {\r\n                            x += +args[i];\r\n                            y += +args[i + 1];\r\n                            this.lineTo(x, y);\r\n                        }\r\n                        break;\r\n                    case \"H\":\r\n                        checkMinArgs(name_1, args.length, 1);\r\n                        for (var i = 0; i < args.length; ++i) {\r\n                            x = +args[i];\r\n                            this.lineTo(x, y);\r\n                        }\r\n                        break;\r\n                    case \"h\":\r\n                        checkMinArgs(name_1, args.length, 1);\r\n                        for (var i = 0; i < args.length; ++i) {\r\n                            x += +args[i];\r\n                            this.lineTo(x, y);\r\n                        }\r\n                        break;\r\n                    case \"V\":\r\n                        checkMinArgs(name_1, args.length, 1);\r\n                        for (var i = 0; i < args.length; ++i) {\r\n                            y = +args[i];\r\n                            this.lineTo(x, y);\r\n                        }\r\n                        break;\r\n                    case \"v\":\r\n                        checkMinArgs(name_1, args.length, 1);\r\n                        for (var i = 0; i < args.length; ++i) {\r\n                            y += +args[i];\r\n                            this.lineTo(x, y);\r\n                        }\r\n                        break;\r\n                    case \"C\":\r\n                        checkEvenArgs(name_1, args.length, 6);\r\n                        for (var i = 0; i < args.length; i += 6) {\r\n                            var x1 = +args[i];\r\n                            var y1 = +args[i + 1];\r\n                            cpx = +args[i + 2];\r\n                            cpy = +args[i + 3];\r\n                            x = +args[i + 4];\r\n                            y = +args[i + 5];\r\n                            this.bezierCurveTo(x1, y1, cpx, cpy, x, y);\r\n                        }\r\n                        break;\r\n                    case \"c\":\r\n                        checkEvenArgs(name_1, args.length, 6);\r\n                        for (var i = 0; i < args.length; i += 6) {\r\n                            var x1 = +args[i] + x;\r\n                            var y1 = +args[i + 1] + y;\r\n                            cpx = +args[i + 2] + x;\r\n                            cpy = +args[i + 3] + y;\r\n                            x += +args[i + 4];\r\n                            y += +args[i + 5];\r\n                            this.bezierCurveTo(x1, y1, cpx, cpy, x, y);\r\n                        }\r\n                        break;\r\n                    case \"S\":\r\n                        checkEvenArgs(name_1, args.length, 4);\r\n                        if (cpx === null || cpy === null) {\r\n                            cpx = x;\r\n                            cpy = y;\r\n                        }\r\n                        for (var i = 0; i < args.length; i += 4) {\r\n                            var x1 = 2 * x - cpx;\r\n                            var y1 = 2 * y - cpy;\r\n                            cpx = +args[i];\r\n                            cpy = +args[i + 1];\r\n                            x = +args[i + 2];\r\n                            y = +args[i + 3];\r\n                            this.bezierCurveTo(x1, y1, cpx, cpy, x, y);\r\n                        }\r\n                        break;\r\n                    case \"s\":\r\n                        checkEvenArgs(name_1, args.length, 4);\r\n                        if (cpx === null || cpy === null) {\r\n                            cpx = x;\r\n                            cpy = y;\r\n                        }\r\n                        for (var i = 0; i < args.length; i += 4) {\r\n                            var x1 = 2 * x - cpx;\r\n                            var y1 = 2 * y - cpy;\r\n                            cpx = +args[i] + x;\r\n                            cpy = +args[i + 1] + y;\r\n                            x += +args[i + 2];\r\n                            y += +args[i + 3];\r\n                            this.bezierCurveTo(x1, y1, cpx, cpy, x, y);\r\n                        }\r\n                        break;\r\n                    case \"Q\":\r\n                        checkEvenArgs(name_1, args.length, 4);\r\n                        for (var i = 0; i < args.length; i += 4) {\r\n                            qcpx = +args[i];\r\n                            qcpy = +args[i + 1];\r\n                            x = +args[i + 2];\r\n                            y = +args[i + 3];\r\n                            this.quadraticCurveTo(qcpx, qcpy, x, y);\r\n                        }\r\n                        break;\r\n                    case \"q\":\r\n                        checkEvenArgs(name_1, args.length, 4);\r\n                        for (var i = 0; i < args.length; i += 4) {\r\n                            qcpx = +args[i] + x;\r\n                            qcpy = +args[i + 1] + y;\r\n                            x += +args[i + 2];\r\n                            y += +args[i + 3];\r\n                            this.quadraticCurveTo(qcpx, qcpy, x, y);\r\n                        }\r\n                        break;\r\n                    case \"T\":\r\n                        checkEvenArgs(name_1, args.length, 2);\r\n                        if (qcpx === null || qcpy === null) {\r\n                            qcpx = x;\r\n                            qcpy = y;\r\n                        }\r\n                        for (var i = 0; i < args.length; i += 2) {\r\n                            qcpx = 2 * x - qcpx;\r\n                            qcpy = 2 * y - qcpy;\r\n                            x = +args[i];\r\n                            y = +args[i + 1];\r\n                            this.quadraticCurveTo(qcpx, qcpy, x, y);\r\n                        }\r\n                        break;\r\n                    case \"t\":\r\n                        checkEvenArgs(name_1, args.length, 2);\r\n                        if (qcpx === null || qcpy === null) {\r\n                            qcpx = x;\r\n                            qcpy = y;\r\n                        }\r\n                        for (var i = 0; i < args.length; i += 2) {\r\n                            qcpx = 2 * x - qcpx;\r\n                            qcpy = 2 * y - qcpy;\r\n                            x += +args[i];\r\n                            y += +args[i + 1];\r\n                            this.quadraticCurveTo(qcpx, qcpy, x, y);\r\n                        }\r\n                        break;\r\n                    case \"A\":\r\n                    case \"a\":\r\n                        var relative = (name_1 === \"a\");\r\n                        splitArcFlags(args);\r\n                        checkEvenArgs(name_1, args.length, 7);\r\n                        for (var i = 0; i < args.length; i += 7) {\r\n                            var cx = +args[i + 5];\r\n                            var cy = +args[i + 6];\r\n                            if (relative) {\r\n                                cx += x;\r\n                                cy += y;\r\n                            }\r\n                            var bs = arcToBezier({\r\n                                px: x,\r\n                                py: y,\r\n                                rx: +args[i],\r\n                                ry: +args[i + 1],\r\n                                xAxisRotation: +args[i + 2],\r\n                                largeArcFlag: assertBinary(+args[i + 3]),\r\n                                sweepFlag: assertBinary(+args[i + 4]),\r\n                                cx: cx,\r\n                                cy: cy,\r\n                            });\r\n                            $array.each(bs, function (b) {\r\n                                _this.bezierCurveTo(b.x1, b.y1, b.x2, b.y2, b.x, b.y);\r\n                                x = b.x;\r\n                                y = b.y;\r\n                            });\r\n                        }\r\n                        break;\r\n                    case \"Z\":\r\n                    case \"z\":\r\n                        checkArgs(name_1, args.length, 0);\r\n                        this.closePath();\r\n                        break;\r\n                }\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasGraphics.prototype, \"_runPath\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (context) {\r\n            context.beginPath();\r\n            $array.each(this._operations, function (op) {\r\n                op.path(context);\r\n            });\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasGraphics.prototype, \"_render\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (parentLayer) {\r\n            _super.prototype._render.call(this, parentLayer);\r\n            var layer = this._layer || parentLayer;\r\n            var layerDirty = layer.dirty;\r\n            var interactive = this._isInteractive();\r\n            if (layerDirty || interactive) {\r\n                var context_1 = layer.context;\r\n                var ghostContext_1 = this._renderer._ghostContext;\r\n                if (layerDirty) {\r\n                    context_1.globalCompositeOperation = this.blendMode;\r\n                    context_1.beginPath();\r\n                }\r\n                var color_1;\r\n                if (interactive) {\r\n                    ghostContext_1.beginPath();\r\n                    color_1 = this._getColorId();\r\n                }\r\n                $array.each(this._operations, function (op) {\r\n                    if (layerDirty) {\r\n                        op.path(context_1);\r\n                        op.colorize(context_1, undefined);\r\n                    }\r\n                    if (interactive) {\r\n                        op.path(ghostContext_1);\r\n                        op.colorize(ghostContext_1, color_1);\r\n                    }\r\n                });\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasGraphics.prototype, \"renderDetached\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (context) {\r\n            if (this.visible) {\r\n                this._setMatrix();\r\n                context.save();\r\n                // We must apply the mask before we transform the element\r\n                var mask = this.mask;\r\n                if (mask) {\r\n                    mask._setMatrix();\r\n                    mask._transform(context, 1);\r\n                    mask._runPath(context);\r\n                    context.clip();\r\n                }\r\n                // TODO handle compoundAlpha somehow ?\r\n                context.globalAlpha = this.compoundAlpha * this.alpha;\r\n                this._transform(context, 1);\r\n                if (this.filter) {\r\n                    context.filter = this.filter;\r\n                }\r\n                context.globalCompositeOperation = this.blendMode;\r\n                context.beginPath();\r\n                $array.each(this._operations, function (op) {\r\n                    op.path(context);\r\n                    op.colorize(context, undefined);\r\n                });\r\n                context.restore();\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasGraphics.prototype, \"_addBounds\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (bounds) {\r\n            if (this.visible && this.isMeasured) {\r\n                $array.each(this._operations, function (op) {\r\n                    op.addBounds(bounds);\r\n                });\r\n            }\r\n        }\r\n    });\r\n    return CanvasGraphics;\r\n}(CanvasDisplayObject));\r\nexport { CanvasGraphics };\r\n/**\r\n * @ignore\r\n */\r\nvar CanvasText = /** @class */ (function (_super) {\r\n    __extends(CanvasText, _super);\r\n    function CanvasText(renderer, text, style) {\r\n        var _this = _super.call(this, renderer) || this;\r\n        Object.defineProperty(_this, \"text\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(_this, \"style\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(_this, \"resolution\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 1\r\n        });\r\n        Object.defineProperty(_this, \"_textInfo\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(_this, \"_textVisible\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: true\r\n        });\r\n        Object.defineProperty(_this, \"_originalScale\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 1\r\n        });\r\n        _this.text = text;\r\n        _this.style = style;\r\n        return _this;\r\n    }\r\n    Object.defineProperty(CanvasText.prototype, \"invalidateBounds\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            _super.prototype.invalidateBounds.call(this);\r\n            this._textInfo = undefined;\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasText.prototype, \"_shared\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (context) {\r\n            if (this.style.textAlign) {\r\n                context.textAlign = this.style.textAlign;\r\n            }\r\n            if (this.style.direction) {\r\n                context.direction = this.style.direction;\r\n            }\r\n            if (this.style.textBaseline) {\r\n                context.textBaseline = this.style.textBaseline;\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasText.prototype, \"_prerender\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (layer, ignoreGhost, ignoreFontWeight) {\r\n            if (ignoreGhost === void 0) { ignoreGhost = false; }\r\n            if (ignoreFontWeight === void 0) { ignoreFontWeight = false; }\r\n            _super.prototype._render.call(this, layer);\r\n            var context = layer.context;\r\n            var ghostContext = this._renderer._ghostContext;\r\n            // Font style\r\n            var style = this.style;\r\n            var fontStyle = this._getFontStyle(undefined, ignoreFontWeight);\r\n            context.font = fontStyle;\r\n            if (this._isInteractive() && !ignoreGhost) {\r\n                ghostContext.font = fontStyle;\r\n            }\r\n            // Other parameters\r\n            if (style.fill) {\r\n                if (style.fill instanceof Color) {\r\n                    context.fillStyle = style.fill.toCSS(style.fillOpacity != undefined ? style.fillOpacity : 1);\r\n                }\r\n                else {\r\n                    context.fillStyle = style.fill;\r\n                }\r\n            }\r\n            if (style.shadowColor) {\r\n                layer.context.shadowColor = style.shadowColor.toCSS(style.shadowOpacity || 1);\r\n            }\r\n            if (style.shadowBlur) {\r\n                layer.context.shadowBlur = style.shadowBlur;\r\n            }\r\n            if (style.shadowOffsetX) {\r\n                layer.context.shadowOffsetX = style.shadowOffsetX;\r\n            }\r\n            if (style.shadowOffsetY) {\r\n                layer.context.shadowOffsetY = style.shadowOffsetY;\r\n            }\r\n            this._shared(context);\r\n            if (this._isInteractive() && !ignoreGhost) {\r\n                ghostContext.fillStyle = this._getColorId();\r\n                this._shared(ghostContext);\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasText.prototype, \"_getFontStyle\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (style2, ignoreFontWeight) {\r\n            if (ignoreFontWeight === void 0) { ignoreFontWeight = false; }\r\n            // Process defaults\r\n            var style = this.style;\r\n            var fontStyle = [];\r\n            if (style2 && style2.fontVariant) {\r\n                fontStyle.push(style2.fontVariant);\r\n            }\r\n            else if (style.fontVariant) {\r\n                fontStyle.push(style.fontVariant);\r\n            }\r\n            if (!ignoreFontWeight) {\r\n                if (style2 && style2.fontWeight) {\r\n                    fontStyle.push(style2.fontWeight);\r\n                }\r\n                else if (style.fontWeight) {\r\n                    fontStyle.push(style.fontWeight);\r\n                }\r\n            }\r\n            if (style2 && style2.fontStyle) {\r\n                fontStyle.push(style2.fontStyle);\r\n            }\r\n            else if (style.fontStyle) {\r\n                fontStyle.push(style.fontStyle);\r\n            }\r\n            if (style2 && style2.fontSize) {\r\n                if ($type.isNumber(style2.fontSize)) {\r\n                    style2.fontSize = style2.fontSize + \"px\";\r\n                }\r\n                fontStyle.push(style2.fontSize);\r\n            }\r\n            else if (style.fontSize) {\r\n                if ($type.isNumber(style.fontSize)) {\r\n                    style.fontSize = style.fontSize + \"px\";\r\n                }\r\n                fontStyle.push(style.fontSize);\r\n            }\r\n            if (style2 && style2.fontFamily) {\r\n                fontStyle.push(style2.fontFamily);\r\n            }\r\n            else if (style.fontFamily) {\r\n                fontStyle.push(style.fontFamily);\r\n            }\r\n            else if (fontStyle.length) {\r\n                fontStyle.push(\"Arial\");\r\n            }\r\n            return fontStyle.join(\" \");\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasText.prototype, \"_render\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (parentLayer) {\r\n            var _this = this;\r\n            var layer = this._layer || parentLayer;\r\n            // We need measurements in order to properly position text for alignment\r\n            if (!this._textInfo) {\r\n                this._measure(layer);\r\n            }\r\n            if (this._textVisible) {\r\n                var interactive_1 = this._isInteractive();\r\n                var context_2 = layer.context;\r\n                var layerDirty_1 = layer.dirty;\r\n                var ghostContext_2 = this._renderer._ghostContext;\r\n                context_2.save();\r\n                ghostContext_2.save();\r\n                this._prerender(layer);\r\n                // const lines = this.text.toString().replace(/\\r/g, \"\").split(/\\n/);\r\n                // const x = this._localBounds && (this._localBounds.left < 0) ? Math.abs(this._localBounds.left) : 0;\r\n                // Process text info produced by _measure()\r\n                $array.each(this._textInfo, function (line, _index) {\r\n                    $array.each(line.textChunks, function (chunk, _index) {\r\n                        // Set style\r\n                        if (chunk.style) {\r\n                            context_2.save();\r\n                            ghostContext_2.save();\r\n                            context_2.font = chunk.style;\r\n                            if (_this._isInteractive()) {\r\n                                ghostContext_2.font = chunk.style;\r\n                            }\r\n                        }\r\n                        if (chunk.fill) {\r\n                            context_2.save();\r\n                            context_2.fillStyle = chunk.fill.toCSS();\r\n                            // Color does not affect ghostContext so we not set it\r\n                        }\r\n                        // Draw text\r\n                        if (layerDirty_1) {\r\n                            context_2.fillText(chunk.text, chunk.offsetX, line.offsetY + chunk.offsetY);\r\n                        }\r\n                        // Draw underline\r\n                        if (chunk.textDecoration == \"underline\" || chunk.textDecoration == \"line-through\") {\r\n                            var thickness = 1;\r\n                            var offset = 1;\r\n                            var fontSize = chunk.height;\r\n                            var offsetX = chunk.offsetX;\r\n                            switch (_this.style.textAlign) {\r\n                                case \"right\":\r\n                                case \"end\":\r\n                                    offsetX -= chunk.width;\r\n                                    break;\r\n                                case \"center\":\r\n                                    offsetX -= chunk.width / 2;\r\n                                    break;\r\n                            }\r\n                            if (chunk.style) {\r\n                                var format = TextFormatter.getTextStyle(chunk.style);\r\n                                switch (format.fontWeight) {\r\n                                    case \"bolder\":\r\n                                    case \"bold\":\r\n                                    case \"700\":\r\n                                    case \"800\":\r\n                                    case \"900\":\r\n                                        thickness = 2;\r\n                                        break;\r\n                                }\r\n                            }\r\n                            if (fontSize) {\r\n                                offset = fontSize / 20;\r\n                            }\r\n                            var y = void 0;\r\n                            if (chunk.textDecoration == \"line-through\") {\r\n                                y = thickness + line.offsetY + chunk.offsetY - chunk.height / 2;\r\n                            }\r\n                            else {\r\n                                y = thickness + offset * 1.5 + line.offsetY + chunk.offsetY;\r\n                            }\r\n                            context_2.save();\r\n                            context_2.beginPath();\r\n                            if (chunk.fill) {\r\n                                context_2.strokeStyle = chunk.fill.toCSS();\r\n                            }\r\n                            else if (_this.style.fill && _this.style.fill instanceof Color) {\r\n                                context_2.strokeStyle = _this.style.fill.toCSS();\r\n                            }\r\n                            context_2.lineWidth = thickness * offset;\r\n                            context_2.moveTo(offsetX, y);\r\n                            context_2.lineTo(offsetX + chunk.width, y);\r\n                            context_2.stroke();\r\n                            context_2.restore();\r\n                        }\r\n                        if (interactive_1 && _this.interactive) {\r\n                            // Draw text in ghost canvas ONLY if it is set as interactive\r\n                            // explicitly. This way we avoid hit test anomalies caused by anti\r\n                            // aliasing of text.\r\n                            ghostContext_2.fillText(chunk.text, chunk.offsetX, line.offsetY + chunk.offsetY);\r\n                        }\r\n                        if (chunk.fill) {\r\n                            context_2.restore();\r\n                            // Color does not affect ghostContext so we not set it\r\n                        }\r\n                        // Reset style\r\n                        if (chunk.style) {\r\n                            context_2.restore();\r\n                            ghostContext_2.restore();\r\n                        }\r\n                    });\r\n                });\r\n                context_2.restore();\r\n                ghostContext_2.restore();\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasText.prototype, \"_addBounds\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (bounds) {\r\n            if (this.visible && this.isMeasured) {\r\n                //if (this._textVisible) {\r\n                var x = this._measure(this.getLayer());\r\n                setPoint(bounds, { x: x.left, y: x.top });\r\n                setPoint(bounds, { x: x.right, y: x.bottom });\r\n                //}\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasText.prototype, \"_ignoreFontWeight\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            return /apple/i.test(navigator.vendor);\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasText.prototype, \"_measure\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (layer) {\r\n            var _this = this;\r\n            var context = layer.context;\r\n            var ghostContext = this._renderer._ghostContext;\r\n            var rtl = this.style.direction == \"rtl\";\r\n            // Reset text info\r\n            this._textInfo = [];\r\n            // Init\r\n            var oversizedBehavior = this.style.oversizedBehavior;\r\n            var maxWidth = this.style.maxWidth;\r\n            var truncate = $type.isNumber(maxWidth) && oversizedBehavior == \"truncate\";\r\n            var wrap = $type.isNumber(maxWidth) && (oversizedBehavior == \"wrap\" || oversizedBehavior == \"wrap-no-break\");\r\n            // Pre-render\r\n            context.save();\r\n            ghostContext.save();\r\n            this._prerender(layer, true, this._ignoreFontWeight());\r\n            // Get default font metrix\r\n            var refText = \"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 \";\r\n            // Split up text into lines\r\n            var lines = this.text.toString().replace(/\\r/g, \"\").split(/\\n/);\r\n            var styleRestored = true;\r\n            var minX = 0;\r\n            var maxX = 0;\r\n            // Iterate through the lines\r\n            var offsetY = 0;\r\n            var currentStyle;\r\n            $array.each(lines, function (line, _index) {\r\n                // Split up line into format/value chunks\r\n                var chunks;\r\n                if (line == \"\") {\r\n                    chunks = [{\r\n                            type: \"value\",\r\n                            text: \"\"\r\n                        }];\r\n                }\r\n                else {\r\n                    chunks = TextFormatter.chunk(line, false, _this.style.ignoreFormatting);\r\n                }\r\n                var _loop_1 = function () {\r\n                    // Init line object\r\n                    var lineInfo = {\r\n                        offsetY: offsetY,\r\n                        ascent: 0,\r\n                        width: 0,\r\n                        height: 0,\r\n                        left: 0,\r\n                        right: 0,\r\n                        textChunks: []\r\n                    };\r\n                    // Measure reference text\r\n                    var metrics = _this._measureText(refText, context);\r\n                    var height = metrics.actualBoundingBoxAscent + metrics.actualBoundingBoxDescent;\r\n                    lineInfo.height = height;\r\n                    lineInfo.ascent = metrics.actualBoundingBoxAscent;\r\n                    var currentFormat;\r\n                    var currentDecoration = _this.style.textDecoration;\r\n                    var currentFill;\r\n                    var currentChunkWidth;\r\n                    var skipFurtherText = false;\r\n                    var firstTextChunk = true;\r\n                    var leftoverChunks = [];\r\n                    var currentVerticalAlign;\r\n                    //let offsetX = 0;\r\n                    //let chunk;\r\n                    //while(chunk = chunks.shift()) {\r\n                    $array.eachContinue(chunks, function (chunk, index) {\r\n                        // Format chunk\r\n                        if (chunk.type == \"format\") {\r\n                            if (chunk.text == \"[/]\") {\r\n                                if (!styleRestored) {\r\n                                    context.restore();\r\n                                    ghostContext.restore();\r\n                                    styleRestored = true;\r\n                                }\r\n                                currentFill = undefined;\r\n                                currentStyle = undefined;\r\n                                currentChunkWidth = undefined;\r\n                                currentDecoration = _this.style.textDecoration;\r\n                                currentVerticalAlign = undefined;\r\n                                currentFormat = chunk.text;\r\n                            }\r\n                            else {\r\n                                if (!styleRestored) {\r\n                                    context.restore();\r\n                                    ghostContext.restore();\r\n                                }\r\n                                var format = TextFormatter.getTextStyle(chunk.text);\r\n                                var fontStyle = _this._getFontStyle(format);\r\n                                context.save();\r\n                                ghostContext.save();\r\n                                context.font = fontStyle;\r\n                                currentStyle = fontStyle;\r\n                                currentFormat = chunk.text;\r\n                                if (format.textDecoration) {\r\n                                    currentDecoration = format.textDecoration;\r\n                                }\r\n                                if (format.fill) {\r\n                                    currentFill = format.fill;\r\n                                }\r\n                                if (format.width) {\r\n                                    currentChunkWidth = $type.toNumber(format.width);\r\n                                }\r\n                                if (format.verticalAlign) {\r\n                                    currentVerticalAlign = format.verticalAlign;\r\n                                }\r\n                                styleRestored = false;\r\n                                // Measure reference text after change of format\r\n                                var metrics_1 = _this._measureText(refText, context);\r\n                                var height_1 = metrics_1.actualBoundingBoxAscent + metrics_1.actualBoundingBoxDescent;\r\n                                if (height_1 > lineInfo.height) {\r\n                                    lineInfo.height = height_1;\r\n                                }\r\n                                if (metrics_1.actualBoundingBoxAscent > lineInfo.ascent) {\r\n                                    lineInfo.ascent = metrics_1.actualBoundingBoxAscent;\r\n                                }\r\n                            }\r\n                        }\r\n                        // Text chunk\r\n                        else if (chunk.type == \"value\" && !skipFurtherText) {\r\n                            // Measure\r\n                            var metrics_2 = _this._measureText(chunk.text, context);\r\n                            var chunkWidth = metrics_2.actualBoundingBoxLeft + metrics_2.actualBoundingBoxRight;\r\n                            // Check for fit\r\n                            if (truncate) {\r\n                                // Break words?\r\n                                var breakWords = firstTextChunk || _this.style.breakWords || false;\r\n                                // Measure ellipsis and check if it fits\r\n                                var ellipsis = _this.style.ellipsis || \"\";\r\n                                var ellipsisMetrics = _this._measureText(ellipsis, context);\r\n                                var ellipsisWidth = ellipsisMetrics.actualBoundingBoxLeft + ellipsisMetrics.actualBoundingBoxRight;\r\n                                // Check fit\r\n                                if ((lineInfo.width + chunkWidth) > maxWidth) {\r\n                                    var excessWidth = maxWidth - lineInfo.width - ellipsisWidth;\r\n                                    chunk.text = _this._truncateText(context, chunk.text, excessWidth, breakWords);\r\n                                    chunk.text += ellipsis;\r\n                                    skipFurtherText = true;\r\n                                }\r\n                            }\r\n                            else if (wrap) {\r\n                                // Check fit\r\n                                if ((lineInfo.width + chunkWidth) > maxWidth) {\r\n                                    var excessWidth = maxWidth - lineInfo.width;\r\n                                    var tmpText = _this._truncateText(context, chunk.text, excessWidth, false, (firstTextChunk && _this.style.oversizedBehavior != \"wrap-no-break\"));\r\n                                    if (tmpText == \"\") {\r\n                                        // Unable to fit a single letter - hide the whole label\r\n                                        _this._textVisible = true;\r\n                                        return false;\r\n                                    }\r\n                                    //skipFurtherText = true;\r\n                                    //Add remaining chunks for the next line\r\n                                    leftoverChunks = chunks.slice(index + 1);\r\n                                    //Add remaining text of current chunk if it was forced-cut\r\n                                    if ($utils.trim(tmpText) != $utils.trim(chunk.text)) {\r\n                                        leftoverChunks.unshift({\r\n                                            type: \"value\",\r\n                                            text: chunk.text.substr(tmpText.length)\r\n                                        });\r\n                                        if (currentFormat) {\r\n                                            leftoverChunks.unshift({\r\n                                                type: \"format\",\r\n                                                text: currentFormat\r\n                                            });\r\n                                        }\r\n                                    }\r\n                                    // Set current chunk (truncated)\r\n                                    chunk.text = $utils.trim(tmpText);\r\n                                    chunks = [];\r\n                                    skipFurtherText = true;\r\n                                }\r\n                            }\r\n                            // Chunk width?\r\n                            var leftBoundMod = 1;\r\n                            var rightBoundMod = 1;\r\n                            if (currentStyle && currentChunkWidth && (currentChunkWidth > chunkWidth)) {\r\n                                // increase horizontal bounding boxes accordingly\r\n                                var boundsMod = chunkWidth / currentChunkWidth;\r\n                                switch (_this.style.textAlign) {\r\n                                    case \"right\":\r\n                                    case \"end\":\r\n                                        leftBoundMod = boundsMod;\r\n                                        break;\r\n                                    case \"center\":\r\n                                        leftBoundMod = boundsMod;\r\n                                        rightBoundMod = boundsMod;\r\n                                        break;\r\n                                    default:\r\n                                        rightBoundMod = boundsMod;\r\n                                }\r\n                                chunkWidth = currentChunkWidth;\r\n                            }\r\n                            var chunkHeight = metrics_2.actualBoundingBoxAscent + metrics_2.actualBoundingBoxDescent;\r\n                            if (chunkHeight > lineInfo.height) {\r\n                                lineInfo.height = chunkHeight;\r\n                            }\r\n                            if (metrics_2.actualBoundingBoxAscent > lineInfo.ascent) {\r\n                                lineInfo.ascent = metrics_2.actualBoundingBoxAscent;\r\n                            }\r\n                            lineInfo.width += chunkWidth;\r\n                            lineInfo.left += metrics_2.actualBoundingBoxLeft / leftBoundMod;\r\n                            lineInfo.right += metrics_2.actualBoundingBoxRight / rightBoundMod;\r\n                            lineInfo.textChunks.push({\r\n                                style: currentStyle,\r\n                                fill: currentFill,\r\n                                text: chunk.text,\r\n                                width: chunkWidth,\r\n                                height: chunkHeight,\r\n                                left: metrics_2.actualBoundingBoxLeft,\r\n                                right: metrics_2.actualBoundingBoxRight,\r\n                                ascent: metrics_2.actualBoundingBoxAscent,\r\n                                offsetX: 0,\r\n                                offsetY: 0,\r\n                                textDecoration: currentDecoration,\r\n                                verticalAlign: currentVerticalAlign\r\n                            });\r\n                            //offsetX += chunkWidth;\r\n                            firstTextChunk = false;\r\n                        }\r\n                        if (leftoverChunks) {\r\n                            //return false;\r\n                        }\r\n                        return true;\r\n                        //}\r\n                    });\r\n                    if (_this.style.lineHeight instanceof Percent) {\r\n                        lineInfo.height *= _this.style.lineHeight.value;\r\n                        lineInfo.ascent *= _this.style.lineHeight.value;\r\n                    }\r\n                    else {\r\n                        lineInfo.height *= _this.style.lineHeight || 1.2;\r\n                        lineInfo.ascent *= _this.style.lineHeight || 1.2;\r\n                    }\r\n                    if (minX < lineInfo.left) {\r\n                        minX = lineInfo.left;\r\n                    }\r\n                    if (maxX < lineInfo.right) {\r\n                        maxX = lineInfo.right;\r\n                    }\r\n                    _this._textInfo.push(lineInfo);\r\n                    //lineInfo.offsetY += lineInfo.ascent;\r\n                    offsetY += lineInfo.height;\r\n                    // Reset chunks so that it can proceed to the next line\r\n                    chunks = leftoverChunks || [];\r\n                };\r\n                while (chunks.length > 0) {\r\n                    _loop_1();\r\n                }\r\n            });\r\n            if (!styleRestored) {\r\n                context.restore();\r\n                ghostContext.restore();\r\n            }\r\n            // Adjust chunk internal offsets\r\n            $array.each(this._textInfo, function (lineInfo, _index) {\r\n                var currentChunkOffset = 0;\r\n                $array.each(lineInfo.textChunks, function (chunk) {\r\n                    chunk.offsetX = currentChunkOffset + chunk.left - lineInfo.left;\r\n                    chunk.offsetY += lineInfo.height - lineInfo.height * (_this.style.baselineRatio || 0.19);\r\n                    currentChunkOffset += chunk.width;\r\n                    if (chunk.verticalAlign) {\r\n                        switch (chunk.verticalAlign) {\r\n                            case \"super\":\r\n                                chunk.offsetY -= lineInfo.height / 2 - chunk.height / 2;\r\n                                break;\r\n                            case \"sub\":\r\n                                chunk.offsetY += chunk.height / 2;\r\n                                break;\r\n                        }\r\n                    }\r\n                });\r\n            });\r\n            var bounds = {\r\n                left: rtl ? -maxX : -minX,\r\n                top: 0,\r\n                right: rtl ? minX : maxX,\r\n                bottom: offsetY,\r\n            };\r\n            // We need to fit?\r\n            if (oversizedBehavior !== \"none\") {\r\n                var ratio = this._fitRatio(bounds);\r\n                if (ratio < 1) {\r\n                    if (oversizedBehavior == \"fit\") {\r\n                        if ($type.isNumber(this.style.minScale) && (ratio < this.style.minScale)) {\r\n                            this._textVisible = false;\r\n                        }\r\n                        else {\r\n                            if (!this._originalScale || this._originalScale == 1) {\r\n                                this._originalScale = this.scale;\r\n                            }\r\n                            this.scale = ratio;\r\n                            this._textVisible = true;\r\n                        }\r\n                    }\r\n                    else if (oversizedBehavior == \"hide\") {\r\n                        this._textVisible = false;\r\n                    }\r\n                    else {\r\n                        switch (this.style.textAlign) {\r\n                            case \"right\":\r\n                            case \"end\":\r\n                                bounds.left = -maxWidth;\r\n                                bounds.right = 0;\r\n                                break;\r\n                            case \"center\":\r\n                                bounds.left = -maxWidth / 2;\r\n                                bounds.right = maxWidth / 2;\r\n                                break;\r\n                            default:\r\n                                bounds.left = 0;\r\n                                bounds.right = maxWidth;\r\n                        }\r\n                        this.scale = this._originalScale || 1;\r\n                        this._originalScale = undefined;\r\n                        this._textVisible = true;\r\n                    }\r\n                }\r\n                else {\r\n                    this.scale = this._originalScale || 1;\r\n                    this._originalScale = undefined;\r\n                    this._textVisible = true;\r\n                }\r\n            }\r\n            context.restore();\r\n            ghostContext.restore();\r\n            return bounds;\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasText.prototype, \"_fitRatio\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (bounds) {\r\n            var maxW = this.style.maxWidth;\r\n            var maxH = this.style.maxHeight;\r\n            if (!$type.isNumber(maxW) && !$type.isNumber(maxH)) {\r\n                return 1;\r\n            }\r\n            var w = bounds.right - bounds.left;\r\n            var h = bounds.bottom - bounds.top;\r\n            return Math.min(maxW / w || 1, maxH / h || 1);\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasText.prototype, \"_truncateText\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (context, text, maxWidth, breakWords, fallbackBreakWords) {\r\n            if (breakWords === void 0) { breakWords = false; }\r\n            if (fallbackBreakWords === void 0) { fallbackBreakWords = true; }\r\n            var width;\r\n            do {\r\n                if (breakWords) {\r\n                    text = text.slice(0, -1);\r\n                }\r\n                else {\r\n                    var tmp = text.replace(/[^,;:!?\\\\\\/\\s]+[,;:!?\\\\\\/\\s]*$/g, \"\");\r\n                    if (tmp == \"\" && fallbackBreakWords) {\r\n                        breakWords = true;\r\n                    }\r\n                    else if (tmp == \"\") {\r\n                        return text;\r\n                    }\r\n                    else {\r\n                        text = tmp;\r\n                    }\r\n                }\r\n                var metrics = this._measureText(text, context);\r\n                width = metrics.actualBoundingBoxLeft + metrics.actualBoundingBoxRight;\r\n            } while ((width > maxWidth) && text != \"\");\r\n            return text;\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasText.prototype, \"_measureText\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (text, context) {\r\n            var metrics = context.measureText(text);\r\n            var fakeMetrics = {};\r\n            if (metrics.actualBoundingBoxAscent == null) {\r\n                var div = document.createElement(\"div\");\r\n                div.innerText = text;\r\n                div.style.visibility = \"hidden\";\r\n                div.style.position = \"absolute\";\r\n                div.style.top = \"-1000000px;\";\r\n                div.style.fontFamily = this.style.fontFamily || \"\";\r\n                div.style.fontSize = this.style.fontSize + \"\";\r\n                document.body.appendChild(div);\r\n                var bbox = div.getBoundingClientRect();\r\n                document.body.removeChild(div);\r\n                var h = bbox.height;\r\n                var w_1 = metrics.width;\r\n                var left = 0;\r\n                var right = w_1;\r\n                fakeMetrics = {\r\n                    actualBoundingBoxAscent: h,\r\n                    actualBoundingBoxDescent: 0,\r\n                    actualBoundingBoxLeft: left,\r\n                    actualBoundingBoxRight: right,\r\n                    fontBoundingBoxAscent: h,\r\n                    fontBoundingBoxDescent: 0,\r\n                    width: w_1\r\n                };\r\n                //return fake;\r\n            }\r\n            else {\r\n                fakeMetrics = {\r\n                    actualBoundingBoxAscent: metrics.actualBoundingBoxAscent,\r\n                    actualBoundingBoxDescent: metrics.actualBoundingBoxDescent,\r\n                    actualBoundingBoxLeft: metrics.actualBoundingBoxLeft,\r\n                    actualBoundingBoxRight: metrics.actualBoundingBoxRight,\r\n                    fontBoundingBoxAscent: metrics.actualBoundingBoxAscent,\r\n                    fontBoundingBoxDescent: metrics.actualBoundingBoxDescent,\r\n                    width: metrics.width\r\n                };\r\n            }\r\n            var w = metrics.width;\r\n            switch (this.style.textAlign) {\r\n                case \"right\":\r\n                case \"end\":\r\n                    fakeMetrics.actualBoundingBoxLeft = w;\r\n                    fakeMetrics.actualBoundingBoxRight = 0;\r\n                    break;\r\n                case \"center\":\r\n                    fakeMetrics.actualBoundingBoxLeft = w / 2;\r\n                    fakeMetrics.actualBoundingBoxRight = w / 2;\r\n                    break;\r\n                default:\r\n                    fakeMetrics.actualBoundingBoxLeft = 0;\r\n                    fakeMetrics.actualBoundingBoxRight = w;\r\n            }\r\n            return fakeMetrics;\r\n        }\r\n    });\r\n    return CanvasText;\r\n}(CanvasDisplayObject));\r\nexport { CanvasText };\r\n/**\r\n * @ignore\r\n */\r\nvar CanvasTextStyle = /** @class */ (function () {\r\n    function CanvasTextStyle() {\r\n        //public wordWrapWidth: number = 100;\r\n        Object.defineProperty(this, \"fill\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"fillOpacity\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"textAlign\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"fontFamily\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"fontSize\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"fontWeight\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"fontStyle\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"fontVariant\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"textDecoration\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"shadowColor\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"shadowBlur\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"shadowOffsetX\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"shadowOffsetY\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"shadowOpacity\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        // leading?: number;\r\n        // letterSpacing?: number;\r\n        Object.defineProperty(this, \"lineHeight\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: percent(120)\r\n        });\r\n        Object.defineProperty(this, \"baselineRatio\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0.19\r\n        });\r\n        // padding?: number;\r\n        // stroke?: number;\r\n        // strokeThickness?: number;\r\n        // trim?: number;\r\n        // wordWrap?: boolean;\r\n        Object.defineProperty(this, \"direction\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"textBaseline\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"oversizedBehavior\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: \"none\"\r\n        });\r\n        Object.defineProperty(this, \"breakWords\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"ellipsis\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: \"…\"\r\n        });\r\n        Object.defineProperty(this, \"maxWidth\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"maxHeight\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"minScale\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"ignoreFormatting\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n    }\r\n    return CanvasTextStyle;\r\n}());\r\nexport { CanvasTextStyle };\r\n/**\r\n * @ignore\r\n */\r\nvar CanvasRadialText = /** @class */ (function (_super) {\r\n    __extends(CanvasRadialText, _super);\r\n    function CanvasRadialText() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        Object.defineProperty(_this, \"textType\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: \"circular\"\r\n        });\r\n        Object.defineProperty(_this, \"radius\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(_this, \"startAngle\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(_this, \"inside\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(_this, \"orientation\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: \"auto\"\r\n        });\r\n        Object.defineProperty(_this, \"kerning\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(_this, \"_textReversed\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        return _this;\r\n    }\r\n    Object.defineProperty(CanvasRadialText.prototype, \"_render\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (parentLayer) {\r\n            switch (this.textType) {\r\n                case \"circular\":\r\n                    this._renderCircular(parentLayer);\r\n                    break;\r\n                default:\r\n                    _super.prototype._render.call(this, parentLayer);\r\n                    break;\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasRadialText.prototype, \"_renderCircular\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (parentLayer) {\r\n            if (this._textVisible) {\r\n                var layer = this._layer || parentLayer;\r\n                this._prerender(layer);\r\n                var interactive_2 = this._isInteractive();\r\n                var context_3 = layer.context;\r\n                var layerDirty_2 = layer.dirty;\r\n                var ghostContext_3 = this._renderer._ghostContext;\r\n                // Savepoint\r\n                context_3.save();\r\n                if (interactive_2) {\r\n                    ghostContext_3.save();\r\n                }\r\n                // Init\r\n                var radius_1 = (this.radius || 0);\r\n                var startAngle_1 = (this.startAngle || 0);\r\n                var deltaAngle_1 = 0;\r\n                var orientation_1 = this.orientation;\r\n                var inward_1 = orientation_1 == \"auto\" ? \"auto\" : orientation_1 == \"inward\";\r\n                var inside_1 = this.inside;\r\n                var align_1 = this.style.textAlign || \"left\";\r\n                var kerning_1 = this.kerning || 0;\r\n                var clockwise_1 = align_1 == \"left\" ? 1 : -1;\r\n                var shouldReverse_1 = !this._textReversed;\r\n                // We need measurements in order to properly position text for alignment\r\n                if (!this._textInfo) {\r\n                    this._measure(layer);\r\n                }\r\n                // Check if we need to invert the whole stuff\r\n                if (inward_1 == \"auto\") {\r\n                    // Calc max angle so we know whether we need to flip it\r\n                    var maxAngle_1 = 0;\r\n                    var midAngle = 0;\r\n                    $array.each(this._textInfo, function (line, _index) {\r\n                        var deltaAngle = startAngle_1 + (line.width / (radius_1 - line.height)) / 2 * -clockwise_1;\r\n                        if (deltaAngle > maxAngle_1) {\r\n                            maxAngle_1 = deltaAngle;\r\n                        }\r\n                    });\r\n                    if (align_1 == \"left\") {\r\n                        midAngle = (maxAngle_1 + deltaAngle_1 / 2) * $math.DEGREES;\r\n                    }\r\n                    else if (align_1 == \"right\") {\r\n                        midAngle = (maxAngle_1 - deltaAngle_1 / 2) * $math.DEGREES;\r\n                    }\r\n                    else {\r\n                        midAngle = startAngle_1 * $math.DEGREES;\r\n                    }\r\n                    midAngle = $math.normalizeAngle(midAngle);\r\n                    inward_1 = (midAngle >= 270) || (midAngle <= 90);\r\n                }\r\n                if (inward_1 == true && shouldReverse_1) {\r\n                    this._textInfo.reverse();\r\n                    this._textReversed = true;\r\n                }\r\n                // if ((inward == false && align == \"left\") || (inward == true && align == \"right\")) {\r\n                // \tclockwise *= -1;\r\n                // }\r\n                // Process text info produced by _measure()\r\n                $array.each(this._textInfo, function (line, _index) {\r\n                    var textHeight = line.height;\r\n                    // Adjust radius (for `inside = false`)\r\n                    // Radius adjustment for `inside = false` is below the line calculation\r\n                    if (!inside_1) {\r\n                        radius_1 += textHeight;\r\n                    }\r\n                    // Reverse letters if we're painting them counter-clockwise\r\n                    if (((clockwise_1 == -1 && inward_1) || (clockwise_1 == 1 && !inward_1)) && shouldReverse_1) {\r\n                        line.textChunks.reverse();\r\n                    }\r\n                    // Init angles\r\n                    var lineStartAngle = startAngle_1;\r\n                    deltaAngle_1 = 0;\r\n                    // Adjust for center-align\r\n                    if (align_1 == \"center\") {\r\n                        lineStartAngle += (line.width / (radius_1 - textHeight)) / 2 * -clockwise_1;\r\n                        deltaAngle_1 = lineStartAngle - startAngle_1;\r\n                    }\r\n                    // if (inward == \"auto\") {\r\n                    // \tlet midAngle;\r\n                    // \tif (align == \"left\") {\r\n                    // \t\tmidAngle = (lineStartAngle + deltaAngle / 2) * $math.DEGREES;\r\n                    // \t}\r\n                    // \telse if () {\r\n                    // \t\tmidAngle = (lineStartAngle - deltaAngle / 2) * $math.DEGREES;\r\n                    // \t}\r\n                    // \tinward = (midAngle >= 270) || (midAngle <= 90);\r\n                    // }\r\n                    // Rotate letters if they are facing outward\r\n                    lineStartAngle += (Math.PI * (inward_1 ? 0 : 1)); // Rotate 180 if outward\r\n                    // Savepoint\r\n                    context_3.save();\r\n                    if (interactive_2) {\r\n                        ghostContext_3.save();\r\n                    }\r\n                    // Assume starting angle\r\n                    context_3.rotate(lineStartAngle);\r\n                    if (interactive_2) {\r\n                        ghostContext_3.rotate(lineStartAngle);\r\n                    }\r\n                    var angleShift = 0;\r\n                    $array.each(line.textChunks, function (chunk, _index) {\r\n                        // Draw the letter\r\n                        var char = chunk.text;\r\n                        var charWidth = chunk.width;\r\n                        // Rotate half a letter\r\n                        angleShift = (charWidth / 2) / (radius_1 - textHeight) * clockwise_1;\r\n                        context_3.rotate(angleShift);\r\n                        if (interactive_2) {\r\n                            ghostContext_3.rotate(angleShift);\r\n                        }\r\n                        // Set style\r\n                        if (chunk.style) {\r\n                            context_3.save();\r\n                            ghostContext_3.save();\r\n                            context_3.font = chunk.style;\r\n                            if (interactive_2) {\r\n                                ghostContext_3.font = chunk.style;\r\n                            }\r\n                        }\r\n                        if (chunk.fill) {\r\n                            context_3.save();\r\n                            context_3.fillStyle = chunk.fill.toCSS();\r\n                            // Color does not affect ghostContext so we not set it\r\n                        }\r\n                        // Center letters\r\n                        context_3.textBaseline = \"middle\";\r\n                        context_3.textAlign = \"center\";\r\n                        if (interactive_2) {\r\n                            ghostContext_3.textBaseline = \"middle\";\r\n                            ghostContext_3.textAlign = \"center\";\r\n                        }\r\n                        // Plop the letter\r\n                        if (layerDirty_2) {\r\n                            context_3.fillText(char, 0, (inward_1 ? 1 : -1) * (0 - radius_1 + textHeight / 2));\r\n                        }\r\n                        if (interactive_2) {\r\n                            ghostContext_3.fillText(char, 0, (inward_1 ? 1 : -1) * (0 - radius_1 + textHeight / 2));\r\n                        }\r\n                        if (chunk.fill) {\r\n                            context_3.restore();\r\n                            // Color does not affect ghostContext so we not set it\r\n                        }\r\n                        // Reset style\r\n                        if (chunk.style) {\r\n                            context_3.restore();\r\n                            ghostContext_3.restore();\r\n                        }\r\n                        // Rotate half a letter and add spacing\r\n                        angleShift = (charWidth / 2 + kerning_1) / (radius_1 - textHeight) * clockwise_1;\r\n                        context_3.rotate(angleShift);\r\n                        if (interactive_2) {\r\n                            ghostContext_3.rotate(angleShift);\r\n                        }\r\n                    });\r\n                    // Restore angle\r\n                    context_3.restore();\r\n                    if (interactive_2) {\r\n                        ghostContext_3.restore();\r\n                    }\r\n                    // Adjust radius (for `inside = true`)\r\n                    if (inside_1) {\r\n                        radius_1 -= textHeight;\r\n                    }\r\n                });\r\n                // Restore\r\n                context_3.restore();\r\n                if (interactive_2) {\r\n                    ghostContext_3.restore();\r\n                }\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasRadialText.prototype, \"_measure\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (layer) {\r\n            switch (this.textType) {\r\n                case \"circular\":\r\n                    return this._measureCircular(layer);\r\n                default:\r\n                    return _super.prototype._measure.call(this, layer);\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasRadialText.prototype, \"_measureCircular\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (layer) {\r\n            var _this = this;\r\n            var context = layer.context;\r\n            var ghostContext = this._renderer._ghostContext;\r\n            var rtl = this.style.direction == \"rtl\";\r\n            var oversizedBehavior = this.style.oversizedBehavior;\r\n            var maxWidth = this.style.maxWidth;\r\n            var truncate = $type.isNumber(maxWidth) && oversizedBehavior == \"truncate\";\r\n            var ellipsis = this.style.ellipsis || \"\";\r\n            var ellipsisMetrics;\r\n            //const wrap = $type.isNumber(maxWidth) && (oversizedBehavior == \"wrap\" || oversizedBehavior == \"wrap-no-break\");\r\n            // Reset text info\r\n            this._textVisible = true;\r\n            this._textInfo = [];\r\n            this._textReversed = false;\r\n            // Pre-render\r\n            context.save();\r\n            ghostContext.save();\r\n            this._prerender(layer, true);\r\n            // Split up text into lines\r\n            var lines = this.text.toString().replace(/\\r/g, \"\").split(/\\n/);\r\n            var styleRestored = true;\r\n            var totalWidth = 0;\r\n            // Iterate through the lines\r\n            var offsetY = 0;\r\n            $array.each(lines, function (line, _index) {\r\n                // Split up line into format/value chunks\r\n                var chunks = TextFormatter.chunk(line, false, _this.style.ignoreFormatting);\r\n                // Init line object\r\n                var lineInfo = {\r\n                    offsetY: offsetY,\r\n                    ascent: 0,\r\n                    width: 0,\r\n                    height: 0,\r\n                    left: 0,\r\n                    right: 0,\r\n                    textChunks: []\r\n                };\r\n                var currentStyle;\r\n                var currentFill;\r\n                var currentChunkWidth;\r\n                //while(chunk = chunks.shift()) {\r\n                $array.each(chunks, function (chunk, _index) {\r\n                    // Format chunk\r\n                    if (chunk.type == \"format\") {\r\n                        if (chunk.text == \"[/]\") {\r\n                            if (!styleRestored) {\r\n                                context.restore();\r\n                                ghostContext.restore();\r\n                                styleRestored = true;\r\n                            }\r\n                            currentFill = undefined;\r\n                            currentStyle = undefined;\r\n                            currentChunkWidth = undefined;\r\n                        }\r\n                        else {\r\n                            var format = TextFormatter.getTextStyle(chunk.text);\r\n                            var fontStyle = _this._getFontStyle(format);\r\n                            context.save();\r\n                            ghostContext.save();\r\n                            context.font = fontStyle;\r\n                            currentStyle = fontStyle;\r\n                            if (format.fill) {\r\n                                currentFill = format.fill;\r\n                            }\r\n                            if (format.width) {\r\n                                currentChunkWidth = $type.toNumber(format.width);\r\n                            }\r\n                            styleRestored = false;\r\n                        }\r\n                        if (truncate) {\r\n                            ellipsisMetrics = _this._measureText(ellipsis, context);\r\n                        }\r\n                    }\r\n                    // Text format\r\n                    else if (chunk.type == \"value\") {\r\n                        // Measure each letter\r\n                        var chars = chunk.text.match(/./ug) || [];\r\n                        if (rtl) {\r\n                            chars.reverse();\r\n                        }\r\n                        for (var i = 0; i < chars.length; i++) {\r\n                            var char = chars[i];\r\n                            // Measure\r\n                            var metrics = _this._measureText(char, context);\r\n                            var chunkWidth = metrics.width;\r\n                            // Chunk width?\r\n                            if (currentStyle && currentChunkWidth && (currentChunkWidth > chunkWidth)) {\r\n                                chunkWidth = currentChunkWidth;\r\n                            }\r\n                            var chunkHeight = metrics.actualBoundingBoxAscent + metrics.actualBoundingBoxDescent;\r\n                            if (chunkHeight > lineInfo.height) {\r\n                                lineInfo.height = chunkHeight;\r\n                            }\r\n                            if (metrics.actualBoundingBoxAscent > lineInfo.ascent) {\r\n                                lineInfo.ascent = metrics.actualBoundingBoxAscent;\r\n                            }\r\n                            lineInfo.width += chunkWidth;\r\n                            lineInfo.left += metrics.actualBoundingBoxLeft;\r\n                            lineInfo.right += metrics.actualBoundingBoxRight;\r\n                            lineInfo.textChunks.push({\r\n                                style: currentStyle,\r\n                                fill: currentFill,\r\n                                text: char,\r\n                                width: chunkWidth,\r\n                                height: chunkHeight + metrics.actualBoundingBoxDescent,\r\n                                left: metrics.actualBoundingBoxLeft,\r\n                                right: metrics.actualBoundingBoxRight,\r\n                                ascent: metrics.actualBoundingBoxAscent,\r\n                                offsetX: 0,\r\n                                offsetY: chunkHeight,\r\n                                textDecoration: undefined\r\n                            });\r\n                            totalWidth += chunkWidth;\r\n                            // Handle oversized behavior\r\n                            if (truncate) {\r\n                                // Measure ellipsis and check if it fits\r\n                                if (!ellipsisMetrics) {\r\n                                    ellipsisMetrics = _this._measureText(ellipsis, context);\r\n                                }\r\n                                var ellipsisWidth = ellipsisMetrics.actualBoundingBoxLeft + ellipsisMetrics.actualBoundingBoxRight;\r\n                                totalWidth += ellipsisWidth;\r\n                                if ((totalWidth + ellipsisWidth) > maxWidth) {\r\n                                    if (lineInfo.textChunks.length == 1) {\r\n                                        _this._textVisible = false;\r\n                                    }\r\n                                    else {\r\n                                        lineInfo.width += ellipsisWidth;\r\n                                        lineInfo.left += ellipsisMetrics.actualBoundingBoxLeft;\r\n                                        lineInfo.right += ellipsisMetrics.actualBoundingBoxRight;\r\n                                        lineInfo.textChunks.push({\r\n                                            style: currentStyle,\r\n                                            fill: currentFill,\r\n                                            text: ellipsis,\r\n                                            width: ellipsisWidth,\r\n                                            height: chunkHeight + ellipsisMetrics.actualBoundingBoxDescent,\r\n                                            left: ellipsisMetrics.actualBoundingBoxLeft,\r\n                                            right: ellipsisMetrics.actualBoundingBoxRight,\r\n                                            ascent: ellipsisMetrics.actualBoundingBoxAscent,\r\n                                            offsetX: 0,\r\n                                            offsetY: chunkHeight,\r\n                                            textDecoration: undefined\r\n                                        });\r\n                                    }\r\n                                    break;\r\n                                }\r\n                            }\r\n                            if (rtl) {\r\n                                break;\r\n                            }\r\n                        }\r\n                    }\r\n                });\r\n                if (_this.style.lineHeight instanceof Percent) {\r\n                    lineInfo.height *= _this.style.lineHeight.value;\r\n                }\r\n                else {\r\n                    lineInfo.height *= _this.style.lineHeight || 1.2;\r\n                }\r\n                _this._textInfo.push(lineInfo);\r\n                //lineInfo.offsetY += lineInfo.ascent;\r\n                offsetY += lineInfo.height;\r\n            });\r\n            if (!styleRestored) {\r\n                context.restore();\r\n                ghostContext.restore();\r\n            }\r\n            if (oversizedBehavior == \"hide\" && (totalWidth > maxWidth)) {\r\n                this._textVisible = false;\r\n            }\r\n            // Adjust chunk internal offsets\r\n            $array.each(this._textInfo, function (lineInfo) {\r\n                $array.each(lineInfo.textChunks, function (chunk) {\r\n                    chunk.offsetY += Math.round((lineInfo.height - chunk.height + (lineInfo.ascent - chunk.ascent)) / 2);\r\n                });\r\n            });\r\n            context.restore();\r\n            ghostContext.restore();\r\n            return {\r\n                left: 0,\r\n                top: 0,\r\n                right: 0,\r\n                bottom: 0,\r\n            };\r\n        }\r\n    });\r\n    return CanvasRadialText;\r\n}(CanvasText));\r\nexport { CanvasRadialText };\r\n/**\r\n * @ignore\r\n */\r\nvar CanvasImage = /** @class */ (function (_super) {\r\n    __extends(CanvasImage, _super);\r\n    function CanvasImage(renderer, image) {\r\n        var _this = _super.call(this, renderer) || this;\r\n        Object.defineProperty(_this, \"width\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(_this, \"height\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(_this, \"image\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(_this, \"tainted\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(_this, \"shadowColor\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(_this, \"shadowBlur\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(_this, \"shadowOffsetX\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(_this, \"shadowOffsetY\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(_this, \"shadowOpacity\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(_this, \"_imageMask\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        _this.image = image;\r\n        return _this;\r\n    }\r\n    Object.defineProperty(CanvasImage.prototype, \"_dispose\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            _super.prototype._dispose.call(this);\r\n            if (this._imageMask) {\r\n                clearCanvas(this._imageMask);\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasImage.prototype, \"getLocalBounds\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            if (!this._localBounds) {\r\n                var w = 0;\r\n                var h = 0;\r\n                if (this.width) {\r\n                    w = this.width;\r\n                }\r\n                if (this.height) {\r\n                    h = this.height;\r\n                }\r\n                this._localBounds = {\r\n                    left: 0,\r\n                    top: 0,\r\n                    right: w,\r\n                    bottom: h\r\n                };\r\n                this._addBounds(this._localBounds);\r\n            }\r\n            return this._localBounds;\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasImage.prototype, \"_render\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (parentLayer) {\r\n            _super.prototype._render.call(this, parentLayer);\r\n            if (this.image) {\r\n                var layer = this._layer || parentLayer;\r\n                if (this.tainted === undefined) {\r\n                    this.tainted = isTainted(this.image);\r\n                    layer.tainted = true;\r\n                }\r\n                if (this.tainted && this._renderer._omitTainted) {\r\n                    return;\r\n                }\r\n                if (layer.dirty) {\r\n                    if (this.shadowColor) {\r\n                        layer.context.shadowColor = this.shadowColor.toCSS(this.shadowOpacity || 1);\r\n                    }\r\n                    if (this.shadowBlur) {\r\n                        layer.context.shadowBlur = this.shadowBlur;\r\n                    }\r\n                    if (this.shadowOffsetX) {\r\n                        layer.context.shadowOffsetX = this.shadowOffsetX;\r\n                    }\r\n                    if (this.shadowOffsetY) {\r\n                        layer.context.shadowOffsetY = this.shadowOffsetY;\r\n                    }\r\n                    // TODO should this round ?\r\n                    var width = this.width || this.image.naturalWidth;\r\n                    var height = this.height || this.image.naturalHeight;\r\n                    layer.context.drawImage(this.image, 0, 0, width, height);\r\n                }\r\n                if (this.interactive && this._isInteractive()) {\r\n                    var mask = this._getMask(this.image);\r\n                    this._renderer._ghostContext.drawImage(mask, 0, 0);\r\n                }\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasImage.prototype, \"clear\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            _super.prototype.clear.call(this);\r\n            this.image = undefined;\r\n            this._imageMask = undefined;\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasImage.prototype, \"_getMask\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (image) {\r\n            if (this._imageMask === undefined) {\r\n                // TODO should this round ?\r\n                var width = this.width || image.naturalWidth;\r\n                var height = this.height || image.naturalHeight;\r\n                // We need to create a second canvas because destination-in clears out the entire canvas\r\n                var canvas = document.createElement(\"canvas\");\r\n                canvas.width = width;\r\n                canvas.height = height;\r\n                var context = canvas.getContext(\"2d\");\r\n                context.imageSmoothingEnabled = false;\r\n                context.fillStyle = this._getColorId();\r\n                context.fillRect(0, 0, width, height);\r\n                if (!isTainted(image)) {\r\n                    context.globalCompositeOperation = \"destination-in\";\r\n                    context.drawImage(image, 0, 0, width, height);\r\n                }\r\n                this._imageMask = canvas;\r\n            }\r\n            return this._imageMask;\r\n        }\r\n    });\r\n    return CanvasImage;\r\n}(CanvasDisplayObject));\r\nexport { CanvasImage };\r\n/**\r\n * @ignore\r\n */\r\nvar CanvasRendererEvent = /** @class */ (function () {\r\n    function CanvasRendererEvent(event, point, bbox) {\r\n        Object.defineProperty(this, \"event\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: event\r\n        });\r\n        Object.defineProperty(this, \"point\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: point\r\n        });\r\n        Object.defineProperty(this, \"bbox\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: bbox\r\n        });\r\n        Object.defineProperty(this, \"id\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"simulated\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"native\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: true\r\n        });\r\n        if ($utils.supports(\"touchevents\") && event instanceof Touch) {\r\n            this.id = event.identifier;\r\n        }\r\n        else {\r\n            this.id = null;\r\n        }\r\n    }\r\n    return CanvasRendererEvent;\r\n}());\r\nexport { CanvasRendererEvent };\r\n/**\r\n * @ignore\r\n */\r\nvar CanvasRenderer = /** @class */ (function (_super) {\r\n    __extends(CanvasRenderer, _super);\r\n    /*protected _mouseMoveThrottler: Throttler = new Throttler(() => {\r\n        this._dispatchGlobalMousemove(this._lastPointerMoveEvent.event, this._lastPointerMoveEvent.native);\r\n    });\r\n    */\r\n    function CanvasRenderer(resolution) {\r\n        var _this = _super.call(this) || this;\r\n        Object.defineProperty(_this, \"view\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: document.createElement(\"div\")\r\n        });\r\n        Object.defineProperty(_this, \"_layerDom\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: document.createElement(\"div\")\r\n        });\r\n        Object.defineProperty(_this, \"layers\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        Object.defineProperty(_this, \"_dirtyLayers\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        Object.defineProperty(_this, \"defaultLayer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: _this.getLayer(0)\r\n        });\r\n        Object.defineProperty(_this, \"_ghostView\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(_this, \"_ghostContext\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(_this, \"_patternCanvas\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: document.createElement(\"canvas\")\r\n        });\r\n        Object.defineProperty(_this, \"_patternContext\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: _this._patternCanvas.getContext(\"2d\")\r\n        });\r\n        Object.defineProperty(_this, \"_width\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(_this, \"_height\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(_this, \"_clientWidth\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(_this, \"_clientHeight\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(_this, \"resolution\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(_this, \"interactionsEnabled\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: true\r\n        });\r\n        Object.defineProperty(_this, \"_listeners\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(_this, \"_events\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(_this, \"_colorId\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(_this, \"_colorMap\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(_this, \"_forceInteractive\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(_this, \"_omitTainted\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        // TODO this should store the Id as well\r\n        Object.defineProperty(_this, \"_hovering\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: new Set()\r\n        });\r\n        Object.defineProperty(_this, \"_dragging\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        Object.defineProperty(_this, \"_mousedown\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        Object.defineProperty(_this, \"_lastPointerMoveEvent\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(_this, \"tapToActivate\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(_this, \"tapToActivateTimeout\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 3000\r\n        });\r\n        Object.defineProperty(_this, \"_touchActive\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(_this, \"_touchActiveTimeout\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        if (resolution == null) {\r\n            _this.resolution = window.devicePixelRatio;\r\n        }\r\n        else {\r\n            _this.resolution = resolution;\r\n        }\r\n        _this.view.style.position = \"absolute\";\r\n        _this.view.appendChild(_this._layerDom);\r\n        _this._disposers.push(new Disposer(function () {\r\n            $object.each(_this._events, function (_key, events) {\r\n                events.disposer.dispose();\r\n            });\r\n            $array.each(_this.layers, function (layer) {\r\n                clearCanvas(layer.view);\r\n                if (layer.exportableView) {\r\n                    clearCanvas(layer.exportableView);\r\n                }\r\n            });\r\n            clearCanvas(_this._ghostView);\r\n            clearCanvas(_this._patternCanvas);\r\n        }));\r\n        // @todo : do the same for ghost\r\n        _this._ghostView = document.createElement(\"canvas\");\r\n        _this._ghostContext = _this._ghostView.getContext(\"2d\", { alpha: false, willReadFrequently: true });\r\n        _this._ghostContext.imageSmoothingEnabled = false;\r\n        _this._ghostView.style.position = \"absolute\";\r\n        _this._ghostView.style.top = \"0px\";\r\n        _this._ghostView.style.left = \"0px\";\r\n        _this._disposers.push($utils.addEventListener(_this._ghostView, \"click\", function (originalEvent) {\r\n            var event = _this.getEvent(originalEvent);\r\n            var target = _this._getHitTarget(event.point, event.bbox);\r\n            console.debug(target);\r\n        }));\r\n        // Monitor for possible pixel ratio changes (when page is zoomed)\r\n        _this._disposers.push($utils.onZoom(function () {\r\n            if (resolution == null) {\r\n                _this.resolution = window.devicePixelRatio;\r\n            }\r\n        }));\r\n        // We need this in order top prevent default touch gestures when dragging\r\n        // draggable elements\r\n        if ($utils.supports(\"touchevents\")) {\r\n            var listener = function (ev) {\r\n                if (_this._dragging.length !== 0) {\r\n                    $array.eachContinue(_this._dragging, function (item) {\r\n                        if (item.value.shouldCancelTouch()) {\r\n                            ev.preventDefault();\r\n                            return false;\r\n                        }\r\n                        return true;\r\n                    });\r\n                }\r\n                // If touch down happends, delay touch out\r\n                if (_this._touchActiveTimeout) {\r\n                    _this._delayTouchDeactivate();\r\n                }\r\n            };\r\n            _this._disposers.push($utils.addEventListener(window, \"touchstart\", listener, { passive: false }));\r\n            _this._disposers.push($utils.addEventListener(_this.view, \"touchstart\", listener, { passive: false }));\r\n            _this._disposers.push($utils.addEventListener(_this.view, \"touchmove\", function () {\r\n                // If touch is moving, delay touch out\r\n                if (_this._touchActiveTimeout) {\r\n                    _this._delayTouchDeactivate();\r\n                }\r\n            }, { passive: true }));\r\n            _this._disposers.push($utils.addEventListener(window, \"click\", function (_ev) {\r\n                _this._touchActive = false;\r\n            }, { passive: true }));\r\n            _this._disposers.push($utils.addEventListener(_this.view, \"click\", function (_ev) {\r\n                window.setTimeout(function () {\r\n                    _this._touchActive = true;\r\n                    _this._delayTouchDeactivate();\r\n                }, 100);\r\n            }, { passive: true }));\r\n        }\r\n        // Prevent scrolling of the window when hovering on \"wheelable\" object\r\n        if ($utils.supports(\"wheelevents\")) {\r\n            _this._disposers.push($utils.addEventListener(_this.view, \"wheel\", function (ev) {\r\n                var prevent = false;\r\n                _this._hovering.forEach(function (obj) {\r\n                    if (obj.wheelable) {\r\n                        prevent = true;\r\n                        return false;\r\n                    }\r\n                });\r\n                if (prevent) {\r\n                    ev.preventDefault();\r\n                }\r\n            }, { passive: false }));\r\n        }\r\n        return _this;\r\n    }\r\n    Object.defineProperty(CanvasRenderer.prototype, \"_delayTouchDeactivate\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            var _this = this;\r\n            if (this._touchActiveTimeout) {\r\n                clearTimeout(this._touchActiveTimeout);\r\n            }\r\n            if (this.tapToActivateTimeout > 0) {\r\n                this._touchActiveTimeout = window.setTimeout(function () {\r\n                    _this._touchActive = false;\r\n                }, this.tapToActivateTimeout);\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasRenderer.prototype, \"debugGhostView\", {\r\n        get: function () {\r\n            return !!this._ghostView.parentNode;\r\n        },\r\n        set: function (value) {\r\n            if (value) {\r\n                if (!this._ghostView.parentNode) {\r\n                    this.view.appendChild(this._ghostView);\r\n                }\r\n            }\r\n            else {\r\n                if (this._ghostView.parentNode) {\r\n                    this._ghostView.parentNode.removeChild(this._ghostView);\r\n                }\r\n            }\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(CanvasRenderer.prototype, \"createLinearGradient\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (x1, y1, x2, y2) {\r\n            return this.defaultLayer.context.createLinearGradient(x1, y1, x2, y2);\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasRenderer.prototype, \"createRadialGradient\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (x1, y1, radius1, x2, y2, radius2) {\r\n            return this.defaultLayer.context.createRadialGradient(x1, y1, radius1, x2, y2, radius2);\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasRenderer.prototype, \"createPattern\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (graphics, background, repetition, width, height) {\r\n            // const patternCanvas = document.createElement(\"canvas\");\r\n            // const patternContext = patternCanvas.getContext(\"2d\")!;\r\n            // patternCanvas.width = width;\r\n            // patternCanvas.height = height;\r\n            // if (fill) {\r\n            // \tpatternContext.fillStyle = fill.toCSS();\r\n            // \tpatternContext.fillRect(0, 0, patternCanvas.width, patternCanvas.height);\r\n            // }\r\n            // const layer = {\r\n            // \tview: patternCanvas,\r\n            // \tcontext: patternContext,\r\n            // \tvisible: true,\r\n            // \torder: 0,\r\n            // \twidth: width,\r\n            // \theight: height,\r\n            // \tdirty: true\r\n            // };\r\n            // // patternContext.arc(0, 0, 50, 0, .5 * Math.PI);\r\n            // // patternContext.stroke();\r\n            // image.targetLayer = layer;\r\n            // image.render(layer);\r\n            //this._layerDom.appendChild(patternCanvas);\r\n            this._patternCanvas.width = width;\r\n            this._patternCanvas.height = height;\r\n            this._patternContext.clearRect(0, 0, width, height);\r\n            // patternCanvas.style.width = width * this.resolution + \"px\";\r\n            // patternCanvas.style.height = height * this.resolution + \"px\";\r\n            background.renderDetached(this._patternContext);\r\n            graphics.renderDetached(this._patternContext);\r\n            return this._patternContext.createPattern(this._patternCanvas, repetition);\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasRenderer.prototype, \"makeContainer\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            return new CanvasContainer(this);\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasRenderer.prototype, \"makeGraphics\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            return new CanvasGraphics(this);\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasRenderer.prototype, \"makeText\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (text, style) {\r\n            return new CanvasText(this, text, style);\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasRenderer.prototype, \"makeTextStyle\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            return new CanvasTextStyle();\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasRenderer.prototype, \"makeRadialText\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (text, style) {\r\n            return new CanvasRadialText(this, text, style);\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasRenderer.prototype, \"makePicture\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (image) {\r\n            return new CanvasImage(this, image);\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasRenderer.prototype, \"resizeLayer\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (layer) {\r\n            layer.dirty = true;\r\n            layer.resize(this._clientWidth, this._clientHeight, this.resolution);\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasRenderer.prototype, \"resize\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (width, height) {\r\n            var _this = this;\r\n            this._clientWidth = width;\r\n            this._clientHeight = height;\r\n            this._width = Math.floor(width * this.resolution);\r\n            this._height = Math.floor(height * this.resolution);\r\n            $array.each(this.layers, function (layer) {\r\n                if (layer) {\r\n                    _this.resizeLayer(layer);\r\n                }\r\n            });\r\n            // @todo: do the same for ghost canvases\r\n            this._ghostView.width = this._width;\r\n            this._ghostView.height = this._height;\r\n            this._ghostView.style.width = width + \"px\";\r\n            this._ghostView.style.height = height + \"px\";\r\n            this.view.style.width = width + \"px\";\r\n            this.view.style.height = height + \"px\";\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasRenderer.prototype, \"createDetachedLayer\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (willReadFrequently) {\r\n            if (willReadFrequently === void 0) { willReadFrequently = false; }\r\n            var view = document.createElement(\"canvas\");\r\n            var context = view.getContext(\"2d\", { willReadFrequently: willReadFrequently });\r\n            var layer = new CanvasLayer(view, context);\r\n            view.style.position = \"absolute\";\r\n            view.style.top = \"0px\";\r\n            view.style.left = \"0px\";\r\n            return layer;\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasRenderer.prototype, \"getLayerByOrder\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (order) {\r\n            var layers = this.layers;\r\n            var length = layers.length;\r\n            for (var i = 0; i < length; i++) {\r\n                var layer = layers[i];\r\n                if (layer.order == order) {\r\n                    return layer;\r\n                }\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasRenderer.prototype, \"getLayer\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (order, visible) {\r\n            if (visible === void 0) { visible = true; }\r\n            var existingLayer = this.getLayerByOrder(order);\r\n            if (existingLayer) {\r\n                return existingLayer;\r\n            }\r\n            var layer = this.createDetachedLayer(order == 99);\r\n            layer.order = order;\r\n            layer.visible = visible;\r\n            if (layer.visible && this._width) {\r\n                layer.view.width = this._width;\r\n                layer.view.style.width = this._clientWidth + \"px\";\r\n                layer.view.height = this._height;\r\n                layer.view.style.height = this._clientHeight + \"px\";\r\n            }\r\n            var layers = this.layers;\r\n            layers.push(layer);\r\n            layers.sort(function (a, b) {\r\n                if (a.order > b.order) {\r\n                    return 1;\r\n                }\r\n                else if (a.order < b.order) {\r\n                    return -1;\r\n                }\r\n                else {\r\n                    return 0;\r\n                }\r\n            });\r\n            var length = layers.length;\r\n            var layerIndex = $array.indexOf(layers, layer);\r\n            var next;\r\n            for (var i = layerIndex + 1; i < length; i++) {\r\n                if (layers[i].visible) {\r\n                    next = layers[i];\r\n                    break;\r\n                }\r\n            }\r\n            if (layer.visible) {\r\n                if (next === undefined) {\r\n                    this._layerDom.appendChild(layer.view);\r\n                }\r\n                else {\r\n                    this._layerDom.insertBefore(layer.view, next.view);\r\n                }\r\n            }\r\n            return layer;\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasRenderer.prototype, \"render\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (root) {\r\n            var _this = this;\r\n            this._dirtyLayers.length = 0;\r\n            $array.each(this.layers, function (layer) {\r\n                if (layer) {\r\n                    if (layer.dirty && layer.visible) {\r\n                        _this._dirtyLayers.push(layer);\r\n                        layer.clear();\r\n                    }\r\n                }\r\n            });\r\n            this._ghostContext.save();\r\n            //this._ghostContext.clearRect(0, 0, this._width, this._height);\r\n            //this._ghostContext.beginPath();\r\n            this._ghostContext.fillStyle = '#000';\r\n            this._ghostContext.fillRect(0, 0, this._width, this._height);\r\n            root.render(this.defaultLayer);\r\n            this._ghostContext.restore();\r\n            //setTimeout(() => {\r\n            // Remove this after the Chrome bug is fixed:\r\n            // https://bugs.chromium.org/p/chromium/issues/detail?id=1279394\r\n            $array.each(this.layers, function (layer) {\r\n                if (layer) {\r\n                    var context = layer.context;\r\n                    context.beginPath();\r\n                    context.moveTo(0, 0);\r\n                    context.stroke();\r\n                }\r\n            });\r\n            $array.each(this._dirtyLayers, function (layer) {\r\n                layer.context.restore();\r\n                layer.dirty = false;\r\n            });\r\n            //}, 100)\r\n            if (this._hovering.size && this._lastPointerMoveEvent) {\r\n                //this._mouseMoveThrottler.run();\r\n                var native_1 = this._lastPointerMoveEvent.native;\r\n                $array.each(this._lastPointerMoveEvent.events, function (event) {\r\n                    _this._dispatchGlobalMousemove(event, native_1);\r\n                });\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasRenderer.prototype, \"paintId\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (obj) {\r\n            var id = distributeId(++this._colorId);\r\n            var color = Color.fromHex(id).toCSS();\r\n            this._colorMap[color] = obj;\r\n            return color;\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasRenderer.prototype, \"_removeObject\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (obj) {\r\n            if (obj._colorId !== undefined) {\r\n                delete this._colorMap[obj._colorId];\r\n            }\r\n        }\r\n    });\r\n    // protected _identifyObjectByColor(colorId: number): CanvasDisplayObject | undefined {\r\n    // \treturn this._colorMap[colorId];\r\n    // }\r\n    Object.defineProperty(CanvasRenderer.prototype, \"getEvent\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (originalEvent, adjustPoint) {\r\n            if (adjustPoint === void 0) { adjustPoint = true; }\r\n            var bbox = adjustPoint ? this.view.getBoundingClientRect() : new DOMRect(0, 0, 0, 0);\r\n            return new CanvasRendererEvent(originalEvent, (originalEvent.clientX || originalEvent.clientY ? {\r\n                x: originalEvent.clientX - (originalEvent.clientX ? bbox.left : 0),\r\n                y: originalEvent.clientY - (originalEvent.clientY ? bbox.top : 0),\r\n            } : {\r\n                x: 0,\r\n                y: 0\r\n            }), bbox);\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasRenderer.prototype, \"_getHitTarget\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (point, bbox) {\r\n            if (bbox.width === 0 || bbox.height === 0 || point.x < 0 || point.x > bbox.width || point.y < 0 || point.y > bbox.height) {\r\n                return;\r\n            }\r\n            else {\r\n                var pixel = this._ghostContext.getImageData(\r\n                // TODO should this round ?\r\n                Math.round((point.x / bbox.width) * this._width), Math.round((point.y / bbox.height) * this._height), 1, 1);\r\n                if (pixel.data[0] === 0 && pixel.data[1] === 0 && pixel.data[2] === 0) {\r\n                    return false;\r\n                }\r\n                var colorId = Color.fromRGB(pixel.data[0], pixel.data[1], pixel.data[2]).toCSS();\r\n                var hit = this._colorMap[colorId];\r\n                return hit;\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasRenderer.prototype, \"_withEvents\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (key, f) {\r\n            var events = this._events[key];\r\n            if (events !== undefined) {\r\n                events.dispatching = true;\r\n                try {\r\n                    f(events);\r\n                }\r\n                finally {\r\n                    events.dispatching = false;\r\n                    if (events.cleanup) {\r\n                        events.cleanup = false;\r\n                        $array.keepIf(events.callbacks, function (callback) {\r\n                            return !callback.disposed;\r\n                        });\r\n                        if (events.callbacks.length === 0) {\r\n                            events.disposer.dispose();\r\n                            delete this._events[key];\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasRenderer.prototype, \"_dispatchEventAll\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (key, event) {\r\n            if (!this.interactionsEnabled) {\r\n                return;\r\n            }\r\n            this._withEvents(key, function (events) {\r\n                $array.each(events.callbacks, function (callback) {\r\n                    if (!callback.disposed) {\r\n                        callback.callback.call(callback.context, event);\r\n                    }\r\n                });\r\n            });\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasRenderer.prototype, \"_dispatchEvent\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (key, target, event) {\r\n            if (!this.interactionsEnabled) {\r\n                return false;\r\n            }\r\n            var dispatched = false;\r\n            this._withEvents(key, function (events) {\r\n                $array.each(events.callbacks, function (callback) {\r\n                    if (!callback.disposed && callback.object === target) {\r\n                        callback.callback.call(callback.context, event);\r\n                        dispatched = true;\r\n                    }\r\n                });\r\n            });\r\n            return dispatched;\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasRenderer.prototype, \"_dispatchMousedown\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (originalEvent) {\r\n            var _this = this;\r\n            var button = originalEvent.button;\r\n            if (button != 0 && button != 2 && button != 1 && button !== undefined) {\r\n                // Ignore non-primary mouse buttons\r\n                return;\r\n            }\r\n            var event = this.getEvent(originalEvent);\r\n            var target = this._getHitTarget(event.point, event.bbox);\r\n            if (target) {\r\n                var id_1 = event.id;\r\n                var dragged_1 = false;\r\n                eachTargets(target, function (obj) {\r\n                    var info = { id: id_1, value: obj };\r\n                    _this._mousedown.push(info);\r\n                    if (!dragged_1 && _this._dispatchEvent(\"pointerdown\", obj, event)) {\r\n                        // Only dispatch the first element which matches\r\n                        dragged_1 = true;\r\n                        var has = _this._dragging.some(function (x) {\r\n                            return x.value === obj && x.id === id_1;\r\n                        });\r\n                        if (!has) {\r\n                            _this._dragging.push(info);\r\n                        }\r\n                    }\r\n                    return true;\r\n                });\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasRenderer.prototype, \"_dispatchGlobalMousemove\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (originalEvent, native) {\r\n            var _this = this;\r\n            var event = this.getEvent(originalEvent);\r\n            var target = this._getHitTarget(event.point, event.bbox);\r\n            event.native = native;\r\n            if (target) {\r\n                this._hovering.forEach(function (obj) {\r\n                    if (!obj.contains(target)) {\r\n                        _this._hovering.delete(obj);\r\n                        if (obj.cursorOverStyle) {\r\n                            $utils.setStyle(document.body, \"cursor\", obj._replacedCursorStyle);\r\n                        }\r\n                        _this._dispatchEvent(\"pointerout\", obj, event);\r\n                    }\r\n                });\r\n                if (event.native) {\r\n                    eachTargets(target, function (obj) {\r\n                        if (!_this._hovering.has(obj)) {\r\n                            _this._hovering.add(obj);\r\n                            if (obj.cursorOverStyle) {\r\n                                obj._replacedCursorStyle = $utils.getStyle(document.body, \"cursor\");\r\n                                $utils.setStyle(document.body, \"cursor\", obj.cursorOverStyle);\r\n                            }\r\n                            _this._dispatchEvent(\"pointerover\", obj, event);\r\n                        }\r\n                        return true;\r\n                    });\r\n                }\r\n                //} else if (target === false) {\r\n            }\r\n            else {\r\n                this._hovering.forEach(function (obj) {\r\n                    if (obj.cursorOverStyle) {\r\n                        $utils.setStyle(document.body, \"cursor\", obj._replacedCursorStyle);\r\n                    }\r\n                    _this._dispatchEvent(\"pointerout\", obj, event);\r\n                });\r\n                this._hovering.clear();\r\n            }\r\n            this._dispatchEventAll(\"globalpointermove\", event);\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasRenderer.prototype, \"_dispatchGlobalMouseup\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (originalEvent, native) {\r\n            var event = this.getEvent(originalEvent);\r\n            event.native = native;\r\n            //const target = this._getHitTarget(event.point);\r\n            this._dispatchEventAll(\"globalpointerup\", event);\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasRenderer.prototype, \"_dispatchDragMove\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (originalEvent) {\r\n            var _this = this;\r\n            if (this._dragging.length !== 0) {\r\n                var event_1 = this.getEvent(originalEvent);\r\n                var id_2 = event_1.id;\r\n                this._dragging.forEach(function (obj) {\r\n                    if (obj.id === id_2) {\r\n                        _this._dispatchEvent(\"pointermove\", obj.value, event_1);\r\n                    }\r\n                });\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasRenderer.prototype, \"_dispatchDragEnd\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (originalEvent) {\r\n            var _this = this;\r\n            var button = originalEvent.button;\r\n            var clickevent;\r\n            if (button == 0 || button === undefined) {\r\n                clickevent = \"click\";\r\n            }\r\n            else if (button == 2) {\r\n                clickevent = \"rightclick\";\r\n            }\r\n            else if (button == 1) {\r\n                clickevent = \"middleclick\";\r\n            }\r\n            else {\r\n                // Ignore non-primary mouse buttons\r\n                return;\r\n            }\r\n            var event = this.getEvent(originalEvent);\r\n            var id = event.id;\r\n            if (this._mousedown.length !== 0) {\r\n                var target_1 = this._getHitTarget(event.point, event.bbox);\r\n                if (target_1) {\r\n                    this._mousedown.forEach(function (obj) {\r\n                        if (obj.id === id && obj.value.contains(target_1)) {\r\n                            _this._dispatchEvent(clickevent, obj.value, event);\r\n                        }\r\n                    });\r\n                }\r\n                this._mousedown.length = 0;\r\n            }\r\n            if (this._dragging.length !== 0) {\r\n                this._dragging.forEach(function (obj) {\r\n                    if (obj.id === id) {\r\n                        _this._dispatchEvent(\"pointerup\", obj.value, event);\r\n                    }\r\n                });\r\n                this._dragging.length = 0;\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasRenderer.prototype, \"_dispatchDoubleClick\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (originalEvent) {\r\n            var _this = this;\r\n            var event = this.getEvent(originalEvent);\r\n            var target = this._getHitTarget(event.point, event.bbox);\r\n            if (target) {\r\n                eachTargets(target, function (obj) {\r\n                    if (_this._dispatchEvent(\"dblclick\", obj, event)) {\r\n                        return false;\r\n                    }\r\n                    else {\r\n                        return true;\r\n                    }\r\n                });\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasRenderer.prototype, \"_dispatchWheel\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (originalEvent) {\r\n            var _this = this;\r\n            var event = this.getEvent(originalEvent);\r\n            var target = this._getHitTarget(event.point, event.bbox);\r\n            if (target) {\r\n                eachTargets(target, function (obj) {\r\n                    if (_this._dispatchEvent(\"wheel\", obj, event)) {\r\n                        return false;\r\n                    }\r\n                    else {\r\n                        return true;\r\n                    }\r\n                });\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasRenderer.prototype, \"_makeSharedEvent\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (key, f) {\r\n            var _this = this;\r\n            if (this._listeners[key] === undefined) {\r\n                var listener_1 = f();\r\n                this._listeners[key] = new CounterDisposer(function () {\r\n                    delete _this._listeners[key];\r\n                    listener_1.dispose();\r\n                });\r\n            }\r\n            return this._listeners[key].increment();\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasRenderer.prototype, \"_onPointerEvent\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (name, f) {\r\n            var native = false;\r\n            var timer = null;\r\n            function clear() {\r\n                timer = null;\r\n                native = false;\r\n            }\r\n            return new MultiDisposer([\r\n                new Disposer(function () {\r\n                    if (timer !== null) {\r\n                        clearTimeout(timer);\r\n                    }\r\n                    clear();\r\n                }),\r\n                $utils.addEventListener(this.view, $utils.getRendererEvent(name), function (_) {\r\n                    native = true;\r\n                    if (timer !== null) {\r\n                        clearTimeout(timer);\r\n                    }\r\n                    timer = window.setTimeout(clear, 0);\r\n                }),\r\n                onPointerEvent(window, name, function (ev) {\r\n                    if (timer !== null) {\r\n                        clearTimeout(timer);\r\n                        timer = null;\r\n                    }\r\n                    f(ev, native);\r\n                    native = false;\r\n                }),\r\n            ]);\r\n        }\r\n    });\r\n    // This ensures that only a single DOM event is added (e.g. only a single mousemove event listener)\r\n    Object.defineProperty(CanvasRenderer.prototype, \"_initEvent\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (key) {\r\n            var _this = this;\r\n            switch (key) {\r\n                case \"globalpointermove\":\r\n                case \"pointerover\":\r\n                case \"pointerout\":\r\n                    return this._makeSharedEvent(\"pointermove\", function () {\r\n                        var listener = function (events, native) {\r\n                            _this._lastPointerMoveEvent = { events: events, native: native };\r\n                            $array.each(events, function (event) {\r\n                                _this._dispatchGlobalMousemove(event, native);\r\n                            });\r\n                        };\r\n                        return new MultiDisposer([\r\n                            _this._onPointerEvent(\"pointerdown\", listener),\r\n                            _this._onPointerEvent(\"pointermove\", listener),\r\n                        ]);\r\n                    });\r\n                case \"globalpointerup\":\r\n                    return this._makeSharedEvent(\"pointerup\", function () {\r\n                        var mouseup = _this._onPointerEvent(\"pointerup\", function (events, native) {\r\n                            $array.each(events, function (event) {\r\n                                _this._dispatchGlobalMouseup(event, native);\r\n                            });\r\n                            _this._lastPointerMoveEvent = { events: events, native: native };\r\n                        });\r\n                        var pointercancel = _this._onPointerEvent(\"pointercancel\", function (events, native) {\r\n                            $array.each(events, function (event) {\r\n                                _this._dispatchGlobalMouseup(event, native);\r\n                            });\r\n                            _this._lastPointerMoveEvent = { events: events, native: native };\r\n                        });\r\n                        return new Disposer(function () {\r\n                            mouseup.dispose();\r\n                            pointercancel.dispose();\r\n                        });\r\n                    });\r\n                case \"click\":\r\n                case \"rightclick\":\r\n                case \"middleclick\":\r\n                case \"pointerdown\":\r\n                /*\r\n                    return this._makeSharedEvent(\"pointerdown\", () => {\r\n                        return this._onPointerEvent(\"pointerdown\", (event, native) => {\r\n                            this._lastPointerMoveEvent = { event, native };\r\n                            this._dispatchMousedown(event)\r\n                        });\r\n                    });\r\n                */\r\n                case \"pointermove\":\r\n                case \"pointerup\":\r\n                    return this._makeSharedEvent(\"pointerdown\", function () {\r\n                        //const throttler = new Throttler();\r\n                        var mousedown = onPointerEvent(_this.view, \"pointerdown\", function (events) {\r\n                            $array.each(events, function (ev) {\r\n                                _this._dispatchMousedown(ev);\r\n                            });\r\n                        });\r\n                        // TODO handle throttling properly for multitouch\r\n                        var mousemove = _this._onPointerEvent(\"pointermove\", function (ev) {\r\n                            //throttler.throttle(() => {\r\n                            $array.each(ev, function (ev) {\r\n                                _this._dispatchDragMove(ev);\r\n                            });\r\n                            //});\r\n                        });\r\n                        var mouseup = _this._onPointerEvent(\"pointerup\", function (ev) {\r\n                            $array.each(ev, function (ev) {\r\n                                _this._dispatchDragEnd(ev);\r\n                            });\r\n                        });\r\n                        var pointercancel = _this._onPointerEvent(\"pointercancel\", function (ev) {\r\n                            $array.each(ev, function (ev) {\r\n                                _this._dispatchDragEnd(ev);\r\n                            });\r\n                        });\r\n                        return new Disposer(function () {\r\n                            mousedown.dispose();\r\n                            mousemove.dispose();\r\n                            mouseup.dispose();\r\n                            pointercancel.dispose();\r\n                        });\r\n                    });\r\n                case \"dblclick\":\r\n                    return this._makeSharedEvent(\"dblclick\", function () {\r\n                        return _this._onPointerEvent(\"dblclick\", function (ev) {\r\n                            $array.each(ev, function (ev) {\r\n                                _this._dispatchDoubleClick(ev);\r\n                            });\r\n                        });\r\n                    });\r\n                case \"wheel\":\r\n                    return this._makeSharedEvent(\"wheel\", function () {\r\n                        return $utils.addEventListener(window, $utils.getRendererEvent(\"wheel\"), function (event) {\r\n                            _this._dispatchWheel(event);\r\n                        }, { passive: false });\r\n                    });\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasRenderer.prototype, \"_addEvent\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (object, key, callback, context) {\r\n            var _this = this;\r\n            var events = this._events[key];\r\n            if (events === undefined) {\r\n                events = this._events[key] = {\r\n                    disposer: this._initEvent(key),\r\n                    callbacks: [],\r\n                    dispatching: false,\r\n                    cleanup: false,\r\n                };\r\n            }\r\n            var listener = { object: object, context: context, callback: callback, disposed: false };\r\n            events.callbacks.push(listener);\r\n            return new Disposer(function () {\r\n                listener.disposed = true;\r\n                if (events.dispatching) {\r\n                    events.cleanup = true;\r\n                }\r\n                else {\r\n                    $array.removeFirst(events.callbacks, listener);\r\n                    if (events.callbacks.length === 0) {\r\n                        events.disposer.dispose();\r\n                        delete _this._events[key];\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasRenderer.prototype, \"getCanvas\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (root, options) {\r\n            var _this = this;\r\n            // Make sure everything is rendered\r\n            this.render(root);\r\n            if (!options) {\r\n                options = {};\r\n            }\r\n            var scale = this.resolution;\r\n            // Check if we need to scale\r\n            if (options.minWidth && (options.minWidth > this._width)) {\r\n                var minScale = options.minWidth / this._width;\r\n                if (minScale > scale) {\r\n                    scale = minScale * this.resolution;\r\n                }\r\n            }\r\n            if (options.minHeight && (options.minHeight > this._height)) {\r\n                var minScale = options.minHeight / this._height;\r\n                if (minScale > scale) {\r\n                    scale = minScale * this.resolution;\r\n                }\r\n            }\r\n            if (options.maxWidth && (options.maxWidth < this._width)) {\r\n                var maxScale = options.maxWidth / this._width;\r\n                if (maxScale < scale) {\r\n                    scale = maxScale * this.resolution;\r\n                }\r\n            }\r\n            if (options.maxHeight && (options.maxHeight > this._height)) {\r\n                var maxScale = options.maxHeight / this._height;\r\n                if (maxScale < scale) {\r\n                    scale = maxScale * this.resolution;\r\n                }\r\n            }\r\n            // Check if we need to compensate for pixel ratio\r\n            if (options.maintainPixelRatio) {\r\n                scale /= this.resolution;\r\n            }\r\n            // Init list canvases to remove from DOM after export\r\n            var canvases = [];\r\n            // Set up new canvas for export\r\n            var forceRender = false;\r\n            var canvasWidth = this._width;\r\n            var canvasHeight = this._height;\r\n            var canvas = document.createElement(\"canvas\");\r\n            if (scale != this.resolution) {\r\n                forceRender = true;\r\n                canvasWidth = this._width * scale / this.resolution;\r\n                canvasHeight = this._height * scale / this.resolution;\r\n            }\r\n            canvas.width = canvasWidth;\r\n            canvas.height = canvasHeight;\r\n            // Add to DOM so it inherits CSS\r\n            canvas.style.position = \"fixed\";\r\n            canvas.style.top = \"-10000px\";\r\n            this.view.appendChild(canvas);\r\n            canvases.push(canvas);\r\n            // Context\r\n            var context = canvas.getContext(\"2d\");\r\n            var width = 0;\r\n            var height = 0;\r\n            var needRerender = false;\r\n            $array.each(this.layers, function (layer) {\r\n                if (layer && layer.visible) {\r\n                    if (layer.tainted || forceRender) {\r\n                        needRerender = true;\r\n                        layer.exportableView = layer.view;\r\n                        layer.exportableContext = layer.context;\r\n                        layer.view = document.createElement(\"canvas\");\r\n                        // Add to DOM so it inherits CSS\r\n                        layer.view.style.position = \"fixed\";\r\n                        layer.view.style.top = \"-10000px\";\r\n                        _this.view.appendChild(layer.view);\r\n                        canvases.push(layer.view);\r\n                        layer.view.width = canvasWidth;\r\n                        layer.view.height = canvasHeight;\r\n                        layer.context = layer.view.getContext(\"2d\");\r\n                        layer.dirty = true;\r\n                        layer.scale = scale;\r\n                    }\r\n                }\r\n            });\r\n            if (needRerender) {\r\n                this._omitTainted = true;\r\n                this.render(root);\r\n                this._omitTainted = false;\r\n            }\r\n            $array.each(this.layers, function (layer) {\r\n                if (layer && layer.visible) {\r\n                    // Layer is fine. Just plop it into our target canvas\r\n                    context.drawImage(layer.view, 0, 0);\r\n                    // Restore layer original canvas\r\n                    if (layer.exportableView) {\r\n                        layer.view = layer.exportableView;\r\n                        layer.exportableView = undefined;\r\n                    }\r\n                    if (layer.exportableContext) {\r\n                        layer.context = layer.exportableContext;\r\n                        layer.exportableContext = undefined;\r\n                    }\r\n                    if (width < layer.view.clientWidth) {\r\n                        width = layer.view.clientWidth;\r\n                    }\r\n                    if (height < layer.view.clientHeight) {\r\n                        height = layer.view.clientHeight;\r\n                    }\r\n                    layer.scale = undefined;\r\n                }\r\n            });\r\n            canvas.style.width = width + \"px\";\r\n            canvas.style.height = height + \"px\";\r\n            $array.each(canvases, function (canvas) {\r\n                canvas.style.position = \"\";\r\n                canvas.style.top = \"\";\r\n                _this.view.removeChild(canvas);\r\n            });\r\n            return canvas;\r\n        }\r\n    });\r\n    return CanvasRenderer;\r\n}(ArrayDisposer));\r\nexport { CanvasRenderer };\r\n/**\r\n * @ignore\r\n */\r\nvar CanvasLayer = /** @class */ (function () {\r\n    function CanvasLayer(view, context) {\r\n        Object.defineProperty(this, \"view\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"context\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"tainted\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: true\r\n        });\r\n        Object.defineProperty(this, \"margin\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"order\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"visible\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: true\r\n        });\r\n        Object.defineProperty(this, \"width\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"height\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"scale\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"dirty\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: true\r\n        });\r\n        Object.defineProperty(this, \"exportableView\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"exportableContext\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_width\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"_height\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        this.view = view;\r\n        this.context = context;\r\n    }\r\n    Object.defineProperty(CanvasLayer.prototype, \"resize\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (width, height, resolution) {\r\n            if (this.width != null) {\r\n                width = this.width;\r\n            }\r\n            if (this.height != null) {\r\n                height = this.height;\r\n            }\r\n            if (this.margin) {\r\n                width += (this.margin.left + this.margin.right);\r\n                height += (this.margin.top + this.margin.bottom);\r\n                this.view.style.left = -this.margin.left + \"px\";\r\n                this.view.style.top = -this.margin.top + \"px\";\r\n            }\r\n            else {\r\n                this.view.style.left = \"0px\";\r\n                this.view.style.top = \"0px\";\r\n            }\r\n            this._width = Math.floor(width * resolution);\r\n            this._height = Math.floor(height * resolution);\r\n            this.view.width = this._width;\r\n            this.view.style.width = width + \"px\";\r\n            this.view.height = this._height;\r\n            this.view.style.height = height + \"px\";\r\n        }\r\n    });\r\n    Object.defineProperty(CanvasLayer.prototype, \"clear\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            this.context.save();\r\n            this.context.clearRect(0, 0, this._width, this._height);\r\n        }\r\n    });\r\n    return CanvasLayer;\r\n}());\r\nexport { CanvasLayer };\r\n//# sourceMappingURL=CanvasRenderer.js.map","import { Container } from \"./render/Container\";\r\nimport { Text } from \"./render/Text\";\r\nimport { HorizontalLayout } from \"./render/HorizontalLayout\";\r\nimport { VerticalLayout } from \"./render/VerticalLayout\";\r\nimport { GridLayout } from \"./render/GridLayout\";\r\nimport { Disposer } from \"./util/Disposer\";\r\nimport { ResizeSensor } from \"./util/ResizeSensor\";\r\nimport { InterfaceColors } from \"./util/InterfaceColors\";\r\nimport { Graphics } from \"./render/Graphics\";\r\nimport { Rectangle } from \"./render/Rectangle\";\r\nimport { Tooltip } from \"./render/Tooltip\";\r\nimport { NumberFormatter } from \"./util/NumberFormatter\";\r\nimport { DateFormatter } from \"./util/DateFormatter\";\r\nimport { DurationFormatter } from \"./util/DurationFormatter\";\r\nimport { Language } from \"./util/Language\";\r\nimport { EventDispatcher } from \"./util/EventDispatcher\";\r\nimport { DefaultTheme } from \"../themes/DefaultTheme\";\r\nimport { CanvasRenderer } from \"./render/backend/CanvasRenderer\";\r\nimport { p100, percent } from \"./util/Percent\";\r\nimport { color } from \"./util/Color\";\r\nimport { populateString } from \"./util/PopulateString\";\r\nimport { registry } from \"./Registry\";\r\nimport * as $order from \"./util/Order\";\r\nimport * as $array from \"./util/Array\";\r\nimport * as $object from \"./util/Object\";\r\nimport * as $utils from \"./util/Utils\";\r\nimport * as $type from \"./util/Type\";\r\nimport en from \"../../locales/en\";\r\nfunction rAF(fps, callback) {\r\n    if (fps == null) {\r\n        requestAnimationFrame(callback);\r\n    }\r\n    else {\r\n        setTimeout(function () {\r\n            requestAnimationFrame(callback);\r\n        }, 1000 / fps);\r\n    }\r\n}\r\n// TODO implement Disposer\r\n/**\r\n * Root element of the chart.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/getting-started/#Root_element} for more info\r\n */\r\nvar Root = /** @class */ (function () {\r\n    function Root(id, settings, isReal) {\r\n        if (settings === void 0) { settings = {}; }\r\n        /**\r\n         * A reference to original chart container (div element).\r\n         */\r\n        Object.defineProperty(this, \"dom\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_inner\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_isDirty\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"_isDirtyParents\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"_dirty\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(this, \"_dirtyParents\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(this, \"_dirtyBounds\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(this, \"_dirtyPositions\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(this, \"_ticker\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: null\r\n        });\r\n        Object.defineProperty(this, \"_tickers\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        /**\r\n         * Root's event dispatcher.\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v5/concepts/events/} for more info\r\n         */\r\n        Object.defineProperty(this, \"events\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: new EventDispatcher()\r\n        });\r\n        /**\r\n         * @ignore\r\n         * @todo needs description\r\n         */\r\n        Object.defineProperty(this, \"animationTime\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: null\r\n        });\r\n        Object.defineProperty(this, \"_animations\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        Object.defineProperty(this, \"_renderer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_rootContainer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        /**\r\n         * Main content container.\r\n         */\r\n        Object.defineProperty(this, \"container\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        /**\r\n         * A [[Container]] used to display tooltips in.\r\n         */\r\n        Object.defineProperty(this, \"tooltipContainer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_tooltipContainerSettings\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_tooltip\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        // Locale-related\r\n        /**\r\n         * @ignore\r\n         */\r\n        Object.defineProperty(this, \"language\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: Language.new(this, {})\r\n        });\r\n        /**\r\n         * Locale used by the chart.\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v5/concepts/locales/}\r\n         */\r\n        Object.defineProperty(this, \"locale\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: en\r\n        });\r\n        // Date-time related\r\n        /**\r\n         * Use UTC when formatting date/time.\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v5/concepts/formatters/formatting-dates/#UTC_and_time_zones} for more info\r\n         */\r\n        Object.defineProperty(this, \"utc\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        /**\r\n         * If set, will format date/time in specific time zone.\r\n         *\r\n         * The value should be named time zone, e.g.:\r\n         * `\"America/Vancouver\"`, `\"Australia/Sydney\"`, `\"UTC\"`.\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v5/getting-started/root-element/#Time_zone} for more info\r\n         * @since 5.1.0\r\n         */\r\n        Object.defineProperty(this, \"timezone\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        /**\r\n         * The maximum FPS that the Root will run at.\r\n         *\r\n         * If `undefined` it will run at the highest FPS.\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v5/getting-started/root-element/#Performance} for more info\r\n         */\r\n        Object.defineProperty(this, \"fps\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        /**\r\n         * Number formatter.\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v5/concepts/formatters/formatting-numbers/} for more info\r\n         */\r\n        Object.defineProperty(this, \"numberFormatter\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: NumberFormatter.new(this, {})\r\n        });\r\n        /**\r\n         * Date/time formatter.\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v5/concepts/formatters/formatting-dates/} for more info\r\n         */\r\n        Object.defineProperty(this, \"dateFormatter\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: DateFormatter.new(this, {})\r\n        });\r\n        /**\r\n         * Duration formatter.\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v5/concepts/formatters/formatting-dates/} for more info\r\n         */\r\n        Object.defineProperty(this, \"durationFormatter\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: DurationFormatter.new(this, {})\r\n        });\r\n        // Accessibility\r\n        /**\r\n         * Global tab index for using for the whole chart\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v5/concepts/accessibility/} for more info\r\n         */\r\n        Object.defineProperty(this, \"tabindex\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        //@todo maybe make this better\r\n        Object.defineProperty(this, \"_tabindexes\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        Object.defineProperty(this, \"_focusElementDirty\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"_focusElementContainer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_focusedSprite\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_isShift\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_keyboardDragPoint\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_tooltipElementContainer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_readerAlertElement\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_logo\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_tooltipDiv\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        /**\r\n         * Used for dynamically-created CSS and JavaScript with strict source policies.\r\n         */\r\n        Object.defineProperty(this, \"nonce\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        /**\r\n         * Special color set to be used for various controls.\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v5/concepts/colors-gradients-and-patterns/#Interface_colors} for more info\r\n         */\r\n        Object.defineProperty(this, \"interfaceColors\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        /**\r\n         * An instance of vertical layout object that can be used to set `layout` setting\r\n         * of a [[Container]].\r\n         *\r\n         * @default VerticalLayout.new()\r\n         */\r\n        Object.defineProperty(this, \"verticalLayout\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: VerticalLayout.new(this, {})\r\n        });\r\n        /**\r\n         * An instance of horizontal layout object that can be used to set `layout` setting\r\n         * of a [[Container]].\r\n         *\r\n         * @default HorizontalLayout.new()\r\n         */\r\n        Object.defineProperty(this, \"horizontalLayout\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: HorizontalLayout.new(this, {})\r\n        });\r\n        /**\r\n         * An instance of grid layout object that can be used to set `layout` setting\r\n         * of a [[Container]].\r\n         *\r\n         * @default VerticalLayout.new()\r\n         */\r\n        Object.defineProperty(this, \"gridLayout\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: GridLayout.new(this, {})\r\n        });\r\n        /**\r\n         * Indicates whether chart should resized automatically when parent container\r\n         * width and/or height changes.\r\n         *\r\n         * If disabled (`autoResize = false`) you can make the chart resize manually\r\n         * by calling root element's `resize()` method.\r\n         */\r\n        Object.defineProperty(this, \"autoResize\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: true\r\n        });\r\n        Object.defineProperty(this, \"_fontHash\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: \"\"\r\n        });\r\n        Object.defineProperty(this, \"_isDisposed\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"_disposers\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        Object.defineProperty(this, \"_resizeSensorDisposer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_tooltips\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        Object.defineProperty(this, \"_htmlElementContainer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_htmlEnabledContainers\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        if (!isReal) {\r\n            throw new Error(\"You cannot use `new Class()`, instead use `Class.new()`\");\r\n        }\r\n        if (settings.useSafeResolution == null) {\r\n            settings.useSafeResolution = true;\r\n        }\r\n        var resolution;\r\n        if (settings.useSafeResolution) {\r\n            resolution = $utils.getSafeResolution();\r\n        }\r\n        this._renderer = new CanvasRenderer(resolution);\r\n        var dom;\r\n        if (id instanceof HTMLElement) {\r\n            dom = id;\r\n        }\r\n        else {\r\n            dom = document.getElementById(id);\r\n        }\r\n        $array.each(registry.rootElements, function (root) {\r\n            if (root.dom === dom) {\r\n                throw new Error(\"You cannot have multiple Roots on the same DOM node\");\r\n            }\r\n        });\r\n        this.interfaceColors = InterfaceColors.new(this, {});\r\n        if (dom === null) {\r\n            throw new Error(\"Could not find HTML element with id `\" + id + \"`\");\r\n        }\r\n        this.dom = dom;\r\n        var inner = document.createElement(\"div\");\r\n        inner.style.position = \"relative\";\r\n        inner.style.height = \"100%\";\r\n        dom.appendChild(inner);\r\n        var tooltipContainerBounds = settings.tooltipContainerBounds;\r\n        if (tooltipContainerBounds) {\r\n            this._tooltipContainerSettings = tooltipContainerBounds;\r\n        }\r\n        this._inner = inner;\r\n        this._updateComputedStyles();\r\n        registry.rootElements.push(this);\r\n    }\r\n    Object.defineProperty(Root, \"new\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (id, settings) {\r\n            var root = new Root(id, settings, true);\r\n            root._init();\r\n            return root;\r\n        }\r\n    });\r\n    Object.defineProperty(Root.prototype, \"moveDOM\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (id) {\r\n            var dom;\r\n            if (id instanceof HTMLElement) {\r\n                dom = id;\r\n            }\r\n            else {\r\n                dom = document.getElementById(id);\r\n            }\r\n            if (dom) {\r\n                while (this.dom.childNodes.length > 0) {\r\n                    dom.appendChild(this.dom.childNodes[0]);\r\n                }\r\n                this.dom = dom;\r\n                this._initResizeSensor();\r\n                this.resize();\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Root.prototype, \"_handleLogo\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            if (this._logo) {\r\n                var w = this.dom.offsetWidth;\r\n                var h = this.dom.offsetHeight;\r\n                if ((w <= 150) || (h <= 60)) {\r\n                    this._logo.hide();\r\n                }\r\n                else {\r\n                    this._logo.show();\r\n                }\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Root.prototype, \"_showBranding\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            if (!this._logo) {\r\n                var logo = this.tooltipContainer.children.push(Container.new(this, {\r\n                    interactive: true,\r\n                    interactiveChildren: false,\r\n                    position: \"absolute\",\r\n                    setStateOnChildren: true,\r\n                    paddingTop: 9,\r\n                    paddingRight: 9,\r\n                    paddingBottom: 9,\r\n                    paddingLeft: 9,\r\n                    scale: .6,\r\n                    y: percent(100),\r\n                    centerY: p100,\r\n                    tooltipText: \"Created using amCharts 5\",\r\n                    tooltipX: p100,\r\n                    cursorOverStyle: \"pointer\",\r\n                    background: Rectangle.new(this, {\r\n                        fill: color(0x474758),\r\n                        fillOpacity: 0,\r\n                        tooltipY: 5\r\n                    })\r\n                }));\r\n                var tooltip = Tooltip.new(this, {\r\n                    pointerOrientation: \"horizontal\",\r\n                    paddingTop: 4,\r\n                    paddingRight: 7,\r\n                    paddingBottom: 4,\r\n                    paddingLeft: 7\r\n                });\r\n                tooltip.label.setAll({\r\n                    fontSize: 12\r\n                });\r\n                tooltip.get(\"background\").setAll({\r\n                    fill: this.interfaceColors.get(\"background\"),\r\n                    stroke: this.interfaceColors.get(\"grid\"),\r\n                    strokeOpacity: 0.3\r\n                });\r\n                logo.set(\"tooltip\", tooltip);\r\n                logo.events.on(\"click\", function () {\r\n                    window.open(\"https://www.amcharts.com/\", \"_blank\");\r\n                });\r\n                logo.states.create(\"hover\", {});\r\n                var m = logo.children.push(Graphics.new(this, {\r\n                    stroke: color(0xcccccc),\r\n                    strokeWidth: 3,\r\n                    svgPath: \"M5 25 L13 25h13.6c3.4 0 6 0 10.3-4.3s5.2-12 8.6-12c3.4 0 4.3 8.6 7.7 8.6M83.4 25H79.8c-3.4 0-6 0-10.3-4.3s-5.2-12-8.6-12-4.3 8.6-7.7 8.6\"\r\n                }));\r\n                m.states.create(\"hover\", { stroke: color(0x3CABFF) });\r\n                var a = logo.children.push(Graphics.new(this, {\r\n                    stroke: color(0x888888),\r\n                    strokeWidth: 3,\r\n                    svgPath: \"M83.4 25h-31C37 25 39.5 4.4 28.4 4.4S18.9 24.2 4.3 25H0\"\r\n                }));\r\n                a.states.create(\"hover\", { stroke: color(0x474758) });\r\n                //logo.set(\"tooltip\", this._tooltip);\r\n                //logo.setPrivate(\"tooltipTarget\", logo.get(\"background\"));\r\n                this._logo = logo;\r\n                this._handleLogo();\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Root.prototype, \"_init\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            var _this = this;\r\n            var renderer = this._renderer;\r\n            var rect = this.dom.getBoundingClientRect();\r\n            var width = Math.floor(rect.width);\r\n            var height = Math.floor(rect.height);\r\n            var rootContainer = Container.new(this, { visible: true, width: width, height: height });\r\n            this._rootContainer = rootContainer;\r\n            this._rootContainer._defaultThemes.push(DefaultTheme.new(this));\r\n            var container = rootContainer.children.push(Container.new(this, { visible: true, width: p100, height: p100 }));\r\n            this.container = container;\r\n            renderer.resize(width, height);\r\n            //@todo: better appendChild - refer\r\n            this._inner.appendChild(renderer.view);\r\n            // TODO: TMP TMP TMP for testing only, remove\r\n            //document.body.appendChild((<any>renderer)._ghostView);\r\n            this._initResizeSensor();\r\n            // HTML content holder\r\n            this._htmlElementContainer = document.createElement(\"div\");\r\n            this._htmlElementContainer.className = \"am5-html-container\";\r\n            this._htmlElementContainer.style.position = \"absolute\";\r\n            this._htmlElementContainer.style.pointerEvents = \"none\";\r\n            if (!this._tooltipContainerSettings) {\r\n                this._htmlElementContainer.style.overflow = \"hidden\";\r\n            }\r\n            this._inner.appendChild(this._htmlElementContainer);\r\n            // Create element which is used to make announcements to screen reader\r\n            var readerAlertElement = document.createElement(\"div\");\r\n            readerAlertElement.className = \"am5-reader-container\";\r\n            readerAlertElement.setAttribute(\"role\", \"alert\");\r\n            readerAlertElement.style.zIndex = \"-100000\";\r\n            readerAlertElement.style.opacity = \"0\";\r\n            readerAlertElement.style.position = \"absolute\";\r\n            readerAlertElement.style.top = \"0\";\r\n            this._readerAlertElement = readerAlertElement;\r\n            this._inner.appendChild(this._readerAlertElement);\r\n            var focusElementContainer = document.createElement(\"div\");\r\n            focusElementContainer.className = \"am5-focus-container\";\r\n            focusElementContainer.style.position = \"absolute\";\r\n            focusElementContainer.style.pointerEvents = \"none\";\r\n            focusElementContainer.style.top = \"0px\";\r\n            focusElementContainer.style.left = \"0px\";\r\n            focusElementContainer.style.overflow = \"hidden\";\r\n            focusElementContainer.style.width = width + \"px\";\r\n            focusElementContainer.style.height = height + \"px\";\r\n            focusElementContainer.setAttribute(\"role\", \"application\");\r\n            $utils.setInteractive(focusElementContainer, false);\r\n            this._focusElementContainer = focusElementContainer;\r\n            this._inner.appendChild(this._focusElementContainer);\r\n            this._tooltipElementContainer = document.createElement(\"div\");\r\n            this._tooltipElementContainer.className = \"am5-tooltip-container\";\r\n            this._inner.appendChild(this._tooltipElementContainer);\r\n            // Add keyboard events for accessibility, e.g. simulating drag with arrow\r\n            // keys and click with ENTER\r\n            if ($utils.supports(\"keyboardevents\")) {\r\n                this._disposers.push($utils.addEventListener(window, \"keydown\", function (ev) {\r\n                    if (ev.keyCode == 16) {\r\n                        _this._isShift = true;\r\n                    }\r\n                }));\r\n                this._disposers.push($utils.addEventListener(window, \"keyup\", function (ev) {\r\n                    if (ev.keyCode == 16) {\r\n                        _this._isShift = false;\r\n                    }\r\n                }));\r\n                this._disposers.push($utils.addEventListener(focusElementContainer, \"keydown\", function (ev) {\r\n                    var focusedSprite = _this._focusedSprite;\r\n                    if (focusedSprite) {\r\n                        if (ev.keyCode == 27) {\r\n                            // ESC pressed - lose current focus\r\n                            $utils.blur();\r\n                            _this._focusedSprite = undefined;\r\n                        }\r\n                        var dragOffsetX = 0;\r\n                        var dragOffsetY = 0;\r\n                        // TODO: figure out if using bogus MouseEvent is fine, or it will\r\n                        // fail on some platforms\r\n                        switch (ev.keyCode) {\r\n                            case 13:\r\n                                ev.preventDefault();\r\n                                var downEvent = renderer.getEvent(new MouseEvent(\"click\"));\r\n                                focusedSprite.events.dispatch(\"click\", {\r\n                                    type: \"click\",\r\n                                    originalEvent: downEvent.event,\r\n                                    point: downEvent.point,\r\n                                    simulated: true,\r\n                                    target: focusedSprite\r\n                                });\r\n                                return;\r\n                            case 37:\r\n                                dragOffsetX = -6;\r\n                                break;\r\n                            case 39:\r\n                                dragOffsetX = 6;\r\n                                break;\r\n                            case 38:\r\n                                dragOffsetY = -6;\r\n                                break;\r\n                            case 40:\r\n                                dragOffsetY = 6;\r\n                                break;\r\n                            default:\r\n                                return;\r\n                        }\r\n                        if (dragOffsetX != 0 || dragOffsetY != 0) {\r\n                            ev.preventDefault();\r\n                            if (!focusedSprite.isDragging()) {\r\n                                // Start dragging\r\n                                _this._keyboardDragPoint = {\r\n                                    x: 0,\r\n                                    y: 0\r\n                                };\r\n                                var downEvent = renderer.getEvent(new MouseEvent(\"mousedown\", {\r\n                                    clientX: 0,\r\n                                    clientY: 0\r\n                                }));\r\n                                if (focusedSprite.events.isEnabled(\"pointerdown\")) {\r\n                                    focusedSprite.events.dispatch(\"pointerdown\", {\r\n                                        type: \"pointerdown\",\r\n                                        originalEvent: downEvent.event,\r\n                                        point: downEvent.point,\r\n                                        simulated: true,\r\n                                        target: focusedSprite\r\n                                    });\r\n                                }\r\n                            }\r\n                            else {\r\n                                // Move focus marker\r\n                                //this._positionFocusElement(focusedSprite);\r\n                            }\r\n                            // Move incrementally\r\n                            var dragPoint = _this._keyboardDragPoint;\r\n                            dragPoint.x += dragOffsetX;\r\n                            dragPoint.y += dragOffsetY;\r\n                            var moveEvent = renderer.getEvent(new MouseEvent(\"mousemove\", {\r\n                                clientX: dragPoint.x,\r\n                                clientY: dragPoint.y\r\n                            }), false);\r\n                            if (focusedSprite.events.isEnabled(\"globalpointermove\")) {\r\n                                focusedSprite.events.dispatch(\"globalpointermove\", {\r\n                                    type: \"globalpointermove\",\r\n                                    originalEvent: moveEvent.event,\r\n                                    point: moveEvent.point,\r\n                                    simulated: true,\r\n                                    target: focusedSprite\r\n                                });\r\n                            }\r\n                        }\r\n                    }\r\n                }));\r\n                this._disposers.push($utils.addEventListener(focusElementContainer, \"keyup\", function (ev) {\r\n                    if (_this._focusedSprite) {\r\n                        var focusedSprite = _this._focusedSprite;\r\n                        var keyCode = ev.keyCode;\r\n                        switch (keyCode) {\r\n                            case 37:\r\n                            case 39:\r\n                            case 38:\r\n                            case 40:\r\n                                if (focusedSprite.isDragging()) {\r\n                                    // Simulate drag stop\r\n                                    var dragPoint = _this._keyboardDragPoint;\r\n                                    var upEvent = renderer.getEvent(new MouseEvent(\"mouseup\", {\r\n                                        clientX: dragPoint.x,\r\n                                        clientY: dragPoint.y\r\n                                    }));\r\n                                    if (focusedSprite.events.isEnabled(\"globalpointerup\")) {\r\n                                        focusedSprite.events.dispatch(\"globalpointerup\", {\r\n                                            type: \"globalpointerup\",\r\n                                            originalEvent: upEvent.event,\r\n                                            point: upEvent.point,\r\n                                            simulated: true,\r\n                                            target: focusedSprite\r\n                                        });\r\n                                    }\r\n                                    //this._positionFocusElement(focusedSprite);\r\n                                    _this._keyboardDragPoint = undefined;\r\n                                    // @todo dispatch mouseup event instead of calling dragStop?\r\n                                    // this._dispatchEvent(\"globalpointerup\", target, upEvent);\r\n                                    return;\r\n                                }\r\n                                else if (focusedSprite.get(\"focusableGroup\")) {\r\n                                    // Find next item in focusable group\r\n                                    var group_1 = focusedSprite.get(\"focusableGroup\");\r\n                                    var items = _this._tabindexes.filter(function (item) { return item.get(\"focusableGroup\") == group_1; });\r\n                                    var index = items.indexOf(focusedSprite);\r\n                                    var lastIndex = items.length - 1;\r\n                                    index += (keyCode == 39 || keyCode == 40) ? 1 : -1;\r\n                                    if (index < 0) {\r\n                                        index = lastIndex;\r\n                                    }\r\n                                    else if (index > lastIndex) {\r\n                                        index = 0;\r\n                                    }\r\n                                    $utils.focus(items[index].getPrivate(\"focusElement\").dom);\r\n                                }\r\n                                break;\r\n                        }\r\n                    }\r\n                }));\r\n            }\r\n            this._startTicker();\r\n            this.setThemes([]);\r\n            this._addTooltip();\r\n            if (!this._hasLicense()) {\r\n                this._showBranding();\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Root.prototype, \"_initResizeSensor\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            var _this = this;\r\n            if (this._resizeSensorDisposer) {\r\n                this._resizeSensorDisposer.dispose();\r\n            }\r\n            this._resizeSensorDisposer = new ResizeSensor(this.dom, function () {\r\n                if (_this.autoResize) {\r\n                    _this.resize();\r\n                }\r\n            });\r\n            this._disposers.push(this._resizeSensorDisposer);\r\n        }\r\n    });\r\n    /**\r\n     * If automatic resizing of char is disabled (`root.autoResize = false`), it\r\n     * can be resized manually by calling this method.\r\n     */\r\n    Object.defineProperty(Root.prototype, \"resize\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            var dom = this.dom;\r\n            var rect = dom.getBoundingClientRect();\r\n            var w = Math.floor(rect.width);\r\n            var h = Math.floor(rect.height);\r\n            if (w > 0 && h > 0) {\r\n                var htmlElementContainer = this._htmlElementContainer;\r\n                htmlElementContainer.style.width = w + \"px\";\r\n                htmlElementContainer.style.height = h + \"px\";\r\n                var focusElementContainer = this._focusElementContainer;\r\n                focusElementContainer.style.width = w + \"px\";\r\n                focusElementContainer.style.height = h + \"px\";\r\n                this._renderer.resize(w, h);\r\n                var rootContainer = this._rootContainer;\r\n                rootContainer.setPrivate(\"width\", w);\r\n                rootContainer.setPrivate(\"height\", h);\r\n                this._render();\r\n                this._handleLogo();\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Root.prototype, \"_render\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            this._renderer.render(this._rootContainer._display);\r\n            if (this._focusElementDirty) {\r\n                this._updateCurrentFocus();\r\n                this._focusElementDirty = false;\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Root.prototype, \"_runTickers\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (currentTime) {\r\n            $array.each(this._tickers, function (f) {\r\n                f(currentTime);\r\n            });\r\n        }\r\n    });\r\n    Object.defineProperty(Root.prototype, \"_runAnimations\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (currentTime) {\r\n            $array.keepIf(this._animations, function (animation) {\r\n                return animation._runAnimation(currentTime);\r\n            });\r\n        }\r\n    });\r\n    Object.defineProperty(Root.prototype, \"_runDirties\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            var _this = this;\r\n            //console.log(\"tick **************************************************************\");\r\n            var allParents = {};\r\n            while (this._isDirtyParents) {\r\n                // This must be before calling _prepareChildren\r\n                this._isDirtyParents = false;\r\n                $object.keys(this._dirtyParents).forEach(function (key) {\r\n                    var parent = _this._dirtyParents[key];\r\n                    delete _this._dirtyParents[key];\r\n                    if (!parent.isDisposed()) {\r\n                        allParents[parent.uid] = parent;\r\n                        parent._prepareChildren();\r\n                    }\r\n                });\r\n            }\r\n            $object.keys(allParents).forEach(function (key) {\r\n                allParents[key]._updateChildren();\r\n            });\r\n            var objects = [];\r\n            //\t\tconsole.log(\"_beforeChanged\")\r\n            $object.keys(this._dirty).forEach(function (key) {\r\n                var entity = _this._dirty[key];\r\n                if (entity.isDisposed()) {\r\n                    delete _this._dirty[entity.uid];\r\n                }\r\n                else {\r\n                    objects.push(entity);\r\n                    entity._beforeChanged();\r\n                }\r\n            });\r\n            //\t\tconsole.log(\"_changed\")\r\n            objects.forEach(function (entity) {\r\n                entity._changed();\r\n                delete _this._dirty[entity.uid];\r\n                entity._clearDirty();\r\n            });\r\n            this._isDirty = false;\r\n            var depths = {};\r\n            var bounds = [];\r\n            $object.keys(this._dirtyBounds).forEach(function (key) {\r\n                var entity = _this._dirtyBounds[key];\r\n                delete _this._dirtyBounds[key];\r\n                if (!entity.isDisposed()) {\r\n                    depths[entity.uid] = entity.depth();\r\n                    bounds.push(entity);\r\n                }\r\n            });\r\n            // High depth -> low depth\r\n            bounds.sort(function (x, y) {\r\n                return $order.compare(depths[y.uid], depths[x.uid]);\r\n            });\r\n            //\t\tconsole.log(\"_updateBounds\")\r\n            bounds.forEach(function (entity) {\r\n                entity._updateBounds();\r\n            });\r\n            //\t\tconsole.log(\"_updatePosition\")\r\n            var dirtyPositions = this._dirtyPositions;\r\n            $object.keys(dirtyPositions).forEach(function (key) {\r\n                var sprite = dirtyPositions[key];\r\n                delete dirtyPositions[key];\r\n                if (!sprite.isDisposed()) {\r\n                    sprite._updatePosition();\r\n                }\r\n            });\r\n            //\t\tconsole.log(\"_afterChanged\")\r\n            objects.forEach(function (entity) {\r\n                entity._afterChanged();\r\n            });\r\n        }\r\n    });\r\n    Object.defineProperty(Root.prototype, \"_renderFrame\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (currentTime) {\r\n            if (this.events.isEnabled(\"framestarted\")) {\r\n                this.events.dispatch(\"framestarted\", {\r\n                    type: \"framestarted\",\r\n                    target: this,\r\n                    timestamp: currentTime,\r\n                });\r\n            }\r\n            this._checkComputedStyles();\r\n            this._runTickers(currentTime);\r\n            this._runAnimations(currentTime);\r\n            this._runDirties();\r\n            this._render();\r\n            this._positionHTMLElements();\r\n            if (this.events.isEnabled(\"frameended\")) {\r\n                this.events.dispatch(\"frameended\", {\r\n                    type: \"frameended\",\r\n                    target: this,\r\n                    timestamp: currentTime,\r\n                });\r\n            }\r\n            return this._tickers.length === 0 &&\r\n                this._animations.length === 0 &&\r\n                !this._isDirty;\r\n        }\r\n    });\r\n    Object.defineProperty(Root.prototype, \"_runTicker\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (currentTime) {\r\n            if (!this.isDisposed()) {\r\n                this.animationTime = currentTime;\r\n                var done = this._renderFrame(currentTime);\r\n                // No more work to do\r\n                if (done) {\r\n                    this._ticker = null;\r\n                    this.animationTime = null;\r\n                }\r\n                else {\r\n                    rAF(this.fps, this._ticker);\r\n                }\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Root.prototype, \"_runTickerNow\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            if (!this.isDisposed()) {\r\n                for (;;) {\r\n                    var currentTime = performance.now();\r\n                    this.animationTime = currentTime;\r\n                    var done = this._renderFrame(currentTime);\r\n                    if (done) {\r\n                        this.animationTime = null;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Root.prototype, \"_startTicker\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            var _this = this;\r\n            if (this._ticker === null) {\r\n                this.animationTime = null;\r\n                this._ticker = function (currentTime) {\r\n                    _this._runTicker(currentTime);\r\n                };\r\n                rAF(this.fps, this._ticker);\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Root.prototype, \"_addDirtyEntity\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (entity) {\r\n            if (this._dirty[entity.uid] === undefined) {\r\n                this._isDirty = true;\r\n                this._dirty[entity.uid] = entity;\r\n                this._startTicker();\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Root.prototype, \"_addDirtyParent\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (parent) {\r\n            if (this._dirtyParents[parent.uid] === undefined) {\r\n                this._isDirty = true;\r\n                this._isDirtyParents = true;\r\n                this._dirtyParents[parent.uid] = parent;\r\n                this._startTicker();\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Root.prototype, \"_addDirtyBounds\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (entity) {\r\n            if (this._dirtyBounds[entity.uid] === undefined) {\r\n                this._isDirty = true;\r\n                this._dirtyBounds[entity.uid] = entity;\r\n                this._startTicker();\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Root.prototype, \"_addDirtyPosition\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (sprite) {\r\n            if (this._dirtyPositions[sprite.uid] === undefined) {\r\n                this._isDirty = true;\r\n                this._dirtyPositions[sprite.uid] = sprite;\r\n                this._startTicker();\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Root.prototype, \"_addAnimation\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (animation) {\r\n            // TODO use numeric id instead\r\n            if (this._animations.indexOf(animation) === -1) {\r\n                this._animations.push(animation);\r\n                this._startTicker();\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Root.prototype, \"_markDirty\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            this._isDirty = true;\r\n        }\r\n    });\r\n    Object.defineProperty(Root.prototype, \"_markDirtyRedraw\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            var _this = this;\r\n            this.events.once(\"frameended\", function () {\r\n                _this._isDirty = true;\r\n                _this._startTicker();\r\n            });\r\n        }\r\n    });\r\n    Object.defineProperty(Root.prototype, \"eachFrame\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (f) {\r\n            var _this = this;\r\n            this._tickers.push(f);\r\n            this._startTicker();\r\n            return new Disposer(function () {\r\n                $array.removeFirst(_this._tickers, f);\r\n            });\r\n        }\r\n    });\r\n    Object.defineProperty(Root.prototype, \"markDirtyGlobal\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (container) {\r\n            var _this = this;\r\n            if (!container) {\r\n                container = this.container;\r\n            }\r\n            console.log(this.width());\r\n            container.walkChildren(function (child) {\r\n                if (child instanceof Container) {\r\n                    _this.markDirtyGlobal(child);\r\n                }\r\n                child.markDirty();\r\n                child.markDirtyBounds();\r\n            });\r\n        }\r\n    });\r\n    /**\r\n     * Returns width of the target container, in pixels.\r\n     *\r\n     * @return Width\r\n     */\r\n    Object.defineProperty(Root.prototype, \"width\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            // TODO make this more efficient, maybe just return the renderer's width ?\r\n            return Math.floor(this.dom.getBoundingClientRect().width);\r\n        }\r\n    });\r\n    /**\r\n     * Returns height of the target container, in pixels.\r\n     *\r\n     * @return Height\r\n     */\r\n    Object.defineProperty(Root.prototype, \"height\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            // TODO make this more efficient, maybe just return the renderer's height ?\r\n            return Math.floor(this.dom.getBoundingClientRect().height);\r\n        }\r\n    });\r\n    /**\r\n     * Disposes root and all the content in it.\r\n     */\r\n    Object.defineProperty(Root.prototype, \"dispose\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            if (!this._isDisposed) {\r\n                this._isDisposed = true;\r\n                this._rootContainer.dispose();\r\n                this._renderer.dispose();\r\n                this.horizontalLayout.dispose();\r\n                this.verticalLayout.dispose();\r\n                this.interfaceColors.dispose();\r\n                $array.each(this._disposers, function (x) {\r\n                    x.dispose();\r\n                });\r\n                if (this._inner) {\r\n                    $utils.removeElement(this._inner);\r\n                }\r\n                $array.remove(registry.rootElements, this);\r\n            }\r\n        }\r\n    });\r\n    /**\r\n     * Returns `true` if root element is disposed.\r\n     *\r\n     * @return Disposed?\r\n     */\r\n    Object.defineProperty(Root.prototype, \"isDisposed\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            return this._isDisposed;\r\n        }\r\n    });\r\n    /**\r\n     * Triggers screen reader read out a message.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/accessibility/} for more info\r\n     * @param  text  Alert text\r\n     */\r\n    Object.defineProperty(Root.prototype, \"readerAlert\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (text) {\r\n            this._readerAlertElement.innerHTML = $utils.stripTags(text);\r\n        }\r\n    });\r\n    /**\r\n     * Sets themes to be used for the chart.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/themes/} for more info\r\n     * @param  themes  A list of themes\r\n     */\r\n    Object.defineProperty(Root.prototype, \"setThemes\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (themes) {\r\n            this._rootContainer.set(\"themes\", themes);\r\n            // otherwise new themes are not applied\r\n            var tooltipContainer = this.tooltipContainer;\r\n            if (tooltipContainer) {\r\n                tooltipContainer._applyThemes();\r\n            }\r\n            // @todo review this\r\n            var interfaceColors = this.interfaceColors;\r\n            if (interfaceColors) {\r\n                interfaceColors._applyThemes();\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Root.prototype, \"_addTooltip\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            if (!this.tooltipContainer) {\r\n                var tooltipContainer = this._rootContainer.children.push(Container.new(this, {\r\n                    position: \"absolute\",\r\n                    isMeasured: false,\r\n                    width: p100,\r\n                    height: p100,\r\n                    layer: this._tooltipContainerSettings ? 35 : 30,\r\n                    layerMargin: this._tooltipContainerSettings ? this._tooltipContainerSettings : undefined\r\n                }));\r\n                this.tooltipContainer = tooltipContainer;\r\n                var tooltip = Tooltip.new(this, {});\r\n                this.container.set(\"tooltip\", tooltip);\r\n                tooltip.hide(0);\r\n                this._tooltip = tooltip;\r\n            }\r\n        }\r\n    });\r\n    /**\r\n     * Accesibility\r\n     */\r\n    Object.defineProperty(Root.prototype, \"_registerTabindexOrder\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (target) {\r\n            if (target.get(\"focusable\")) {\r\n                $array.pushOne(this._tabindexes, target);\r\n            }\r\n            else {\r\n                $array.remove(this._tabindexes, target);\r\n            }\r\n            this._invalidateTabindexes();\r\n        }\r\n    });\r\n    Object.defineProperty(Root.prototype, \"_unregisterTabindexOrder\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (target) {\r\n            $array.remove(this._tabindexes, target);\r\n            this._invalidateTabindexes();\r\n        }\r\n    });\r\n    Object.defineProperty(Root.prototype, \"_invalidateTabindexes\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            var _this = this;\r\n            this._tabindexes.sort(function (a, b) {\r\n                var aindex = a.get(\"tabindexOrder\", 0);\r\n                var bindex = b.get(\"tabindexOrder\", 0);\r\n                if (aindex == bindex) {\r\n                    return 0;\r\n                }\r\n                else if (aindex > bindex) {\r\n                    return 1;\r\n                }\r\n                else {\r\n                    return -1;\r\n                }\r\n            });\r\n            var groups = [];\r\n            $array.each(this._tabindexes, function (item, index) {\r\n                if (!item.getPrivate(\"focusElement\")) {\r\n                    _this._makeFocusElement(index, item);\r\n                }\r\n                else {\r\n                    _this._moveFocusElement(index, item);\r\n                }\r\n                var group = item.get(\"focusableGroup\");\r\n                if (group) {\r\n                    if (groups.indexOf(group) !== -1) {\r\n                        // Non-first element in the group, make it not directly focusable\r\n                        item.getPrivate(\"focusElement\").dom.setAttribute(\"tabindex\", \"-1\");\r\n                    }\r\n                    else {\r\n                        groups.push(group);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    });\r\n    Object.defineProperty(Root.prototype, \"_updateCurrentFocus\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            if (this._focusedSprite) {\r\n                this._decorateFocusElement(this._focusedSprite);\r\n                this._positionFocusElement(this._focusedSprite);\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Root.prototype, \"_decorateFocusElement\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (target, focusElement) {\r\n            // Decorate with proper accessibility attributes\r\n            if (!focusElement) {\r\n                focusElement = target.getPrivate(\"focusElement\").dom;\r\n            }\r\n            if (!focusElement) {\r\n                return;\r\n            }\r\n            if (target.get(\"visible\") && target.get(\"role\") != \"tooltip\" && !target.isHidden()) {\r\n                if (focusElement.getAttribute(\"tabindex\") != \"-1\") {\r\n                    focusElement.setAttribute(\"tabindex\", \"\" + this.tabindex);\r\n                }\r\n            }\r\n            else {\r\n                focusElement.removeAttribute(\"tabindex\");\r\n            }\r\n            var role = target.get(\"role\");\r\n            if (role) {\r\n                focusElement.setAttribute(\"role\", role);\r\n            }\r\n            else {\r\n                focusElement.removeAttribute(\"role\");\r\n            }\r\n            var ariaLabel = target.get(\"ariaLabel\");\r\n            if (ariaLabel) {\r\n                var label = populateString(target, ariaLabel);\r\n                focusElement.setAttribute(\"aria-label\", label);\r\n            }\r\n            else {\r\n                focusElement.removeAttribute(\"aria-label\");\r\n            }\r\n            var ariaLive = target.get(\"ariaLive\");\r\n            if (ariaLive) {\r\n                focusElement.setAttribute(\"aria-live\", ariaLive);\r\n            }\r\n            else {\r\n                focusElement.removeAttribute(\"aria-live\");\r\n            }\r\n            var ariaChecked = target.get(\"ariaChecked\");\r\n            if (ariaChecked != null) {\r\n                focusElement.setAttribute(\"aria-checked\", ariaChecked ? \"true\" : \"false\");\r\n            }\r\n            else {\r\n                focusElement.removeAttribute(\"aria-checked\");\r\n            }\r\n            if (target.get(\"ariaHidden\")) {\r\n                focusElement.setAttribute(\"aria-hidden\", \"hidden\");\r\n            }\r\n            else {\r\n                focusElement.removeAttribute(\"aria-hidden\");\r\n            }\r\n            var ariaOrientation = target.get(\"ariaOrientation\");\r\n            if (ariaOrientation) {\r\n                focusElement.setAttribute(\"aria-orientation\", ariaOrientation);\r\n            }\r\n            else {\r\n                focusElement.removeAttribute(\"aria-orientation\");\r\n            }\r\n            var ariaValueNow = target.get(\"ariaValueNow\");\r\n            if (ariaValueNow) {\r\n                focusElement.setAttribute(\"aria-valuenow\", ariaValueNow);\r\n            }\r\n            else {\r\n                focusElement.removeAttribute(\"aria-valuenow\");\r\n            }\r\n            var ariaValueMin = target.get(\"ariaValueMin\");\r\n            if (ariaValueMin) {\r\n                focusElement.setAttribute(\"aria-valuemin\", ariaValueMin);\r\n            }\r\n            else {\r\n                focusElement.removeAttribute(\"aria-valuemin\");\r\n            }\r\n            var ariaValueMax = target.get(\"ariaValueMax\");\r\n            if (ariaValueMax) {\r\n                focusElement.setAttribute(\"aria-valuemax\", ariaValueMax);\r\n            }\r\n            else {\r\n                focusElement.removeAttribute(\"aria-valuemax\");\r\n            }\r\n            var ariaValueText = target.get(\"ariaValueText\");\r\n            if (ariaValueText) {\r\n                focusElement.setAttribute(\"aria-valuetext\", ariaValueText);\r\n            }\r\n            else {\r\n                focusElement.removeAttribute(\"aria-valuetext\");\r\n            }\r\n            var ariaControls = target.get(\"ariaControls\");\r\n            if (ariaControls) {\r\n                focusElement.setAttribute(\"aria-controls\", ariaControls);\r\n            }\r\n            else {\r\n                focusElement.removeAttribute(\"aria-controls\");\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Root.prototype, \"_makeFocusElement\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (index, target) {\r\n            var _this = this;\r\n            if (target.getPrivate(\"focusElement\")) {\r\n                return;\r\n            }\r\n            // Init\r\n            var focusElement = document.createElement(\"div\");\r\n            if (target.get(\"role\") != \"tooltip\") {\r\n                focusElement.tabIndex = this.tabindex;\r\n            }\r\n            focusElement.style.position = \"absolute\";\r\n            $utils.setInteractive(focusElement, false);\r\n            var disposers = [];\r\n            target.setPrivate(\"focusElement\", {\r\n                dom: focusElement,\r\n                disposers: disposers,\r\n            });\r\n            this._decorateFocusElement(target);\r\n            disposers.push($utils.addEventListener(focusElement, \"focus\", function (ev) {\r\n                _this._handleFocus(ev, index);\r\n            }));\r\n            disposers.push($utils.addEventListener(focusElement, \"blur\", function (ev) {\r\n                _this._handleBlur(ev, index);\r\n            }));\r\n            this._moveFocusElement(index, target);\r\n        }\r\n    });\r\n    Object.defineProperty(Root.prototype, \"_removeFocusElement\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (target) {\r\n            $array.remove(this._tabindexes, target);\r\n            var focusElement = target.getPrivate(\"focusElement\");\r\n            if (focusElement) {\r\n                var container = this._focusElementContainer;\r\n                container.removeChild(focusElement.dom);\r\n                $array.each(focusElement.disposers, function (x) {\r\n                    x.dispose();\r\n                });\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Root.prototype, \"_hideFocusElement\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (target) {\r\n            var focusElement = target.getPrivate(\"focusElement\");\r\n            focusElement.dom.style.display = \"none\";\r\n        }\r\n    });\r\n    Object.defineProperty(Root.prototype, \"_moveFocusElement\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (index, target) {\r\n            // Get container\r\n            var container = this._focusElementContainer;\r\n            var focusElement = target.getPrivate(\"focusElement\").dom;\r\n            if (focusElement === this._focusElementContainer.children[index]) {\r\n                // Nothing to do\r\n                return;\r\n            }\r\n            var next = this._focusElementContainer.children[index + 1];\r\n            if (next) {\r\n                container.insertBefore(focusElement, next);\r\n            }\r\n            else {\r\n                container.append(focusElement);\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Root.prototype, \"_positionFocusElement\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (target) {\r\n            var bounds = target.globalBounds();\r\n            var width = bounds.right == bounds.left ? target.width() : bounds.right - bounds.left;\r\n            var height = bounds.top == bounds.bottom ? target.height() : bounds.bottom - bounds.top;\r\n            var focusElement = target.getPrivate(\"focusElement\").dom;\r\n            focusElement.style.top = (bounds.top - 2) + \"px\";\r\n            focusElement.style.left = (bounds.left - 2) + \"px\";\r\n            focusElement.style.width = (width + 4) + \"px\";\r\n            focusElement.style.height = (height + 4) + \"px\";\r\n        }\r\n    });\r\n    Object.defineProperty(Root.prototype, \"_handleFocus\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (ev, index) {\r\n            // Get element\r\n            var focused = this._tabindexes[index];\r\n            // Jump over hidden elements\r\n            if (!focused.isVisibleDeep()) {\r\n                this._focusNext(ev.target, this._isShift ? -1 : 1);\r\n                return;\r\n            }\r\n            // Size and position\r\n            this._positionFocusElement(focused);\r\n            //this._decorateFocusElement(focused);\r\n            this._focusedSprite = focused;\r\n            if (focused.events.isEnabled(\"focus\")) {\r\n                focused.events.dispatch(\"focus\", {\r\n                    type: \"focus\",\r\n                    originalEvent: ev,\r\n                    target: focused\r\n                });\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Root.prototype, \"_focusNext\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (el, direction) {\r\n            var focusableElements = Array.from(document.querySelectorAll([\r\n                'a[href]',\r\n                'area[href]',\r\n                'button:not([disabled])',\r\n                'details',\r\n                'input:not([disabled])',\r\n                'iframe:not([disabled])',\r\n                'select:not([disabled])',\r\n                'textarea:not([disabled])',\r\n                '[contentEditable=\"\"]',\r\n                '[contentEditable=\"true\"]',\r\n                '[contentEditable=\"TRUE\"]',\r\n                '[tabindex]:not([tabindex^=\"-\"])',\r\n                //':not([disabled])'\r\n            ].join(',')));\r\n            var index = focusableElements.indexOf(el) + direction;\r\n            if (index < 0) {\r\n                index = focusableElements.length - 1;\r\n            }\r\n            else if (index >= focusableElements.length) {\r\n                index = 0;\r\n            }\r\n            focusableElements[index].focus();\r\n        }\r\n    });\r\n    Object.defineProperty(Root.prototype, \"_handleBlur\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (ev, _index) {\r\n            var focused = this._focusedSprite;\r\n            if (focused && focused.events.isEnabled(\"blur\")) {\r\n                focused.events.dispatch(\"blur\", {\r\n                    type: \"blur\",\r\n                    originalEvent: ev,\r\n                    target: focused\r\n                });\r\n            }\r\n            this._focusedSprite = undefined;\r\n        }\r\n    });\r\n    /**\r\n     * @ignore\r\n     */\r\n    Object.defineProperty(Root.prototype, \"updateTooltip\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (target) {\r\n            var text = $utils.stripTags(target._getText());\r\n            var tooltipElement = target.getPrivate(\"tooltipElement\");\r\n            if (target.get(\"role\") == \"tooltip\" && text != \"\") {\r\n                if (!tooltipElement) {\r\n                    tooltipElement = this._makeTooltipElement(target);\r\n                }\r\n                if (tooltipElement.innerHTML != text) {\r\n                    tooltipElement.innerHTML = text;\r\n                }\r\n            }\r\n            else if (tooltipElement) {\r\n                tooltipElement.remove();\r\n                target.removePrivate(\"tooltipElement\");\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Root.prototype, \"_makeTooltipElement\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (target) {\r\n            var container = this._tooltipElementContainer;\r\n            var tooltipElement = document.createElement(\"div\");\r\n            tooltipElement.style.position = \"absolute\";\r\n            tooltipElement.style.top = \"-1000000px\";\r\n            tooltipElement.style.opacity = \"0.0000001\";\r\n            $utils.setInteractive(tooltipElement, false);\r\n            this._decorateFocusElement(target, tooltipElement);\r\n            container.append(tooltipElement);\r\n            target.setPrivate(\"tooltipElement\", tooltipElement);\r\n            return tooltipElement;\r\n        }\r\n    });\r\n    Object.defineProperty(Root.prototype, \"_invalidateAccessibility\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (target) {\r\n            this._focusElementDirty = true;\r\n            var focusElement = target.getPrivate(\"focusElement\");\r\n            if (target.get(\"focusable\")) {\r\n                if (focusElement) {\r\n                    this._decorateFocusElement(target);\r\n                    this._positionFocusElement(target);\r\n                }\r\n                // else {\r\n                // \tthis._renderer._makeFocusElement(0, this);\r\n                // }\r\n            }\r\n            else if (focusElement) {\r\n                this._removeFocusElement(target);\r\n            }\r\n            //this.updateCurrentFocus();\r\n        }\r\n    });\r\n    /**\r\n     * Returns `true` if `target` is currently focused.\r\n     *\r\n     * @param   target  Target\r\n     * @return          Focused?\r\n     */\r\n    Object.defineProperty(Root.prototype, \"focused\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (target) {\r\n            return this._focusedSprite === target;\r\n        }\r\n    });\r\n    /**\r\n     * Converts document coordinates to coordinates withing root element.\r\n     *\r\n     * @param   point  Document point\r\n     * @return         Root point\r\n     */\r\n    Object.defineProperty(Root.prototype, \"documentPointToRoot\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (point) {\r\n            var bbox = this.dom.getBoundingClientRect();\r\n            return {\r\n                x: point.x - bbox.left,\r\n                y: point.y - bbox.top\r\n            };\r\n        }\r\n    });\r\n    /**\r\n     * Converts root coordinates to document\r\n     *\r\n     * @param   point  Document point\r\n     * @return         Root point\r\n     */\r\n    Object.defineProperty(Root.prototype, \"rootPointToDocument\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (point) {\r\n            var bbox = this.dom.getBoundingClientRect();\r\n            return {\r\n                x: point.x + bbox.left,\r\n                y: point.y + bbox.top\r\n            };\r\n        }\r\n    });\r\n    /**\r\n     * @ignore\r\n     */\r\n    Object.defineProperty(Root.prototype, \"addDisposer\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (disposer) {\r\n            this._disposers.push(disposer);\r\n            return disposer;\r\n        }\r\n    });\r\n    Object.defineProperty(Root.prototype, \"_updateComputedStyles\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            var styles = window.getComputedStyle(this.dom);\r\n            var fontHash = \"\";\r\n            $object.each(styles, function (key, val) {\r\n                if ($type.isString(key) && key.match(/^font/)) {\r\n                    fontHash += val;\r\n                }\r\n            });\r\n            var changed = fontHash != this._fontHash;\r\n            if (changed) {\r\n                this._fontHash = fontHash;\r\n            }\r\n            return changed;\r\n        }\r\n    });\r\n    Object.defineProperty(Root.prototype, \"_checkComputedStyles\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            if (this._updateComputedStyles()) {\r\n                this._invalidateLabelBounds(this.container);\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Root.prototype, \"_invalidateLabelBounds\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (target) {\r\n            var _this = this;\r\n            if (target instanceof Container) {\r\n                target.children.each(function (child) {\r\n                    _this._invalidateLabelBounds(child);\r\n                });\r\n            }\r\n            else if (target instanceof Text) {\r\n                target.markDirtyBounds();\r\n            }\r\n        }\r\n    });\r\n    /**\r\n     * To all the clever heads out there. Yes, we did not make any attempts to\r\n     * scramble this.\r\n     *\r\n     * This is a part of a tool meant for our users to manage their commercial\r\n     * licenses for removal of amCharts branding from charts.\r\n     *\r\n     * The only legit way to do so is to purchase a commercial license for amCharts:\r\n     * https://www.amcharts.com/online-store/\r\n     *\r\n     * Removing or altering this code, or disabling amCharts branding in any other\r\n     * way is against the license and thus illegal.\r\n     */\r\n    Object.defineProperty(Root.prototype, \"_hasLicense\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            for (var i = 0; i < registry.licenses.length; i++) {\r\n                if (registry.licenses[i].match(/^AM5C.{5,}/i)) {\r\n                    return true;\r\n                }\r\n            }\r\n            return false;\r\n        }\r\n    });\r\n    Object.defineProperty(Root.prototype, \"_licenseApplied\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            if (this._logo) {\r\n                this._logo.set(\"forceHidden\", true);\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Root.prototype, \"debugGhostView\", {\r\n        /**\r\n         * @ignore\r\n         */\r\n        get: function () {\r\n            return this._renderer.debugGhostView;\r\n        },\r\n        /**\r\n         * @ignore\r\n         */\r\n        set: function (value) {\r\n            this._renderer.debugGhostView = value;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Root.prototype, \"tapToActivate\", {\r\n        /**\r\n         * @return Needs a tap to activate touch functions\r\n         */\r\n        get: function () {\r\n            return this._renderer.tapToActivate;\r\n        },\r\n        /**\r\n         * Set this to `true` if you need chart to require first a tap onto it before\r\n         * touch gesture related functionality like zoom/pan is turned on.\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v5/getting-started/root-element/#Touch_related_options} for more info\r\n         * @default false\r\n         * @since 5.2.9\r\n         * @param  value  Needs a tap to activate touch functions\r\n         */\r\n        set: function (value) {\r\n            this._renderer.tapToActivate = value;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Root.prototype, \"tapToActivateTimeout\", {\r\n        /**\r\n         * @return Timeout\r\n         */\r\n        get: function () {\r\n            return this._renderer.tapToActivateTimeout;\r\n        },\r\n        /**\r\n         * If `tapToActivate` is set to `true`, this setting will determine number\r\n         * of milliseconds the chart will stay \"active\", before releasing the\r\n         * controls back to the page.\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v5/getting-started/root-element/#Touch_related_options} for more info\r\n         * @default 3000\r\n         * @since 5.2.9\r\n         * @param  value  Timeout\r\n         */\r\n        set: function (value) {\r\n            this._renderer.tapToActivateTimeout = value;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Root.prototype, \"_makeHTMLElement\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (target) {\r\n            var _this = this;\r\n            // Get container\r\n            var container = this._htmlElementContainer;\r\n            // Init\r\n            var htmlElement = document.createElement(\"div\");\r\n            target.setPrivate(\"htmlElement\", htmlElement);\r\n            //htmlElement.tabIndex = this.tabindex;\r\n            htmlElement.style.position = \"absolute\";\r\n            htmlElement.style.overflow = \"auto\";\r\n            htmlElement.style.boxSizing = \"border-box\";\r\n            $utils.setInteractive(htmlElement, true);\r\n            // Translate events\r\n            if (target.events.isEnabled(\"click\")) {\r\n                this._disposers.push($utils.addEventListener(htmlElement, \"click\", function (ev) {\r\n                    var downEvent = _this._renderer.getEvent(ev);\r\n                    target.events.dispatch(\"click\", {\r\n                        type: \"click\",\r\n                        originalEvent: downEvent.event,\r\n                        point: downEvent.point,\r\n                        simulated: false,\r\n                        target: target\r\n                    });\r\n                }));\r\n            }\r\n            this._positionHTMLElement(target);\r\n            container.append(htmlElement);\r\n            $array.pushOne(this._htmlEnabledContainers, target);\r\n            return htmlElement;\r\n        }\r\n    });\r\n    Object.defineProperty(Root.prototype, \"_positionHTMLElements\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            var _this = this;\r\n            $array.each(this._htmlEnabledContainers, function (target) {\r\n                _this._positionHTMLElement(target);\r\n            });\r\n        }\r\n    });\r\n    Object.defineProperty(Root.prototype, \"_positionHTMLElement\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (target) {\r\n            var htmlElement = target.getPrivate(\"htmlElement\");\r\n            if (htmlElement) {\r\n                // Translate settings\r\n                var visualSettings = [\"paddingTop\", \"paddingRight\", \"paddingBottom\", \"paddingLeft\", \"minWidth\", \"minHeight\", \"maxWidth\", \"maxHeight\"];\r\n                $array.each(visualSettings, function (setting) {\r\n                    var value = target.get(setting);\r\n                    if (value) {\r\n                        htmlElement.style[setting] = value + \"px\";\r\n                    }\r\n                    else {\r\n                        htmlElement.style[setting] = \"\";\r\n                    }\r\n                });\r\n                // Deal with opacity\r\n                var opacity_1 = target.compositeOpacity();\r\n                setTimeout(function () {\r\n                    htmlElement.style.opacity = opacity_1 + \"\";\r\n                }, 10);\r\n                var visible = target.isVisibleDeep();\r\n                if (visible) {\r\n                    htmlElement.style.display = \"block\";\r\n                }\r\n                // Deal with position\r\n                var bounds = target.globalBounds();\r\n                htmlElement.style.top = (bounds.top) + \"px\";\r\n                htmlElement.style.left = (bounds.left) + \"px\";\r\n                // Use width/height if those are set\r\n                var width = target.get(\"width\");\r\n                var height = target.get(\"height\");\r\n                var w = 0;\r\n                var h = 0;\r\n                if (width) {\r\n                    w = target.width();\r\n                }\r\n                if (height) {\r\n                    h = target.height();\r\n                }\r\n                if (!width || !height) {\r\n                    htmlElement.style.width = \"\";\r\n                    htmlElement.style.height = \"\";\r\n                    var bbox = htmlElement.getBoundingClientRect();\r\n                    w = bbox.width;\r\n                    h = bbox.height;\r\n                    target._adjustedLocalBounds = { left: 0, right: 0, top: 0, bottom: 0 };\r\n                    target.setPrivate(\"minWidth\", w);\r\n                    target.setPrivate(\"minHeight\", h);\r\n                }\r\n                else {\r\n                    target.removePrivate(\"minWidth\");\r\n                    target.removePrivate(\"minHeight\");\r\n                }\r\n                if (w > 0) {\r\n                    htmlElement.style.minWidth = (w) + \"px\";\r\n                }\r\n                if (h > 0) {\r\n                    htmlElement.style.minHeight = (h) + \"px\";\r\n                }\r\n                // Hide or show\r\n                if (!visible || opacity_1 == 0) {\r\n                    htmlElement.style.display = \"none\";\r\n                }\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Root.prototype, \"_setHTMLContent\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (target, html) {\r\n            var htmlElement = target.getPrivate(\"htmlElement\");\r\n            if (!htmlElement) {\r\n                htmlElement = this._makeHTMLElement(target);\r\n            }\r\n            if (htmlElement.innerHTML != html) {\r\n                htmlElement.innerHTML = html;\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Root.prototype, \"_removeHTMLContent\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (target) {\r\n            var htmlElement = target.getPrivate(\"htmlElement\");\r\n            if (htmlElement) {\r\n                this._htmlElementContainer.removeChild(htmlElement);\r\n            }\r\n            $array.remove(this._htmlEnabledContainers, target);\r\n        }\r\n    });\r\n    return Root;\r\n}());\r\nexport { Root };\r\n//# sourceMappingURL=Root.js.map","import { __extends } from \"tslib\";\r\nimport * as $type from \"../util/Type\";\r\nimport * as $math from \"../util/Math\";\r\nimport * as $utils from \"../util/Utils\";\r\nimport { Rectangle } from \"./Rectangle\";\r\n/**\r\n * Draws a rectangle with rounded corners.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/common-elements/graphics/} for more info\r\n * @important\r\n */\r\nvar RoundedRectangle = /** @class */ (function (_super) {\r\n    __extends(RoundedRectangle, _super);\r\n    function RoundedRectangle() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    Object.defineProperty(RoundedRectangle.prototype, \"_beforeChanged\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            _super.prototype._beforeChanged.call(this);\r\n            if (this.isDirty(\"cornerRadiusTL\") || this.isDirty(\"cornerRadiusTR\") || this.isDirty(\"cornerRadiusBR\") || this.isDirty(\"cornerRadiusBL\")) {\r\n                this._clear = true;\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(RoundedRectangle.prototype, \"_draw\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            var width = this.width();\r\n            var height = this.height();\r\n            var w = width;\r\n            var h = height;\r\n            var wSign = w / Math.abs(width);\r\n            var hSign = h / Math.abs(height);\r\n            if ($type.isNumber(w) && $type.isNumber(h)) {\r\n                var minSide = Math.min(w, h) / 2;\r\n                var crtl = $utils.relativeToValue(this.get(\"cornerRadiusTL\", 8), minSide);\r\n                var crtr = $utils.relativeToValue(this.get(\"cornerRadiusTR\", 8), minSide);\r\n                var crbr = $utils.relativeToValue(this.get(\"cornerRadiusBR\", 8), minSide);\r\n                var crbl = $utils.relativeToValue(this.get(\"cornerRadiusBL\", 8), minSide);\r\n                var maxcr = Math.min(Math.abs(w / 2), Math.abs(h / 2));\r\n                crtl = $math.fitToRange(crtl, 0, maxcr);\r\n                crtr = $math.fitToRange(crtr, 0, maxcr);\r\n                crbr = $math.fitToRange(crbr, 0, maxcr);\r\n                crbl = $math.fitToRange(crbl, 0, maxcr);\r\n                var display = this._display;\r\n                display.moveTo(crtl * wSign, 0);\r\n                display.lineTo(w - crtr * wSign, 0);\r\n                if (crtr > 0) {\r\n                    display.arcTo(w, 0, w, crtr * hSign, crtr);\r\n                }\r\n                display.lineTo(w, h - crbr * hSign);\r\n                if (crbr > 0) {\r\n                    display.arcTo(w, h, w - crbr * wSign, h, crbr);\r\n                }\r\n                display.lineTo(crbl * wSign, h);\r\n                if (crbl > 0) {\r\n                    display.arcTo(0, h, 0, h - crbl * hSign, crbl);\r\n                }\r\n                display.lineTo(0, crtl * hSign);\r\n                if (crtl > 0) {\r\n                    display.arcTo(0, 0, crtl * wSign, 0, crtl);\r\n                }\r\n                display.closePath();\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(RoundedRectangle, \"className\", {\r\n        enumerable: true,\r\n        configurable: true,\r\n        writable: true,\r\n        value: \"RoundedRectangle\"\r\n    });\r\n    Object.defineProperty(RoundedRectangle, \"classNames\", {\r\n        enumerable: true,\r\n        configurable: true,\r\n        writable: true,\r\n        value: Rectangle.classNames.concat([RoundedRectangle.className])\r\n    });\r\n    return RoundedRectangle;\r\n}(Rectangle));\r\nexport { RoundedRectangle };\r\n//# sourceMappingURL=RoundedRectangle.js.map","import { __extends } from \"tslib\";\r\nimport { List } from \"./List\";\r\n/**\r\n * A [[List]] that holds components data.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/data/} for more info\r\n */\r\nvar ListData = /** @class */ (function (_super) {\r\n    __extends(ListData, _super);\r\n    function ListData() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        /**\r\n         * An optional processor for data.\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v5/concepts/data/#Pre_processing_data} for more info\r\n         */\r\n        Object.defineProperty(_this, \"processor\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        return _this;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    Object.defineProperty(ListData.prototype, \"incrementRef\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () { }\r\n    });\r\n    /**\r\n     * @ignore\r\n     */\r\n    Object.defineProperty(ListData.prototype, \"decrementRef\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () { }\r\n    });\r\n    Object.defineProperty(ListData.prototype, \"_onPush\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (newValue) {\r\n            if (this.processor) {\r\n                this.processor.processRow(newValue);\r\n                //console.log(newValue)\r\n            }\r\n            _super.prototype._onPush.call(this, newValue);\r\n        }\r\n    });\r\n    Object.defineProperty(ListData.prototype, \"_onInsertIndex\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (index, newValue) {\r\n            if (this.processor) {\r\n                this.processor.processRow(newValue);\r\n            }\r\n            _super.prototype._onInsertIndex.call(this, index, newValue);\r\n        }\r\n    });\r\n    Object.defineProperty(ListData.prototype, \"_onSetIndex\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (index, oldValue, newValue) {\r\n            if (this.processor) {\r\n                this.processor.processRow(newValue);\r\n            }\r\n            _super.prototype._onSetIndex.call(this, index, oldValue, newValue);\r\n        }\r\n    });\r\n    return ListData;\r\n}(List));\r\nexport { ListData };\r\n/**\r\n * @deprecated\r\n * @todo remove\r\n */\r\nvar JsonData = /** @class */ (function () {\r\n    function JsonData(value) {\r\n        Object.defineProperty(this, \"processor\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_value\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        this._value = value;\r\n    }\r\n    Object.defineProperty(JsonData.prototype, \"incrementRef\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () { }\r\n    });\r\n    Object.defineProperty(JsonData.prototype, \"decrementRef\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () { }\r\n    });\r\n    return JsonData;\r\n}());\r\nexport { JsonData };\r\n//# sourceMappingURL=Data.js.map","import { __awaiter, __extends, __generator } from \"tslib\";\r\nimport { Settings } from \"../util/Entity\";\r\nimport { Container } from \"./Container\";\r\nimport { ListData } from \"../util/Data\";\r\nimport * as $array from \"../util/Array\";\r\nimport * as $object from \"../util/Object\";\r\n/**\r\n * A base element that holds data bit (data item) for any [[Component]].\r\n */\r\nvar DataItem = /** @class */ (function (_super) {\r\n    __extends(DataItem, _super);\r\n    function DataItem(component, dataContext, settings) {\r\n        var _this = _super.call(this, settings) || this;\r\n        /**\r\n         * A data item's owener [[Component]].\r\n         */\r\n        Object.defineProperty(_this, \"component\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        /**\r\n         * A reference to actual item in source data this item is based on.\r\n         */\r\n        Object.defineProperty(_this, \"dataContext\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        /**\r\n         * @todo requires description\r\n         */\r\n        Object.defineProperty(_this, \"bullets\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        /**\r\n         * A set of \"open\" values.\r\n         */\r\n        Object.defineProperty(_this, \"open\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        /**\r\n         * A set of \"close\" values.\r\n         */\r\n        Object.defineProperty(_this, \"close\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        _this.dataContext = dataContext;\r\n        _this.component = component;\r\n        _this._settings.visible = true;\r\n        _this._checkDirty();\r\n        return _this;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    Object.defineProperty(DataItem.prototype, \"markDirty\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            this.component.markDirtyValues(this);\r\n        }\r\n    });\r\n    Object.defineProperty(DataItem.prototype, \"_startAnimation\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            this.component._root._addAnimation(this);\r\n        }\r\n    });\r\n    Object.defineProperty(DataItem.prototype, \"_animationTime\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            return this.component._root.animationTime;\r\n        }\r\n    });\r\n    Object.defineProperty(DataItem.prototype, \"_dispose\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            if (this.component) {\r\n                this.component.disposeDataItem(this);\r\n            }\r\n            _super.prototype._dispose.call(this);\r\n        }\r\n    });\r\n    /**\r\n     * Shows a data item that's currently hidden.\r\n     */\r\n    Object.defineProperty(DataItem.prototype, \"show\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (duration) {\r\n            this.setRaw(\"visible\", true);\r\n            if (this.component) {\r\n                this.component.showDataItem(this, duration);\r\n            }\r\n        }\r\n    });\r\n    /**\r\n     * Hides a data item that's currently visible.\r\n     */\r\n    Object.defineProperty(DataItem.prototype, \"hide\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (duration) {\r\n            this.setRaw(\"visible\", false);\r\n            if (this.component) {\r\n                this.component.hideDataItem(this, duration);\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(DataItem.prototype, \"isHidden\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            return !this.get(\"visible\");\r\n        }\r\n    });\r\n    return DataItem;\r\n}(Settings));\r\nexport { DataItem };\r\n/**\r\n * A base class for elements that make use of data.\r\n */\r\nvar Component = /** @class */ (function (_super) {\r\n    __extends(Component, _super);\r\n    function Component() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        Object.defineProperty(_this, \"_data\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: new ListData()\r\n        });\r\n        Object.defineProperty(_this, \"_dataItems\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        Object.defineProperty(_this, \"_mainDataItems\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: _this._dataItems\r\n        });\r\n        Object.defineProperty(_this, \"valueFields\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        Object.defineProperty(_this, \"fields\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: [\"id\"]\r\n        });\r\n        Object.defineProperty(_this, \"_valueFields\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(_this, \"_valueFieldsF\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(_this, \"_fields\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(_this, \"_fieldsF\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(_this, \"_valuesDirty\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(_this, \"_dataChanged\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(_this, \"_dataGrouped\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        /**\r\n         * Indicates if the component has already been initialized.\r\n         */\r\n        Object.defineProperty(_this, \"inited\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        return _this;\r\n    }\r\n    Object.defineProperty(Component.prototype, \"data\", {\r\n        /**\r\n         * @return  Data\r\n         */\r\n        get: function () {\r\n            return this._data;\r\n        },\r\n        /**\r\n         * Component's data.\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v5/concepts/data/} for more info\r\n         */\r\n        set: function (data) {\r\n            data.incrementRef();\r\n            this._data.decrementRef();\r\n            this._data = data;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Component.prototype, \"_dispose\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            _super.prototype._dispose.call(this);\r\n            this._data.decrementRef();\r\n        }\r\n    });\r\n    Object.defineProperty(Component.prototype, \"_onDataClear\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n        }\r\n    });\r\n    Object.defineProperty(Component.prototype, \"_afterNew\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            var _this = this;\r\n            _super.prototype._afterNew.call(this);\r\n            this._data.incrementRef();\r\n            this._updateFields();\r\n            this._disposers.push(this.data.events.onAll(function (change) {\r\n                var dataItems = _this._mainDataItems;\r\n                _this.markDirtyValues();\r\n                _this._markDirtyGroup();\r\n                _this._dataChanged = true;\r\n                if (change.type === \"clear\") {\r\n                    $array.each(dataItems, function (dataItem) {\r\n                        dataItem.dispose();\r\n                    });\r\n                    dataItems.length = 0;\r\n                    _this._onDataClear();\r\n                }\r\n                else if (change.type === \"push\") {\r\n                    var dataItem = new DataItem(_this, change.newValue, _this._makeDataItem(change.newValue));\r\n                    dataItems.push(dataItem);\r\n                    _this.processDataItem(dataItem);\r\n                }\r\n                else if (change.type === \"setIndex\") {\r\n                    var dataItem_1 = dataItems[change.index];\r\n                    var properties_1 = _this._makeDataItem(change.newValue);\r\n                    $object.keys(properties_1).forEach(function (key) {\r\n                        dataItem_1.animate({\r\n                            key: key,\r\n                            to: properties_1[key],\r\n                            duration: _this.get(\"interpolationDuration\", 0),\r\n                            easing: _this.get(\"interpolationEasing\"),\r\n                        });\r\n                    });\r\n                    dataItem_1.dataContext = change.newValue;\r\n                }\r\n                else if (change.type === \"insertIndex\") {\r\n                    var dataItem = new DataItem(_this, change.newValue, _this._makeDataItem(change.newValue));\r\n                    dataItems.splice(change.index, 0, dataItem);\r\n                    _this.processDataItem(dataItem);\r\n                }\r\n                else if (change.type === \"removeIndex\") {\r\n                    var dataItem = dataItems[change.index];\r\n                    dataItem.dispose();\r\n                    dataItems.splice(change.index, 1);\r\n                }\r\n                else if (change.type === \"moveIndex\") {\r\n                    var dataItem = dataItems[change.oldIndex];\r\n                    dataItems.splice(change.oldIndex, 1);\r\n                    dataItems.splice(change.newIndex, 0, dataItem);\r\n                }\r\n                else {\r\n                    throw new Error(\"Unknown IStreamEvent type\");\r\n                }\r\n                _this._afterDataChange();\r\n            }));\r\n        }\r\n    });\r\n    Object.defineProperty(Component.prototype, \"_updateFields\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            var _this = this;\r\n            if (this.valueFields) {\r\n                this._valueFields = [];\r\n                this._valueFieldsF = {};\r\n                $array.each(this.valueFields, function (key) {\r\n                    var field = _this.get((key + \"Field\"));\r\n                    if (field) {\r\n                        _this._valueFields.push(key);\r\n                        _this._valueFieldsF[key] = { fieldKey: key + \"Field\", workingKey: key + \"Working\" };\r\n                    }\r\n                });\r\n            }\r\n            if (this.fields) {\r\n                this._fields = [];\r\n                this._fieldsF = {};\r\n                $array.each(this.fields, function (key) {\r\n                    var field = _this.get((key + \"Field\"));\r\n                    if (field) {\r\n                        _this._fields.push(key);\r\n                        _this._fieldsF[key] = key + \"Field\";\r\n                    }\r\n                });\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Component.prototype, \"dataItems\", {\r\n        /**\r\n         * A list of component's data items.\r\n         *\r\n         * @return  Data items\r\n         */\r\n        get: function () {\r\n            return this._dataItems;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Component.prototype, \"processDataItem\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (_dataItem) { }\r\n    });\r\n    Object.defineProperty(Component.prototype, \"_makeDataItem\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (data) {\r\n            var _this = this;\r\n            //const output: this[\"_dataItemSettings\"] = {};\r\n            var output = {}; // temporary to solve error\r\n            if (this._valueFields) {\r\n                $array.each(this._valueFields, function (key) {\r\n                    var field = _this.get((_this._valueFieldsF[key].fieldKey));\r\n                    output[key] = data[field];\r\n                    output[_this._valueFieldsF[key].workingKey] = output[key];\r\n                });\r\n            }\r\n            if (this._fields) {\r\n                $array.each(this._fields, function (key) {\r\n                    var field = _this.get((_this._fieldsF[key]));\r\n                    output[key] = data[field];\r\n                });\r\n            }\r\n            return output;\r\n        }\r\n    });\r\n    /**\r\n     * @ignore\r\n     */\r\n    Object.defineProperty(Component.prototype, \"makeDataItem\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (data) {\r\n            var dataItem = new DataItem(this, undefined, data);\r\n            this.processDataItem(dataItem);\r\n            return dataItem;\r\n        }\r\n    });\r\n    /**\r\n     * @ignore\r\n     */\r\n    Object.defineProperty(Component.prototype, \"pushDataItem\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (data) {\r\n            var dataItem = this.makeDataItem(data);\r\n            this._mainDataItems.push(dataItem);\r\n            return dataItem;\r\n        }\r\n    });\r\n    /**\r\n     * @ignore\r\n     */\r\n    Object.defineProperty(Component.prototype, \"disposeDataItem\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (_dataItem) {\r\n        }\r\n    });\r\n    /**\r\n     * Shows component's data item.\r\n     *\r\n     * @param   dataItem   Data item\r\n     * @param   _duration  Animation duration in milliseconds\r\n     * @return             Promise\r\n     */\r\n    Object.defineProperty(Component.prototype, \"showDataItem\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (dataItem, _duration) {\r\n            return __awaiter(this, void 0, void 0, function () {\r\n                return __generator(this, function (_a) {\r\n                    dataItem.set(\"visible\", true);\r\n                    return [2 /*return*/];\r\n                });\r\n            });\r\n        }\r\n    });\r\n    /**\r\n     * Hides component's data item.\r\n     *\r\n     * @param   dataItem   Data item\r\n     * @param   _duration  Animation duration in milliseconds\r\n     * @return             Promise\r\n     */\r\n    Object.defineProperty(Component.prototype, \"hideDataItem\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (dataItem, _duration) {\r\n            return __awaiter(this, void 0, void 0, function () {\r\n                return __generator(this, function (_a) {\r\n                    dataItem.set(\"visible\", false);\r\n                    return [2 /*return*/];\r\n                });\r\n            });\r\n        }\r\n    });\r\n    Object.defineProperty(Component.prototype, \"_clearDirty\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            _super.prototype._clearDirty.call(this);\r\n            this._valuesDirty = false;\r\n        }\r\n    });\r\n    Object.defineProperty(Component.prototype, \"_afterDataChange\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n        }\r\n    });\r\n    Object.defineProperty(Component.prototype, \"_afterChanged\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            _super.prototype._afterChanged.call(this);\r\n            if (this._dataChanged) {\r\n                var type = \"datavalidated\";\r\n                if (this.events.isEnabled(type)) {\r\n                    this.events.dispatch(type, { type: type, target: this });\r\n                }\r\n                this._dataChanged = false;\r\n            }\r\n            this.inited = true;\r\n        }\r\n    });\r\n    /**\r\n     * Forces a repaint of the element which relies on data.\r\n     *\r\n     * @since 5.0.21\r\n     */\r\n    Object.defineProperty(Component.prototype, \"markDirtyValues\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (_dataItem) {\r\n            this.markDirty();\r\n            this._valuesDirty = true;\r\n        }\r\n    });\r\n    Object.defineProperty(Component.prototype, \"_markDirtyGroup\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            this._dataGrouped = false;\r\n        }\r\n    });\r\n    /**\r\n     * @ignore\r\n     */\r\n    Object.defineProperty(Component.prototype, \"markDirtySize\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            this._sizeDirty = true;\r\n            this.markDirty();\r\n        }\r\n    });\r\n    Object.defineProperty(Component, \"className\", {\r\n        enumerable: true,\r\n        configurable: true,\r\n        writable: true,\r\n        value: \"Component\"\r\n    });\r\n    Object.defineProperty(Component, \"classNames\", {\r\n        enumerable: true,\r\n        configurable: true,\r\n        writable: true,\r\n        value: Container.classNames.concat([Component.className])\r\n    });\r\n    return Component;\r\n}(Container));\r\nexport { Component };\r\n//# sourceMappingURL=Component.js.map","import { __assign } from \"tslib\";\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport * as $type from \"./Type\";\r\nimport * as $utils from \"./Utils\";\r\n/**\r\n * Returns a `Promise` which can be used to execute code after number of\r\n * milliseconds.\r\n *\r\n * @param   ms  Sleep duration in ms\r\n * @return      Promise\r\n */\r\nexport function sleep(ms) {\r\n    return new Promise(function (resolve, _reject) {\r\n        setTimeout(resolve, ms);\r\n    });\r\n}\r\n/**\r\n * Maps time period names to their numeric representations in milliseconds.\r\n *\r\n * @ignore Exclude from docs\r\n */\r\nexport var timeUnitDurations = {\r\n    millisecond: 1,\r\n    second: 1000,\r\n    minute: 60000,\r\n    hour: 3600000,\r\n    day: 86400000,\r\n    week: 604800000,\r\n    month: 365.242 / 12 * 86400000,\r\n    year: 31536000000\r\n};\r\n/**\r\n * Returns the next time unit that goes after source `unit`.\r\n *\r\n * E.g. \"hour\" is the next unit after \"minute\", etc.\r\n *\r\n * @ignore Exclude from docs\r\n * @param unit  Source time unit\r\n * @return Next time unit\r\n */\r\nexport function getNextUnit(unit) {\r\n    switch (unit) {\r\n        case \"year\":\r\n            return;\r\n        case \"month\":\r\n            return \"year\";\r\n        case \"week\":\r\n            return \"month\";\r\n        case \"day\":\r\n            return \"month\"; // not a mistake\r\n        case \"hour\":\r\n            return \"day\";\r\n        case \"minute\":\r\n            return \"hour\";\r\n        case \"second\":\r\n            return \"minute\";\r\n        case \"millisecond\":\r\n            return \"second\";\r\n    }\r\n}\r\n/**\r\n * Returns number of milliseconds in the `count` of time `unit`.\r\n *\r\n * Available units: \"millisecond\", \"second\", \"minute\", \"hour\", \"day\", \"week\",\r\n * \"month\", and \"year\".\r\n *\r\n * @param unit   Time unit\r\n * @param count  Number of units\r\n * @return Milliseconds\r\n */\r\nexport function getDuration(unit, count) {\r\n    if (count == null) {\r\n        count = 1;\r\n    }\r\n    return timeUnitDurations[unit] * count;\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport function getIntervalDuration(interval) {\r\n    if (interval) {\r\n        return timeUnitDurations[interval.timeUnit] * interval.count;\r\n    }\r\n    return 0;\r\n}\r\nexport function getDateIntervalDuration(interval, date, firstDateOfWeek, utc, timezone) {\r\n    var unit = interval.timeUnit;\r\n    var count = interval.count;\r\n    if (unit == \"hour\" || unit == \"minute\" || unit == \"second\" || unit == \"millisecond\") {\r\n        return timeUnitDurations[interval.timeUnit] * interval.count;\r\n    }\r\n    else {\r\n        var firstTime = round(new Date(date.getTime()), unit, count, firstDateOfWeek, utc, undefined, timezone).getTime();\r\n        var lastTime = firstTime + count * getDuration(unit) * 1.05;\r\n        lastTime = round(new Date(lastTime), unit, 1, firstDateOfWeek, utc, undefined, timezone).getTime();\r\n        return lastTime - firstTime;\r\n    }\r\n}\r\n/**\r\n * Returns current `Date` object.\r\n *\r\n * @return Current date\r\n */\r\nexport function now() {\r\n    return new Date();\r\n}\r\n/**\r\n * Returns current timestamp.\r\n *\r\n * @return Current timestamp\r\n */\r\nexport function getTime() {\r\n    return now().getTime();\r\n}\r\n/**\r\n * Returns a copy of the `Date` object.\r\n *\r\n * @param date  Source date\r\n * @return Copy\r\n */\r\nexport function copy(date) {\r\n    return new Date(date.getTime()); // todo: check if this is ok. new Date(date) used to strip milliseconds on FF in v3\r\n}\r\n/**\r\n * Checks if the `unit` part of two `Date` objects do not match. Two dates\r\n * represent a \"range\" of time, rather the same time date.\r\n *\r\n * @param timeOne  timestamp\r\n * @param timeTwo  timestamp\r\n * @param unit     Time unit to check\r\n * @return Range?\r\n */\r\nexport function checkChange(timeOne, timeTwo, unit, utc, timezone) {\r\n    // quick\r\n    if ((timeTwo - timeOne) > getDuration(unit, 1.2)) {\r\n        return true;\r\n    }\r\n    var dateOne = new Date(timeOne);\r\n    var dateTwo = new Date(timeTwo);\r\n    if (timezone) {\r\n        dateOne = timezone.convertLocal(dateOne);\r\n        dateTwo = timezone.convertLocal(dateTwo);\r\n    }\r\n    var timeZoneOffset1 = 0;\r\n    var timeZoneOffset2 = 0;\r\n    if (!utc && unit != \"millisecond\") {\r\n        timeZoneOffset1 = dateOne.getTimezoneOffset();\r\n        dateOne.setUTCMinutes(dateOne.getUTCMinutes() - timeZoneOffset1);\r\n        timeZoneOffset2 = dateTwo.getTimezoneOffset();\r\n        dateTwo.setUTCMinutes(dateTwo.getUTCMinutes() - timeZoneOffset2);\r\n    }\r\n    var changed = false;\r\n    switch (unit) {\r\n        case \"year\":\r\n            if (dateOne.getUTCFullYear() != dateTwo.getUTCFullYear()) {\r\n                changed = true;\r\n            }\r\n            break;\r\n        case \"month\":\r\n            if (dateOne.getUTCFullYear() != dateTwo.getUTCFullYear()) {\r\n                changed = true;\r\n            }\r\n            else if (dateOne.getUTCMonth() != dateTwo.getUTCMonth()) {\r\n                changed = true;\r\n            }\r\n            break;\r\n        case \"day\":\r\n            if (dateOne.getUTCMonth() != dateTwo.getUTCMonth()) {\r\n                changed = true;\r\n            }\r\n            else if (dateOne.getUTCDate() != dateTwo.getUTCDate()) {\r\n                changed = true;\r\n            }\r\n            break;\r\n        case \"hour\":\r\n            if (dateOne.getUTCHours() != dateTwo.getUTCHours()) {\r\n                changed = true;\r\n            }\r\n            break;\r\n        case \"minute\":\r\n            if (dateOne.getUTCMinutes() != dateTwo.getUTCMinutes()) {\r\n                changed = true;\r\n            }\r\n            break;\r\n        case \"second\":\r\n            if (dateOne.getUTCSeconds() != dateTwo.getUTCSeconds()) {\r\n                changed = true;\r\n            }\r\n            break;\r\n        case \"millisecond\":\r\n            if (dateOne.getTime() != dateTwo.getTime()) {\r\n                changed = true;\r\n            }\r\n            break;\r\n    }\r\n    if (changed) {\r\n        return changed;\r\n    }\r\n    var nextUnit = getNextUnit(unit);\r\n    if (nextUnit) {\r\n        return checkChange(timeOne, timeTwo, nextUnit, utc, timezone);\r\n    }\r\n    else {\r\n        return false;\r\n    }\r\n}\r\n/**\r\n * Adds `count` of time `unit` to the source date. Returns a modified `Date` object.\r\n *\r\n * @param date   Source date\r\n * @param unit   Time unit\r\n * @param count  Number of units to add\r\n * @return Modified date\r\n */\r\nexport function add(date, unit, count, utc, timezone) {\r\n    var timeZoneOffset = 0;\r\n    if (!utc && unit != \"millisecond\") {\r\n        timeZoneOffset = date.getTimezoneOffset();\r\n        if (timezone) {\r\n            timeZoneOffset -= timezone.offsetUTC(date);\r\n        }\r\n        date.setUTCMinutes(date.getUTCMinutes() - timeZoneOffset);\r\n    }\r\n    switch (unit) {\r\n        case \"day\":\r\n            var day = date.getUTCDate();\r\n            date.setUTCDate(day + count);\r\n            break;\r\n        case \"second\":\r\n            var seconds = date.getUTCSeconds();\r\n            date.setUTCSeconds(seconds + count);\r\n            break;\r\n        case \"millisecond\":\r\n            var milliseconds = date.getUTCMilliseconds();\r\n            date.setUTCMilliseconds(milliseconds + count);\r\n            break;\r\n        case \"hour\":\r\n            var hours = date.getUTCHours();\r\n            date.setUTCHours(hours + count);\r\n            break;\r\n        case \"minute\":\r\n            var minutes = date.getUTCMinutes();\r\n            date.setUTCMinutes(minutes + count);\r\n            break;\r\n        case \"year\":\r\n            var year = date.getUTCFullYear();\r\n            date.setUTCFullYear(year + count);\r\n            break;\r\n        case \"month\":\r\n            var month = date.getUTCMonth();\r\n            date.setUTCMonth(month + count);\r\n            break;\r\n        case \"week\":\r\n            var wday = date.getUTCDate();\r\n            date.setUTCDate(wday + count * 7);\r\n            break;\r\n    }\r\n    if (!utc && unit != \"millisecond\") {\r\n        date.setUTCMinutes(date.getUTCMinutes() + timeZoneOffset);\r\n        if (unit == \"day\" || unit == \"week\" || unit == \"month\" || unit == \"year\") {\r\n            var newTimeZoneOffset = date.getTimezoneOffset();\r\n            if (timezone) {\r\n                newTimeZoneOffset += timezone.offsetUTC(date);\r\n            }\r\n            if (newTimeZoneOffset != timeZoneOffset) {\r\n                var diff = newTimeZoneOffset - timeZoneOffset;\r\n                date.setUTCMinutes(date.getUTCMinutes() + diff);\r\n                // solves issues if new time falls back to old time zone\r\n                if (date.getTimezoneOffset() != newTimeZoneOffset) {\r\n                    date.setUTCMinutes(date.getUTCMinutes() - diff);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return date;\r\n}\r\n/**\r\n * \"Rounds\" the date to specific time unit.\r\n *\r\n * @param date             Source date\r\n * @param unit             Time unit\r\n * @param count            Number of units to round to\r\n * @param firstDateOfWeek  First day of week\r\n * @param utc              Use UTC timezone\r\n * @param firstDate        First date to round to\r\n * @param roundMinutes     Minutes to round to (some timezones use non-whole hour)\r\n * @param timezone         Use specific named timezone when rounding\r\n * @return New date\r\n */\r\nexport function round(date, unit, count, firstDateOfWeek, utc, firstDate, timezone) {\r\n    if (!timezone || utc) {\r\n        var timeZoneOffset = 0;\r\n        if (!utc && unit != \"millisecond\") {\r\n            timeZoneOffset = date.getTimezoneOffset();\r\n            date.setUTCMinutes(date.getUTCMinutes() - timeZoneOffset);\r\n        }\r\n        switch (unit) {\r\n            case \"day\":\r\n                var day = date.getUTCDate();\r\n                if (count > 1) {\r\n                    //\tday = Math.floor(day / count) * count;\r\n                    if (firstDate) {\r\n                        firstDate = round(firstDate, \"day\", 1);\r\n                        var difference = date.getTime() - firstDate.getTime();\r\n                        var unitCount = Math.floor(difference / getDuration(\"day\") / count);\r\n                        var duration = getDuration(\"day\", unitCount * count);\r\n                        date.setTime(firstDate.getTime() + duration - timeZoneOffset * getDuration(\"minute\"));\r\n                    }\r\n                }\r\n                else {\r\n                    date.setUTCDate(day);\r\n                }\r\n                date.setUTCHours(0, 0, 0, 0);\r\n                break;\r\n            case \"second\":\r\n                var seconds = date.getUTCSeconds();\r\n                if (count > 1) {\r\n                    seconds = Math.floor(seconds / count) * count;\r\n                }\r\n                date.setUTCSeconds(seconds, 0);\r\n                break;\r\n            case \"millisecond\":\r\n                if (count == 1) {\r\n                    return date; // much better for perf!\r\n                }\r\n                var milliseconds = date.getUTCMilliseconds();\r\n                milliseconds = Math.floor(milliseconds / count) * count;\r\n                date.setUTCMilliseconds(milliseconds);\r\n                break;\r\n            case \"hour\":\r\n                var hours = date.getUTCHours();\r\n                if (count > 1) {\r\n                    hours = Math.floor(hours / count) * count;\r\n                }\r\n                date.setUTCHours(hours, 0, 0, 0);\r\n                break;\r\n            case \"minute\":\r\n                var minutes = date.getUTCMinutes();\r\n                milliseconds = date.getUTCMilliseconds();\r\n                if (count > 1) {\r\n                    minutes = Math.floor(minutes / count) * count;\r\n                }\r\n                date.setUTCMinutes(minutes, 0, 0);\r\n                break;\r\n            case \"month\":\r\n                var month = date.getUTCMonth();\r\n                if (count > 1) {\r\n                    month = Math.floor(month / count) * count;\r\n                }\r\n                date.setUTCMonth(month, 1);\r\n                date.setUTCHours(0, 0, 0, 0);\r\n                break;\r\n            case \"year\":\r\n                var year = date.getUTCFullYear();\r\n                if (count > 1) {\r\n                    year = Math.floor(year / count) * count;\r\n                }\r\n                date.setUTCFullYear(year, 0, 1);\r\n                date.setUTCHours(0, 0, 0, 0);\r\n                break;\r\n            case \"week\":\r\n                var wday = date.getUTCDate();\r\n                var weekDay = date.getUTCDay();\r\n                if (!$type.isNumber(firstDateOfWeek)) {\r\n                    firstDateOfWeek = 1;\r\n                }\r\n                if (weekDay >= firstDateOfWeek) {\r\n                    wday = wday - weekDay + firstDateOfWeek;\r\n                }\r\n                else {\r\n                    wday = wday - (7 + weekDay) + firstDateOfWeek;\r\n                }\r\n                date.setUTCDate(wday);\r\n                date.setUTCHours(0, 0, 0, 0);\r\n                break;\r\n        }\r\n        if (!utc && unit != \"millisecond\") {\r\n            date.setUTCMinutes(date.getUTCMinutes() + timeZoneOffset);\r\n            if (unit == \"day\" || unit == \"week\" || unit == \"month\" || unit == \"year\") {\r\n                var newTimeZoneOffset = date.getTimezoneOffset();\r\n                if (newTimeZoneOffset != timeZoneOffset) {\r\n                    var diff = newTimeZoneOffset - timeZoneOffset;\r\n                    date.setUTCMinutes(date.getUTCMinutes() + diff);\r\n                }\r\n            }\r\n        }\r\n        return date;\r\n    }\r\n    else {\r\n        if (isNaN(date.getTime())) {\r\n            return date;\r\n        }\r\n        var tzoffset = timezone.offsetUTC(date);\r\n        var timeZoneOffset = date.getTimezoneOffset();\r\n        var parsedDate = timezone.parseDate(date);\r\n        //console.log(parsedDate)\r\n        var year = parsedDate.year;\r\n        var month = parsedDate.month;\r\n        var day = parsedDate.day;\r\n        var hour = parsedDate.hour;\r\n        var minute = parsedDate.minute;\r\n        var second = parsedDate.second;\r\n        var millisecond = parsedDate.millisecond;\r\n        var weekday = parsedDate.weekday;\r\n        switch (unit) {\r\n            case \"day\":\r\n                if (count > 1 && firstDate) {\r\n                    firstDate = round(firstDate, \"day\", 1, firstDateOfWeek, utc, undefined, timezone);\r\n                    var difference = date.getTime() - firstDate.getTime();\r\n                    var unitCount = Math.floor(difference / getDuration(\"day\") / count);\r\n                    var duration = getDuration(\"day\", unitCount * count);\r\n                    date.setTime(firstDate.getTime() + duration);\r\n                    parsedDate = timezone.parseDate(date);\r\n                    year = parsedDate.year;\r\n                    month = parsedDate.month;\r\n                    day = parsedDate.day;\r\n                }\r\n                hour = 0;\r\n                minute = tzoffset - timeZoneOffset;\r\n                second = 0;\r\n                millisecond = 0;\r\n                break;\r\n            case \"second\":\r\n                minute += tzoffset - timeZoneOffset;\r\n                if (count > 1) {\r\n                    second = Math.floor(second / count) * count;\r\n                }\r\n                millisecond = 0;\r\n                break;\r\n            case \"millisecond\":\r\n                minute += tzoffset - timeZoneOffset;\r\n                if (count > 1) {\r\n                    millisecond = Math.floor(millisecond / count) * count;\r\n                }\r\n                break;\r\n            case \"hour\":\r\n                if (count > 1) {\r\n                    hour = Math.floor(hour / count) * count;\r\n                }\r\n                minute = tzoffset - timeZoneOffset;\r\n                second = 0;\r\n                millisecond = 0;\r\n                break;\r\n            case \"minute\":\r\n                if (count > 1) {\r\n                    minute = Math.floor(minute / count) * count;\r\n                }\r\n                minute += tzoffset - timeZoneOffset;\r\n                second = 0;\r\n                millisecond = 0;\r\n                break;\r\n            case \"month\":\r\n                if (count > 1) {\r\n                    month = Math.floor(month / count) * count;\r\n                }\r\n                day = 1;\r\n                hour = 0;\r\n                minute = tzoffset - timeZoneOffset;\r\n                second = 0;\r\n                millisecond = 0;\r\n                break;\r\n            case \"year\":\r\n                if (count > 1) {\r\n                    year = Math.floor(year / count) * count;\r\n                }\r\n                month = 0;\r\n                day = 1;\r\n                hour = 0;\r\n                minute = tzoffset - timeZoneOffset;\r\n                second = 0;\r\n                millisecond = 0;\r\n                break;\r\n            case \"week\":\r\n                if (!$type.isNumber(firstDateOfWeek)) {\r\n                    firstDateOfWeek = 1;\r\n                }\r\n                if (weekday >= firstDateOfWeek) {\r\n                    day = day - weekday + firstDateOfWeek;\r\n                }\r\n                else {\r\n                    day = day - (7 + weekday) + firstDateOfWeek;\r\n                }\r\n                hour = 0;\r\n                minute = tzoffset - timeZoneOffset;\r\n                second = 0;\r\n                millisecond = 0;\r\n                break;\r\n        }\r\n        date = new Date(year, month, day, hour, minute, second, millisecond);\r\n        var newOffset = date.getTimezoneOffset();\r\n        if (newOffset != timeZoneOffset) {\r\n            date.setTime(date.getTime() + (timeZoneOffset - newOffset) * 60000);\r\n        }\r\n        return date;\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport function chooseInterval(index, duration, gridCount, intervals) {\r\n    var gridInterval = intervals[index];\r\n    var intervalDuration = getIntervalDuration(gridInterval);\r\n    var lastIndex = intervals.length - 1;\r\n    if (index >= lastIndex) {\r\n        return __assign({}, intervals[lastIndex]);\r\n    }\r\n    var count = Math.ceil(duration / intervalDuration);\r\n    if (duration < intervalDuration && index > 0) {\r\n        return __assign({}, intervals[index - 1]);\r\n    }\r\n    if (count <= gridCount) {\r\n        return __assign({}, intervals[index]);\r\n    }\r\n    else {\r\n        if (index + 1 < intervals.length) {\r\n            return chooseInterval(index + 1, duration, gridCount, intervals);\r\n        }\r\n        else {\r\n            return __assign({}, intervals[index]);\r\n        }\r\n    }\r\n}\r\n/**\r\n * @ignore\r\n */\r\nexport function getUnitValue(date, unit) {\r\n    switch (unit) {\r\n        case \"day\":\r\n            return date.getDate();\r\n        case \"second\":\r\n            return date.getSeconds();\r\n        case \"millisecond\":\r\n            return date.getMilliseconds();\r\n        case \"hour\":\r\n            return date.getHours();\r\n        case \"minute\":\r\n            return date.getMinutes();\r\n        case \"month\":\r\n            return date.getMonth();\r\n        case \"year\":\r\n            return date.getFullYear();\r\n        case \"week\":\r\n            return $utils.getWeek(date);\r\n    }\r\n}\r\n//# sourceMappingURL=Time.js.map","import { __awaiter, __extends, __generator } from \"tslib\";\r\nimport { Component } from \"../../core/render/Component\";\r\nimport { List } from \"../../core/util/List\";\r\nimport { Color } from \"../../core/util/Color\";\r\nimport { percentInterpolate } from \"../../core/util/Animation\";\r\nimport { Percent } from \"../../core/util/Percent\";\r\nimport * as $array from \"../../core/util/Array\";\r\nimport * as $type from \"../../core/util/Type\";\r\nimport * as $time from \"../../core/util/Time\";\r\nimport { p100 } from \"../../core/util/Percent\";\r\nimport { Container } from \"../../core/render/Container\";\r\nimport { Label } from \"../../core/render/Label\";\r\n/**\r\n * A base class for all series.\r\n */\r\nvar Series = /** @class */ (function (_super) {\r\n    __extends(Series, _super);\r\n    function Series() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        Object.defineProperty(_this, \"_aggregatesCalculated\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(_this, \"_selectionAggregatesCalculated\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(_this, \"_dataProcessed\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(_this, \"_psi\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(_this, \"_pei\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        /**\r\n         * A chart series belongs to.\r\n         */\r\n        Object.defineProperty(_this, \"chart\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        /**\r\n         * List of bullets to use for the series.\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v5/concepts/common-elements/bullets/} for more info\r\n         */\r\n        Object.defineProperty(_this, \"bullets\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: new List()\r\n        });\r\n        /**\r\n         * A [[Container]] series' bullets are stored in.\r\n         *\r\n         * @default Container.new()\r\n         */\r\n        Object.defineProperty(_this, \"bulletsContainer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: Container.new(_this._root, { width: p100, height: p100, position: \"absolute\" })\r\n        });\r\n        return _this;\r\n    }\r\n    Object.defineProperty(Series.prototype, \"_afterNew\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            var _this = this;\r\n            this.valueFields.push(\"value\");\r\n            _super.prototype._afterNew.call(this);\r\n            this.setPrivate(\"customData\", {});\r\n            this._disposers.push(this.bullets.events.onAll(function (change) {\r\n                if (change.type === \"clear\") {\r\n                    _this._handleBullets(_this.dataItems);\r\n                }\r\n                else if (change.type === \"push\") {\r\n                    _this._handleBullets(_this.dataItems);\r\n                }\r\n                else if (change.type === \"setIndex\") {\r\n                    _this._handleBullets(_this.dataItems);\r\n                }\r\n                else if (change.type === \"insertIndex\") {\r\n                    _this._handleBullets(_this.dataItems);\r\n                }\r\n                else if (change.type === \"removeIndex\") {\r\n                    _this._handleBullets(_this.dataItems);\r\n                }\r\n                else if (change.type === \"moveIndex\") {\r\n                    _this._handleBullets(_this.dataItems);\r\n                }\r\n                else {\r\n                    throw new Error(\"Unknown IListEvent type\");\r\n                }\r\n            }));\r\n        }\r\n    });\r\n    Object.defineProperty(Series.prototype, \"_dispose\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            this.bulletsContainer.dispose(); // can be in a different parent\r\n            _super.prototype._dispose.call(this);\r\n        }\r\n    });\r\n    Object.defineProperty(Series.prototype, \"startIndex\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            var len = this.dataItems.length;\r\n            return Math.min(this.getPrivate(\"startIndex\", 0), len);\r\n        }\r\n    });\r\n    Object.defineProperty(Series.prototype, \"endIndex\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            var len = this.dataItems.length;\r\n            return Math.min(this.getPrivate(\"endIndex\", len), len);\r\n        }\r\n    });\r\n    Object.defineProperty(Series.prototype, \"_handleBullets\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (dataItems) {\r\n            $array.each(dataItems, function (dataItem) {\r\n                var bullets = dataItem.bullets;\r\n                if (bullets) {\r\n                    $array.each(bullets, function (bullet) {\r\n                        bullet.dispose();\r\n                    });\r\n                    dataItem.bullets = undefined;\r\n                }\r\n            });\r\n            this.markDirtyValues();\r\n        }\r\n    });\r\n    /**\r\n     * Looks up and returns a data item by its ID.\r\n     *\r\n     * @param   id  ID\r\n     * @return      Data item\r\n     */\r\n    Object.defineProperty(Series.prototype, \"getDataItemById\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (id) {\r\n            return $array.find(this.dataItems, function (dataItem) {\r\n                return dataItem.get(\"id\") == id;\r\n            });\r\n        }\r\n    });\r\n    Object.defineProperty(Series.prototype, \"_makeBullets\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (dataItem) {\r\n            var _this = this;\r\n            if (this._shouldMakeBullet(dataItem)) {\r\n                dataItem.bullets = [];\r\n                this.bullets.each(function (bulletFunction) {\r\n                    _this._makeBullet(dataItem, bulletFunction);\r\n                });\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Series.prototype, \"_shouldMakeBullet\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (_dataItem) {\r\n            return true;\r\n        }\r\n    });\r\n    Object.defineProperty(Series.prototype, \"_makeBullet\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (dataItem, bulletFunction, index) {\r\n            var bullet = bulletFunction(this._root, this, dataItem);\r\n            if (bullet) {\r\n                var sprite = bullet.get(\"sprite\");\r\n                if (sprite) {\r\n                    sprite._setDataItem(dataItem);\r\n                    sprite.setRaw(\"position\", \"absolute\");\r\n                    this.bulletsContainer.children.push(sprite);\r\n                }\r\n                bullet._index = index;\r\n                bullet.series = this;\r\n                dataItem.bullets.push(bullet);\r\n            }\r\n            return bullet;\r\n        }\r\n    });\r\n    Object.defineProperty(Series.prototype, \"_clearDirty\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            _super.prototype._clearDirty.call(this);\r\n            this._aggregatesCalculated = false;\r\n            this._selectionAggregatesCalculated = false;\r\n        }\r\n    });\r\n    Object.defineProperty(Series.prototype, \"_prepareChildren\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            var _this = this;\r\n            _super.prototype._prepareChildren.call(this);\r\n            var startIndex = this.startIndex();\r\n            var endIndex = this.endIndex();\r\n            if (this.isDirty(\"heatRules\")) {\r\n                this._valuesDirty = true;\r\n            }\r\n            if (this.isPrivateDirty(\"baseValueSeries\")) {\r\n                var baseValueSeries = this.getPrivate(\"baseValueSeries\");\r\n                if (baseValueSeries) {\r\n                    this._disposers.push(baseValueSeries.onPrivate(\"startIndex\", function () {\r\n                        _this.markDirtyValues();\r\n                    }));\r\n                }\r\n            }\r\n            var calculateAggregates = this.get(\"calculateAggregates\");\r\n            if (calculateAggregates) {\r\n                if (this._valuesDirty && !this._dataProcessed) {\r\n                    if (!this._aggregatesCalculated) {\r\n                        this._calculateAggregates(0, this.dataItems.length);\r\n                        this._aggregatesCalculated = true;\r\n                    }\r\n                }\r\n                if ((this._psi != startIndex || this._pei != endIndex) && !this._selectionAggregatesCalculated) {\r\n                    if (startIndex === 0 && endIndex === this.dataItems.length && this._aggregatesCalculated) {\r\n                        // void\r\n                    }\r\n                    else {\r\n                        this._calculateAggregates(startIndex, endIndex);\r\n                    }\r\n                    this._selectionAggregatesCalculated = true;\r\n                }\r\n            }\r\n            if (this.isDirty(\"tooltip\")) {\r\n                var tooltip = this.get(\"tooltip\");\r\n                if (tooltip) {\r\n                    tooltip.hide(0);\r\n                    tooltip.set(\"tooltipTarget\", this);\r\n                }\r\n            }\r\n            if (this.isDirty(\"fill\") || this.isDirty(\"stroke\")) {\r\n                var markerRectangle = void 0;\r\n                var legendDataItem = this.get(\"legendDataItem\");\r\n                if (legendDataItem) {\r\n                    markerRectangle = legendDataItem.get(\"markerRectangle\");\r\n                    if (markerRectangle) {\r\n                        if (this.isVisible()) {\r\n                            if (this.isDirty(\"stroke\")) {\r\n                                var stroke = this.get(\"stroke\");\r\n                                markerRectangle.set(\"stroke\", stroke);\r\n                            }\r\n                            if (this.isDirty(\"fill\")) {\r\n                                var fill = this.get(\"fill\");\r\n                                markerRectangle.set(\"fill\", fill);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                this.updateLegendMarker(undefined);\r\n            }\r\n            if (this.bullets.length > 0) {\r\n                var startIndex_1 = this.startIndex();\r\n                var endIndex_1 = this.endIndex();\r\n                if (endIndex_1 < this.dataItems.length) {\r\n                    endIndex_1++;\r\n                }\r\n                for (var i = startIndex_1; i < endIndex_1; i++) {\r\n                    var dataItem = this.dataItems[i];\r\n                    if (!dataItem.bullets) {\r\n                        this._makeBullets(dataItem);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Series.prototype, \"_calculateAggregates\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (startIndex, endIndex) {\r\n            var _this = this;\r\n            var fields = this._valueFields;\r\n            if (!fields) {\r\n                throw new Error(\"No value fields are set for the series.\");\r\n            }\r\n            var sum = {};\r\n            var absSum = {};\r\n            var count = {};\r\n            var low = {};\r\n            var high = {};\r\n            var open = {};\r\n            var close = {};\r\n            var average = {};\r\n            var previous = {};\r\n            $array.each(fields, function (key) {\r\n                sum[key] = 0;\r\n                absSum[key] = 0;\r\n                count[key] = 0;\r\n            });\r\n            $array.each(fields, function (key) {\r\n                var change = key + \"Change\";\r\n                var changePercent = key + \"ChangePercent\";\r\n                var changePrevious = key + \"ChangePrevious\";\r\n                var changePreviousPercent = key + \"ChangePreviousPercent\";\r\n                var changeSelection = key + \"ChangeSelection\";\r\n                var changeSelectionPercent = key + \"ChangeSelectionPercent\";\r\n                var openKey = \"valueY\";\r\n                if (key == \"valueX\" || key == \"openValueX\" || key == \"lowValueX\" || key == \"highValueX\") {\r\n                    openKey = \"valueX\";\r\n                }\r\n                var baseValueSeries = _this.getPrivate(\"baseValueSeries\");\r\n                for (var i = startIndex; i < endIndex; i++) {\r\n                    var dataItem = _this.dataItems[i];\r\n                    var value = dataItem.get(key);\r\n                    if (value != null) {\r\n                        count[key]++;\r\n                        sum[key] += value;\r\n                        absSum[key] += Math.abs(value);\r\n                        average[key] = sum[key] / count[key];\r\n                        if (low[key] > value || low[key] == null) {\r\n                            low[key] = value;\r\n                        }\r\n                        if (high[key] < value || high[key] == null) {\r\n                            high[key] = value;\r\n                        }\r\n                        close[key] = value;\r\n                        if (open[key] == null) {\r\n                            open[key] = value;\r\n                            previous[key] = value;\r\n                            if (baseValueSeries) {\r\n                                open[openKey] = baseValueSeries._getBase(openKey);\r\n                            }\r\n                        }\r\n                        if (startIndex === 0) {\r\n                            dataItem.setRaw((change), value - open[openKey]);\r\n                            dataItem.setRaw((changePercent), (value - open[openKey]) / open[openKey] * 100);\r\n                        }\r\n                        dataItem.setRaw((changePrevious), value - previous[openKey]);\r\n                        dataItem.setRaw((changePreviousPercent), (value - previous[openKey]) / previous[openKey] * 100);\r\n                        dataItem.setRaw((changeSelection), value - open[openKey]);\r\n                        dataItem.setRaw((changeSelectionPercent), (value - open[openKey]) / open[openKey] * 100);\r\n                        previous[key] = value;\r\n                    }\r\n                }\r\n            });\r\n            $array.each(fields, function (key) {\r\n                _this.setPrivate((key + \"AverageSelection\"), average[key]);\r\n                _this.setPrivate((key + \"CountSelection\"), count[key]);\r\n                _this.setPrivate((key + \"SumSelection\"), sum[key]);\r\n                _this.setPrivate((key + \"AbsoluteSumSelection\"), absSum[key]);\r\n                _this.setPrivate((key + \"LowSelection\"), low[key]);\r\n                _this.setPrivate((key + \"HighSelection\"), high[key]);\r\n                _this.setPrivate((key + \"OpenSelection\"), open[key]);\r\n                _this.setPrivate((key + \"CloseSelection\"), close[key]);\r\n            });\r\n            if (startIndex === 0 && endIndex === this.dataItems.length) {\r\n                $array.each(fields, function (key) {\r\n                    _this.setPrivate((key + \"Average\"), average[key]);\r\n                    _this.setPrivate((key + \"Count\"), count[key]);\r\n                    _this.setPrivate((key + \"Sum\"), sum[key]);\r\n                    _this.setPrivate((key + \"AbsoluteSum\"), absSum[key]);\r\n                    _this.setPrivate((key + \"Low\"), low[key]);\r\n                    _this.setPrivate((key + \"High\"), high[key]);\r\n                    _this.setPrivate((key + \"Open\"), open[key]);\r\n                    _this.setPrivate((key + \"Close\"), close[key]);\r\n                });\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Series.prototype, \"_updateChildren\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            var _this = this;\r\n            _super.prototype._updateChildren.call(this);\r\n            this._psi = this.startIndex();\r\n            this._pei = this.endIndex();\r\n            if (this.isDirty(\"visible\")) {\r\n                this.bulletsContainer.set(\"visible\", this.get(\"visible\"));\r\n            }\r\n            // Apply heat rules\r\n            var rules = this.get(\"heatRules\");\r\n            if (this._valuesDirty && rules && rules.length > 0) {\r\n                $array.each(rules, function (rule) {\r\n                    var minValue = rule.minValue || _this.getPrivate((rule.dataField + \"Low\")) || 0;\r\n                    var maxValue = rule.maxValue || _this.getPrivate((rule.dataField + \"High\")) || 0;\r\n                    $array.each(rule.target._entities, function (target) {\r\n                        var value = target.dataItem.get(rule.dataField);\r\n                        if (!$type.isNumber(value)) {\r\n                            if (rule.neutral) {\r\n                                target.set(rule.key, rule.neutral);\r\n                            }\r\n                            return;\r\n                        }\r\n                        var percent;\r\n                        if (rule.logarithmic) {\r\n                            percent = (Math.log(value) * Math.LOG10E - Math.log(minValue) * Math.LOG10E) / ((Math.log(maxValue) * Math.LOG10E - Math.log(minValue) * Math.LOG10E));\r\n                        }\r\n                        else {\r\n                            percent = (value - minValue) / (maxValue - minValue);\r\n                        }\r\n                        if ($type.isNumber(value) && (!$type.isNumber(percent) || Math.abs(percent) == Infinity)) {\r\n                            percent = 0.5;\r\n                        }\r\n                        // fixes problems if all values are the same\r\n                        var propertyValue;\r\n                        if ($type.isNumber(rule.min)) {\r\n                            propertyValue = rule.min + (rule.max - rule.min) * percent;\r\n                        }\r\n                        else if (rule.min instanceof Color) {\r\n                            propertyValue = Color.interpolate(percent, rule.min, rule.max);\r\n                        }\r\n                        else if (rule.min instanceof Percent) {\r\n                            propertyValue = percentInterpolate(percent, rule.min, rule.max);\r\n                        }\r\n                        if (rule.customFunction) {\r\n                            rule.customFunction.call(_this, target, minValue, maxValue, value);\r\n                        }\r\n                        else {\r\n                            target.set(rule.key, propertyValue);\r\n                        }\r\n                    });\r\n                });\r\n            }\r\n            if (this.bullets.length > 0) {\r\n                var count = this.dataItems.length;\r\n                var startIndex = this.startIndex();\r\n                var endIndex = this.endIndex();\r\n                if (endIndex < count) {\r\n                    endIndex++;\r\n                }\r\n                if (startIndex > 0) {\r\n                    startIndex--;\r\n                }\r\n                for (var i = 0; i < startIndex; i++) {\r\n                    this._hideBullets(this.dataItems[i]);\r\n                }\r\n                for (var i = startIndex; i < endIndex; i++) {\r\n                    this._positionBullets(this.dataItems[i]);\r\n                }\r\n                for (var i = endIndex; i < count; i++) {\r\n                    this._hideBullets(this.dataItems[i]);\r\n                }\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Series.prototype, \"_positionBullets\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (dataItem) {\r\n            var _this = this;\r\n            if (dataItem.bullets) {\r\n                $array.each(dataItem.bullets, function (bullet) {\r\n                    _this._positionBullet(bullet);\r\n                    var sprite = bullet.get(\"sprite\");\r\n                    if (bullet.get(\"dynamic\")) {\r\n                        if (sprite) {\r\n                            sprite._markDirtyKey(\"fill\");\r\n                            sprite.markDirtySize();\r\n                        }\r\n                        if (sprite instanceof Container) {\r\n                            sprite.walkChildren(function (child) {\r\n                                child._markDirtyKey(\"fill\");\r\n                                child.markDirtySize();\r\n                                if (child instanceof Label) {\r\n                                    child.text.markDirtyText();\r\n                                }\r\n                            });\r\n                        }\r\n                    }\r\n                    if (sprite instanceof Label && sprite.get(\"populateText\")) {\r\n                        sprite.text.markDirtyText();\r\n                    }\r\n                });\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Series.prototype, \"_hideBullets\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (dataItem) {\r\n            if (dataItem.bullets) {\r\n                $array.each(dataItem.bullets, function (bullet) {\r\n                    var sprite = bullet.get(\"sprite\");\r\n                    if (sprite) {\r\n                        sprite.setPrivate(\"visible\", false);\r\n                    }\r\n                });\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Series.prototype, \"_positionBullet\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (_bullet) {\r\n        }\r\n    });\r\n    Object.defineProperty(Series.prototype, \"_placeBulletsContainer\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (chart) {\r\n            chart.bulletsContainer.children.moveValue(this.bulletsContainer);\r\n        }\r\n    });\r\n    Object.defineProperty(Series.prototype, \"_removeBulletsContainer\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            var bulletsContainer = this.bulletsContainer;\r\n            if (bulletsContainer.parent) {\r\n                bulletsContainer.parent.children.removeValue(bulletsContainer);\r\n            }\r\n        }\r\n    });\r\n    /**\r\n     * @ignore\r\n     */\r\n    Object.defineProperty(Series.prototype, \"disposeDataItem\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (dataItem) {\r\n            //super.disposeDataItem(dataItem); // does nothing\r\n            var bullets = dataItem.bullets;\r\n            if (bullets) {\r\n                $array.each(bullets, function (bullet) {\r\n                    bullet.dispose();\r\n                });\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Series.prototype, \"_getItemReaderLabel\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            return \"\";\r\n        }\r\n    });\r\n    /**\r\n     * Shows series's data item.\r\n     *\r\n     * @param   dataItem  Data item\r\n     * @param   duration  Animation duration in milliseconds\r\n     * @return            Promise\r\n     */\r\n    Object.defineProperty(Series.prototype, \"showDataItem\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (dataItem, duration) {\r\n            return __awaiter(this, void 0, void 0, function () {\r\n                var promises, bullets;\r\n                return __generator(this, function (_a) {\r\n                    switch (_a.label) {\r\n                        case 0:\r\n                            promises = [_super.prototype.showDataItem.call(this, dataItem, duration)];\r\n                            bullets = dataItem.bullets;\r\n                            if (bullets) {\r\n                                $array.each(bullets, function (bullet) {\r\n                                    promises.push(bullet.get(\"sprite\").show(duration));\r\n                                });\r\n                            }\r\n                            return [4 /*yield*/, Promise.all(promises)];\r\n                        case 1:\r\n                            _a.sent();\r\n                            return [2 /*return*/];\r\n                    }\r\n                });\r\n            });\r\n        }\r\n    });\r\n    /**\r\n     * Hides series's data item.\r\n     *\r\n     * @param   dataItem  Data item\r\n     * @param   duration  Animation duration in milliseconds\r\n     * @return            Promise\r\n     */\r\n    Object.defineProperty(Series.prototype, \"hideDataItem\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (dataItem, duration) {\r\n            return __awaiter(this, void 0, void 0, function () {\r\n                var promises, bullets;\r\n                return __generator(this, function (_a) {\r\n                    switch (_a.label) {\r\n                        case 0:\r\n                            promises = [_super.prototype.hideDataItem.call(this, dataItem, duration)];\r\n                            bullets = dataItem.bullets;\r\n                            if (bullets) {\r\n                                $array.each(bullets, function (bullet) {\r\n                                    promises.push(bullet.get(\"sprite\").hide(duration));\r\n                                });\r\n                            }\r\n                            return [4 /*yield*/, Promise.all(promises)];\r\n                        case 1:\r\n                            _a.sent();\r\n                            return [2 /*return*/];\r\n                    }\r\n                });\r\n            });\r\n        }\r\n    });\r\n    Object.defineProperty(Series.prototype, \"_sequencedShowHide\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (show, duration) {\r\n            return __awaiter(this, void 0, void 0, function () {\r\n                var startIndex_2, endIndex_2;\r\n                var _this = this;\r\n                return __generator(this, function (_a) {\r\n                    switch (_a.label) {\r\n                        case 0:\r\n                            if (!this.get(\"sequencedInterpolation\")) return [3 /*break*/, 4];\r\n                            if (!$type.isNumber(duration)) {\r\n                                duration = this.get(\"interpolationDuration\", 0);\r\n                            }\r\n                            if (!(duration > 0)) return [3 /*break*/, 2];\r\n                            startIndex_2 = this.startIndex();\r\n                            endIndex_2 = this.endIndex();\r\n                            return [4 /*yield*/, Promise.all($array.map(this.dataItems, function (dataItem, i) { return __awaiter(_this, void 0, void 0, function () {\r\n                                    var realDuration, delay;\r\n                                    return __generator(this, function (_a) {\r\n                                        switch (_a.label) {\r\n                                            case 0:\r\n                                                realDuration = duration || 0;\r\n                                                if (i < startIndex_2 - 10 || i > endIndex_2 + 10) {\r\n                                                    realDuration = 0;\r\n                                                }\r\n                                                delay = this.get(\"sequencedDelay\", 0) + realDuration / (endIndex_2 - startIndex_2);\r\n                                                return [4 /*yield*/, $time.sleep(delay * (i - startIndex_2))];\r\n                                            case 1:\r\n                                                _a.sent();\r\n                                                if (!show) return [3 /*break*/, 3];\r\n                                                return [4 /*yield*/, this.showDataItem(dataItem, realDuration)];\r\n                                            case 2:\r\n                                                _a.sent();\r\n                                                return [3 /*break*/, 5];\r\n                                            case 3: return [4 /*yield*/, this.hideDataItem(dataItem, realDuration)];\r\n                                            case 4:\r\n                                                _a.sent();\r\n                                                _a.label = 5;\r\n                                            case 5: return [2 /*return*/];\r\n                                        }\r\n                                    });\r\n                                }); }))];\r\n                        case 1:\r\n                            _a.sent();\r\n                            return [3 /*break*/, 4];\r\n                        case 2: return [4 /*yield*/, Promise.all($array.map(this.dataItems, function (dataItem) {\r\n                                if (show) {\r\n                                    return _this.showDataItem(dataItem, 0);\r\n                                }\r\n                                else {\r\n                                    return _this.hideDataItem(dataItem, 0);\r\n                                }\r\n                            }))];\r\n                        case 3:\r\n                            _a.sent();\r\n                            _a.label = 4;\r\n                        case 4: return [2 /*return*/];\r\n                    }\r\n                });\r\n            });\r\n        }\r\n    });\r\n    /**\r\n     * @ignore\r\n     */\r\n    Object.defineProperty(Series.prototype, \"updateLegendValue\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (dataItem) {\r\n            var legendDataItem = dataItem.get(\"legendDataItem\");\r\n            if (legendDataItem) {\r\n                var valueLabel = legendDataItem.get(\"valueLabel\");\r\n                if (valueLabel) {\r\n                    var text = valueLabel.text;\r\n                    var txt = \"\";\r\n                    valueLabel._setDataItem(dataItem);\r\n                    txt = this.get(\"legendValueText\", text.get(\"text\", \"\"));\r\n                    valueLabel.set(\"text\", txt);\r\n                    text.markDirtyText();\r\n                }\r\n                var label = legendDataItem.get(\"label\");\r\n                if (label) {\r\n                    var text = label.text;\r\n                    var txt = \"\";\r\n                    label._setDataItem(dataItem);\r\n                    txt = this.get(\"legendLabelText\", text.get(\"text\", \"\"));\r\n                    label.set(\"text\", txt);\r\n                    text.markDirtyText();\r\n                }\r\n            }\r\n        }\r\n    });\r\n    /**\r\n     * @ignore\r\n     */\r\n    Object.defineProperty(Series.prototype, \"updateLegendMarker\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (_dataItem) {\r\n        }\r\n    });\r\n    Object.defineProperty(Series.prototype, \"_onHide\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            _super.prototype._onHide.call(this);\r\n            var tooltip = this.getTooltip();\r\n            if (tooltip) {\r\n                tooltip.hide();\r\n            }\r\n        }\r\n    });\r\n    /**\r\n     * @ignore\r\n     */\r\n    Object.defineProperty(Series.prototype, \"hoverDataItem\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (_dataItem) { }\r\n    });\r\n    /**\r\n     * @ignore\r\n     */\r\n    Object.defineProperty(Series.prototype, \"unhoverDataItem\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (_dataItem) { }\r\n    });\r\n    /**\r\n     * @ignore\r\n     */\r\n    Object.defineProperty(Series.prototype, \"_getBase\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (key) {\r\n            var dataItem = this.dataItems[this.startIndex()];\r\n            if (dataItem) {\r\n                return dataItem.get(key);\r\n            }\r\n            return 0;\r\n        }\r\n    });\r\n    Object.defineProperty(Series, \"className\", {\r\n        enumerable: true,\r\n        configurable: true,\r\n        writable: true,\r\n        value: \"Series\"\r\n    });\r\n    Object.defineProperty(Series, \"classNames\", {\r\n        enumerable: true,\r\n        configurable: true,\r\n        writable: true,\r\n        value: Component.classNames.concat([Series.className])\r\n    });\r\n    return Series;\r\n}(Component));\r\nexport { Series };\r\n//# sourceMappingURL=Series.js.map","import { __extends } from \"tslib\";\r\nimport { Entity } from \"./Entity\";\r\nimport { Color } from \"./Color\";\r\n/**\r\n * An object which holds list of colors and can generate new ones.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/concepts/colors-gradients-and-patterns/#Color_sets} for more info\r\n */\r\nvar ColorSet = /** @class */ (function (_super) {\r\n    __extends(ColorSet, _super);\r\n    function ColorSet() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    //protected _currentPass: number = 0;\r\n    Object.defineProperty(ColorSet.prototype, \"_afterNew\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            // Applying themes because color set will not have parent\r\n            _super.prototype._afterNewApplyThemes.call(this);\r\n            this._dirty[\"colors\"] = false;\r\n        }\r\n    });\r\n    Object.defineProperty(ColorSet.prototype, \"_beforeChanged\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            if (this.isDirty(\"colors\")) {\r\n                this.reset();\r\n            }\r\n        }\r\n    });\r\n    /**\r\n     * @ignore\r\n     */\r\n    Object.defineProperty(ColorSet.prototype, \"generateColors\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            this.setPrivate(\"currentPass\", this.getPrivate(\"currentPass\", 0) + 1);\r\n            var pass = this.getPrivate(\"currentPass\");\r\n            var colors = this.get(\"colors\", [this.get(\"baseColor\", Color.fromHex(0xff0000))]);\r\n            if (!this.getPrivate(\"numColors\")) {\r\n                this.setPrivate(\"numColors\", colors.length);\r\n            }\r\n            //const len = colors.length;\r\n            var len = this.getPrivate(\"numColors\");\r\n            //const start = len - this.getPrivate(\"numColors\")!;\r\n            var start = 0;\r\n            var passOptions = this.get(\"passOptions\");\r\n            var reuse = this.get(\"reuse\");\r\n            for (var i = start; i < len; i++) {\r\n                if (reuse) {\r\n                    colors.push(colors[i]);\r\n                }\r\n                else {\r\n                    var hsl = colors[i].toHSL();\r\n                    var h = hsl.h + (passOptions.hue || 0) * pass;\r\n                    while (h > 1)\r\n                        h -= 1;\r\n                    var s = hsl.s + (passOptions.saturation || 0) * pass;\r\n                    //if (s > 1) s -= Math.floor(s);\r\n                    if (s > 1)\r\n                        s = 1;\r\n                    if (s < 0)\r\n                        s = 0;\r\n                    var l = hsl.l + (passOptions.lightness || 0) * pass;\r\n                    //if (l > 1) l -= Math.floor(l);\r\n                    while (l > 1)\r\n                        l -= 1;\r\n                    colors.push(Color.fromHSL(h, s, l));\r\n                }\r\n            }\r\n        }\r\n    });\r\n    /**\r\n     * Returns a [[Color]] at specific index.\r\n     *\r\n     * If there's no color at this index, a new color is generated.\r\n     *\r\n     * @param   index  Index\r\n     * @return         Color\r\n     */\r\n    Object.defineProperty(ColorSet.prototype, \"getIndex\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (index) {\r\n            var colors = this.get(\"colors\", []);\r\n            var saturation = this.get(\"saturation\");\r\n            if (index >= colors.length) {\r\n                this.generateColors();\r\n                return this.getIndex(index);\r\n            }\r\n            return saturation != null ? Color.saturate(colors[index], saturation) : colors[index];\r\n        }\r\n    });\r\n    /**\r\n     * Returns next [[Color]] in the list.\r\n     *\r\n     * If the list is out of colors, new ones are generated dynamically.\r\n     */\r\n    Object.defineProperty(ColorSet.prototype, \"next\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            var currentStep = this.getPrivate(\"currentStep\", this.get(\"startIndex\", 0));\r\n            this.setPrivate(\"currentStep\", currentStep + this.get(\"step\", 1));\r\n            return this.getIndex(currentStep);\r\n        }\r\n    });\r\n    /**\r\n     * Resets counter to the start of the list, so the next call for `next()` will\r\n     * return the first color.\r\n     */\r\n    Object.defineProperty(ColorSet.prototype, \"reset\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            this.setPrivate(\"currentStep\", this.get(\"startIndex\", 0));\r\n            this.setPrivate(\"currentPass\", 0);\r\n        }\r\n    });\r\n    Object.defineProperty(ColorSet, \"className\", {\r\n        enumerable: true,\r\n        configurable: true,\r\n        writable: true,\r\n        value: \"ColorSet\"\r\n    });\r\n    Object.defineProperty(ColorSet, \"classNames\", {\r\n        enumerable: true,\r\n        configurable: true,\r\n        writable: true,\r\n        value: Entity.classNames.concat([ColorSet.className])\r\n    });\r\n    return ColorSet;\r\n}(Entity));\r\nexport { ColorSet };\r\n//# sourceMappingURL=ColorSet.js.map","import { __extends } from \"tslib\";\r\nimport { Theme } from \"../../core/Theme\";\r\nimport { percent, p100, p50 } from \"../../core/util/Percent\";\r\nimport { ColorSet } from \"../../core/util/ColorSet\";\r\nimport { setColor } from \"../../themes/DefaultTheme\";\r\nimport * as $ease from \"../../core/util/Ease\";\r\n/**\r\n * @ignore\r\n */\r\nvar HierarchyDefaultTheme = /** @class */ (function (_super) {\r\n    __extends(HierarchyDefaultTheme, _super);\r\n    function HierarchyDefaultTheme() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    Object.defineProperty(HierarchyDefaultTheme.prototype, \"setupDefaultRules\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            _super.prototype.setupDefaultRules.call(this);\r\n            var ic = this._root.interfaceColors;\r\n            var gridLayout = this._root.gridLayout;\r\n            var r = this.rule.bind(this);\r\n            /**\r\n             * ========================================================================\r\n             * charts/hierarchy\r\n             * ========================================================================\r\n             */\r\n            r(\"Hierarchy\").setAll({\r\n                legendLabelText: \"{category}\",\r\n                legendValueText: \"{sum.formatNumber('#.#')}\",\r\n                width: p100,\r\n                height: p100,\r\n                colors: ColorSet.new(this._root, { step: 2 }),\r\n                downDepth: 1,\r\n                initialDepth: 5,\r\n                singleBranchOnly: true,\r\n                maskContent: true,\r\n                animationEasing: $ease.out($ease.cubic)\r\n            });\r\n            r(\"HierarchyNode\").setAll({\r\n                toggleKey: \"disabled\",\r\n                setStateOnChildren: true,\r\n                position: \"absolute\",\r\n                isMeasured: false,\r\n                cursorOverStyle: \"pointer\",\r\n                tooltipText: \"{category}: {sum}\"\r\n            });\r\n            r(\"HierarchyNode\", [\"last\"]).setAll({\r\n                cursorOverStyle: \"default\"\r\n            });\r\n            {\r\n                var rule = r(\"Label\", [\"hierarchy\", \"node\"]);\r\n                rule.setAll({\r\n                    centerX: p50,\r\n                    centerY: p50,\r\n                    position: \"absolute\",\r\n                    paddingBottom: 1,\r\n                    paddingTop: 1,\r\n                    paddingRight: 4,\r\n                    paddingLeft: 4,\r\n                    text: \"{category}\",\r\n                    populateText: true,\r\n                    oversizedBehavior: \"fit\",\r\n                    minScale: 0.3\r\n                });\r\n                setColor(rule, \"fill\", ic, \"alternativeText\");\r\n            }\r\n            {\r\n                var rule = r(\"HierarchyLink\");\r\n                rule.setAll({\r\n                    isMeasured: false,\r\n                    position: \"absolute\",\r\n                    strokeWidth: 1,\r\n                    strokeOpacity: 1,\r\n                    strength: 0.9,\r\n                    distance: 1.1\r\n                });\r\n                setColor(rule, \"stroke\", ic, \"grid\");\r\n            }\r\n            r(\"Circle\", [\"linkedhierarchy\", \"shape\"]).setAll({\r\n                position: \"absolute\",\r\n                fillOpacity: 1,\r\n                strokeOpacity: 0,\r\n                radius: 15,\r\n                tooltipY: 0\r\n            });\r\n            r(\"Circle\", [\"linkedhierarchy\", \"shape\", \"outer\"]).setAll({\r\n                position: \"absolute\",\r\n                opacity: 1,\r\n                fillOpacity: 0,\r\n                strokeDasharray: 0,\r\n                strokeOpacity: 1,\r\n                radius: 15,\r\n                scale: 1.1,\r\n                interactive: false\r\n            });\r\n            r(\"Circle\", [\"linkedhierarchy\", \"shape\", \"outer\"]).states.create(\"disabled\", { opacity: 1, scale: 1.1, strokeDasharray: 2 });\r\n            r(\"Circle\", [\"linkedhierarchy\", \"shape\", \"outer\"]).states.create(\"hoverDisabled\", { scale: 1.2, opacity: 1, strokeDasharray: 2 });\r\n            r(\"Circle\", [\"linkedhierarchy\", \"shape\", \"outer\"]).states.create(\"hover\", { scale: 1.05, strokeDasharray: 0 });\r\n            r(\"Circle\", [\"linkedhierarchy\", \"shape\", \"outer\"]).states.create(\"hidden\", { opacity: 0, strokeDasharray: 0 });\r\n            /**\r\n             * ------------------------------------------------------------------------\r\n             * charts/hierarchy: BreadcrumbBar\r\n             * ------------------------------------------------------------------------\r\n             */\r\n            r(\"BreadcrumbBar\").setAll({\r\n                paddingLeft: 8,\r\n                layout: gridLayout\r\n            });\r\n            {\r\n                var rule = r(\"Label\", [\"breadcrumb\"]);\r\n                rule.setAll({\r\n                    paddingRight: 4,\r\n                    paddingLeft: 4,\r\n                    cursorOverStyle: \"pointer\",\r\n                    populateText: true,\r\n                    text: \"{category}:\",\r\n                });\r\n                setColor(rule, \"fill\", ic, \"primaryButton\");\r\n            }\r\n            {\r\n                var rule = r(\"Label\", [\"breadcrumb\"]).states.create(\"hover\", {});\r\n                setColor(rule, \"fill\", ic, \"primaryButtonHover\");\r\n            }\r\n            {\r\n                var rule = r(\"Label\", [\"breadcrumb\"]).states.create(\"down\", { stateAnimationDuration: 0 });\r\n                setColor(rule, \"fill\", ic, \"primaryButtonDown\");\r\n            }\r\n            {\r\n                var rule = r(\"Label\", [\"breadcrumb\", \"last\"]);\r\n                rule.setAll({\r\n                    populateText: true,\r\n                    text: \"{category}\",\r\n                    fontWeight: \"bold\",\r\n                    cursorOverStyle: \"default\"\r\n                });\r\n                setColor(rule, \"fill\", ic, \"primaryButton\");\r\n            }\r\n            {\r\n                var rule = r(\"RoundedRectangle\", [\"breadcrumb\", \"label\", \"background\"]);\r\n                rule.setAll({\r\n                    fillOpacity: 0,\r\n                });\r\n                setColor(rule, \"fill\", ic, \"background\");\r\n            }\r\n            /**\r\n             * ------------------------------------------------------------------------\r\n             * charts/hierarchy: Partition\r\n             * ------------------------------------------------------------------------\r\n             */\r\n            r(\"Partition\").setAll({\r\n                downDepth: 1,\r\n                upDepth: 0,\r\n                initialDepth: 5\r\n            });\r\n            r(\"HierarchyNode\", [\"partition\"]).setAll({\r\n                setStateOnChildren: false\r\n            });\r\n            r(\"HierarchyNode\", [\"partition\"]).states.create(\"hidden\", {\r\n                opacity: 1,\r\n                visible: true\r\n            });\r\n            {\r\n                var rule = r(\"Label\", [\"partition\", \"node\"]);\r\n                rule.setAll({\r\n                    x: p50,\r\n                    y: p50,\r\n                    centerY: p50,\r\n                    centerX: p50,\r\n                    paddingBottom: 1,\r\n                    paddingTop: 1,\r\n                    paddingLeft: 1,\r\n                    paddingRight: 1,\r\n                    rotation: 90,\r\n                    populateText: true,\r\n                    text: \"{category}\",\r\n                    oversizedBehavior: \"fit\",\r\n                    minScale: 0.4\r\n                });\r\n                setColor(rule, \"fill\", ic, \"alternativeText\");\r\n            }\r\n            r(\"Label\", [\"horizontal\", \"partition\", \"node\"]).setAll({\r\n                rotation: 0\r\n            });\r\n            {\r\n                var rule = r(\"RoundedRectangle\", [\"partition\", \"node\", \"shape\"]);\r\n                rule.setAll({\r\n                    strokeOpacity: 1,\r\n                    strokeWidth: 1,\r\n                    cornerRadiusBR: 0,\r\n                    cornerRadiusTR: 0,\r\n                    cornerRadiusBL: 0,\r\n                    cornerRadiusTL: 0\r\n                });\r\n                setColor(rule, \"stroke\", ic, \"background\");\r\n            }\r\n            r(\"RoundedRectangle\", [\"partition\", \"node\", \"shape\", \"last\"]).setAll({\r\n                fillOpacity: 0.75\r\n            });\r\n            /**\r\n             * ------------------------------------------------------------------------\r\n             * charts/hierarchy: Sunburst\r\n             * ------------------------------------------------------------------------\r\n             */\r\n            r(\"Sunburst\").setAll({\r\n                singleBranchOnly: true\r\n            });\r\n            r(\"HierarchyNode\", [\"sunburst\"]).setAll({\r\n                setStateOnChildren: false\r\n            });\r\n            r(\"HierarchyNode\", [\"sunburst\"]).states.create(\"hidden\", {\r\n                opacity: 0,\r\n                visible: false\r\n            });\r\n            {\r\n                var rule = r(\"Slice\", [\"sunburst\", \"node\", \"shape\"]);\r\n                rule.setAll({\r\n                    strokeOpacity: 1,\r\n                    strokeWidth: 1,\r\n                    cornerRadius: 0\r\n                });\r\n                setColor(rule, \"stroke\", ic, \"background\");\r\n            }\r\n            r(\"Slice\", [\"sunburst\", \"node\", \"shape\", \"last\"]).setAll({\r\n                fillOpacity: 0.75\r\n            });\r\n            {\r\n                var rule = r(\"RadialLabel\", [\"sunburst\", \"node\"]);\r\n                rule.setAll({\r\n                    x: 0,\r\n                    y: 0,\r\n                    textType: \"radial\",\r\n                    paddingBottom: 1,\r\n                    paddingTop: 1,\r\n                    paddingLeft: 1,\r\n                    paddingRight: 1,\r\n                    centerX: p50,\r\n                    populateText: true,\r\n                    text: \"{category}\",\r\n                    oversizedBehavior: \"fit\",\r\n                    minScale: 0.4,\r\n                    baseRadius: p50,\r\n                    rotation: 0\r\n                });\r\n                setColor(rule, \"fill\", ic, \"alternativeText\");\r\n            }\r\n            /**\r\n             * ------------------------------------------------------------------------\r\n             * charts/hierarchy: ForceDirected\r\n             * ------------------------------------------------------------------------\r\n             */\r\n            r(\"ForceDirected\").setAll({\r\n                minRadius: percent(1),\r\n                maxRadius: percent(8),\r\n                initialFrames: 500,\r\n                centerStrength: 0.8,\r\n                manyBodyStrength: -14,\r\n                velocityDecay: 0.5,\r\n                linkWithStrength: 0.5,\r\n                showOnFrame: 10,\r\n                singleBranchOnly: false,\r\n                upDepth: Infinity,\r\n                downDepth: 1,\r\n                initialDepth: 5,\r\n                topDepth: 0\r\n            });\r\n            /**\r\n             * ------------------------------------------------------------------------\r\n             * charts/hierarchy: Tree\r\n             * ------------------------------------------------------------------------\r\n             */\r\n            r(\"Tree\").setAll({\r\n                orientation: \"vertical\",\r\n                paddingLeft: 20,\r\n                paddingRight: 20,\r\n                paddingTop: 20,\r\n                paddingBottom: 20,\r\n                singleBranchOnly: false,\r\n                upDepth: Infinity,\r\n                downDepth: 1,\r\n                initialDepth: 5,\r\n                topDepth: 0\r\n            });\r\n            /**\r\n             * ------------------------------------------------------------------------\r\n             * charts/hierarchy: Pack\r\n             * ------------------------------------------------------------------------\r\n             */\r\n            r(\"Pack\").setAll({\r\n                paddingLeft: 20,\r\n                paddingTop: 20,\r\n                paddingBottom: 20,\r\n                paddingRight: 20,\r\n                nodePadding: 0\r\n            });\r\n            {\r\n                var rule = r(\"Label\", [\"pack\", \"node\"]);\r\n                rule.setAll({\r\n                    centerY: p50,\r\n                    centerX: p50,\r\n                    paddingBottom: 1,\r\n                    paddingTop: 1,\r\n                    paddingLeft: 1,\r\n                    paddingRight: 1,\r\n                    populateText: true,\r\n                    text: \"{category}\",\r\n                    oversizedBehavior: \"fit\",\r\n                    minScale: 0.4\r\n                });\r\n                setColor(rule, \"fill\", ic, \"alternativeText\");\r\n            }\r\n            {\r\n                var rule = r(\"Circle\", [\"pack\", \"node\", \"shape\"]);\r\n                rule.setAll({\r\n                    strokeOpacity: 0.5,\r\n                    fillOpacity: 0.8,\r\n                    strokeWidth: 1,\r\n                });\r\n                setColor(rule, \"stroke\", ic, \"background\");\r\n            }\r\n            r(\"LinkedHierarchyNode\").setAll({\r\n                draggable: true\r\n            });\r\n            r(\"LinkedHierarchyNode\").states.create(\"hidden\", { scale: 0, opacity: 0, visible: false });\r\n            /**\r\n             * ------------------------------------------------------------------------\r\n             * charts/hierarchy: Treemap\r\n             * ------------------------------------------------------------------------\r\n             */\r\n            r(\"Treemap\").setAll({\r\n                upDepth: 0,\r\n                layoutAlgorithm: \"squarify\"\r\n            });\r\n            {\r\n                var rule = r(\"Label\", [\"treemap\", \"node\"]);\r\n                rule.setAll({\r\n                    x: p50,\r\n                    y: p50,\r\n                    centerY: p50,\r\n                    centerX: p50,\r\n                    paddingBottom: 1,\r\n                    paddingTop: 1,\r\n                    paddingLeft: 1,\r\n                    paddingRight: 1,\r\n                    populateText: true,\r\n                    text: \"{category}\",\r\n                    oversizedBehavior: \"fit\",\r\n                    minScale: 0.4\r\n                });\r\n                setColor(rule, \"fill\", ic, \"alternativeText\");\r\n            }\r\n            r(\"HierarchyNode\", [\"treemap\", \"node\"]).setAll({\r\n                tooltipY: percent(40),\r\n                isMeasured: false,\r\n                position: \"absolute\"\r\n            });\r\n            {\r\n                var rule = r(\"RoundedRectangle\", [\"treemap\", \"node\", \"shape\"]);\r\n                rule.setAll({\r\n                    strokeOpacity: 1,\r\n                    strokeWidth: 1,\r\n                    cornerRadiusBR: 0,\r\n                    cornerRadiusTR: 0,\r\n                    cornerRadiusBL: 0,\r\n                    cornerRadiusTL: 0,\r\n                    fillOpacity: 1\r\n                });\r\n                setColor(rule, \"stroke\", ic, \"background\");\r\n            }\r\n        }\r\n    });\r\n    return HierarchyDefaultTheme;\r\n}(Theme));\r\nexport { HierarchyDefaultTheme };\r\n//# sourceMappingURL=HierarchyDefaultTheme.js.map","import { __extends } from \"tslib\";\r\nimport { HierarchyDefaultTheme } from \"./HierarchyDefaultTheme\";\r\nimport { Container } from \"../../core/render/Container\";\r\nimport { Label } from \"../../core/render/Label\";\r\nimport { RoundedRectangle } from \"../../core/render/RoundedRectangle\";\r\nimport { Template } from \"../../core/util/Template\";\r\nimport { ListTemplate } from \"../../core/util/List\";\r\nimport * as $utils from \"../../core/util/Utils\";\r\n/**\r\n * Creates a breadcrumb navigation control.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/charts/hierarchy/breadcrumbs/} for more info\r\n * @important\r\n */\r\nvar BreadcrumbBar = /** @class */ (function (_super) {\r\n    __extends(BreadcrumbBar, _super);\r\n    function BreadcrumbBar() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        /**\r\n         * A list of labels in the bar.\r\n         *\r\n         * `labels.template` can be used to configure label apperance and behavior.\r\n         *\r\n         * @default new ListTemplate<Label>\r\n         */\r\n        Object.defineProperty(_this, \"labels\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: new ListTemplate(Template.new({}), function () { return Label._new(_this._root, {\r\n                themeTags: $utils.mergeTags(_this.labels.template.get(\"themeTags\", []), [\"label\"]),\r\n                background: RoundedRectangle.new(_this._root, {\r\n                    themeTags: [\"background\"]\r\n                })\r\n            }, [_this.labels.template]); })\r\n        });\r\n        Object.defineProperty(_this, \"_disposer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        return _this;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    Object.defineProperty(BreadcrumbBar.prototype, \"makeLabel\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (dataItem) {\r\n            var _this = this;\r\n            var label = this.labels.make();\r\n            label._setDataItem(dataItem);\r\n            label.states.create(\"hover\", {});\r\n            label.states.create(\"down\", {});\r\n            label.events.on(\"click\", function () {\r\n                var series = _this.get(\"series\");\r\n                if (series) {\r\n                    series.selectDataItem(dataItem);\r\n                }\r\n            });\r\n            this.labels.push(label);\r\n            return label;\r\n        }\r\n    });\r\n    Object.defineProperty(BreadcrumbBar.prototype, \"_afterNew\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            this._defaultThemes.push(HierarchyDefaultTheme.new(this._root));\r\n            this._settings.themeTags = $utils.mergeTags(this._settings.themeTags, [\"breadcrumb\"]);\r\n            _super.prototype._afterNew.call(this);\r\n        }\r\n    });\r\n    Object.defineProperty(BreadcrumbBar.prototype, \"_changed\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            var _this = this;\r\n            _super.prototype._changed.call(this);\r\n            if (this.isDirty(\"series\")) {\r\n                var series = this.get(\"series\");\r\n                var previous = this._prevSettings.series;\r\n                if (series != previous) {\r\n                    this._disposer = series.events.on(\"dataitemselected\", function (event) {\r\n                        _this._handleDataItem(event.dataItem);\r\n                    });\r\n                }\r\n                else if (previous) {\r\n                    if (this._disposer) {\r\n                        this._disposer.dispose();\r\n                    }\r\n                }\r\n                this._handleDataItem(series.get(\"selectedDataItem\"));\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(BreadcrumbBar.prototype, \"_handleDataItem\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (dataItem) {\r\n            this.set(\"minHeight\", this.height());\r\n            this.children.clear();\r\n            this.labels.clear();\r\n            if (dataItem) {\r\n                var parent_1 = dataItem;\r\n                while (parent_1) {\r\n                    var label = this.makeLabel(parent_1);\r\n                    if (parent_1 == dataItem) {\r\n                        label.addTag(\"last\");\r\n                    }\r\n                    this.children.moveValue(label, 0);\r\n                    parent_1 = parent_1.get(\"parent\");\r\n                }\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(BreadcrumbBar, \"className\", {\r\n        enumerable: true,\r\n        configurable: true,\r\n        writable: true,\r\n        value: \"BreadcrumbBar\"\r\n    });\r\n    Object.defineProperty(BreadcrumbBar, \"classNames\", {\r\n        enumerable: true,\r\n        configurable: true,\r\n        writable: true,\r\n        value: Container.classNames.concat([BreadcrumbBar.className])\r\n    });\r\n    return BreadcrumbBar;\r\n}(Container));\r\nexport { BreadcrumbBar };\r\n//# sourceMappingURL=BreadcrumbBar.js.map","import { __extends } from \"tslib\";\r\nimport { Container } from \"../../core/render/Container\";\r\n/**\r\n * Base class for hierarchy nodes.\r\n */\r\nvar HierarchyNode = /** @class */ (function (_super) {\r\n    __extends(HierarchyNode, _super);\r\n    function HierarchyNode() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        /**\r\n         * Related series.\r\n         */\r\n        Object.defineProperty(_this, \"series\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(_this, \"_clickDisposer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        return _this;\r\n    }\r\n    Object.defineProperty(HierarchyNode.prototype, \"_afterNew\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            var _this = this;\r\n            _super.prototype._afterNew.call(this);\r\n            this.states.create(\"disabled\", {});\r\n            this.states.create(\"hover\", {});\r\n            this.states.create(\"hoverDisabled\", {});\r\n            this.on(\"disabled\", function () {\r\n                var dataItem = _this.dataItem;\r\n                if (!dataItem.get(\"children\")) {\r\n                    _this.set(\"disabled\", true);\r\n                    return;\r\n                }\r\n                var disabled = _this.get(\"disabled\");\r\n                var series = _this.series;\r\n                if (dataItem && series) {\r\n                    if (dataItem.get(\"disabled\") != disabled) {\r\n                        if (disabled) {\r\n                            series.disableDataItem(dataItem);\r\n                        }\r\n                        else {\r\n                            series.enableDataItem(dataItem, series.get(\"downDepth\", 1), 0);\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    });\r\n    Object.defineProperty(HierarchyNode.prototype, \"_changed\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            var _this = this;\r\n            _super.prototype._changed.call(this);\r\n            if (this.isDirty(\"toggleKey\")) {\r\n                var toggleKey = this.get(\"toggleKey\");\r\n                if (toggleKey == \"disabled\") {\r\n                    this._clickDisposer = this.events.on(\"click\", function () {\r\n                        if (!_this._isDragging) {\r\n                            var series = _this.series;\r\n                            if (series) {\r\n                                series.selectDataItem(_this.dataItem);\r\n                            }\r\n                        }\r\n                    });\r\n                }\r\n                else {\r\n                    if (this._clickDisposer) {\r\n                        this._clickDisposer.dispose();\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(HierarchyNode, \"className\", {\r\n        enumerable: true,\r\n        configurable: true,\r\n        writable: true,\r\n        value: \"HierarchyNode\"\r\n    });\r\n    Object.defineProperty(HierarchyNode, \"classNames\", {\r\n        enumerable: true,\r\n        configurable: true,\r\n        writable: true,\r\n        value: Container.classNames.concat([HierarchyNode.className])\r\n    });\r\n    return HierarchyNode;\r\n}(Container));\r\nexport { HierarchyNode };\r\n//# sourceMappingURL=HierarchyNode.js.map","function count(node) {\n  var sum = 0,\n      children = node.children,\n      i = children && children.length;\n  if (!i) sum = 1;\n  else while (--i >= 0) sum += children[i].value;\n  node.value = sum;\n}\n\nexport default function() {\n  return this.eachAfter(count);\n}\n","export default function(callback, that) {\n  let index = -1;\n  for (const node of this) {\n    callback.call(that, node, ++index, this);\n  }\n  return this;\n}\n","export default function(callback, that) {\n  var node = this, nodes = [node], children, i, index = -1;\n  while (node = nodes.pop()) {\n    callback.call(that, node, ++index, this);\n    if (children = node.children) {\n      for (i = children.length - 1; i >= 0; --i) {\n        nodes.push(children[i]);\n      }\n    }\n  }\n  return this;\n}\n","export default function(callback, that) {\n  var node = this, nodes = [node], next = [], children, i, n, index = -1;\n  while (node = nodes.pop()) {\n    next.push(node);\n    if (children = node.children) {\n      for (i = 0, n = children.length; i < n; ++i) {\n        nodes.push(children[i]);\n      }\n    }\n  }\n  while (node = next.pop()) {\n    callback.call(that, node, ++index, this);\n  }\n  return this;\n}\n","export default function(callback, that) {\n  let index = -1;\n  for (const node of this) {\n    if (callback.call(that, node, ++index, this)) {\n      return node;\n    }\n  }\n}\n","export default function(value) {\n  return this.eachAfter(function(node) {\n    var sum = +value(node.data) || 0,\n        children = node.children,\n        i = children && children.length;\n    while (--i >= 0) sum += children[i].value;\n    node.value = sum;\n  });\n}\n","export default function(compare) {\n  return this.eachBefore(function(node) {\n    if (node.children) {\n      node.children.sort(compare);\n    }\n  });\n}\n","export default function(end) {\n  var start = this,\n      ancestor = leastCommonAncestor(start, end),\n      nodes = [start];\n  while (start !== ancestor) {\n    start = start.parent;\n    nodes.push(start);\n  }\n  var k = nodes.length;\n  while (end !== ancestor) {\n    nodes.splice(k, 0, end);\n    end = end.parent;\n  }\n  return nodes;\n}\n\nfunction leastCommonAncestor(a, b) {\n  if (a === b) return a;\n  var aNodes = a.ancestors(),\n      bNodes = b.ancestors(),\n      c = null;\n  a = aNodes.pop();\n  b = bNodes.pop();\n  while (a === b) {\n    c = a;\n    a = aNodes.pop();\n    b = bNodes.pop();\n  }\n  return c;\n}\n","export default function() {\n  var node = this, nodes = [node];\n  while (node = node.parent) {\n    nodes.push(node);\n  }\n  return nodes;\n}\n","export default function() {\n  return Array.from(this);\n}\n","export default function() {\n  var leaves = [];\n  this.eachBefore(function(node) {\n    if (!node.children) {\n      leaves.push(node);\n    }\n  });\n  return leaves;\n}\n","export default function() {\n  var root = this, links = [];\n  root.each(function(node) {\n    if (node !== root) { // Don’t include the root’s parent, if any.\n      links.push({source: node.parent, target: node});\n    }\n  });\n  return links;\n}\n","export default function*() {\n  var node = this, current, next = [node], children, i, n;\n  do {\n    current = next.reverse(), next = [];\n    while (node = current.pop()) {\n      yield node;\n      if (children = node.children) {\n        for (i = 0, n = children.length; i < n; ++i) {\n          next.push(children[i]);\n        }\n      }\n    }\n  } while (next.length);\n}\n","import node_count from \"./count.js\";\nimport node_each from \"./each.js\";\nimport node_eachBefore from \"./eachBefore.js\";\nimport node_eachAfter from \"./eachAfter.js\";\nimport node_find from \"./find.js\";\nimport node_sum from \"./sum.js\";\nimport node_sort from \"./sort.js\";\nimport node_path from \"./path.js\";\nimport node_ancestors from \"./ancestors.js\";\nimport node_descendants from \"./descendants.js\";\nimport node_leaves from \"./leaves.js\";\nimport node_links from \"./links.js\";\nimport node_iterator from \"./iterator.js\";\n\nexport default function hierarchy(data, children) {\n  if (data instanceof Map) {\n    data = [undefined, data];\n    if (children === undefined) children = mapChildren;\n  } else if (children === undefined) {\n    children = objectChildren;\n  }\n\n  var root = new Node(data),\n      node,\n      nodes = [root],\n      child,\n      childs,\n      i,\n      n;\n\n  while (node = nodes.pop()) {\n    if ((childs = children(node.data)) && (n = (childs = Array.from(childs)).length)) {\n      node.children = childs;\n      for (i = n - 1; i >= 0; --i) {\n        nodes.push(child = childs[i] = new Node(childs[i]));\n        child.parent = node;\n        child.depth = node.depth + 1;\n      }\n    }\n  }\n\n  return root.eachBefore(computeHeight);\n}\n\nfunction node_copy() {\n  return hierarchy(this).eachBefore(copyData);\n}\n\nfunction objectChildren(d) {\n  return d.children;\n}\n\nfunction mapChildren(d) {\n  return Array.isArray(d) ? d[1] : null;\n}\n\nfunction copyData(node) {\n  if (node.data.value !== undefined) node.value = node.data.value;\n  node.data = node.data.data;\n}\n\nexport function computeHeight(node) {\n  var height = 0;\n  do node.height = height;\n  while ((node = node.parent) && (node.height < ++height));\n}\n\nexport function Node(data) {\n  this.data = data;\n  this.depth =\n  this.height = 0;\n  this.parent = null;\n}\n\nNode.prototype = hierarchy.prototype = {\n  constructor: Node,\n  count: node_count,\n  each: node_each,\n  eachAfter: node_eachAfter,\n  eachBefore: node_eachBefore,\n  find: node_find,\n  sum: node_sum,\n  sort: node_sort,\n  path: node_path,\n  ancestors: node_ancestors,\n  descendants: node_descendants,\n  leaves: node_leaves,\n  links: node_links,\n  copy: node_copy,\n  [Symbol.iterator]: node_iterator\n};\n","export function optional(f) {\n  return f == null ? null : required(f);\n}\n\nexport function required(f) {\n  if (typeof f !== \"function\") throw new Error;\n  return f;\n}\n","export function constantZero() {\n  return 0;\n}\n\nexport default function(x) {\n  return function() {\n    return x;\n  };\n}\n","export default function(node) {\n  node.x0 = Math.round(node.x0);\n  node.y0 = Math.round(node.y0);\n  node.x1 = Math.round(node.x1);\n  node.y1 = Math.round(node.y1);\n}\n","export default function(parent, x0, y0, x1, y1) {\n  var nodes = parent.children,\n      node,\n      i = -1,\n      n = nodes.length,\n      k = parent.value && (x1 - x0) / parent.value;\n\n  while (++i < n) {\n    node = nodes[i], node.y0 = y0, node.y1 = y1;\n    node.x0 = x0, node.x1 = x0 += node.value * k;\n  }\n}\n","export default function(parent, x0, y0, x1, y1) {\n  var nodes = parent.children,\n      node,\n      i = -1,\n      n = nodes.length,\n      k = parent.value && (y1 - y0) / parent.value;\n\n  while (++i < n) {\n    node = nodes[i], node.x0 = x0, node.x1 = x1;\n    node.y0 = y0, node.y1 = y0 += node.value * k;\n  }\n}\n","import treemapDice from \"./dice.js\";\nimport treemapSlice from \"./slice.js\";\n\nexport var phi = (1 + Math.sqrt(5)) / 2;\n\nexport function squarifyRatio(ratio, parent, x0, y0, x1, y1) {\n  var rows = [],\n      nodes = parent.children,\n      row,\n      nodeValue,\n      i0 = 0,\n      i1 = 0,\n      n = nodes.length,\n      dx, dy,\n      value = parent.value,\n      sumValue,\n      minValue,\n      maxValue,\n      newRatio,\n      minRatio,\n      alpha,\n      beta;\n\n  while (i0 < n) {\n    dx = x1 - x0, dy = y1 - y0;\n\n    // Find the next non-empty node.\n    do sumValue = nodes[i1++].value; while (!sumValue && i1 < n);\n    minValue = maxValue = sumValue;\n    alpha = Math.max(dy / dx, dx / dy) / (value * ratio);\n    beta = sumValue * sumValue * alpha;\n    minRatio = Math.max(maxValue / beta, beta / minValue);\n\n    // Keep adding nodes while the aspect ratio maintains or improves.\n    for (; i1 < n; ++i1) {\n      sumValue += nodeValue = nodes[i1].value;\n      if (nodeValue < minValue) minValue = nodeValue;\n      if (nodeValue > maxValue) maxValue = nodeValue;\n      beta = sumValue * sumValue * alpha;\n      newRatio = Math.max(maxValue / beta, beta / minValue);\n      if (newRatio > minRatio) { sumValue -= nodeValue; break; }\n      minRatio = newRatio;\n    }\n\n    // Position and record the row orientation.\n    rows.push(row = {value: sumValue, dice: dx < dy, children: nodes.slice(i0, i1)});\n    if (row.dice) treemapDice(row, x0, y0, x1, value ? y0 += dy * sumValue / value : y1);\n    else treemapSlice(row, x0, y0, value ? x0 += dx * sumValue / value : x1, y1);\n    value -= sumValue, i0 = i1;\n  }\n\n  return rows;\n}\n\nexport default (function custom(ratio) {\n\n  function squarify(parent, x0, y0, x1, y1) {\n    squarifyRatio(ratio, parent, x0, y0, x1, y1);\n  }\n\n  squarify.ratio = function(x) {\n    return custom((x = +x) > 1 ? x : 1);\n  };\n\n  return squarify;\n})(phi);\n","import roundNode from \"./round.js\";\nimport squarify from \"./squarify.js\";\nimport {required} from \"../accessors.js\";\nimport constant, {constantZero} from \"../constant.js\";\n\nexport default function() {\n  var tile = squarify,\n      round = false,\n      dx = 1,\n      dy = 1,\n      paddingStack = [0],\n      paddingInner = constantZero,\n      paddingTop = constantZero,\n      paddingRight = constantZero,\n      paddingBottom = constantZero,\n      paddingLeft = constantZero;\n\n  function treemap(root) {\n    root.x0 =\n    root.y0 = 0;\n    root.x1 = dx;\n    root.y1 = dy;\n    root.eachBefore(positionNode);\n    paddingStack = [0];\n    if (round) root.eachBefore(roundNode);\n    return root;\n  }\n\n  function positionNode(node) {\n    var p = paddingStack[node.depth],\n        x0 = node.x0 + p,\n        y0 = node.y0 + p,\n        x1 = node.x1 - p,\n        y1 = node.y1 - p;\n    if (x1 < x0) x0 = x1 = (x0 + x1) / 2;\n    if (y1 < y0) y0 = y1 = (y0 + y1) / 2;\n    node.x0 = x0;\n    node.y0 = y0;\n    node.x1 = x1;\n    node.y1 = y1;\n    if (node.children) {\n      p = paddingStack[node.depth + 1] = paddingInner(node) / 2;\n      x0 += paddingLeft(node) - p;\n      y0 += paddingTop(node) - p;\n      x1 -= paddingRight(node) - p;\n      y1 -= paddingBottom(node) - p;\n      if (x1 < x0) x0 = x1 = (x0 + x1) / 2;\n      if (y1 < y0) y0 = y1 = (y0 + y1) / 2;\n      tile(node, x0, y0, x1, y1);\n    }\n  }\n\n  treemap.round = function(x) {\n    return arguments.length ? (round = !!x, treemap) : round;\n  };\n\n  treemap.size = function(x) {\n    return arguments.length ? (dx = +x[0], dy = +x[1], treemap) : [dx, dy];\n  };\n\n  treemap.tile = function(x) {\n    return arguments.length ? (tile = required(x), treemap) : tile;\n  };\n\n  treemap.padding = function(x) {\n    return arguments.length ? treemap.paddingInner(x).paddingOuter(x) : treemap.paddingInner();\n  };\n\n  treemap.paddingInner = function(x) {\n    return arguments.length ? (paddingInner = typeof x === \"function\" ? x : constant(+x), treemap) : paddingInner;\n  };\n\n  treemap.paddingOuter = function(x) {\n    return arguments.length ? treemap.paddingTop(x).paddingRight(x).paddingBottom(x).paddingLeft(x) : treemap.paddingTop();\n  };\n\n  treemap.paddingTop = function(x) {\n    return arguments.length ? (paddingTop = typeof x === \"function\" ? x : constant(+x), treemap) : paddingTop;\n  };\n\n  treemap.paddingRight = function(x) {\n    return arguments.length ? (paddingRight = typeof x === \"function\" ? x : constant(+x), treemap) : paddingRight;\n  };\n\n  treemap.paddingBottom = function(x) {\n    return arguments.length ? (paddingBottom = typeof x === \"function\" ? x : constant(+x), treemap) : paddingBottom;\n  };\n\n  treemap.paddingLeft = function(x) {\n    return arguments.length ? (paddingLeft = typeof x === \"function\" ? x : constant(+x), treemap) : paddingLeft;\n  };\n\n  return treemap;\n}\n","export default function(parent, x0, y0, x1, y1) {\n  var nodes = parent.children,\n      i, n = nodes.length,\n      sum, sums = new Array(n + 1);\n\n  for (sums[0] = sum = i = 0; i < n; ++i) {\n    sums[i + 1] = sum += nodes[i].value;\n  }\n\n  partition(0, n, parent.value, x0, y0, x1, y1);\n\n  function partition(i, j, value, x0, y0, x1, y1) {\n    if (i >= j - 1) {\n      var node = nodes[i];\n      node.x0 = x0, node.y0 = y0;\n      node.x1 = x1, node.y1 = y1;\n      return;\n    }\n\n    var valueOffset = sums[i],\n        valueTarget = (value / 2) + valueOffset,\n        k = i + 1,\n        hi = j - 1;\n\n    while (k < hi) {\n      var mid = k + hi >>> 1;\n      if (sums[mid] < valueTarget) k = mid + 1;\n      else hi = mid;\n    }\n\n    if ((valueTarget - sums[k - 1]) < (sums[k] - valueTarget) && i + 1 < k) --k;\n\n    var valueLeft = sums[k] - valueOffset,\n        valueRight = value - valueLeft;\n\n    if ((x1 - x0) > (y1 - y0)) {\n      var xk = value ? (x0 * valueRight + x1 * valueLeft) / value : x1;\n      partition(i, k, valueLeft, x0, y0, xk, y1);\n      partition(k, j, valueRight, xk, y0, x1, y1);\n    } else {\n      var yk = value ? (y0 * valueRight + y1 * valueLeft) / value : y1;\n      partition(i, k, valueLeft, x0, y0, x1, yk);\n      partition(k, j, valueRight, x0, yk, x1, y1);\n    }\n  }\n}\n","import dice from \"./dice.js\";\nimport slice from \"./slice.js\";\n\nexport default function(parent, x0, y0, x1, y1) {\n  (parent.depth & 1 ? slice : dice)(parent, x0, y0, x1, y1);\n}\n","import { __awaiter, __extends, __generator } from \"tslib\";\r\nimport { HierarchyDefaultTheme } from \"./HierarchyDefaultTheme\";\r\nimport { Series } from \"../../core/render/Series\";\r\nimport { DataItem } from \"../../core/render/Component\";\r\nimport { HierarchyNode } from \"./HierarchyNode\";\r\nimport { Container } from \"../../core/render/Container\";\r\nimport { Label } from \"../../core/render/Label\";\r\nimport { Template } from \"../../core/util/Template\";\r\nimport { ListTemplate } from \"../../core/util/List\";\r\nimport * as $array from \"../../core/util/Array\";\r\nimport * as $type from \"../../core/util/Type\";\r\nimport * as $utils from \"../../core/util/Utils\";\r\nimport * as d3hierarchy from \"d3-hierarchy\";\r\n;\r\n/**\r\n * A base class for all hierarchy charts.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/charts/hierarchy/} for more info\r\n */\r\nvar Hierarchy = /** @class */ (function (_super) {\r\n    __extends(Hierarchy, _super);\r\n    function Hierarchy() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        /**\r\n         * A [[Container]] that nodes are placed in.\r\n         *\r\n         * @default Container.new()\r\n         */\r\n        Object.defineProperty(_this, \"nodesContainer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: _this.children.push(Container.new(_this._root, { isMeasured: false }))\r\n        });\r\n        Object.defineProperty(_this, \"_rootNode\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(_this, \"_treeData\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(_this, \"_index\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(_this, \"_tag\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: \"hierarchy\"\r\n        });\r\n        /**\r\n         * A list of nodes in a [[Hierarchy]] chart.\r\n         *\r\n         * @default new ListTemplate<HierarchyNode>\r\n         */\r\n        Object.defineProperty(_this, \"nodes\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: new ListTemplate(Template.new({}), function () { return HierarchyNode.new(_this._root, {\r\n                themeTags: $utils.mergeTags(_this.nodes.template.get(\"themeTags\", []), [_this._tag, \"hierarchy\", \"node\"])\r\n            }, _this.nodes.template); })\r\n        });\r\n        /**\r\n         * A list of label elements in a [[Hierarchy]] chart.\r\n         *\r\n         * @default new ListTemplate<Label>\r\n         */\r\n        Object.defineProperty(_this, \"labels\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: new ListTemplate(Template.new({}), function () { return Label.new(_this._root, {\r\n                themeTags: $utils.mergeTags(_this.labels.template.get(\"themeTags\", []), [_this._tag])\r\n            }, _this.labels.template); })\r\n        });\r\n        Object.defineProperty(_this, \"_currentDownDepth\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        return _this;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    Object.defineProperty(Hierarchy.prototype, \"makeNode\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (dataItem) {\r\n            var childData = dataItem.get(\"childData\");\r\n            var node = this.nodes.make();\r\n            node.series = this;\r\n            node._setDataItem(dataItem);\r\n            this.nodes.push(node);\r\n            dataItem.setRaw(\"node\", node);\r\n            var label = this.labels.make();\r\n            label._setDataItem(dataItem);\r\n            dataItem.setRaw(\"label\", label);\r\n            this.labels.push(label);\r\n            if (!childData || childData.length == 0) {\r\n                node.addTag(\"last\");\r\n            }\r\n            var depth = dataItem.get(\"depth\");\r\n            node.addTag(\"depth\" + depth);\r\n            this.nodesContainer.children.push(node);\r\n            node.children.push(label);\r\n            return node;\r\n        }\r\n    });\r\n    Object.defineProperty(Hierarchy.prototype, \"_afterNew\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            this._defaultThemes.push(HierarchyDefaultTheme.new(this._root));\r\n            this.fields.push(\"category\", \"childData\", \"disabled\", \"fill\");\r\n            this.children.push(this.bulletsContainer);\r\n            _super.prototype._afterNew.call(this);\r\n        }\r\n    });\r\n    Object.defineProperty(Hierarchy.prototype, \"_prepareChildren\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            _super.prototype._prepareChildren.call(this);\r\n            if (this._valuesDirty) {\r\n                this._treeData = {};\r\n                var first = this.dataItems[0];\r\n                if (first) {\r\n                    this._makeHierarchyData(this._treeData, first);\r\n                    this._index = 0;\r\n                    this._rootNode = d3hierarchy.hierarchy(this._treeData);\r\n                    if (this._rootNode) {\r\n                        this._rootNode.sum(function (d) {\r\n                            return d.value;\r\n                        });\r\n                        var sort = this.get(\"sort\");\r\n                        if (sort == \"descending\") {\r\n                            this._rootNode.sort(function (a, b) { return b.value - a.value; });\r\n                        }\r\n                        else if (sort == \"ascending\") {\r\n                            this._rootNode.sort(function (a, b) { return a.value - b.value; });\r\n                        }\r\n                        this.setPrivateRaw(\"valueLow\", Infinity);\r\n                        this.setPrivateRaw(\"valueHigh\", -Infinity);\r\n                        this.setPrivateRaw(\"maxDepth\", 0);\r\n                        this._updateValues(this._rootNode);\r\n                    }\r\n                }\r\n            }\r\n            if (this._valuesDirty || this._sizeDirty) {\r\n                this._updateVisuals();\r\n            }\r\n            if (this._sizeDirty) {\r\n                this._selectDataItem(this.get(\"selectedDataItem\"), this._currentDownDepth, false);\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Hierarchy.prototype, \"_changed\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            _super.prototype._changed.call(this);\r\n            if (this.isDirty(\"selectedDataItem\")) {\r\n                this._selectDataItem(this.get(\"selectedDataItem\"));\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Hierarchy.prototype, \"_updateVisuals\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            if (this._rootNode) {\r\n                this._updateNodes(this._rootNode);\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Hierarchy.prototype, \"_updateNodes\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (hierarchyNode) {\r\n            var _this = this;\r\n            var dataItem = hierarchyNode.data.dataItem;\r\n            if (dataItem) {\r\n                this._updateNode(dataItem);\r\n                if (this.bullets.length > 0 && !dataItem.bullets) {\r\n                    this._makeBullets(dataItem);\r\n                }\r\n                var hierarchyChildren = hierarchyNode.children;\r\n                if (hierarchyChildren) {\r\n                    $array.each(hierarchyChildren, function (hierarchyChild) {\r\n                        _this._updateNodes(hierarchyChild);\r\n                    });\r\n                }\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Hierarchy.prototype, \"_updateNode\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (_dataItem) {\r\n        }\r\n    });\r\n    Object.defineProperty(Hierarchy.prototype, \"_getDataItemById\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (dataItems, id) {\r\n            var _this = this;\r\n            var di;\r\n            $array.each(dataItems, function (dataItem) {\r\n                if (dataItem.get(\"id\") == id) {\r\n                    di = dataItem;\r\n                }\r\n                var children = dataItem.get(\"children\");\r\n                if (children) {\r\n                    var childDataItem = _this._getDataItemById(children, id);\r\n                    if (childDataItem) {\r\n                        di = childDataItem;\r\n                    }\r\n                }\r\n            });\r\n            return di;\r\n        }\r\n    });\r\n    Object.defineProperty(Hierarchy.prototype, \"_handleBullets\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (dataItems) {\r\n            var _this = this;\r\n            $array.each(dataItems, function (dataItem) {\r\n                var bullets = dataItem.bullets;\r\n                if (bullets) {\r\n                    $array.each(bullets, function (bullet) {\r\n                        bullet.dispose();\r\n                    });\r\n                    dataItem.bullets = undefined;\r\n                }\r\n                var children = dataItem.get(\"children\");\r\n                if (children) {\r\n                    _this._handleBullets(children);\r\n                }\r\n            });\r\n            this._updateVisuals();\r\n        }\r\n    });\r\n    Object.defineProperty(Hierarchy.prototype, \"_onDataClear\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            _super.prototype._onDataClear.call(this);\r\n            var colors = this.get(\"colors\");\r\n            if (colors) {\r\n                colors.reset();\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Hierarchy.prototype, \"processDataItem\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (dataItem) {\r\n            var _this = this;\r\n            _super.prototype.processDataItem.call(this, dataItem);\r\n            var childData = dataItem.get(\"childData\");\r\n            var colors = this.get(\"colors\");\r\n            var topDepth = this.get(\"topDepth\", 0);\r\n            if (!dataItem.get(\"parent\")) {\r\n                dataItem.setRaw(\"depth\", 0);\r\n                if (colors && topDepth == 0 && dataItem.get(\"fill\") == null) {\r\n                    dataItem.setRaw(\"fill\", colors.next());\r\n                }\r\n            }\r\n            var depth = dataItem.get(\"depth\");\r\n            var initialDepth = this.get(\"initialDepth\", 1);\r\n            this.makeNode(dataItem);\r\n            this._processDataItem(dataItem);\r\n            if (childData) {\r\n                var children_1 = [];\r\n                dataItem.setRaw(\"children\", children_1);\r\n                $array.each(childData, function (child) {\r\n                    var childDataItem = new DataItem(_this, child, _this._makeDataItem(child));\r\n                    children_1.push(childDataItem);\r\n                    childDataItem.setRaw(\"parent\", dataItem);\r\n                    childDataItem.setRaw(\"depth\", depth + 1);\r\n                    if (_this.dataItems.length == 1 && depth == 0) {\r\n                        if (colors && childDataItem.get(\"fill\") == null) {\r\n                            childDataItem.setRaw(\"fill\", colors.next());\r\n                        }\r\n                    }\r\n                    else {\r\n                        childDataItem.setRaw(\"fill\", dataItem.get(\"fill\"));\r\n                    }\r\n                    _this.processDataItem(childDataItem);\r\n                });\r\n            }\r\n            var children = dataItem.get(\"children\");\r\n            if (!children || children.length == 0) {\r\n                var node = dataItem.get(\"node\");\r\n                node.setAll({ toggleKey: undefined });\r\n            }\r\n            if (dataItem.get(\"disabled\") == null) {\r\n                if (depth >= topDepth + initialDepth) {\r\n                    this.disableDataItem(dataItem, 0);\r\n                }\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Hierarchy.prototype, \"_processDataItem\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (_dataItem) {\r\n        }\r\n    });\r\n    Object.defineProperty(Hierarchy.prototype, \"_updateValues\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (d3HierarchyNode) {\r\n            var _this = this;\r\n            var dataItem = d3HierarchyNode.data.dataItem;\r\n            if (d3HierarchyNode.depth > this.getPrivate(\"maxDepth\")) {\r\n                this.setPrivateRaw(\"maxDepth\", d3HierarchyNode.depth);\r\n            }\r\n            if (dataItem) {\r\n                dataItem.setRaw(\"d3HierarchyNode\", d3HierarchyNode);\r\n                d3HierarchyNode.index = this._index;\r\n                this._index++;\r\n                dataItem.get(\"node\").set(\"disabled\", dataItem.get(\"disabled\"));\r\n                var dataValue = d3HierarchyNode.data.value;\r\n                var value = d3HierarchyNode.value;\r\n                if (dataValue != null) {\r\n                    value = dataValue;\r\n                    d3HierarchyNode[\"value\"] = value;\r\n                }\r\n                if ($type.isNumber(value)) {\r\n                    dataItem.setRaw(\"sum\", value);\r\n                    dataItem.setRaw(\"valuePercentTotal\", value / this.dataItems[0].get(\"sum\") * 100);\r\n                    var valuePercent = 100;\r\n                    var parent_1 = dataItem.get(\"parent\");\r\n                    if (parent_1) {\r\n                        valuePercent = value / parent_1.get(\"sum\") * 100;\r\n                    }\r\n                    dataItem.get(\"label\").text.markDirtyText();\r\n                    dataItem.setRaw(\"valuePercent\", valuePercent);\r\n                    if (this.getPrivate(\"valueLow\") > value) {\r\n                        this.setPrivateRaw(\"valueLow\", value);\r\n                    }\r\n                    if (this.getPrivate(\"valueHigh\") < value) {\r\n                        this.setPrivateRaw(\"valueHigh\", value);\r\n                    }\r\n                }\r\n                this.updateLegendValue(dataItem);\r\n            }\r\n            var hierarchyChildren = d3HierarchyNode.children;\r\n            if (hierarchyChildren) {\r\n                $array.each(hierarchyChildren, function (d3HierarchyChild) {\r\n                    _this._updateValues(d3HierarchyChild);\r\n                });\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Hierarchy.prototype, \"_makeHierarchyData\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (data, dataItem) {\r\n            var _this = this;\r\n            data.dataItem = dataItem;\r\n            var children = dataItem.get(\"children\");\r\n            if (children) {\r\n                var childrenDataArray_1 = [];\r\n                data.children = childrenDataArray_1;\r\n                $array.each(children, function (childDataItem) {\r\n                    var childData = {};\r\n                    childrenDataArray_1.push(childData);\r\n                    _this._makeHierarchyData(childData, childDataItem);\r\n                });\r\n                var value = dataItem.get(\"valueWorking\");\r\n                if ($type.isNumber(value)) {\r\n                    data.value = value;\r\n                }\r\n            }\r\n            else {\r\n                var value = dataItem.get(\"valueWorking\");\r\n                if ($type.isNumber(value)) {\r\n                    data.value = value;\r\n                }\r\n            }\r\n        }\r\n    });\r\n    /**\r\n     * @ignore\r\n     */\r\n    Object.defineProperty(Hierarchy.prototype, \"disposeDataItem\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (dataItem) {\r\n            var _this = this;\r\n            _super.prototype.disposeDataItem.call(this, dataItem);\r\n            var node = dataItem.get(\"node\");\r\n            if (node) {\r\n                this.nodes.removeValue(node);\r\n                node.dispose();\r\n            }\r\n            var label = dataItem.get(\"label\");\r\n            if (label) {\r\n                this.labels.removeValue(label);\r\n                label.dispose();\r\n            }\r\n            var children = dataItem.get(\"children\");\r\n            if (children) {\r\n                $array.each(children, function (child) {\r\n                    _this.disposeDataItem(child);\r\n                });\r\n            }\r\n        }\r\n    });\r\n    /**\r\n     * Hides hierarchy's data item.\r\n     *\r\n     * @param   dataItem  Data item\r\n     * @param   duration  Animation duration in milliseconds\r\n     * @return            Promise\r\n     */\r\n    Object.defineProperty(Hierarchy.prototype, \"hideDataItem\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (dataItem, duration) {\r\n            return __awaiter(this, void 0, void 0, function () {\r\n                var promises, hiddenState, stateAnimationDuration, stateAnimationEasing, easing, children, node;\r\n                var _this = this;\r\n                return __generator(this, function (_a) {\r\n                    switch (_a.label) {\r\n                        case 0:\r\n                            promises = [_super.prototype.hideDataItem.call(this, dataItem, duration)];\r\n                            hiddenState = this.states.create(\"hidden\", {});\r\n                            if (!$type.isNumber(duration)) {\r\n                                stateAnimationDuration = \"stateAnimationDuration\";\r\n                                duration = hiddenState.get(stateAnimationDuration, this.get(stateAnimationDuration, 0));\r\n                            }\r\n                            stateAnimationEasing = \"stateAnimationEasing\";\r\n                            easing = hiddenState.get(stateAnimationEasing, this.get(stateAnimationEasing));\r\n                            children = dataItem.get(\"children\");\r\n                            if ((!children || children.length == 0) && $type.isNumber(dataItem.get(\"value\"))) {\r\n                                promises.push(dataItem.animate({ key: \"valueWorking\", to: 0, duration: duration, easing: easing }).waitForStop());\r\n                            }\r\n                            node = dataItem.get(\"node\");\r\n                            node.hide();\r\n                            node.hideTooltip();\r\n                            if (children) {\r\n                                $array.each(children, function (childDataItem) {\r\n                                    promises.push(_this.hideDataItem(childDataItem));\r\n                                });\r\n                            }\r\n                            return [4 /*yield*/, Promise.all(promises)];\r\n                        case 1:\r\n                            _a.sent();\r\n                            return [2 /*return*/];\r\n                    }\r\n                });\r\n            });\r\n        }\r\n    });\r\n    /**\r\n     * Shows hierarchy's data item.\r\n     *\r\n     * @param   dataItem  Data item\r\n     * @param   duration  Animation duration in milliseconds\r\n     * @return            Promise\r\n     */\r\n    Object.defineProperty(Hierarchy.prototype, \"showDataItem\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (dataItem, duration) {\r\n            return __awaiter(this, void 0, void 0, function () {\r\n                var promises, easing, children, node;\r\n                var _this = this;\r\n                return __generator(this, function (_a) {\r\n                    switch (_a.label) {\r\n                        case 0:\r\n                            promises = [_super.prototype.showDataItem.call(this, dataItem, duration)];\r\n                            if (!$type.isNumber(duration)) {\r\n                                duration = this.get(\"stateAnimationDuration\", 0);\r\n                            }\r\n                            easing = this.get(\"stateAnimationEasing\");\r\n                            children = dataItem.get(\"children\");\r\n                            if ((!children || children.length == 0) && $type.isNumber(dataItem.get(\"value\"))) {\r\n                                promises.push(dataItem.animate({ key: \"valueWorking\", to: dataItem.get(\"value\"), duration: duration, easing: easing }).waitForStop());\r\n                            }\r\n                            node = dataItem.get(\"node\");\r\n                            node.show();\r\n                            if (children) {\r\n                                $array.each(children, function (childDataItem) {\r\n                                    promises.push(_this.showDataItem(childDataItem));\r\n                                });\r\n                            }\r\n                            return [4 /*yield*/, Promise.all(promises)];\r\n                        case 1:\r\n                            _a.sent();\r\n                            return [2 /*return*/];\r\n                    }\r\n                });\r\n            });\r\n        }\r\n    });\r\n    /**\r\n     * Enables a disabled data item.\r\n     *\r\n     * @param  dataItem  Target data item\r\n     * @param  duration  Animation duration in milliseconds\r\n     */\r\n    Object.defineProperty(Hierarchy.prototype, \"enableDataItem\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (dataItem, maxDepth, depth, duration) {\r\n            var _this = this;\r\n            if (depth == null) {\r\n                depth = 0;\r\n            }\r\n            if (maxDepth == null) {\r\n                maxDepth = 1;\r\n            }\r\n            dataItem.set(\"disabled\", false);\r\n            dataItem.get(\"node\").set(\"disabled\", false);\r\n            if (!dataItem.isHidden()) {\r\n                dataItem.get(\"node\").show(duration);\r\n            }\r\n            if (depth == 0) {\r\n                var upDepth = this.get(\"upDepth\", Infinity);\r\n                var parent_2 = dataItem;\r\n                var count = 0;\r\n                while (parent_2 !== undefined) {\r\n                    if (count > upDepth) {\r\n                        parent_2.get(\"node\").hide();\r\n                    }\r\n                    parent_2 = parent_2.get(\"parent\");\r\n                    count++;\r\n                }\r\n            }\r\n            var children = dataItem.get(\"children\");\r\n            if (children) {\r\n                if (depth < maxDepth - 1) {\r\n                    $array.each(children, function (child) {\r\n                        _this.enableDataItem(child, maxDepth, depth + 1, duration);\r\n                    });\r\n                }\r\n                else {\r\n                    $array.each(children, function (child) {\r\n                        if (!child.isHidden()) {\r\n                            child.get(\"node\").show(duration);\r\n                            child.get(\"node\").states.applyAnimate(\"disabled\");\r\n                            child.set(\"disabled\", true);\r\n                            _this.disableDataItem(child);\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n        }\r\n    });\r\n    /**\r\n     * Disables a data item.\r\n     *\r\n     * @param  dataItem  Target data item\r\n     * @param  duration  Animation duration in milliseconds\r\n     */\r\n    Object.defineProperty(Hierarchy.prototype, \"disableDataItem\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (dataItem, duration) {\r\n            var _this = this;\r\n            dataItem.set(\"disabled\", true);\r\n            var children = dataItem.get(\"children\");\r\n            if (children) {\r\n                $array.each(children, function (child) {\r\n                    _this.disableDataItem(child, duration);\r\n                    child.get(\"node\").hide(duration);\r\n                });\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Hierarchy.prototype, \"_selectDataItem\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (dataItem, downDepth, skipDisptach) {\r\n            if (dataItem) {\r\n                if (!skipDisptach) {\r\n                    var type = \"dataitemselected\";\r\n                    this.events.dispatch(type, { type: type, target: this, dataItem: dataItem });\r\n                }\r\n                var maxDepth = this.getPrivate(\"maxDepth\", 1);\r\n                var topDepth = this.get(\"topDepth\", 0);\r\n                if (downDepth == null) {\r\n                    downDepth = Math.min(this.get(\"downDepth\", 1), maxDepth - dataItem.get(\"depth\"));\r\n                }\r\n                if (!this.inited) {\r\n                    downDepth = Math.min(this.get(\"initialDepth\", 1), maxDepth - topDepth);\r\n                }\r\n                this._currentDownDepth = downDepth;\r\n                var hierarchyNode = dataItem.get(\"d3HierarchyNode\");\r\n                var currentDepth = hierarchyNode.depth;\r\n                if (currentDepth + downDepth > maxDepth) {\r\n                    downDepth = maxDepth - currentDepth;\r\n                }\r\n                if (currentDepth < topDepth) {\r\n                    downDepth += topDepth - currentDepth;\r\n                    currentDepth = topDepth;\r\n                }\r\n                var children = dataItem.get(\"children\");\r\n                if (children && children.length > 0) {\r\n                    if (downDepth > 0) {\r\n                        this.enableDataItem(dataItem, downDepth);\r\n                    }\r\n                    else {\r\n                        dataItem.get(\"node\").show();\r\n                        $array.each(children, function (child) {\r\n                            child.get(\"node\").hide();\r\n                        });\r\n                    }\r\n                    if (hierarchyNode.depth < topDepth) {\r\n                        dataItem.get(\"node\").hide(0);\r\n                    }\r\n                    if (this.get(\"singleBranchOnly\")) {\r\n                        this._handleSingle(dataItem);\r\n                    }\r\n                }\r\n                else {\r\n                    this.enableDataItem(this.dataItems[0], downDepth, 0);\r\n                }\r\n                this._zoom(dataItem);\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Hierarchy.prototype, \"_zoom\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (_dataItem) {\r\n        }\r\n    });\r\n    Object.defineProperty(Hierarchy.prototype, \"_handleSingle\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (dataItem) {\r\n            var _this = this;\r\n            var parent = dataItem.get(\"parent\");\r\n            if (parent) {\r\n                var children = parent.get(\"children\");\r\n                if (children) {\r\n                    $array.each(children, function (child) {\r\n                        if (child != dataItem) {\r\n                            _this.disableDataItem(child);\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n        }\r\n    });\r\n    /**\r\n     * Selects specific data item.\r\n     *\r\n     * @param  dataItem  Target data item\r\n     */\r\n    Object.defineProperty(Hierarchy.prototype, \"selectDataItem\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (dataItem) {\r\n            var parent = dataItem.get(\"parent\");\r\n            var maxDepth = this.getPrivate(\"maxDepth\", 1);\r\n            if (this.get(\"selectedDataItem\") == dataItem) {\r\n                if (parent) {\r\n                    this.set(\"selectedDataItem\", parent);\r\n                }\r\n                else {\r\n                    var depth = Math.min(this.get(\"downDepth\", 1), maxDepth - dataItem.get(\"depth\"));\r\n                    if (this._currentDownDepth == depth) {\r\n                        depth = Math.min(this.get(\"initialDepth\", 1), maxDepth - this.get(\"topDepth\", 0));\r\n                    }\r\n                    this._selectDataItem(dataItem, depth);\r\n                }\r\n            }\r\n            else {\r\n                this.set(\"selectedDataItem\", dataItem);\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Hierarchy.prototype, \"_makeBullet\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (dataItem, bulletFunction, index) {\r\n            var _this = this;\r\n            var bullet = _super.prototype._makeBullet.call(this, dataItem, bulletFunction, index);\r\n            if (bullet) {\r\n                var sprite = bullet.get(\"sprite\");\r\n                var node = dataItem.get(\"node\");\r\n                if (sprite) {\r\n                    node.children.push(sprite);\r\n                    node.on(\"width\", function () {\r\n                        _this._positionBullet(bullet);\r\n                    });\r\n                    node.on(\"height\", function () {\r\n                        _this._positionBullet(bullet);\r\n                    });\r\n                }\r\n            }\r\n            return bullet;\r\n        }\r\n    });\r\n    Object.defineProperty(Hierarchy.prototype, \"_positionBullet\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (bullet) {\r\n            var sprite = bullet.get(\"sprite\");\r\n            if (sprite) {\r\n                var dataItem = sprite.dataItem;\r\n                var locationX = bullet.get(\"locationX\", 0.5);\r\n                var locationY = bullet.get(\"locationY\", 0.5);\r\n                var node = dataItem.get(\"node\");\r\n                sprite.set(\"x\", node.width() * locationX);\r\n                sprite.set(\"y\", node.height() * locationY);\r\n            }\r\n        }\r\n    });\r\n    /**\r\n     * Triggers hover on a series data item.\r\n     *\r\n     * @since 5.0.7\r\n     * @param  dataItem  Target data item\r\n     */\r\n    Object.defineProperty(Hierarchy.prototype, \"hoverDataItem\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (dataItem) {\r\n            var node = dataItem.get(\"node\");\r\n            if (node && !node.isHidden()) {\r\n                node.hover();\r\n            }\r\n        }\r\n    });\r\n    /**\r\n     * Triggers un-hover on a series data item.\r\n     *\r\n     * @since 5.0.7\r\n     * @param  dataItem  Target data item\r\n     */\r\n    Object.defineProperty(Hierarchy.prototype, \"unhoverDataItem\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (dataItem) {\r\n            var node = dataItem.get(\"node\");\r\n            if (node) {\r\n                node.unhover();\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Hierarchy, \"className\", {\r\n        enumerable: true,\r\n        configurable: true,\r\n        writable: true,\r\n        value: \"Hierarchy\"\r\n    });\r\n    Object.defineProperty(Hierarchy, \"classNames\", {\r\n        enumerable: true,\r\n        configurable: true,\r\n        writable: true,\r\n        value: Series.classNames.concat([Hierarchy.className])\r\n    });\r\n    return Hierarchy;\r\n}(Series));\r\nexport { Hierarchy };\r\n//# sourceMappingURL=Hierarchy.js.map","import { __extends } from \"tslib\";\r\nimport { Hierarchy } from \"./Hierarchy\";\r\nimport { Template } from \"../../core/util/Template\";\r\nimport { ListTemplate } from \"../../core/util/List\";\r\nimport { RoundedRectangle } from \"../../core/render/RoundedRectangle\";\r\nimport * as $array from \"../../core/util/Array\";\r\nimport * as $type from \"../../core/util/Type\";\r\nimport * as $utils from \"../../core/util/Utils\";\r\nimport * as d3hierarchy from \"d3-hierarchy\";\r\n;\r\n/**\r\n * Treemap series.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/charts/hierarchy/treemap/} for more info\r\n */\r\nvar Treemap = /** @class */ (function (_super) {\r\n    __extends(Treemap, _super);\r\n    function Treemap() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        Object.defineProperty(_this, \"_tag\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: \"treemap\"\r\n        });\r\n        Object.defineProperty(_this, \"rectangleTemplate\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: Template.new({})\r\n        });\r\n        Object.defineProperty(_this, \"_treemapLayout\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: d3hierarchy.treemap().tile(d3hierarchy.treemapSquarify)\r\n        });\r\n        /**\r\n         * A list of node rectangle elements in a [[Treemap]] chart.\r\n         *\r\n         * @default new ListTemplate<RoundedRectangle>\r\n         */\r\n        Object.defineProperty(_this, \"rectangles\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: new ListTemplate(Template.new({}), function () { return RoundedRectangle._new(_this._root, {\r\n                themeTags: $utils.mergeTags(_this.rectangles.template.get(\"themeTags\", []), [_this._tag, \"shape\"])\r\n            }, [_this.rectangles.template]); })\r\n        });\r\n        return _this;\r\n    }\r\n    Object.defineProperty(Treemap.prototype, \"_afterNew\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            _super.prototype._afterNew.call(this);\r\n            this.setPrivate(\"scaleX\", 1);\r\n            this.setPrivate(\"scaleY\", 1);\r\n        }\r\n    });\r\n    Object.defineProperty(Treemap.prototype, \"_prepareChildren\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            _super.prototype._prepareChildren.call(this);\r\n            if (this.isDirty(\"layoutAlgorithm\")) {\r\n                var algorithm = void 0;\r\n                switch (this.get(\"layoutAlgorithm\")) {\r\n                    case \"squarify\":\r\n                        algorithm = d3hierarchy.treemapSquarify;\r\n                        break;\r\n                    case \"binary\":\r\n                        algorithm = d3hierarchy.treemapBinary;\r\n                        break;\r\n                    case \"slice\":\r\n                        algorithm = d3hierarchy.treemapSlice;\r\n                        break;\r\n                    case \"dice\":\r\n                        algorithm = d3hierarchy.treemapDice;\r\n                        break;\r\n                    case \"sliceDice\":\r\n                        algorithm = d3hierarchy.treemapSliceDice;\r\n                        break;\r\n                }\r\n                if (algorithm) {\r\n                    this._treemapLayout = d3hierarchy.treemap().tile(algorithm);\r\n                }\r\n                if (this._rootNode) {\r\n                    this._updateNodes(this._rootNode);\r\n                }\r\n            }\r\n            if (this.isDirty(\"nodePaddingRight\") || this.isDirty(\"nodePaddingLeft\") || this.isDirty(\"nodePaddingTop\") || this.isDirty(\"nodePaddingBottom\") || this.isDirty(\"nodePaddingOuter\") || this.isDirty(\"nodePaddingInner\")) {\r\n                if (this._rootNode) {\r\n                    this._updateNodes(this._rootNode);\r\n                }\r\n            }\r\n            if (this.isPrivateDirty(\"scaleX\") || this.isPrivateDirty(\"scaleY\")) {\r\n                if (this._rootNode) {\r\n                    this._updateNodesScale(this._rootNode);\r\n                }\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Treemap.prototype, \"_updateVisuals\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            if (this._rootNode) {\r\n                var treemapLayout = this._treemapLayout;\r\n                treemapLayout.size([this.innerWidth(), this.innerHeight()]);\r\n                var paddingLeft = this.get(\"nodePaddingLeft\");\r\n                var paddingRight = this.get(\"nodePaddingRight\");\r\n                var paddingTop = this.get(\"nodePaddingTop\");\r\n                var paddingBottom = this.get(\"nodePaddingBottom\");\r\n                var paddingInner = this.get(\"nodePaddingInner\");\r\n                var paddingOuter = this.get(\"nodePaddingOuter\");\r\n                if ($type.isNumber(paddingLeft)) {\r\n                    treemapLayout.paddingLeft(paddingLeft);\r\n                }\r\n                if ($type.isNumber(paddingRight)) {\r\n                    treemapLayout.paddingRight(paddingRight);\r\n                }\r\n                if ($type.isNumber(paddingTop)) {\r\n                    treemapLayout.paddingTop(paddingTop);\r\n                }\r\n                if ($type.isNumber(paddingBottom)) {\r\n                    treemapLayout.paddingBottom(paddingBottom);\r\n                }\r\n                if ($type.isNumber(paddingInner)) {\r\n                    treemapLayout.paddingInner(paddingInner);\r\n                }\r\n                if ($type.isNumber(paddingOuter)) {\r\n                    treemapLayout.paddingOuter(paddingOuter);\r\n                }\r\n                treemapLayout(this._rootNode);\r\n                this._updateNodes(this._rootNode);\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Treemap.prototype, \"_updateNode\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (dataItem) {\r\n            _super.prototype._updateNode.call(this, dataItem);\r\n            var node = dataItem.get(\"node\");\r\n            var rectangle = dataItem.get(\"rectangle\");\r\n            var hierarchyNode = dataItem.get(\"d3HierarchyNode\");\r\n            var scaleX = this.getPrivate(\"scaleX\", 1);\r\n            var scaleY = this.getPrivate(\"scaleY\", 1);\r\n            var x0 = hierarchyNode.x0 * scaleX;\r\n            var x1 = hierarchyNode.x1 * scaleX;\r\n            var y0 = hierarchyNode.y0 * scaleY;\r\n            var y1 = hierarchyNode.y1 * scaleY;\r\n            var w = x1 - x0;\r\n            var h = y1 - y0;\r\n            var duration = this.get(\"animationDuration\", 0);\r\n            var easing = this.get(\"animationEasing\");\r\n            node.animate({ key: \"x\", to: x0, duration: duration, easing: easing });\r\n            node.animate({ key: \"y\", to: y0, duration: duration, easing: easing });\r\n            node.animate({ key: \"width\", to: w, duration: duration, easing: easing });\r\n            node.animate({ key: \"height\", to: h, duration: duration, easing: easing });\r\n            if (rectangle) {\r\n                var fill = dataItem.get(\"fill\");\r\n                rectangle.animate({ key: \"width\", to: w, duration: duration, easing: easing });\r\n                rectangle.animate({ key: \"height\", to: h, duration: duration, easing: easing });\r\n                rectangle._setDefault(\"fill\", fill);\r\n                rectangle._setDefault(\"stroke\", fill);\r\n            }\r\n        }\r\n    });\r\n    Object.defineProperty(Treemap.prototype, \"_updateNodesScale\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (hierarchyNode) {\r\n            var _this = this;\r\n            var dataItem = hierarchyNode.data.dataItem;\r\n            if (dataItem) {\r\n                var node = dataItem.get(\"node\");\r\n                var rectangle = dataItem.get(\"rectangle\");\r\n                var scaleX = this.getPrivate(\"scaleX\", 1);\r\n                var scaleY = this.getPrivate(\"scaleY\", 1);\r\n                var x0 = hierarchyNode.x0 * scaleX;\r\n                var x1 = hierarchyNode.x1 * scaleX;\r\n                var y0 = hierarchyNode.y0 * scaleY;\r\n                var y1 = hierarchyNode.y1 * scaleY;\r\n                var w = x1 - x0;\r\n                var h = y1 - y0;\r\n                node.setAll({ x: x0, y: y0, width: w, height: h });\r\n                rectangle.setAll({ width: w, height: h });\r\n                var hierarchyChildren = hierarchyNode.children;\r\n                if (hierarchyChildren) {\r\n                    $array.each(hierarchyChildren, function (hierarchyChild) {\r\n                        _this._updateNodesScale(hierarchyChild);\r\n                    });\r\n                }\r\n            }\r\n        }\r\n    });\r\n    /**\r\n     * @ignore\r\n     */\r\n    Object.defineProperty(Treemap.prototype, \"makeNode\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (dataItem) {\r\n            var node = _super.prototype.makeNode.call(this, dataItem);\r\n            var rectangle = node.children.moveValue(this.rectangles.make(), 0);\r\n            node.setPrivate(\"tooltipTarget\", rectangle);\r\n            dataItem.setRaw(\"rectangle\", rectangle);\r\n            var label = dataItem.get(\"label\");\r\n            rectangle.on(\"width\", function () {\r\n                label.setPrivate(\"maxWidth\", rectangle.width());\r\n            });\r\n            rectangle.on(\"height\", function () {\r\n                label.setPrivate(\"maxHeight\", rectangle.height());\r\n            });\r\n            return node;\r\n        }\r\n    });\r\n    Object.defineProperty(Treemap.prototype, \"_zoom\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function (dataItem) {\r\n            var hierarchyNode = dataItem.get(\"d3HierarchyNode\");\r\n            var nodePaddingOuter = this.get(\"nodePaddingOuter\", 0);\r\n            var x0 = hierarchyNode.x0 + nodePaddingOuter;\r\n            var x1 = hierarchyNode.x1 - nodePaddingOuter;\r\n            var y0 = hierarchyNode.y0 + nodePaddingOuter;\r\n            var y1 = hierarchyNode.y1 - nodePaddingOuter;\r\n            var scaleX = (this.innerWidth() - nodePaddingOuter * 2) / (x1 - x0);\r\n            var scaleY = (this.innerHeight() - nodePaddingOuter * 2) / (y1 - y0);\r\n            var easing = this.get(\"animationEasing\");\r\n            var duration = this.get(\"animationDuration\", 0);\r\n            this.animatePrivate({ key: \"scaleX\", to: scaleX, duration: duration, easing: easing });\r\n            this.animatePrivate({ key: \"scaleY\", to: scaleY, duration: duration, easing: easing });\r\n            this.nodesContainer.animate({ key: \"x\", to: nodePaddingOuter - x0 * scaleX, duration: duration, easing: easing });\r\n            this.nodesContainer.animate({ key: \"y\", to: nodePaddingOuter - y0 * scaleY, duration: duration, easing: easing });\r\n        }\r\n    });\r\n    Object.defineProperty(Treemap, \"className\", {\r\n        enumerable: true,\r\n        configurable: true,\r\n        writable: true,\r\n        value: \"Treemap\"\r\n    });\r\n    Object.defineProperty(Treemap, \"classNames\", {\r\n        enumerable: true,\r\n        configurable: true,\r\n        writable: true,\r\n        value: Hierarchy.classNames.concat([Treemap.className])\r\n    });\r\n    return Treemap;\r\n}(Hierarchy));\r\nexport { Treemap };\r\n//# sourceMappingURL=Treemap.js.map","import { __extends } from \"tslib\";\r\nimport { Theme } from \"../core/Theme\";\r\n/**\r\n * @ignore\r\n */\r\nvar AnimatedTheme = /** @class */ (function (_super) {\r\n    __extends(AnimatedTheme, _super);\r\n    function AnimatedTheme() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    Object.defineProperty(AnimatedTheme.prototype, \"setupDefaultRules\", {\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true,\r\n        value: function () {\r\n            _super.prototype.setupDefaultRules.call(this);\r\n            this.rule(\"Component\").setAll({\r\n                interpolationDuration: 600\r\n            });\r\n            this.rule(\"Hierarchy\").set(\"animationDuration\", 600);\r\n            this.rule(\"Scrollbar\").set(\"animationDuration\", 600);\r\n            this.rule(\"Tooltip\").set(\"animationDuration\", 300);\r\n            this.rule(\"MapChart\").set(\"animationDuration\", 1000);\r\n            this.rule(\"MapChart\").set(\"wheelDuration\", 300);\r\n            this.rule(\"Entity\").setAll({\r\n                stateAnimationDuration: 600\r\n            });\r\n            this.rule(\"Sprite\").states.create(\"default\", { stateAnimationDuration: 600 });\r\n            this.rule(\"Tooltip\", [\"axis\"]).setAll({\r\n                animationDuration: 200\r\n            });\r\n            this.rule(\"WordCloud\").set(\"animationDuration\", 500);\r\n        }\r\n    });\r\n    return AnimatedTheme;\r\n}(Theme));\r\nexport { AnimatedTheme };\r\n//# sourceMappingURL=AnimatedTheme.js.map",":host {\n  display: block;\n}\n#chart {\n  height: 78vh;\n  width: 98vw;\n}","import { Component, Host, h, Prop } from '@stencil/core';\nimport * as am5 from \"@amcharts/amcharts5\";\nimport * as am5hierarchy from \"@amcharts/amcharts5/hierarchy\";\nimport am5themes_Animated from \"@amcharts/amcharts5/themes/Animated\";\nimport { ICommittee } from '../../utils/types';\n\n@Component({\n  tag: 'dc-council-visualization',\n  styleUrl: 'dc-council-visualization.css',\n  shadow: true,\n})\nexport class DcCouncilVisualization {\n\n  @Prop() committees: ICommittee[] = [];\n\n  chartEl: HTMLDivElement;\n  root = null;\n\n  componentDidLoad() {\n    this.createVisualization();\n  }\n  componentWillRender() {\n    this.createTreemap()\n  }\n  createVisualization() {\n    // debugger;\n    this.root = am5.Root.new( this.chartEl );\n    this.root.setThemes([\n      am5themes_Animated.new(this.root)\n    ]);\n    this.createTreemap();\n  }\n  private createTreemap() {\n    if(!this.root) {\n      return;\n    }\n    var container = this.root.container.children.push(\n      am5.Container.new(this.root, {\n        width: am5.percent(100),\n        height: am5.percent(100),\n        layout: this.root.verticalLayout\n      })\n    );\n    var series = container.children.push(\n      am5hierarchy.Treemap.new(this.root, {\n        downDepth: 1,\n        upDepth: 0,\n        initialDepth: 1,\n        valueField: \"budget\",\n        categoryField: \"name\",\n        childDataField: \"agencies\",\n        // layoutAlgorithm: \"sliceDice\",\n        // nodePaddingOuter: 20,\n        // nodePaddingInner: 10\n      })\n    );\n    const data = this.compileCommitteeData(this.committees);\n\n    // This doesn't work (yet) for arrays\n    // series.data.processor = am5.DataProcessor.new(root, {\n    //   numericFields: [\"agencies.budget\"]\n    // });\n    series.data.setAll(data);\n    series.set(\"selectedDataItem\", series.dataItems[0]);\n\n    // series.rectangles.template.set(\"tooltipText\", \"{category}: [bold]${sum}[/]\");\n    series.labels.template.setAll({\n      text: \"{category}: [bold]${sum}[/]\",\n      fontSize: 14\n    });\n    \n    // Add breadcrumbs\n    container.children.unshift(\n      am5hierarchy.BreadcrumbBar.new(this.root, {\n        series: series\n      })\n    );\n  }\n\n  // Need to convert deeply nested budgets to numbers\n  compileCommitteeData(committees: ICommittee[]) {\n    const c = committees.reduce((arr, committee) => {\n      const agencies = committee.agencies.reduce((aarr, agency) => {\n        aarr.push({\n          ...agency,\n          budget: Number(agency.budget)\n        })\n        return aarr;\n      }, [])\n\n      arr.push({\n        ...committee,\n        name: `${committee.name}\\n${committee.members?.chair[0]?.name || \"No Chair\"}`,\n        agencies\n      })\n      return arr;\n    }, []);\n    return [{\n      name: \"Committees\",\n      agencies: c\n    }]\n  }\n\n  render() {\n    // const root = am5.Root.new(\"chartdiv\");\n\n    return (\n      <Host>\n        <dc-council-info-panel scale=\"l\">\n        <span slot=\"title\">\n          View Budget\n        </span>\n        <div slot=\"header\">Budget Visualization</div>\n        <div slot=\"content\">\n        <div id=\"chart\" ref={el => this.chartEl = el}></div>\n        </div>\n      </dc-council-info-panel>\n      </Host>\n    );\n  } \n}"]}